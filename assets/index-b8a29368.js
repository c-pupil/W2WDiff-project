var lpe=Object.defineProperty;var upe=(n,e,t)=>e in n?lpe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var cpe=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var En=(n,e,t)=>(upe(n,typeof e!="symbol"?e+"":e,t),t);var Hbt=cpe((Yl,Ql)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function j8(n,e){const t=Object.create(null),r=n.split(",");for(let i=0;i<r.length;i++)t[r[i]]=!0;return e?i=>!!t[i.toLowerCase()]:i=>!!t[i]}const la={},Xy=[],Jr=()=>{},dpe=()=>!1,fpe=/^on[^a-z]/,r4=n=>fpe.test(n),K8=n=>n.startsWith("onUpdate:"),qa=Object.assign,X8=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},hpe=Object.prototype.hasOwnProperty,Ir=(n,e)=>hpe.call(n,e),Ut=Array.isArray,Yy=n=>cw(n)==="[object Map]",i4=n=>cw(n)==="[object Set]",kp=n=>cw(n)==="[object Date]",hn=n=>typeof n=="function",ln=n=>typeof n=="string",Nx=n=>typeof n=="symbol",er=n=>n!==null&&typeof n=="object",Bx=n=>er(n)&&hn(n.then)&&hn(n.catch),oZ=Object.prototype.toString,cw=n=>oZ.call(n),ppe=n=>cw(n).slice(8,-1),Fx=n=>cw(n)==="[object Object]",Y8=n=>ln(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,KA=j8(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),a4=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},mpe=/-(\w)/g,iu=a4(n=>n.replace(mpe,(e,t)=>t?t.toUpperCase():"")),vpe=/\B([A-Z])/g,am=a4(n=>n.replace(vpe,"-$1").toLowerCase()),dw=a4(n=>n.charAt(0).toUpperCase()+n.slice(1)),GS=a4(n=>n?`on${dw(n)}`:""),Ux=(n,e)=>!Object.is(n,e),XA=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},ZE=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},wL=n=>{const e=parseFloat(n);return isNaN(e)?n:e},gpe=n=>{const e=ln(n)?Number(n):NaN;return isNaN(e)?n:e};let fz;const TL=()=>fz||(fz=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jt(n){if(Ut(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=ln(r)?Spe(r):Jt(r);if(i)for(const a in i)e[a]=i[a]}return e}else{if(ln(n))return n;if(er(n))return n}}const ype=/;(?![^(]*\))/g,_pe=/:([^]+)/,bpe=/\/\*[^]*?\*\//g;function Spe(n){const e={};return n.replace(bpe,"").split(ype).forEach(t=>{if(t){const r=t.split(_pe);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function J(n){let e="";if(ln(n))e=n;else if(Ut(n))for(let t=0;t<n.length;t++){const r=J(n[t]);r&&(e+=r+" ")}else if(er(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function Ac(n){if(!n)return null;let{class:e,style:t}=n;return e&&!ln(e)&&(n.class=J(e)),t&&(n.style=Jt(t)),n}const xpe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wpe=j8(xpe);function lZ(n){return!!n||n===""}function Tpe(n,e){if(n.length!==e.length)return!1;let t=!0;for(let r=0;t&&r<n.length;r++)t=b1(n[r],e[r]);return t}function b1(n,e){if(n===e)return!0;let t=kp(n),r=kp(e);if(t||r)return t&&r?n.getTime()===e.getTime():!1;if(t=Nx(n),r=Nx(e),t||r)return n===e;if(t=Ut(n),r=Ut(e),t||r)return t&&r?Tpe(n,e):!1;if(t=er(n),r=er(e),t||r){if(!t||!r)return!1;const i=Object.keys(n).length,a=Object.keys(e).length;if(i!==a)return!1;for(const s in n){const o=n.hasOwnProperty(s),l=e.hasOwnProperty(s);if(o&&!l||!o&&l||!b1(n[s],e[s]))return!1}}return String(n)===String(e)}function uZ(n,e){return n.findIndex(t=>b1(t,e))}const Ft=n=>ln(n)?n:n==null?"":Ut(n)||er(n)&&(n.toString===oZ||!hn(n.toString))?JSON.stringify(n,cZ,2):String(n),cZ=(n,e)=>e&&e.__v_isRef?cZ(n,e.value):Yy(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i])=>(t[`${r} =>`]=i,t),{})}:i4(e)?{[`Set(${e.size})`]:[...e.values()]}:er(e)&&!Ut(e)&&!Fx(e)?String(e):e;let Gl;class dZ{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Gl,!e&&Gl&&(this.index=(Gl.scopes||(Gl.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Gl;try{return Gl=this,e()}finally{Gl=t}}}on(){Gl=this}off(){Gl=this.parent}stop(e){if(this._active){let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Cpe(n){return new dZ(n)}function Ape(n,e=Gl){e&&e.active&&e.effects.push(n)}function fZ(){return Gl}function hZ(n){Gl&&Gl.cleanups.push(n)}const Q8=n=>{const e=new Set(n);return e.w=0,e.n=0,e},pZ=n=>(n.w&Lp)>0,mZ=n=>(n.n&Lp)>0,Epe=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=Lp},Mpe=n=>{const{deps:e}=n;if(e.length){let t=0;for(let r=0;r<e.length;r++){const i=e[r];pZ(i)&&!mZ(i)?i.delete(n):e[t++]=i,i.w&=~Lp,i.n&=~Lp}e.length=t}},JE=new WeakMap;let TS=0,Lp=1;const CL=30;let Tc;const z0=Symbol(""),AL=Symbol("");class Z8{constructor(e,t=null,r){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,Ape(this,r)}run(){if(!this.active)return this.fn();let e=Tc,t=_p;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Tc,Tc=this,_p=!0,Lp=1<<++TS,TS<=CL?Epe(this):hz(this),this.fn()}finally{TS<=CL&&Mpe(this),Lp=1<<--TS,Tc=this.parent,_p=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Tc===this?this.deferStop=!0:this.active&&(hz(this),this.onStop&&this.onStop(),this.active=!1)}}function hz(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let _p=!0;const vZ=[];function b_(){vZ.push(_p),_p=!1}function S_(){const n=vZ.pop();_p=n===void 0?!0:n}function Tl(n,e,t){if(_p&&Tc){let r=JE.get(n);r||JE.set(n,r=new Map);let i=r.get(t);i||r.set(t,i=Q8()),gZ(i)}}function gZ(n,e){let t=!1;TS<=CL?mZ(n)||(n.n|=Lp,t=!pZ(n)):t=!n.has(Tc),t&&(n.add(Tc),Tc.deps.push(n))}function Vf(n,e,t,r,i,a){const s=JE.get(n);if(!s)return;let o=[];if(e==="clear")o=[...s.values()];else if(t==="length"&&Ut(n)){const l=Number(r);s.forEach((u,c)=>{(c==="length"||c>=l)&&o.push(u)})}else switch(t!==void 0&&o.push(s.get(t)),e){case"add":Ut(n)?Y8(t)&&o.push(s.get("length")):(o.push(s.get(z0)),Yy(n)&&o.push(s.get(AL)));break;case"delete":Ut(n)||(o.push(s.get(z0)),Yy(n)&&o.push(s.get(AL)));break;case"set":Yy(n)&&o.push(s.get(z0));break}if(o.length===1)o[0]&&EL(o[0]);else{const l=[];for(const u of o)u&&l.push(...u);EL(Q8(l))}}function EL(n,e){const t=Ut(n)?n:[...n];for(const r of t)r.computed&&pz(r);for(const r of t)r.computed||pz(r)}function pz(n,e){(n!==Tc||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}function Ipe(n,e){var t;return(t=JE.get(n))==null?void 0:t.get(e)}const Dpe=j8("__proto__,__v_isRef,__isVue"),yZ=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Nx)),Ppe=J8(),Rpe=J8(!1,!0),kpe=J8(!0),mz=Lpe();function Lpe(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const r=ri(this);for(let a=0,s=this.length;a<s;a++)Tl(r,"get",a+"");const i=r[e](...t);return i===-1||i===!1?r[e](...t.map(ri)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){b_();const r=ri(this)[e].apply(this,t);return S_(),r}}),n}function Ope(n){const e=ri(this);return Tl(e,"has",n),e.hasOwnProperty(n)}function J8(n=!1,e=!1){return function(r,i,a){if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&a===(n?e?Qpe:wZ:e?xZ:SZ).get(r))return r;const s=Ut(r);if(!n){if(s&&Ir(mz,i))return Reflect.get(mz,i,a);if(i==="hasOwnProperty")return Ope}const o=Reflect.get(r,i,a);return(Nx(i)?yZ.has(i):Dpe(i))||(n||Tl(r,"get",i),e)?o:xi(o)?s&&Y8(i)?o:o.value:er(o)?n?Cv(o):$r(o):o}}const Npe=_Z(),Bpe=_Z(!0);function _Z(n=!1){return function(t,r,i,a){let s=t[r];if(S1(s)&&xi(s)&&!xi(i))return!1;if(!n&&(!eM(i)&&!S1(i)&&(s=ri(s),i=ri(i)),!Ut(t)&&xi(s)&&!xi(i)))return s.value=i,!0;const o=Ut(t)&&Y8(r)?Number(r)<t.length:Ir(t,r),l=Reflect.set(t,r,i,a);return t===ri(a)&&(o?Ux(i,s)&&Vf(t,"set",r,i):Vf(t,"add",r,i)),l}}function Fpe(n,e){const t=Ir(n,e);n[e];const r=Reflect.deleteProperty(n,e);return r&&t&&Vf(n,"delete",e,void 0),r}function Upe(n,e){const t=Reflect.has(n,e);return(!Nx(e)||!yZ.has(e))&&Tl(n,"has",e),t}function zpe(n){return Tl(n,"iterate",Ut(n)?"length":z0),Reflect.ownKeys(n)}const bZ={get:Ppe,set:Npe,deleteProperty:Fpe,has:Upe,ownKeys:zpe},Hpe={get:kpe,set(n,e){return!0},deleteProperty(n,e){return!0}},Vpe=qa({},bZ,{get:Rpe,set:Bpe}),eN=n=>n,s4=n=>Reflect.getPrototypeOf(n);function fT(n,e,t=!1,r=!1){n=n.__v_raw;const i=ri(n),a=ri(e);t||(e!==a&&Tl(i,"get",e),Tl(i,"get",a));const{has:s}=s4(i),o=r?eN:t?rN:zx;if(s.call(i,e))return o(n.get(e));if(s.call(i,a))return o(n.get(a));n!==i&&n.get(e)}function hT(n,e=!1){const t=this.__v_raw,r=ri(t),i=ri(n);return e||(n!==i&&Tl(r,"has",n),Tl(r,"has",i)),n===i?t.has(n):t.has(n)||t.has(i)}function pT(n,e=!1){return n=n.__v_raw,!e&&Tl(ri(n),"iterate",z0),Reflect.get(n,"size",n)}function vz(n){n=ri(n);const e=ri(this);return s4(e).has.call(e,n)||(e.add(n),Vf(e,"add",n,n)),this}function gz(n,e){e=ri(e);const t=ri(this),{has:r,get:i}=s4(t);let a=r.call(t,n);a||(n=ri(n),a=r.call(t,n));const s=i.call(t,n);return t.set(n,e),a?Ux(e,s)&&Vf(t,"set",n,e):Vf(t,"add",n,e),this}function yz(n){const e=ri(this),{has:t,get:r}=s4(e);let i=t.call(e,n);i||(n=ri(n),i=t.call(e,n)),r&&r.call(e,n);const a=e.delete(n);return i&&Vf(e,"delete",n,void 0),a}function _z(){const n=ri(this),e=n.size!==0,t=n.clear();return e&&Vf(n,"clear",void 0,void 0),t}function mT(n,e){return function(r,i){const a=this,s=a.__v_raw,o=ri(s),l=e?eN:n?rN:zx;return!n&&Tl(o,"iterate",z0),s.forEach((u,c)=>r.call(i,l(u),l(c),a))}}function vT(n,e,t){return function(...r){const i=this.__v_raw,a=ri(i),s=Yy(a),o=n==="entries"||n===Symbol.iterator&&s,l=n==="keys"&&s,u=i[n](...r),c=t?eN:e?rN:zx;return!e&&Tl(a,"iterate",l?AL:z0),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:o?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Ah(n){return function(...e){return n==="delete"?!1:this}}function $pe(){const n={get(a){return fT(this,a)},get size(){return pT(this)},has:hT,add:vz,set:gz,delete:yz,clear:_z,forEach:mT(!1,!1)},e={get(a){return fT(this,a,!1,!0)},get size(){return pT(this)},has:hT,add:vz,set:gz,delete:yz,clear:_z,forEach:mT(!1,!0)},t={get(a){return fT(this,a,!0)},get size(){return pT(this,!0)},has(a){return hT.call(this,a,!0)},add:Ah("add"),set:Ah("set"),delete:Ah("delete"),clear:Ah("clear"),forEach:mT(!0,!1)},r={get(a){return fT(this,a,!0,!0)},get size(){return pT(this,!0)},has(a){return hT.call(this,a,!0)},add:Ah("add"),set:Ah("set"),delete:Ah("delete"),clear:Ah("clear"),forEach:mT(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=vT(a,!1,!1),t[a]=vT(a,!0,!1),e[a]=vT(a,!1,!0),r[a]=vT(a,!0,!0)}),[n,t,e,r]}const[Gpe,Wpe,qpe,jpe]=$pe();function tN(n,e){const t=e?n?jpe:qpe:n?Wpe:Gpe;return(r,i,a)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Ir(t,i)&&i in r?t:r,i,a)}const Kpe={get:tN(!1,!1)},Xpe={get:tN(!1,!0)},Ype={get:tN(!0,!1)},SZ=new WeakMap,xZ=new WeakMap,wZ=new WeakMap,Qpe=new WeakMap;function Zpe(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jpe(n){return n.__v_skip||!Object.isExtensible(n)?0:Zpe(ppe(n))}function $r(n){return S1(n)?n:nN(n,!1,bZ,Kpe,SZ)}function TZ(n){return nN(n,!1,Vpe,Xpe,xZ)}function Cv(n){return nN(n,!0,Hpe,Ype,wZ)}function nN(n,e,t,r,i){if(!er(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const a=i.get(n);if(a)return a;const s=Jpe(n);if(s===0)return n;const o=new Proxy(n,s===2?r:t);return i.set(n,o),o}function Qy(n){return S1(n)?Qy(n.__v_raw):!!(n&&n.__v_isReactive)}function S1(n){return!!(n&&n.__v_isReadonly)}function eM(n){return!!(n&&n.__v_isShallow)}function CZ(n){return Qy(n)||S1(n)}function ri(n){const e=n&&n.__v_raw;return e?ri(e):n}function Lf(n){return ZE(n,"__v_skip",!0),n}const zx=n=>er(n)?$r(n):n,rN=n=>er(n)?Cv(n):n;function iN(n){_p&&Tc&&(n=ri(n),gZ(n.dep||(n.dep=Q8())))}function aN(n,e){n=ri(n);const t=n.dep;t&&EL(t)}function xi(n){return!!(n&&n.__v_isRef===!0)}function ie(n){return AZ(n,!1)}function jr(n){return AZ(n,!0)}function AZ(n,e){return xi(n)?n:new eme(n,e)}class eme{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ri(e),this._value=t?e:zx(e)}get value(){return iN(this),this._value}set value(e){const t=this.__v_isShallow||eM(e)||S1(e);e=t?e:ri(e),Ux(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:zx(e),aN(this))}}function S(n){return xi(n)?n.value:n}const tme={get:(n,e,t)=>S(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return xi(i)&&!xi(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function EZ(n){return Qy(n)?n:new Proxy(n,tme)}class nme{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:r}=e(()=>iN(this),()=>aN(this));this._get=t,this._set=r}get value(){return this._get()}set value(e){this._set(e)}}function rme(n){return new nme(n)}function ja(n){const e=Ut(n)?new Array(n.length):{};for(const t in n)e[t]=MZ(n,t);return e}class ime{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Ipe(ri(this._object),this._key)}}class ame{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Kr(n,e,t){return xi(n)?n:hn(n)?new ame(n):er(n)&&arguments.length>1?MZ(n,e,t):ie(n)}function MZ(n,e,t){const r=n[e];return xi(r)?r:new ime(n,e,t)}class sme{constructor(e,t,r,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Z8(e,()=>{this._dirty||(this._dirty=!0,aN(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=ri(this);return iN(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ome(n,e,t=!1){let r,i;const a=hn(n);return a?(r=n,i=Jr):(r=n.get,i=n.set),new sme(r,i,a||!i,t)}function lme(n,...e){}function bp(n,e,t,r){let i;try{i=r?n(...r):n()}catch(a){o4(a,e,t)}return i}function Fu(n,e,t,r){if(hn(n)){const a=bp(n,e,t,r);return a&&Bx(a)&&a.catch(s=>{o4(s,e,t)}),a}const i=[];for(let a=0;a<n.length;a++)i.push(Fu(n[a],e,t,r));return i}function o4(n,e,t,r=!0){const i=e?e.vnode:null;if(e){let a=e.parent;const s=e.proxy,o=t;for(;a;){const u=a.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](n,s,o)===!1)return}a=a.parent}const l=e.appContext.config.errorHandler;if(l){bp(l,null,10,[n,s,o]);return}}ume(n,t,i,r)}function ume(n,e,t,r=!0){console.error(n)}let Hx=!1,ML=!1;const mo=[];let ud=0;const Zy=[];let gf=null,c0=0;const IZ=Promise.resolve();let sN=null;function cn(n){const e=sN||IZ;return n?e.then(this?n.bind(this):n):e}function cme(n){let e=ud+1,t=mo.length;for(;e<t;){const r=e+t>>>1;Vx(mo[r])<n?e=r+1:t=r}return e}function oN(n){(!mo.length||!mo.includes(n,Hx&&n.allowRecurse?ud+1:ud))&&(n.id==null?mo.push(n):mo.splice(cme(n.id),0,n),DZ())}function DZ(){!Hx&&!ML&&(ML=!0,sN=IZ.then(RZ))}function dme(n){const e=mo.indexOf(n);e>ud&&mo.splice(e,1)}function fme(n){Ut(n)?Zy.push(...n):(!gf||!gf.includes(n,n.allowRecurse?c0+1:c0))&&Zy.push(n),DZ()}function bz(n,e=Hx?ud+1:0){for(;e<mo.length;e++){const t=mo[e];t&&t.pre&&(mo.splice(e,1),e--,t())}}function PZ(n){if(Zy.length){const e=[...new Set(Zy)];if(Zy.length=0,gf){gf.push(...e);return}for(gf=e,gf.sort((t,r)=>Vx(t)-Vx(r)),c0=0;c0<gf.length;c0++)gf[c0]();gf=null,c0=0}}const Vx=n=>n.id==null?1/0:n.id,hme=(n,e)=>{const t=Vx(n)-Vx(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function RZ(n){ML=!1,Hx=!0,mo.sort(hme);const e=Jr;try{for(ud=0;ud<mo.length;ud++){const t=mo[ud];t&&t.active!==!1&&bp(t,null,14)}}finally{ud=0,mo.length=0,PZ(),Hx=!1,sN=null,(mo.length||Zy.length)&&RZ()}}function pme(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||la;let i=t;const a=e.startsWith("update:"),s=a&&e.slice(7);if(s&&s in r){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:d,trim:f}=r[c]||la;f&&(i=t.map(h=>ln(h)?h.trim():h)),d&&(i=t.map(wL))}let o,l=r[o=GS(e)]||r[o=GS(iu(e))];!l&&a&&(l=r[o=GS(am(e))]),l&&Fu(l,n,6,i);const u=r[o+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[o])return;n.emitted[o]=!0,Fu(u,n,6,i)}}function kZ(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const a=n.emits;let s={},o=!1;if(!hn(n)){const l=u=>{const c=kZ(u,e,!0);c&&(o=!0,qa(s,c))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!a&&!o?(er(n)&&r.set(n,null),null):(Ut(a)?a.forEach(l=>s[l]=null):qa(s,a),er(n)&&r.set(n,s),s)}function l4(n,e){return!n||!r4(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ir(n,e[0].toLowerCase()+e.slice(1))||Ir(n,am(e))||Ir(n,e))}let Gs=null,u4=null;function tM(n){const e=Gs;return Gs=n,u4=n&&n.type.__scopeId||null,e}function x_(n){u4=n}function w_(){u4=null}function Oe(n,e=Gs,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&kz(-1);const a=tM(e);let s;try{s=n(...i)}finally{tM(a),r._d&&kz(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function _D(n){const{type:e,vnode:t,proxy:r,withProxy:i,props:a,propsOptions:[s],slots:o,attrs:l,emit:u,render:c,renderCache:d,data:f,setupState:h,ctx:p,inheritAttrs:m}=n;let v,g;const y=tM(n);try{if(t.shapeFlag&4){const b=i||r;v=ad(c.call(b,b,d,a,h,f,p)),g=l}else{const b=e;v=ad(b.length>1?b(a,{attrs:l,slots:o,emit:u}):b(a,null)),g=e.props?l:mme(l)}}catch(b){KS.length=0,o4(b,n,1),v=be(So)}let _=v;if(g&&m!==!1){const b=Object.keys(g),{shapeFlag:x}=_;b.length&&x&7&&(s&&b.some(K8)&&(g=vme(g,s)),_=$f(_,g))}return t.dirs&&(_=$f(_),_.dirs=_.dirs?_.dirs.concat(t.dirs):t.dirs),t.transition&&(_.transition=t.transition),v=_,tM(y),v}const mme=n=>{let e;for(const t in n)(t==="class"||t==="style"||r4(t))&&((e||(e={}))[t]=n[t]);return e},vme=(n,e)=>{const t={};for(const r in n)(!K8(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function gme(n,e,t){const{props:r,children:i,component:a}=n,{props:s,children:o,patchFlag:l}=e,u=a.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?Sz(r,s,u):!!s;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(s[f]!==r[f]&&!l4(u,f))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:r===s?!1:r?s?Sz(r,s,u):!0:!!s;return!1}function Sz(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const a=r[i];if(e[a]!==n[a]&&!l4(t,a))return!0}return!1}function yme({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const _me=n=>n.__isSuspense;function bme(n,e){e&&e.pendingBranch?Ut(n)?e.effects.push(...n):e.effects.push(n):fme(n)}function vs(n,e){return lN(n,null,e)}const gT={};function St(n,e,t){return lN(n,e,t)}function lN(n,e,{immediate:t,deep:r,flush:i,onTrack:a,onTrigger:s}=la){var o;const l=fZ()===((o=As)==null?void 0:o.scope)?As:null;let u,c=!1,d=!1;if(xi(n)?(u=()=>n.value,c=eM(n)):Qy(n)?(u=()=>n,r=!0):Ut(n)?(d=!0,c=n.some(b=>Qy(b)||eM(b)),u=()=>n.map(b=>{if(xi(b))return b.value;if(Qy(b))return w0(b);if(hn(b))return bp(b,l,2)})):hn(n)?e?u=()=>bp(n,l,2):u=()=>{if(!(l&&l.isUnmounted))return f&&f(),Fu(n,l,3,[h])}:u=Jr,e&&r){const b=u;u=()=>w0(b())}let f,h=b=>{f=y.onStop=()=>{bp(b,l,4)}},p;if(qx)if(h=Jr,e?t&&Fu(e,l,3,[u(),d?[]:void 0,h]):u(),i==="sync"){const b=l0e();p=b.__watcherHandles||(b.__watcherHandles=[])}else return Jr;let m=d?new Array(n.length).fill(gT):gT;const v=()=>{if(y.active)if(e){const b=y.run();(r||c||(d?b.some((x,w)=>Ux(x,m[w])):Ux(b,m)))&&(f&&f(),Fu(e,l,3,[b,m===gT?void 0:d&&m[0]===gT?[]:m,h]),m=b)}else y.run()};v.allowRecurse=!!e;let g;i==="sync"?g=v:i==="post"?g=()=>ul(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),g=()=>oN(v));const y=new Z8(u,g);e?t?v():m=y.run():i==="post"?ul(y.run.bind(y),l&&l.suspense):y.run();const _=()=>{y.stop(),l&&l.scope&&X8(l.scope.effects,y)};return p&&p.push(_),_}function Sme(n,e,t){const r=this.proxy,i=ln(n)?n.includes(".")?LZ(r,n):()=>r[n]:n.bind(r,r);let a;hn(e)?a=e:(a=e.handler,t=e);const s=As;x1(this);const o=lN(i,a.bind(r),t);return s?x1(s):H0(),o}function LZ(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function w0(n,e){if(!er(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),xi(n))w0(n.value,e);else if(Ut(n))for(let t=0;t<n.length;t++)w0(n[t],e);else if(i4(n)||Yy(n))n.forEach(t=>{w0(t,e)});else if(Fx(n))for(const t in n)w0(n[t],e);return n}function Wn(n,e){const t=Gs;if(t===null)return n;const r=m4(t)||t.proxy,i=n.dirs||(n.dirs=[]);for(let a=0;a<e.length;a++){let[s,o,l,u=la]=e[a];s&&(hn(s)&&(s={mounted:s,updated:s}),s.deep&&w0(o),i.push({dir:s,instance:r,value:o,oldValue:void 0,arg:l,modifiers:u}))}return n}function Sm(n,e,t,r){const i=n.dirs,a=e&&e.dirs;for(let s=0;s<i.length;s++){const o=i[s];a&&(o.oldValue=a[s].value);let l=o.dir[r];l&&(b_(),Fu(l,t,8,[n.el,o,n,e]),S_())}}function OZ(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return zn(()=>{n.isMounted=!0}),Wr(()=>{n.isUnmounting=!0}),n}const cu=[Function,Array],NZ={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:cu,onEnter:cu,onAfterEnter:cu,onEnterCancelled:cu,onBeforeLeave:cu,onLeave:cu,onAfterLeave:cu,onLeaveCancelled:cu,onBeforeAppear:cu,onAppear:cu,onAfterAppear:cu,onAppearCancelled:cu},xme={name:"BaseTransition",props:NZ,setup(n,{slots:e}){const t=tr(),r=OZ();let i;return()=>{const a=e.default&&uN(e.default(),!0);if(!a||!a.length)return;let s=a[0];if(a.length>1){for(const m of a)if(m.type!==So){s=m;break}}const o=ri(n),{mode:l}=o;if(r.isLeaving)return bD(s);const u=xz(s);if(!u)return bD(s);const c=$x(u,o,r,t);Gx(u,c);const d=t.subTree,f=d&&xz(d);let h=!1;const{getTransitionKey:p}=u.type;if(p){const m=p();i===void 0?i=m:m!==i&&(i=m,h=!0)}if(f&&f.type!==So&&(!d0(u,f)||h)){const m=$x(f,o,r,t);if(Gx(f,m),l==="out-in")return r.isLeaving=!0,m.afterLeave=()=>{r.isLeaving=!1,t.update.active!==!1&&t.update()},bD(s);l==="in-out"&&u.type!==So&&(m.delayLeave=(v,g,y)=>{const _=BZ(r,f);_[String(f.key)]=f,v._leaveCb=()=>{g(),v._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=y})}return s}}},wme=xme;function BZ(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function $x(n,e,t,r){const{appear:i,mode:a,persisted:s=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:m,onAppear:v,onAfterAppear:g,onAppearCancelled:y}=e,_=String(n.key),b=BZ(t,n),x=(T,C)=>{T&&Fu(T,r,9,C)},w=(T,C)=>{const E=C[1];x(T,C),Ut(T)?T.every(I=>I.length<=1)&&E():T.length<=1&&E()},A={mode:a,persisted:s,beforeEnter(T){let C=o;if(!t.isMounted)if(i)C=m||o;else return;T._leaveCb&&T._leaveCb(!0);const E=b[_];E&&d0(n,E)&&E.el._leaveCb&&E.el._leaveCb(),x(C,[T])},enter(T){let C=l,E=u,I=c;if(!t.isMounted)if(i)C=v||l,E=g||u,I=y||c;else return;let P=!1;const L=T._enterCb=N=>{P||(P=!0,N?x(I,[T]):x(E,[T]),A.delayedLeave&&A.delayedLeave(),T._enterCb=void 0)};C?w(C,[T,L]):L()},leave(T,C){const E=String(n.key);if(T._enterCb&&T._enterCb(!0),t.isUnmounting)return C();x(d,[T]);let I=!1;const P=T._leaveCb=L=>{I||(I=!0,C(),L?x(p,[T]):x(h,[T]),T._leaveCb=void 0,b[E]===n&&delete b[E])};b[E]=n,f?w(f,[T,P]):P()},clone(T){return $x(T,e,t,r)}};return A}function bD(n){if(c4(n))return n=$f(n),n.children=null,n}function xz(n){return c4(n)?n.children?n.children[0]:void 0:n}function Gx(n,e){n.shapeFlag&6&&n.component?Gx(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function uN(n,e=!1,t){let r=[],i=0;for(let a=0;a<n.length;a++){let s=n[a];const o=t==null?s.key:String(t)+String(s.key!=null?s.key:a);s.type===on?(s.patchFlag&128&&i++,r=r.concat(uN(s.children,e,o))):(e||s.type!==So)&&r.push(o!=null?$f(s,{key:o}):s)}if(i>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}function Ne(n,e){return hn(n)?(()=>qa({name:n.name},e,{setup:n}))():n}const WS=n=>!!n.type.__asyncLoader,c4=n=>n.type.__isKeepAlive;function cN(n,e){UZ(n,"a",e)}function FZ(n,e){UZ(n,"da",e)}function UZ(n,e,t=As){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(d4(e,r,t),t){let i=t.parent;for(;i&&i.parent;)c4(i.parent.vnode)&&Tme(r,e,t,i),i=i.parent}}function Tme(n,e,t,r){const i=d4(e,n,r,!0);sm(()=>{X8(r[e],i)},t)}function d4(n,e,t=As,r=!1){if(t){const i=t[n]||(t[n]=[]),a=e.__weh||(e.__weh=(...s)=>{if(t.isUnmounted)return;b_(),x1(t);const o=Fu(e,t,n,s);return H0(),S_(),o});return r?i.unshift(a):i.push(a),a}}const ah=n=>(e,t=As)=>(!qx||n==="sp")&&d4(n,(...r)=>e(...r),t),f4=ah("bm"),zn=ah("m"),dN=ah("bu"),Ju=ah("u"),Wr=ah("bum"),sm=ah("um"),Cme=ah("sp"),Ame=ah("rtg"),Eme=ah("rtc");function Mme(n,e=As){d4("ec",n,e)}const fN="components",Ime="directives";function Kt(n,e){return hN(fN,n,!0,e)||n}const zZ=Symbol.for("v-ndc");function ir(n){return ln(n)?hN(fN,n,!1)||n:n||zZ}function h4(n){return hN(Ime,n)}function hN(n,e,t=!0,r=!1){const i=Gs||As;if(i){const a=i.type;if(n===fN){const o=a0e(a,!1);if(o&&(o===e||o===iu(e)||o===dw(iu(e))))return a}const s=wz(i[n]||a[n],e)||wz(i.appContext[n],e);return!s&&r?a:s}}function wz(n,e){return n&&(n[e]||n[iu(e)]||n[dw(iu(e))])}function ur(n,e,t,r){let i;const a=t&&t[r];if(Ut(n)||ln(n)){i=new Array(n.length);for(let s=0,o=n.length;s<o;s++)i[s]=e(n[s],s,void 0,a&&a[s])}else if(typeof n=="number"){i=new Array(n);for(let s=0;s<n;s++)i[s]=e(s+1,s,void 0,a&&a[s])}else if(er(n))if(n[Symbol.iterator])i=Array.from(n,(s,o)=>e(s,o,void 0,a&&a[o]));else{const s=Object.keys(n);i=new Array(s.length);for(let o=0,l=s.length;o<l;o++){const u=s[o];i[o]=e(n[u],u,o,a&&a[o])}}else i=[];return t&&(t[r]=i),i}function Wu(n,e){for(let t=0;t<e.length;t++){const r=e[t];if(Ut(r))for(let i=0;i<r.length;i++)n[r[i].name]=r[i].fn;else r&&(n[r.name]=r.key?(...i)=>{const a=r.fn(...i);return a&&(a.key=r.key),a}:r.fn)}return n}function at(n,e,t={},r,i){if(Gs.isCE||Gs.parent&&WS(Gs.parent)&&Gs.parent.isCE)return e!=="default"&&(t.name=e),be("slot",t,r&&r());let a=n[e];a&&a._c&&(a._d=!1),W();const s=a&&HZ(a(t)),o=pt(on,{key:t.key||s&&s.key||`_${e}`},s||(r?r():[]),s&&n._===1?64:-2);return!i&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),a&&a._c&&(a._d=!0),o}function HZ(n){return n.some(e=>qi(e)?!(e.type===So||e.type===on&&!HZ(e.children)):!0)?n:null}function Dme(n,e){const t={};for(const r in n)t[e&&/[A-Z]/.test(r)?`on:${r}`:GS(r)]=n[r];return t}const IL=n=>n?JZ(n)?m4(n)||n.proxy:IL(n.parent):null,qS=qa(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>IL(n.parent),$root:n=>IL(n.root),$emit:n=>n.emit,$options:n=>pN(n),$forceUpdate:n=>n.f||(n.f=()=>oN(n.update)),$nextTick:n=>n.n||(n.n=cn.bind(n.proxy)),$watch:n=>Sme.bind(n)}),SD=(n,e)=>n!==la&&!n.__isScriptSetup&&Ir(n,e),Pme={get({_:n},e){const{ctx:t,setupState:r,data:i,props:a,accessCache:s,type:o,appContext:l}=n;let u;if(e[0]!=="$"){const h=s[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return a[e]}else{if(SD(r,e))return s[e]=1,r[e];if(i!==la&&Ir(i,e))return s[e]=2,i[e];if((u=n.propsOptions[0])&&Ir(u,e))return s[e]=3,a[e];if(t!==la&&Ir(t,e))return s[e]=4,t[e];DL&&(s[e]=0)}}const c=qS[e];let d,f;if(c)return e==="$attrs"&&Tl(n,"get",e),c(n);if((d=o.__cssModules)&&(d=d[e]))return d;if(t!==la&&Ir(t,e))return s[e]=4,t[e];if(f=l.config.globalProperties,Ir(f,e))return f[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:a}=n;return SD(i,e)?(i[e]=t,!0):r!==la&&Ir(r,e)?(r[e]=t,!0):Ir(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(a[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:a}},s){let o;return!!t[s]||n!==la&&Ir(n,s)||SD(e,s)||(o=a[0])&&Ir(o,s)||Ir(r,s)||Ir(qS,s)||Ir(i.config.globalProperties,s)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Ir(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Oa(){return VZ().slots}function om(){return VZ().attrs}function VZ(){const n=tr();return n.setupContext||(n.setupContext=tJ(n))}function Tz(n){return Ut(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let DL=!0;function Rme(n){const e=pN(n),t=n.proxy,r=n.ctx;DL=!1,e.beforeCreate&&Cz(e.beforeCreate,n,"bc");const{data:i,computed:a,methods:s,watch:o,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:m,deactivated:v,beforeDestroy:g,beforeUnmount:y,destroyed:_,unmounted:b,render:x,renderTracked:w,renderTriggered:A,errorCaptured:T,serverPrefetch:C,expose:E,inheritAttrs:I,components:P,directives:L,filters:N}=e;if(u&&kme(u,r,null),s)for(const H in s){const U=s[H];hn(U)&&(r[H]=U.bind(t))}if(i){const H=i.call(t,t);er(H)&&(n.data=$r(H))}if(DL=!0,a)for(const H in a){const U=a[H],B=hn(U)?U.bind(t,t):hn(U.get)?U.get.bind(t,t):Jr,$=!hn(U)&&hn(U.set)?U.set.bind(t):Jr,ee=V({get:B,set:$});Object.defineProperty(r,H,{enumerable:!0,configurable:!0,get:()=>ee.value,set:re=>ee.value=re})}if(o)for(const H in o)$Z(o[H],r,t,H);if(l){const H=hn(l)?l.call(t):l;Reflect.ownKeys(H).forEach(U=>{pr(U,H[U])})}c&&Cz(c,n,"c");function k(H,U){Ut(U)?U.forEach(B=>H(B.bind(t))):U&&H(U.bind(t))}if(k(f4,d),k(zn,f),k(dN,h),k(Ju,p),k(cN,m),k(FZ,v),k(Mme,T),k(Eme,w),k(Ame,A),k(Wr,y),k(sm,b),k(Cme,C),Ut(E))if(E.length){const H=n.exposed||(n.exposed={});E.forEach(U=>{Object.defineProperty(H,U,{get:()=>t[U],set:B=>t[U]=B})})}else n.exposed||(n.exposed={});x&&n.render===Jr&&(n.render=x),I!=null&&(n.inheritAttrs=I),P&&(n.components=P),L&&(n.directives=L)}function kme(n,e,t=Jr){Ut(n)&&(n=PL(n));for(const r in n){const i=n[r];let a;er(i)?"default"in i?a=Yt(i.from||r,i.default,!0):a=Yt(i.from||r):a=Yt(i),xi(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):e[r]=a}}function Cz(n,e,t){Fu(Ut(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function $Z(n,e,t,r){const i=r.includes(".")?LZ(t,r):()=>t[r];if(ln(n)){const a=e[n];hn(a)&&St(i,a)}else if(hn(n))St(i,n.bind(t));else if(er(n))if(Ut(n))n.forEach(a=>$Z(a,e,t,r));else{const a=hn(n.handler)?n.handler.bind(t):e[n.handler];hn(a)&&St(i,a,n)}}function pN(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:a,config:{optionMergeStrategies:s}}=n.appContext,o=a.get(e);let l;return o?l=o:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(u=>nM(l,u,s,!0)),nM(l,e,s)),er(e)&&a.set(e,l),l}function nM(n,e,t,r=!1){const{mixins:i,extends:a}=e;a&&nM(n,a,t,!0),i&&i.forEach(s=>nM(n,s,t,!0));for(const s in e)if(!(r&&s==="expose")){const o=Lme[s]||t&&t[s];n[s]=o?o(n[s],e[s]):e[s]}return n}const Lme={data:Az,props:Ez,emits:Ez,methods:CS,computed:CS,beforeCreate:Ro,created:Ro,beforeMount:Ro,mounted:Ro,beforeUpdate:Ro,updated:Ro,beforeDestroy:Ro,beforeUnmount:Ro,destroyed:Ro,unmounted:Ro,activated:Ro,deactivated:Ro,errorCaptured:Ro,serverPrefetch:Ro,components:CS,directives:CS,watch:Nme,provide:Az,inject:Ome};function Az(n,e){return e?n?function(){return qa(hn(n)?n.call(this,this):n,hn(e)?e.call(this,this):e)}:e:n}function Ome(n,e){return CS(PL(n),PL(e))}function PL(n){if(Ut(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Ro(n,e){return n?[...new Set([].concat(n,e))]:e}function CS(n,e){return n?qa(Object.create(null),n,e):e}function Ez(n,e){return n?Ut(n)&&Ut(e)?[...new Set([...n,...e])]:qa(Object.create(null),Tz(n),Tz(e??{})):e}function Nme(n,e){if(!n)return e;if(!e)return n;const t=qa(Object.create(null),n);for(const r in e)t[r]=Ro(n[r],e[r]);return t}function GZ(){return{app:null,config:{isNativeTag:dpe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bme=0;function Fme(n,e){return function(r,i=null){hn(r)||(r=qa({},r)),i!=null&&!er(i)&&(i=null);const a=GZ(),s=new Set;let o=!1;const l=a.app={_uid:Bme++,_component:r,_props:i,_container:null,_context:a,_instance:null,version:u0e,get config(){return a.config},set config(u){},use(u,...c){return s.has(u)||(u&&hn(u.install)?(s.add(u),u.install(l,...c)):hn(u)&&(s.add(u),u(l,...c))),l},mixin(u){return a.mixins.includes(u)||a.mixins.push(u),l},component(u,c){return c?(a.components[u]=c,l):a.components[u]},directive(u,c){return c?(a.directives[u]=c,l):a.directives[u]},mount(u,c,d){if(!o){const f=be(r,i);return f.appContext=a,c&&e?e(f,u):n(f,u,d),o=!0,l._container=u,u.__vue_app__=l,m4(f.component)||f.component.proxy}},unmount(){o&&(n(null,l._container),delete l._container.__vue_app__)},provide(u,c){return a.provides[u]=c,l},runWithContext(u){rM=l;try{return u()}finally{rM=null}}};return l}}let rM=null;function pr(n,e){if(As){let t=As.provides;const r=As.parent&&As.parent.provides;r===t&&(t=As.provides=Object.create(r)),t[n]=e}}function Yt(n,e,t=!1){const r=As||Gs;if(r||rM){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:rM._context.provides;if(i&&n in i)return i[n];if(arguments.length>1)return t&&hn(e)?e.call(r&&r.proxy):e}}function Ume(n,e,t,r=!1){const i={},a={};ZE(a,p4,1),n.propsDefaults=Object.create(null),WZ(n,e,i,a);for(const s in n.propsOptions[0])s in i||(i[s]=void 0);t?n.props=r?i:TZ(i):n.type.props?n.props=i:n.props=a,n.attrs=a}function zme(n,e,t,r){const{props:i,attrs:a,vnode:{patchFlag:s}}=n,o=ri(i),[l]=n.propsOptions;let u=!1;if((r||s>0)&&!(s&16)){if(s&8){const c=n.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(l4(n.emitsOptions,f))continue;const h=e[f];if(l)if(Ir(a,f))h!==a[f]&&(a[f]=h,u=!0);else{const p=iu(f);i[p]=RL(l,o,p,h,n,!1)}else h!==a[f]&&(a[f]=h,u=!0)}}}else{WZ(n,e,i,a)&&(u=!0);let c;for(const d in o)(!e||!Ir(e,d)&&((c=am(d))===d||!Ir(e,c)))&&(l?t&&(t[d]!==void 0||t[c]!==void 0)&&(i[d]=RL(l,o,d,void 0,n,!0)):delete i[d]);if(a!==o)for(const d in a)(!e||!Ir(e,d))&&(delete a[d],u=!0)}u&&Vf(n,"set","$attrs")}function WZ(n,e,t,r){const[i,a]=n.propsOptions;let s=!1,o;if(e)for(let l in e){if(KA(l))continue;const u=e[l];let c;i&&Ir(i,c=iu(l))?!a||!a.includes(c)?t[c]=u:(o||(o={}))[c]=u:l4(n.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,s=!0)}if(a){const l=ri(t),u=o||la;for(let c=0;c<a.length;c++){const d=a[c];t[d]=RL(i,l,d,u[d],n,!Ir(u,d))}}return s}function RL(n,e,t,r,i,a){const s=n[t];if(s!=null){const o=Ir(s,"default");if(o&&r===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&hn(l)){const{propsDefaults:u}=i;t in u?r=u[t]:(x1(i),r=u[t]=l.call(null,e),H0())}else r=l}s[0]&&(a&&!o?r=!1:s[1]&&(r===""||r===am(t))&&(r=!0))}return r}function qZ(n,e,t=!1){const r=e.propsCache,i=r.get(n);if(i)return i;const a=n.props,s={},o=[];let l=!1;if(!hn(n)){const c=d=>{l=!0;const[f,h]=qZ(d,e,!0);qa(s,f),h&&o.push(...h)};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!a&&!l)return er(n)&&r.set(n,Xy),Xy;if(Ut(a))for(let c=0;c<a.length;c++){const d=iu(a[c]);Mz(d)&&(s[d]=la)}else if(a)for(const c in a){const d=iu(c);if(Mz(d)){const f=a[c],h=s[d]=Ut(f)||hn(f)?{type:f}:qa({},f);if(h){const p=Pz(Boolean,h.type),m=Pz(String,h.type);h[0]=p>-1,h[1]=m<0||p<m,(p>-1||Ir(h,"default"))&&o.push(d)}}}const u=[s,o];return er(n)&&r.set(n,u),u}function Mz(n){return n[0]!=="$"}function Iz(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function Dz(n,e){return Iz(n)===Iz(e)}function Pz(n,e){return Ut(e)?e.findIndex(t=>Dz(t,n)):hn(e)&&Dz(e,n)?0:-1}const jZ=n=>n[0]==="_"||n==="$stable",mN=n=>Ut(n)?n.map(ad):[ad(n)],Hme=(n,e,t)=>{if(e._n)return e;const r=Oe((...i)=>mN(e(...i)),t);return r._c=!1,r},KZ=(n,e,t)=>{const r=n._ctx;for(const i in n){if(jZ(i))continue;const a=n[i];if(hn(a))e[i]=Hme(i,a,r);else if(a!=null){const s=mN(a);e[i]=()=>s}}},XZ=(n,e)=>{const t=mN(e);n.slots.default=()=>t},Vme=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=ri(e),ZE(e,"_",t)):KZ(e,n.slots={})}else n.slots={},e&&XZ(n,e);ZE(n.slots,p4,1)},$me=(n,e,t)=>{const{vnode:r,slots:i}=n;let a=!0,s=la;if(r.shapeFlag&32){const o=e._;o?t&&o===1?a=!1:(qa(i,e),!t&&o===1&&delete i._):(a=!e.$stable,KZ(e,i)),s=e}else e&&(XZ(n,e),s={default:1});if(a)for(const o in i)!jZ(o)&&!(o in s)&&delete i[o]};function kL(n,e,t,r,i=!1){if(Ut(n)){n.forEach((f,h)=>kL(f,e&&(Ut(e)?e[h]:e),t,r,i));return}if(WS(r)&&!i)return;const a=r.shapeFlag&4?m4(r.component)||r.component.proxy:r.el,s=i?null:a,{i:o,r:l}=n,u=e&&e.r,c=o.refs===la?o.refs={}:o.refs,d=o.setupState;if(u!=null&&u!==l&&(ln(u)?(c[u]=null,Ir(d,u)&&(d[u]=null)):xi(u)&&(u.value=null)),hn(l))bp(l,o,12,[s,c]);else{const f=ln(l),h=xi(l);if(f||h){const p=()=>{if(n.f){const m=f?Ir(d,l)?d[l]:c[l]:l.value;i?Ut(m)&&X8(m,a):Ut(m)?m.includes(a)||m.push(a):f?(c[l]=[a],Ir(d,l)&&(d[l]=c[l])):(l.value=[a],n.k&&(c[n.k]=l.value))}else f?(c[l]=s,Ir(d,l)&&(d[l]=s)):h&&(l.value=s,n.k&&(c[n.k]=s))};s?(p.id=-1,ul(p,t)):p()}}}const ul=bme;function Gme(n){return Wme(n)}function Wme(n,e){const t=TL();t.__VUE__=!0;const{insert:r,remove:i,patchProp:a,createElement:s,createText:o,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=Jr,insertStaticContent:p}=n,m=(Y,he,le,Ke=null,Ue=null,Ze=null,je=!1,He=null,ut=!!he.dynamicChildren)=>{if(Y===he)return;Y&&!d0(Y,he)&&(Ke=me(Y),re(Y,Ue,Ze,!0),Y=null),he.patchFlag===-2&&(ut=!1,he.dynamicChildren=null);const{type:ge,ref:q,shapeFlag:te}=he;switch(ge){case T_:v(Y,he,le,Ke);break;case So:g(Y,he,le,Ke);break;case xD:Y==null&&y(he,le,Ke,je);break;case on:P(Y,he,le,Ke,Ue,Ze,je,He,ut);break;default:te&1?x(Y,he,le,Ke,Ue,Ze,je,He,ut):te&6?L(Y,he,le,Ke,Ue,Ze,je,He,ut):(te&64||te&128)&&ge.process(Y,he,le,Ke,Ue,Ze,je,He,ut,Be)}q!=null&&Ue&&kL(q,Y&&Y.ref,Ze,he||Y,!he)},v=(Y,he,le,Ke)=>{if(Y==null)r(he.el=o(he.children),le,Ke);else{const Ue=he.el=Y.el;he.children!==Y.children&&u(Ue,he.children)}},g=(Y,he,le,Ke)=>{Y==null?r(he.el=l(he.children||""),le,Ke):he.el=Y.el},y=(Y,he,le,Ke)=>{[Y.el,Y.anchor]=p(Y.children,he,le,Ke,Y.el,Y.anchor)},_=({el:Y,anchor:he},le,Ke)=>{let Ue;for(;Y&&Y!==he;)Ue=f(Y),r(Y,le,Ke),Y=Ue;r(he,le,Ke)},b=({el:Y,anchor:he})=>{let le;for(;Y&&Y!==he;)le=f(Y),i(Y),Y=le;i(he)},x=(Y,he,le,Ke,Ue,Ze,je,He,ut)=>{je=je||he.type==="svg",Y==null?w(he,le,Ke,Ue,Ze,je,He,ut):C(Y,he,Ue,Ze,je,He,ut)},w=(Y,he,le,Ke,Ue,Ze,je,He)=>{let ut,ge;const{type:q,props:te,shapeFlag:ye,transition:Ve,dirs:et}=Y;if(ut=Y.el=s(Y.type,Ze,te&&te.is,te),ye&8?c(ut,Y.children):ye&16&&T(Y.children,ut,null,Ke,Ue,Ze&&q!=="foreignObject",je,He),et&&Sm(Y,null,Ke,"created"),A(ut,Y,Y.scopeId,je,Ke),te){for(const It in te)It!=="value"&&!KA(It)&&a(ut,It,null,te[It],Ze,Y.children,Ke,Ue,de);"value"in te&&a(ut,"value",null,te.value),(ge=te.onVnodeBeforeMount)&&Qc(ge,Ke,Y)}et&&Sm(Y,null,Ke,"beforeMount");const At=(!Ue||Ue&&!Ue.pendingBranch)&&Ve&&!Ve.persisted;At&&Ve.beforeEnter(ut),r(ut,he,le),((ge=te&&te.onVnodeMounted)||At||et)&&ul(()=>{ge&&Qc(ge,Ke,Y),At&&Ve.enter(ut),et&&Sm(Y,null,Ke,"mounted")},Ue)},A=(Y,he,le,Ke,Ue)=>{if(le&&h(Y,le),Ke)for(let Ze=0;Ze<Ke.length;Ze++)h(Y,Ke[Ze]);if(Ue){let Ze=Ue.subTree;if(he===Ze){const je=Ue.vnode;A(Y,je,je.scopeId,je.slotScopeIds,Ue.parent)}}},T=(Y,he,le,Ke,Ue,Ze,je,He,ut=0)=>{for(let ge=ut;ge<Y.length;ge++){const q=Y[ge]=He?sp(Y[ge]):ad(Y[ge]);m(null,q,he,le,Ke,Ue,Ze,je,He)}},C=(Y,he,le,Ke,Ue,Ze,je)=>{const He=he.el=Y.el;let{patchFlag:ut,dynamicChildren:ge,dirs:q}=he;ut|=Y.patchFlag&16;const te=Y.props||la,ye=he.props||la;let Ve;le&&xm(le,!1),(Ve=ye.onVnodeBeforeUpdate)&&Qc(Ve,le,he,Y),q&&Sm(he,Y,le,"beforeUpdate"),le&&xm(le,!0);const et=Ue&&he.type!=="foreignObject";if(ge?E(Y.dynamicChildren,ge,He,le,Ke,et,Ze):je||U(Y,he,He,null,le,Ke,et,Ze,!1),ut>0){if(ut&16)I(He,he,te,ye,le,Ke,Ue);else if(ut&2&&te.class!==ye.class&&a(He,"class",null,ye.class,Ue),ut&4&&a(He,"style",te.style,ye.style,Ue),ut&8){const At=he.dynamicProps;for(let It=0;It<At.length;It++){const De=At[It],Tt=te[De],ot=ye[De];(ot!==Tt||De==="value")&&a(He,De,Tt,ot,Ue,Y.children,le,Ke,de)}}ut&1&&Y.children!==he.children&&c(He,he.children)}else!je&&ge==null&&I(He,he,te,ye,le,Ke,Ue);((Ve=ye.onVnodeUpdated)||q)&&ul(()=>{Ve&&Qc(Ve,le,he,Y),q&&Sm(he,Y,le,"updated")},Ke)},E=(Y,he,le,Ke,Ue,Ze,je)=>{for(let He=0;He<he.length;He++){const ut=Y[He],ge=he[He],q=ut.el&&(ut.type===on||!d0(ut,ge)||ut.shapeFlag&70)?d(ut.el):le;m(ut,ge,q,null,Ke,Ue,Ze,je,!0)}},I=(Y,he,le,Ke,Ue,Ze,je)=>{if(le!==Ke){if(le!==la)for(const He in le)!KA(He)&&!(He in Ke)&&a(Y,He,le[He],null,je,he.children,Ue,Ze,de);for(const He in Ke){if(KA(He))continue;const ut=Ke[He],ge=le[He];ut!==ge&&He!=="value"&&a(Y,He,ge,ut,je,he.children,Ue,Ze,de)}"value"in Ke&&a(Y,"value",le.value,Ke.value)}},P=(Y,he,le,Ke,Ue,Ze,je,He,ut)=>{const ge=he.el=Y?Y.el:o(""),q=he.anchor=Y?Y.anchor:o("");let{patchFlag:te,dynamicChildren:ye,slotScopeIds:Ve}=he;Ve&&(He=He?He.concat(Ve):Ve),Y==null?(r(ge,le,Ke),r(q,le,Ke),T(he.children,le,q,Ue,Ze,je,He,ut)):te>0&&te&64&&ye&&Y.dynamicChildren?(E(Y.dynamicChildren,ye,le,Ue,Ze,je,He),(he.key!=null||Ue&&he===Ue.subTree)&&vN(Y,he,!0)):U(Y,he,le,q,Ue,Ze,je,He,ut)},L=(Y,he,le,Ke,Ue,Ze,je,He,ut)=>{he.slotScopeIds=He,Y==null?he.shapeFlag&512?Ue.ctx.activate(he,le,Ke,je,ut):N(he,le,Ke,Ue,Ze,je,ut):F(Y,he,ut)},N=(Y,he,le,Ke,Ue,Ze,je)=>{const He=Y.component=t0e(Y,Ke,Ue);if(c4(Y)&&(He.ctx.renderer=Be),n0e(He),He.asyncDep){if(Ue&&Ue.registerDep(He,k),!Y.el){const ut=He.subTree=be(So);g(null,ut,he,le)}return}k(He,Y,he,le,Ue,Ze,je)},F=(Y,he,le)=>{const Ke=he.component=Y.component;if(gme(Y,he,le))if(Ke.asyncDep&&!Ke.asyncResolved){H(Ke,he,le);return}else Ke.next=he,dme(Ke.update),Ke.update();else he.el=Y.el,Ke.vnode=he},k=(Y,he,le,Ke,Ue,Ze,je)=>{const He=()=>{if(Y.isMounted){let{next:q,bu:te,u:ye,parent:Ve,vnode:et}=Y,At=q,It;xm(Y,!1),q?(q.el=et.el,H(Y,q,je)):q=et,te&&XA(te),(It=q.props&&q.props.onVnodeBeforeUpdate)&&Qc(It,Ve,q,et),xm(Y,!0);const De=_D(Y),Tt=Y.subTree;Y.subTree=De,m(Tt,De,d(Tt.el),me(Tt),Y,Ue,Ze),q.el=De.el,At===null&&yme(Y,De.el),ye&&ul(ye,Ue),(It=q.props&&q.props.onVnodeUpdated)&&ul(()=>Qc(It,Ve,q,et),Ue)}else{let q;const{el:te,props:ye}=he,{bm:Ve,m:et,parent:At}=Y,It=WS(he);if(xm(Y,!1),Ve&&XA(Ve),!It&&(q=ye&&ye.onVnodeBeforeMount)&&Qc(q,At,he),xm(Y,!0),te&&Ye){const De=()=>{Y.subTree=_D(Y),Ye(te,Y.subTree,Y,Ue,null)};It?he.type.__asyncLoader().then(()=>!Y.isUnmounted&&De()):De()}else{const De=Y.subTree=_D(Y);m(null,De,le,Ke,Y,Ue,Ze),he.el=De.el}if(et&&ul(et,Ue),!It&&(q=ye&&ye.onVnodeMounted)){const De=he;ul(()=>Qc(q,At,De),Ue)}(he.shapeFlag&256||At&&WS(At.vnode)&&At.vnode.shapeFlag&256)&&Y.a&&ul(Y.a,Ue),Y.isMounted=!0,he=le=Ke=null}},ut=Y.effect=new Z8(He,()=>oN(ge),Y.scope),ge=Y.update=()=>ut.run();ge.id=Y.uid,xm(Y,!0),ge()},H=(Y,he,le)=>{he.component=Y;const Ke=Y.vnode.props;Y.vnode=he,Y.next=null,zme(Y,he.props,Ke,le),$me(Y,he.children,le),b_(),bz(),S_()},U=(Y,he,le,Ke,Ue,Ze,je,He,ut=!1)=>{const ge=Y&&Y.children,q=Y?Y.shapeFlag:0,te=he.children,{patchFlag:ye,shapeFlag:Ve}=he;if(ye>0){if(ye&128){$(ge,te,le,Ke,Ue,Ze,je,He,ut);return}else if(ye&256){B(ge,te,le,Ke,Ue,Ze,je,He,ut);return}}Ve&8?(q&16&&de(ge,Ue,Ze),te!==ge&&c(le,te)):q&16?Ve&16?$(ge,te,le,Ke,Ue,Ze,je,He,ut):de(ge,Ue,Ze,!0):(q&8&&c(le,""),Ve&16&&T(te,le,Ke,Ue,Ze,je,He,ut))},B=(Y,he,le,Ke,Ue,Ze,je,He,ut)=>{Y=Y||Xy,he=he||Xy;const ge=Y.length,q=he.length,te=Math.min(ge,q);let ye;for(ye=0;ye<te;ye++){const Ve=he[ye]=ut?sp(he[ye]):ad(he[ye]);m(Y[ye],Ve,le,null,Ue,Ze,je,He,ut)}ge>q?de(Y,Ue,Ze,!0,!1,te):T(he,le,Ke,Ue,Ze,je,He,ut,te)},$=(Y,he,le,Ke,Ue,Ze,je,He,ut)=>{let ge=0;const q=he.length;let te=Y.length-1,ye=q-1;for(;ge<=te&&ge<=ye;){const Ve=Y[ge],et=he[ge]=ut?sp(he[ge]):ad(he[ge]);if(d0(Ve,et))m(Ve,et,le,null,Ue,Ze,je,He,ut);else break;ge++}for(;ge<=te&&ge<=ye;){const Ve=Y[te],et=he[ye]=ut?sp(he[ye]):ad(he[ye]);if(d0(Ve,et))m(Ve,et,le,null,Ue,Ze,je,He,ut);else break;te--,ye--}if(ge>te){if(ge<=ye){const Ve=ye+1,et=Ve<q?he[Ve].el:Ke;for(;ge<=ye;)m(null,he[ge]=ut?sp(he[ge]):ad(he[ge]),le,et,Ue,Ze,je,He,ut),ge++}}else if(ge>ye)for(;ge<=te;)re(Y[ge],Ue,Ze,!0),ge++;else{const Ve=ge,et=ge,At=new Map;for(ge=et;ge<=ye;ge++){const Le=he[ge]=ut?sp(he[ge]):ad(he[ge]);Le.key!=null&&At.set(Le.key,ge)}let It,De=0;const Tt=ye-et+1;let ot=!1,G=0;const _e=new Array(Tt);for(ge=0;ge<Tt;ge++)_e[ge]=0;for(ge=Ve;ge<=te;ge++){const Le=Y[ge];if(De>=Tt){re(Le,Ue,Ze,!0);continue}let we;if(Le.key!=null)we=At.get(Le.key);else for(It=et;It<=ye;It++)if(_e[It-et]===0&&d0(Le,he[It])){we=It;break}we===void 0?re(Le,Ue,Ze,!0):(_e[we-et]=ge+1,we>=G?G=we:ot=!0,m(Le,he[we],le,null,Ue,Ze,je,He,ut),De++)}const ve=ot?qme(_e):Xy;for(It=ve.length-1,ge=Tt-1;ge>=0;ge--){const Le=et+ge,we=he[Le],Ie=Le+1<q?he[Le+1].el:Ke;_e[ge]===0?m(null,we,le,Ie,Ue,Ze,je,He,ut):ot&&(It<0||ge!==ve[It]?ee(we,le,Ie,2):It--)}}},ee=(Y,he,le,Ke,Ue=null)=>{const{el:Ze,type:je,transition:He,children:ut,shapeFlag:ge}=Y;if(ge&6){ee(Y.component.subTree,he,le,Ke);return}if(ge&128){Y.suspense.move(he,le,Ke);return}if(ge&64){je.move(Y,he,le,Be);return}if(je===on){r(Ze,he,le);for(let te=0;te<ut.length;te++)ee(ut[te],he,le,Ke);r(Y.anchor,he,le);return}if(je===xD){_(Y,he,le);return}if(Ke!==2&&ge&1&&He)if(Ke===0)He.beforeEnter(Ze),r(Ze,he,le),ul(()=>He.enter(Ze),Ue);else{const{leave:te,delayLeave:ye,afterLeave:Ve}=He,et=()=>r(Ze,he,le),At=()=>{te(Ze,()=>{et(),Ve&&Ve()})};ye?ye(Ze,et,At):At()}else r(Ze,he,le)},re=(Y,he,le,Ke=!1,Ue=!1)=>{const{type:Ze,props:je,ref:He,children:ut,dynamicChildren:ge,shapeFlag:q,patchFlag:te,dirs:ye}=Y;if(He!=null&&kL(He,null,le,Y,!0),q&256){he.ctx.deactivate(Y);return}const Ve=q&1&&ye,et=!WS(Y);let At;if(et&&(At=je&&je.onVnodeBeforeUnmount)&&Qc(At,he,Y),q&6)pe(Y.component,le,Ke);else{if(q&128){Y.suspense.unmount(le,Ke);return}Ve&&Sm(Y,null,he,"beforeUnmount"),q&64?Y.type.remove(Y,he,le,Ue,Be,Ke):ge&&(Ze!==on||te>0&&te&64)?de(ge,he,le,!1,!0):(Ze===on&&te&384||!Ue&&q&16)&&de(ut,he,le),Ke&&ne(Y)}(et&&(At=je&&je.onVnodeUnmounted)||Ve)&&ul(()=>{At&&Qc(At,he,Y),Ve&&Sm(Y,null,he,"unmounted")},le)},ne=Y=>{const{type:he,el:le,anchor:Ke,transition:Ue}=Y;if(he===on){ae(le,Ke);return}if(he===xD){b(Y);return}const Ze=()=>{i(le),Ue&&!Ue.persisted&&Ue.afterLeave&&Ue.afterLeave()};if(Y.shapeFlag&1&&Ue&&!Ue.persisted){const{leave:je,delayLeave:He}=Ue,ut=()=>je(le,Ze);He?He(Y.el,Ze,ut):ut()}else Ze()},ae=(Y,he)=>{let le;for(;Y!==he;)le=f(Y),i(Y),Y=le;i(he)},pe=(Y,he,le)=>{const{bum:Ke,scope:Ue,update:Ze,subTree:je,um:He}=Y;Ke&&XA(Ke),Ue.stop(),Ze&&(Ze.active=!1,re(je,Y,he,le)),He&&ul(He,he),ul(()=>{Y.isUnmounted=!0},he),he&&he.pendingBranch&&!he.isUnmounted&&Y.asyncDep&&!Y.asyncResolved&&Y.suspenseId===he.pendingId&&(he.deps--,he.deps===0&&he.resolve())},de=(Y,he,le,Ke=!1,Ue=!1,Ze=0)=>{for(let je=Ze;je<Y.length;je++)re(Y[je],he,le,Ke,Ue)},me=Y=>Y.shapeFlag&6?me(Y.component.subTree):Y.shapeFlag&128?Y.suspense.next():f(Y.anchor||Y.el),ke=(Y,he,le)=>{Y==null?he._vnode&&re(he._vnode,null,null,!0):m(he._vnode||null,Y,he,null,null,null,le),bz(),PZ(),he._vnode=Y},Be={p:m,um:re,m:ee,r:ne,mt:N,mc:T,pc:U,pbc:E,n:me,o:n};let Xe,Ye;return e&&([Xe,Ye]=e(Be)),{render:ke,hydrate:Xe,createApp:Fme(ke,Xe)}}function xm({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function vN(n,e,t=!1){const r=n.children,i=e.children;if(Ut(r)&&Ut(i))for(let a=0;a<r.length;a++){const s=r[a];let o=i[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[a]=sp(i[a]),o.el=s.el),t||vN(s,o)),o.type===T_&&(o.el=s.el)}}function qme(n){const e=n.slice(),t=[0];let r,i,a,s,o;const l=n.length;for(r=0;r<l;r++){const u=n[r];if(u!==0){if(i=t[t.length-1],n[i]<u){e[r]=i,t.push(r);continue}for(a=0,s=t.length-1;a<s;)o=a+s>>1,n[t[o]]<u?a=o+1:s=o;u<n[t[a]]&&(a>0&&(e[r]=t[a-1]),t[a]=r)}}for(a=t.length,s=t[a-1];a-- >0;)t[a]=s,s=e[s];return t}const jme=n=>n.__isTeleport,jS=n=>n&&(n.disabled||n.disabled===""),Rz=n=>typeof SVGElement<"u"&&n instanceof SVGElement,LL=(n,e)=>{const t=n&&n.to;return ln(t)?e?e(t):null:t},Kme={__isTeleport:!0,process(n,e,t,r,i,a,s,o,l,u){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:m,createComment:v}}=u,g=jS(e.props);let{shapeFlag:y,children:_,dynamicChildren:b}=e;if(n==null){const x=e.el=m(""),w=e.anchor=m("");h(x,t,r),h(w,t,r);const A=e.target=LL(e.props,p),T=e.targetAnchor=m("");A&&(h(T,A),s=s||Rz(A));const C=(E,I)=>{y&16&&c(_,E,I,i,a,s,o,l)};g?C(t,w):A&&C(A,T)}else{e.el=n.el;const x=e.anchor=n.anchor,w=e.target=n.target,A=e.targetAnchor=n.targetAnchor,T=jS(n.props),C=T?t:w,E=T?x:A;if(s=s||Rz(w),b?(f(n.dynamicChildren,b,C,i,a,s,o),vN(n,e,!0)):l||d(n,e,C,E,i,a,s,o,!1),g)T||yT(e,t,x,u,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const I=e.target=LL(e.props,p);I&&yT(e,I,null,u,0)}else T&&yT(e,w,A,u,1)}YZ(e)},remove(n,e,t,r,{um:i,o:{remove:a}},s){const{shapeFlag:o,children:l,anchor:u,targetAnchor:c,target:d,props:f}=n;if(d&&a(c),(s||!jS(f))&&(a(u),o&16))for(let h=0;h<l.length;h++){const p=l[h];i(p,e,t,!0,!!p.dynamicChildren)}},move:yT,hydrate:Xme};function yT(n,e,t,{o:{insert:r},m:i},a=2){a===0&&r(n.targetAnchor,e,t);const{el:s,anchor:o,shapeFlag:l,children:u,props:c}=n,d=a===2;if(d&&r(s,e,t),(!d||jS(c))&&l&16)for(let f=0;f<u.length;f++)i(u[f],e,t,2);d&&r(o,e,t)}function Xme(n,e,t,r,i,a,{o:{nextSibling:s,parentNode:o,querySelector:l}},u){const c=e.target=LL(e.props,l);if(c){const d=c._lpa||c.firstChild;if(e.shapeFlag&16)if(jS(e.props))e.anchor=u(s(n),e,o(n),t,r,i,a),e.targetAnchor=d;else{e.anchor=s(n);let f=d;for(;f;)if(f=s(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,c._lpa=e.targetAnchor&&s(e.targetAnchor);break}u(d,e,c,t,r,i,a)}YZ(e)}return e.anchor&&s(e.anchor)}const Yme=Kme;function YZ(n){const e=n.ctx;if(e&&e.ut){let t=n.children[0].el;for(;t!==n.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}const on=Symbol.for("v-fgt"),T_=Symbol.for("v-txt"),So=Symbol.for("v-cmt"),xD=Symbol.for("v-stc"),KS=[];let Ec=null;function W(n=!1){KS.push(Ec=n?null:[])}function Qme(){KS.pop(),Ec=KS[KS.length-1]||null}let Wx=1;function kz(n){Wx+=n}function QZ(n){return n.dynamicChildren=Wx>0?Ec||Xy:null,Qme(),Wx>0&&Ec&&Ec.push(n),n}function Se(n,e,t,r,i,a){return QZ(Ce(n,e,t,r,i,a,!0))}function pt(n,e,t,r,i){return QZ(be(n,e,t,r,i,!0))}function qi(n){return n?n.__v_isVNode===!0:!1}function d0(n,e){return n.type===e.type&&n.key===e.key}const p4="__vInternal",ZZ=({key:n})=>n??null,YA=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?ln(n)||xi(n)||hn(n)?{i:Gs,r:n,k:e,f:!!t}:n:null);function Ce(n,e=null,t=null,r=0,i=null,a=n===on?0:1,s=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&ZZ(e),ref:e&&YA(e),scopeId:u4,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Gs};return o?(gN(l,t),a&128&&n.normalize(l)):t&&(l.shapeFlag|=ln(t)?8:16),Wx>0&&!s&&Ec&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&Ec.push(l),l}const be=Zme;function Zme(n,e=null,t=null,r=0,i=null,a=!1){if((!n||n===zZ)&&(n=So),qi(n)){const o=$f(n,e,!0);return t&&gN(o,t),Wx>0&&!a&&Ec&&(o.shapeFlag&6?Ec[Ec.indexOf(n)]=o:Ec.push(o)),o.patchFlag|=-2,o}if(s0e(n)&&(n=n.__vccOpts),e){e=Op(e);let{class:o,style:l}=e;o&&!ln(o)&&(e.class=J(o)),er(l)&&(CZ(l)&&!Ut(l)&&(l=qa({},l)),e.style=Jt(l))}const s=ln(n)?1:_me(n)?128:jme(n)?64:er(n)?4:hn(n)?2:0;return Ce(n,e,t,r,i,s,a,!0)}function Op(n){return n?CZ(n)||p4 in n?qa({},n):n:null}function $f(n,e,t=!1){const{props:r,ref:i,patchFlag:a,children:s}=n,o=e?lr(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:o,key:o&&ZZ(o),ref:e&&e.ref?t&&i?Ut(i)?i.concat(YA(e)):[i,YA(e)]:YA(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:s,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==on?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&$f(n.ssContent),ssFallback:n.ssFallback&&$f(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function Xn(n=" ",e=0){return be(T_,null,n,e)}function st(n="",e=!1){return e?(W(),pt(So,null,n)):be(So,null,n)}function ad(n){return n==null||typeof n=="boolean"?be(So):Ut(n)?be(on,null,n.slice()):typeof n=="object"?sp(n):be(T_,null,String(n))}function sp(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:$f(n)}function gN(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(Ut(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),gN(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!(p4 in e)?e._ctx=Gs:i===3&&Gs&&(Gs.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else hn(e)?(e={default:e,_ctx:Gs},t=32):(e=String(e),r&64?(t=16,e=[Xn(e)]):t=8);n.children=e,n.shapeFlag|=t}function lr(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=J([e.class,r.class]));else if(i==="style")e.style=Jt([e.style,r.style]);else if(r4(i)){const a=e[i],s=r[i];s&&a!==s&&!(Ut(a)&&a.includes(s))&&(e[i]=a?[].concat(a,s):s)}else i!==""&&(e[i]=r[i])}return e}function Qc(n,e,t,r=null){Fu(n,e,7,[t,r])}const Jme=GZ();let e0e=0;function t0e(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||Jme,a={uid:e0e++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new dZ(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:qZ(r,i),emitsOptions:kZ(r,i),emit:null,emitted:null,propsDefaults:la,inheritAttrs:r.inheritAttrs,ctx:la,data:la,props:la,attrs:la,slots:la,refs:la,setupState:la,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=pme.bind(null,a),n.ce&&n.ce(a),a}let As=null;const tr=()=>As||Gs;let yN,ng,Lz="__VUE_INSTANCE_SETTERS__";(ng=TL()[Lz])||(ng=TL()[Lz]=[]),ng.push(n=>As=n),yN=n=>{ng.length>1?ng.forEach(e=>e(n)):ng[0](n)};const x1=n=>{yN(n),n.scope.on()},H0=()=>{As&&As.scope.off(),yN(null)};function JZ(n){return n.vnode.shapeFlag&4}let qx=!1;function n0e(n,e=!1){qx=e;const{props:t,children:r}=n.vnode,i=JZ(n);Ume(n,t,i,e),Vme(n,r);const a=i?r0e(n,e):void 0;return qx=!1,a}function r0e(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=Lf(new Proxy(n.ctx,Pme));const{setup:r}=t;if(r){const i=n.setupContext=r.length>1?tJ(n):null;x1(n),b_();const a=bp(r,n,0,[n.props,i]);if(S_(),H0(),Bx(a)){if(a.then(H0,H0),e)return a.then(s=>{Oz(n,s,e)}).catch(s=>{o4(s,n,0)});n.asyncDep=a}else Oz(n,a,e)}else eJ(n,e)}function Oz(n,e,t){hn(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:er(e)&&(n.setupState=EZ(e)),eJ(n,t)}let Nz;function eJ(n,e,t){const r=n.type;if(!n.render){if(!e&&Nz&&!r.render){const i=r.template||pN(n).template;if(i){const{isCustomElement:a,compilerOptions:s}=n.appContext.config,{delimiters:o,compilerOptions:l}=r,u=qa(qa({isCustomElement:a,delimiters:o},s),l);r.render=Nz(i,u)}}n.render=r.render||Jr}x1(n),b_(),Rme(n),S_(),H0()}function i0e(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(e,t){return Tl(n,"get","$attrs"),e[t]}}))}function tJ(n){const e=t=>{n.exposed=t||{}};return{get attrs(){return i0e(n)},slots:n.slots,emit:n.emit,expose:e}}function m4(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(EZ(Lf(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in qS)return qS[t](n)},has(e,t){return t in e||t in qS}}))}function a0e(n,e=!0){return hn(n)?n.displayName||n.name:n.name||e&&n.__name}function s0e(n){return hn(n)&&"__vccOpts"in n}const V=(n,e)=>ome(n,e,qx);function an(n,e,t){const r=arguments.length;return r===2?er(e)&&!Ut(e)?qi(e)?be(n,null,[e]):be(n,e):be(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&qi(t)&&(t=[t]),be(n,e,t))}const o0e=Symbol.for("v-scx"),l0e=()=>Yt(o0e),u0e="3.3.4",c0e="http://www.w3.org/2000/svg",f0=typeof document<"u"?document:null,Bz=f0&&f0.createElement("template"),d0e={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e?f0.createElementNS(c0e,n):f0.createElement(n,t?{is:t}:void 0);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>f0.createTextNode(n),createComment:n=>f0.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>f0.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,a){const s=t?t.previousSibling:e.lastChild;if(i&&(i===a||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===a||!(i=i.nextSibling)););else{Bz.innerHTML=r?`<svg>${n}</svg>`:n;const o=Bz.content;if(r){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[s?s.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function f0e(n,e,t){const r=n._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function h0e(n,e,t){const r=n.style,i=ln(t);if(t&&!i){if(e&&!ln(e))for(const a in e)t[a]==null&&OL(r,a,"");for(const a in t)OL(r,a,t[a])}else{const a=r.display;i?e!==t&&(r.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(r.display=a)}}const Fz=/\s*!important$/;function OL(n,e,t){if(Ut(t))t.forEach(r=>OL(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=p0e(n,e);Fz.test(t)?n.setProperty(am(r),t.replace(Fz,""),"important"):n[r]=t}}const Uz=["Webkit","Moz","ms"],wD={};function p0e(n,e){const t=wD[e];if(t)return t;let r=iu(e);if(r!=="filter"&&r in n)return wD[e]=r;r=dw(r);for(let i=0;i<Uz.length;i++){const a=Uz[i]+r;if(a in n)return wD[e]=a}return e}const zz="http://www.w3.org/1999/xlink";function m0e(n,e,t,r,i){if(r&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(zz,e.slice(6,e.length)):n.setAttributeNS(zz,e,t);else{const a=wpe(e);t==null||a&&!lZ(t)?n.removeAttribute(e):n.setAttribute(e,a?"":t)}}function v0e(n,e,t,r,i,a,s){if(e==="innerHTML"||e==="textContent"){r&&s(r,i,a),n[e]=t??"";return}const o=n.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){n._value=t;const u=o==="OPTION"?n.getAttribute("value"):n.value,c=t??"";u!==c&&(n.value=c),t==null&&n.removeAttribute(e);return}let l=!1;if(t===""||t==null){const u=typeof n[e];u==="boolean"?t=lZ(t):t==null&&u==="string"?(t="",l=!0):u==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function up(n,e,t,r){n.addEventListener(e,t,r)}function g0e(n,e,t,r){n.removeEventListener(e,t,r)}function y0e(n,e,t,r,i=null){const a=n._vei||(n._vei={}),s=a[e];if(r&&s)s.value=r;else{const[o,l]=_0e(e);if(r){const u=a[e]=x0e(r,i);up(n,o,u,l)}else s&&(g0e(n,o,s,l),a[e]=void 0)}}const Hz=/(?:Once|Passive|Capture)$/;function _0e(n){let e;if(Hz.test(n)){e={};let r;for(;r=n.match(Hz);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):am(n.slice(2)),e]}let TD=0;const b0e=Promise.resolve(),S0e=()=>TD||(b0e.then(()=>TD=0),TD=Date.now());function x0e(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Fu(w0e(r,t.value),e,5,[r])};return t.value=n,t.attached=S0e(),t}function w0e(n,e){if(Ut(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Vz=/^on[a-z]/,T0e=(n,e,t,r,i=!1,a,s,o,l)=>{e==="class"?f0e(n,r,i):e==="style"?h0e(n,t,r):r4(e)?K8(e)||y0e(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):C0e(n,e,r,i))?v0e(n,e,r,a,s,o,l):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),m0e(n,e,r,i))};function C0e(n,e,t,r){return r?!!(e==="innerHTML"||e==="textContent"||e in n&&Vz.test(e)&&hn(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||Vz.test(e)&&ln(t)?!1:e in n}const Eh="transition",Eb="animation",Ka=(n,{slots:e})=>an(wme,rJ(n),e);Ka.displayName="Transition";const nJ={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},A0e=Ka.props=qa({},NZ,nJ),wm=(n,e=[])=>{Ut(n)?n.forEach(t=>t(...e)):n&&n(...e)},$z=n=>n?Ut(n)?n.some(e=>e.length>1):n.length>1:!1;function rJ(n){const e={};for(const P in n)P in nJ||(e[P]=n[P]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:a=`${t}-enter-from`,enterActiveClass:s=`${t}-enter-active`,enterToClass:o=`${t}-enter-to`,appearFromClass:l=a,appearActiveClass:u=s,appearToClass:c=o,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:h=`${t}-leave-to`}=n,p=E0e(i),m=p&&p[0],v=p&&p[1],{onBeforeEnter:g,onEnter:y,onEnterCancelled:_,onLeave:b,onLeaveCancelled:x,onBeforeAppear:w=g,onAppear:A=y,onAppearCancelled:T=_}=e,C=(P,L,N)=>{ep(P,L?c:o),ep(P,L?u:s),N&&N()},E=(P,L)=>{P._isLeaving=!1,ep(P,d),ep(P,h),ep(P,f),L&&L()},I=P=>(L,N)=>{const F=P?A:y,k=()=>C(L,P,N);wm(F,[L,k]),Gz(()=>{ep(L,P?l:a),pf(L,P?c:o),$z(F)||Wz(L,r,m,k)})};return qa(e,{onBeforeEnter(P){wm(g,[P]),pf(P,a),pf(P,s)},onBeforeAppear(P){wm(w,[P]),pf(P,l),pf(P,u)},onEnter:I(!1),onAppear:I(!0),onLeave(P,L){P._isLeaving=!0;const N=()=>E(P,L);pf(P,d),aJ(),pf(P,f),Gz(()=>{P._isLeaving&&(ep(P,d),pf(P,h),$z(b)||Wz(P,r,v,N))}),wm(b,[P,N])},onEnterCancelled(P){C(P,!1),wm(_,[P])},onAppearCancelled(P){C(P,!0),wm(T,[P])},onLeaveCancelled(P){E(P),wm(x,[P])}})}function E0e(n){if(n==null)return null;if(er(n))return[CD(n.enter),CD(n.leave)];{const e=CD(n);return[e,e]}}function CD(n){return gpe(n)}function pf(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n._vtc||(n._vtc=new Set)).add(e)}function ep(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const{_vtc:t}=n;t&&(t.delete(e),t.size||(n._vtc=void 0))}function Gz(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let M0e=0;function Wz(n,e,t,r){const i=n._endId=++M0e,a=()=>{i===n._endId&&r()};if(t)return setTimeout(a,t);const{type:s,timeout:o,propCount:l}=iJ(n,e);if(!s)return r();const u=s+"end";let c=0;const d=()=>{n.removeEventListener(u,f),a()},f=h=>{h.target===n&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},o+1),n.addEventListener(u,f)}function iJ(n,e){const t=window.getComputedStyle(n),r=p=>(t[p]||"").split(", "),i=r(`${Eh}Delay`),a=r(`${Eh}Duration`),s=qz(i,a),o=r(`${Eb}Delay`),l=r(`${Eb}Duration`),u=qz(o,l);let c=null,d=0,f=0;e===Eh?s>0&&(c=Eh,d=s,f=a.length):e===Eb?u>0&&(c=Eb,d=u,f=l.length):(d=Math.max(s,u),c=d>0?s>u?Eh:Eb:null,f=c?c===Eh?a.length:l.length:0);const h=c===Eh&&/\b(transform|all)(,|$)/.test(r(`${Eh}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:h}}function qz(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>jz(t)+jz(n[r])))}function jz(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function aJ(){return document.body.offsetHeight}const sJ=new WeakMap,oJ=new WeakMap,lJ={name:"TransitionGroup",props:qa({},A0e,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=tr(),r=OZ();let i,a;return Ju(()=>{if(!i.length)return;const s=n.moveClass||`${n.name||"v"}-move`;if(!k0e(i[0].el,t.vnode.el,s))return;i.forEach(D0e),i.forEach(P0e);const o=i.filter(R0e);aJ(),o.forEach(l=>{const u=l.el,c=u.style;pf(u,s),c.transform=c.webkitTransform=c.transitionDuration="";const d=u._moveCb=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,ep(u,s))};u.addEventListener("transitionend",d)})}),()=>{const s=ri(n),o=rJ(s);let l=s.tag||on;i=a,a=e.default?uN(e.default()):[];for(let u=0;u<a.length;u++){const c=a[u];c.key!=null&&Gx(c,$x(c,o,r,t))}if(i)for(let u=0;u<i.length;u++){const c=i[u];Gx(c,$x(c,o,r,t)),sJ.set(c,c.el.getBoundingClientRect())}return be(l,null,a)}}},I0e=n=>delete n.mode;lJ.props;const uJ=lJ;function D0e(n){const e=n.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function P0e(n){oJ.set(n,n.el.getBoundingClientRect())}function R0e(n){const e=sJ.get(n),t=oJ.get(n),r=e.left-t.left,i=e.top-t.top;if(r||i){const a=n.el.style;return a.transform=a.webkitTransform=`translate(${r}px,${i}px)`,a.transitionDuration="0s",n}}function k0e(n,e,t){const r=n.cloneNode();n._vtc&&n._vtc.forEach(s=>{s.split(/\s+/).forEach(o=>o&&r.classList.remove(o))}),t.split(/\s+/).forEach(s=>s&&r.classList.add(s)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:a}=iJ(r);return i.removeChild(r),a}const w1=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Ut(e)?t=>XA(e,t):e};function L0e(n){n.target.composing=!0}function Kz(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const v4={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n._assign=w1(i);const a=r||i.props&&i.props.type==="number";up(n,e?"change":"input",s=>{if(s.target.composing)return;let o=n.value;t&&(o=o.trim()),a&&(o=wL(o)),n._assign(o)}),t&&up(n,"change",()=>{n.value=n.value.trim()}),e||(up(n,"compositionstart",L0e),up(n,"compositionend",Kz),up(n,"change",Kz))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:r,number:i}},a){if(n._assign=w1(a),n.composing||document.activeElement===n&&n.type!=="range"&&(t||r&&n.value.trim()===e||(i||n.type==="number")&&wL(n.value)===e))return;const s=e??"";n.value!==s&&(n.value=s)}},iM={deep:!0,created(n,e,t){n._assign=w1(t),up(n,"change",()=>{const r=n._modelValue,i=dJ(n),a=n.checked,s=n._assign;if(Ut(r)){const o=uZ(r,i),l=o!==-1;if(a&&!l)s(r.concat(i));else if(!a&&l){const u=[...r];u.splice(o,1),s(u)}}else if(i4(r)){const o=new Set(r);a?o.add(i):o.delete(i),s(o)}else s(fJ(n,a))})},mounted:Xz,beforeUpdate(n,e,t){n._assign=w1(t),Xz(n,e,t)}};function Xz(n,{value:e,oldValue:t},r){n._modelValue=e,Ut(e)?n.checked=uZ(e,r.props.value)>-1:i4(e)?n.checked=e.has(r.props.value):e!==t&&(n.checked=b1(e,fJ(n,!0)))}const cJ={created(n,{value:e},t){n.checked=b1(e,t.props.value),n._assign=w1(t),up(n,"change",()=>{n._assign(dJ(n))})},beforeUpdate(n,{value:e,oldValue:t},r){n._assign=w1(r),e!==t&&(n.checked=b1(e,r.props.value))}};function dJ(n){return"_value"in n?n._value:n.value}function fJ(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const O0e=["ctrl","shift","alt","meta"],N0e={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>O0e.some(t=>n[`${t}Key`]&&!e.includes(t))},Tn=(n,e)=>(t,...r)=>{for(let i=0;i<e.length;i++){const a=N0e[e[i]];if(a&&a(t,e))return}return n(t,...r)},B0e={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},hi=(n,e)=>t=>{if(!("key"in t))return;const r=am(t.key);if(e.some(i=>i===r||B0e[i]===r))return n(t)},Nr={beforeMount(n,{value:e},{transition:t}){n._vod=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Mb(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),Mb(n,!0),r.enter(n)):r.leave(n,()=>{Mb(n,!1)}):Mb(n,e))},beforeUnmount(n,{value:e}){Mb(n,e)}};function Mb(n,e){n.style.display=e?n._vod:"none"}const F0e=qa({patchProp:T0e},d0e);let Yz;function hJ(){return Yz||(Yz=Gme(F0e))}const Np=(...n)=>{hJ().render(...n)},pJ=(...n)=>{const e=hJ().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=U0e(r);if(!i)return;const a=e._component;!hn(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.innerHTML="";const s=t(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function U0e(n){return ln(n)?document.querySelector(n):n}const z0e="2.9.1",Qz=Symbol("INSTALLED_KEY"),mJ=Symbol(),XS="el",H0e="is-",Tm=(n,e,t,r,i)=>{let a=`${n}-${e}`;return t&&(a+=`-${t}`),r&&(a+=`__${r}`),i&&(a+=`--${i}`),a},vJ=Symbol("namespaceContextKey"),_N=n=>{const e=n||(tr()?Yt(vJ,ie(XS)):ie(XS));return V(()=>S(e)||XS)},kt=(n,e)=>{const t=_N(e);return{namespace:t,b:(m="")=>Tm(t.value,n,m,"",""),e:m=>m?Tm(t.value,n,"",m,""):"",m:m=>m?Tm(t.value,n,"","",m):"",be:(m,v)=>m&&v?Tm(t.value,n,m,v,""):"",em:(m,v)=>m&&v?Tm(t.value,n,"",m,v):"",bm:(m,v)=>m&&v?Tm(t.value,n,m,"",v):"",bem:(m,v,g)=>m&&v&&g?Tm(t.value,n,m,v,g):"",is:(m,...v)=>{const g=v.length>=1?v[0]:!0;return m&&g?`${H0e}${m}`:""},cssVar:m=>{const v={};for(const g in m)m[g]&&(v[`--${t.value}-${g}`]=m[g]);return v},cssVarName:m=>`--${t.value}-${m}`,cssVarBlock:m=>{const v={};for(const g in m)m[g]&&(v[`--${t.value}-${n}-${g}`]=m[g]);return v},cssVarBlockName:m=>`--${t.value}-${n}-${m}`}};var V0e=typeof global=="object"&&global&&global.Object===Object&&global;const gJ=V0e;var $0e=typeof self=="object"&&self&&self.Object===Object&&self,G0e=gJ||$0e||Function("return this")();const zc=G0e;var W0e=zc.Symbol;const qu=W0e;var yJ=Object.prototype,q0e=yJ.hasOwnProperty,j0e=yJ.toString,Ib=qu?qu.toStringTag:void 0;function K0e(n){var e=q0e.call(n,Ib),t=n[Ib];try{n[Ib]=void 0;var r=!0}catch{}var i=j0e.call(n);return r&&(e?n[Ib]=t:delete n[Ib]),i}var X0e=Object.prototype,Y0e=X0e.toString;function Q0e(n){return Y0e.call(n)}var Z0e="[object Null]",J0e="[object Undefined]",Zz=qu?qu.toStringTag:void 0;function Av(n){return n==null?n===void 0?J0e:Z0e:Zz&&Zz in Object(n)?K0e(n):Q0e(n)}function Dd(n){return n!=null&&typeof n=="object"}var eve="[object Symbol]";function g4(n){return typeof n=="symbol"||Dd(n)&&Av(n)==eve}function bN(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var tve=Array.isArray;const Qo=tve;var nve=1/0,Jz=qu?qu.prototype:void 0,eH=Jz?Jz.toString:void 0;function _J(n){if(typeof n=="string")return n;if(Qo(n))return bN(n,_J)+"";if(g4(n))return eH?eH.call(n):"";var e=n+"";return e=="0"&&1/n==-nve?"-0":e}var rve=/\s/;function ive(n){for(var e=n.length;e--&&rve.test(n.charAt(e)););return e}var ave=/^\s+/;function sve(n){return n&&n.slice(0,ive(n)+1).replace(ave,"")}function Zo(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var tH=0/0,ove=/^[-+]0x[0-9a-f]+$/i,lve=/^0b[01]+$/i,uve=/^0o[0-7]+$/i,cve=parseInt;function NL(n){if(typeof n=="number")return n;if(g4(n))return tH;if(Zo(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Zo(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=sve(n);var t=lve.test(n);return t||uve.test(n)?cve(n.slice(2),t?2:8):ove.test(n)?tH:+n}var nH=1/0,dve=17976931348623157e292;function fve(n){if(!n)return n===0?n:0;if(n=NL(n),n===nH||n===-nH){var e=n<0?-1:1;return e*dve}return n===n?n:0}function hve(n){var e=fve(n),t=e%1;return e===e?t?e-t:e:0}function SN(n){return n}var pve="[object AsyncFunction]",mve="[object Function]",vve="[object GeneratorFunction]",gve="[object Proxy]";function xN(n){if(!Zo(n))return!1;var e=Av(n);return e==mve||e==vve||e==pve||e==gve}var yve=zc["__core-js_shared__"];const AD=yve;var rH=function(){var n=/[^.]+$/.exec(AD&&AD.keys&&AD.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function _ve(n){return!!rH&&rH in n}var bve=Function.prototype,Sve=bve.toString;function Ev(n){if(n!=null){try{return Sve.call(n)}catch{}try{return n+""}catch{}}return""}var xve=/[\\^$.*+?()[\]{}|]/g,wve=/^\[object .+?Constructor\]$/,Tve=Function.prototype,Cve=Object.prototype,Ave=Tve.toString,Eve=Cve.hasOwnProperty,Mve=RegExp("^"+Ave.call(Eve).replace(xve,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ive(n){if(!Zo(n)||_ve(n))return!1;var e=xN(n)?Mve:wve;return e.test(Ev(n))}function Dve(n,e){return n==null?void 0:n[e]}function Mv(n,e){var t=Dve(n,e);return Ive(t)?t:void 0}var Pve=Mv(zc,"WeakMap");const BL=Pve;var iH=Object.create,Rve=function(){function n(){}return function(e){if(!Zo(e))return{};if(iH)return iH(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const kve=Rve;function Lve(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Ove(){}function bJ(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var Nve=800,Bve=16,Fve=Date.now;function Uve(n){var e=0,t=0;return function(){var r=Fve(),i=Bve-(r-t);if(t=r,i>0){if(++e>=Nve)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function zve(n){return function(){return n}}var Hve=function(){try{var n=Mv(Object,"defineProperty");return n({},"",{}),n}catch{}}();const aM=Hve;var Vve=aM?function(n,e){return aM(n,"toString",{configurable:!0,enumerable:!1,value:zve(e),writable:!0})}:SN;const $ve=Vve;var Gve=Uve($ve);const SJ=Gve;function Wve(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}function xJ(n,e,t,r){for(var i=n.length,a=t+(r?1:-1);r?a--:++a<i;)if(e(n[a],a,n))return a;return-1}function qve(n){return n!==n}function jve(n,e,t){for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}function Kve(n,e,t){return e===e?jve(n,e,t):xJ(n,qve,t)}function Xve(n,e){var t=n==null?0:n.length;return!!t&&Kve(n,e,0)>-1}var Yve=9007199254740991,Qve=/^(?:0|[1-9]\d*)$/;function y4(n,e){var t=typeof n;return e=e??Yve,!!e&&(t=="number"||t!="symbol"&&Qve.test(n))&&n>-1&&n%1==0&&n<e}function wN(n,e,t){e=="__proto__"&&aM?aM(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function fw(n,e){return n===e||n!==n&&e!==e}var Zve=Object.prototype,Jve=Zve.hasOwnProperty;function TN(n,e,t){var r=n[e];(!(Jve.call(n,e)&&fw(r,t))||t===void 0&&!(e in n))&&wN(n,e,t)}function C_(n,e,t,r){var i=!t;t||(t={});for(var a=-1,s=e.length;++a<s;){var o=e[a],l=r?r(t[o],n[o],o,t,n):void 0;l===void 0&&(l=n[o]),i?wN(t,o,l):TN(t,o,l)}return t}var aH=Math.max;function wJ(n,e,t){return e=aH(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,a=aH(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=t(s),Lve(n,this,o)}}function TJ(n,e){return SJ(wJ(n,e,SN),n+"")}var ege=9007199254740991;function CN(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=ege}function A_(n){return n!=null&&CN(n.length)&&!xN(n)}function tge(n,e,t){if(!Zo(t))return!1;var r=typeof e;return(r=="number"?A_(t)&&y4(e,t.length):r=="string"&&e in t)?fw(t[e],n):!1}function nge(n){return TJ(function(e,t){var r=-1,i=t.length,a=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(a=n.length>3&&typeof a=="function"?(i--,a):void 0,s&&tge(t[0],t[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var o=t[r];o&&n(e,o,r,a)}return e})}var rge=Object.prototype;function AN(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||rge;return n===t}function ige(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var age="[object Arguments]";function sH(n){return Dd(n)&&Av(n)==age}var CJ=Object.prototype,sge=CJ.hasOwnProperty,oge=CJ.propertyIsEnumerable,lge=sH(function(){return arguments}())?sH:function(n){return Dd(n)&&sge.call(n,"callee")&&!oge.call(n,"callee")};const jx=lge;function uge(){return!1}var AJ=typeof Yl=="object"&&Yl&&!Yl.nodeType&&Yl,oH=AJ&&typeof Ql=="object"&&Ql&&!Ql.nodeType&&Ql,cge=oH&&oH.exports===AJ,lH=cge?zc.Buffer:void 0,dge=lH?lH.isBuffer:void 0,fge=dge||uge;const Kx=fge;var hge="[object Arguments]",pge="[object Array]",mge="[object Boolean]",vge="[object Date]",gge="[object Error]",yge="[object Function]",_ge="[object Map]",bge="[object Number]",Sge="[object Object]",xge="[object RegExp]",wge="[object Set]",Tge="[object String]",Cge="[object WeakMap]",Age="[object ArrayBuffer]",Ege="[object DataView]",Mge="[object Float32Array]",Ige="[object Float64Array]",Dge="[object Int8Array]",Pge="[object Int16Array]",Rge="[object Int32Array]",kge="[object Uint8Array]",Lge="[object Uint8ClampedArray]",Oge="[object Uint16Array]",Nge="[object Uint32Array]",oa={};oa[Mge]=oa[Ige]=oa[Dge]=oa[Pge]=oa[Rge]=oa[kge]=oa[Lge]=oa[Oge]=oa[Nge]=!0;oa[hge]=oa[pge]=oa[Age]=oa[mge]=oa[Ege]=oa[vge]=oa[gge]=oa[yge]=oa[_ge]=oa[bge]=oa[Sge]=oa[xge]=oa[wge]=oa[Tge]=oa[Cge]=!1;function Bge(n){return Dd(n)&&CN(n.length)&&!!oa[Av(n)]}function EN(n){return function(e){return n(e)}}var EJ=typeof Yl=="object"&&Yl&&!Yl.nodeType&&Yl,YS=EJ&&typeof Ql=="object"&&Ql&&!Ql.nodeType&&Ql,Fge=YS&&YS.exports===EJ,ED=Fge&&gJ.process,Uge=function(){try{var n=YS&&YS.require&&YS.require("util").types;return n||ED&&ED.binding&&ED.binding("util")}catch{}}();const T1=Uge;var uH=T1&&T1.isTypedArray,zge=uH?EN(uH):Bge;const MN=zge;var Hge=Object.prototype,Vge=Hge.hasOwnProperty;function MJ(n,e){var t=Qo(n),r=!t&&jx(n),i=!t&&!r&&Kx(n),a=!t&&!r&&!i&&MN(n),s=t||r||i||a,o=s?ige(n.length,String):[],l=o.length;for(var u in n)(e||Vge.call(n,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||y4(u,l)))&&o.push(u);return o}function IJ(n,e){return function(t){return n(e(t))}}var $ge=IJ(Object.keys,Object);const Gge=$ge;var Wge=Object.prototype,qge=Wge.hasOwnProperty;function jge(n){if(!AN(n))return Gge(n);var e=[];for(var t in Object(n))qge.call(n,t)&&t!="constructor"&&e.push(t);return e}function hw(n){return A_(n)?MJ(n):jge(n)}function Kge(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var Xge=Object.prototype,Yge=Xge.hasOwnProperty;function Qge(n){if(!Zo(n))return Kge(n);var e=AN(n),t=[];for(var r in n)r=="constructor"&&(e||!Yge.call(n,r))||t.push(r);return t}function pw(n){return A_(n)?MJ(n,!0):Qge(n)}var Zge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jge=/^\w*$/;function IN(n,e){if(Qo(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||g4(n)?!0:Jge.test(n)||!Zge.test(n)||e!=null&&n in Object(e)}var eye=Mv(Object,"create");const Xx=eye;function tye(){this.__data__=Xx?Xx(null):{},this.size=0}function nye(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var rye="__lodash_hash_undefined__",iye=Object.prototype,aye=iye.hasOwnProperty;function sye(n){var e=this.__data__;if(Xx){var t=e[n];return t===rye?void 0:t}return aye.call(e,n)?e[n]:void 0}var oye=Object.prototype,lye=oye.hasOwnProperty;function uye(n){var e=this.__data__;return Xx?e[n]!==void 0:lye.call(e,n)}var cye="__lodash_hash_undefined__";function dye(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Xx&&e===void 0?cye:e,this}function iv(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}iv.prototype.clear=tye;iv.prototype.delete=nye;iv.prototype.get=sye;iv.prototype.has=uye;iv.prototype.set=dye;function fye(){this.__data__=[],this.size=0}function _4(n,e){for(var t=n.length;t--;)if(fw(n[t][0],e))return t;return-1}var hye=Array.prototype,pye=hye.splice;function mye(n){var e=this.__data__,t=_4(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():pye.call(e,t,1),--this.size,!0}function vye(n){var e=this.__data__,t=_4(e,n);return t<0?void 0:e[t][1]}function gye(n){return _4(this.__data__,n)>-1}function yye(n,e){var t=this.__data__,r=_4(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function sh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}sh.prototype.clear=fye;sh.prototype.delete=mye;sh.prototype.get=vye;sh.prototype.has=gye;sh.prototype.set=yye;var _ye=Mv(zc,"Map");const Yx=_ye;function bye(){this.size=0,this.__data__={hash:new iv,map:new(Yx||sh),string:new iv}}function Sye(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function b4(n,e){var t=n.__data__;return Sye(e)?t[typeof e=="string"?"string":"hash"]:t.map}function xye(n){var e=b4(this,n).delete(n);return this.size-=e?1:0,e}function wye(n){return b4(this,n).get(n)}function Tye(n){return b4(this,n).has(n)}function Cye(n,e){var t=b4(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function oh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}oh.prototype.clear=bye;oh.prototype.delete=xye;oh.prototype.get=wye;oh.prototype.has=Tye;oh.prototype.set=Cye;var Aye="Expected a function";function S4(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(Aye);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=t.cache;if(a.has(i))return a.get(i);var s=n.apply(this,r);return t.cache=a.set(i,s)||a,s};return t.cache=new(S4.Cache||oh),t}S4.Cache=oh;var Eye=500;function Mye(n){var e=S4(n,function(r){return t.size===Eye&&t.clear(),r}),t=e.cache;return e}var Iye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dye=/\\(\\)?/g,Pye=Mye(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Iye,function(t,r,i,a){e.push(i?a.replace(Dye,"$1"):r||t)}),e});const Rye=Pye;function kye(n){return n==null?"":_J(n)}function E_(n,e){return Qo(n)?n:IN(n,e)?[n]:Rye(kye(n))}var Lye=1/0;function M_(n){if(typeof n=="string"||g4(n))return n;var e=n+"";return e=="0"&&1/n==-Lye?"-0":e}function x4(n,e){e=E_(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[M_(e[t++])];return t&&t==r?n:void 0}function ba(n,e,t){var r=n==null?void 0:x4(n,e);return r===void 0?t:r}function DN(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var cH=qu?qu.isConcatSpreadable:void 0;function Oye(n){return Qo(n)||jx(n)||!!(cH&&n&&n[cH])}function mw(n,e,t,r,i){var a=-1,s=n.length;for(t||(t=Oye),i||(i=[]);++a<s;){var o=n[a];e>0&&t(o)?e>1?mw(o,e-1,t,r,i):DN(i,o):r||(i[i.length]=o)}return i}function DJ(n){var e=n==null?0:n.length;return e?mw(n,1):[]}function PJ(n){return SJ(wJ(n,void 0,DJ),n+"")}var Nye=IJ(Object.getPrototypeOf,Object);const PN=Nye;var Bye="[object Object]",Fye=Function.prototype,Uye=Object.prototype,RJ=Fye.toString,zye=Uye.hasOwnProperty,Hye=RJ.call(Object);function kJ(n){if(!Dd(n)||Av(n)!=Bye)return!1;var e=PN(n);if(e===null)return!0;var t=zye.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&RJ.call(t)==Hye}function Vye(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=n[r+e];return a}function vo(){if(!arguments.length)return[];var n=arguments[0];return Qo(n)?n:[n]}function $ye(){this.__data__=new sh,this.size=0}function Gye(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function Wye(n){return this.__data__.get(n)}function qye(n){return this.__data__.has(n)}var jye=200;function Kye(n,e){var t=this.__data__;if(t instanceof sh){var r=t.__data__;if(!Yx||r.length<jye-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new oh(r)}return t.set(n,e),this.size=t.size,this}function kc(n){var e=this.__data__=new sh(n);this.size=e.size}kc.prototype.clear=$ye;kc.prototype.delete=Gye;kc.prototype.get=Wye;kc.prototype.has=qye;kc.prototype.set=Kye;function Xye(n,e){return n&&C_(e,hw(e),n)}function Yye(n,e){return n&&C_(e,pw(e),n)}var LJ=typeof Yl=="object"&&Yl&&!Yl.nodeType&&Yl,dH=LJ&&typeof Ql=="object"&&Ql&&!Ql.nodeType&&Ql,Qye=dH&&dH.exports===LJ,fH=Qye?zc.Buffer:void 0,hH=fH?fH.allocUnsafe:void 0;function OJ(n,e){if(e)return n.slice();var t=n.length,r=hH?hH(t):new n.constructor(t);return n.copy(r),r}function Zye(n,e){for(var t=-1,r=n==null?0:n.length,i=0,a=[];++t<r;){var s=n[t];e(s,t,n)&&(a[i++]=s)}return a}function NJ(){return[]}var Jye=Object.prototype,e1e=Jye.propertyIsEnumerable,pH=Object.getOwnPropertySymbols,t1e=pH?function(n){return n==null?[]:(n=Object(n),Zye(pH(n),function(e){return e1e.call(n,e)}))}:NJ;const RN=t1e;function n1e(n,e){return C_(n,RN(n),e)}var r1e=Object.getOwnPropertySymbols,i1e=r1e?function(n){for(var e=[];n;)DN(e,RN(n)),n=PN(n);return e}:NJ;const BJ=i1e;function a1e(n,e){return C_(n,BJ(n),e)}function FJ(n,e,t){var r=e(n);return Qo(n)?r:DN(r,t(n))}function FL(n){return FJ(n,hw,RN)}function UJ(n){return FJ(n,pw,BJ)}var s1e=Mv(zc,"DataView");const UL=s1e;var o1e=Mv(zc,"Promise");const zL=o1e;var l1e=Mv(zc,"Set");const Jy=l1e;var mH="[object Map]",u1e="[object Object]",vH="[object Promise]",gH="[object Set]",yH="[object WeakMap]",_H="[object DataView]",c1e=Ev(UL),d1e=Ev(Yx),f1e=Ev(zL),h1e=Ev(Jy),p1e=Ev(BL),r0=Av;(UL&&r0(new UL(new ArrayBuffer(1)))!=_H||Yx&&r0(new Yx)!=mH||zL&&r0(zL.resolve())!=vH||Jy&&r0(new Jy)!=gH||BL&&r0(new BL)!=yH)&&(r0=function(n){var e=Av(n),t=e==u1e?n.constructor:void 0,r=t?Ev(t):"";if(r)switch(r){case c1e:return _H;case d1e:return mH;case f1e:return vH;case h1e:return gH;case p1e:return yH}return e});const Qx=r0;var m1e=Object.prototype,v1e=m1e.hasOwnProperty;function g1e(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&v1e.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var y1e=zc.Uint8Array;const sM=y1e;function kN(n){var e=new n.constructor(n.byteLength);return new sM(e).set(new sM(n)),e}function _1e(n,e){var t=e?kN(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var b1e=/\w*$/;function S1e(n){var e=new n.constructor(n.source,b1e.exec(n));return e.lastIndex=n.lastIndex,e}var bH=qu?qu.prototype:void 0,SH=bH?bH.valueOf:void 0;function x1e(n){return SH?Object(SH.call(n)):{}}function zJ(n,e){var t=e?kN(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var w1e="[object Boolean]",T1e="[object Date]",C1e="[object Map]",A1e="[object Number]",E1e="[object RegExp]",M1e="[object Set]",I1e="[object String]",D1e="[object Symbol]",P1e="[object ArrayBuffer]",R1e="[object DataView]",k1e="[object Float32Array]",L1e="[object Float64Array]",O1e="[object Int8Array]",N1e="[object Int16Array]",B1e="[object Int32Array]",F1e="[object Uint8Array]",U1e="[object Uint8ClampedArray]",z1e="[object Uint16Array]",H1e="[object Uint32Array]";function V1e(n,e,t){var r=n.constructor;switch(e){case P1e:return kN(n);case w1e:case T1e:return new r(+n);case R1e:return _1e(n,t);case k1e:case L1e:case O1e:case N1e:case B1e:case F1e:case U1e:case z1e:case H1e:return zJ(n,t);case C1e:return new r;case A1e:case I1e:return new r(n);case E1e:return S1e(n);case M1e:return new r;case D1e:return x1e(n)}}function HJ(n){return typeof n.constructor=="function"&&!AN(n)?kve(PN(n)):{}}var $1e="[object Map]";function G1e(n){return Dd(n)&&Qx(n)==$1e}var xH=T1&&T1.isMap,W1e=xH?EN(xH):G1e;const q1e=W1e;var j1e="[object Set]";function K1e(n){return Dd(n)&&Qx(n)==j1e}var wH=T1&&T1.isSet,X1e=wH?EN(wH):K1e;const Y1e=X1e;var Q1e=1,Z1e=2,J1e=4,VJ="[object Arguments]",e_e="[object Array]",t_e="[object Boolean]",n_e="[object Date]",r_e="[object Error]",$J="[object Function]",i_e="[object GeneratorFunction]",a_e="[object Map]",s_e="[object Number]",GJ="[object Object]",o_e="[object RegExp]",l_e="[object Set]",u_e="[object String]",c_e="[object Symbol]",d_e="[object WeakMap]",f_e="[object ArrayBuffer]",h_e="[object DataView]",p_e="[object Float32Array]",m_e="[object Float64Array]",v_e="[object Int8Array]",g_e="[object Int16Array]",y_e="[object Int32Array]",__e="[object Uint8Array]",b_e="[object Uint8ClampedArray]",S_e="[object Uint16Array]",x_e="[object Uint32Array]",na={};na[VJ]=na[e_e]=na[f_e]=na[h_e]=na[t_e]=na[n_e]=na[p_e]=na[m_e]=na[v_e]=na[g_e]=na[y_e]=na[a_e]=na[s_e]=na[GJ]=na[o_e]=na[l_e]=na[u_e]=na[c_e]=na[__e]=na[b_e]=na[S_e]=na[x_e]=!0;na[r_e]=na[$J]=na[d_e]=!1;function e1(n,e,t,r,i,a){var s,o=e&Q1e,l=e&Z1e,u=e&J1e;if(t&&(s=i?t(n,r,i,a):t(n)),s!==void 0)return s;if(!Zo(n))return n;var c=Qo(n);if(c){if(s=g1e(n),!o)return bJ(n,s)}else{var d=Qx(n),f=d==$J||d==i_e;if(Kx(n))return OJ(n,o);if(d==GJ||d==VJ||f&&!i){if(s=l||f?{}:HJ(n),!o)return l?a1e(n,Yye(s,n)):n1e(n,Xye(s,n))}else{if(!na[d])return i?n:{};s=V1e(n,d,o)}}a||(a=new kc);var h=a.get(n);if(h)return h;a.set(n,s),Y1e(n)?n.forEach(function(v){s.add(e1(v,e,t,v,n,a))}):q1e(n)&&n.forEach(function(v,g){s.set(g,e1(v,e,t,g,n,a))});var p=u?l?UJ:FL:l?pw:hw,m=c?void 0:p(n);return Wve(m||n,function(v,g){m&&(g=v,v=n[g]),TN(s,g,e1(v,e,t,g,n,a))}),s}var w_e=4;function TH(n){return e1(n,w_e)}var T_e=1,C_e=4;function oM(n){return e1(n,T_e|C_e)}var A_e="__lodash_hash_undefined__";function E_e(n){return this.__data__.set(n,A_e),this}function M_e(n){return this.__data__.has(n)}function Zx(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new oh;++e<t;)this.add(n[e])}Zx.prototype.add=Zx.prototype.push=E_e;Zx.prototype.has=M_e;function I_e(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function WJ(n,e){return n.has(e)}var D_e=1,P_e=2;function qJ(n,e,t,r,i,a){var s=t&D_e,o=n.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(n),c=a.get(e);if(u&&c)return u==e&&c==n;var d=-1,f=!0,h=t&P_e?new Zx:void 0;for(a.set(n,e),a.set(e,n);++d<o;){var p=n[d],m=e[d];if(r)var v=s?r(m,p,d,e,n,a):r(p,m,d,n,e,a);if(v!==void 0){if(v)continue;f=!1;break}if(h){if(!I_e(e,function(g,y){if(!WJ(h,y)&&(p===g||i(p,g,t,r,a)))return h.push(y)})){f=!1;break}}else if(!(p===m||i(p,m,t,r,a))){f=!1;break}}return a.delete(n),a.delete(e),f}function R_e(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function LN(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var k_e=1,L_e=2,O_e="[object Boolean]",N_e="[object Date]",B_e="[object Error]",F_e="[object Map]",U_e="[object Number]",z_e="[object RegExp]",H_e="[object Set]",V_e="[object String]",$_e="[object Symbol]",G_e="[object ArrayBuffer]",W_e="[object DataView]",CH=qu?qu.prototype:void 0,MD=CH?CH.valueOf:void 0;function q_e(n,e,t,r,i,a,s){switch(t){case W_e:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case G_e:return!(n.byteLength!=e.byteLength||!a(new sM(n),new sM(e)));case O_e:case N_e:case U_e:return fw(+n,+e);case B_e:return n.name==e.name&&n.message==e.message;case z_e:case V_e:return n==e+"";case F_e:var o=R_e;case H_e:var l=r&k_e;if(o||(o=LN),n.size!=e.size&&!l)return!1;var u=s.get(n);if(u)return u==e;r|=L_e,s.set(n,e);var c=qJ(o(n),o(e),r,i,a,s);return s.delete(n),c;case $_e:if(MD)return MD.call(n)==MD.call(e)}return!1}var j_e=1,K_e=Object.prototype,X_e=K_e.hasOwnProperty;function Y_e(n,e,t,r,i,a){var s=t&j_e,o=FL(n),l=o.length,u=FL(e),c=u.length;if(l!=c&&!s)return!1;for(var d=l;d--;){var f=o[d];if(!(s?f in e:X_e.call(e,f)))return!1}var h=a.get(n),p=a.get(e);if(h&&p)return h==e&&p==n;var m=!0;a.set(n,e),a.set(e,n);for(var v=s;++d<l;){f=o[d];var g=n[f],y=e[f];if(r)var _=s?r(y,g,f,e,n,a):r(g,y,f,n,e,a);if(!(_===void 0?g===y||i(g,y,t,r,a):_)){m=!1;break}v||(v=f=="constructor")}if(m&&!v){var b=n.constructor,x=e.constructor;b!=x&&"constructor"in n&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof x=="function"&&x instanceof x)&&(m=!1)}return a.delete(n),a.delete(e),m}var Q_e=1,AH="[object Arguments]",EH="[object Array]",_T="[object Object]",Z_e=Object.prototype,MH=Z_e.hasOwnProperty;function J_e(n,e,t,r,i,a){var s=Qo(n),o=Qo(e),l=s?EH:Qx(n),u=o?EH:Qx(e);l=l==AH?_T:l,u=u==AH?_T:u;var c=l==_T,d=u==_T,f=l==u;if(f&&Kx(n)){if(!Kx(e))return!1;s=!0,c=!1}if(f&&!c)return a||(a=new kc),s||MN(n)?qJ(n,e,t,r,i,a):q_e(n,e,l,t,r,i,a);if(!(t&Q_e)){var h=c&&MH.call(n,"__wrapped__"),p=d&&MH.call(e,"__wrapped__");if(h||p){var m=h?n.value():n,v=p?e.value():e;return a||(a=new kc),i(m,v,t,r,a)}}return f?(a||(a=new kc),Y_e(n,e,t,r,i,a)):!1}function w4(n,e,t,r,i){return n===e?!0:n==null||e==null||!Dd(n)&&!Dd(e)?n!==n&&e!==e:J_e(n,e,t,r,w4,i)}var ebe=1,tbe=2;function nbe(n,e,t,r){var i=t.length,a=i,s=!r;if(n==null)return!a;for(n=Object(n);i--;){var o=t[i];if(s&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++i<a;){o=t[i];var l=o[0],u=n[l],c=o[1];if(s&&o[2]){if(u===void 0&&!(l in n))return!1}else{var d=new kc;if(r)var f=r(u,c,l,n,e,d);if(!(f===void 0?w4(c,u,ebe|tbe,r,d):f))return!1}}return!0}function jJ(n){return n===n&&!Zo(n)}function rbe(n){for(var e=hw(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,jJ(i)]}return e}function KJ(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function ibe(n){var e=rbe(n);return e.length==1&&e[0][2]?KJ(e[0][0],e[0][1]):function(t){return t===n||nbe(t,n,e)}}function abe(n,e){return n!=null&&e in Object(n)}function sbe(n,e,t){e=E_(e,n);for(var r=-1,i=e.length,a=!1;++r<i;){var s=M_(e[r]);if(!(a=n!=null&&t(n,s)))break;n=n[s]}return a||++r!=i?a:(i=n==null?0:n.length,!!i&&CN(i)&&y4(s,i)&&(Qo(n)||jx(n)))}function XJ(n,e){return n!=null&&sbe(n,e,abe)}var obe=1,lbe=2;function ube(n,e){return IN(n)&&jJ(e)?KJ(M_(n),e):function(t){var r=ba(t,n);return r===void 0&&r===e?XJ(t,n):w4(e,r,obe|lbe)}}function cbe(n){return function(e){return e==null?void 0:e[n]}}function dbe(n){return function(e){return x4(e,n)}}function fbe(n){return IN(n)?cbe(M_(n)):dbe(n)}function YJ(n){return typeof n=="function"?n:n==null?SN:typeof n=="object"?Qo(n)?ube(n[0],n[1]):ibe(n):fbe(n)}function hbe(n){return function(e,t,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var l=s[n?o:++i];if(t(a[l],l,a)===!1)break}return e}}var pbe=hbe();const QJ=pbe;function mbe(n,e){return n&&QJ(n,e,hw)}function vbe(n,e){return function(t,r){if(t==null)return t;if(!A_(t))return n(t,r);for(var i=t.length,a=e?i:-1,s=Object(t);(e?a--:++a<i)&&r(s[a],a,s)!==!1;);return t}}var gbe=vbe(mbe);const ybe=gbe;var _be=function(){return zc.Date.now()};const ID=_be;var bbe="Expected a function",Sbe=Math.max,xbe=Math.min;function Cl(n,e,t){var r,i,a,s,o,l,u=0,c=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(bbe);e=NL(e)||0,Zo(t)&&(c=!!t.leading,d="maxWait"in t,a=d?Sbe(NL(t.maxWait)||0,e):a,f="trailing"in t?!!t.trailing:f);function h(w){var A=r,T=i;return r=i=void 0,u=w,s=n.apply(T,A),s}function p(w){return u=w,o=setTimeout(g,e),c?h(w):s}function m(w){var A=w-l,T=w-u,C=e-A;return d?xbe(C,a-T):C}function v(w){var A=w-l,T=w-u;return l===void 0||A>=e||A<0||d&&T>=a}function g(){var w=ID();if(v(w))return y(w);o=setTimeout(g,m(w))}function y(w){return o=void 0,f&&r?h(w):(r=i=void 0,s)}function _(){o!==void 0&&clearTimeout(o),u=0,r=l=i=o=void 0}function b(){return o===void 0?s:y(ID())}function x(){var w=ID(),A=v(w);if(r=arguments,i=this,l=w,A){if(o===void 0)return p(l);if(d)return clearTimeout(o),o=setTimeout(g,e),h(l)}return o===void 0&&(o=setTimeout(g,e)),s}return x.cancel=_,x.flush=b,x}function HL(n,e,t){(t!==void 0&&!fw(n[e],t)||t===void 0&&!(e in n))&&wN(n,e,t)}function ZJ(n){return Dd(n)&&A_(n)}function VL(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function wbe(n){return C_(n,pw(n))}function Tbe(n,e,t,r,i,a,s){var o=VL(n,t),l=VL(e,t),u=s.get(l);if(u){HL(n,t,u);return}var c=a?a(o,l,t+"",n,e,s):void 0,d=c===void 0;if(d){var f=Qo(l),h=!f&&Kx(l),p=!f&&!h&&MN(l);c=l,f||h||p?Qo(o)?c=o:ZJ(o)?c=bJ(o):h?(d=!1,c=OJ(l,!0)):p?(d=!1,c=zJ(l,!0)):c=[]:kJ(l)||jx(l)?(c=o,jx(o)?c=wbe(o):(!Zo(o)||xN(o))&&(c=HJ(l))):d=!1}d&&(s.set(l,c),i(c,l,r,a,s),s.delete(l)),HL(n,t,c)}function JJ(n,e,t,r,i){n!==e&&QJ(e,function(a,s){if(i||(i=new kc),Zo(a))Tbe(n,e,s,t,JJ,r,i);else{var o=r?r(VL(n,s),a,s+"",n,e,i):void 0;o===void 0&&(o=a),HL(n,s,o)}},pw)}function Cbe(n,e,t){for(var r=-1,i=n==null?0:n.length;++r<i;)if(t(e,n[r]))return!0;return!1}function Abe(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var Ebe=Math.max,Mbe=Math.min;function eee(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=r-1;return t!==void 0&&(i=hve(t),i=t<0?Ebe(r+i,0):Mbe(i,r-1)),xJ(n,YJ(e),i,!0)}function Ibe(n,e){var t=-1,r=A_(n)?Array(n.length):[];return ybe(n,function(i,a,s){r[++t]=e(i,a,s)}),r}function Dbe(n,e){var t=Qo(n)?bN:Ibe;return t(n,YJ(e))}function Pbe(n,e){return mw(Dbe(n,e),1)}var Rbe=1/0;function kbe(n){var e=n==null?0:n.length;return e?mw(n,Rbe):[]}function Jx(n){for(var e=-1,t=n==null?0:n.length,r={};++e<t;){var i=n[e];r[i[0]]=i[1]}return r}function Lbe(n,e){return e.length<2?n:x4(n,Vye(e,0,-1))}function Ms(n,e){return w4(n,e)}function es(n){return n==null}function tee(n){return n===void 0}var Obe=nge(function(n,e,t){JJ(n,e,t)});const nee=Obe;function Nbe(n,e){return e=E_(e,n),n=Lbe(n,e),n==null||delete n[M_(Abe(e))]}function Bbe(n){return kJ(n)?void 0:n}var Fbe=1,Ube=2,zbe=4,Hbe=PJ(function(n,e){var t={};if(n==null)return t;var r=!1;e=bN(e,function(a){return a=E_(a,n),r||(r=a.length>1),a}),C_(n,UJ(n),t),r&&(t=e1(t,Fbe|Ube|zbe,Bbe));for(var i=e.length;i--;)Nbe(t,e[i]);return t});const Vbe=Hbe;function ree(n,e,t,r){if(!Zo(n))return n;e=E_(e,n);for(var i=-1,a=e.length,s=a-1,o=n;o!=null&&++i<a;){var l=M_(e[i]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(i!=s){var c=o[l];u=r?r(c,l,o):void 0,u===void 0&&(u=Zo(c)?c:y4(e[i+1])?[]:{})}TN(o,l,u),o=o[l]}return n}function $be(n,e,t){for(var r=-1,i=e.length,a={};++r<i;){var s=e[r],o=x4(n,s);t(o,s)&&ree(a,E_(s,n),o)}return a}function Gbe(n,e){return $be(n,e,function(t,r){return XJ(n,r)})}var Wbe=PJ(function(n,e){return n==null?{}:Gbe(n,e)});const Mc=Wbe;function qbe(n,e,t){return n==null?n:ree(n,e,t)}var jbe="Expected a function";function V0(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(jbe);return Zo(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Cl(n,e,{leading:r,maxWait:e,trailing:i})}var Kbe=1/0,Xbe=Jy&&1/LN(new Jy([,-0]))[1]==Kbe?function(n){return new Jy(n)}:Ove;const Ybe=Xbe;var Qbe=200;function Zbe(n,e,t){var r=-1,i=Xve,a=n.length,s=!0,o=[],l=o;if(t)s=!1,i=Cbe;else if(a>=Qbe){var u=e?null:Ybe(n);if(u)return LN(u);s=!1,i=WJ,l=new Zx}else l=e?[]:o;e:for(;++r<a;){var c=n[r],d=e?e(c):c;if(c=t||c!==0?c:0,s&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),o.push(c)}else i(l,d,t)||(l!==o&&l.push(d),o.push(c))}return o}var Jbe=TJ(function(n){return Zbe(mw(n,1,ZJ,!0))});const DD=Jbe,ti=n=>n===void 0,mi=n=>typeof n=="boolean",_n=n=>typeof n=="number",ql=n=>!n&&n!==0||Ut(n)&&n.length===0||er(n)&&!Object.keys(n).length,Zl=n=>typeof Element>"u"?!1:n instanceof Element,av=n=>es(n),eSe=n=>ln(n)?!Number.isNaN(Number(n)):!1,T4=n=>n===window;var tSe=Object.defineProperty,nSe=Object.defineProperties,rSe=Object.getOwnPropertyDescriptors,IH=Object.getOwnPropertySymbols,iSe=Object.prototype.hasOwnProperty,aSe=Object.prototype.propertyIsEnumerable,DH=(n,e,t)=>e in n?tSe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,sSe=(n,e)=>{for(var t in e||(e={}))iSe.call(e,t)&&DH(n,t,e[t]);if(IH)for(var t of IH(e))aSe.call(e,t)&&DH(n,t,e[t]);return n},oSe=(n,e)=>nSe(n,rSe(e));function $L(n,e){var t;const r=jr();return vs(()=>{r.value=n()},oSe(sSe({},e),{flush:(t=e==null?void 0:e.flush)!=null?t:"sync"})),Cv(r)}var PH;const Cr=typeof window<"u",lSe=n=>typeof n<"u",GL=n=>typeof n=="function",uSe=n=>typeof n=="string",C1=()=>{},WL=Cr&&((PH=window==null?void 0:window.navigator)==null?void 0:PH.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Bp(n){return typeof n=="function"?n():S(n)}function iee(n,e){function t(...r){return new Promise((i,a)=>{Promise.resolve(n(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(i).catch(a)})}return t}function cSe(n,e={}){let t,r,i=C1;const a=o=>{clearTimeout(o),i(),i=C1};return o=>{const l=Bp(n),u=Bp(e.maxWait);return t&&a(t),l<=0||u!==void 0&&u<=0?(r&&(a(r),r=null),Promise.resolve(o())):new Promise((c,d)=>{i=e.rejectOnCancel?d:c,u&&!r&&(r=setTimeout(()=>{t&&a(t),r=null,c(o())},u)),t=setTimeout(()=>{r&&a(r),r=null,c(o())},l)})}}function dSe(n,e=!0,t=!0,r=!1){let i=0,a,s=!0,o=C1,l;const u=()=>{a&&(clearTimeout(a),a=void 0,o(),o=C1)};return d=>{const f=Bp(n),h=Date.now()-i,p=()=>l=d();return u(),f<=0?(i=Date.now(),p()):(h>f&&(t||!s)?(i=Date.now(),p()):e&&(l=new Promise((m,v)=>{o=r?v:m,a=setTimeout(()=>{i=Date.now(),s=!0,m(p()),u()},Math.max(0,f-h))})),!t&&!a&&(a=setTimeout(()=>s=!0,f)),s=!1,l)}}function fSe(n){return n}function hSe(n,e){let t,r,i;const a=ie(!0),s=()=>{a.value=!0,i()};St(n,s,{flush:"sync"});const o=GL(e)?e:e.get,l=GL(e)?void 0:e.set,u=rme((c,d)=>(r=c,i=d,{get(){return a.value&&(t=o(),a.value=!1),r(),t},set(f){l==null||l(f)}}));return Object.isExtensible(u)&&(u.trigger=s),u}function vw(n){return fZ()?(hZ(n),!0):!1}function pSe(n,e=200,t={}){return iee(cSe(e,t),n)}function mSe(n,e=200,t={}){const r=ie(n.value),i=pSe(()=>{r.value=n.value},e,t);return St(n,()=>i()),r}function aee(n,e=200,t=!1,r=!0,i=!1){return iee(dSe(e,t,r,i),n)}function ON(n,e=!0){tr()?zn(n):e?n():cn(n)}function sv(n,e,t={}){const{immediate:r=!0}=t,i=ie(!1);let a=null;function s(){a&&(clearTimeout(a),a=null)}function o(){i.value=!1,s()}function l(...u){s(),i.value=!0,a=setTimeout(()=>{i.value=!1,a=null,n(...u)},Bp(e))}return r&&(i.value=!0,Cr&&l()),vw(o),{isPending:Cv(i),start:l,stop:o}}function Wo(n){var e;const t=Bp(n);return(e=t==null?void 0:t.$el)!=null?e:t}const lm=Cr?window:void 0,vSe=Cr?window.document:void 0;function ni(...n){let e,t,r,i;if(uSe(n[0])||Array.isArray(n[0])?([t,r,i]=n,e=lm):[e,t,r,i]=n,!e)return C1;Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);const a=[],s=()=>{a.forEach(c=>c()),a.length=0},o=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),l=St(()=>[Wo(e),Bp(i)],([c,d])=>{s(),c&&a.push(...t.flatMap(f=>r.map(h=>o(c,f,h,d))))},{immediate:!0,flush:"post"}),u=()=>{l(),s()};return vw(u),u}let RH=!1;function NN(n,e,t={}){const{window:r=lm,ignore:i=[],capture:a=!0,detectIframe:s=!1}=t;if(!r)return;WL&&!RH&&(RH=!0,Array.from(r.document.body.children).forEach(f=>f.addEventListener("click",C1)));let o=!0;const l=f=>i.some(h=>{if(typeof h=="string")return Array.from(r.document.querySelectorAll(h)).some(p=>p===f.target||f.composedPath().includes(p));{const p=Wo(h);return p&&(f.target===p||f.composedPath().includes(p))}}),c=[ni(r,"click",f=>{const h=Wo(n);if(!(!h||h===f.target||f.composedPath().includes(h))){if(f.detail===0&&(o=!l(f)),!o){o=!0;return}e(f)}},{passive:!0,capture:a}),ni(r,"pointerdown",f=>{const h=Wo(n);h&&(o=!f.composedPath().includes(h)&&!l(f))},{passive:!0}),s&&ni(r,"blur",f=>{var h;const p=Wo(n);((h=r.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!(p!=null&&p.contains(r.document.activeElement))&&e(f)})].filter(Boolean);return()=>c.forEach(f=>f())}function gSe(n={}){var e;const{window:t=lm}=n,r=(e=n.document)!=null?e:t==null?void 0:t.document,i=hSe(()=>null,()=>r==null?void 0:r.activeElement);return t&&(ni(t,"blur",a=>{a.relatedTarget===null&&i.trigger()},!0),ni(t,"focus",i.trigger,!0)),i}function see(n,e=!1){const t=ie(),r=()=>t.value=!!n();return r(),ON(r,e),t}function ySe(n){return JSON.parse(JSON.stringify(n))}const kH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},LH="__vueuse_ssr_handlers__";kH[LH]=kH[LH]||{};function _Se(n,e,{window:t=lm,initialValue:r=""}={}){const i=ie(r),a=V(()=>{var s;return Wo(e)||((s=t==null?void 0:t.document)==null?void 0:s.documentElement)});return St([a,()=>Bp(n)],([s,o])=>{var l;if(s&&t){const u=(l=t.getComputedStyle(s).getPropertyValue(o))==null?void 0:l.trim();i.value=u||r}},{immediate:!0}),St(i,s=>{var o;(o=a.value)!=null&&o.style&&a.value.style.setProperty(Bp(n),s)}),i}function bSe({document:n=vSe}={}){if(!n)return ie("visible");const e=ie(n.visibilityState);return ni(n,"visibilitychange",()=>{e.value=n.visibilityState}),e}var OH=Object.getOwnPropertySymbols,SSe=Object.prototype.hasOwnProperty,xSe=Object.prototype.propertyIsEnumerable,wSe=(n,e)=>{var t={};for(var r in n)SSe.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&OH)for(var r of OH(n))e.indexOf(r)<0&&xSe.call(n,r)&&(t[r]=n[r]);return t};function zi(n,e,t={}){const r=t,{window:i=lm}=r,a=wSe(r,["window"]);let s;const o=see(()=>i&&"ResizeObserver"in i),l=()=>{s&&(s.disconnect(),s=void 0)},u=St(()=>Wo(n),d=>{l(),o.value&&i&&d&&(s=new ResizeObserver(e),s.observe(d,a))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return vw(c),{isSupported:o,stop:c}}function NH(n,e={}){const{reset:t=!0,windowResize:r=!0,windowScroll:i=!0,immediate:a=!0}=e,s=ie(0),o=ie(0),l=ie(0),u=ie(0),c=ie(0),d=ie(0),f=ie(0),h=ie(0);function p(){const m=Wo(n);if(!m){t&&(s.value=0,o.value=0,l.value=0,u.value=0,c.value=0,d.value=0,f.value=0,h.value=0);return}const v=m.getBoundingClientRect();s.value=v.height,o.value=v.bottom,l.value=v.left,u.value=v.right,c.value=v.top,d.value=v.width,f.value=v.x,h.value=v.y}return zi(n,p),St(()=>Wo(n),m=>!m&&p()),i&&ni("scroll",p,{capture:!0,passive:!0}),r&&ni("resize",p,{passive:!0}),ON(()=>{a&&p()}),{height:s,bottom:o,left:l,right:u,top:c,width:d,x:f,y:h,update:p}}var BH=Object.getOwnPropertySymbols,TSe=Object.prototype.hasOwnProperty,CSe=Object.prototype.propertyIsEnumerable,ASe=(n,e)=>{var t={};for(var r in n)TSe.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&BH)for(var r of BH(n))e.indexOf(r)<0&&CSe.call(n,r)&&(t[r]=n[r]);return t};function oee(n,e,t={}){const r=t,{window:i=lm}=r,a=ASe(r,["window"]);let s;const o=see(()=>i&&"MutationObserver"in i),l=()=>{s&&(s.disconnect(),s=void 0)},u=St(()=>Wo(n),d=>{l(),o.value&&i&&d&&(s=new MutationObserver(e),s.observe(d,a))},{immediate:!0}),c=()=>{l(),u()};return vw(c),{isSupported:o,stop:c}}var FH;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(FH||(FH={}));var ESe=Object.defineProperty,UH=Object.getOwnPropertySymbols,MSe=Object.prototype.hasOwnProperty,ISe=Object.prototype.propertyIsEnumerable,zH=(n,e,t)=>e in n?ESe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,DSe=(n,e)=>{for(var t in e||(e={}))MSe.call(e,t)&&zH(n,t,e[t]);if(UH)for(var t of UH(e))ISe.call(e,t)&&zH(n,t,e[t]);return n};const PSe={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};DSe({linear:fSe},PSe);function lee(n,e,t,r={}){var i,a,s;const{clone:o=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d}=r,f=tr(),h=t||(f==null?void 0:f.emit)||((i=f==null?void 0:f.$emit)==null?void 0:i.bind(f))||((s=(a=f==null?void 0:f.proxy)==null?void 0:a.$emit)==null?void 0:s.bind(f==null?void 0:f.proxy));let p=u;e||(e="modelValue"),p=u||p||`update:${e.toString()}`;const m=g=>o?GL(o)?o(g):ySe(g):g,v=()=>lSe(n[e])?m(n[e]):d;if(l){const g=v(),y=ie(g);return St(()=>n[e],_=>y.value=m(_)),St(y,_=>{(_!==n[e]||c)&&h(p,_)},{deep:c}),y}else return V({get(){return v()},set(g){h(p,g)}})}function RSe({window:n=lm}={}){if(!n)return ie(!1);const e=ie(n.document.hasFocus());return ni(n,"blur",()=>{e.value=!1}),ni(n,"focus",()=>{e.value=!0}),e}function kSe(n={}){const{window:e=lm,initialWidth:t=1/0,initialHeight:r=1/0,listenOrientation:i=!0,includeScrollbar:a=!0}=n,s=ie(t),o=ie(r),l=()=>{e&&(a?(s.value=e.innerWidth,o.value=e.innerHeight):(s.value=e.document.documentElement.clientWidth,o.value=e.document.documentElement.clientHeight))};return l(),ON(l),ni("resize",l,{passive:!0}),i&&ni("orientationchange",l,{passive:!0}),{width:s,height:o}}class LSe extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Xa(n,e){throw new LSe(`[${n}] ${e}`)}const HH={current:0},VH=ie(0),uee=2e3,$H=Symbol("elZIndexContextKey"),cee=Symbol("zIndexContextKey"),I_=n=>{const e=tr()?Yt($H,HH):HH,t=n||(tr()?Yt(cee,void 0):void 0),r=V(()=>{const s=S(t);return _n(s)?s:uee}),i=V(()=>r.value+VH.value),a=()=>(e.current++,VH.value=e.current,i.value);return!Cr&&Yt($H),{initialZIndex:r,currentZIndex:i,nextZIndex:a}};var OSe={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const NSe=n=>(e,t)=>BSe(e,t,S(n)),BSe=(n,e,t)=>ba(t,n,n).replace(/\{(\w+)\}/g,(r,i)=>{var a;return`${(a=e==null?void 0:e[i])!=null?a:`{${i}}`}`}),FSe=n=>{const e=V(()=>S(n).name),t=xi(n)?n:ie(n);return{lang:e,locale:t,t:NSe(n)}},dee=Symbol("localeContextKey"),Ar=n=>{const e=n||Yt(dee,ie());return FSe(V(()=>e.value||OSe))},fee="__epPropKey",tt=n=>n,USe=n=>er(n)&&!!n[fee],Hc=(n,e)=>{if(!er(n)||USe(n))return n;const{values:t,required:r,default:i,type:a,validator:s}=n,l={type:a,required:!!r,validator:t||s?u=>{let c=!1,d=[];if(t&&(d=Array.from(t),Ir(n,"default")&&d.push(i),c||(c=d.includes(u))),s&&(c||(c=s(u))),!c&&d.length>0){const f=[...new Set(d)].map(h=>JSON.stringify(h)).join(", ");lme(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${f}], got value ${JSON.stringify(u)}.`)}return c}:void 0,[fee]:!0};return Ir(n,"default")&&(l.default=i),l},Vt=n=>Jx(Object.entries(n).map(([e,t])=>[e,Hc(t,e)])),Hd=["","default","small","large"],La=Hc({type:String,values:Hd,required:!1}),hee=Symbol("size"),pee=()=>{const n=Yt(hee,{});return V(()=>S(n.size)||"")},mee=Symbol("emptyValuesContextKey"),zSe=["",void 0,null],HSe=void 0,D_=Vt({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:n=>hn(n)?!n():!n}}),C4=(n,e)=>{const t=tr()?Yt(mee,ie({})):ie({}),r=V(()=>n.emptyValues||t.value.emptyValues||zSe),i=V(()=>hn(n.valueOnClear)?n.valueOnClear():n.valueOnClear!==void 0?n.valueOnClear:hn(t.value.valueOnClear)?t.value.valueOnClear():t.value.valueOnClear!==void 0?t.value.valueOnClear:e!==void 0?e:HSe),a=s=>r.value.includes(s);return r.value.includes(i.value),{emptyValues:r,valueOnClear:i,isEmptyValue:a}},A1=n=>Object.keys(n),vee=n=>Object.entries(n),QA=(n,e,t)=>({get value(){return ba(n,e,t)},set value(r){qbe(n,e,r)}}),lM=ie();function A4(n,e=void 0){const t=tr()?Yt(mJ,lM):lM;return n?V(()=>{var r,i;return(i=(r=t.value)==null?void 0:r[n])!=null?i:e}):t}function E4(n,e){const t=A4(),r=kt(n,V(()=>{var o;return((o=t.value)==null?void 0:o.namespace)||XS})),i=Ar(V(()=>{var o;return(o=t.value)==null?void 0:o.locale})),a=I_(V(()=>{var o;return((o=t.value)==null?void 0:o.zIndex)||uee})),s=V(()=>{var o;return S(e)||((o=t.value)==null?void 0:o.size)||""});return BN(V(()=>S(t)||{})),{ns:r,locale:i,zIndex:a,size:s}}const BN=(n,e,t=!1)=>{var r;const i=!!tr(),a=i?A4():void 0,s=(r=e==null?void 0:e.provide)!=null?r:i?pr:void 0;if(!s)return;const o=V(()=>{const l=S(n);return a!=null&&a.value?VSe(a.value,l):l});return s(mJ,o),s(dee,V(()=>o.value.locale)),s(vJ,V(()=>o.value.namespace)),s(cee,V(()=>o.value.zIndex)),s(hee,{size:V(()=>o.value.size||"")}),s(mee,V(()=>({emptyValues:o.value.emptyValues,valueOnClear:o.value.valueOnClear}))),(t||!lM.value)&&(lM.value=o.value),o},VSe=(n,e)=>{const t=[...new Set([...A1(n),...A1(e)])],r={};for(const i of t)r[i]=e[i]!==void 0?e[i]:n[i];return r},$Se=(n=[])=>({version:z0e,install:(t,r)=>{t[Qz]||(t[Qz]=!0,n.forEach(i=>t.use(i)),r&&BN(r,t,!0))}}),jn="update:modelValue",si="change",Ks="input",GSe=Vt({zIndex:{type:tt([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),WSe={scroll:({scrollTop:n,fixed:e})=>_n(n)&&mi(e),[si]:n=>mi(n)};var $t=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t};function qSe(n,e,t,r){const i=t-e;return n/=r/2,n<1?i/2*n*n*n+e:i/2*((n-=2)*n*n+2)+e}const Fp=n=>Cr?window.requestAnimationFrame(n):setTimeout(n,16),ov=n=>Cr?window.cancelAnimationFrame(n):clearTimeout(n),gee=(n="")=>n.split(" ").filter(e=>!!e.trim()),ml=(n,e)=>{if(!n||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return n.classList.contains(e)},ku=(n,e)=>{!n||!e.trim()||n.classList.add(...gee(e))},xo=(n,e)=>{!n||!e.trim()||n.classList.remove(...gee(e))},Cf=(n,e)=>{var t;if(!Cr||!n||!e)return"";let r=iu(e);r==="float"&&(r="cssFloat");try{const i=n.style[r];if(i)return i;const a=(t=document.defaultView)==null?void 0:t.getComputedStyle(n,"");return a?a[r]:""}catch{return n.style[r]}},yee=(n,e,t)=>{if(!(!n||!e))if(er(e))vee(e).forEach(([r,i])=>yee(n,r,i));else{const r=iu(e);n.style[r]=t}};function ia(n,e="px"){if(!n)return"";if(_n(n)||eSe(n))return`${n}${e}`;if(ln(n))return n}const jSe=(n,e)=>{if(!Cr)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],r=Cf(n,t);return["scroll","auto","overlay"].some(i=>r.includes(i))},FN=(n,e)=>{if(!Cr)return;let t=n;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(jSe(t,e))return t;t=t.parentNode}return t};let bT;const _ee=n=>{var e;if(!Cr)return 0;if(bT!==void 0)return bT;const t=document.createElement("div");t.className=`${n}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const r=t.offsetWidth;t.style.overflow="scroll";const i=document.createElement("div");i.style.width="100%",t.appendChild(i);const a=i.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),bT=r-a,bT};function UN(n,e){if(!Cr)return;if(!e){n.scrollTop=0;return}const t=[];let r=e.offsetParent;for(;r!==null&&n!==r&&n.contains(r);)t.push(r),r=r.offsetParent;const i=e.offsetTop+t.reduce((l,u)=>l+u.offsetTop,0),a=i+e.offsetHeight,s=n.scrollTop,o=s+n.clientHeight;i<s?n.scrollTop=i:a>o&&(n.scrollTop=a-n.clientHeight)}function KSe(n,e,t,r,i){const a=Date.now();let s;const o=()=>{const u=Date.now()-a,c=qSe(u>r?r:u,e,t,r);T4(n)?n.scrollTo(window.pageXOffset,c):n.scrollTop=c,u<r?s=Fp(o):hn(i)&&i()};return o(),()=>{s&&ov(s)}}const GH=(n,e)=>T4(e)?n.ownerDocument.documentElement:e,WH=n=>T4(n)?window.scrollY:n.scrollTop,bee="ElAffix",XSe=Ne({name:bee}),YSe=Ne({...XSe,props:GSe,emits:WSe,setup(n,{expose:e,emit:t}){const r=n,i=kt("affix"),a=jr(),s=jr(),o=jr(),{height:l}=kSe(),{height:u,width:c,top:d,bottom:f,update:h}=NH(s,{windowScroll:!1}),p=NH(a),m=ie(!1),v=ie(0),g=ie(0),y=V(()=>({height:m.value?`${u.value}px`:"",width:m.value?`${c.value}px`:""})),_=V(()=>{if(!m.value)return{};const w=r.offset?ia(r.offset):0;return{height:`${u.value}px`,width:`${c.value}px`,top:r.position==="top"?w:"",bottom:r.position==="bottom"?w:"",transform:g.value?`translateY(${g.value}px)`:"",zIndex:r.zIndex}}),b=()=>{if(!o.value)return;v.value=o.value instanceof Window?document.documentElement.scrollTop:o.value.scrollTop||0;const{position:w,target:A,offset:T}=r,C=T+u.value;if(w==="top")if(A){const E=p.bottom.value-C;m.value=T>d.value&&p.bottom.value>0,g.value=E<0?E:0}else m.value=T>d.value;else if(A){const E=l.value-p.top.value-C;m.value=l.value-T<f.value&&l.value>p.top.value,g.value=E<0?-E:0}else m.value=l.value-T<f.value},x=()=>{h(),t("scroll",{scrollTop:v.value,fixed:m.value})};return St(m,w=>t("change",w)),zn(()=>{var w;r.target?(a.value=(w=document.querySelector(r.target))!=null?w:void 0,a.value||Xa(bee,`Target does not exist: ${r.target}`)):a.value=document.documentElement,o.value=FN(s.value,!0),h()}),ni(o,"scroll",x),vs(b),e({update:b,updateRoot:h}),(w,A)=>(W(),Se("div",{ref_key:"root",ref:s,class:J(S(i).b()),style:Jt(S(y))},[Ce("div",{class:J({[S(i).m("fixed")]:m.value}),style:Jt(S(_))},[at(w.$slots,"default")],6)],6))}});var QSe=$t(YSe,[["__file","affix.vue"]]);const Bn=(n,e)=>{if(n.install=t=>{for(const r of[n,...Object.values(e??{})])t.component(r.name,r)},e)for(const[t,r]of Object.entries(e))n[t]=r;return n},See=(n,e)=>(n.install=t=>{n._context=t._context,t.config.globalProperties[e]=n},n),ZSe=(n,e)=>(n.install=t=>{t.directive(e,n)},n),Xi=n=>(n.install=Jr,n),JSe=Bn(QSe),exe=Vt({size:{type:tt([Number,String])},color:{type:String}}),txe=Ne({name:"ElIcon",inheritAttrs:!1}),nxe=Ne({...txe,props:exe,setup(n){const e=n,t=kt("icon"),r=V(()=>{const{size:i,color:a}=e;return!i&&!a?{}:{fontSize:ti(i)?void 0:ia(i),"--color":a}});return(i,a)=>(W(),Se("i",lr({class:S(t).b(),style:S(r)},i.$attrs),[at(i.$slots,"default")],16))}});var rxe=$t(nxe,[["__file","icon.vue"]]);const tn=Bn(rxe);/*! Element Plus Icons Vue v2.3.1 */var ixe=Ne({name:"ArrowDown",__name:"arrow-down",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),lh=ixe,axe=Ne({name:"ArrowLeft",__name:"arrow-left",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),Up=axe,sxe=Ne({name:"ArrowRight",__name:"arrow-right",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),jo=sxe,oxe=Ne({name:"ArrowUp",__name:"arrow-up",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),zN=oxe,lxe=Ne({name:"Back",__name:"back",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),Ce("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),uxe=lxe,cxe=Ne({name:"Calendar",__name:"calendar",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),dxe=cxe,fxe=Ne({name:"CaretRight",__name:"caret-right",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),xee=fxe,hxe=Ne({name:"CaretTop",__name:"caret-top",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),pxe=hxe,mxe=Ne({name:"Check",__name:"check",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),gw=mxe,vxe=Ne({name:"CircleCheckFilled",__name:"circle-check-filled",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),gxe=vxe,yxe=Ne({name:"CircleCheck",__name:"circle-check",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),Ce("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),HN=yxe,_xe=Ne({name:"CircleCloseFilled",__name:"circle-close-filled",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),VN=_xe,bxe=Ne({name:"CircleClose",__name:"circle-close",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),Ce("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),uh=bxe,Sxe=Ne({name:"Clock",__name:"clock",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),Ce("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),Ce("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),wee=Sxe,xxe=Ne({name:"Close",__name:"close",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),Fc=xxe,wxe=Ne({name:"DArrowLeft",__name:"d-arrow-left",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),zp=wxe,Txe=Ne({name:"DArrowRight",__name:"d-arrow-right",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),Hp=Txe,Cxe=Ne({name:"Delete",__name:"delete",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),Axe=Cxe,Exe=Ne({name:"Document",__name:"document",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),Tee=Exe,Mxe=Ne({name:"Files",__name:"files",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M128 384v448h768V384zm-32-64h832a32 32 0 0 1 32 32v512a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V352a32 32 0 0 1 32-32m64-128h704v64H160zm96-128h512v64H256z"})]))}}),Ixe=Mxe,Dxe=Ne({name:"FullScreen",__name:"full-screen",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),Pxe=Dxe,Rxe=Ne({name:"Hide",__name:"hide",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),Ce("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),kxe=Rxe,Lxe=Ne({name:"InfoFilled",__name:"info-filled",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),$N=Lxe,Oxe=Ne({name:"Loading",__name:"loading",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),Pd=Oxe,Nxe=Ne({name:"Minus",__name:"minus",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),Bxe=Nxe,Fxe=Ne({name:"MoreFilled",__name:"more-filled",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),qH=Fxe,Uxe=Ne({name:"More",__name:"more",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),zxe=Uxe,Hxe=Ne({name:"PictureFilled",__name:"picture-filled",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),Vxe=Hxe,$xe=Ne({name:"Plus",__name:"plus",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),Cee=$xe,Gxe=Ne({name:"QuestionFilled",__name:"question-filled",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),Wxe=Gxe,qxe=Ne({name:"RefreshLeft",__name:"refresh-left",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),jxe=qxe,Kxe=Ne({name:"RefreshRight",__name:"refresh-right",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),Xxe=Kxe,Yxe=Ne({name:"ScaleToOriginal",__name:"scale-to-original",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),Qxe=Yxe,Zxe=Ne({name:"Search",__name:"search",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),Jxe=Zxe,e2e=Ne({name:"SortDown",__name:"sort-down",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),t2e=e2e,n2e=Ne({name:"SortUp",__name:"sort-up",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),r2e=n2e,i2e=Ne({name:"StarFilled",__name:"star-filled",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),ST=i2e,a2e=Ne({name:"Star",__name:"star",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),s2e=a2e,o2e=Ne({name:"SuccessFilled",__name:"success-filled",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),GN=o2e,l2e=Ne({name:"View",__name:"view",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),u2e=l2e,c2e=Ne({name:"WarningFilled",__name:"warning-filled",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),M4=c2e,d2e=Ne({name:"ZoomIn",__name:"zoom-in",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),Aee=d2e,f2e=Ne({name:"ZoomOut",__name:"zoom-out",setup(n){return(e,t)=>(W(),Se("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Ce("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),h2e=f2e;const li=tt([String,Object,Function]),WN={Close:Fc},qN={Close:Fc,SuccessFilled:GN,InfoFilled:$N,WarningFilled:M4,CircleCloseFilled:VN},Vp={success:GN,warning:M4,error:VN,info:$N},I4={validating:Pd,success:HN,error:uh},p2e=["light","dark"],m2e=Vt({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:A1(Vp),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:p2e,default:"light"}}),v2e={close:n=>n instanceof MouseEvent},g2e=Ne({name:"ElAlert"}),y2e=Ne({...g2e,props:m2e,emits:v2e,setup(n,{emit:e}){const t=n,{Close:r}=qN,i=Oa(),a=kt("alert"),s=ie(!0),o=V(()=>Vp[t.type]),l=V(()=>!!(t.description||i.default)),u=c=>{s.value=!1,e("close",c)};return(c,d)=>(W(),pt(Ka,{name:S(a).b("fade"),persisted:""},{default:Oe(()=>[Wn(Ce("div",{class:J([S(a).b(),S(a).m(c.type),S(a).is("center",c.center),S(a).is(c.effect)]),role:"alert"},[c.showIcon&&S(o)?(W(),pt(S(tn),{key:0,class:J([S(a).e("icon"),{[S(a).is("big")]:S(l)}])},{default:Oe(()=>[(W(),pt(ir(S(o))))]),_:1},8,["class"])):st("v-if",!0),Ce("div",{class:J(S(a).e("content"))},[c.title||c.$slots.title?(W(),Se("span",{key:0,class:J([S(a).e("title"),{"with-description":S(l)}])},[at(c.$slots,"title",{},()=>[Xn(Ft(c.title),1)])],2)):st("v-if",!0),S(l)?(W(),Se("p",{key:1,class:J(S(a).e("description"))},[at(c.$slots,"default",{},()=>[Xn(Ft(c.description),1)])],2)):st("v-if",!0),c.closable?(W(),Se(on,{key:2},[c.closeText?(W(),Se("div",{key:0,class:J([S(a).e("close-btn"),S(a).is("customed")]),onClick:u},Ft(c.closeText),3)):(W(),pt(S(tn),{key:1,class:J(S(a).e("close-btn")),onClick:u},{default:Oe(()=>[be(S(r))]),_:1},8,["class"]))],64)):st("v-if",!0)],2)],2),[[Nr,s.value]])]),_:3},8,["name"]))}});var _2e=$t(y2e,[["__file","alert.vue"]]);const b2e=Bn(_2e),D4=()=>Cr&&/firefox/i.test(window.navigator.userAgent);let lc;const S2e=`
  height:0 !important;
  visibility:hidden !important;
  ${D4()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,x2e=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function w2e(n){const e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing"),r=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),i=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:x2e.map(s=>`${s}:${e.getPropertyValue(s)}`).join(";"),paddingSize:r,borderSize:i,boxSizing:t}}function jH(n,e=1,t){var r;lc||(lc=document.createElement("textarea"),document.body.appendChild(lc));const{paddingSize:i,borderSize:a,boxSizing:s,contextStyle:o}=w2e(n);lc.setAttribute("style",`${o};${S2e}`),lc.value=n.value||n.placeholder||"";let l=lc.scrollHeight;const u={};s==="border-box"?l=l+a:s==="content-box"&&(l=l-i),lc.value="";const c=lc.scrollHeight-i;if(_n(e)){let d=c*e;s==="border-box"&&(d=d+i+a),l=Math.max(d,l),u.minHeight=`${d}px`}if(_n(t)){let d=c*t;s==="border-box"&&(d=d+i+a),l=Math.min(d,l)}return u.height=`${l}px`,(r=lc.parentNode)==null||r.removeChild(lc),lc=void 0,u}const Ki=n=>n,T2e=Vt({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),ks=n=>Mc(T2e,n),jN=Vt({id:{type:String,default:void 0},size:La,disabled:Boolean,modelValue:{type:tt([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:tt([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:li},prefixIcon:{type:li},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:tt([Object,Array,String]),default:()=>Ki({})},autofocus:Boolean,rows:{type:Number,default:2},...ks(["ariaLabel"])}),C2e={[jn]:n=>ln(n),input:n=>ln(n),change:n=>ln(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},A2e=["class","style"],E2e=/^on[A-Z]/,yw=(n={})=>{const{excludeListeners:e=!1,excludeKeys:t}=n,r=V(()=>((t==null?void 0:t.value)||[]).concat(A2e)),i=tr();return V(i?()=>{var a;return Jx(Object.entries((a=i.proxy)==null?void 0:a.$attrs).filter(([s])=>!r.value.includes(s)&&!(e&&E2e.test(s))))}:()=>({}))},Iv=Symbol("formContextKey"),Rd=Symbol("formItemContextKey"),KH={prefix:Math.floor(Math.random()*1e4),current:0},M2e=Symbol("elIdInjection"),KN=()=>tr()?Yt(M2e,KH):KH,Ds=n=>{const e=KN(),t=_N();return $L(()=>S(n)||`${t.value}-id-${e.prefix}-${e.current++}`)},Zs=()=>{const n=Yt(Iv,void 0),e=Yt(Rd,void 0);return{form:n,formItem:e}},ec=(n,{formItemContext:e,disableIdGeneration:t,disableIdManagement:r})=>{t||(t=ie(!1)),r||(r=ie(!1));const i=ie();let a;const s=V(()=>{var o;return!!(!(n.label||n.ariaLabel)&&e&&e.inputIds&&((o=e.inputIds)==null?void 0:o.length)<=1)});return zn(()=>{a=St([Kr(n,"id"),t],([o,l])=>{const u=o??(l?void 0:Ds().value);u!==i.value&&(e!=null&&e.removeInputId&&(i.value&&e.removeInputId(i.value),!(r!=null&&r.value)&&!l&&u&&e.addInputId(u)),i.value=u)},{immediate:!0})}),sm(()=>{a&&a(),e!=null&&e.removeInputId&&i.value&&e.removeInputId(i.value)}),{isLabeledByFormItem:s,inputId:i}},Eee=n=>{const e=tr();return V(()=>{var t,r;return(r=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:r[n]})},Ca=(n,e={})=>{const t=ie(void 0),r=e.prop?t:Eee("size"),i=e.global?t:pee(),a=e.form?{size:void 0}:Yt(Iv,void 0),s=e.formItem?{size:void 0}:Yt(Rd,void 0);return V(()=>r.value||S(n)||(s==null?void 0:s.size)||(a==null?void 0:a.size)||i.value||"")},Js=n=>{const e=Eee("disabled"),t=Yt(Iv,void 0);return V(()=>e.value||S(n)||(t==null?void 0:t.disabled)||!1)};function um(n,{beforeFocus:e,afterFocus:t,beforeBlur:r,afterBlur:i}={}){const a=tr(),{emit:s}=a,o=jr(),l=ie(!1),u=f=>{hn(e)&&e(f)||l.value||(l.value=!0,s("focus",f),t==null||t())},c=f=>{var h;hn(r)&&r(f)||f.relatedTarget&&((h=o.value)!=null&&h.contains(f.relatedTarget))||(l.value=!1,s("blur",f),i==null||i())},d=()=>{var f,h;(f=o.value)!=null&&f.contains(document.activeElement)&&o.value!==document.activeElement||(h=n.value)==null||h.focus()};return St(o,f=>{f&&f.setAttribute("tabindex","-1")}),ni(o,"focus",u,!0),ni(o,"blur",c,!0),ni(o,"click",d,!0),{isFocused:l,wrapperRef:o,handleFocus:u,handleBlur:c}}const I2e=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n);function _w({afterComposition:n,emit:e}){const t=ie(!1),r=o=>{e==null||e("compositionstart",o),t.value=!0},i=o=>{var l;e==null||e("compositionupdate",o);const u=(l=o.target)==null?void 0:l.value,c=u[u.length-1]||"";t.value=!I2e(c)},a=o=>{e==null||e("compositionend",o),t.value&&(t.value=!1,cn(()=>n(o)))};return{isComposing:t,handleComposition:o=>{o.type==="compositionend"?a(o):i(o)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:a}}function D2e(n){let e;function t(){if(n.value==null)return;const{selectionStart:i,selectionEnd:a,value:s}=n.value;if(i==null||a==null)return;const o=s.slice(0,Math.max(0,i)),l=s.slice(Math.max(0,a));e={selectionStart:i,selectionEnd:a,value:s,beforeTxt:o,afterTxt:l}}function r(){if(n.value==null||e==null)return;const{value:i}=n.value,{beforeTxt:a,afterTxt:s,selectionStart:o}=e;if(a==null||s==null||o==null)return;let l=i.length;if(i.endsWith(s))l=i.length-s.length;else if(i.startsWith(a))l=a.length;else{const u=a[o-1],c=i.indexOf(u,o-1);c!==-1&&(l=c+1)}n.value.setSelectionRange(l,l)}return[t,r]}const P2e=Ne({name:"ElInput",inheritAttrs:!1}),R2e=Ne({...P2e,props:jN,emits:C2e,setup(n,{expose:e,emit:t}){const r=n,i=om(),a=yw(),s=Oa(),o=V(()=>[r.type==="textarea"?m.b():p.b(),p.m(f.value),p.is("disabled",h.value),p.is("exceed",re.value),{[p.b("group")]:s.prepend||s.append,[p.m("prefix")]:s.prefix||r.prefixIcon,[p.m("suffix")]:s.suffix||r.suffixIcon||r.clearable||r.showPassword,[p.bm("suffix","password-clear")]:U.value&&B.value,[p.b("hidden")]:r.type==="hidden"},i.class]),l=V(()=>[p.e("wrapper"),p.is("focus",T.value)]),{form:u,formItem:c}=Zs(),{inputId:d}=ec(r,{formItemContext:c}),f=Ca(),h=Js(),p=kt("input"),m=kt("textarea"),v=jr(),g=jr(),y=ie(!1),_=ie(!1),b=ie(),x=jr(r.inputStyle),w=V(()=>v.value||g.value),{wrapperRef:A,isFocused:T,handleFocus:C,handleBlur:E}=um(w,{beforeFocus(){return h.value},afterBlur(){var ye;r.validateEvent&&((ye=c==null?void 0:c.validate)==null||ye.call(c,"blur").catch(Ve=>void 0))}}),I=V(()=>{var ye;return(ye=u==null?void 0:u.statusIcon)!=null?ye:!1}),P=V(()=>(c==null?void 0:c.validateState)||""),L=V(()=>P.value&&I4[P.value]),N=V(()=>_.value?u2e:kxe),F=V(()=>[i.style]),k=V(()=>[r.inputStyle,x.value,{resize:r.resize}]),H=V(()=>es(r.modelValue)?"":String(r.modelValue)),U=V(()=>r.clearable&&!h.value&&!r.readonly&&!!H.value&&(T.value||y.value)),B=V(()=>r.showPassword&&!h.value&&!!H.value&&(!!H.value||T.value)),$=V(()=>r.showWordLimit&&!!r.maxlength&&(r.type==="text"||r.type==="textarea")&&!h.value&&!r.readonly&&!r.showPassword),ee=V(()=>H.value.length),re=V(()=>!!$.value&&ee.value>Number(r.maxlength)),ne=V(()=>!!s.suffix||!!r.suffixIcon||U.value||r.showPassword||$.value||!!P.value&&I.value),[ae,pe]=D2e(v);zi(g,ye=>{if(ke(),!$.value||r.resize!=="both")return;const Ve=ye[0],{width:et}=Ve.contentRect;b.value={right:`calc(100% - ${et+15+6}px)`}});const de=()=>{const{type:ye,autosize:Ve}=r;if(!(!Cr||ye!=="textarea"||!g.value))if(Ve){const et=er(Ve)?Ve.minRows:void 0,At=er(Ve)?Ve.maxRows:void 0,It=jH(g.value,et,At);x.value={overflowY:"hidden",...It},cn(()=>{g.value.offsetHeight,x.value=It})}else x.value={minHeight:jH(g.value).minHeight}},ke=(ye=>{let Ve=!1;return()=>{var et;if(Ve||!r.autosize)return;((et=g.value)==null?void 0:et.offsetParent)===null||(ye(),Ve=!0)}})(de),Be=()=>{const ye=w.value,Ve=r.formatter?r.formatter(H.value):H.value;!ye||ye.value===Ve||(ye.value=Ve)},Xe=async ye=>{ae();let{value:Ve}=ye.target;if(r.formatter&&(Ve=r.parser?r.parser(Ve):Ve),!Y.value){if(Ve===H.value){Be();return}t(jn,Ve),t("input",Ve),await cn(),Be(),pe()}},Ye=ye=>{t("change",ye.target.value)},{isComposing:Y,handleCompositionStart:he,handleCompositionUpdate:le,handleCompositionEnd:Ke}=_w({emit:t,afterComposition:Xe}),Ue=()=>{ae(),_.value=!_.value,setTimeout(pe)},Ze=()=>{var ye;return(ye=w.value)==null?void 0:ye.focus()},je=()=>{var ye;return(ye=w.value)==null?void 0:ye.blur()},He=ye=>{y.value=!1,t("mouseleave",ye)},ut=ye=>{y.value=!0,t("mouseenter",ye)},ge=ye=>{t("keydown",ye)},q=()=>{var ye;(ye=w.value)==null||ye.select()},te=()=>{t(jn,""),t("change",""),t("clear"),t("input","")};return St(()=>r.modelValue,()=>{var ye;cn(()=>de()),r.validateEvent&&((ye=c==null?void 0:c.validate)==null||ye.call(c,"change").catch(Ve=>void 0))}),St(H,()=>Be()),St(()=>r.type,async()=>{await cn(),Be(),de()}),zn(()=>{!r.formatter&&r.parser,Be(),cn(de)}),e({input:v,textarea:g,ref:w,textareaStyle:k,autosize:Kr(r,"autosize"),isComposing:Y,focus:Ze,blur:je,select:q,clear:te,resizeTextarea:de}),(ye,Ve)=>(W(),Se("div",{class:J([S(o),{[S(p).bm("group","append")]:ye.$slots.append,[S(p).bm("group","prepend")]:ye.$slots.prepend}]),style:Jt(S(F)),onMouseenter:ut,onMouseleave:He},[st(" input "),ye.type!=="textarea"?(W(),Se(on,{key:0},[st(" prepend slot "),ye.$slots.prepend?(W(),Se("div",{key:0,class:J(S(p).be("group","prepend"))},[at(ye.$slots,"prepend")],2)):st("v-if",!0),Ce("div",{ref_key:"wrapperRef",ref:A,class:J(S(l))},[st(" prefix slot "),ye.$slots.prefix||ye.prefixIcon?(W(),Se("span",{key:0,class:J(S(p).e("prefix"))},[Ce("span",{class:J(S(p).e("prefix-inner"))},[at(ye.$slots,"prefix"),ye.prefixIcon?(W(),pt(S(tn),{key:0,class:J(S(p).e("icon"))},{default:Oe(()=>[(W(),pt(ir(ye.prefixIcon)))]),_:1},8,["class"])):st("v-if",!0)],2)],2)):st("v-if",!0),Ce("input",lr({id:S(d),ref_key:"input",ref:v,class:S(p).e("inner")},S(a),{minlength:ye.minlength,maxlength:ye.maxlength,type:ye.showPassword?_.value?"text":"password":ye.type,disabled:S(h),readonly:ye.readonly,autocomplete:ye.autocomplete,tabindex:ye.tabindex,"aria-label":ye.ariaLabel,placeholder:ye.placeholder,style:ye.inputStyle,form:ye.form,autofocus:ye.autofocus,role:ye.containerRole,onCompositionstart:S(he),onCompositionupdate:S(le),onCompositionend:S(Ke),onInput:Xe,onChange:Ye,onKeydown:ge}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),st(" suffix slot "),S(ne)?(W(),Se("span",{key:1,class:J(S(p).e("suffix"))},[Ce("span",{class:J(S(p).e("suffix-inner"))},[!S(U)||!S(B)||!S($)?(W(),Se(on,{key:0},[at(ye.$slots,"suffix"),ye.suffixIcon?(W(),pt(S(tn),{key:0,class:J(S(p).e("icon"))},{default:Oe(()=>[(W(),pt(ir(ye.suffixIcon)))]),_:1},8,["class"])):st("v-if",!0)],64)):st("v-if",!0),S(U)?(W(),pt(S(tn),{key:1,class:J([S(p).e("icon"),S(p).e("clear")]),onMousedown:Tn(S(Jr),["prevent"]),onClick:te},{default:Oe(()=>[be(S(uh))]),_:1},8,["class","onMousedown"])):st("v-if",!0),S(B)?(W(),pt(S(tn),{key:2,class:J([S(p).e("icon"),S(p).e("password")]),onClick:Ue},{default:Oe(()=>[(W(),pt(ir(S(N))))]),_:1},8,["class"])):st("v-if",!0),S($)?(W(),Se("span",{key:3,class:J(S(p).e("count"))},[Ce("span",{class:J(S(p).e("count-inner"))},Ft(S(ee))+" / "+Ft(ye.maxlength),3)],2)):st("v-if",!0),S(P)&&S(L)&&S(I)?(W(),pt(S(tn),{key:4,class:J([S(p).e("icon"),S(p).e("validateIcon"),S(p).is("loading",S(P)==="validating")])},{default:Oe(()=>[(W(),pt(ir(S(L))))]),_:1},8,["class"])):st("v-if",!0)],2)],2)):st("v-if",!0)],2),st(" append slot "),ye.$slots.append?(W(),Se("div",{key:1,class:J(S(p).be("group","append"))},[at(ye.$slots,"append")],2)):st("v-if",!0)],64)):(W(),Se(on,{key:1},[st(" textarea "),Ce("textarea",lr({id:S(d),ref_key:"textarea",ref:g,class:[S(m).e("inner"),S(p).is("focus",S(T))]},S(a),{minlength:ye.minlength,maxlength:ye.maxlength,tabindex:ye.tabindex,disabled:S(h),readonly:ye.readonly,autocomplete:ye.autocomplete,style:S(k),"aria-label":ye.ariaLabel,placeholder:ye.placeholder,form:ye.form,autofocus:ye.autofocus,rows:ye.rows,role:ye.containerRole,onCompositionstart:S(he),onCompositionupdate:S(le),onCompositionend:S(Ke),onInput:Xe,onFocus:S(C),onBlur:S(E),onChange:Ye,onKeydown:ge}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),S($)?(W(),Se("span",{key:0,style:Jt(b.value),class:J(S(p).e("count"))},Ft(S(ee))+" / "+Ft(ye.maxlength),7)):st("v-if",!0)],64))],38))}});var k2e=$t(R2e,[["__file","input.vue"]]);const _o=Bn(k2e),rg=4,Mee={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},L2e=({move:n,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${n}%)`}),XN=Symbol("scrollbarContextKey"),O2e=Vt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),N2e="Thumb",B2e=Ne({__name:"thumb",props:O2e,setup(n){const e=n,t=Yt(XN),r=kt("scrollbar");t||Xa(N2e,"can not inject scrollbar context");const i=ie(),a=ie(),s=ie({}),o=ie(!1);let l=!1,u=!1,c=Cr?document.onselectstart:null;const d=V(()=>Mee[e.vertical?"vertical":"horizontal"]),f=V(()=>L2e({size:e.size,move:e.move,bar:d.value})),h=V(()=>i.value[d.value.offset]**2/t.wrapElement[d.value.scrollSize]/e.ratio/a.value[d.value.offset]),p=w=>{var A;if(w.stopPropagation(),w.ctrlKey||[1,2].includes(w.button))return;(A=window.getSelection())==null||A.removeAllRanges(),v(w);const T=w.currentTarget;T&&(s.value[d.value.axis]=T[d.value.offset]-(w[d.value.client]-T.getBoundingClientRect()[d.value.direction]))},m=w=>{if(!a.value||!i.value||!t.wrapElement)return;const A=Math.abs(w.target.getBoundingClientRect()[d.value.direction]-w[d.value.client]),T=a.value[d.value.offset]/2,C=(A-T)*100*h.value/i.value[d.value.offset];t.wrapElement[d.value.scroll]=C*t.wrapElement[d.value.scrollSize]/100},v=w=>{w.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",y),c=document.onselectstart,document.onselectstart=()=>!1},g=w=>{if(!i.value||!a.value||l===!1)return;const A=s.value[d.value.axis];if(!A)return;const T=(i.value.getBoundingClientRect()[d.value.direction]-w[d.value.client])*-1,C=a.value[d.value.offset]-A,E=(T-C)*100*h.value/i.value[d.value.offset];t.wrapElement[d.value.scroll]=E*t.wrapElement[d.value.scrollSize]/100},y=()=>{l=!1,s.value[d.value.axis]=0,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y),x(),u&&(o.value=!1)},_=()=>{u=!1,o.value=!!e.size},b=()=>{u=!0,o.value=l};Wr(()=>{x(),document.removeEventListener("mouseup",y)});const x=()=>{document.onselectstart!==c&&(document.onselectstart=c)};return ni(Kr(t,"scrollbarElement"),"mousemove",_),ni(Kr(t,"scrollbarElement"),"mouseleave",b),(w,A)=>(W(),pt(Ka,{name:S(r).b("fade"),persisted:""},{default:Oe(()=>[Wn(Ce("div",{ref_key:"instance",ref:i,class:J([S(r).e("bar"),S(r).is(S(d).key)]),onMousedown:m},[Ce("div",{ref_key:"thumb",ref:a,class:J(S(r).e("thumb")),style:Jt(S(f)),onMousedown:p},null,38)],34),[[Nr,w.always||o.value]])]),_:1},8,["name"]))}});var XH=$t(B2e,[["__file","thumb.vue"]]);const F2e=Vt({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),U2e=Ne({__name:"bar",props:F2e,setup(n,{expose:e}){const t=n,r=Yt(XN),i=ie(0),a=ie(0),s=ie(""),o=ie(""),l=ie(1),u=ie(1);return e({handleScroll:f=>{if(f){const h=f.offsetHeight-rg,p=f.offsetWidth-rg;a.value=f.scrollTop*100/h*l.value,i.value=f.scrollLeft*100/p*u.value}},update:()=>{const f=r==null?void 0:r.wrapElement;if(!f)return;const h=f.offsetHeight-rg,p=f.offsetWidth-rg,m=h**2/f.scrollHeight,v=p**2/f.scrollWidth,g=Math.max(m,t.minSize),y=Math.max(v,t.minSize);l.value=m/(h-m)/(g/(h-g)),u.value=v/(p-v)/(y/(p-y)),o.value=g+rg<h?`${g}px`:"",s.value=y+rg<p?`${y}px`:""}}),(f,h)=>(W(),Se(on,null,[be(XH,{move:i.value,ratio:u.value,size:s.value,always:f.always},null,8,["move","ratio","size","always"]),be(XH,{move:a.value,ratio:l.value,size:o.value,vertical:"",always:f.always},null,8,["move","ratio","size","always"])],64))}});var z2e=$t(U2e,[["__file","bar.vue"]]);const H2e=Vt({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:tt([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...ks(["ariaLabel","ariaOrientation"])}),V2e={scroll:({scrollTop:n,scrollLeft:e})=>[n,e].every(_n)},$2e="ElScrollbar",G2e=Ne({name:$2e}),W2e=Ne({...G2e,props:H2e,emits:V2e,setup(n,{expose:e,emit:t}){const r=n,i=kt("scrollbar");let a,s,o=0,l=0;const u=ie(),c=ie(),d=ie(),f=ie(),h=V(()=>{const x={};return r.height&&(x.height=ia(r.height)),r.maxHeight&&(x.maxHeight=ia(r.maxHeight)),[r.wrapStyle,x]}),p=V(()=>[r.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!r.native}]),m=V(()=>[i.e("view"),r.viewClass]),v=()=>{var x;c.value&&((x=f.value)==null||x.handleScroll(c.value),o=c.value.scrollTop,l=c.value.scrollLeft,t("scroll",{scrollTop:c.value.scrollTop,scrollLeft:c.value.scrollLeft}))};function g(x,w){er(x)?c.value.scrollTo(x):_n(x)&&_n(w)&&c.value.scrollTo(x,w)}const y=x=>{_n(x)&&(c.value.scrollTop=x)},_=x=>{_n(x)&&(c.value.scrollLeft=x)},b=()=>{var x;(x=f.value)==null||x.update()};return St(()=>r.noresize,x=>{x?(a==null||a(),s==null||s()):({stop:a}=zi(d,b),s=ni("resize",b))},{immediate:!0}),St(()=>[r.maxHeight,r.height],()=>{r.native||cn(()=>{var x;b(),c.value&&((x=f.value)==null||x.handleScroll(c.value))})}),pr(XN,$r({scrollbarElement:u,wrapElement:c})),cN(()=>{c.value&&(c.value.scrollTop=o,c.value.scrollLeft=l)}),zn(()=>{r.native||cn(()=>{b()})}),Ju(()=>b()),e({wrapRef:c,update:b,scrollTo:g,setScrollTop:y,setScrollLeft:_,handleScroll:v}),(x,w)=>(W(),Se("div",{ref_key:"scrollbarRef",ref:u,class:J(S(i).b())},[Ce("div",{ref_key:"wrapRef",ref:c,class:J(S(p)),style:Jt(S(h)),tabindex:x.tabindex,onScroll:v},[(W(),pt(ir(x.tag),{id:x.id,ref_key:"resizeRef",ref:d,class:J(S(m)),style:Jt(x.viewStyle),role:x.role,"aria-label":x.ariaLabel,"aria-orientation":x.ariaOrientation},{default:Oe(()=>[at(x.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),x.native?st("v-if",!0):(W(),pt(z2e,{key:0,ref_key:"barRef",ref:f,always:x.always,"min-size":x.minSize},null,8,["always","min-size"]))],2))}});var q2e=$t(W2e,[["__file","scrollbar.vue"]]);const Vd=Bn(q2e),YN=Symbol("popper"),Iee=Symbol("popperContent"),j2e=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],Dee=Vt({role:{type:String,values:j2e,default:"tooltip"}}),K2e=Ne({name:"ElPopper",inheritAttrs:!1}),X2e=Ne({...K2e,props:Dee,setup(n,{expose:e}){const t=n,r=ie(),i=ie(),a=ie(),s=ie(),o=V(()=>t.role),l={triggerRef:r,popperInstanceRef:i,contentRef:a,referenceRef:s,role:o};return e(l),pr(YN,l),(u,c)=>at(u.$slots,"default")}});var Y2e=$t(X2e,[["__file","popper.vue"]]);const Pee=Vt({arrowOffset:{type:Number,default:5}}),Q2e=Ne({name:"ElPopperArrow",inheritAttrs:!1}),Z2e=Ne({...Q2e,props:Pee,setup(n,{expose:e}){const t=n,r=kt("popper"),{arrowOffset:i,arrowRef:a,arrowStyle:s}=Yt(Iee,void 0);return St(()=>t.arrowOffset,o=>{i.value=o}),Wr(()=>{a.value=void 0}),e({arrowRef:a}),(o,l)=>(W(),Se("span",{ref_key:"arrowRef",ref:a,class:J(S(r).e("arrow")),style:Jt(S(s)),"data-popper-arrow":""},null,6))}});var J2e=$t(Z2e,[["__file","arrow.vue"]]);const Ree=Vt({virtualRef:{type:tt(Object)},virtualTriggering:Boolean,onMouseenter:{type:tt(Function)},onMouseleave:{type:tt(Function)},onClick:{type:tt(Function)},onKeydown:{type:tt(Function)},onFocus:{type:tt(Function)},onBlur:{type:tt(Function)},onContextmenu:{type:tt(Function)},id:String,open:Boolean}),kee=Symbol("elForwardRef"),ewe=n=>{pr(kee,{setForwardRef:t=>{n.value=t}})},twe=n=>({mounted(e){n(e)},updated(e){n(e)},unmounted(){n(null)}}),nwe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',rwe=n=>getComputedStyle(n).position==="fixed"?!1:n.offsetParent!==null,YH=n=>Array.from(n.querySelectorAll(nwe)).filter(e=>qL(e)&&rwe(e)),qL=n=>{if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.tabIndex<0||n.hasAttribute("disabled")||n.getAttribute("aria-disabled")==="true")return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return!(n.type==="hidden"||n.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},ZA=function(n,e,...t){let r;e.includes("mouse")||e.includes("click")?r="MouseEvents":e.includes("key")?r="KeyboardEvent":r="HTMLEvents";const i=document.createEvent(r);return i.initEvent(e,...t),n.dispatchEvent(i),n},Lee=n=>!n.getAttribute("aria-owns"),Oee=(n,e,t)=>{const{parentNode:r}=n;if(!r)return null;const i=r.querySelectorAll(t),a=Array.prototype.indexOf.call(i,n);return i[a+e]||null},JA=n=>{n&&(n.focus(),!Lee(n)&&n.click())},iwe="ElOnlyChild",Nee=Ne({name:iwe,setup(n,{slots:e,attrs:t}){var r;const i=Yt(kee),a=twe((r=i==null?void 0:i.setForwardRef)!=null?r:Jr);return()=>{var s;const o=(s=e.default)==null?void 0:s.call(e,t);if(!o||o.length>1)return null;const l=Bee(o);return l?Wn($f(l,t),[[a]]):null}}});function Bee(n){if(!n)return null;const e=n;for(const t of e){if(er(t))switch(t.type){case So:continue;case T_:case"svg":return QH(t);case on:return Bee(t.children);default:return t}return QH(t)}return null}function QH(n){const e=kt("only-child");return be("span",{class:e.e("content")},[n])}const awe=Ne({name:"ElPopperTrigger",inheritAttrs:!1}),swe=Ne({...awe,props:Ree,setup(n,{expose:e}){const t=n,{role:r,triggerRef:i}=Yt(YN,void 0);ewe(i);const a=V(()=>o.value?t.id:void 0),s=V(()=>{if(r&&r.value==="tooltip")return t.open&&t.id?t.id:void 0}),o=V(()=>{if(r&&r.value!=="tooltip")return r.value}),l=V(()=>o.value?`${t.open}`:void 0);let u;const c=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return zn(()=>{St(()=>t.virtualRef,d=>{d&&(i.value=Wo(d))},{immediate:!0}),St(i,(d,f)=>{u==null||u(),u=void 0,Zl(d)&&(c.forEach(h=>{var p;const m=t[h];m&&(d.addEventListener(h.slice(2).toLowerCase(),m),(p=f==null?void 0:f.removeEventListener)==null||p.call(f,h.slice(2).toLowerCase(),m))}),qL(d)&&(u=St([a,s,o,l],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,m)=>{es(h[m])?d.removeAttribute(p):d.setAttribute(p,h[m])})},{immediate:!0}))),Zl(f)&&qL(f)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>f.removeAttribute(h))},{immediate:!0})}),Wr(()=>{if(u==null||u(),u=void 0,i.value&&Zl(i.value)){const d=i.value;c.forEach(f=>{const h=t[f];h&&d.removeEventListener(f.slice(2).toLowerCase(),h)}),i.value=void 0}}),e({triggerRef:i}),(d,f)=>d.virtualTriggering?st("v-if",!0):(W(),pt(S(Nee),lr({key:0},d.$attrs,{"aria-controls":S(a),"aria-describedby":S(s),"aria-expanded":S(l),"aria-haspopup":S(o)}),{default:Oe(()=>[at(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var owe=$t(swe,[["__file","trigger.vue"]]);const PD="focus-trap.focus-after-trapped",RD="focus-trap.focus-after-released",lwe="focus-trap.focusout-prevented",ZH={cancelable:!0,bubbles:!1},uwe={cancelable:!0,bubbles:!1},JH="focusAfterTrapped",eV="focusAfterReleased",QN=Symbol("elFocusTrap"),ZN=ie(),P4=ie(0),JN=ie(0);let xT=0;const Fee=n=>{const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0||r===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},tV=(n,e)=>{for(const t of n)if(!cwe(t,e))return t},cwe=(n,e)=>{if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1},dwe=n=>{const e=Fee(n),t=tV(e,n),r=tV(e.reverse(),n);return[t,r]},fwe=n=>n instanceof HTMLInputElement&&"select"in n,tp=(n,e)=>{if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),JN.value=window.performance.now(),n!==t&&fwe(n)&&e&&n.select()}};function nV(n,e){const t=[...n],r=n.indexOf(e);return r!==-1&&t.splice(r,1),t}const hwe=()=>{let n=[];return{push:r=>{const i=n[0];i&&r!==i&&i.pause(),n=nV(n,r),n.unshift(r)},remove:r=>{var i,a;n=nV(n,r),(a=(i=n[0])==null?void 0:i.resume)==null||a.call(i)}}},pwe=(n,e=!1)=>{const t=document.activeElement;for(const r of n)if(tp(r,e),document.activeElement!==t)return},rV=hwe(),mwe=()=>P4.value>JN.value,wT=()=>{ZN.value="pointer",P4.value=window.performance.now()},iV=()=>{ZN.value="keyboard",P4.value=window.performance.now()},vwe=()=>(zn(()=>{xT===0&&(document.addEventListener("mousedown",wT),document.addEventListener("touchstart",wT),document.addEventListener("keydown",iV)),xT++}),Wr(()=>{xT--,xT<=0&&(document.removeEventListener("mousedown",wT),document.removeEventListener("touchstart",wT),document.removeEventListener("keydown",iV))}),{focusReason:ZN,lastUserFocusTimestamp:P4,lastAutomatedFocusTimestamp:JN}),TT=n=>new CustomEvent(lwe,{...uwe,detail:n}),jt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let gy=[];const aV=n=>{n.code===jt.esc&&gy.forEach(e=>e(n))},gwe=n=>{zn(()=>{gy.length===0&&document.addEventListener("keydown",aV),Cr&&gy.push(n)}),Wr(()=>{gy=gy.filter(e=>e!==n),gy.length===0&&Cr&&document.removeEventListener("keydown",aV)})},ywe=Ne({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[JH,eV,"focusin","focusout","focusout-prevented","release-requested"],setup(n,{emit:e}){const t=ie();let r,i;const{focusReason:a}=vwe();gwe(p=>{n.trapped&&!s.paused&&e("release-requested",p)});const s={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},o=p=>{if(!n.loop&&!n.trapped||s.paused)return;const{code:m,altKey:v,ctrlKey:g,metaKey:y,currentTarget:_,shiftKey:b}=p,{loop:x}=n,w=m===jt.tab&&!v&&!g&&!y,A=document.activeElement;if(w&&A){const T=_,[C,E]=dwe(T);if(C&&E){if(!b&&A===E){const P=TT({focusReason:a.value});e("focusout-prevented",P),P.defaultPrevented||(p.preventDefault(),x&&tp(C,!0))}else if(b&&[C,T].includes(A)){const P=TT({focusReason:a.value});e("focusout-prevented",P),P.defaultPrevented||(p.preventDefault(),x&&tp(E,!0))}}else if(A===T){const P=TT({focusReason:a.value});e("focusout-prevented",P),P.defaultPrevented||p.preventDefault()}}};pr(QN,{focusTrapRef:t,onKeydown:o}),St(()=>n.focusTrapEl,p=>{p&&(t.value=p)},{immediate:!0}),St([t],([p],[m])=>{p&&(p.addEventListener("keydown",o),p.addEventListener("focusin",c),p.addEventListener("focusout",d)),m&&(m.removeEventListener("keydown",o),m.removeEventListener("focusin",c),m.removeEventListener("focusout",d))});const l=p=>{e(JH,p)},u=p=>e(eV,p),c=p=>{const m=S(t);if(!m)return;const v=p.target,g=p.relatedTarget,y=v&&m.contains(v);n.trapped||g&&m.contains(g)||(r=g),y&&e("focusin",p),!s.paused&&n.trapped&&(y?i=v:tp(i,!0))},d=p=>{const m=S(t);if(!(s.paused||!m))if(n.trapped){const v=p.relatedTarget;!es(v)&&!m.contains(v)&&setTimeout(()=>{if(!s.paused&&n.trapped){const g=TT({focusReason:a.value});e("focusout-prevented",g),g.defaultPrevented||tp(i,!0)}},0)}else{const v=p.target;v&&m.contains(v)||e("focusout",p)}};async function f(){await cn();const p=S(t);if(p){rV.push(s);const m=p.contains(document.activeElement)?r:document.activeElement;if(r=m,!p.contains(m)){const g=new Event(PD,ZH);p.addEventListener(PD,l),p.dispatchEvent(g),g.defaultPrevented||cn(()=>{let y=n.focusStartEl;ln(y)||(tp(y),document.activeElement!==y&&(y="first")),y==="first"&&pwe(Fee(p),!0),(document.activeElement===m||y==="container")&&tp(p)})}}}function h(){const p=S(t);if(p){p.removeEventListener(PD,l);const m=new CustomEvent(RD,{...ZH,detail:{focusReason:a.value}});p.addEventListener(RD,u),p.dispatchEvent(m),!m.defaultPrevented&&(a.value=="keyboard"||!mwe()||p.contains(document.activeElement))&&tp(r??document.body),p.removeEventListener(RD,u),rV.remove(s)}}return zn(()=>{n.trapped&&f(),St(()=>n.trapped,p=>{p?f():h()})}),Wr(()=>{n.trapped&&h(),t.value&&(t.value.removeEventListener("keydown",o),t.value.removeEventListener("focusin",c),t.value.removeEventListener("focusout",d),t.value=void 0)}),{onKeydown:o}}});function _we(n,e,t,r,i,a){return at(n.$slots,"default",{handleKeydown:n.onKeydown})}var P_=$t(ywe,[["render",_we],["__file","focus-trap.vue"]]),yl="top",ju="bottom",Ku="right",_l="left",eB="auto",bw=[yl,ju,Ku,_l],E1="start",e2="end",bwe="clippingParents",Uee="viewport",Db="popper",Swe="reference",sV=bw.reduce(function(n,e){return n.concat([e+"-"+E1,e+"-"+e2])},[]),ch=[].concat(bw,[eB]).reduce(function(n,e){return n.concat([e,e+"-"+E1,e+"-"+e2])},[]),xwe="beforeRead",wwe="read",Twe="afterRead",Cwe="beforeMain",Awe="main",Ewe="afterMain",Mwe="beforeWrite",Iwe="write",Dwe="afterWrite",Pwe=[xwe,wwe,Twe,Cwe,Awe,Ewe,Mwe,Iwe,Dwe];function kd(n){return n?(n.nodeName||"").toLowerCase():null}function Vc(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function M1(n){var e=Vc(n).Element;return n instanceof e||n instanceof Element}function Uu(n){var e=Vc(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function tB(n){if(typeof ShadowRoot>"u")return!1;var e=Vc(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function Rwe(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},a=e.elements[t];!Uu(a)||!kd(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(s){var o=i[s];o===!1?a.removeAttribute(s):a.setAttribute(s,o===!0?"":o)}))})}function kwe(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],a=e.attributes[r]||{},s=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),o=s.reduce(function(l,u){return l[u]="",l},{});!Uu(i)||!kd(i)||(Object.assign(i.style,o),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}var zee={name:"applyStyles",enabled:!0,phase:"write",fn:Rwe,effect:kwe,requires:["computeStyles"]};function wd(n){return n.split("-")[0]}var $0=Math.max,uM=Math.min,I1=Math.round;function D1(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),r=1,i=1;if(Uu(n)&&e){var a=n.offsetHeight,s=n.offsetWidth;s>0&&(r=I1(t.width)/s||1),a>0&&(i=I1(t.height)/a||1)}return{width:t.width/r,height:t.height/i,top:t.top/i,right:t.right/r,bottom:t.bottom/i,left:t.left/r,x:t.left/r,y:t.top/i}}function nB(n){var e=D1(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function Hee(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&tB(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Gf(n){return Vc(n).getComputedStyle(n)}function Lwe(n){return["table","td","th"].indexOf(kd(n))>=0}function cm(n){return((M1(n)?n.ownerDocument:n.document)||window.document).documentElement}function R4(n){return kd(n)==="html"?n:n.assignedSlot||n.parentNode||(tB(n)?n.host:null)||cm(n)}function oV(n){return!Uu(n)||Gf(n).position==="fixed"?null:n.offsetParent}function Owe(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Uu(n)){var r=Gf(n);if(r.position==="fixed")return null}var i=R4(n);for(tB(i)&&(i=i.host);Uu(i)&&["html","body"].indexOf(kd(i))<0;){var a=Gf(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Sw(n){for(var e=Vc(n),t=oV(n);t&&Lwe(t)&&Gf(t).position==="static";)t=oV(t);return t&&(kd(t)==="html"||kd(t)==="body"&&Gf(t).position==="static")?e:t||Owe(n)||e}function rB(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function QS(n,e,t){return $0(n,uM(e,t))}function Nwe(n,e,t){var r=QS(n,e,t);return r>t?t:r}function Vee(){return{top:0,right:0,bottom:0,left:0}}function $ee(n){return Object.assign({},Vee(),n)}function Gee(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}var Bwe=function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,$ee(typeof n!="number"?n:Gee(n,bw))};function Fwe(n){var e,t=n.state,r=n.name,i=n.options,a=t.elements.arrow,s=t.modifiersData.popperOffsets,o=wd(t.placement),l=rB(o),u=[_l,Ku].indexOf(o)>=0,c=u?"height":"width";if(!(!a||!s)){var d=Bwe(i.padding,t),f=nB(a),h=l==="y"?yl:_l,p=l==="y"?ju:Ku,m=t.rects.reference[c]+t.rects.reference[l]-s[l]-t.rects.popper[c],v=s[l]-t.rects.reference[l],g=Sw(a),y=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,_=m/2-v/2,b=d[h],x=y-f[c]-d[p],w=y/2-f[c]/2+_,A=QS(b,w,x),T=l;t.modifiersData[r]=(e={},e[T]=A,e.centerOffset=A-w,e)}}function Uwe(n){var e=n.state,t=n.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!Hee(e.elements.popper,i)||(e.elements.arrow=i))}var zwe={name:"arrow",enabled:!0,phase:"main",fn:Fwe,effect:Uwe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function P1(n){return n.split("-")[1]}var Hwe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Vwe(n){var e=n.x,t=n.y,r=window,i=r.devicePixelRatio||1;return{x:I1(e*i)/i||0,y:I1(t*i)/i||0}}function lV(n){var e,t=n.popper,r=n.popperRect,i=n.placement,a=n.variation,s=n.offsets,o=n.position,l=n.gpuAcceleration,u=n.adaptive,c=n.roundOffsets,d=n.isFixed,f=s.x,h=f===void 0?0:f,p=s.y,m=p===void 0?0:p,v=typeof c=="function"?c({x:h,y:m}):{x:h,y:m};h=v.x,m=v.y;var g=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),_=_l,b=yl,x=window;if(u){var w=Sw(t),A="clientHeight",T="clientWidth";if(w===Vc(t)&&(w=cm(t),Gf(w).position!=="static"&&o==="absolute"&&(A="scrollHeight",T="scrollWidth")),w=w,i===yl||(i===_l||i===Ku)&&a===e2){b=ju;var C=d&&w===x&&x.visualViewport?x.visualViewport.height:w[A];m-=C-r.height,m*=l?1:-1}if(i===_l||(i===yl||i===ju)&&a===e2){_=Ku;var E=d&&w===x&&x.visualViewport?x.visualViewport.width:w[T];h-=E-r.width,h*=l?1:-1}}var I=Object.assign({position:o},u&&Hwe),P=c===!0?Vwe({x:h,y:m}):{x:h,y:m};if(h=P.x,m=P.y,l){var L;return Object.assign({},I,(L={},L[b]=y?"0":"",L[_]=g?"0":"",L.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",L))}return Object.assign({},I,(e={},e[b]=y?m+"px":"",e[_]=g?h+"px":"",e.transform="",e))}function $we(n){var e=n.state,t=n.options,r=t.gpuAcceleration,i=r===void 0?!0:r,a=t.adaptive,s=a===void 0?!0:a,o=t.roundOffsets,l=o===void 0?!0:o,u={placement:wd(e.placement),variation:P1(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,lV(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,lV(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Wee={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$we,data:{}},CT={passive:!0};function Gwe(n){var e=n.state,t=n.instance,r=n.options,i=r.scroll,a=i===void 0?!0:i,s=r.resize,o=s===void 0?!0:s,l=Vc(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach(function(c){c.addEventListener("scroll",t.update,CT)}),o&&l.addEventListener("resize",t.update,CT),function(){a&&u.forEach(function(c){c.removeEventListener("scroll",t.update,CT)}),o&&l.removeEventListener("resize",t.update,CT)}}var qee={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Gwe,data:{}},Wwe={left:"right",right:"left",bottom:"top",top:"bottom"};function eE(n){return n.replace(/left|right|bottom|top/g,function(e){return Wwe[e]})}var qwe={start:"end",end:"start"};function uV(n){return n.replace(/start|end/g,function(e){return qwe[e]})}function iB(n){var e=Vc(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function aB(n){return D1(cm(n)).left+iB(n).scrollLeft}function jwe(n){var e=Vc(n),t=cm(n),r=e.visualViewport,i=t.clientWidth,a=t.clientHeight,s=0,o=0;return r&&(i=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=r.offsetLeft,o=r.offsetTop)),{width:i,height:a,x:s+aB(n),y:o}}function Kwe(n){var e,t=cm(n),r=iB(n),i=(e=n.ownerDocument)==null?void 0:e.body,a=$0(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=$0(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+aB(n),l=-r.scrollTop;return Gf(i||t).direction==="rtl"&&(o+=$0(t.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:o,y:l}}function sB(n){var e=Gf(n),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function jee(n){return["html","body","#document"].indexOf(kd(n))>=0?n.ownerDocument.body:Uu(n)&&sB(n)?n:jee(R4(n))}function ZS(n,e){var t;e===void 0&&(e=[]);var r=jee(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),a=Vc(r),s=i?[a].concat(a.visualViewport||[],sB(r)?r:[]):r,o=e.concat(s);return i?o:o.concat(ZS(R4(s)))}function jL(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Xwe(n){var e=D1(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function cV(n,e){return e===Uee?jL(jwe(n)):M1(e)?Xwe(e):jL(Kwe(cm(n)))}function Ywe(n){var e=ZS(R4(n)),t=["absolute","fixed"].indexOf(Gf(n).position)>=0,r=t&&Uu(n)?Sw(n):n;return M1(r)?e.filter(function(i){return M1(i)&&Hee(i,r)&&kd(i)!=="body"}):[]}function Qwe(n,e,t){var r=e==="clippingParents"?Ywe(n):[].concat(e),i=[].concat(r,[t]),a=i[0],s=i.reduce(function(o,l){var u=cV(n,l);return o.top=$0(u.top,o.top),o.right=uM(u.right,o.right),o.bottom=uM(u.bottom,o.bottom),o.left=$0(u.left,o.left),o},cV(n,a));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Kee(n){var e=n.reference,t=n.element,r=n.placement,i=r?wd(r):null,a=r?P1(r):null,s=e.x+e.width/2-t.width/2,o=e.y+e.height/2-t.height/2,l;switch(i){case yl:l={x:s,y:e.y-t.height};break;case ju:l={x:s,y:e.y+e.height};break;case Ku:l={x:e.x+e.width,y:o};break;case _l:l={x:e.x-t.width,y:o};break;default:l={x:e.x,y:e.y}}var u=i?rB(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(a){case E1:l[u]=l[u]-(e[c]/2-t[c]/2);break;case e2:l[u]=l[u]+(e[c]/2-t[c]/2);break}}return l}function t2(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?n.placement:r,a=t.boundary,s=a===void 0?bwe:a,o=t.rootBoundary,l=o===void 0?Uee:o,u=t.elementContext,c=u===void 0?Db:u,d=t.altBoundary,f=d===void 0?!1:d,h=t.padding,p=h===void 0?0:h,m=$ee(typeof p!="number"?p:Gee(p,bw)),v=c===Db?Swe:Db,g=n.rects.popper,y=n.elements[f?v:c],_=Qwe(M1(y)?y:y.contextElement||cm(n.elements.popper),s,l),b=D1(n.elements.reference),x=Kee({reference:b,element:g,strategy:"absolute",placement:i}),w=jL(Object.assign({},g,x)),A=c===Db?w:b,T={top:_.top-A.top+m.top,bottom:A.bottom-_.bottom+m.bottom,left:_.left-A.left+m.left,right:A.right-_.right+m.right},C=n.modifiersData.offset;if(c===Db&&C){var E=C[i];Object.keys(T).forEach(function(I){var P=[Ku,ju].indexOf(I)>=0?1:-1,L=[yl,ju].indexOf(I)>=0?"y":"x";T[I]+=E[L]*P})}return T}function Zwe(n,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,a=t.rootBoundary,s=t.padding,o=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?ch:l,c=P1(r),d=c?o?sV:sV.filter(function(p){return P1(p)===c}):bw,f=d.filter(function(p){return u.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=t2(n,{placement:m,boundary:i,rootBoundary:a,padding:s})[wd(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function Jwe(n){if(wd(n)===eB)return[];var e=eE(n);return[uV(n),e,uV(e)]}function eTe(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,a=i===void 0?!0:i,s=t.altAxis,o=s===void 0?!0:s,l=t.fallbackPlacements,u=t.padding,c=t.boundary,d=t.rootBoundary,f=t.altBoundary,h=t.flipVariations,p=h===void 0?!0:h,m=t.allowedAutoPlacements,v=e.options.placement,g=wd(v),y=g===v,_=l||(y||!p?[eE(v)]:Jwe(v)),b=[v].concat(_).reduce(function(ae,pe){return ae.concat(wd(pe)===eB?Zwe(e,{placement:pe,boundary:c,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:m}):pe)},[]),x=e.rects.reference,w=e.rects.popper,A=new Map,T=!0,C=b[0],E=0;E<b.length;E++){var I=b[E],P=wd(I),L=P1(I)===E1,N=[yl,ju].indexOf(P)>=0,F=N?"width":"height",k=t2(e,{placement:I,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),H=N?L?Ku:_l:L?ju:yl;x[F]>w[F]&&(H=eE(H));var U=eE(H),B=[];if(a&&B.push(k[P]<=0),o&&B.push(k[H]<=0,k[U]<=0),B.every(function(ae){return ae})){C=I,T=!1;break}A.set(I,B)}if(T)for(var $=p?3:1,ee=function(ae){var pe=b.find(function(de){var me=A.get(de);if(me)return me.slice(0,ae).every(function(ke){return ke})});if(pe)return C=pe,"break"},re=$;re>0;re--){var ne=ee(re);if(ne==="break")break}e.placement!==C&&(e.modifiersData[r]._skip=!0,e.placement=C,e.reset=!0)}}var tTe={name:"flip",enabled:!0,phase:"main",fn:eTe,requiresIfExists:["offset"],data:{_skip:!1}};function dV(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function fV(n){return[yl,Ku,ju,_l].some(function(e){return n[e]>=0})}function nTe(n){var e=n.state,t=n.name,r=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,s=t2(e,{elementContext:"reference"}),o=t2(e,{altBoundary:!0}),l=dV(s,r),u=dV(o,i,a),c=fV(l),d=fV(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var rTe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nTe};function iTe(n,e,t){var r=wd(n),i=[_l,yl].indexOf(r)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,s=a[0],o=a[1];return s=s||0,o=(o||0)*i,[_l,Ku].indexOf(r)>=0?{x:o,y:s}:{x:s,y:o}}function aTe(n){var e=n.state,t=n.options,r=n.name,i=t.offset,a=i===void 0?[0,0]:i,s=ch.reduce(function(c,d){return c[d]=iTe(d,e.rects,a),c},{}),o=s[e.placement],l=o.x,u=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}var sTe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:aTe};function oTe(n){var e=n.state,t=n.name;e.modifiersData[t]=Kee({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Xee={name:"popperOffsets",enabled:!0,phase:"read",fn:oTe,data:{}};function lTe(n){return n==="x"?"y":"x"}function uTe(n){var e=n.state,t=n.options,r=n.name,i=t.mainAxis,a=i===void 0?!0:i,s=t.altAxis,o=s===void 0?!1:s,l=t.boundary,u=t.rootBoundary,c=t.altBoundary,d=t.padding,f=t.tether,h=f===void 0?!0:f,p=t.tetherOffset,m=p===void 0?0:p,v=t2(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),g=wd(e.placement),y=P1(e.placement),_=!y,b=rB(g),x=lTe(b),w=e.modifiersData.popperOffsets,A=e.rects.reference,T=e.rects.popper,C=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,E=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(w){if(a){var L,N=b==="y"?yl:_l,F=b==="y"?ju:Ku,k=b==="y"?"height":"width",H=w[b],U=H+v[N],B=H-v[F],$=h?-T[k]/2:0,ee=y===E1?A[k]:T[k],re=y===E1?-T[k]:-A[k],ne=e.elements.arrow,ae=h&&ne?nB(ne):{width:0,height:0},pe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Vee(),de=pe[N],me=pe[F],ke=QS(0,A[k],ae[k]),Be=_?A[k]/2-$-ke-de-E.mainAxis:ee-ke-de-E.mainAxis,Xe=_?-A[k]/2+$+ke+me+E.mainAxis:re+ke+me+E.mainAxis,Ye=e.elements.arrow&&Sw(e.elements.arrow),Y=Ye?b==="y"?Ye.clientTop||0:Ye.clientLeft||0:0,he=(L=I==null?void 0:I[b])!=null?L:0,le=H+Be-he-Y,Ke=H+Xe-he,Ue=QS(h?uM(U,le):U,H,h?$0(B,Ke):B);w[b]=Ue,P[b]=Ue-H}if(o){var Ze,je=b==="x"?yl:_l,He=b==="x"?ju:Ku,ut=w[x],ge=x==="y"?"height":"width",q=ut+v[je],te=ut-v[He],ye=[yl,_l].indexOf(g)!==-1,Ve=(Ze=I==null?void 0:I[x])!=null?Ze:0,et=ye?q:ut-A[ge]-T[ge]-Ve+E.altAxis,At=ye?ut+A[ge]+T[ge]-Ve-E.altAxis:te,It=h&&ye?Nwe(et,ut,At):QS(h?et:q,ut,h?At:te);w[x]=It,P[x]=It-ut}e.modifiersData[r]=P}}var cTe={name:"preventOverflow",enabled:!0,phase:"main",fn:uTe,requiresIfExists:["offset"]};function dTe(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function fTe(n){return n===Vc(n)||!Uu(n)?iB(n):dTe(n)}function hTe(n){var e=n.getBoundingClientRect(),t=I1(e.width)/n.offsetWidth||1,r=I1(e.height)/n.offsetHeight||1;return t!==1||r!==1}function pTe(n,e,t){t===void 0&&(t=!1);var r=Uu(e),i=Uu(e)&&hTe(e),a=cm(e),s=D1(n,i),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((kd(e)!=="body"||sB(a))&&(o=fTe(e)),Uu(e)?(l=D1(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=aB(a))),{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function mTe(n){var e=new Map,t=new Set,r=[];n.forEach(function(a){e.set(a.name,a)});function i(a){t.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(o){if(!t.has(o)){var l=e.get(o);l&&i(l)}}),r.push(a)}return n.forEach(function(a){t.has(a.name)||i(a)}),r}function vTe(n){var e=mTe(n);return Pwe.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function gTe(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function yTe(n){var e=n.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var hV={placement:"bottom",modifiers:[],strategy:"absolute"};function pV(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function oB(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,a=i===void 0?hV:i;return function(s,o,l){l===void 0&&(l=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},hV,a),modifiersData:{},elements:{reference:s,popper:o},attributes:{},styles:{}},c=[],d=!1,f={state:u,setOptions:function(m){var v=typeof m=="function"?m(u.options):m;p(),u.options=Object.assign({},a,u.options,v),u.scrollParents={reference:M1(s)?ZS(s):s.contextElement?ZS(s.contextElement):[],popper:ZS(o)};var g=vTe(yTe([].concat(r,u.options.modifiers)));return u.orderedModifiers=g.filter(function(y){return y.enabled}),h(),f.update()},forceUpdate:function(){if(!d){var m=u.elements,v=m.reference,g=m.popper;if(pV(v,g)){u.rects={reference:pTe(v,Sw(g),u.options.strategy==="fixed"),popper:nB(g)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(T){return u.modifiersData[T.name]=Object.assign({},T.data)});for(var y=0;y<u.orderedModifiers.length;y++){if(u.reset===!0){u.reset=!1,y=-1;continue}var _=u.orderedModifiers[y],b=_.fn,x=_.options,w=x===void 0?{}:x,A=_.name;typeof b=="function"&&(u=b({state:u,options:w,name:A,instance:f})||u)}}}},update:gTe(function(){return new Promise(function(m){f.forceUpdate(),m(u)})}),destroy:function(){p(),d=!0}};if(!pV(s,o))return f;f.setOptions(l).then(function(m){!d&&l.onFirstUpdate&&l.onFirstUpdate(m)});function h(){u.orderedModifiers.forEach(function(m){var v=m.name,g=m.options,y=g===void 0?{}:g,_=m.effect;if(typeof _=="function"){var b=_({state:u,name:v,instance:f,options:y}),x=function(){};c.push(b||x)}})}function p(){c.forEach(function(m){return m()}),c=[]}return f}}oB();var _Te=[qee,Xee,Wee,zee];oB({defaultModifiers:_Te});var bTe=[qee,Xee,Wee,zee,sTe,tTe,cTe,zwe,rTe],STe=oB({defaultModifiers:bTe});const xTe=["fixed","absolute"],wTe=Vt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:tt(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:ch,default:"bottom"},popperOptions:{type:tt(Object),default:()=>({})},strategy:{type:String,values:xTe,default:"absolute"}}),Yee=Vt({...wTe,id:String,style:{type:tt([String,Array,Object])},className:{type:tt([String,Array,Object])},effect:{type:tt(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:tt([String,Array,Object])},popperStyle:{type:tt([String,Array,Object])},referenceEl:{type:tt(Object)},triggerTargetEl:{type:tt(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...ks(["ariaLabel"])}),TTe={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},CTe=(n,e)=>{const t=ie(!1),r=ie();return{focusStartRef:r,trapped:t,onFocusAfterReleased:u=>{var c;((c=u.detail)==null?void 0:c.focusReason)!=="pointer"&&(r.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:u=>{n.visible&&!t.value&&(u.target&&(r.value=u.target),t.value=!0)},onFocusoutPrevented:u=>{n.trapping||(u.detail.focusReason==="pointer"&&u.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},ATe=(n,e=[])=>{const{placement:t,strategy:r,popperOptions:i}=n,a={placement:t,strategy:r,...i,modifiers:[...MTe(n),...e]};return ITe(a,i==null?void 0:i.modifiers),a},ETe=n=>{if(Cr)return Wo(n)};function MTe(n){const{offset:e,gpuAcceleration:t,fallbackPlacements:r}=n;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function ITe(n,e){e&&(n.modifiers=[...n.modifiers,...e??[]])}const DTe=(n,e,t={})=>{const r={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const u=PTe(l);Object.assign(s.value,u)},requires:["computeStyles"]},i=V(()=>{const{onFirstUpdate:l,placement:u,strategy:c,modifiers:d}=S(t);return{onFirstUpdate:l,placement:u||"bottom",strategy:c||"absolute",modifiers:[...d||[],r,{name:"applyStyles",enabled:!1}]}}),a=jr(),s=ie({styles:{popper:{position:S(i).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=()=>{a.value&&(a.value.destroy(),a.value=void 0)};return St(i,l=>{const u=S(a);u&&u.setOptions(l)},{deep:!0}),St([n,e],([l,u])=>{o(),!(!l||!u)&&(a.value=STe(l,u,S(i)))}),Wr(()=>{o()}),{state:V(()=>{var l;return{...((l=S(a))==null?void 0:l.state)||{}}}),styles:V(()=>S(s).styles),attributes:V(()=>S(s).attributes),update:()=>{var l;return(l=S(a))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=S(a))==null?void 0:l.forceUpdate()},instanceRef:V(()=>S(a))}};function PTe(n){const e=Object.keys(n.elements),t=Jx(e.map(i=>[i,n.styles[i]||{}])),r=Jx(e.map(i=>[i,n.attributes[i]]));return{styles:t,attributes:r}}const RTe=0,kTe=n=>{const{popperInstanceRef:e,contentRef:t,triggerRef:r,role:i}=Yt(YN,void 0),a=ie(),s=ie(),o=V(()=>({name:"eventListeners",enabled:!!n.visible})),l=V(()=>{var g;const y=S(a),_=(g=S(s))!=null?g:RTe;return{name:"arrow",enabled:!tee(y),options:{element:y,padding:_}}}),u=V(()=>({onFirstUpdate:()=>{p()},...ATe(n,[S(l),S(o)])})),c=V(()=>ETe(n.referenceEl)||S(r)),{attributes:d,state:f,styles:h,update:p,forceUpdate:m,instanceRef:v}=DTe(c,t,u);return St(v,g=>e.value=g),zn(()=>{St(()=>{var g;return(g=S(c))==null?void 0:g.getBoundingClientRect()},()=>{p()})}),{attributes:d,arrowRef:a,contentRef:t,instanceRef:v,state:f,styles:h,role:i,forceUpdate:m,update:p}},LTe=(n,{attributes:e,styles:t,role:r})=>{const{nextZIndex:i}=I_(),a=kt("popper"),s=V(()=>S(e).popper),o=ie(_n(n.zIndex)?n.zIndex:i()),l=V(()=>[a.b(),a.is("pure",n.pure),a.is(n.effect),n.popperClass]),u=V(()=>[{zIndex:S(o)},S(t).popper,n.popperStyle||{}]),c=V(()=>r.value==="dialog"?"false":void 0),d=V(()=>S(t).arrow||{});return{ariaModal:c,arrowStyle:d,contentAttrs:s,contentClass:l,contentStyle:u,contentZIndex:o,updateZIndex:()=>{o.value=_n(n.zIndex)?n.zIndex:i()}}},OTe=Ne({name:"ElPopperContent"}),NTe=Ne({...OTe,props:Yee,emits:TTe,setup(n,{expose:e,emit:t}){const r=n,{focusStartRef:i,trapped:a,onFocusAfterReleased:s,onFocusAfterTrapped:o,onFocusInTrap:l,onFocusoutPrevented:u,onReleaseRequested:c}=CTe(r,t),{attributes:d,arrowRef:f,contentRef:h,styles:p,instanceRef:m,role:v,update:g}=kTe(r),{ariaModal:y,arrowStyle:_,contentAttrs:b,contentClass:x,contentStyle:w,updateZIndex:A}=LTe(r,{styles:p,attributes:d,role:v}),T=Yt(Rd,void 0),C=ie();pr(Iee,{arrowStyle:_,arrowRef:f,arrowOffset:C}),T&&pr(Rd,{...T,addInputId:Jr,removeInputId:Jr});let E;const I=(L=!0)=>{g(),L&&A()},P=()=>{I(!1),r.visible&&r.focusOnShow?a.value=!0:r.visible===!1&&(a.value=!1)};return zn(()=>{St(()=>r.triggerTargetEl,(L,N)=>{E==null||E(),E=void 0;const F=S(L||h.value),k=S(N||h.value);Zl(F)&&(E=St([v,()=>r.ariaLabel,y,()=>r.id],H=>{["role","aria-label","aria-modal","id"].forEach((U,B)=>{es(H[B])?F.removeAttribute(U):F.setAttribute(U,H[B])})},{immediate:!0})),k!==F&&Zl(k)&&["role","aria-label","aria-modal","id"].forEach(H=>{k.removeAttribute(H)})},{immediate:!0}),St(()=>r.visible,P,{immediate:!0})}),Wr(()=>{E==null||E(),E=void 0}),e({popperContentRef:h,popperInstanceRef:m,updatePopper:I,contentStyle:w}),(L,N)=>(W(),Se("div",lr({ref_key:"contentRef",ref:h},S(b),{style:S(w),class:S(x),tabindex:"-1",onMouseenter:F=>L.$emit("mouseenter",F),onMouseleave:F=>L.$emit("mouseleave",F)}),[be(S(P_),{trapped:S(a),"trap-on-focus-in":!0,"focus-trap-el":S(h),"focus-start-el":S(i),onFocusAfterTrapped:S(o),onFocusAfterReleased:S(s),onFocusin:S(l),onFocusoutPrevented:S(u),onReleaseRequested:S(c)},{default:Oe(()=>[at(L.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var BTe=$t(NTe,[["__file","content.vue"]]);const Qee=Bn(Y2e),k4=Symbol("elTooltip");function mV(){let n;const e=(r,i)=>{t(),n=window.setTimeout(r,i)},t=()=>window.clearTimeout(n);return vw(()=>t()),{registerTimeout:e,cancelTimeout:t}}const FTe=Vt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),UTe=({showAfter:n,hideAfter:e,autoClose:t,open:r,close:i})=>{const{registerTimeout:a}=mV(),{registerTimeout:s,cancelTimeout:o}=mV();return{onOpen:c=>{a(()=>{r(c);const d=S(t);_n(d)&&d>0&&s(()=>{i(c)},d)},S(n))},onClose:c=>{o(),a(()=>{i(c)},S(e))}}},os=Vt({...FTe,...Yee,appendTo:{type:tt([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:tt(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...ks(["ariaLabel"])}),n2=Vt({...Ree,disabled:Boolean,trigger:{type:tt([String,Array]),default:"hover"},triggerKeys:{type:tt(Array),default:()=>[jt.enter,jt.numpadEnter,jt.space]}}),zTe=Hc({type:tt(Boolean),default:null}),HTe=Hc({type:tt(Function)}),Zee=n=>{const e=`update:${n}`,t=`onUpdate:${n}`,r=[e],i={[n]:zTe,[t]:HTe};return{useModelToggle:({indicator:s,toggleReason:o,shouldHideWhenRouteChanges:l,shouldProceed:u,onShow:c,onHide:d})=>{const f=tr(),{emit:h}=f,p=f.props,m=V(()=>hn(p[t])),v=V(()=>p[n]===null),g=A=>{s.value!==!0&&(s.value=!0,o&&(o.value=A),hn(c)&&c(A))},y=A=>{s.value!==!1&&(s.value=!1,o&&(o.value=A),hn(d)&&d(A))},_=A=>{if(p.disabled===!0||hn(u)&&!u())return;const T=m.value&&Cr;T&&h(e,!0),(v.value||!T)&&g(A)},b=A=>{if(p.disabled===!0||!Cr)return;const T=m.value&&Cr;T&&h(e,!1),(v.value||!T)&&y(A)},x=A=>{mi(A)&&(p.disabled&&A?m.value&&h(e,!1):s.value!==A&&(A?g():y()))},w=()=>{s.value?b():_()};return St(()=>p[n],x),l&&f.appContext.config.globalProperties.$route!==void 0&&St(()=>({...f.proxy.$route}),()=>{l.value&&s.value&&b()}),zn(()=>{x(p[n])}),{hide:b,show:_,toggle:w,hasUpdateHandler:m}},useModelToggleProps:i,useModelToggleEmits:r}};Zee("modelValue");const{useModelToggleProps:VTe,useModelToggleEmits:$Te,useModelToggle:GTe}=Zee("visible"),WTe=Vt({...Dee,...VTe,...os,...n2,...Pee,showArrow:{type:Boolean,default:!0}}),qTe=[...$Te,"before-show","before-hide","show","hide","open","close"],jTe=(n,e)=>Ut(n)?n.includes(e):n===e,ig=(n,e,t)=>r=>{jTe(S(n),e)&&t(r)},ra=(n,e,{checkForDefaultPrevented:t=!0}={})=>i=>{const a=n==null?void 0:n(i);if(t===!1||!a)return e==null?void 0:e(i)},vV=n=>e=>e.pointerType==="mouse"?n(e):void 0,KTe=Ne({name:"ElTooltipTrigger"}),XTe=Ne({...KTe,props:n2,setup(n,{expose:e}){const t=n,r=kt("tooltip"),{controlled:i,id:a,open:s,onOpen:o,onClose:l,onToggle:u}=Yt(k4,void 0),c=ie(null),d=()=>{if(S(i)||t.disabled)return!0},f=Kr(t,"trigger"),h=ra(d,ig(f,"hover",o)),p=ra(d,ig(f,"hover",l)),m=ra(d,ig(f,"click",b=>{b.button===0&&u(b)})),v=ra(d,ig(f,"focus",o)),g=ra(d,ig(f,"focus",l)),y=ra(d,ig(f,"contextmenu",b=>{b.preventDefault(),u(b)})),_=ra(d,b=>{const{code:x}=b;t.triggerKeys.includes(x)&&(b.preventDefault(),u(b))});return e({triggerRef:c}),(b,x)=>(W(),pt(S(owe),{id:S(a),"virtual-ref":b.virtualRef,open:S(s),"virtual-triggering":b.virtualTriggering,class:J(S(r).e("trigger")),onBlur:S(g),onClick:S(m),onContextmenu:S(y),onFocus:S(v),onMouseenter:S(h),onMouseleave:S(p),onKeydown:S(_)},{default:Oe(()=>[at(b.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var YTe=$t(XTe,[["__file","trigger.vue"]]);const QTe=Vt({to:{type:tt([String,Object]),required:!0},disabled:Boolean}),ZTe=Ne({__name:"teleport",props:QTe,setup(n){return(e,t)=>e.disabled?at(e.$slots,"default",{key:0}):(W(),pt(Yme,{key:1,to:e.to},[at(e.$slots,"default")],8,["to"]))}});var JTe=$t(ZTe,[["__file","teleport.vue"]]);const R_=Bn(JTe),Jee=()=>{const n=_N(),e=KN(),t=V(()=>`${n.value}-popper-container-${e.prefix}`),r=V(()=>`#${t.value}`);return{id:t,selector:r}},eCe=n=>{const e=document.createElement("div");return e.id=n,document.body.appendChild(e),e},tCe=()=>{const{id:n,selector:e}=Jee();return f4(()=>{Cr&&(document.body.querySelector(e.value)||eCe(n.value))}),{id:n,selector:e}},nCe=Ne({name:"ElTooltipContent",inheritAttrs:!1}),rCe=Ne({...nCe,props:os,setup(n,{expose:e}){const t=n,{selector:r}=Jee(),i=kt("tooltip"),a=ie();let s;const{controlled:o,id:l,open:u,trigger:c,onClose:d,onOpen:f,onShow:h,onHide:p,onBeforeShow:m,onBeforeHide:v}=Yt(k4,void 0),g=V(()=>t.transition||`${i.namespace.value}-fade-in-linear`),y=V(()=>t.persistent);Wr(()=>{s==null||s()});const _=V(()=>S(y)?!0:S(u)),b=V(()=>t.disabled?!1:S(u)),x=V(()=>t.appendTo||r.value),w=V(()=>{var k;return(k=t.style)!=null?k:{}}),A=ie(!0),T=()=>{p(),A.value=!0},C=()=>{if(S(o))return!0},E=ra(C,()=>{t.enterable&&S(c)==="hover"&&f()}),I=ra(C,()=>{S(c)==="hover"&&d()}),P=()=>{var k,H;(H=(k=a.value)==null?void 0:k.updatePopper)==null||H.call(k),m==null||m()},L=()=>{v==null||v()},N=()=>{h(),s=NN(V(()=>{var k;return(k=a.value)==null?void 0:k.popperContentRef}),()=>{if(S(o))return;S(c)!=="hover"&&d()})},F=()=>{t.virtualTriggering||d()};return St(()=>S(u),k=>{k?A.value=!1:s==null||s()},{flush:"post"}),St(()=>t.content,()=>{var k,H;(H=(k=a.value)==null?void 0:k.updatePopper)==null||H.call(k)}),e({contentRef:a}),(k,H)=>(W(),pt(S(R_),{disabled:!k.teleported,to:S(x)},{default:Oe(()=>[be(Ka,{name:S(g),onAfterLeave:T,onBeforeEnter:P,onAfterEnter:N,onBeforeLeave:L},{default:Oe(()=>[S(_)?Wn((W(),pt(S(BTe),lr({key:0,id:S(l),ref_key:"contentRef",ref:a},k.$attrs,{"aria-label":k.ariaLabel,"aria-hidden":A.value,"boundaries-padding":k.boundariesPadding,"fallback-placements":k.fallbackPlacements,"gpu-acceleration":k.gpuAcceleration,offset:k.offset,placement:k.placement,"popper-options":k.popperOptions,strategy:k.strategy,effect:k.effect,enterable:k.enterable,pure:k.pure,"popper-class":k.popperClass,"popper-style":[k.popperStyle,S(w)],"reference-el":k.referenceEl,"trigger-target-el":k.triggerTargetEl,visible:S(b),"z-index":k.zIndex,onMouseenter:S(E),onMouseleave:S(I),onBlur:F,onClose:S(d)}),{default:Oe(()=>[at(k.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Nr,S(b)]]):st("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var iCe=$t(rCe,[["__file","content.vue"]]);const aCe=Ne({name:"ElTooltip"}),sCe=Ne({...aCe,props:WTe,emits:qTe,setup(n,{expose:e,emit:t}){const r=n;tCe();const i=Ds(),a=ie(),s=ie(),o=()=>{var g;const y=S(a);y&&((g=y.popperInstanceRef)==null||g.update())},l=ie(!1),u=ie(),{show:c,hide:d,hasUpdateHandler:f}=GTe({indicator:l,toggleReason:u}),{onOpen:h,onClose:p}=UTe({showAfter:Kr(r,"showAfter"),hideAfter:Kr(r,"hideAfter"),autoClose:Kr(r,"autoClose"),open:c,close:d}),m=V(()=>mi(r.visible)&&!f.value);pr(k4,{controlled:m,id:i,open:Cv(l),trigger:Kr(r,"trigger"),onOpen:g=>{h(g)},onClose:g=>{p(g)},onToggle:g=>{S(l)?p(g):h(g)},onShow:()=>{t("show",u.value)},onHide:()=>{t("hide",u.value)},onBeforeShow:()=>{t("before-show",u.value)},onBeforeHide:()=>{t("before-hide",u.value)},updatePopper:o}),St(()=>r.disabled,g=>{g&&l.value&&(l.value=!1)});const v=g=>{var y,_;const b=(_=(y=s.value)==null?void 0:y.contentRef)==null?void 0:_.popperContentRef,x=(g==null?void 0:g.relatedTarget)||document.activeElement;return b&&b.contains(x)};return FZ(()=>l.value&&d()),e({popperRef:a,contentRef:s,isFocusInsideContent:v,updatePopper:o,onOpen:h,onClose:p,hide:d}),(g,y)=>(W(),pt(S(Qee),{ref_key:"popperRef",ref:a,role:g.role},{default:Oe(()=>[be(YTe,{disabled:g.disabled,trigger:g.trigger,"trigger-keys":g.triggerKeys,"virtual-ref":g.virtualRef,"virtual-triggering":g.virtualTriggering},{default:Oe(()=>[g.$slots.default?at(g.$slots,"default",{key:0}):st("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),be(iCe,{ref_key:"contentRef",ref:s,"aria-label":g.ariaLabel,"boundaries-padding":g.boundariesPadding,content:g.content,disabled:g.disabled,effect:g.effect,enterable:g.enterable,"fallback-placements":g.fallbackPlacements,"hide-after":g.hideAfter,"gpu-acceleration":g.gpuAcceleration,offset:g.offset,persistent:g.persistent,"popper-class":g.popperClass,"popper-style":g.popperStyle,placement:g.placement,"popper-options":g.popperOptions,pure:g.pure,"raw-content":g.rawContent,"reference-el":g.referenceEl,"trigger-target-el":g.triggerTargetEl,"show-after":g.showAfter,strategy:g.strategy,teleported:g.teleported,transition:g.transition,"virtual-triggering":g.virtualTriggering,"z-index":g.zIndex,"append-to":g.appendTo},{default:Oe(()=>[at(g.$slots,"content",{},()=>[g.rawContent?(W(),Se("span",{key:0,innerHTML:g.content},null,8,["innerHTML"])):(W(),Se("span",{key:1},Ft(g.content),1))]),g.showArrow?(W(),pt(S(J2e),{key:0,"arrow-offset":g.arrowOffset},null,8,["arrow-offset"])):st("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var oCe=$t(sCe,[["__file","tooltip.vue"]]);const Ys=Bn(oCe),lCe=Vt({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:tt(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:tt([Function,Array]),default:Jr},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:os.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...ks(["ariaLabel"])}),uCe={[jn]:n=>ln(n),[Ks]:n=>ln(n),[si]:n=>ln(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,select:n=>er(n)},ete="ElAutocomplete",cCe=Ne({name:ete,inheritAttrs:!1}),dCe=Ne({...cCe,props:lCe,emits:uCe,setup(n,{expose:e,emit:t}){const r=n,i=yw(),a=om(),s=Js(),o=kt("autocomplete"),l=ie(),u=ie(),c=ie(),d=ie();let f=!1,h=!1;const p=ie([]),m=ie(-1),v=ie(""),g=ie(!1),y=ie(!1),_=ie(!1),b=Ds(),x=V(()=>a.style),w=V(()=>(p.value.length>0||_.value)&&g.value),A=V(()=>!r.hideLoading&&_.value),T=V(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),C=()=>{w.value&&(v.value=`${l.value.$el.offsetWidth}px`)},E=()=>{m.value=-1},I=async me=>{if(y.value)return;const ke=Be=>{_.value=!1,!y.value&&(Ut(Be)?(p.value=Be,m.value=r.highlightFirstItem?0:-1):Xa(ete,"autocomplete suggestions must be an array"))};if(_.value=!0,Ut(r.fetchSuggestions))ke(r.fetchSuggestions);else{const Be=await r.fetchSuggestions(me,ke);Ut(Be)&&ke(Be)}},P=Cl(I,r.debounce),L=me=>{const ke=!!me;if(t(Ks,me),t(jn,me),y.value=!1,g.value||(g.value=ke),!r.triggerOnFocus&&!me){y.value=!0,p.value=[];return}P(me)},N=me=>{var ke;s.value||(((ke=me.target)==null?void 0:ke.tagName)!=="INPUT"||T.value.includes(document.activeElement))&&(g.value=!0)},F=me=>{t(si,me)},k=me=>{h?h=!1:(g.value=!0,t("focus",me),r.triggerOnFocus&&!f&&P(String(r.modelValue)))},H=me=>{setTimeout(()=>{var ke;if((ke=c.value)!=null&&ke.isFocusInsideContent()){h=!0;return}g.value&&ee(),t("blur",me)})},U=()=>{g.value=!1,t(jn,""),t("clear")},B=async()=>{w.value&&m.value>=0&&m.value<p.value.length?ae(p.value[m.value]):r.selectWhenUnmatched&&(t("select",{value:r.modelValue}),p.value=[],m.value=-1)},$=me=>{w.value&&(me.preventDefault(),me.stopPropagation(),ee())},ee=()=>{g.value=!1},re=()=>{var me;(me=l.value)==null||me.focus()},ne=()=>{var me;(me=l.value)==null||me.blur()},ae=async me=>{t(Ks,me[r.valueKey]),t(jn,me[r.valueKey]),t("select",me),p.value=[],m.value=-1},pe=me=>{if(!w.value||_.value)return;if(me<0){m.value=-1;return}me>=p.value.length&&(me=p.value.length-1);const ke=u.value.querySelector(`.${o.be("suggestion","wrap")}`),Xe=ke.querySelectorAll(`.${o.be("suggestion","list")} li`)[me],Ye=ke.scrollTop,{offsetTop:Y,scrollHeight:he}=Xe;Y+he>Ye+ke.clientHeight&&(ke.scrollTop+=he),Y<Ye&&(ke.scrollTop-=he),m.value=me,l.value.ref.setAttribute("aria-activedescendant",`${b.value}-item-${m.value}`)},de=NN(d,()=>{w.value&&ee()});return Wr(()=>{de==null||de()}),zn(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${b.value}-item-${m.value}`),f=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:m,activated:g,loading:_,inputRef:l,popperRef:c,suggestions:p,handleSelect:ae,handleKeyEnter:B,focus:re,blur:ne,close:ee,highlight:pe,getData:I}),(me,ke)=>(W(),pt(S(Ys),{ref_key:"popperRef",ref:c,visible:S(w),placement:me.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[S(o).e("popper"),me.popperClass],teleported:me.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${S(o).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:C,onHide:E},{content:Oe(()=>[Ce("div",{ref_key:"regionRef",ref:u,class:J([S(o).b("suggestion"),S(o).is("loading",S(A))]),style:Jt({[me.fitInputWidth?"width":"minWidth"]:v.value,outline:"none"}),role:"region"},[be(S(Vd),{id:S(b),tag:"ul","wrap-class":S(o).be("suggestion","wrap"),"view-class":S(o).be("suggestion","list"),role:"listbox"},{default:Oe(()=>[S(A)?(W(),Se("li",{key:0},[at(me.$slots,"loading",{},()=>[be(S(tn),{class:J(S(o).is("loading"))},{default:Oe(()=>[be(S(Pd))]),_:1},8,["class"])])])):(W(!0),Se(on,{key:1},ur(p.value,(Be,Xe)=>(W(),Se("li",{id:`${S(b)}-item-${Xe}`,key:Xe,class:J({highlighted:m.value===Xe}),role:"option","aria-selected":m.value===Xe,onClick:Ye=>ae(Be)},[at(me.$slots,"default",{item:Be},()=>[Xn(Ft(Be[me.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:Oe(()=>[Ce("div",{ref_key:"listboxRef",ref:d,class:J([S(o).b(),me.$attrs.class]),style:Jt(S(x)),role:"combobox","aria-haspopup":"listbox","aria-expanded":S(w),"aria-owns":S(b)},[be(S(_o),lr({ref_key:"inputRef",ref:l},S(i),{clearable:me.clearable,disabled:S(s),name:me.name,"model-value":me.modelValue,"aria-label":me.ariaLabel,onInput:L,onChange:F,onFocus:k,onBlur:H,onClear:U,onKeydown:[hi(Tn(Be=>pe(m.value-1),["prevent"]),["up"]),hi(Tn(Be=>pe(m.value+1),["prevent"]),["down"]),hi(B,["enter"]),hi(ee,["tab"]),hi($,["esc"])],onMousedown:N}),Wu({_:2},[me.$slots.prepend?{name:"prepend",fn:Oe(()=>[at(me.$slots,"prepend")])}:void 0,me.$slots.append?{name:"append",fn:Oe(()=>[at(me.$slots,"append")])}:void 0,me.$slots.prefix?{name:"prefix",fn:Oe(()=>[at(me.$slots,"prefix")])}:void 0,me.$slots.suffix?{name:"suffix",fn:Oe(()=>[at(me.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var fCe=$t(dCe,[["__file","autocomplete.vue"]]);const hCe=Bn(fCe),pCe=Vt({size:{type:[Number,String],values:Hd,default:"",validator:n=>_n(n)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:li},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:tt(String),default:"cover"}}),mCe={error:n=>n instanceof Event},vCe=Ne({name:"ElAvatar"}),gCe=Ne({...vCe,props:pCe,emits:mCe,setup(n,{emit:e}){const t=n,r=kt("avatar"),i=ie(!1),a=V(()=>{const{size:u,icon:c,shape:d}=t,f=[r.b()];return ln(u)&&f.push(r.m(u)),c&&f.push(r.m("icon")),d&&f.push(r.m(d)),f}),s=V(()=>{const{size:u}=t;return _n(u)?r.cssVarBlock({size:ia(u)||""}):void 0}),o=V(()=>({objectFit:t.fit}));St(()=>t.src,()=>i.value=!1);function l(u){i.value=!0,e("error",u)}return(u,c)=>(W(),Se("span",{class:J(S(a)),style:Jt(S(s))},[(u.src||u.srcSet)&&!i.value?(W(),Se("img",{key:0,src:u.src,alt:u.alt,srcset:u.srcSet,style:Jt(S(o)),onError:l},null,44,["src","alt","srcset"])):u.icon?(W(),pt(S(tn),{key:1},{default:Oe(()=>[(W(),pt(ir(u.icon)))]),_:1})):at(u.$slots,"default",{key:2})],6))}});var yCe=$t(gCe,[["__file","avatar.vue"]]);const _Ce=Bn(yCe),bCe={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},SCe={click:n=>n instanceof MouseEvent},xCe=(n,e,t)=>{const r=jr(),i=jr(),a=ie(!1),s=()=>{r.value&&(a.value=r.value.scrollTop>=n.visibilityHeight)},o=u=>{var c;(c=r.value)==null||c.scrollTo({top:0,behavior:"smooth"}),e("click",u)},l=aee(s,300,!0);return ni(i,"scroll",l),zn(()=>{var u;i.value=document,r.value=document.documentElement,n.target&&(r.value=(u=document.querySelector(n.target))!=null?u:void 0,r.value||Xa(t,`target does not exist: ${n.target}`),i.value=r.value),s()}),{visible:a,handleClick:o}},tte="ElBacktop",wCe=Ne({name:tte}),TCe=Ne({...wCe,props:bCe,emits:SCe,setup(n,{emit:e}){const t=n,r=kt("backtop"),{handleClick:i,visible:a}=xCe(t,e,tte),s=V(()=>({right:`${t.right}px`,bottom:`${t.bottom}px`}));return(o,l)=>(W(),pt(Ka,{name:`${S(r).namespace.value}-fade-in`},{default:Oe(()=>[S(a)?(W(),Se("div",{key:0,style:Jt(S(s)),class:J(S(r).b()),onClick:Tn(S(i),["stop"])},[at(o.$slots,"default",{},()=>[be(S(tn),{class:J(S(r).e("icon"))},{default:Oe(()=>[be(S(pxe))]),_:1},8,["class"])])],14,["onClick"])):st("v-if",!0)]),_:3},8,["name"]))}});var CCe=$t(TCe,[["__file","backtop.vue"]]);const ACe=Bn(CCe),ECe=Vt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:tt([String,Object,Array])},offset:{type:tt(Array),default:[0,0]},badgeClass:{type:String}}),MCe=Ne({name:"ElBadge"}),ICe=Ne({...MCe,props:ECe,setup(n,{expose:e}){const t=n,r=kt("badge"),i=V(()=>t.isDot?"":_n(t.value)&&_n(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`),a=V(()=>{var s,o,l,u,c;return[{backgroundColor:t.color,marginRight:ia(-((o=(s=t.offset)==null?void 0:s[0])!=null?o:0)),marginTop:ia((u=(l=t.offset)==null?void 0:l[1])!=null?u:0)},(c=t.badgeStyle)!=null?c:{}]});return e({content:i}),(s,o)=>(W(),Se("div",{class:J(S(r).b())},[at(s.$slots,"default"),be(Ka,{name:`${S(r).namespace.value}-zoom-in-center`,persisted:""},{default:Oe(()=>[Wn(Ce("sup",{class:J([S(r).e("content"),S(r).em("content",s.type),S(r).is("fixed",!!s.$slots.default),S(r).is("dot",s.isDot),S(r).is("hide-zero",!s.showZero&&t.value===0),s.badgeClass]),style:Jt(S(a))},[at(s.$slots,"content",{value:S(i)},()=>[Xn(Ft(S(i)),1)])],6),[[Nr,!s.hidden&&(S(i)||s.isDot||s.$slots.content)]])]),_:3},8,["name"])],2))}});var DCe=$t(ICe,[["__file","badge.vue"]]);const nte=Bn(DCe),rte=Symbol("breadcrumbKey"),PCe=Vt({separator:{type:String,default:"/"},separatorIcon:{type:li}}),RCe=Ne({name:"ElBreadcrumb"}),kCe=Ne({...RCe,props:PCe,setup(n){const e=n,{t}=Ar(),r=kt("breadcrumb"),i=ie();return pr(rte,e),zn(()=>{const a=i.value.querySelectorAll(`.${r.e("item")}`);a.length&&a[a.length-1].setAttribute("aria-current","page")}),(a,s)=>(W(),Se("div",{ref_key:"breadcrumb",ref:i,class:J(S(r).b()),"aria-label":S(t)("el.breadcrumb.label"),role:"navigation"},[at(a.$slots,"default")],10,["aria-label"]))}});var LCe=$t(kCe,[["__file","breadcrumb.vue"]]);const OCe=Vt({to:{type:tt([String,Object]),default:""},replace:Boolean}),NCe=Ne({name:"ElBreadcrumbItem"}),BCe=Ne({...NCe,props:OCe,setup(n){const e=n,t=tr(),r=Yt(rte,void 0),i=kt("breadcrumb"),a=t.appContext.config.globalProperties.$router,s=ie(),o=()=>{!e.to||!a||(e.replace?a.replace(e.to):a.push(e.to))};return(l,u)=>{var c,d;return W(),Se("span",{class:J(S(i).e("item"))},[Ce("span",{ref_key:"link",ref:s,class:J([S(i).e("inner"),S(i).is("link",!!l.to)]),role:"link",onClick:o},[at(l.$slots,"default")],2),(c=S(r))!=null&&c.separatorIcon?(W(),pt(S(tn),{key:0,class:J(S(i).e("separator"))},{default:Oe(()=>[(W(),pt(ir(S(r).separatorIcon)))]),_:1},8,["class"])):(W(),Se("span",{key:1,class:J(S(i).e("separator")),role:"presentation"},Ft((d=S(r))==null?void 0:d.separator),3))],2)}}});var ite=$t(BCe,[["__file","breadcrumb-item.vue"]]);const FCe=Bn(LCe,{BreadcrumbItem:ite}),UCe=Xi(ite),ate=Symbol("buttonGroupContextKey"),Sp=({from:n,replacement:e,scope:t,version:r,ref:i,type:a="API"},s)=>{St(()=>S(s),o=>{},{immediate:!0})},zCe=(n,e)=>{Sp({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},V(()=>n.type==="text"));const t=Yt(ate,void 0),r=A4("button"),{form:i}=Zs(),a=Ca(V(()=>t==null?void 0:t.size)),s=Js(),o=ie(),l=Oa(),u=V(()=>n.type||(t==null?void 0:t.type)||""),c=V(()=>{var p,m,v;return(v=(m=n.autoInsertSpace)!=null?m:(p=r.value)==null?void 0:p.autoInsertSpace)!=null?v:!1}),d=V(()=>n.tag==="button"?{ariaDisabled:s.value||n.loading,disabled:s.value||n.loading,autofocus:n.autofocus,type:n.nativeType}:{}),f=V(()=>{var p;const m=(p=l.default)==null?void 0:p.call(l);if(c.value&&(m==null?void 0:m.length)===1){const v=m[0];if((v==null?void 0:v.type)===T_){const g=v.children;return/^\p{Unified_Ideograph}{2}$/u.test(g.trim())}}return!1});return{_disabled:s,_size:a,_type:u,_ref:o,_props:d,shouldAddSpace:f,handleClick:p=>{if(s.value||n.loading){p.stopPropagation();return}n.nativeType==="reset"&&(i==null||i.resetFields()),e("click",p)}}},KL=["default","primary","success","warning","info","danger","text",""],HCe=["button","submit","reset"],XL=Vt({size:La,disabled:Boolean,type:{type:String,values:KL,default:""},icon:{type:li},nativeType:{type:String,values:HCe,default:"button"},loading:Boolean,loadingIcon:{type:li,default:()=>Pd},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:tt([String,Object]),default:"button"}}),VCe={click:n=>n instanceof MouseEvent};function Xs(n,e){$Ce(n)&&(n="100%");var t=GCe(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function AT(n){return Math.min(1,Math.max(0,n))}function $Ce(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function GCe(n){return typeof n=="string"&&n.indexOf("%")!==-1}function ste(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function ET(n){return n<=1?"".concat(Number(n)*100,"%"):n}function T0(n){return n.length===1?"0"+n:String(n)}function WCe(n,e,t){return{r:Xs(n,255)*255,g:Xs(e,255)*255,b:Xs(t,255)*255}}function gV(n,e,t){n=Xs(n,255),e=Xs(e,255),t=Xs(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),a=0,s=0,o=(r+i)/2;if(r===i)s=0,a=0;else{var l=r-i;switch(s=o>.5?l/(2-r-i):l/(r+i),r){case n:a=(e-t)/l+(e<t?6:0);break;case e:a=(t-n)/l+2;break;case t:a=(n-e)/l+4;break}a/=6}return{h:a,s,l:o}}function kD(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function qCe(n,e,t){var r,i,a;if(n=Xs(n,360),e=Xs(e,100),t=Xs(t,100),e===0)i=t,a=t,r=t;else{var s=t<.5?t*(1+e):t+e-t*e,o=2*t-s;r=kD(o,s,n+1/3),i=kD(o,s,n),a=kD(o,s,n-1/3)}return{r:r*255,g:i*255,b:a*255}}function yV(n,e,t){n=Xs(n,255),e=Xs(e,255),t=Xs(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),a=0,s=r,o=r-i,l=r===0?0:o/r;if(r===i)a=0;else{switch(r){case n:a=(e-t)/o+(e<t?6:0);break;case e:a=(t-n)/o+2;break;case t:a=(n-e)/o+4;break}a/=6}return{h:a,s:l,v:s}}function jCe(n,e,t){n=Xs(n,360)*6,e=Xs(e,100),t=Xs(t,100);var r=Math.floor(n),i=n-r,a=t*(1-e),s=t*(1-i*e),o=t*(1-(1-i)*e),l=r%6,u=[t,s,a,a,o,t][l],c=[o,t,t,s,a,a][l],d=[a,a,o,t,t,s][l];return{r:u*255,g:c*255,b:d*255}}function _V(n,e,t,r){var i=[T0(Math.round(n).toString(16)),T0(Math.round(e).toString(16)),T0(Math.round(t).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function KCe(n,e,t,r,i){var a=[T0(Math.round(n).toString(16)),T0(Math.round(e).toString(16)),T0(Math.round(t).toString(16)),T0(XCe(r))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function XCe(n){return Math.round(parseFloat(n)*255).toString(16)}function bV(n){return Vl(n)/255}function Vl(n){return parseInt(n,16)}function YCe(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var YL={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function QCe(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,a=null,s=!1,o=!1;return typeof n=="string"&&(n=eAe(n)),typeof n=="object"&&(Qd(n.r)&&Qd(n.g)&&Qd(n.b)?(e=WCe(n.r,n.g,n.b),s=!0,o=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Qd(n.h)&&Qd(n.s)&&Qd(n.v)?(r=ET(n.s),i=ET(n.v),e=jCe(n.h,r,i),s=!0,o="hsv"):Qd(n.h)&&Qd(n.s)&&Qd(n.l)&&(r=ET(n.s),a=ET(n.l),e=qCe(n.h,r,a),s=!0,o="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=ste(t),{ok:s,format:n.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var ZCe="[-\\+]?\\d+%?",JCe="[-\\+]?\\d*\\.\\d+%?",dp="(?:".concat(JCe,")|(?:").concat(ZCe,")"),LD="[\\s|\\(]+(".concat(dp,")[,|\\s]+(").concat(dp,")[,|\\s]+(").concat(dp,")\\s*\\)?"),OD="[\\s|\\(]+(".concat(dp,")[,|\\s]+(").concat(dp,")[,|\\s]+(").concat(dp,")[,|\\s]+(").concat(dp,")\\s*\\)?"),yc={CSS_UNIT:new RegExp(dp),rgb:new RegExp("rgb"+LD),rgba:new RegExp("rgba"+OD),hsl:new RegExp("hsl"+LD),hsla:new RegExp("hsla"+OD),hsv:new RegExp("hsv"+LD),hsva:new RegExp("hsva"+OD),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function eAe(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(YL[n])n=YL[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=yc.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=yc.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=yc.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=yc.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=yc.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=yc.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=yc.hex8.exec(n),t?{r:Vl(t[1]),g:Vl(t[2]),b:Vl(t[3]),a:bV(t[4]),format:e?"name":"hex8"}:(t=yc.hex6.exec(n),t?{r:Vl(t[1]),g:Vl(t[2]),b:Vl(t[3]),format:e?"name":"hex"}:(t=yc.hex4.exec(n),t?{r:Vl(t[1]+t[1]),g:Vl(t[2]+t[2]),b:Vl(t[3]+t[3]),a:bV(t[4]+t[4]),format:e?"name":"hex8"}:(t=yc.hex3.exec(n),t?{r:Vl(t[1]+t[1]),g:Vl(t[2]+t[2]),b:Vl(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function Qd(n){return!!yc.CSS_UNIT.exec(String(n))}var ote=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var r;if(e instanceof n)return e;typeof e=="number"&&(e=YCe(e)),this.originalInput=e;var i=QCe(e);this.originalInput=e,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=t.format)!==null&&r!==void 0?r:i.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,r,i,a=e.r/255,s=e.g/255,o=e.b/255;return a<=.03928?t=a/12.92:t=Math.pow((a+.055)/1.055,2.4),s<=.03928?r=s/12.92:r=Math.pow((s+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),.2126*t+.7152*r+.0722*i},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=ste(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=yV(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=yV(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(r,"%, ").concat(i,"%)"):"hsva(".concat(t,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=gV(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=gV(this.r,this.g,this.b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(r,"%, ").concat(i,"%)"):"hsla(".concat(t,", ").concat(r,"%, ").concat(i,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),_V(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),KCe(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(r,")"):"rgba(".concat(e,", ").concat(t,", ").concat(r,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(Xs(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(Xs(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+_V(this.r,this.g,this.b,!1),t=0,r=Object.entries(YL);t<r.length;t++){var i=r[t],a=i[0],s=i[1];if(e===s)return a}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var r=!1,i=this.a<1&&this.a>=0,a=!t&&i&&(e.startsWith("hex")||e==="name");return a?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=AT(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=AT(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=AT(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=AT(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var r=this.toRgb(),i=new n(e).toRgb(),a=t/100,s={r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a};return new n(s)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var r=this.toHsl(),i=360/t,a=[this];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,a.push(new n(r));return a},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),r=t.h,i=t.s,a=t.v,s=[],o=1/e;e--;)s.push(new n({h:r,s:i,v:a})),a=(a+o)%1;return s},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),r=new n(e).toRgb(),i=t.a+r.a*(1-t.a);return new n({r:(t.r*t.a+r.r*r.a*(1-t.a))/i,g:(t.g*t.a+r.g*r.a*(1-t.a))/i,b:(t.b*t.a+r.b*r.a*(1-t.a))/i,a:i})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),r=t.h,i=[this],a=360/e,s=1;s<e;s++)i.push(new n({h:(r+s*a)%360,s:t.s,l:t.l}));return i},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function Mh(n,e=20){return n.mix("#141414",e).toString()}function tAe(n){const e=Js(),t=kt("button");return V(()=>{let r={},i=n.color;if(i){const a=i.match(/var\((.*?)\)/);a&&(i=window.getComputedStyle(window.document.documentElement).getPropertyValue(a[1]));const s=new ote(i),o=n.dark?s.tint(20).toString():Mh(s,20);if(n.plain)r=t.cssVarBlock({"bg-color":n.dark?Mh(s,90):s.tint(90).toString(),"text-color":i,"border-color":n.dark?Mh(s,50):s.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":i,"hover-border-color":i,"active-bg-color":o,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(r[t.cssVarBlockName("disabled-bg-color")]=n.dark?Mh(s,90):s.tint(90).toString(),r[t.cssVarBlockName("disabled-text-color")]=n.dark?Mh(s,50):s.tint(50).toString(),r[t.cssVarBlockName("disabled-border-color")]=n.dark?Mh(s,80):s.tint(80).toString());else{const l=n.dark?Mh(s,30):s.tint(30).toString(),u=s.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(r=t.cssVarBlock({"bg-color":i,"text-color":u,"border-color":i,"hover-bg-color":l,"hover-text-color":u,"hover-border-color":l,"active-bg-color":o,"active-border-color":o}),e.value){const c=n.dark?Mh(s,50):s.tint(50).toString();r[t.cssVarBlockName("disabled-bg-color")]=c,r[t.cssVarBlockName("disabled-text-color")]=n.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,r[t.cssVarBlockName("disabled-border-color")]=c}}}return r})}const nAe=Ne({name:"ElButton"}),rAe=Ne({...nAe,props:XL,emits:VCe,setup(n,{expose:e,emit:t}){const r=n,i=tAe(r),a=kt("button"),{_ref:s,_size:o,_type:l,_disabled:u,_props:c,shouldAddSpace:d,handleClick:f}=zCe(r,t),h=V(()=>[a.b(),a.m(l.value),a.m(o.value),a.is("disabled",u.value),a.is("loading",r.loading),a.is("plain",r.plain),a.is("round",r.round),a.is("circle",r.circle),a.is("text",r.text),a.is("link",r.link),a.is("has-bg",r.bg)]);return e({ref:s,size:o,type:l,disabled:u,shouldAddSpace:d}),(p,m)=>(W(),pt(ir(p.tag),lr({ref_key:"_ref",ref:s},S(c),{class:S(h),style:S(i),onClick:S(f)}),{default:Oe(()=>[p.loading?(W(),Se(on,{key:0},[p.$slots.loading?at(p.$slots,"loading",{key:0}):(W(),pt(S(tn),{key:1,class:J(S(a).is("loading"))},{default:Oe(()=>[(W(),pt(ir(p.loadingIcon)))]),_:1},8,["class"]))],64)):p.icon||p.$slots.icon?(W(),pt(S(tn),{key:1},{default:Oe(()=>[p.icon?(W(),pt(ir(p.icon),{key:0})):at(p.$slots,"icon",{key:1})]),_:3})):st("v-if",!0),p.$slots.default?(W(),Se("span",{key:2,class:J({[S(a).em("text","expand")]:S(d)})},[at(p.$slots,"default")],2)):st("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var iAe=$t(rAe,[["__file","button.vue"]]);const aAe={size:XL.size,type:XL.type},sAe=Ne({name:"ElButtonGroup"}),oAe=Ne({...sAe,props:aAe,setup(n){const e=n;pr(ate,$r({size:Kr(e,"size"),type:Kr(e,"type")}));const t=kt("button");return(r,i)=>(W(),Se("div",{class:J(S(t).b("group"))},[at(r.$slots,"default")],2))}});var lte=$t(oAe,[["__file","button-group.vue"]]);const gs=Bn(iAe,{ButtonGroup:lte}),ute=Xi(lte);var Al=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ls(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function cte(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var dte={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Al,function(){var t=1e3,r=6e4,i=36e5,a="millisecond",s="second",o="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var F=["th","st","nd","rd"],k=N%100;return"["+N+(F[(k-20)%10]||F[k]||F[0])+"]"}},_=function(N,F,k){var H=String(N);return!H||H.length>=F?N:""+Array(F+1-H.length).join(k)+N},b={s:_,z:function(N){var F=-N.utcOffset(),k=Math.abs(F),H=Math.floor(k/60),U=k%60;return(F<=0?"+":"-")+_(H,2,"0")+":"+_(U,2,"0")},m:function N(F,k){if(F.date()<k.date())return-N(k,F);var H=12*(k.year()-F.year())+(k.month()-F.month()),U=F.clone().add(H,d),B=k-U<0,$=F.clone().add(H+(B?-1:1),d);return+(-(H+(k-U)/(B?U-$:$-U))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:d,y:h,w:c,d:u,D:p,h:l,m:o,s,ms:a,Q:f}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},x="en",w={};w[x]=y;var A="$isDayjsObject",T=function(N){return N instanceof P||!(!N||!N[A])},C=function N(F,k,H){var U;if(!F)return x;if(typeof F=="string"){var B=F.toLowerCase();w[B]&&(U=B),k&&(w[B]=k,U=B);var $=F.split("-");if(!U&&$.length>1)return N($[0])}else{var ee=F.name;w[ee]=F,U=ee}return!H&&U&&(x=U),U||!H&&x},E=function(N,F){if(T(N))return N.clone();var k=typeof F=="object"?F:{};return k.date=N,k.args=arguments,new P(k)},I=b;I.l=C,I.i=T,I.w=function(N,F){return E(N,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var P=function(){function N(k){this.$L=C(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[A]=!0}var F=N.prototype;return F.parse=function(k){this.$d=function(H){var U=H.date,B=H.utc;if(U===null)return new Date(NaN);if(I.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var $=U.match(v);if($){var ee=$[2]-1||0,re=($[7]||"0").substring(0,3);return B?new Date(Date.UTC($[1],ee,$[3]||1,$[4]||0,$[5]||0,$[6]||0,re)):new Date($[1],ee,$[3]||1,$[4]||0,$[5]||0,$[6]||0,re)}}return new Date(U)}(k),this.init()},F.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},F.$utils=function(){return I},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(k,H){var U=E(k);return this.startOf(H)<=U&&U<=this.endOf(H)},F.isAfter=function(k,H){return E(k)<this.startOf(H)},F.isBefore=function(k,H){return this.endOf(H)<E(k)},F.$g=function(k,H,U){return I.u(k)?this[H]:this.set(U,k)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(k,H){var U=this,B=!!I.u(H)||H,$=I.p(k),ee=function(Be,Xe){var Ye=I.w(U.$u?Date.UTC(U.$y,Xe,Be):new Date(U.$y,Xe,Be),U);return B?Ye:Ye.endOf(u)},re=function(Be,Xe){return I.w(U.toDate()[Be].apply(U.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(Xe)),U)},ne=this.$W,ae=this.$M,pe=this.$D,de="set"+(this.$u?"UTC":"");switch($){case h:return B?ee(1,0):ee(31,11);case d:return B?ee(1,ae):ee(0,ae+1);case c:var me=this.$locale().weekStart||0,ke=(ne<me?ne+7:ne)-me;return ee(B?pe-ke:pe+(6-ke),ae);case u:case p:return re(de+"Hours",0);case l:return re(de+"Minutes",1);case o:return re(de+"Seconds",2);case s:return re(de+"Milliseconds",3);default:return this.clone()}},F.endOf=function(k){return this.startOf(k,!1)},F.$set=function(k,H){var U,B=I.p(k),$="set"+(this.$u?"UTC":""),ee=(U={},U[u]=$+"Date",U[p]=$+"Date",U[d]=$+"Month",U[h]=$+"FullYear",U[l]=$+"Hours",U[o]=$+"Minutes",U[s]=$+"Seconds",U[a]=$+"Milliseconds",U)[B],re=B===u?this.$D+(H-this.$W):H;if(B===d||B===h){var ne=this.clone().set(p,1);ne.$d[ee](re),ne.init(),this.$d=ne.set(p,Math.min(this.$D,ne.daysInMonth())).$d}else ee&&this.$d[ee](re);return this.init(),this},F.set=function(k,H){return this.clone().$set(k,H)},F.get=function(k){return this[I.p(k)]()},F.add=function(k,H){var U,B=this;k=Number(k);var $=I.p(H),ee=function(ae){var pe=E(B);return I.w(pe.date(pe.date()+Math.round(ae*k)),B)};if($===d)return this.set(d,this.$M+k);if($===h)return this.set(h,this.$y+k);if($===u)return ee(1);if($===c)return ee(7);var re=(U={},U[o]=r,U[l]=i,U[s]=t,U)[$]||1,ne=this.$d.getTime()+k*re;return I.w(ne,this)},F.subtract=function(k,H){return this.add(-1*k,H)},F.format=function(k){var H=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var B=k||"YYYY-MM-DDTHH:mm:ssZ",$=I.z(this),ee=this.$H,re=this.$m,ne=this.$M,ae=U.weekdays,pe=U.months,de=U.meridiem,me=function(Xe,Ye,Y,he){return Xe&&(Xe[Ye]||Xe(H,B))||Y[Ye].slice(0,he)},ke=function(Xe){return I.s(ee%12||12,Xe,"0")},Be=de||function(Xe,Ye,Y){var he=Xe<12?"AM":"PM";return Y?he.toLowerCase():he};return B.replace(g,function(Xe,Ye){return Ye||function(Y){switch(Y){case"YY":return String(H.$y).slice(-2);case"YYYY":return I.s(H.$y,4,"0");case"M":return ne+1;case"MM":return I.s(ne+1,2,"0");case"MMM":return me(U.monthsShort,ne,pe,3);case"MMMM":return me(pe,ne);case"D":return H.$D;case"DD":return I.s(H.$D,2,"0");case"d":return String(H.$W);case"dd":return me(U.weekdaysMin,H.$W,ae,2);case"ddd":return me(U.weekdaysShort,H.$W,ae,3);case"dddd":return ae[H.$W];case"H":return String(ee);case"HH":return I.s(ee,2,"0");case"h":return ke(1);case"hh":return ke(2);case"a":return Be(ee,re,!0);case"A":return Be(ee,re,!1);case"m":return String(re);case"mm":return I.s(re,2,"0");case"s":return String(H.$s);case"ss":return I.s(H.$s,2,"0");case"SSS":return I.s(H.$ms,3,"0");case"Z":return $}return null}(Xe)||$.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(k,H,U){var B,$=this,ee=I.p(H),re=E(k),ne=(re.utcOffset()-this.utcOffset())*r,ae=this-re,pe=function(){return I.m($,re)};switch(ee){case h:B=pe()/12;break;case d:B=pe();break;case f:B=pe()/3;break;case c:B=(ae-ne)/6048e5;break;case u:B=(ae-ne)/864e5;break;case l:B=ae/i;break;case o:B=ae/r;break;case s:B=ae/t;break;default:B=ae}return U?B:I.a(B)},F.daysInMonth=function(){return this.endOf(d).$D},F.$locale=function(){return w[this.$L]},F.locale=function(k,H){if(!k)return this.$L;var U=this.clone(),B=C(k,H,!0);return B&&(U.$L=B),U},F.clone=function(){return I.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},N}(),L=P.prototype;return E.prototype=L,[["$ms",a],["$s",s],["$m",o],["$H",l],["$W",u],["$M",d],["$y",h],["$D",p]].forEach(function(N){L[N[1]]=function(F){return this.$g(F,N[0],N[1])}}),E.extend=function(N,F){return N.$i||(N(F,P,E),N.$i=!0),E},E.locale=C,E.isDayjs=T,E.unix=function(N){return E(1e3*N)},E.en=w[x],E.Ls=w,E.p={},E})})(dte);var lAe=dte.exports;const Rn=Ls(lAe),ND=(n,e)=>[n>0?n-1:void 0,n,n<e?n+1:void 0],xp=n=>Array.from(Array.from({length:n}).keys()),fte=n=>n.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),hte=n=>n.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),SV=function(n,e){const t=kp(n),r=kp(e);return t&&r?n.getTime()===e.getTime():!t&&!r?n===e:!1},xV=function(n,e){const t=Ut(n),r=Ut(e);return t&&r?n.length!==e.length?!1:n.every((i,a)=>SV(i,e[a])):!t&&!r?SV(n,e):!1},wV=function(n,e,t){const r=ql(e)||e==="x"?Rn(n).locale(t):Rn(n,e).locale(t);return r.isValid()?r:void 0},TV=function(n,e,t){return ql(e)?n:e==="x"?+n:Rn(n).locale(t).format(e)},BD=(n,e)=>{var t;const r=[],i=e==null?void 0:e();for(let a=0;a<n;a++)r.push((t=i==null?void 0:i.includes(a))!=null?t:!1);return r},MT=n=>Ut(n)?n.map(e=>e.toDate()):n.toDate(),uAe=(n,e)=>{const t=n.subtract(1,"month").endOf("month").date();return xp(e).map((r,i)=>t-(e-i-1))},cAe=n=>{const e=n.daysInMonth();return xp(e).map((t,r)=>r+1)},dAe=n=>xp(n.length/7).map(e=>{const t=e*7;return n.slice(t,t+7)}),fAe=Vt({selectedDay:{type:tt(Object)},range:{type:tt(Array)},date:{type:tt(Object),required:!0},hideHeader:{type:Boolean}}),hAe={pick:n=>er(n)};var pte={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Al,function(){return function(t,r,i){var a=r.prototype,s=function(d){return d&&(d.indexOf?d:d.s)},o=function(d,f,h,p,m){var v=d.name?d:d.$locale(),g=s(v[f]),y=s(v[h]),_=g||y.map(function(x){return x.slice(0,p)});if(!m)return _;var b=v.weekStart;return _.map(function(x,w){return _[(w+(b||0))%7]})},l=function(){return i.Ls[i.locale()]},u=function(d,f){return d.formats[f]||function(h){return h.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,m,v){return m||v.slice(1)})}(d.formats[f.toUpperCase()])},c=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):o(d,"months")},monthsShort:function(f){return f?f.format("MMM"):o(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):o(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):o(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):o(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return u(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};a.localeData=function(){return c.bind(this)()},i.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return i.weekdays()},weekdaysShort:function(){return i.weekdaysShort()},weekdaysMin:function(){return i.weekdaysMin()},months:function(){return i.months()},monthsShort:function(){return i.monthsShort()},longDateFormat:function(f){return u(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},i.months=function(){return o(l(),"months")},i.monthsShort=function(){return o(l(),"monthsShort","months",3)},i.weekdays=function(d){return o(l(),"weekdays",null,null,d)},i.weekdaysShort=function(d){return o(l(),"weekdaysShort","weekdays",3,d)},i.weekdaysMin=function(d){return o(l(),"weekdaysMin","weekdays",2,d)}}})})(pte);var pAe=pte.exports;const mte=Ls(pAe),mAe=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],FD=["sun","mon","tue","wed","thu","fri","sat"],vAe=(n,e)=>{Rn.extend(mte);const t=Rn.localeData().firstDayOfWeek(),{t:r,lang:i}=Ar(),a=Rn().locale(i.value),s=V(()=>!!n.range&&!!n.range.length),o=V(()=>{let f=[];if(s.value){const[h,p]=n.range,m=xp(p.date()-h.date()+1).map(y=>({text:h.date()+y,type:"current"}));let v=m.length%7;v=v===0?0:7-v;const g=xp(v).map((y,_)=>({text:_+1,type:"next"}));f=m.concat(g)}else{const h=n.date.startOf("month").day(),p=uAe(n.date,(h-t+7)%7).map(y=>({text:y,type:"prev"})),m=cAe(n.date).map(y=>({text:y,type:"current"}));f=[...p,...m];const v=7-(f.length%7||7),g=xp(v).map((y,_)=>({text:_+1,type:"next"}));f=f.concat(g)}return dAe(f)}),l=V(()=>{const f=t;return f===0?FD.map(h=>r(`el.datepicker.weeks.${h}`)):FD.slice(f).concat(FD.slice(0,f)).map(h=>r(`el.datepicker.weeks.${h}`))}),u=(f,h)=>{switch(h){case"prev":return n.date.startOf("month").subtract(1,"month").date(f);case"next":return n.date.startOf("month").add(1,"month").date(f);case"current":return n.date.date(f)}};return{now:a,isInRange:s,rows:o,weekDays:l,getFormattedDate:u,handlePickDay:({text:f,type:h})=>{const p=u(f,h);e("pick",p)},getSlotData:({text:f,type:h})=>{const p=u(f,h);return{isSelected:p.isSame(n.selectedDay),type:`${h}-month`,day:p.format("YYYY-MM-DD"),date:p.toDate()}}}},gAe=Ne({name:"DateTable"}),yAe=Ne({...gAe,props:fAe,emits:hAe,setup(n,{expose:e,emit:t}){const r=n,{isInRange:i,now:a,rows:s,weekDays:o,getFormattedDate:l,handlePickDay:u,getSlotData:c}=vAe(r,t),d=kt("calendar-table"),f=kt("calendar-day"),h=({text:p,type:m})=>{const v=[m];if(m==="current"){const g=l(p,m);g.isSame(r.selectedDay,"day")&&v.push(f.is("selected")),g.isSame(a,"day")&&v.push(f.is("today"))}return v};return e({getFormattedDate:l}),(p,m)=>(W(),Se("table",{class:J([S(d).b(),S(d).is("range",S(i))]),cellspacing:"0",cellpadding:"0"},[p.hideHeader?st("v-if",!0):(W(),Se("thead",{key:0},[Ce("tr",null,[(W(!0),Se(on,null,ur(S(o),v=>(W(),Se("th",{key:v,scope:"col"},Ft(v),1))),128))])])),Ce("tbody",null,[(W(!0),Se(on,null,ur(S(s),(v,g)=>(W(),Se("tr",{key:g,class:J({[S(d).e("row")]:!0,[S(d).em("row","hide-border")]:g===0&&p.hideHeader})},[(W(!0),Se(on,null,ur(v,(y,_)=>(W(),Se("td",{key:_,class:J(h(y)),onClick:b=>S(u)(y)},[Ce("div",{class:J(S(f).b())},[at(p.$slots,"date-cell",{data:S(c)(y)},()=>[Ce("span",null,Ft(y.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var CV=$t(yAe,[["__file","date-table.vue"]]);const _Ae=(n,e)=>{const t=n.endOf("month"),r=e.startOf("month"),a=t.isSame(r,"week")?r.add(1,"week"):r;return[[n,t],[a.startOf("week"),e]]},bAe=(n,e)=>{const t=n.endOf("month"),r=n.add(1,"month").startOf("month"),i=t.isSame(r,"week")?r.add(1,"week"):r,a=i.endOf("month"),s=e.startOf("month"),o=a.isSame(s,"week")?s.add(1,"week"):s;return[[n,t],[i.startOf("week"),a],[o.startOf("week"),e]]},SAe=(n,e,t)=>{const{lang:r}=Ar(),i=ie(),a=Rn().locale(r.value),s=V({get(){return n.modelValue?l.value:i.value},set(v){if(!v)return;i.value=v;const g=v.toDate();e(Ks,g),e(jn,g)}}),o=V(()=>{if(!n.range||!Ut(n.range)||n.range.length!==2||n.range.some(_=>!kp(_)))return[];const v=n.range.map(_=>Rn(_).locale(r.value)),[g,y]=v;return g.isAfter(y)?[]:g.isSame(y,"month")?h(g,y):g.add(1,"month").month()!==y.month()?[]:h(g,y)}),l=V(()=>n.modelValue?Rn(n.modelValue).locale(r.value):s.value||(o.value.length?o.value[0][0]:a)),u=V(()=>l.value.subtract(1,"month").date(1)),c=V(()=>l.value.add(1,"month").date(1)),d=V(()=>l.value.subtract(1,"year").date(1)),f=V(()=>l.value.add(1,"year").date(1)),h=(v,g)=>{const y=v.startOf("week"),_=g.endOf("week"),b=y.get("month"),x=_.get("month");return b===x?[[y,_]]:(b+1)%12===x?_Ae(y,_):b+2===x||(b+1)%11===x?bAe(y,_):[]},p=v=>{s.value=v};return{calculateValidatedDateRange:h,date:l,realSelectedDay:s,pickDay:p,selectDate:v=>{const y={"prev-month":u.value,"next-month":c.value,"prev-year":d.value,"next-year":f.value,today:a}[v];y.isSame(l.value,"day")||p(y)},validatedRange:o}},xAe=n=>Ut(n)&&n.length===2&&n.every(e=>kp(e)),wAe=Vt({modelValue:{type:Date},range:{type:tt(Array),validator:xAe}}),TAe={[jn]:n=>kp(n),[Ks]:n=>kp(n)},CAe="ElCalendar",AAe=Ne({name:CAe}),EAe=Ne({...AAe,props:wAe,emits:TAe,setup(n,{expose:e,emit:t}){const r=n,i=kt("calendar"),{calculateValidatedDateRange:a,date:s,pickDay:o,realSelectedDay:l,selectDate:u,validatedRange:c}=SAe(r,t),{t:d}=Ar(),f=V(()=>{const h=`el.datepicker.month${s.value.format("M")}`;return`${s.value.year()} ${d("el.datepicker.year")} ${d(h)}`});return e({selectedDay:l,pickDay:o,selectDate:u,calculateValidatedDateRange:a}),(h,p)=>(W(),Se("div",{class:J(S(i).b())},[Ce("div",{class:J(S(i).e("header"))},[at(h.$slots,"header",{date:S(f)},()=>[Ce("div",{class:J(S(i).e("title"))},Ft(S(f)),3),S(c).length===0?(W(),Se("div",{key:0,class:J(S(i).e("button-group"))},[be(S(ute),null,{default:Oe(()=>[be(S(gs),{size:"small",onClick:m=>S(u)("prev-month")},{default:Oe(()=>[Xn(Ft(S(d)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),be(S(gs),{size:"small",onClick:m=>S(u)("today")},{default:Oe(()=>[Xn(Ft(S(d)("el.datepicker.today")),1)]),_:1},8,["onClick"]),be(S(gs),{size:"small",onClick:m=>S(u)("next-month")},{default:Oe(()=>[Xn(Ft(S(d)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):st("v-if",!0)])],2),S(c).length===0?(W(),Se("div",{key:0,class:J(S(i).e("body"))},[be(CV,{date:S(s),"selected-day":S(l),onPick:S(o)},Wu({_:2},[h.$slots["date-cell"]?{name:"date-cell",fn:Oe(m=>[at(h.$slots,"date-cell",Ac(Op(m)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(W(),Se("div",{key:1,class:J(S(i).e("body"))},[(W(!0),Se(on,null,ur(S(c),(m,v)=>(W(),pt(CV,{key:v,date:m[0],"selected-day":S(l),range:m,"hide-header":v!==0,onPick:S(o)},Wu({_:2},[h.$slots["date-cell"]?{name:"date-cell",fn:Oe(g=>[at(h.$slots,"date-cell",Ac(Op(g)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var MAe=$t(EAe,[["__file","calendar.vue"]]);const IAe=Bn(MAe),DAe=Vt({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:tt([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),PAe=Ne({name:"ElCard"}),RAe=Ne({...PAe,props:DAe,setup(n){const e=kt("card");return(t,r)=>(W(),Se("div",{class:J([S(e).b(),S(e).is(`${t.shadow}-shadow`)])},[t.$slots.header||t.header?(W(),Se("div",{key:0,class:J(S(e).e("header"))},[at(t.$slots,"header",{},()=>[Xn(Ft(t.header),1)])],2)):st("v-if",!0),Ce("div",{class:J([S(e).e("body"),t.bodyClass]),style:Jt(t.bodyStyle)},[at(t.$slots,"default")],6),t.$slots.footer||t.footer?(W(),Se("div",{key:1,class:J(S(e).e("footer"))},[at(t.$slots,"footer",{},()=>[Xn(Ft(t.footer),1)])],2)):st("v-if",!0)],2))}});var kAe=$t(RAe,[["__file","card.vue"]]);const LAe=Bn(kAe),OAe=Vt({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),NAe={change:(n,e)=>[n,e].every(_n)},vte=Symbol("carouselContextKey"),QL="ElCarouselItem";var xu=(n=>(n[n.TEXT=1]="TEXT",n[n.CLASS=2]="CLASS",n[n.STYLE=4]="STYLE",n[n.PROPS=8]="PROPS",n[n.FULL_PROPS=16]="FULL_PROPS",n[n.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",n[n.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",n[n.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",n[n.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",n[n.NEED_PATCH=512]="NEED_PATCH",n[n.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",n[n.HOISTED=-1]="HOISTED",n[n.BAIL=-2]="BAIL",n))(xu||{});function ZL(n){return qi(n)&&n.type===on}function BAe(n){return qi(n)&&n.type===So}function FAe(n){return qi(n)&&!ZL(n)&&!BAe(n)}const UAe=n=>{if(!qi(n))return{};const e=n.props||{},t=(qi(n.type)?n.type.props:void 0)||{},r={};return Object.keys(t).forEach(i=>{Ir(t[i],"default")&&(r[i]=t[i].default)}),Object.keys(e).forEach(i=>{r[iu(i)]=e[i]}),r},zAe=n=>{if(!Ut(n)||n.length>1)throw new Error("expect to receive a single Vue element child");return n[0]},wp=n=>{const e=Ut(n)?n:[n],t=[];return e.forEach(r=>{var i;Ut(r)?t.push(...wp(r)):qi(r)&&((i=r.component)!=null&&i.subTree)?t.push(r,...wp(r.component.subTree)):qi(r)&&Ut(r.children)?t.push(...wp(r.children)):t.push(r)}),t},HAe=(n,e,t)=>wp(n.subTree).filter(a=>{var s;return qi(a)&&((s=a.type)==null?void 0:s.name)===e&&!!a.component}).map(a=>a.component.uid).map(a=>t[a]).filter(a=>!!a),lB=(n,e)=>{const t={},r=jr([]);return{children:r,addChild:s=>{t[s.uid]=s,r.value=HAe(n,e,t)},removeChild:s=>{delete t[s],r.value=r.value.filter(o=>o.uid!==s)}}},AV=300,VAe=(n,e,t)=>{const{children:r,addChild:i,removeChild:a}=lB(tr(),QL),s=Oa(),o=ie(-1),l=ie(null),u=ie(!1),c=ie(),d=ie(0),f=ie(!0),h=ie(!0),p=ie(!1),m=V(()=>n.arrow!=="never"&&!S(y)),v=V(()=>r.value.some(de=>de.props.label.toString().length>0)),g=V(()=>n.type==="card"),y=V(()=>n.direction==="vertical"),_=V(()=>n.height!=="auto"?{height:n.height}:{height:`${d.value}px`,overflow:"hidden"}),b=V0(de=>{E(de)},AV,{trailing:!0}),x=V0(de=>{B(de)},AV),w=de=>f.value?o.value<=1?de<=1:de>1:!0;function A(){l.value&&(clearInterval(l.value),l.value=null)}function T(){n.interval<=0||!n.autoplay||l.value||(l.value=setInterval(()=>C(),n.interval))}const C=()=>{h.value||(p.value=!0),h.value=!1,o.value<r.value.length-1?o.value=o.value+1:n.loop?o.value=0:p.value=!1};function E(de){if(h.value||(p.value=!0),h.value=!1,ln(de)){const Be=r.value.filter(Xe=>Xe.props.name===de);Be.length>0&&(de=r.value.indexOf(Be[0]))}if(de=Number(de),Number.isNaN(de)||de!==Math.floor(de))return;const me=r.value.length,ke=o.value;de<0?o.value=n.loop?me-1:0:de>=me?o.value=n.loop?0:me-1:o.value=de,ke===o.value&&I(ke),re()}function I(de){r.value.forEach((me,ke)=>{me.translateItem(ke,o.value,de)})}function P(de,me){var ke,Be,Xe,Ye;const Y=S(r),he=Y.length;if(he===0||!de.states.inStage)return!1;const le=me+1,Ke=me-1,Ue=he-1,Ze=Y[Ue].states.active,je=Y[0].states.active,He=(Be=(ke=Y[le])==null?void 0:ke.states)==null?void 0:Be.active,ut=(Ye=(Xe=Y[Ke])==null?void 0:Xe.states)==null?void 0:Ye.active;return me===Ue&&je||He?"left":me===0&&Ze||ut?"right":!1}function L(){u.value=!0,n.pauseOnHover&&A()}function N(){u.value=!1,T()}function F(){p.value=!1}function k(de){S(y)||r.value.forEach((me,ke)=>{de===P(me,ke)&&(me.states.hover=!0)})}function H(){S(y)||r.value.forEach(de=>{de.states.hover=!1})}function U(de){de!==o.value&&(h.value||(p.value=!0)),o.value=de}function B(de){n.trigger==="hover"&&de!==o.value&&(o.value=de,h.value||(p.value=!0))}function $(){E(o.value-1)}function ee(){E(o.value+1)}function re(){A(),n.pauseOnHover||T()}function ne(de){n.height==="auto"&&(d.value=de)}function ae(){var de;const me=(de=s.default)==null?void 0:de.call(s);if(!me)return null;const Be=wp(me).filter(Xe=>qi(Xe)&&Xe.type.name===QL);return(Be==null?void 0:Be.length)===2&&n.loop&&!g.value?(f.value=!0,Be):(f.value=!1,null)}St(()=>o.value,(de,me)=>{I(me),f.value&&(de=de%2,me=me%2),me>-1&&e("change",de,me)}),St(()=>n.autoplay,de=>{de?T():A()}),St(()=>n.loop,()=>{E(o.value)}),St(()=>n.interval,()=>{re()});const pe=jr();return zn(()=>{St(()=>r.value,()=>{r.value.length>0&&E(n.initialIndex)},{immediate:!0}),pe.value=zi(c.value,()=>{I()}),T()}),Wr(()=>{A(),c.value&&pe.value&&pe.value.stop()}),pr(vte,{root:c,isCardType:g,isVertical:y,items:r,loop:n.loop,cardScale:n.cardScale,addItem:i,removeItem:a,setActiveItem:E,setContainerHeight:ne}),{root:c,activeIndex:o,arrowDisplay:m,hasLabel:v,hover:u,isCardType:g,isTransitioning:p,items:r,isVertical:y,containerStyle:_,isItemsTwoLength:f,handleButtonEnter:k,handleTransitionEnd:F,handleButtonLeave:H,handleIndicatorClick:U,handleMouseEnter:L,handleMouseLeave:N,setActiveItem:E,prev:$,next:ee,PlaceholderItem:ae,isTwoLengthShow:w,throttledArrowClick:b,throttledIndicatorHover:x}},$Ae="ElCarousel",GAe=Ne({name:$Ae}),WAe=Ne({...GAe,props:OAe,emits:NAe,setup(n,{expose:e,emit:t}){const r=n,{root:i,activeIndex:a,arrowDisplay:s,hasLabel:o,hover:l,isCardType:u,items:c,isVertical:d,containerStyle:f,handleButtonEnter:h,handleButtonLeave:p,isTransitioning:m,handleIndicatorClick:v,handleMouseEnter:g,handleMouseLeave:y,handleTransitionEnd:_,setActiveItem:b,prev:x,next:w,PlaceholderItem:A,isTwoLengthShow:T,throttledArrowClick:C,throttledIndicatorHover:E}=VAe(r,t),I=kt("carousel"),{t:P}=Ar(),L=V(()=>{const k=[I.b(),I.m(r.direction)];return S(u)&&k.push(I.m("card")),k}),N=V(()=>{const k=[I.e("container")];return r.motionBlur&&S(m)&&c.value.length>1&&k.push(S(d)?`${I.namespace.value}-transitioning-vertical`:`${I.namespace.value}-transitioning`),k}),F=V(()=>{const k=[I.e("indicators"),I.em("indicators",r.direction)];return S(o)&&k.push(I.em("indicators","labels")),r.indicatorPosition==="outside"&&k.push(I.em("indicators","outside")),S(d)&&k.push(I.em("indicators","right")),k});return e({activeIndex:a,setActiveItem:b,prev:x,next:w}),(k,H)=>(W(),Se("div",{ref_key:"root",ref:i,class:J(S(L)),onMouseenter:Tn(S(g),["stop"]),onMouseleave:Tn(S(y),["stop"])},[S(s)?(W(),pt(Ka,{key:0,name:"carousel-arrow-left",persisted:""},{default:Oe(()=>[Wn(Ce("button",{type:"button",class:J([S(I).e("arrow"),S(I).em("arrow","left")]),"aria-label":S(P)("el.carousel.leftArrow"),onMouseenter:U=>S(h)("left"),onMouseleave:S(p),onClick:Tn(U=>S(C)(S(a)-1),["stop"])},[be(S(tn),null,{default:Oe(()=>[be(S(Up))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Nr,(k.arrow==="always"||S(l))&&(r.loop||S(a)>0)]])]),_:1})):st("v-if",!0),S(s)?(W(),pt(Ka,{key:1,name:"carousel-arrow-right",persisted:""},{default:Oe(()=>[Wn(Ce("button",{type:"button",class:J([S(I).e("arrow"),S(I).em("arrow","right")]),"aria-label":S(P)("el.carousel.rightArrow"),onMouseenter:U=>S(h)("right"),onMouseleave:S(p),onClick:Tn(U=>S(C)(S(a)+1),["stop"])},[be(S(tn),null,{default:Oe(()=>[be(S(jo))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Nr,(k.arrow==="always"||S(l))&&(r.loop||S(a)<S(c).length-1)]])]),_:1})):st("v-if",!0),Ce("div",{class:J(S(N)),style:Jt(S(f)),onTransitionend:S(_)},[be(S(A)),at(k.$slots,"default")],46,["onTransitionend"]),k.indicatorPosition!=="none"?(W(),Se("ul",{key:2,class:J(S(F))},[(W(!0),Se(on,null,ur(S(c),(U,B)=>Wn((W(),Se("li",{key:B,class:J([S(I).e("indicator"),S(I).em("indicator",k.direction),S(I).is("active",B===S(a))]),onMouseenter:$=>S(E)(B),onClick:Tn($=>S(v)(B),["stop"])},[Ce("button",{class:J(S(I).e("button")),"aria-label":S(P)("el.carousel.indicator",{index:B+1})},[S(o)?(W(),Se("span",{key:0},Ft(U.props.label),1)):st("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[Nr,S(T)(B)]])),128))],2)):st("v-if",!0),r.motionBlur?(W(),Se("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[Ce("defs",null,[Ce("filter",{id:"elCarouselHorizontal"},[Ce("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),Ce("filter",{id:"elCarouselVertical"},[Ce("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):st("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var qAe=$t(WAe,[["__file","carousel.vue"]]);const jAe=Vt({name:{type:String,default:""},label:{type:[String,Number],default:""}}),KAe=n=>{const e=Yt(vte),t=tr(),r=ie(),i=ie(!1),a=ie(0),s=ie(1),o=ie(!1),l=ie(!1),u=ie(!1),c=ie(!1),{isCardType:d,isVertical:f,cardScale:h}=e;function p(_,b,x){const w=x-1,A=b-1,T=b+1,C=x/2;return b===0&&_===w?-1:b===w&&_===0?x:_<A&&b-_>=C?x+1:_>T&&_-b>=C?-2:_}function m(_,b){var x,w;const A=S(f)?((x=e.root.value)==null?void 0:x.offsetHeight)||0:((w=e.root.value)==null?void 0:w.offsetWidth)||0;return u.value?A*((2-h)*(_-b)+1)/4:_<b?-(1+h)*A/4:(3+h)*A/4}function v(_,b,x){const w=e.root.value;return w?((x?w.offsetHeight:w.offsetWidth)||0)*(_-b):0}const g=(_,b,x)=>{var w;const A=S(d),T=(w=e.items.value.length)!=null?w:Number.NaN,C=_===b;!A&&!ti(x)&&(c.value=C||_===x),!C&&T>2&&e.loop&&(_=p(_,b,T));const E=S(f);o.value=C,A?(u.value=Math.round(Math.abs(_-b))<=1,a.value=m(_,b),s.value=S(o)?1:h):a.value=v(_,b,E),l.value=!0,C&&r.value&&e.setContainerHeight(r.value.offsetHeight)};function y(){if(e&&S(d)){const _=e.items.value.findIndex(({uid:b})=>b===t.uid);e.setActiveItem(_)}}return zn(()=>{e.addItem({props:n,states:$r({hover:i,translate:a,scale:s,active:o,ready:l,inStage:u,animating:c}),uid:t.uid,translateItem:g})}),sm(()=>{e.removeItem(t.uid)}),{carouselItemRef:r,active:o,animating:c,hover:i,inStage:u,isVertical:f,translate:a,isCardType:d,scale:s,ready:l,handleItemClick:y}},XAe=Ne({name:QL}),YAe=Ne({...XAe,props:jAe,setup(n){const e=n,t=kt("carousel"),{carouselItemRef:r,active:i,animating:a,hover:s,inStage:o,isVertical:l,translate:u,isCardType:c,scale:d,ready:f,handleItemClick:h}=KAe(e),p=V(()=>[t.e("item"),t.is("active",i.value),t.is("in-stage",o.value),t.is("hover",s.value),t.is("animating",a.value),{[t.em("item","card")]:c.value,[t.em("item","card-vertical")]:c.value&&l.value}]),m=V(()=>{const g=`${`translate${S(l)?"Y":"X"}`}(${S(u)}px)`,y=`scale(${S(d)})`;return{transform:[g,y].join(" ")}});return(v,g)=>Wn((W(),Se("div",{ref_key:"carouselItemRef",ref:r,class:J(S(p)),style:Jt(S(m)),onClick:S(h)},[S(c)?Wn((W(),Se("div",{key:0,class:J(S(t).e("mask"))},null,2)),[[Nr,!S(i)]]):st("v-if",!0),at(v.$slots,"default")],14,["onClick"])),[[Nr,S(f)]])}});var gte=$t(YAe,[["__file","carousel-item.vue"]]);const QAe=Bn(qAe,{CarouselItem:gte}),ZAe=Xi(gte),yte={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:La,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...ks(["ariaControls"])},_te={[jn]:n=>ln(n)||_n(n)||mi(n),change:n=>ln(n)||_n(n)||mi(n)},k_=Symbol("checkboxGroupContextKey"),JAe=({model:n,isChecked:e})=>{const t=Yt(k_,void 0),r=V(()=>{var a,s;const o=(a=t==null?void 0:t.max)==null?void 0:a.value,l=(s=t==null?void 0:t.min)==null?void 0:s.value;return!ti(o)&&n.value.length>=o&&!e.value||!ti(l)&&n.value.length<=l&&e.value});return{isDisabled:Js(V(()=>(t==null?void 0:t.disabled.value)||r.value)),isLimitDisabled:r}},eEe=(n,{model:e,isLimitExceeded:t,hasOwnLabel:r,isDisabled:i,isLabeledByFormItem:a})=>{const s=Yt(k_,void 0),{formItem:o}=Zs(),{emit:l}=tr();function u(p){var m,v,g,y;return[!0,n.trueValue,n.trueLabel].includes(p)?(v=(m=n.trueValue)!=null?m:n.trueLabel)!=null?v:!0:(y=(g=n.falseValue)!=null?g:n.falseLabel)!=null?y:!1}function c(p,m){l("change",u(p),m)}function d(p){if(t.value)return;const m=p.target;l("change",u(m.checked),p)}async function f(p){t.value||!r.value&&!i.value&&a.value&&(p.composedPath().some(g=>g.tagName==="LABEL")||(e.value=u([!1,n.falseValue,n.falseLabel].includes(e.value)),await cn(),c(e.value,p)))}const h=V(()=>(s==null?void 0:s.validateEvent)||n.validateEvent);return St(()=>n.modelValue,()=>{h.value&&(o==null||o.validate("change").catch(p=>void 0))}),{handleChange:d,onClickRoot:f}},tEe=n=>{const e=ie(!1),{emit:t}=tr(),r=Yt(k_,void 0),i=V(()=>ti(r)===!1),a=ie(!1),s=V({get(){var o,l;return i.value?(o=r==null?void 0:r.modelValue)==null?void 0:o.value:(l=n.modelValue)!=null?l:e.value},set(o){var l,u;i.value&&Ut(o)?(a.value=((l=r==null?void 0:r.max)==null?void 0:l.value)!==void 0&&o.length>(r==null?void 0:r.max.value)&&o.length>s.value.length,a.value===!1&&((u=r==null?void 0:r.changeEvent)==null||u.call(r,o))):(t(jn,o),e.value=o)}});return{model:s,isGroup:i,isLimitExceeded:a}},nEe=(n,e,{model:t})=>{const r=Yt(k_,void 0),i=ie(!1),a=V(()=>av(n.value)?n.label:n.value),s=V(()=>{const c=t.value;return mi(c)?c:Ut(c)?er(a.value)?c.map(ri).some(d=>Ms(d,a.value)):c.map(ri).includes(a.value):c!=null?c===n.trueValue||c===n.trueLabel:!!c}),o=Ca(V(()=>{var c;return(c=r==null?void 0:r.size)==null?void 0:c.value}),{prop:!0}),l=Ca(V(()=>{var c;return(c=r==null?void 0:r.size)==null?void 0:c.value})),u=V(()=>!!e.default||!av(a.value));return{checkboxButtonSize:o,isChecked:s,isFocused:i,checkboxSize:l,hasOwnLabel:u,actualValue:a}},bte=(n,e)=>{const{formItem:t}=Zs(),{model:r,isGroup:i,isLimitExceeded:a}=tEe(n),{isFocused:s,isChecked:o,checkboxButtonSize:l,checkboxSize:u,hasOwnLabel:c,actualValue:d}=nEe(n,e,{model:r}),{isDisabled:f}=JAe({model:r,isChecked:o}),{inputId:h,isLabeledByFormItem:p}=ec(n,{formItemContext:t,disableIdGeneration:c,disableIdManagement:i}),{handleChange:m,onClickRoot:v}=eEe(n,{model:r,isLimitExceeded:a,hasOwnLabel:c,isDisabled:f,isLabeledByFormItem:p});return(()=>{function y(){var _,b;Ut(r.value)&&!r.value.includes(d.value)?r.value.push(d.value):r.value=(b=(_=n.trueValue)!=null?_:n.trueLabel)!=null?b:!0}n.checked&&y()})(),Sp({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},V(()=>i.value&&av(n.value))),Sp({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},V(()=>!!n.trueLabel)),Sp({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},V(()=>!!n.falseLabel)),{inputId:h,isLabeledByFormItem:p,isChecked:o,isDisabled:f,isFocused:s,checkboxButtonSize:l,checkboxSize:u,hasOwnLabel:c,model:r,actualValue:d,handleChange:m,onClickRoot:v}},rEe=Ne({name:"ElCheckbox"}),iEe=Ne({...rEe,props:yte,emits:_te,setup(n){const e=n,t=Oa(),{inputId:r,isLabeledByFormItem:i,isChecked:a,isDisabled:s,isFocused:o,checkboxSize:l,hasOwnLabel:u,model:c,actualValue:d,handleChange:f,onClickRoot:h}=bte(e,t),p=kt("checkbox"),m=V(()=>[p.b(),p.m(l.value),p.is("disabled",s.value),p.is("bordered",e.border),p.is("checked",a.value)]),v=V(()=>[p.e("input"),p.is("disabled",s.value),p.is("checked",a.value),p.is("indeterminate",e.indeterminate),p.is("focus",o.value)]);return(g,y)=>(W(),pt(ir(!S(u)&&S(i)?"span":"label"),{class:J(S(m)),"aria-controls":g.indeterminate?g.ariaControls:null,onClick:S(h)},{default:Oe(()=>{var _,b,x,w;return[Ce("span",{class:J(S(v))},[g.trueValue||g.falseValue||g.trueLabel||g.falseLabel?Wn((W(),Se("input",{key:0,id:S(r),"onUpdate:modelValue":A=>xi(c)?c.value=A:null,class:J(S(p).e("original")),type:"checkbox",indeterminate:g.indeterminate,name:g.name,tabindex:g.tabindex,disabled:S(s),"true-value":(b=(_=g.trueValue)!=null?_:g.trueLabel)!=null?b:!0,"false-value":(w=(x=g.falseValue)!=null?x:g.falseLabel)!=null?w:!1,onChange:S(f),onFocus:A=>o.value=!0,onBlur:A=>o.value=!1,onClick:Tn(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[iM,S(c)]]):Wn((W(),Se("input",{key:1,id:S(r),"onUpdate:modelValue":A=>xi(c)?c.value=A:null,class:J(S(p).e("original")),type:"checkbox",indeterminate:g.indeterminate,disabled:S(s),value:S(d),name:g.name,tabindex:g.tabindex,onChange:S(f),onFocus:A=>o.value=!0,onBlur:A=>o.value=!1,onClick:Tn(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[iM,S(c)]]),Ce("span",{class:J(S(p).e("inner"))},null,2)],2),S(u)?(W(),Se("span",{key:0,class:J(S(p).e("label"))},[at(g.$slots,"default"),g.$slots.default?st("v-if",!0):(W(),Se(on,{key:0},[Xn(Ft(g.label),1)],64))],2)):st("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var aEe=$t(iEe,[["__file","checkbox.vue"]]);const sEe=Ne({name:"ElCheckboxButton"}),oEe=Ne({...sEe,props:yte,emits:_te,setup(n){const e=n,t=Oa(),{isFocused:r,isChecked:i,isDisabled:a,checkboxButtonSize:s,model:o,actualValue:l,handleChange:u}=bte(e,t),c=Yt(k_,void 0),d=kt("checkbox"),f=V(()=>{var p,m,v,g;const y=(m=(p=c==null?void 0:c.fill)==null?void 0:p.value)!=null?m:"";return{backgroundColor:y,borderColor:y,color:(g=(v=c==null?void 0:c.textColor)==null?void 0:v.value)!=null?g:"",boxShadow:y?`-1px 0 0 0 ${y}`:void 0}}),h=V(()=>[d.b("button"),d.bm("button",s.value),d.is("disabled",a.value),d.is("checked",i.value),d.is("focus",r.value)]);return(p,m)=>{var v,g,y,_;return W(),Se("label",{class:J(S(h))},[p.trueValue||p.falseValue||p.trueLabel||p.falseLabel?Wn((W(),Se("input",{key:0,"onUpdate:modelValue":b=>xi(o)?o.value=b:null,class:J(S(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:S(a),"true-value":(g=(v=p.trueValue)!=null?v:p.trueLabel)!=null?g:!0,"false-value":(_=(y=p.falseValue)!=null?y:p.falseLabel)!=null?_:!1,onChange:S(u),onFocus:b=>r.value=!0,onBlur:b=>r.value=!1,onClick:Tn(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[iM,S(o)]]):Wn((W(),Se("input",{key:1,"onUpdate:modelValue":b=>xi(o)?o.value=b:null,class:J(S(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:S(a),value:S(l),onChange:S(u),onFocus:b=>r.value=!0,onBlur:b=>r.value=!1,onClick:Tn(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[iM,S(o)]]),p.$slots.default||p.label?(W(),Se("span",{key:2,class:J(S(d).be("button","inner")),style:Jt(S(i)?S(f):void 0)},[at(p.$slots,"default",{},()=>[Xn(Ft(p.label),1)])],6)):st("v-if",!0)],2)}}});var Ste=$t(oEe,[["__file","checkbox-button.vue"]]);const lEe=Vt({modelValue:{type:tt(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:La,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...ks(["ariaLabel"])}),uEe={[jn]:n=>Ut(n),change:n=>Ut(n)},cEe=Ne({name:"ElCheckboxGroup"}),dEe=Ne({...cEe,props:lEe,emits:uEe,setup(n,{emit:e}){const t=n,r=kt("checkbox"),{formItem:i}=Zs(),{inputId:a,isLabeledByFormItem:s}=ec(t,{formItemContext:i}),o=async u=>{e(jn,u),await cn(),e("change",u)},l=V({get(){return t.modelValue},set(u){o(u)}});return pr(k_,{...Mc(ja(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:o}),St(()=>t.modelValue,()=>{t.validateEvent&&(i==null||i.validate("change").catch(u=>void 0))}),(u,c)=>{var d;return W(),pt(ir(u.tag),{id:S(a),class:J(S(r).b("group")),role:"group","aria-label":S(s)?void 0:u.ariaLabel||"checkbox-group","aria-labelledby":S(s)?(d=S(i))==null?void 0:d.labelId:void 0},{default:Oe(()=>[at(u.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var xte=$t(dEe,[["__file","checkbox-group.vue"]]);const Xu=Bn(aEe,{CheckboxButton:Ste,CheckboxGroup:xte}),fEe=Xi(Ste),wte=Xi(xte),Tte=Vt({modelValue:{type:[String,Number,Boolean],default:void 0},size:La,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),hEe=Vt({...Tte,border:Boolean}),Cte={[jn]:n=>ln(n)||_n(n)||mi(n),[si]:n=>ln(n)||_n(n)||mi(n)},Ate=Symbol("radioGroupKey"),Ete=(n,e)=>{const t=ie(),r=Yt(Ate,void 0),i=V(()=>!!r),a=V(()=>av(n.value)?n.label:n.value),s=V({get(){return i.value?r.modelValue:n.modelValue},set(d){i.value?r.changeEvent(d):e&&e(jn,d),t.value.checked=n.modelValue===a.value}}),o=Ca(V(()=>r==null?void 0:r.size)),l=Js(V(()=>r==null?void 0:r.disabled)),u=ie(!1),c=V(()=>l.value||i.value&&s.value!==a.value?-1:0);return Sp({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},V(()=>i.value&&av(n.value))),{radioRef:t,isGroup:i,radioGroup:r,focus:u,size:o,disabled:l,tabIndex:c,modelValue:s,actualValue:a}},pEe=Ne({name:"ElRadio"}),mEe=Ne({...pEe,props:hEe,emits:Cte,setup(n,{emit:e}){const t=n,r=kt("radio"),{radioRef:i,radioGroup:a,focus:s,size:o,disabled:l,modelValue:u,actualValue:c}=Ete(t,e);function d(){cn(()=>e("change",u.value))}return(f,h)=>{var p;return W(),Se("label",{class:J([S(r).b(),S(r).is("disabled",S(l)),S(r).is("focus",S(s)),S(r).is("bordered",f.border),S(r).is("checked",S(u)===S(c)),S(r).m(S(o))])},[Ce("span",{class:J([S(r).e("input"),S(r).is("disabled",S(l)),S(r).is("checked",S(u)===S(c))])},[Wn(Ce("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":m=>xi(u)?u.value=m:null,class:J(S(r).e("original")),value:S(c),name:f.name||((p=S(a))==null?void 0:p.name),disabled:S(l),checked:S(u)===S(c),type:"radio",onFocus:m=>s.value=!0,onBlur:m=>s.value=!1,onChange:d,onClick:Tn(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[cJ,S(u)]]),Ce("span",{class:J(S(r).e("inner"))},null,2)],2),Ce("span",{class:J(S(r).e("label")),onKeydown:Tn(()=>{},["stop"])},[at(f.$slots,"default",{},()=>[Xn(Ft(f.label),1)])],42,["onKeydown"])],2)}}});var vEe=$t(mEe,[["__file","radio.vue"]]);const gEe=Vt({...Tte}),yEe=Ne({name:"ElRadioButton"}),_Ee=Ne({...yEe,props:gEe,setup(n){const e=n,t=kt("radio"),{radioRef:r,focus:i,size:a,disabled:s,modelValue:o,radioGroup:l,actualValue:u}=Ete(e),c=V(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(d,f)=>{var h;return W(),Se("label",{class:J([S(t).b("button"),S(t).is("active",S(o)===S(u)),S(t).is("disabled",S(s)),S(t).is("focus",S(i)),S(t).bm("button",S(a))])},[Wn(Ce("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":p=>xi(o)?o.value=p:null,class:J(S(t).be("button","original-radio")),value:S(u),type:"radio",name:d.name||((h=S(l))==null?void 0:h.name),disabled:S(s),onFocus:p=>i.value=!0,onBlur:p=>i.value=!1,onClick:Tn(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[cJ,S(o)]]),Ce("span",{class:J(S(t).be("button","inner")),style:Jt(S(o)===S(u)?S(c):{}),onKeydown:Tn(()=>{},["stop"])},[at(d.$slots,"default",{},()=>[Xn(Ft(d.label),1)])],46,["onKeydown"])],2)}}});var Mte=$t(_Ee,[["__file","radio-button.vue"]]);const bEe=Vt({id:{type:String,default:void 0},size:La,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...ks(["ariaLabel"])}),SEe=Cte,xEe=Ne({name:"ElRadioGroup"}),wEe=Ne({...xEe,props:bEe,emits:SEe,setup(n,{emit:e}){const t=n,r=kt("radio"),i=Ds(),a=ie(),{formItem:s}=Zs(),{inputId:o,isLabeledByFormItem:l}=ec(t,{formItemContext:s}),u=d=>{e(jn,d),cn(()=>e("change",d))};zn(()=>{const d=a.value.querySelectorAll("[type=radio]"),f=d[0];!Array.from(d).some(h=>h.checked)&&f&&(f.tabIndex=0)});const c=V(()=>t.name||i.value);return pr(Ate,$r({...ja(t),changeEvent:u,name:c})),St(()=>t.modelValue,()=>{t.validateEvent&&(s==null||s.validate("change").catch(d=>void 0))}),(d,f)=>(W(),Se("div",{id:S(o),ref_key:"radioGroupRef",ref:a,class:J(S(r).b("group")),role:"radiogroup","aria-label":S(l)?void 0:d.ariaLabel||"radio-group","aria-labelledby":S(l)?S(s).labelId:void 0},[at(d.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var Ite=$t(wEe,[["__file","radio-group.vue"]]);const Dte=Bn(vEe,{RadioButton:Mte,RadioGroup:Ite}),TEe=Xi(Ite),CEe=Xi(Mte);var AEe=Ne({name:"NodeContent",setup(){return{ns:kt("cascader-node")}},render(){const{ns:n}=this,{node:e,panel:t}=this.$parent,{data:r,label:i}=e,{renderLabelFn:a}=t;return an("span",{class:n.e("label")},a?a({node:e,data:r}):i)}});const uB=Symbol(),EEe=Ne({name:"ElCascaderNode",components:{ElCheckbox:Xu,ElRadio:Dte,NodeContent:AEe,ElIcon:tn,Check:gw,Loading:Pd,ArrowRight:jo},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(n,{emit:e}){const t=Yt(uB),r=kt("cascader-node"),i=V(()=>t.isHoverMenu),a=V(()=>t.config.multiple),s=V(()=>t.config.checkStrictly),o=V(()=>{var w;return(w=t.checkedNodes[0])==null?void 0:w.uid}),l=V(()=>n.node.isDisabled),u=V(()=>n.node.isLeaf),c=V(()=>s.value&&!u.value||!l.value),d=V(()=>h(t.expandingNode)),f=V(()=>s.value&&t.checkedNodes.some(h)),h=w=>{var A;const{level:T,uid:C}=n.node;return((A=w==null?void 0:w.pathNodes[T-1])==null?void 0:A.uid)===C},p=()=>{d.value||t.expandNode(n.node)},m=w=>{const{node:A}=n;w!==A.checked&&t.handleCheckChange(A,w)},v=()=>{t.lazyLoad(n.node,()=>{u.value||p()})},g=w=>{i.value&&(y(),!u.value&&e("expand",w))},y=()=>{const{node:w}=n;!c.value||w.loading||(w.loaded?p():v())},_=()=>{i.value&&!u.value||(u.value&&!l.value&&!s.value&&!a.value?x(!0):y())},b=w=>{s.value?(m(w),n.node.loaded&&p()):x(w)},x=w=>{n.node.loaded?(m(w),!s.value&&p()):v()};return{panel:t,isHoverMenu:i,multiple:a,checkStrictly:s,checkedNodeId:o,isDisabled:l,isLeaf:u,expandable:c,inExpandingPath:d,inCheckedPath:f,ns:r,handleHoverExpand:g,handleExpand:y,handleClick:_,handleCheck:x,handleSelectCheck:b}}});function MEe(n,e,t,r,i,a){const s=Kt("el-checkbox"),o=Kt("el-radio"),l=Kt("check"),u=Kt("el-icon"),c=Kt("node-content"),d=Kt("loading"),f=Kt("arrow-right");return W(),Se("li",{id:`${n.menuId}-${n.node.uid}`,role:"menuitem","aria-haspopup":!n.isLeaf,"aria-owns":n.isLeaf?null:n.menuId,"aria-expanded":n.inExpandingPath,tabindex:n.expandable?-1:void 0,class:J([n.ns.b(),n.ns.is("selectable",n.checkStrictly),n.ns.is("active",n.node.checked),n.ns.is("disabled",!n.expandable),n.inExpandingPath&&"in-active-path",n.inCheckedPath&&"in-checked-path"]),onMouseenter:n.handleHoverExpand,onFocus:n.handleHoverExpand,onClick:n.handleClick},[st(" prefix "),n.multiple?(W(),pt(s,{key:0,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:n.isDisabled,onClick:Tn(()=>{},["stop"]),"onUpdate:modelValue":n.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):n.checkStrictly?(W(),pt(o,{key:1,"model-value":n.checkedNodeId,label:n.node.uid,disabled:n.isDisabled,"onUpdate:modelValue":n.handleSelectCheck,onClick:Tn(()=>{},["stop"])},{default:Oe(()=>[st(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Ce("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):n.isLeaf&&n.node.checked?(W(),pt(u,{key:2,class:J(n.ns.e("prefix"))},{default:Oe(()=>[be(l)]),_:1},8,["class"])):st("v-if",!0),st(" content "),be(c),st(" postfix "),n.isLeaf?st("v-if",!0):(W(),Se(on,{key:3},[n.node.loading?(W(),pt(u,{key:0,class:J([n.ns.is("loading"),n.ns.e("postfix")])},{default:Oe(()=>[be(d)]),_:1},8,["class"])):(W(),pt(u,{key:1,class:J(["arrow-right",n.ns.e("postfix")])},{default:Oe(()=>[be(f)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var IEe=$t(EEe,[["render",MEe],["__file","node.vue"]]);const DEe=Ne({name:"ElCascaderMenu",components:{Loading:Pd,ElIcon:tn,ElScrollbar:Vd,ElCascaderNode:IEe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(n){const e=tr(),t=kt("cascader-menu"),{t:r}=Ar(),i=Ds();let a=null,s=null;const o=Yt(uB),l=ie(null),u=V(()=>!n.nodes.length),c=V(()=>!o.initialLoaded),d=V(()=>`${i.value}-${n.index}`),f=v=>{a=v.target},h=v=>{if(!(!o.isHoverMenu||!a||!l.value))if(a.contains(v.target)){p();const g=e.vnode.el,{left:y}=g.getBoundingClientRect(),{offsetWidth:_,offsetHeight:b}=g,x=v.clientX-y,w=a.offsetTop,A=w+a.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${x} ${w} L${_} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${x} ${A} L${_} ${b} V${A} Z" />
        `}else s||(s=window.setTimeout(m,o.config.hoverThreshold))},p=()=>{s&&(clearTimeout(s),s=null)},m=()=>{l.value&&(l.value.innerHTML="",p())};return{ns:t,panel:o,hoverZone:l,isEmpty:u,isLoading:c,menuId:d,t:r,handleExpand:f,handleMouseMove:h,clearHoverZone:m}}});function PEe(n,e,t,r,i,a){const s=Kt("el-cascader-node"),o=Kt("loading"),l=Kt("el-icon"),u=Kt("el-scrollbar");return W(),pt(u,{key:n.menuId,tag:"ul",role:"menu",class:J(n.ns.b()),"wrap-class":n.ns.e("wrap"),"view-class":[n.ns.e("list"),n.ns.is("empty",n.isEmpty)],onMousemove:n.handleMouseMove,onMouseleave:n.clearHoverZone},{default:Oe(()=>{var c;return[(W(!0),Se(on,null,ur(n.nodes,d=>(W(),pt(s,{key:d.uid,node:d,"menu-id":n.menuId,onExpand:n.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),n.isLoading?(W(),Se("div",{key:0,class:J(n.ns.e("empty-text"))},[be(l,{size:"14",class:J(n.ns.is("loading"))},{default:Oe(()=>[be(o)]),_:1},8,["class"]),Xn(" "+Ft(n.t("el.cascader.loading")),1)],2)):n.isEmpty?(W(),Se("div",{key:1,class:J(n.ns.e("empty-text"))},[at(n.$slots,"empty",{},()=>[Xn(Ft(n.t("el.cascader.noData")),1)])],2)):(c=n.panel)!=null&&c.isHoverMenu?(W(),Se("svg",{key:2,ref:"hoverZone",class:J(n.ns.e("hover-zone"))},null,2)):st("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var REe=$t(DEe,[["render",PEe],["__file","menu.vue"]]);const cB=(n="")=>n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),cd=n=>dw(n);let kEe=0;const LEe=n=>{const e=[n];let{parent:t}=n;for(;t;)e.unshift(t),t=t.parent;return e};let JL=class e5{constructor(e,t,r,i=!1){this.data=e,this.config=t,this.parent=r,this.root=i,this.uid=kEe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:a,label:s,children:o}=t,l=e[o],u=LEe(this);this.level=i?0:r?r.level+1:1,this.value=e[a],this.label=e[s],this.pathNodes=u,this.pathValues=u.map(c=>c.value),this.pathLabels=u.map(c=>c.label),this.childrenData=l,this.children=(l||[]).map(c=>new e5(c,t,this)),this.loaded=!t.lazy||this.isLeaf||!ql(l)}get isDisabled(){const{data:e,parent:t,config:r}=this,{disabled:i,checkStrictly:a}=r;return(hn(i)?i(e,this):!!e[i])||!a&&(t==null?void 0:t.isDisabled)}get isLeaf(){const{data:e,config:t,childrenData:r,loaded:i}=this,{lazy:a,leaf:s}=t,o=hn(s)?s(e,this):e[s];return ti(o)?a&&!i?!1:!(Ut(r)&&r.length):!!o}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:t,children:r}=this,i=new e5(e,this.config,this);return Ut(t)?t.push(e):this.childrenData=[e],r.push(i),i}calcText(e,t){const r=e?this.pathLabels.join(t):this.label;return this.text=r,r}broadcast(e,...t){const r=`onParent${cd(e)}`;this.children.forEach(i=>{i&&(i.broadcast(e,...t),i[r]&&i[r](...t))})}emit(e,...t){const{parent:r}=this,i=`onChild${cd(e)}`;r&&(r[i]&&r[i](...t),r.emit(e,...t))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,t=e.filter(i=>!i.isDisabled),r=t.length?t.every(i=>i.checked):!1;this.setCheckState(r)}setCheckState(e){const t=this.children.length,r=this.children.reduce((i,a)=>{const s=a.checked?1:a.indeterminate?.5:0;return i+s},0);this.checked=this.loaded&&this.children.filter(i=>!i.isDisabled).every(i=>i.loaded&&i.checked)&&e,this.indeterminate=this.loaded&&r!==t&&r>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:t,multiple:r}=this.config;t||!r?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const t5=(n,e)=>n.reduce((t,r)=>(r.isLeaf?t.push(r):(!e&&t.push(r),t=t.concat(t5(r.children,e))),t),[]);class EV{constructor(e,t){this.config=t;const r=(e||[]).map(i=>new JL(i,this.config));this.nodes=r,this.allNodes=t5(r,!1),this.leafNodes=t5(r,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,t){const r=t?t.appendChild(e):new JL(e,this.config);t||this.nodes.push(r),this.allNodes.push(r),r.isLeaf&&this.leafNodes.push(r)}appendNodes(e,t){e.forEach(r=>this.appendNode(r,t))}getNodeByValue(e,t=!1){return!e&&e!==0?null:this.getFlattedNodes(t).find(i=>Ms(i.value,e)||Ms(i.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:r,level:i})=>Ms(e.value,r)&&e.level===i)||null}}const Pte=Vt({modelValue:{type:tt([Number,String,Array])},options:{type:tt(Array),default:()=>[]},props:{type:tt(Object),default:()=>({})}}),OEe={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Jr,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},NEe=n=>V(()=>({...OEe,...n.props})),MV=n=>{if(!n)return 0;const e=n.id.split("-");return Number(e[e.length-2])},BEe=n=>{if(!n)return;const e=n.querySelector("input");e?e.click():Lee(n)&&n.click()},FEe=(n,e)=>{const t=e.slice(0),r=t.map(a=>a.uid),i=n.reduce((a,s)=>{const o=r.indexOf(s.uid);return o>-1&&(a.push(s),t.splice(o,1),r.splice(o,1)),a},[]);return i.push(...t),i},IV=n=>[...new Set(n)],Uo=n=>!n&&n!==0?[]:Ut(n)?n:[n],UEe=Ne({name:"ElCascaderPanel",components:{ElCascaderMenu:REe},props:{...Pte,border:{type:Boolean,default:!0},renderLabel:Function},emits:[jn,si,"close","expand-change"],setup(n,{emit:e,slots:t}){let r=!1;const i=kt("cascader"),a=NEe(n);let s=null;const o=ie(!0),l=ie([]),u=ie(null),c=ie([]),d=ie(null),f=ie([]),h=V(()=>a.value.expandTrigger==="hover"),p=V(()=>n.renderLabel||t.default),m=()=>{const{options:P}=n,L=a.value;r=!1,s=new EV(P,L),c.value=[s.getNodes()],L.lazy&&ql(n.options)?(o.value=!1,v(void 0,N=>{N&&(s=new EV(N,L),c.value=[s.getNodes()]),o.value=!0,T(!1,!0)})):T(!1,!0)},v=(P,L)=>{const N=a.value;P=P||new JL({},N,void 0,!0),P.loading=!0;const F=k=>{const H=P,U=H.root?null:H;k&&(s==null||s.appendNodes(k,U)),H.loading=!1,H.loaded=!0,H.childrenData=H.childrenData||[],L&&L(k)};N.lazyLoad(P,F)},g=(P,L)=>{var N;const{level:F}=P,k=c.value.slice(0,F);let H;P.isLeaf?H=P.pathNodes[F-2]:(H=P,k.push(P.children)),((N=d.value)==null?void 0:N.uid)!==(H==null?void 0:H.uid)&&(d.value=P,c.value=k,!L&&e("expand-change",(P==null?void 0:P.pathValues)||[]))},y=(P,L,N=!0)=>{const{checkStrictly:F,multiple:k}=a.value,H=f.value[0];r=!0,!k&&(H==null||H.doCheck(!1)),P.doCheck(L),A(),N&&!k&&!F&&e("close"),!N&&!k&&!F&&_(P)},_=P=>{P&&(P=P.parent,_(P),P&&g(P))},b=P=>s==null?void 0:s.getFlattedNodes(P),x=P=>{var L;return(L=b(P))==null?void 0:L.filter(N=>N.checked!==!1)},w=()=>{f.value.forEach(P=>P.doCheck(!1)),A(),c.value=c.value.slice(0,1),d.value=null,e("expand-change",[])},A=()=>{var P;const{checkStrictly:L,multiple:N}=a.value,F=f.value,k=x(!L),H=FEe(F,k),U=H.map(B=>B.valueByOption);f.value=H,u.value=N?U:(P=U[0])!=null?P:null},T=(P=!1,L=!1)=>{const{modelValue:N}=n,{lazy:F,multiple:k,checkStrictly:H}=a.value,U=!H;if(!(!o.value||r||!L&&Ms(N,u.value)))if(F&&!P){const $=IV(kbe(Uo(N))).map(ee=>s==null?void 0:s.getNodeByValue(ee)).filter(ee=>!!ee&&!ee.loaded&&!ee.loading);$.length?$.forEach(ee=>{v(ee,()=>T(!1,L))}):T(!0,L)}else{const B=k?Uo(N):[N],$=IV(B.map(ee=>s==null?void 0:s.getNodeByValue(ee,U)));C($,L),u.value=oM(N)}},C=(P,L=!0)=>{const{checkStrictly:N}=a.value,F=f.value,k=P.filter(B=>!!B&&(N||B.isLeaf)),H=s==null?void 0:s.getSameNode(d.value),U=L&&H||k[0];U?U.pathNodes.forEach(B=>g(B,!0)):d.value=null,F.forEach(B=>B.doCheck(!1)),$r(k).forEach(B=>B.doCheck(!0)),f.value=k,cn(E)},E=()=>{Cr&&l.value.forEach(P=>{const L=P==null?void 0:P.$el;if(L){const N=L.querySelector(`.${i.namespace.value}-scrollbar__wrap`),F=L.querySelector(`.${i.b("node")}.${i.is("active")}`)||L.querySelector(`.${i.b("node")}.in-active-path`);UN(N,F)}})},I=P=>{const L=P.target,{code:N}=P;switch(N){case jt.up:case jt.down:{P.preventDefault();const F=N===jt.up?-1:1;JA(Oee(L,F,`.${i.b("node")}[tabindex="-1"]`));break}case jt.left:{P.preventDefault();const F=l.value[MV(L)-1],k=F==null?void 0:F.$el.querySelector(`.${i.b("node")}[aria-expanded="true"]`);JA(k);break}case jt.right:{P.preventDefault();const F=l.value[MV(L)+1],k=F==null?void 0:F.$el.querySelector(`.${i.b("node")}[tabindex="-1"]`);JA(k);break}case jt.enter:case jt.numpadEnter:BEe(L);break}};return pr(uB,$r({config:a,expandingNode:d,checkedNodes:f,isHoverMenu:h,initialLoaded:o,renderLabelFn:p,lazyLoad:v,expandNode:g,handleCheckChange:y})),St([a,()=>n.options],m,{deep:!0,immediate:!0}),St(()=>n.modelValue,()=>{r=!1,T()},{deep:!0}),St(()=>u.value,P=>{Ms(P,n.modelValue)||(e(jn,P),e(si,P))}),dN(()=>l.value=[]),zn(()=>!ql(n.modelValue)&&T()),{ns:i,menuList:l,menus:c,checkedNodes:f,handleKeyDown:I,handleCheckChange:y,getFlattedNodes:b,getCheckedNodes:x,clearCheckedNodes:w,calculateCheckedValue:A,scrollToExpandingNode:E}}});function zEe(n,e,t,r,i,a){const s=Kt("el-cascader-menu");return W(),Se("div",{class:J([n.ns.b("panel"),n.ns.is("bordered",n.border)]),onKeydown:n.handleKeyDown},[(W(!0),Se(on,null,ur(n.menus,(o,l)=>(W(),pt(s,{key:l,ref_for:!0,ref:u=>n.menuList[l]=u,index:l,nodes:[...o]},{empty:Oe(()=>[at(n.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var HEe=$t(UEe,[["render",zEe],["__file","index.vue"]]);const Rte=Bn(HEe),Wf=Vt({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Hd},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),VEe={close:n=>n instanceof MouseEvent,click:n=>n instanceof MouseEvent},$Ee=Ne({name:"ElTag"}),GEe=Ne({...$Ee,props:Wf,emits:VEe,setup(n,{emit:e}){const t=n,r=Ca(),i=kt("tag"),a=V(()=>{const{type:u,hit:c,effect:d,closable:f,round:h}=t;return[i.b(),i.is("closable",f),i.m(u||"primary"),i.m(r.value),i.m(d),i.is("hit",c),i.is("round",h)]}),s=u=>{e("close",u)},o=u=>{e("click",u)},l=u=>{var c,d,f;(f=(d=(c=u==null?void 0:u.component)==null?void 0:c.subTree)==null?void 0:d.component)!=null&&f.bum&&(u.component.subTree.component.bum=null)};return(u,c)=>u.disableTransitions?(W(),Se("span",{key:0,class:J(S(a)),style:Jt({backgroundColor:u.color}),onClick:o},[Ce("span",{class:J(S(i).e("content"))},[at(u.$slots,"default")],2),u.closable?(W(),pt(S(tn),{key:0,class:J(S(i).e("close")),onClick:Tn(s,["stop"])},{default:Oe(()=>[be(S(Fc))]),_:1},8,["class","onClick"])):st("v-if",!0)],6)):(W(),pt(Ka,{key:1,name:`${S(i).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:l},{default:Oe(()=>[Ce("span",{class:J(S(a)),style:Jt({backgroundColor:u.color}),onClick:o},[Ce("span",{class:J(S(i).e("content"))},[at(u.$slots,"default")],2),u.closable?(W(),pt(S(tn),{key:0,class:J(S(i).e("close")),onClick:Tn(s,["stop"])},{default:Oe(()=>[be(S(Fc))]),_:1},8,["class","onClick"])):st("v-if",!0)],6)]),_:3},8,["name"]))}});var WEe=$t(GEe,[["__file","tag.vue"]]);const R1=Bn(WEe),qEe=Vt({...Pte,size:La,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:tt(Function),default:(n,e)=>n.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:tt(Function),default:()=>!0},placement:{type:tt(String),values:ch,default:"bottom-start"},fallbackPlacements:{type:tt(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:os.teleported,tagType:{...Wf.type,default:"info"},tagEffect:{...Wf.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...D_}),jEe={[jn]:n=>!0,[si]:n=>!0,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,visibleChange:n=>mi(n),expandChange:n=>!!n,removeTag:n=>!!n},np=new Map;if(Cr){let n;document.addEventListener("mousedown",e=>n=e),document.addEventListener("mouseup",e=>{if(n){for(const t of np.values())for(const{documentHandler:r}of t)r(e,n);n=void 0}})}function DV(n,e){let t=[];return Ut(e.arg)?t=e.arg:Zl(e.arg)&&t.push(e.arg),function(r,i){const a=e.instance.popperRef,s=r.target,o=i==null?void 0:i.target,l=!e||!e.instance,u=!s||!o,c=n.contains(s)||n.contains(o),d=n===s,f=t.length&&t.some(p=>p==null?void 0:p.contains(s))||t.length&&t.includes(o),h=a&&(a.contains(s)||a.contains(o));l||u||c||d||f||h||e.value(r,i)}}const qf={beforeMount(n,e){np.has(n)||np.set(n,[]),np.get(n).push({documentHandler:DV(n,e),bindingFn:e.value})},updated(n,e){np.has(n)||np.set(n,[]);const t=np.get(n),r=t.findIndex(a=>a.bindingFn===e.oldValue),i={documentHandler:DV(n,e),bindingFn:e.value};r>=0?t.splice(r,1,i):t.push(i)},unmounted(n){np.delete(n)}},KEe="ElCascader",XEe=Ne({name:KEe}),YEe=Ne({...XEe,props:qEe,emits:jEe,setup(n,{expose:e,emit:t}){const r=n,i={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:ve})=>{const{modifiersData:Le,placement:we}=ve;["right","left","bottom","top"].includes(we)||(Le.arrow.x=35)},requires:["arrow"]}]},a=om();let s=0,o=0;const l=kt("cascader"),u=kt("input"),{t:c}=Ar(),{form:d,formItem:f}=Zs(),{valueOnClear:h}=C4(r),{isComposing:p,handleComposition:m}=_w({afterComposition(ve){var Le;const we=(Le=ve.target)==null?void 0:Le.value;G(we)}}),v=ie(null),g=ie(null),y=ie(null),_=ie(null),b=ie(null),x=ie(!1),w=ie(!1),A=ie(!1),T=ie(!1),C=ie(""),E=ie(""),I=ie([]),P=ie([]),L=ie([]),N=V(()=>a.style),F=V(()=>r.disabled||(d==null?void 0:d.disabled)),k=V(()=>r.placeholder||c("el.cascader.placeholder")),H=V(()=>E.value||I.value.length>0||p.value?"":k.value),U=Ca(),B=V(()=>U.value==="small"?"small":"default"),$=V(()=>!!r.props.multiple),ee=V(()=>!r.filterable||$.value),re=V(()=>$.value?E.value:C.value),ne=V(()=>{var ve;return((ve=_.value)==null?void 0:ve.checkedNodes)||[]}),ae=V(()=>!r.clearable||F.value||A.value||!w.value?!1:!!ne.value.length),pe=V(()=>{const{showAllLevels:ve,separator:Le}=r,we=ne.value;return we.length?$.value?"":we[0].calcText(ve,Le):""}),de=V(()=>(f==null?void 0:f.validateState)||""),me=V({get(){return oM(r.modelValue)},set(ve){const Le=ve??h.value;t(jn,Le),t(si,Le),r.validateEvent&&(f==null||f.validate("change").catch(we=>void 0))}}),ke=V(()=>[l.b(),l.m(U.value),l.is("disabled",F.value),a.class]),Be=V(()=>[u.e("icon"),"icon-arrow-down",l.is("reverse",x.value)]),Xe=V(()=>l.is("focus",x.value||T.value)),Ye=V(()=>{var ve,Le;return(Le=(ve=v.value)==null?void 0:ve.popperRef)==null?void 0:Le.contentRef}),Y=ve=>{var Le,we,Ie;F.value||(ve=ve??!x.value,ve!==x.value&&(x.value=ve,(we=(Le=g.value)==null?void 0:Le.input)==null||we.setAttribute("aria-expanded",`${ve}`),ve?(he(),cn((Ie=_.value)==null?void 0:Ie.scrollToExpandingNode)):r.filterable&&Ve(),t("visibleChange",ve)))},he=()=>{cn(()=>{var ve;(ve=v.value)==null||ve.updatePopper()})},le=()=>{A.value=!1},Ke=ve=>{const{showAllLevels:Le,separator:we}=r;return{node:ve,key:ve.uid,text:ve.calcText(Le,we),hitState:!1,closable:!F.value&&!ve.isDisabled,isCollapseTag:!1}},Ue=ve=>{var Le;const we=ve.node;we.doCheck(!1),(Le=_.value)==null||Le.calculateCheckedValue(),t("removeTag",we.valueByOption)},Ze=()=>{if(!$.value)return;const ve=ne.value,Le=[],we=[];if(ve.forEach(Ie=>we.push(Ke(Ie))),P.value=we,ve.length){ve.slice(0,r.maxCollapseTags).forEach(Pe=>Le.push(Ke(Pe)));const Ie=ve.slice(r.maxCollapseTags),wt=Ie.length;wt&&(r.collapseTags?Le.push({key:-1,text:`+ ${wt}`,closable:!1,isCollapseTag:!0}):Ie.forEach(Pe=>Le.push(Ke(Pe))))}I.value=Le},je=()=>{var ve,Le;const{filterMethod:we,showAllLevels:Ie,separator:wt}=r,Pe=(Le=(ve=_.value)==null?void 0:ve.getFlattedNodes(!r.props.checkStrictly))==null?void 0:Le.filter(Rt=>Rt.isDisabled?!1:(Rt.calcText(Ie,wt),we(Rt,re.value)));$.value&&(I.value.forEach(Rt=>{Rt.hitState=!1}),P.value.forEach(Rt=>{Rt.hitState=!1})),A.value=!0,L.value=Pe,he()},He=()=>{var ve;let Le;A.value&&b.value?Le=b.value.$el.querySelector(`.${l.e("suggestion-item")}`):Le=(ve=_.value)==null?void 0:ve.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),Le&&(Le.focus(),!A.value&&Le.click())},ut=()=>{var ve,Le;const we=(ve=g.value)==null?void 0:ve.input,Ie=y.value,wt=(Le=b.value)==null?void 0:Le.$el;if(!(!Cr||!we)){if(wt){const Pe=wt.querySelector(`.${l.e("suggestion-list")}`);Pe.style.minWidth=`${we.offsetWidth}px`}if(Ie){const{offsetHeight:Pe}=Ie,Rt=I.value.length>0?`${Math.max(Pe,s)-2}px`:`${s}px`;we.style.height=Rt,he()}}},ge=ve=>{var Le;return(Le=_.value)==null?void 0:Le.getCheckedNodes(ve)},q=ve=>{he(),t("expandChange",ve)},te=ve=>{if(!p.value)switch(ve.code){case jt.enter:case jt.numpadEnter:Y();break;case jt.down:Y(!0),cn(He),ve.preventDefault();break;case jt.esc:x.value===!0&&(ve.preventDefault(),ve.stopPropagation(),Y(!1));break;case jt.tab:Y(!1);break}},ye=()=>{var ve;(ve=_.value)==null||ve.clearCheckedNodes(),!x.value&&r.filterable&&Ve(),Y(!1),t("clear")},Ve=()=>{const{value:ve}=pe;C.value=ve,E.value=ve},et=ve=>{var Le,we;const{checked:Ie}=ve;$.value?(Le=_.value)==null||Le.handleCheckChange(ve,!Ie,!1):(!Ie&&((we=_.value)==null||we.handleCheckChange(ve,!0,!1)),Y(!1))},At=ve=>{const Le=ve.target,{code:we}=ve;switch(we){case jt.up:case jt.down:{const Ie=we===jt.up?-1:1;JA(Oee(Le,Ie,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case jt.enter:case jt.numpadEnter:Le.click();break}},It=()=>{const ve=I.value,Le=ve[ve.length-1];o=E.value?0:o+1,!(!Le||!o||r.collapseTags&&ve.length>1)&&(Le.hitState?Ue(Le):Le.hitState=!0)},De=ve=>{const Le=ve.target,we=l.e("search-input");Le.className===we&&(T.value=!0),t("focus",ve)},Tt=ve=>{T.value=!1,t("blur",ve)},ot=Cl(()=>{const{value:ve}=re;if(!ve)return;const Le=r.beforeFilter(ve);Bx(Le)?Le.then(je).catch(()=>{}):Le!==!1?je():le()},r.debounce),G=(ve,Le)=>{!x.value&&Y(!0),!(Le!=null&&Le.isComposing)&&(ve?ot():le())},_e=ve=>Number.parseFloat(_Se(u.cssVarName("input-height"),ve).value)-2;return St(A,he),St([ne,F,()=>r.collapseTags],Ze),St(I,()=>{cn(()=>ut())}),St(U,async()=>{await cn();const ve=g.value.input;s=_e(ve)||s,ut()}),St(pe,Ve,{immediate:!0}),zn(()=>{const ve=g.value.input,Le=_e(ve);s=ve.offsetHeight||Le,zi(ve,ut)}),e({getCheckedNodes:ge,cascaderPanelRef:_,togglePopperVisible:Y,contentRef:Ye,presentText:pe}),(ve,Le)=>(W(),pt(S(Ys),{ref_key:"tooltipRef",ref:v,visible:x.value,teleported:ve.teleported,"popper-class":[S(l).e("dropdown"),ve.popperClass],"popper-options":i,"fallback-placements":ve.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:ve.placement,transition:`${S(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:ve.persistent,onHide:le},{default:Oe(()=>[Wn((W(),Se("div",{class:J(S(ke)),style:Jt(S(N)),onClick:()=>Y(S(ee)?void 0:!0),onKeydown:te,onMouseenter:we=>w.value=!0,onMouseleave:we=>w.value=!1},[be(S(_o),{ref_key:"input",ref:g,modelValue:C.value,"onUpdate:modelValue":we=>C.value=we,placeholder:S(H),readonly:S(ee),disabled:S(F),"validate-event":!1,size:S(U),class:J(S(Xe)),tabindex:S($)&&ve.filterable&&!S(F)?-1:void 0,onCompositionstart:S(m),onCompositionupdate:S(m),onCompositionend:S(m),onFocus:De,onBlur:Tt,onInput:G},{suffix:Oe(()=>[S(ae)?(W(),pt(S(tn),{key:"clear",class:J([S(u).e("icon"),"icon-circle-close"]),onClick:Tn(ye,["stop"])},{default:Oe(()=>[be(S(uh))]),_:1},8,["class","onClick"])):(W(),pt(S(tn),{key:"arrow-down",class:J(S(Be)),onClick:Tn(we=>Y(),["stop"])},{default:Oe(()=>[be(S(lh))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),S($)?(W(),Se("div",{key:0,ref_key:"tagWrapper",ref:y,class:J([S(l).e("tags"),S(l).is("validate",!!S(de))])},[(W(!0),Se(on,null,ur(I.value,we=>(W(),pt(S(R1),{key:we.key,type:ve.tagType,size:S(B),effect:ve.tagEffect,hit:we.hitState,closable:we.closable,"disable-transitions":"",onClose:Ie=>Ue(we)},{default:Oe(()=>[we.isCollapseTag===!1?(W(),Se("span",{key:0},Ft(we.text),1)):(W(),pt(S(Ys),{key:1,disabled:x.value||!ve.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:Oe(()=>[Ce("span",null,Ft(we.text),1)]),content:Oe(()=>[Ce("div",{class:J(S(l).e("collapse-tags"))},[(W(!0),Se(on,null,ur(P.value.slice(ve.maxCollapseTags),(Ie,wt)=>(W(),Se("div",{key:wt,class:J(S(l).e("collapse-tag"))},[(W(),pt(S(R1),{key:Ie.key,class:"in-tooltip",type:ve.tagType,size:S(B),effect:ve.tagEffect,hit:Ie.hitState,closable:Ie.closable,"disable-transitions":"",onClose:Pe=>Ue(Ie)},{default:Oe(()=>[Ce("span",null,Ft(Ie.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),ve.filterable&&!S(F)?Wn((W(),Se("input",{key:0,"onUpdate:modelValue":we=>E.value=we,type:"text",class:J(S(l).e("search-input")),placeholder:S(pe)?"":S(k),onInput:we=>G(E.value,we),onClick:Tn(we=>Y(!0),["stop"]),onKeydown:hi(It,["delete"]),onCompositionstart:S(m),onCompositionupdate:S(m),onCompositionend:S(m),onFocus:De,onBlur:Tt},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[v4,E.value]]):st("v-if",!0)],2)):st("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[S(qf),()=>Y(!1),S(Ye)]])]),content:Oe(()=>[Wn(be(S(Rte),{ref_key:"cascaderPanelRef",ref:_,modelValue:S(me),"onUpdate:modelValue":we=>xi(me)?me.value=we:null,options:ve.options,props:r.props,border:!1,"render-label":ve.$slots.default,onExpandChange:q,onClose:we=>ve.$nextTick(()=>Y(!1))},{empty:Oe(()=>[at(ve.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Nr,!A.value]]),ve.filterable?Wn((W(),pt(S(Vd),{key:0,ref_key:"suggestionPanel",ref:b,tag:"ul",class:J(S(l).e("suggestion-panel")),"view-class":S(l).e("suggestion-list"),onKeydown:At},{default:Oe(()=>[L.value.length?(W(!0),Se(on,{key:0},ur(L.value,we=>(W(),Se("li",{key:we.uid,class:J([S(l).e("suggestion-item"),S(l).is("checked",we.checked)]),tabindex:-1,onClick:Ie=>et(we)},[Ce("span",null,Ft(we.text),1),we.checked?(W(),pt(S(tn),{key:0},{default:Oe(()=>[be(S(gw))]),_:1})):st("v-if",!0)],10,["onClick"]))),128)):at(ve.$slots,"empty",{key:1},()=>[Ce("li",{class:J(S(l).e("empty-text"))},Ft(S(c)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Nr,A.value]]):st("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var QEe=$t(YEe,[["__file","cascader.vue"]]);const ZEe=Bn(QEe),JEe=Vt({checked:Boolean,disabled:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),eMe={"update:checked":n=>mi(n),[si]:n=>mi(n)},tMe=Ne({name:"ElCheckTag"}),nMe=Ne({...tMe,props:JEe,emits:eMe,setup(n,{emit:e}){const t=n,r=kt("check-tag"),i=V(()=>t.disabled),a=V(()=>[r.b(),r.is("checked",t.checked),r.is("disabled",i.value),r.m(t.type||"primary")]),s=()=>{if(i.value)return;const o=!t.checked;e(si,o),e("update:checked",o)};return(o,l)=>(W(),Se("span",{class:J(S(a)),onClick:s},[at(o.$slots,"default")],2))}});var rMe=$t(nMe,[["__file","check-tag.vue"]]);const iMe=Bn(rMe),aMe=Vt({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:tt([Number,Object]),default:()=>Ki({})},sm:{type:tt([Number,Object]),default:()=>Ki({})},md:{type:tt([Number,Object]),default:()=>Ki({})},lg:{type:tt([Number,Object]),default:()=>Ki({})},xl:{type:tt([Number,Object]),default:()=>Ki({})}}),kte=Symbol("rowContextKey"),sMe=Ne({name:"ElCol"}),oMe=Ne({...sMe,props:aMe,setup(n){const e=n,{gutter:t}=Yt(kte,{gutter:V(()=>0)}),r=kt("col"),i=V(()=>{const s={};return t.value&&(s.paddingLeft=s.paddingRight=`${t.value/2}px`),s}),a=V(()=>{const s=[];return["span","offset","pull","push"].forEach(u=>{const c=e[u];_n(c)&&(u==="span"?s.push(r.b(`${e[u]}`)):c>0&&s.push(r.b(`${u}-${e[u]}`)))}),["xs","sm","md","lg","xl"].forEach(u=>{_n(e[u])?s.push(r.b(`${u}-${e[u]}`)):er(e[u])&&Object.entries(e[u]).forEach(([c,d])=>{s.push(c!=="span"?r.b(`${u}-${c}-${d}`):r.b(`${u}-${d}`))})}),t.value&&s.push(r.is("guttered")),[r.b(),s]});return(s,o)=>(W(),pt(ir(s.tag),{class:J(S(a)),style:Jt(S(i))},{default:Oe(()=>[at(s.$slots,"default")]),_:3},8,["class","style"]))}});var lMe=$t(oMe,[["__file","col.vue"]]);const uMe=Bn(lMe),PV=n=>_n(n)||ln(n)||Ut(n),cMe=Vt({accordion:Boolean,modelValue:{type:tt([Array,String,Number]),default:()=>Ki([])}}),dMe={[jn]:PV,[si]:PV},Lte=Symbol("collapseContextKey"),fMe=(n,e)=>{const t=ie(vo(n.modelValue)),r=a=>{t.value=a;const s=n.accordion?t.value[0]:t.value;e(jn,s),e(si,s)},i=a=>{if(n.accordion)r([t.value[0]===a?"":a]);else{const s=[...t.value],o=s.indexOf(a);o>-1?s.splice(o,1):s.push(a),r(s)}};return St(()=>n.modelValue,()=>t.value=vo(n.modelValue),{deep:!0}),pr(Lte,{activeNames:t,handleItemClick:i}),{activeNames:t,setActiveNames:r}},hMe=()=>{const n=kt("collapse");return{rootKls:V(()=>n.b())}},pMe=Ne({name:"ElCollapse"}),mMe=Ne({...pMe,props:cMe,emits:dMe,setup(n,{expose:e,emit:t}){const r=n,{activeNames:i,setActiveNames:a}=fMe(r,t),{rootKls:s}=hMe();return e({activeNames:i,setActiveNames:a}),(o,l)=>(W(),Se("div",{class:J(S(s))},[at(o.$slots,"default")],2))}});var vMe=$t(mMe,[["__file","collapse.vue"]]);const gMe=Ne({name:"ElCollapseTransition"}),yMe=Ne({...gMe,setup(n){const e=kt("collapse-transition"),t=i=>{i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom},r={beforeEnter(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.style.height&&(i.dataset.elExistsHeight=i.style.height),i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0},enter(i){requestAnimationFrame(()=>{i.dataset.oldOverflow=i.style.overflow,i.dataset.elExistsHeight?i.style.maxHeight=i.dataset.elExistsHeight:i.scrollHeight!==0?i.style.maxHeight=`${i.scrollHeight}px`:i.style.maxHeight=0,i.style.paddingTop=i.dataset.oldPaddingTop,i.style.paddingBottom=i.dataset.oldPaddingBottom,i.style.overflow="hidden"})},afterEnter(i){i.style.maxHeight="",i.style.overflow=i.dataset.oldOverflow},enterCancelled(i){t(i)},beforeLeave(i){i.dataset||(i.dataset={}),i.dataset.oldPaddingTop=i.style.paddingTop,i.dataset.oldPaddingBottom=i.style.paddingBottom,i.dataset.oldOverflow=i.style.overflow,i.style.maxHeight=`${i.scrollHeight}px`,i.style.overflow="hidden"},leave(i){i.scrollHeight!==0&&(i.style.maxHeight=0,i.style.paddingTop=0,i.style.paddingBottom=0)},afterLeave(i){t(i)},leaveCancelled(i){t(i)}};return(i,a)=>(W(),pt(Ka,lr({name:S(e).b()},Dme(r)),{default:Oe(()=>[at(i.$slots,"default")]),_:3},16,["name"]))}});var _Me=$t(yMe,[["__file","collapse-transition.vue"]]);const L4=Bn(_Me),bMe=Vt({title:{type:String,default:""},name:{type:tt([String,Number]),default:void 0},icon:{type:li,default:jo},disabled:Boolean}),SMe=n=>{const e=Yt(Lte),{namespace:t}=kt("collapse"),r=ie(!1),i=ie(!1),a=KN(),s=V(()=>a.current++),o=V(()=>{var f;return(f=n.name)!=null?f:`${t.value}-id-${a.prefix}-${S(s)}`}),l=V(()=>e==null?void 0:e.activeNames.value.includes(S(o)));return{focusing:r,id:s,isActive:l,handleFocus:()=>{setTimeout(()=>{i.value?i.value=!1:r.value=!0},50)},handleHeaderClick:()=>{n.disabled||(e==null||e.handleItemClick(S(o)),r.value=!1,i.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(S(o))}}},xMe=(n,{focusing:e,isActive:t,id:r})=>{const i=kt("collapse"),a=V(()=>[i.b("item"),i.is("active",S(t)),i.is("disabled",n.disabled)]),s=V(()=>[i.be("item","header"),i.is("active",S(t)),{focusing:S(e)&&!n.disabled}]),o=V(()=>[i.be("item","arrow"),i.is("active",S(t))]),l=V(()=>i.be("item","wrap")),u=V(()=>i.be("item","content")),c=V(()=>i.b(`content-${S(r)}`)),d=V(()=>i.b(`head-${S(r)}`));return{arrowKls:o,headKls:s,rootKls:a,itemWrapperKls:l,itemContentKls:u,scopedContentId:c,scopedHeadId:d}},wMe=Ne({name:"ElCollapseItem"}),TMe=Ne({...wMe,props:bMe,setup(n,{expose:e}){const t=n,{focusing:r,id:i,isActive:a,handleFocus:s,handleHeaderClick:o,handleEnterClick:l}=SMe(t),{arrowKls:u,headKls:c,rootKls:d,itemWrapperKls:f,itemContentKls:h,scopedContentId:p,scopedHeadId:m}=xMe(t,{focusing:r,isActive:a,id:i});return e({isActive:a}),(v,g)=>(W(),Se("div",{class:J(S(d))},[Ce("button",{id:S(m),class:J(S(c)),"aria-expanded":S(a),"aria-controls":S(p),"aria-describedby":S(p),tabindex:v.disabled?-1:0,type:"button",onClick:S(o),onKeydown:hi(Tn(S(l),["stop","prevent"]),["space","enter"]),onFocus:S(s),onBlur:y=>r.value=!1},[at(v.$slots,"title",{},()=>[Xn(Ft(v.title),1)]),at(v.$slots,"icon",{isActive:S(a)},()=>[be(S(tn),{class:J(S(u))},{default:Oe(()=>[(W(),pt(ir(v.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),be(S(L4),null,{default:Oe(()=>[Wn(Ce("div",{id:S(p),role:"region",class:J(S(f)),"aria-hidden":!S(a),"aria-labelledby":S(m)},[Ce("div",{class:J(S(h))},[at(v.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[Nr,S(a)]])]),_:3})],2))}});var Ote=$t(TMe,[["__file","collapse-item.vue"]]);const CMe=Bn(vMe,{CollapseItem:Ote}),AMe=Xi(Ote),EMe=Vt({color:{type:tt(Object),required:!0},vertical:{type:Boolean,default:!1}});let UD=!1;function r2(n,e){if(!Cr)return;const t=function(a){var s;(s=e.drag)==null||s.call(e,a)},r=function(a){var s;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",r),document.onselectstart=null,document.ondragstart=null,UD=!1,(s=e.end)==null||s.call(e,a)},i=function(a){var s;UD||(a.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",r),document.addEventListener("touchmove",t),document.addEventListener("touchend",r),UD=!0,(s=e.start)==null||s.call(e,a))};n.addEventListener("mousedown",i),n.addEventListener("touchstart",i,{passive:!1})}const MMe=(n,e)=>{if(!Cr||!n||!e)return!1;const t=n.getBoundingClientRect();let r;return e instanceof Element?r=e.getBoundingClientRect():r={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<r.bottom&&t.bottom>r.top&&t.right>r.left&&t.left<r.right},RV=n=>{let e=0,t=n;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e},n5=(n,e)=>Math.abs(RV(n)-RV(e)),dB=n=>{let e,t;return n.type==="touchend"?(t=n.changedTouches[0].clientY,e=n.changedTouches[0].clientX):n.type.startsWith("touch")?(t=n.touches[0].clientY,e=n.touches[0].clientX):(t=n.clientY,e=n.clientX),{clientX:e,clientY:t}},IMe=n=>{const e=tr(),{t}=Ar(),r=jr(),i=jr(),a=V(()=>n.color.get("alpha")),s=V(()=>t("el.colorpicker.alphaLabel"));function o(d){var f;d.target!==r.value&&l(d),(f=r.value)==null||f.focus()}function l(d){if(!i.value||!r.value)return;const h=e.vnode.el.getBoundingClientRect(),{clientX:p,clientY:m}=dB(d);if(n.vertical){let v=m-h.top;v=Math.max(r.value.offsetHeight/2,v),v=Math.min(v,h.height-r.value.offsetHeight/2),n.color.set("alpha",Math.round((v-r.value.offsetHeight/2)/(h.height-r.value.offsetHeight)*100))}else{let v=p-h.left;v=Math.max(r.value.offsetWidth/2,v),v=Math.min(v,h.width-r.value.offsetWidth/2),n.color.set("alpha",Math.round((v-r.value.offsetWidth/2)/(h.width-r.value.offsetWidth)*100))}}function u(d){const{code:f,shiftKey:h}=d,p=h?10:1;switch(f){case jt.left:case jt.down:d.preventDefault(),d.stopPropagation(),c(-p);break;case jt.right:case jt.up:d.preventDefault(),d.stopPropagation(),c(p);break}}function c(d){let f=a.value+d;f=f<0?0:f>100?100:f,n.color.set("alpha",f)}return{thumb:r,bar:i,alpha:a,alphaLabel:s,handleDrag:l,handleClick:o,handleKeydown:u}},DMe=(n,{bar:e,thumb:t,handleDrag:r})=>{const i=tr(),a=kt("color-alpha-slider"),s=ie(0),o=ie(0),l=ie();function u(){if(!t.value||n.vertical)return 0;const y=i.vnode.el,_=n.color.get("alpha");return y?Math.round(_*(y.offsetWidth-t.value.offsetWidth/2)/100):0}function c(){if(!t.value)return 0;const y=i.vnode.el;if(!n.vertical)return 0;const _=n.color.get("alpha");return y?Math.round(_*(y.offsetHeight-t.value.offsetHeight/2)/100):0}function d(){if(n.color&&n.color.value){const{r:y,g:_,b}=n.color.toRgb();return`linear-gradient(to right, rgba(${y}, ${_}, ${b}, 0) 0%, rgba(${y}, ${_}, ${b}, 1) 100%)`}return""}function f(){s.value=u(),o.value=c(),l.value=d()}zn(()=>{if(!e.value||!t.value)return;const y={drag:_=>{r(_)},end:_=>{r(_)}};r2(e.value,y),r2(t.value,y),f()}),St(()=>n.color.get("alpha"),()=>f()),St(()=>n.color.value,()=>f());const h=V(()=>[a.b(),a.is("vertical",n.vertical)]),p=V(()=>a.e("bar")),m=V(()=>a.e("thumb")),v=V(()=>({background:l.value})),g=V(()=>({left:ia(s.value),top:ia(o.value)}));return{rootKls:h,barKls:p,barStyle:v,thumbKls:m,thumbStyle:g,update:f}},PMe="ElColorAlphaSlider",RMe=Ne({name:PMe}),kMe=Ne({...RMe,props:EMe,setup(n,{expose:e}){const t=n,{alpha:r,alphaLabel:i,bar:a,thumb:s,handleDrag:o,handleClick:l,handleKeydown:u}=IMe(t),{rootKls:c,barKls:d,barStyle:f,thumbKls:h,thumbStyle:p,update:m}=DMe(t,{bar:a,thumb:s,handleDrag:o});return e({update:m,bar:a,thumb:s}),(v,g)=>(W(),Se("div",{class:J(S(c))},[Ce("div",{ref_key:"bar",ref:a,class:J(S(d)),style:Jt(S(f)),onClick:S(l)},null,14,["onClick"]),Ce("div",{ref_key:"thumb",ref:s,class:J(S(h)),style:Jt(S(p)),"aria-label":S(i),"aria-valuenow":S(r),"aria-orientation":v.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:S(u)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var LMe=$t(kMe,[["__file","alpha-slider.vue"]]);const OMe=Ne({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(n){const e=kt("color-hue-slider"),t=tr(),r=ie(),i=ie(),a=ie(0),s=ie(0),o=V(()=>n.color.get("hue"));St(()=>o.value,()=>{f()});function l(h){h.target!==r.value&&u(h)}function u(h){if(!i.value||!r.value)return;const m=t.vnode.el.getBoundingClientRect(),{clientX:v,clientY:g}=dB(h);let y;if(n.vertical){let _=g-m.top;_=Math.min(_,m.height-r.value.offsetHeight/2),_=Math.max(r.value.offsetHeight/2,_),y=Math.round((_-r.value.offsetHeight/2)/(m.height-r.value.offsetHeight)*360)}else{let _=v-m.left;_=Math.min(_,m.width-r.value.offsetWidth/2),_=Math.max(r.value.offsetWidth/2,_),y=Math.round((_-r.value.offsetWidth/2)/(m.width-r.value.offsetWidth)*360)}n.color.set("hue",y)}function c(){if(!r.value)return 0;const h=t.vnode.el;if(n.vertical)return 0;const p=n.color.get("hue");return h?Math.round(p*(h.offsetWidth-r.value.offsetWidth/2)/360):0}function d(){if(!r.value)return 0;const h=t.vnode.el;if(!n.vertical)return 0;const p=n.color.get("hue");return h?Math.round(p*(h.offsetHeight-r.value.offsetHeight/2)/360):0}function f(){a.value=c(),s.value=d()}return zn(()=>{if(!i.value||!r.value)return;const h={drag:p=>{u(p)},end:p=>{u(p)}};r2(i.value,h),r2(r.value,h),f()}),{bar:i,thumb:r,thumbLeft:a,thumbTop:s,hueValue:o,handleClick:l,update:f,ns:e}}});function NMe(n,e,t,r,i,a){return W(),Se("div",{class:J([n.ns.b(),n.ns.is("vertical",n.vertical)])},[Ce("div",{ref:"bar",class:J(n.ns.e("bar")),onClick:n.handleClick},null,10,["onClick"]),Ce("div",{ref:"thumb",class:J(n.ns.e("thumb")),style:Jt({left:n.thumbLeft+"px",top:n.thumbTop+"px"})},null,6)],2)}var BMe=$t(OMe,[["render",NMe],["__file","hue-slider.vue"]]);const FMe=Vt({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:La,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:os.teleported,predefine:{type:tt(Array)},validateEvent:{type:Boolean,default:!0},...ks(["ariaLabel"])}),UMe={[jn]:n=>ln(n)||es(n),[si]:n=>ln(n)||es(n),activeChange:n=>ln(n)||es(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},Nte=Symbol("colorPickerContextKey"),kV=function(n,e,t){return[n,e*t/((n=(2-e)*t)<1?n:2-n)||0,n/2]},zMe=function(n){return ln(n)&&n.includes(".")&&Number.parseFloat(n)===1},HMe=function(n){return ln(n)&&n.includes("%")},t1=function(n,e){zMe(n)&&(n="100%");const t=HMe(n);return n=Math.min(e,Math.max(0,Number.parseFloat(`${n}`))),t&&(n=Number.parseInt(`${n*e}`,10)/100),Math.abs(n-e)<1e-6?1:n%e/Number.parseFloat(e)},LV={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},tE=n=>{n=Math.min(Math.round(n),255);const e=Math.floor(n/16),t=n%16;return`${LV[e]||e}${LV[t]||t}`},OV=function({r:n,g:e,b:t}){return Number.isNaN(+n)||Number.isNaN(+e)||Number.isNaN(+t)?"":`#${tE(n)}${tE(e)}${tE(t)}`},zD={A:10,B:11,C:12,D:13,E:14,F:15},Cm=function(n){return n.length===2?(zD[n[0].toUpperCase()]||+n[0])*16+(zD[n[1].toUpperCase()]||+n[1]):zD[n[1].toUpperCase()]||+n[1]},VMe=function(n,e,t){e=e/100,t=t/100;let r=e;const i=Math.max(t,.01);t*=2,e*=t<=1?t:2-t,r*=i<=1?i:2-i;const a=(t+e)/2,s=t===0?2*r/(i+r):2*e/(t+e);return{h:n,s:s*100,v:a*100}},NV=(n,e,t)=>{n=t1(n,255),e=t1(e,255),t=t1(t,255);const r=Math.max(n,e,t),i=Math.min(n,e,t);let a;const s=r,o=r-i,l=r===0?0:o/r;if(r===i)a=0;else{switch(r){case n:{a=(e-t)/o+(e<t?6:0);break}case e:{a=(t-n)/o+2;break}case t:{a=(n-e)/o+4;break}}a/=6}return{h:a*360,s:l*100,v:s*100}},Pb=function(n,e,t){n=t1(n,360)*6,e=t1(e,100),t=t1(t,100);const r=Math.floor(n),i=n-r,a=t*(1-e),s=t*(1-i*e),o=t*(1-(1-i)*e),l=r%6,u=[t,s,a,a,o,t][l],c=[o,t,t,s,a,a][l],d=[a,a,o,t,t,s][l];return{r:Math.round(u*255),g:Math.round(c*255),b:Math.round(d*255)}};let JS=class{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const t in e)Ir(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(arguments.length===1&&typeof e=="object"){for(const r in e)Ir(e,r)&&this.set(r,e[r]);return}this[`_${e}`]=t,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return Pb(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const t=(r,i,a)=>{this._hue=Math.max(0,Math.min(360,r)),this._saturation=Math.max(0,Math.min(100,i)),this._value=Math.max(0,Math.min(100,a)),this.doOnChange()};if(e.includes("hsl")){const r=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,a)=>a>2?Number.parseFloat(i):Number.parseInt(i,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:i,s:a,v:s}=VMe(r[0],r[1],r[2]);t(i,a,s)}}else if(e.includes("hsv")){const r=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,a)=>a>2?Number.parseFloat(i):Number.parseInt(i,10));r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3&&t(r[0],r[1],r[2])}else if(e.includes("rgb")){const r=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,a)=>a>2?Number.parseFloat(i):Number.parseInt(i,10));if(r.length===4?this._alpha=Number.parseFloat(r[3])*100:r.length===3&&(this._alpha=100),r.length>=3){const{h:i,s:a,v:s}=NV(r[0],r[1],r[2]);t(i,a,s)}}else if(e.includes("#")){const r=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(r))return;let i,a,s;r.length===3?(i=Cm(r[0]+r[0]),a=Cm(r[1]+r[1]),s=Cm(r[2]+r[2])):(r.length===6||r.length===8)&&(i=Cm(r.slice(0,2)),a=Cm(r.slice(2,4)),s=Cm(r.slice(4,6))),r.length===8?this._alpha=Cm(r.slice(6))/255*100:(r.length===3||r.length===6)&&(this._alpha=100);const{h:o,s:l,v:u}=NV(i,a,s);t(o,l,u)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:t,_value:r,_alpha:i,format:a}=this;if(this.enableAlpha)switch(a){case"hsl":{const s=kV(e,t/100,r/100);this.value=`hsla(${e}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(t)}%, ${Math.round(r)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${OV(Pb(e,t,r))}${tE(i*255/100)}`;break}default:{const{r:s,g:o,b:l}=Pb(e,t,r);this.value=`rgba(${s}, ${o}, ${l}, ${this.get("alpha")/100})`}}else switch(a){case"hsl":{const s=kV(e,t/100,r/100);this.value=`hsl(${e}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(t)}%, ${Math.round(r)}%)`;break}case"rgb":{const{r:s,g:o,b:l}=Pb(e,t,r);this.value=`rgb(${s}, ${o}, ${l})`;break}default:this.value=OV(Pb(e,t,r))}}};const $Me=Ne({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(n){const e=kt("color-predefine"),{currentColor:t}=Yt(Nte),r=ie(a(n.colors,n.color));St(()=>t.value,s=>{const o=new JS;o.fromString(s),r.value.forEach(l=>{l.selected=o.compare(l)})}),vs(()=>{r.value=a(n.colors,n.color)});function i(s){n.color.fromString(n.colors[s])}function a(s,o){return s.map(l=>{const u=new JS;return u.enableAlpha=n.enableAlpha,u.format="rgba",u.fromString(l),u.selected=u.value===o.value,u})}return{rgbaColors:r,handleSelect:i,ns:e}}});function GMe(n,e,t,r,i,a){return W(),Se("div",{class:J(n.ns.b())},[Ce("div",{class:J(n.ns.e("colors"))},[(W(!0),Se(on,null,ur(n.rgbaColors,(s,o)=>(W(),Se("div",{key:n.colors[o],class:J([n.ns.e("color-selector"),n.ns.is("alpha",s._alpha<100),{selected:s.selected}]),onClick:l=>n.handleSelect(o)},[Ce("div",{style:Jt({backgroundColor:s.value})},null,4)],10,["onClick"]))),128))],2)],2)}var WMe=$t($Me,[["render",GMe],["__file","predefine.vue"]]);const qMe=Ne({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(n){const e=kt("color-svpanel"),t=tr(),r=ie(0),i=ie(0),a=ie("hsl(0, 100%, 50%)"),s=V(()=>{const u=n.color.get("hue"),c=n.color.get("value");return{hue:u,value:c}});function o(){const u=n.color.get("saturation"),c=n.color.get("value"),d=t.vnode.el,{clientWidth:f,clientHeight:h}=d;i.value=u*f/100,r.value=(100-c)*h/100,a.value=`hsl(${n.color.get("hue")}, 100%, 50%)`}function l(u){const d=t.vnode.el.getBoundingClientRect(),{clientX:f,clientY:h}=dB(u);let p=f-d.left,m=h-d.top;p=Math.max(0,p),p=Math.min(p,d.width),m=Math.max(0,m),m=Math.min(m,d.height),i.value=p,r.value=m,n.color.set({saturation:p/d.width*100,value:100-m/d.height*100})}return St(()=>s.value,()=>{o()}),zn(()=>{r2(t.vnode.el,{drag:u=>{l(u)},end:u=>{l(u)}}),o()}),{cursorTop:r,cursorLeft:i,background:a,colorValue:s,handleDrag:l,update:o,ns:e}}});function jMe(n,e,t,r,i,a){return W(),Se("div",{class:J(n.ns.b()),style:Jt({backgroundColor:n.background})},[Ce("div",{class:J(n.ns.e("white"))},null,2),Ce("div",{class:J(n.ns.e("black"))},null,2),Ce("div",{class:J(n.ns.e("cursor")),style:Jt({top:n.cursorTop+"px",left:n.cursorLeft+"px"})},[Ce("div")],6)],6)}var KMe=$t(qMe,[["render",jMe],["__file","sv-panel.vue"]]);const XMe=Ne({name:"ElColorPicker"}),YMe=Ne({...XMe,props:FMe,emits:UMe,setup(n,{expose:e,emit:t}){const r=n,{t:i}=Ar(),a=kt("color"),{formItem:s}=Zs(),o=Ca(),l=Js(),{inputId:u,isLabeledByFormItem:c}=ec(r,{formItemContext:s}),d=ie(),f=ie(),h=ie(),p=ie(),m=ie(),v=ie(),{isFocused:g,handleFocus:y,handleBlur:_}=um(m,{beforeFocus(){return l.value},beforeBlur(Be){var Xe;return(Xe=p.value)==null?void 0:Xe.isFocusInsideContent(Be)},afterBlur(){F(!1),B()}});let b=!0;const x=$r(new JS({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue})),w=ie(!1),A=ie(!1),T=ie(""),C=V(()=>!r.modelValue&&!A.value?"transparent":N(x,r.showAlpha)),E=V(()=>!r.modelValue&&!A.value?"":x.value),I=V(()=>c.value?void 0:r.ariaLabel||i("el.colorpicker.defaultLabel")),P=V(()=>c.value?s==null?void 0:s.labelId:void 0),L=V(()=>[a.b("picker"),a.is("disabled",l.value),a.bm("picker",o.value),a.is("focused",g.value)]);function N(Be,Xe){if(!(Be instanceof JS))throw new TypeError("color should be instance of _color Class");const{r:Ye,g:Y,b:he}=Be.toRgb();return Xe?`rgba(${Ye}, ${Y}, ${he}, ${Be.get("alpha")/100})`:`rgb(${Ye}, ${Y}, ${he})`}function F(Be){w.value=Be}const k=Cl(F,100,{leading:!0});function H(){l.value||F(!0)}function U(){k(!1),B()}function B(){cn(()=>{r.modelValue?x.fromString(r.modelValue):(x.value="",cn(()=>{A.value=!1}))})}function $(){l.value||k(!w.value)}function ee(){x.fromString(T.value)}function re(){const Be=x.value;t(jn,Be),t("change",Be),r.validateEvent&&(s==null||s.validate("change").catch(Xe=>void 0)),k(!1),cn(()=>{const Xe=new JS({enableAlpha:r.showAlpha,format:r.colorFormat||"",value:r.modelValue});x.compare(Xe)||B()})}function ne(){k(!1),t(jn,null),t("change",null),r.modelValue!==null&&r.validateEvent&&(s==null||s.validate("change").catch(Be=>void 0)),B()}function ae(){w.value&&(U(),g.value&&me())}function pe(Be){Be.preventDefault(),Be.stopPropagation(),F(!1),B()}function de(Be){switch(Be.code){case jt.enter:case jt.numpadEnter:case jt.space:Be.preventDefault(),Be.stopPropagation(),H(),v.value.focus();break;case jt.esc:pe(Be);break}}function me(){m.value.focus()}function ke(){m.value.blur()}return zn(()=>{r.modelValue&&(T.value=E.value)}),St(()=>r.modelValue,Be=>{Be?Be&&Be!==x.value&&(b=!1,x.fromString(Be)):A.value=!1}),St(()=>[r.colorFormat,r.showAlpha],()=>{x.enableAlpha=r.showAlpha,x.format=r.colorFormat||x.format,x.doOnChange(),t(jn,x.value)}),St(()=>E.value,Be=>{T.value=Be,b&&t("activeChange",Be),b=!0}),St(()=>x.value,()=>{!r.modelValue&&!A.value&&(A.value=!0)}),St(()=>w.value,()=>{cn(()=>{var Be,Xe,Ye;(Be=d.value)==null||Be.update(),(Xe=f.value)==null||Xe.update(),(Ye=h.value)==null||Ye.update()})}),pr(Nte,{currentColor:E}),e({color:x,show:H,hide:U,focus:me,blur:ke}),(Be,Xe)=>(W(),pt(S(Ys),{ref_key:"popper",ref:p,visible:w.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[S(a).be("picker","panel"),S(a).b("dropdown"),Be.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:Be.teleported,transition:`${S(a).namespace.value}-zoom-in-top`,persistent:"",onHide:Ye=>F(!1)},{content:Oe(()=>[Wn((W(),Se("div",{onKeydown:hi(pe,["esc"])},[Ce("div",{class:J(S(a).be("dropdown","main-wrapper"))},[be(BMe,{ref_key:"hue",ref:d,class:"hue-slider",color:S(x),vertical:""},null,8,["color"]),be(KMe,{ref_key:"sv",ref:f,color:S(x)},null,8,["color"])],2),Be.showAlpha?(W(),pt(LMe,{key:0,ref_key:"alpha",ref:h,color:S(x)},null,8,["color"])):st("v-if",!0),Be.predefine?(W(),pt(WMe,{key:1,ref:"predefine","enable-alpha":Be.showAlpha,color:S(x),colors:Be.predefine},null,8,["enable-alpha","color","colors"])):st("v-if",!0),Ce("div",{class:J(S(a).be("dropdown","btns"))},[Ce("span",{class:J(S(a).be("dropdown","value"))},[be(S(_o),{ref_key:"inputRef",ref:v,modelValue:T.value,"onUpdate:modelValue":Ye=>T.value=Ye,"validate-event":!1,size:"small",onKeyup:hi(ee,["enter"]),onBlur:ee},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),be(S(gs),{class:J(S(a).be("dropdown","link-btn")),text:"",size:"small",onClick:ne},{default:Oe(()=>[Xn(Ft(S(i)("el.colorpicker.clear")),1)]),_:1},8,["class"]),be(S(gs),{plain:"",size:"small",class:J(S(a).be("dropdown","btn")),onClick:re},{default:Oe(()=>[Xn(Ft(S(i)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[S(qf),ae]])]),default:Oe(()=>[Ce("div",lr({id:S(u),ref_key:"triggerRef",ref:m},Be.$attrs,{class:S(L),role:"button","aria-label":S(I),"aria-labelledby":S(P),"aria-description":S(i)("el.colorpicker.description",{color:Be.modelValue||""}),"aria-disabled":S(l),tabindex:S(l)?-1:Be.tabindex,onKeydown:de,onFocus:S(y),onBlur:S(_)}),[S(l)?(W(),Se("div",{key:0,class:J(S(a).be("picker","mask"))},null,2)):st("v-if",!0),Ce("div",{class:J(S(a).be("picker","trigger")),onClick:$},[Ce("span",{class:J([S(a).be("picker","color"),S(a).is("alpha",Be.showAlpha)])},[Ce("span",{class:J(S(a).be("picker","color-inner")),style:Jt({backgroundColor:S(C)})},[Wn(be(S(tn),{class:J([S(a).be("picker","icon"),S(a).is("icon-arrow-down")])},{default:Oe(()=>[be(S(lh))]),_:1},8,["class"]),[[Nr,Be.modelValue||A.value]]),Wn(be(S(tn),{class:J([S(a).be("picker","empty"),S(a).is("icon-close")])},{default:Oe(()=>[be(S(Fc))]),_:1},8,["class"]),[[Nr,!Be.modelValue&&!A.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var QMe=$t(YMe,[["__file","color-picker.vue"]]);const ZMe=Bn(QMe),JMe=Vt({a11y:{type:Boolean,default:!0},locale:{type:tt(Object)},size:La,button:{type:tt(Object)},experimentalFeatures:{type:tt(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:tt(Object)},zIndex:Number,namespace:{type:String,default:"el"},...D_}),xc={},e3e=Ne({name:"ElConfigProvider",props:JMe,setup(n,{slots:e}){St(()=>n.message,r=>{Object.assign(xc,r??{})},{immediate:!0,deep:!0});const t=BN(n);return()=>at(e,"default",{config:t==null?void 0:t.value})}}),t3e=Bn(e3e),n3e=Ne({name:"ElContainer"}),r3e=Ne({...n3e,props:{direction:{type:String}},setup(n){const e=n,t=Oa(),r=kt("container"),i=V(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(s=>{const o=s.type.name;return o==="ElHeader"||o==="ElFooter"}):!1);return(a,s)=>(W(),Se("section",{class:J([S(r).b(),S(r).is("vertical",S(i))])},[at(a.$slots,"default")],2))}});var i3e=$t(r3e,[["__file","container.vue"]]);const a3e=Ne({name:"ElAside"}),s3e=Ne({...a3e,props:{width:{type:String,default:null}},setup(n){const e=n,t=kt("aside"),r=V(()=>e.width?t.cssVarBlock({width:e.width}):{});return(i,a)=>(W(),Se("aside",{class:J(S(t).b()),style:Jt(S(r))},[at(i.$slots,"default")],6))}});var Bte=$t(s3e,[["__file","aside.vue"]]);const o3e=Ne({name:"ElFooter"}),l3e=Ne({...o3e,props:{height:{type:String,default:null}},setup(n){const e=n,t=kt("footer"),r=V(()=>e.height?t.cssVarBlock({height:e.height}):{});return(i,a)=>(W(),Se("footer",{class:J(S(t).b()),style:Jt(S(r))},[at(i.$slots,"default")],6))}});var Fte=$t(l3e,[["__file","footer.vue"]]);const u3e=Ne({name:"ElHeader"}),c3e=Ne({...u3e,props:{height:{type:String,default:null}},setup(n){const e=n,t=kt("header"),r=V(()=>e.height?t.cssVarBlock({height:e.height}):{});return(i,a)=>(W(),Se("header",{class:J(S(t).b()),style:Jt(S(r))},[at(i.$slots,"default")],6))}});var Ute=$t(c3e,[["__file","header.vue"]]);const d3e=Ne({name:"ElMain"}),f3e=Ne({...d3e,setup(n){const e=kt("main");return(t,r)=>(W(),Se("main",{class:J(S(e).b())},[at(t.$slots,"default")],2))}});var zte=$t(f3e,[["__file","main.vue"]]);const h3e=Bn(i3e,{Aside:Bte,Footer:Fte,Header:Ute,Main:zte}),p3e=Xi(Bte),m3e=Xi(Fte),v3e=Xi(Ute),g3e=Xi(zte);var Hte={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Al,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,a=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},u=function(v){return(v=+v)+(v>68?1900:2e3)},c=function(v){return function(g){this[v]=+g}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var y=g.match(/([+-]|\d\d)/g),_=60*y[1]+(+y[2]||0);return _===0?0:y[0]==="+"?-_:_}(v)}],f=function(v){var g=l[v];return g&&(g.indexOf?g:g.s.concat(g.f))},h=function(v,g){var y,_=l.meridiem;if(_){for(var b=1;b<=24;b+=1)if(v.indexOf(_(b,0,g))>-1){y=b>12;break}}else y=v===(g?"pm":"PM");return y},p={A:[o,function(v){this.afternoon=h(v,!1)}],a:[o,function(v){this.afternoon=h(v,!0)}],Q:[i,function(v){this.month=3*(v-1)+1}],S:[i,function(v){this.milliseconds=100*+v}],SS:[a,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[a,c("day")],Do:[o,function(v){var g=l.ordinal,y=v.match(/\d+/);if(this.day=y[0],g)for(var _=1;_<=31;_+=1)g(_).replace(/\[|\]/g,"")===v&&(this.day=_)}],w:[s,c("week")],ww:[a,c("week")],M:[s,c("month")],MM:[a,c("month")],MMM:[o,function(v){var g=f("months"),y=(f("monthsShort")||g.map(function(_){return _.slice(0,3)})).indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(v){var g=f("months").indexOf(v)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[a,function(v){this.year=u(v)}],YYYY:[/\d{4}/,c("year")],Z:d,ZZ:d};function m(v){var g,y;g=v,y=l&&l.formats;for(var _=(v=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(E,I,P){var L=P&&P.toUpperCase();return I||y[P]||t[P]||y[L].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(N,F,k){return F||k.slice(1)})})).match(r),b=_.length,x=0;x<b;x+=1){var w=_[x],A=p[w],T=A&&A[0],C=A&&A[1];_[x]=C?{regex:T,parser:C}:w.replace(/^\[|\]$/g,"")}return function(E){for(var I={},P=0,L=0;P<b;P+=1){var N=_[P];if(typeof N=="string")L+=N.length;else{var F=N.regex,k=N.parser,H=E.slice(L),U=F.exec(H)[0];k.call(I,U),E=E.replace(U,"")}}return function(B){var $=B.afternoon;if($!==void 0){var ee=B.hours;$?ee<12&&(B.hours+=12):ee===12&&(B.hours=0),delete B.afternoon}}(I),I}}return function(v,g,y){y.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(u=v.parseTwoDigitYear);var _=g.prototype,b=_.parse;_.parse=function(x){var w=x.date,A=x.utc,T=x.args;this.$u=A;var C=T[1];if(typeof C=="string"){var E=T[2]===!0,I=T[3]===!0,P=E||I,L=T[2];I&&(L=T[2]),l=this.$locale(),!E&&L&&(l=y.Ls[L]),this.$d=function(H,U,B,$){try{if(["x","X"].indexOf(U)>-1)return new Date((U==="X"?1e3:1)*H);var ee=m(U)(H),re=ee.year,ne=ee.month,ae=ee.day,pe=ee.hours,de=ee.minutes,me=ee.seconds,ke=ee.milliseconds,Be=ee.zone,Xe=ee.week,Ye=new Date,Y=ae||(re||ne?1:Ye.getDate()),he=re||Ye.getFullYear(),le=0;re&&!ne||(le=ne>0?ne-1:Ye.getMonth());var Ke,Ue=pe||0,Ze=de||0,je=me||0,He=ke||0;return Be?new Date(Date.UTC(he,le,Y,Ue,Ze,je,He+60*Be.offset*1e3)):B?new Date(Date.UTC(he,le,Y,Ue,Ze,je,He)):(Ke=new Date(he,le,Y,Ue,Ze,je,He),Xe&&(Ke=$(Ke).week(Xe).toDate()),Ke)}catch{return new Date("")}}(w,C,A,y),this.init(),L&&L!==!0&&(this.$L=this.locale(L).$L),P&&w!=this.format(C)&&(this.$d=new Date("")),l={}}else if(C instanceof Array)for(var N=C.length,F=1;F<=N;F+=1){T[1]=C[F-1];var k=y.apply(this,T);if(k.isValid()){this.$d=k.$d,this.$L=k.$L,this.init();break}F===N&&(this.$d=new Date(""))}else b.call(this,x)}}})})(Hte);var y3e=Hte.exports;const fB=Ls(y3e);var Vte={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Al,function(){return function(t,r){var i=r.prototype,a=i.format;i.format=function(s){var o=this,l=this.$locale();if(!this.isValid())return a.bind(this)(s);var u=this.$utils(),c=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return u.s(o.week(),d==="w"?1:2,"0");case"W":case"WW":return u.s(o.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return u.s(String(o.$H===0?24:o.$H),d==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return d}});return a.bind(this)(c)}}})})(Vte);var _3e=Vte.exports;const b3e=Ls(_3e);var $te={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Al,function(){var t="week",r="year";return function(i,a,s){var o=a.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var c=s(this).startOf(r).add(1,r).date(u),d=s(this).endOf(t);if(c.isBefore(d))return 1}var f=s(this).startOf(r).date(u).startOf(t).subtract(1,"millisecond"),h=this.diff(f,t,!0);return h<0?s(this).startOf("week").week():Math.ceil(h)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})($te);var S3e=$te.exports;const x3e=Ls(S3e);var Gte={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Al,function(){return function(t,r){r.prototype.weekYear=function(){var i=this.month(),a=this.week(),s=this.year();return a===1&&i===11?s+1:i===0&&a>=52?s-1:s}}})})(Gte);var w3e=Gte.exports;const T3e=Ls(w3e);var Wte={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Al,function(){return function(t,r,i){r.prototype.dayOfYear=function(a){var s=Math.round((i(this).startOf("day")-i(this).startOf("year"))/864e5)+1;return a==null?s:this.add(a-s,"day")}}})})(Wte);var C3e=Wte.exports;const A3e=Ls(C3e);var qte={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Al,function(){return function(t,r){r.prototype.isSameOrAfter=function(i,a){return this.isSame(i,a)||this.isAfter(i,a)}}})})(qte);var E3e=qte.exports;const M3e=Ls(E3e);var jte={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Al,function(){return function(t,r){r.prototype.isSameOrBefore=function(i,a){return this.isSame(i,a)||this.isBefore(i,a)}}})})(jte);var I3e=jte.exports;const D3e=Ls(I3e),BV=["hours","minutes","seconds"],r5="HH:mm:ss",yy="YYYY-MM-DD",P3e={date:yy,dates:yy,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${yy} ${r5}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:yy,datetimerange:`${yy} ${r5}`},Kte=Vt({disabledHours:{type:tt(Function)},disabledMinutes:{type:tt(Function)},disabledSeconds:{type:tt(Function)}}),Xte=Vt({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),hB=Vt({id:{type:tt([Array,String])},name:{type:tt([Array,String])},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:tt([String,Object]),default:uh},editable:{type:Boolean,default:!0},prefixIcon:{type:tt([String,Object]),default:""},size:La,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:tt(Object),default:()=>({})},modelValue:{type:tt([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:tt([Date,Array])},defaultTime:{type:tt([Date,Array])},isRange:Boolean,...Kte,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:tt([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:tt(String),values:ch,default:"bottom"},fallbackPlacements:{type:tt(Array),default:["bottom","top","right","left"]},...D_,...ks(["ariaLabel"]),showNow:{type:Boolean,default:!0}}),R3e=Vt({id:{type:tt(Array)},name:{type:tt(Array)},modelValue:{type:tt([Array,String])},startPlaceholder:String,endPlaceholder:String}),k3e=Ne({name:"PickerRangeTrigger",inheritAttrs:!1}),L3e=Ne({...k3e,props:R3e,emits:["mouseenter","mouseleave","click","touchstart","focus","blur","startInput","endInput","startChange","endChange"],setup(n,{expose:e,emit:t}){const r=yw(),i=kt("date"),a=kt("range"),s=ie(),o=ie(),{wrapperRef:l,isFocused:u}=um(s),c=b=>{t("click",b)},d=b=>{t("mouseenter",b)},f=b=>{t("mouseleave",b)},h=b=>{t("mouseenter",b)},p=b=>{t("startInput",b)},m=b=>{t("endInput",b)},v=b=>{t("startChange",b)},g=b=>{t("endChange",b)};return e({focus:()=>{var b;(b=s.value)==null||b.focus()},blur:()=>{var b,x;(b=s.value)==null||b.blur(),(x=o.value)==null||x.blur()}}),(b,x)=>(W(),Se("div",{ref_key:"wrapperRef",ref:l,class:J([S(i).is("active",S(u)),b.$attrs.class]),style:Jt(b.$attrs.style),onClick:c,onMouseenter:d,onMouseleave:f,onTouchstartPassive:h},[at(b.$slots,"prefix"),Ce("input",lr(S(r),{id:b.id&&b.id[0],ref_key:"inputRef",ref:s,name:b.name&&b.name[0],placeholder:b.startPlaceholder,value:b.modelValue&&b.modelValue[0],class:S(a).b("input"),onInput:p,onChange:v}),null,16,["id","name","placeholder","value"]),at(b.$slots,"range-separator"),Ce("input",lr(S(r),{id:b.id&&b.id[1],ref_key:"endInputRef",ref:o,name:b.name&&b.name[1],placeholder:b.endPlaceholder,value:b.modelValue&&b.modelValue[1],class:S(a).b("input"),onInput:m,onChange:g}),null,16,["id","name","placeholder","value"]),at(b.$slots,"suffix")],38))}});var O3e=$t(L3e,[["__file","picker-range-trigger.vue"]]);const N3e=Ne({name:"Picker"}),B3e=Ne({...N3e,props:hB,emits:["update:modelValue","change","focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(n,{expose:e,emit:t}){const r=n,i=om(),{lang:a}=Ar(),s=kt("date"),o=kt("input"),l=kt("range"),{form:u,formItem:c}=Zs(),d=Yt("ElPopperOptions",{}),{valueOnClear:f}=C4(r,null),h=ie(),p=ie(),m=ie(!1),v=ie(!1),g=ie(null);let y=!1;const{isFocused:_,handleFocus:b,handleBlur:x}=um(p,{beforeFocus(){return r.readonly||B.value},afterFocus(){m.value=!0},beforeBlur(we){var Ie;return!y&&((Ie=h.value)==null?void 0:Ie.isFocusInsideContent(we))},afterBlur(){ut(),m.value=!1,y=!1,r.validateEvent&&(c==null||c.validate("blur").catch(we=>void 0))}}),w=V(()=>[s.b("editor"),s.bm("editor",r.type),o.e("wrapper"),s.is("disabled",B.value),s.is("active",m.value),l.b("editor"),Ue?l.bm("editor",Ue.value):"",i.class]),A=V(()=>[o.e("icon"),l.e("close-icon"),ke.value?"":l.e("close-icon--hidden")]);St(m,we=>{we?cn(()=>{we&&(g.value=r.modelValue)}):(He.value=null,cn(()=>{T(r.modelValue)}))});const T=(we,Ie)=>{(Ie||!xV(we,g.value))&&(t("change",we),r.validateEvent&&(c==null||c.validate("change").catch(wt=>void 0)))},C=we=>{if(!xV(r.modelValue,we)){let Ie;Ut(we)?Ie=we.map(wt=>TV(wt,r.valueFormat,a.value)):we&&(Ie=TV(we,r.valueFormat,a.value)),t("update:modelValue",we&&Ie,a.value)}},E=we=>{t("keydown",we)},I=V(()=>p.value?Array.from(p.value.$el.querySelectorAll("input")):[]),P=(we,Ie,wt)=>{const Pe=I.value;Pe.length&&(!wt||wt==="min"?(Pe[0].setSelectionRange(we,Ie),Pe[0].focus()):wt==="max"&&(Pe[1].setSelectionRange(we,Ie),Pe[1].focus()))},L=(we="",Ie=!1)=>{m.value=Ie;let wt;Ut(we)?wt=we.map(Pe=>Pe.toDate()):wt=we&&we.toDate(),He.value=null,C(wt)},N=()=>{v.value=!0},F=()=>{t("visible-change",!0)},k=()=>{v.value=!1,m.value=!1,t("visible-change",!1)},H=()=>{m.value=!0},U=()=>{m.value=!1},B=V(()=>r.disabled||(u==null?void 0:u.disabled)),$=V(()=>{let we;if(Xe.value?Tt.value.getDefaultValue&&(we=Tt.value.getDefaultValue()):Ut(r.modelValue)?we=r.modelValue.map(Ie=>wV(Ie,r.valueFormat,a.value)):we=wV(r.modelValue,r.valueFormat,a.value),Tt.value.getRangeAvailableTime){const Ie=Tt.value.getRangeAvailableTime(we);Ms(Ie,we)||(we=Ie,Xe.value||C(MT(we)))}return Ut(we)&&we.some(Ie=>!Ie)&&(we=[]),we}),ee=V(()=>{if(!Tt.value.panelReady)return"";const we=q($.value);return Ut(He.value)?[He.value[0]||we&&we[0]||"",He.value[1]||we&&we[1]||""]:He.value!==null?He.value:!ne.value&&Xe.value||!m.value&&Xe.value?"":we?ae.value||pe.value||de.value?we.join(", "):we:""}),re=V(()=>r.type.includes("time")),ne=V(()=>r.type.startsWith("time")),ae=V(()=>r.type==="dates"),pe=V(()=>r.type==="months"),de=V(()=>r.type==="years"),me=V(()=>r.prefixIcon||(re.value?wee:dxe)),ke=ie(!1),Be=we=>{r.readonly||B.value||(ke.value&&(we.stopPropagation(),Tt.value.handleClear?Tt.value.handleClear():C(f.value),T(f.value,!0),ke.value=!1,k()),t("clear"))},Xe=V(()=>{const{modelValue:we}=r;return!we||Ut(we)&&!we.filter(Boolean).length}),Ye=async we=>{var Ie;r.readonly||B.value||(((Ie=we.target)==null?void 0:Ie.tagName)!=="INPUT"||_.value)&&(m.value=!0)},Y=()=>{r.readonly||B.value||!Xe.value&&r.clearable&&(ke.value=!0)},he=()=>{ke.value=!1},le=we=>{var Ie;r.readonly||B.value||(((Ie=we.touches[0].target)==null?void 0:Ie.tagName)!=="INPUT"||_.value)&&(m.value=!0)},Ke=V(()=>r.type.includes("range")),Ue=Ca(),Ze=V(()=>{var we,Ie;return(Ie=(we=S(h))==null?void 0:we.popperRef)==null?void 0:Ie.contentRef}),je=NN(p,we=>{const Ie=S(Ze),wt=Wo(p);Ie&&(we.target===Ie||we.composedPath().includes(Ie))||we.target===wt||wt&&we.composedPath().includes(wt)||(m.value=!1)});Wr(()=>{je==null||je()});const He=ie(null),ut=()=>{if(He.value){const we=ge(ee.value);we&&te(we)&&(C(MT(we)),He.value=null)}He.value===""&&(C(f.value),T(f.value),He.value=null)},ge=we=>we?Tt.value.parseUserInput(we):null,q=we=>we?Tt.value.formatToString(we):null,te=we=>Tt.value.isValidValue(we),ye=async we=>{if(r.readonly||B.value)return;const{code:Ie}=we;if(E(we),Ie===jt.esc){m.value===!0&&(m.value=!1,we.preventDefault(),we.stopPropagation());return}if(Ie===jt.down&&(Tt.value.handleFocusPicker&&(we.preventDefault(),we.stopPropagation()),m.value===!1&&(m.value=!0,await cn()),Tt.value.handleFocusPicker)){Tt.value.handleFocusPicker();return}if(Ie===jt.tab){y=!0;return}if(Ie===jt.enter||Ie===jt.numpadEnter){(He.value===null||He.value===""||te(ge(ee.value)))&&(ut(),m.value=!1),we.stopPropagation();return}if(He.value){we.stopPropagation();return}Tt.value.handleKeydownInput&&Tt.value.handleKeydownInput(we)},Ve=we=>{He.value=we,m.value||(m.value=!0)},et=we=>{const Ie=we.target;He.value?He.value=[Ie.value,He.value[1]]:He.value=[Ie.value,null]},At=we=>{const Ie=we.target;He.value?He.value=[He.value[0],Ie.value]:He.value=[null,Ie.value]},It=()=>{var we;const Ie=He.value,wt=ge(Ie&&Ie[0]),Pe=S($);if(wt&&wt.isValid()){He.value=[q(wt),((we=ee.value)==null?void 0:we[1])||null];const Rt=[wt,Pe&&(Pe[1]||null)];te(Rt)&&(C(MT(Rt)),He.value=null)}},De=()=>{var we;const Ie=S(He),wt=ge(Ie&&Ie[1]),Pe=S($);if(wt&&wt.isValid()){He.value=[((we=S(ee))==null?void 0:we[0])||null,q(wt)];const Rt=[Pe&&Pe[0],wt];te(Rt)&&(C(MT(Rt)),He.value=null)}},Tt=ie({}),ot=we=>{Tt.value[we[0]]=we[1],Tt.value.panelReady=!0},G=we=>{t("calendar-change",we)},_e=(we,Ie,wt)=>{t("panel-change",we,Ie,wt)},ve=()=>{var we;(we=p.value)==null||we.focus()},Le=()=>{var we;(we=p.value)==null||we.blur()};return pr("EP_PICKER_BASE",{props:r}),e({focus:ve,blur:Le,handleOpen:H,handleClose:U,onPick:L}),(we,Ie)=>(W(),pt(S(Ys),lr({ref_key:"refPopper",ref:h,visible:m.value,effect:"light",pure:"",trigger:"click"},we.$attrs,{role:"dialog",teleported:"",transition:`${S(s).namespace.value}-zoom-in-top`,"popper-class":[`${S(s).namespace.value}-picker__popper`,we.popperClass],"popper-options":S(d),"fallback-placements":we.fallbackPlacements,"gpu-acceleration":!1,placement:we.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:N,onShow:F,onHide:k}),{default:Oe(()=>[S(Ke)?(W(),pt(O3e,{key:1,id:we.id,ref_key:"inputRef",ref:p,"model-value":S(ee),name:we.name,disabled:S(B),readonly:!we.editable||we.readonly,"start-placeholder":we.startPlaceholder,"end-placeholder":we.endPlaceholder,class:J(S(w)),style:Jt(we.$attrs.style),"aria-label":we.ariaLabel,tabindex:we.tabindex,autocomplete:"off",role:"combobox",onClick:Ye,onFocus:S(b),onBlur:S(x),onStartInput:et,onStartChange:It,onEndInput:At,onEndChange:De,onMousedown:Ye,onMouseenter:Y,onMouseleave:he,onTouchstartPassive:le,onKeydown:ye},{prefix:Oe(()=>[S(me)?(W(),pt(S(tn),{key:0,class:J([S(o).e("icon"),S(l).e("icon")])},{default:Oe(()=>[(W(),pt(ir(S(me))))]),_:1},8,["class"])):st("v-if",!0)]),"range-separator":Oe(()=>[at(we.$slots,"range-separator",{},()=>[Ce("span",{class:J(S(l).b("separator"))},Ft(we.rangeSeparator),3)])]),suffix:Oe(()=>[we.clearIcon?(W(),pt(S(tn),{key:0,class:J(S(A)),onMousedown:Tn(S(Jr),["prevent"]),onClick:Be},{default:Oe(()=>[(W(),pt(ir(we.clearIcon)))]),_:1},8,["class","onMousedown"])):st("v-if",!0)]),_:3},8,["id","model-value","name","disabled","readonly","start-placeholder","end-placeholder","class","style","aria-label","tabindex","onFocus","onBlur"])):(W(),pt(S(_o),{key:0,id:we.id,ref_key:"inputRef",ref:p,"container-role":"combobox","model-value":S(ee),name:we.name,size:S(Ue),disabled:S(B),placeholder:we.placeholder,class:J([S(s).b("editor"),S(s).bm("editor",we.type),we.$attrs.class]),style:Jt(we.$attrs.style),readonly:!we.editable||we.readonly||S(ae)||S(pe)||S(de)||we.type==="week","aria-label":we.ariaLabel,tabindex:we.tabindex,"validate-event":!1,onInput:Ve,onFocus:S(b),onBlur:S(x),onKeydown:ye,onChange:ut,onMousedown:Ye,onMouseenter:Y,onMouseleave:he,onTouchstartPassive:le,onClick:Tn(()=>{},["stop"])},{prefix:Oe(()=>[S(me)?(W(),pt(S(tn),{key:0,class:J(S(o).e("icon")),onMousedown:Tn(Ye,["prevent"]),onTouchstartPassive:le},{default:Oe(()=>[(W(),pt(ir(S(me))))]),_:1},8,["class","onMousedown"])):st("v-if",!0)]),suffix:Oe(()=>[ke.value&&we.clearIcon?(W(),pt(S(tn),{key:0,class:J(`${S(o).e("icon")} clear-icon`),onMousedown:Tn(S(Jr),["prevent"]),onClick:Be},{default:Oe(()=>[(W(),pt(ir(we.clearIcon)))]),_:1},8,["class","onMousedown"])):st("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onFocus","onBlur","onClick"]))]),content:Oe(()=>[at(we.$slots,"default",{visible:m.value,actualVisible:v.value,parsedValue:S($),format:we.format,dateFormat:we.dateFormat,timeFormat:we.timeFormat,unlinkPanels:we.unlinkPanels,type:we.type,defaultValue:we.defaultValue,showNow:we.showNow,onPick:L,onSelectRange:P,onSetPickerOption:ot,onCalendarChange:G,onPanelChange:_e,onMousedown:Tn(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var Yte=$t(B3e,[["__file","picker.vue"]]);const F3e=Vt({...Xte,datetimeRole:String,parsedValue:{type:tt(Object)}}),Qte=({getAvailableHours:n,getAvailableMinutes:e,getAvailableSeconds:t})=>{const r=(s,o,l,u)=>{const c={hour:n,minute:e,second:t};let d=s;return["hour","minute","second"].forEach(f=>{if(c[f]){let h;const p=c[f];switch(f){case"minute":{h=p(d.hour(),o,u);break}case"second":{h=p(d.hour(),d.minute(),o,u);break}default:{h=p(o,u);break}}if(h!=null&&h.length&&!h.includes(d[f]())){const m=l?0:h.length-1;d=d[f](h[m])}}}),d},i={};return{timePickerOptions:i,getAvailableTime:r,onSetOption:([s,o])=>{i[s]=o}}},HD=n=>{const e=(r,i)=>r||i,t=r=>r!==!0;return n.map(e).filter(t)},Zte=(n,e,t)=>({getHoursList:(s,o)=>BD(24,n&&(()=>n==null?void 0:n(s,o))),getMinutesList:(s,o,l)=>BD(60,e&&(()=>e==null?void 0:e(s,o,l))),getSecondsList:(s,o,l,u)=>BD(60,t&&(()=>t==null?void 0:t(s,o,l,u)))}),Jte=(n,e,t)=>{const{getHoursList:r,getMinutesList:i,getSecondsList:a}=Zte(n,e,t);return{getAvailableHours:(u,c)=>HD(r(u,c)),getAvailableMinutes:(u,c,d)=>HD(i(u,c,d)),getAvailableSeconds:(u,c,d,f)=>HD(a(u,c,d,f))}},ene=n=>{const e=ie(n.parsedValue);return St(()=>n.visible,t=>{t||(e.value=n.parsedValue)}),e},U3e=Vt({role:{type:String,required:!0},spinnerDate:{type:tt(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:tt(String),default:""},...Kte}),z3e=100,H3e=600,cM={beforeMount(n,e){const t=e.value,{interval:r=z3e,delay:i=H3e}=hn(t)?{}:t;let a,s;const o=()=>hn(t)?t():t.handler(),l=()=>{s&&(clearTimeout(s),s=void 0),a&&(clearInterval(a),a=void 0)};n.addEventListener("mousedown",u=>{u.button===0&&(l(),o(),document.addEventListener("mouseup",()=>l(),{once:!0}),s=setTimeout(()=>{a=setInterval(()=>{o()},r)},i))})}},V3e=Ne({__name:"basic-time-spinner",props:U3e,emits:["change","select-range","set-option"],setup(n,{emit:e}){const t=n,r=Yt("EP_PICKER_BASE"),{isRange:i}=r.props,a=kt("time"),{getHoursList:s,getMinutesList:o,getSecondsList:l}=Zte(t.disabledHours,t.disabledMinutes,t.disabledSeconds);let u=!1;const c=ie(),d=ie(),f=ie(),h=ie(),p={hours:d,minutes:f,seconds:h},m=V(()=>t.showSeconds?BV:BV.slice(0,2)),v=V(()=>{const{spinnerDate:ee}=t,re=ee.hour(),ne=ee.minute(),ae=ee.second();return{hours:re,minutes:ne,seconds:ae}}),g=V(()=>{const{hours:ee,minutes:re}=S(v),{role:ne,spinnerDate:ae}=t,pe=i?void 0:ae;return{hours:s(ne,pe),minutes:o(ee,ne,pe),seconds:l(ee,re,ne,pe)}}),y=V(()=>{const{hours:ee,minutes:re,seconds:ne}=S(v);return{hours:ND(ee,23),minutes:ND(re,59),seconds:ND(ne,59)}}),_=Cl(ee=>{u=!1,w(ee)},200),b=ee=>{if(!!!t.amPmMode)return"";const ne=t.amPmMode==="A";let ae=ee<12?" am":" pm";return ne&&(ae=ae.toUpperCase()),ae},x=ee=>{let re;switch(ee){case"hours":re=[0,2];break;case"minutes":re=[3,5];break;case"seconds":re=[6,8];break}const[ne,ae]=re;e("select-range",ne,ae),c.value=ee},w=ee=>{C(ee,S(v)[ee])},A=()=>{w("hours"),w("minutes"),w("seconds")},T=ee=>ee.querySelector(`.${a.namespace.value}-scrollbar__wrap`),C=(ee,re)=>{if(t.arrowControl)return;const ne=S(p[ee]);ne&&ne.$el&&(T(ne.$el).scrollTop=Math.max(0,re*E(ee)))},E=ee=>{const re=S(p[ee]),ne=re==null?void 0:re.$el.querySelector("li");return ne&&Number.parseFloat(Cf(ne,"height"))||0},I=()=>{L(1)},P=()=>{L(-1)},L=ee=>{c.value||x("hours");const re=c.value,ne=S(v)[re],ae=c.value==="hours"?24:60,pe=N(re,ne,ee,ae);F(re,pe),C(re,pe),cn(()=>x(re))},N=(ee,re,ne,ae)=>{let pe=(re+ne+ae)%ae;const de=S(g)[ee];for(;de[pe]&&pe!==re;)pe=(pe+ne+ae)%ae;return pe},F=(ee,re)=>{if(S(g)[ee][re])return;const{hours:pe,minutes:de,seconds:me}=S(v);let ke;switch(ee){case"hours":ke=t.spinnerDate.hour(re).minute(de).second(me);break;case"minutes":ke=t.spinnerDate.hour(pe).minute(re).second(me);break;case"seconds":ke=t.spinnerDate.hour(pe).minute(de).second(re);break}e("change",ke)},k=(ee,{value:re,disabled:ne})=>{ne||(F(ee,re),x(ee),C(ee,re))},H=ee=>{const re=S(p[ee]);if(!re)return;u=!0,_(ee);const ne=Math.min(Math.round((T(re.$el).scrollTop-(U(ee)*.5-10)/E(ee)+3)/E(ee)),ee==="hours"?23:59);F(ee,ne)},U=ee=>S(p[ee]).$el.offsetHeight,B=()=>{const ee=re=>{const ne=S(p[re]);ne&&ne.$el&&(T(ne.$el).onscroll=()=>{H(re)})};ee("hours"),ee("minutes"),ee("seconds")};zn(()=>{cn(()=>{!t.arrowControl&&B(),A(),t.role==="start"&&x("hours")})});const $=(ee,re)=>{p[re].value=ee??void 0};return e("set-option",[`${t.role}_scrollDown`,L]),e("set-option",[`${t.role}_emitSelectRange`,x]),St(()=>t.spinnerDate,()=>{u||A()}),(ee,re)=>(W(),Se("div",{class:J([S(a).b("spinner"),{"has-seconds":ee.showSeconds}])},[ee.arrowControl?st("v-if",!0):(W(!0),Se(on,{key:0},ur(S(m),ne=>(W(),pt(S(Vd),{key:ne,ref_for:!0,ref:ae=>$(ae,ne),class:J(S(a).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":S(a).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:ae=>x(ne),onMousemove:ae=>w(ne)},{default:Oe(()=>[(W(!0),Se(on,null,ur(S(g)[ne],(ae,pe)=>(W(),Se("li",{key:pe,class:J([S(a).be("spinner","item"),S(a).is("active",pe===S(v)[ne]),S(a).is("disabled",ae)]),onClick:de=>k(ne,{value:pe,disabled:ae})},[ne==="hours"?(W(),Se(on,{key:0},[Xn(Ft(("0"+(ee.amPmMode?pe%12||12:pe)).slice(-2))+Ft(b(pe)),1)],64)):(W(),Se(on,{key:1},[Xn(Ft(("0"+pe).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),ee.arrowControl?(W(!0),Se(on,{key:1},ur(S(m),ne=>(W(),Se("div",{key:ne,class:J([S(a).be("spinner","wrapper"),S(a).is("arrow")]),onMouseenter:ae=>x(ne)},[Wn((W(),pt(S(tn),{class:J(["arrow-up",S(a).be("spinner","arrow")])},{default:Oe(()=>[be(S(zN))]),_:1},8,["class"])),[[S(cM),P]]),Wn((W(),pt(S(tn),{class:J(["arrow-down",S(a).be("spinner","arrow")])},{default:Oe(()=>[be(S(lh))]),_:1},8,["class"])),[[S(cM),I]]),Ce("ul",{class:J(S(a).be("spinner","list"))},[(W(!0),Se(on,null,ur(S(y)[ne],(ae,pe)=>(W(),Se("li",{key:pe,class:J([S(a).be("spinner","item"),S(a).is("active",ae===S(v)[ne]),S(a).is("disabled",S(g)[ne][ae])])},[S(_n)(ae)?(W(),Se(on,{key:0},[ne==="hours"?(W(),Se(on,{key:0},[Xn(Ft(("0"+(ee.amPmMode?ae%12||12:ae)).slice(-2))+Ft(b(ae)),1)],64)):(W(),Se(on,{key:1},[Xn(Ft(("0"+ae).slice(-2)),1)],64))],64)):st("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):st("v-if",!0)],2))}});var i5=$t(V3e,[["__file","basic-time-spinner.vue"]]);const $3e=Ne({__name:"panel-time-pick",props:F3e,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,r=Yt("EP_PICKER_BASE"),{arrowControl:i,disabledHours:a,disabledMinutes:s,disabledSeconds:o,defaultValue:l}=r.props,{getAvailableHours:u,getAvailableMinutes:c,getAvailableSeconds:d}=Jte(a,s,o),f=kt("time"),{t:h,lang:p}=Ar(),m=ie([0,2]),v=ene(t),g=V(()=>ti(t.actualVisible)?`${f.namespace.value}-zoom-in-top`:""),y=V(()=>t.format.includes("ss")),_=V(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),b=U=>{const B=Rn(U).locale(p.value),$=N(B);return B.isSame($)},x=()=>{e("pick",v.value,!1)},w=(U=!1,B=!1)=>{B||e("pick",t.parsedValue,U)},A=U=>{if(!t.visible)return;const B=N(U).millisecond(0);e("pick",B,!0)},T=(U,B)=>{e("select-range",U,B),m.value=[U,B]},C=U=>{const B=[0,3].concat(y.value?[6]:[]),$=["hours","minutes"].concat(y.value?["seconds"]:[]),re=(B.indexOf(m.value[0])+U+B.length)%B.length;I.start_emitSelectRange($[re])},E=U=>{const B=U.code,{left:$,right:ee,up:re,down:ne}=jt;if([$,ee].includes(B)){C(B===$?-1:1),U.preventDefault();return}if([re,ne].includes(B)){const ae=B===re?-1:1;I.start_scrollDown(ae),U.preventDefault();return}},{timePickerOptions:I,onSetOption:P,getAvailableTime:L}=Qte({getAvailableHours:u,getAvailableMinutes:c,getAvailableSeconds:d}),N=U=>L(U,t.datetimeRole||"",!0),F=U=>U?Rn(U,t.format).locale(p.value):null,k=U=>U?U.format(t.format):null,H=()=>Rn(l).locale(p.value);return e("set-picker-option",["isValidValue",b]),e("set-picker-option",["formatToString",k]),e("set-picker-option",["parseUserInput",F]),e("set-picker-option",["handleKeydownInput",E]),e("set-picker-option",["getRangeAvailableTime",N]),e("set-picker-option",["getDefaultValue",H]),(U,B)=>(W(),pt(Ka,{name:S(g)},{default:Oe(()=>[U.actualVisible||U.visible?(W(),Se("div",{key:0,class:J(S(f).b("panel"))},[Ce("div",{class:J([S(f).be("panel","content"),{"has-seconds":S(y)}])},[be(i5,{ref:"spinner",role:U.datetimeRole||"start","arrow-control":S(i),"show-seconds":S(y),"am-pm-mode":S(_),"spinner-date":U.parsedValue,"disabled-hours":S(a),"disabled-minutes":S(s),"disabled-seconds":S(o),onChange:A,onSetOption:S(P),onSelectRange:T},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),Ce("div",{class:J(S(f).be("panel","footer"))},[Ce("button",{type:"button",class:J([S(f).be("panel","btn"),"cancel"]),onClick:x},Ft(S(h)("el.datepicker.cancel")),3),Ce("button",{type:"button",class:J([S(f).be("panel","btn"),"confirm"]),onClick:$=>w()},Ft(S(h)("el.datepicker.confirm")),11,["onClick"])],2)],2)):st("v-if",!0)]),_:1},8,["name"]))}});var dM=$t($3e,[["__file","panel-time-pick.vue"]]);const G3e=Vt({...Xte,parsedValue:{type:tt(Array)}}),W3e=Ne({__name:"panel-time-range",props:G3e,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,r=(Ye,Y)=>{const he=[];for(let le=Ye;le<=Y;le++)he.push(le);return he},{t:i,lang:a}=Ar(),s=kt("time"),o=kt("picker"),l=Yt("EP_PICKER_BASE"),{arrowControl:u,disabledHours:c,disabledMinutes:d,disabledSeconds:f,defaultValue:h}=l.props,p=V(()=>[s.be("range-picker","body"),s.be("panel","content"),s.is("arrow",u),b.value?"has-seconds":""]),m=V(()=>[s.be("range-picker","body"),s.be("panel","content"),s.is("arrow",u),b.value?"has-seconds":""]),v=V(()=>t.parsedValue[0]),g=V(()=>t.parsedValue[1]),y=ene(t),_=()=>{e("pick",y.value,!1)},b=V(()=>t.format.includes("ss")),x=V(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),w=(Ye=!1)=>{e("pick",[v.value,g.value],Ye)},A=Ye=>{E(Ye.millisecond(0),g.value)},T=Ye=>{E(v.value,Ye.millisecond(0))},C=Ye=>{const Y=Ye.map(le=>Rn(le).locale(a.value)),he=ee(Y);return Y[0].isSame(he[0])&&Y[1].isSame(he[1])},E=(Ye,Y)=>{t.visible&&e("pick",[Ye,Y],!0)},I=V(()=>v.value>g.value),P=ie([0,2]),L=(Ye,Y)=>{e("select-range",Ye,Y,"min"),P.value=[Ye,Y]},N=V(()=>b.value?11:8),F=(Ye,Y)=>{e("select-range",Ye,Y,"max");const he=S(N);P.value=[Ye+he,Y+he]},k=Ye=>{const Y=b.value?[0,3,6,11,14,17]:[0,3,8,11],he=["hours","minutes"].concat(b.value?["seconds"]:[]),Ke=(Y.indexOf(P.value[0])+Ye+Y.length)%Y.length,Ue=Y.length/2;Ke<Ue?pe.start_emitSelectRange(he[Ke]):pe.end_emitSelectRange(he[Ke-Ue])},H=Ye=>{const Y=Ye.code,{left:he,right:le,up:Ke,down:Ue}=jt;if([he,le].includes(Y)){k(Y===he?-1:1),Ye.preventDefault();return}if([Ke,Ue].includes(Y)){const Ze=Y===Ke?-1:1,je=P.value[0]<N.value?"start":"end";pe[`${je}_scrollDown`](Ze),Ye.preventDefault();return}},U=(Ye,Y)=>{const he=c?c(Ye):[],le=Ye==="start",Ue=(Y||(le?g.value:v.value)).hour(),Ze=le?r(Ue+1,23):r(0,Ue-1);return DD(he,Ze)},B=(Ye,Y,he)=>{const le=d?d(Ye,Y):[],Ke=Y==="start",Ue=he||(Ke?g.value:v.value),Ze=Ue.hour();if(Ye!==Ze)return le;const je=Ue.minute(),He=Ke?r(je+1,59):r(0,je-1);return DD(le,He)},$=(Ye,Y,he,le)=>{const Ke=f?f(Ye,Y,he):[],Ue=he==="start",Ze=le||(Ue?g.value:v.value),je=Ze.hour(),He=Ze.minute();if(Ye!==je||Y!==He)return Ke;const ut=Ze.second(),ge=Ue?r(ut+1,59):r(0,ut-1);return DD(Ke,ge)},ee=([Ye,Y])=>[de(Ye,"start",!0,Y),de(Y,"end",!1,Ye)],{getAvailableHours:re,getAvailableMinutes:ne,getAvailableSeconds:ae}=Jte(U,B,$),{timePickerOptions:pe,getAvailableTime:de,onSetOption:me}=Qte({getAvailableHours:re,getAvailableMinutes:ne,getAvailableSeconds:ae}),ke=Ye=>Ye?Ut(Ye)?Ye.map(Y=>Rn(Y,t.format).locale(a.value)):Rn(Ye,t.format).locale(a.value):null,Be=Ye=>Ye?Ut(Ye)?Ye.map(Y=>Y.format(t.format)):Ye.format(t.format):null,Xe=()=>{if(Ut(h))return h.map(Y=>Rn(Y).locale(a.value));const Ye=Rn(h).locale(a.value);return[Ye,Ye.add(60,"m")]};return e("set-picker-option",["formatToString",Be]),e("set-picker-option",["parseUserInput",ke]),e("set-picker-option",["isValidValue",C]),e("set-picker-option",["handleKeydownInput",H]),e("set-picker-option",["getDefaultValue",Xe]),e("set-picker-option",["getRangeAvailableTime",ee]),(Ye,Y)=>Ye.actualVisible?(W(),Se("div",{key:0,class:J([S(s).b("range-picker"),S(o).b("panel")])},[Ce("div",{class:J(S(s).be("range-picker","content"))},[Ce("div",{class:J(S(s).be("range-picker","cell"))},[Ce("div",{class:J(S(s).be("range-picker","header"))},Ft(S(i)("el.datepicker.startTime")),3),Ce("div",{class:J(S(p))},[be(i5,{ref:"minSpinner",role:"start","show-seconds":S(b),"am-pm-mode":S(x),"arrow-control":S(u),"spinner-date":S(v),"disabled-hours":U,"disabled-minutes":B,"disabled-seconds":$,onChange:A,onSetOption:S(me),onSelectRange:L},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),Ce("div",{class:J(S(s).be("range-picker","cell"))},[Ce("div",{class:J(S(s).be("range-picker","header"))},Ft(S(i)("el.datepicker.endTime")),3),Ce("div",{class:J(S(m))},[be(i5,{ref:"maxSpinner",role:"end","show-seconds":S(b),"am-pm-mode":S(x),"arrow-control":S(u),"spinner-date":S(g),"disabled-hours":U,"disabled-minutes":B,"disabled-seconds":$,onChange:T,onSetOption:S(me),onSelectRange:F},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),Ce("div",{class:J(S(s).be("panel","footer"))},[Ce("button",{type:"button",class:J([S(s).be("panel","btn"),"cancel"]),onClick:he=>_()},Ft(S(i)("el.datepicker.cancel")),11,["onClick"]),Ce("button",{type:"button",class:J([S(s).be("panel","btn"),"confirm"]),disabled:S(I),onClick:he=>w()},Ft(S(i)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):st("v-if",!0)}});var q3e=$t(W3e,[["__file","panel-time-range.vue"]]);Rn.extend(fB);var j3e=Ne({name:"ElTimePicker",install:null,props:{...hB,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,e){const t=ie(),[r,i]=n.isRange?["timerange",q3e]:["time",dM],a=s=>e.emit("update:modelValue",s);return pr("ElPopperOptions",n.popperOptions),e.expose({focus:()=>{var s;(s=t.value)==null||s.focus()},blur:()=>{var s;(s=t.value)==null||s.blur()},handleOpen:()=>{var s;(s=t.value)==null||s.handleOpen()},handleClose:()=>{var s;(s=t.value)==null||s.handleClose()}}),()=>{var s;const o=(s=n.format)!=null?s:r5;return be(Yte,lr(n,{ref:t,type:r,format:o,"onUpdate:modelValue":a}),{default:l=>be(i,l,null)})}}});const K3e=Bn(j3e),O4=Symbol(),X3e=Vt({...hB,type:{type:tt(String),default:"date"}}),Y3e=["date","dates","year","years","month","months","week","range"],pB=Vt({disabledDate:{type:tt(Function)},date:{type:tt(Object),required:!0},minDate:{type:tt(Object)},maxDate:{type:tt(Object)},parsedValue:{type:tt([Object,Array])},rangeState:{type:tt(Object),default:()=>({endDate:null,selecting:!1})}}),tne=Vt({type:{type:tt(String),required:!0,values:mAe},dateFormat:String,timeFormat:String,showNow:{type:Boolean,default:!0}}),mB=Vt({unlinkPanels:Boolean,parsedValue:{type:tt(Array)}}),vB=n=>({type:String,values:Y3e,default:n}),Q3e=Vt({...tne,parsedValue:{type:tt([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),k1=n=>{if(!Ut(n))return!1;const[e,t]=n;return Rn.isDayjs(e)&&Rn.isDayjs(t)&&e.isSameOrBefore(t)},gB=(n,{lang:e,unit:t,unlinkPanels:r})=>{let i;if(Ut(n)){let[a,s]=n.map(o=>Rn(o).locale(e));return r||(s=a.add(1,t)),[a,s]}else n?i=Rn(n):i=Rn();return i=i.locale(e),[i,i.add(1,t)]},Z3e=(n,e,{columnIndexOffset:t,startDate:r,nextEndDate:i,now:a,unit:s,relativeDateGetter:o,setCellMetadata:l,setRowMetadata:u})=>{for(let c=0;c<n.row;c++){const d=e[c];for(let f=0;f<n.column;f++){let h=d[f+t];h||(h={row:c,column:f,type:"normal",inRange:!1,start:!1,end:!1});const p=c*n.column+f,m=o(p);h.dayjs=m,h.date=m.toDate(),h.timestamp=m.valueOf(),h.type="normal",h.inRange=!!(r&&m.isSameOrAfter(r,s)&&i&&m.isSameOrBefore(i,s))||!!(r&&m.isSameOrBefore(r,s)&&i&&m.isSameOrAfter(i,s)),r!=null&&r.isSameOrAfter(i)?(h.start=!!i&&m.isSame(i,s),h.end=r&&m.isSame(r,s)):(h.start=!!r&&m.isSame(r,s),h.end=!!i&&m.isSame(i,s)),m.isSame(a,s)&&(h.type="today"),l==null||l(h,{rowIndex:c,columnIndex:f}),d[f+t]=h}u==null||u(d)}},fM=(n,e,t)=>{const r=Rn().locale(t).startOf("month").month(e).year(n),i=r.daysInMonth();return xp(i).map(a=>r.add(a,"day").toDate())},i2=(n,e,t,r)=>{const i=Rn().year(n).month(e).startOf("month"),a=fM(n,e,t).find(s=>!(r!=null&&r(s)));return a?Rn(a).locale(t):i.locale(t)},a5=(n,e,t)=>{const r=n.year();if(!(t!=null&&t(n.toDate())))return n.locale(e);const i=n.month();if(!fM(r,i,e).every(t))return i2(r,i,e,t);for(let a=0;a<12;a++)if(!fM(r,a,e).every(t))return i2(r,a,e,t);return n},J3e=Vt({...pB,cellClassName:{type:tt(Function)},showWeekNumber:Boolean,selectionMode:vB("date")}),e4e=["changerange","pick","select"],s5=(n="")=>["normal","today"].includes(n),t4e=(n,e)=>{const{lang:t}=Ar(),r=ie(),i=ie(),a=ie(),s=ie(),o=ie([[],[],[],[],[],[]]);let l=!1;const u=n.date.$locale().weekStart||7,c=n.date.locale("en").localeData().weekdaysShort().map(B=>B.toLowerCase()),d=V(()=>u>3?7-u:-u),f=V(()=>{const B=n.date.startOf("month");return B.subtract(B.day()||7,"day")}),h=V(()=>c.concat(c).slice(u,u+7)),p=V(()=>DJ(S(b)).some(B=>B.isCurrent)),m=V(()=>{const B=n.date.startOf("month"),$=B.day()||7,ee=B.daysInMonth(),re=B.subtract(1,"month").daysInMonth();return{startOfMonthDay:$,dateCountOfMonth:ee,dateCountOfLastMonth:re}}),v=V(()=>n.selectionMode==="dates"?Uo(n.parsedValue):[]),g=(B,{count:$,rowIndex:ee,columnIndex:re})=>{const{startOfMonthDay:ne,dateCountOfMonth:ae,dateCountOfLastMonth:pe}=S(m),de=S(d);if(ee>=0&&ee<=1){const me=ne+de<0?7+ne+de:ne+de;if(re+ee*7>=me)return B.text=$,!0;B.text=pe-(me-re%7)+1+ee*7,B.type="prev-month"}else return $<=ae?B.text=$:(B.text=$-ae,B.type="next-month"),!0;return!1},y=(B,{columnIndex:$,rowIndex:ee},re)=>{const{disabledDate:ne,cellClassName:ae}=n,pe=S(v),de=g(B,{count:re,rowIndex:ee,columnIndex:$}),me=B.dayjs.toDate();return B.selected=pe.find(ke=>ke.isSame(B.dayjs,"day")),B.isSelected=!!B.selected,B.isCurrent=w(B),B.disabled=ne==null?void 0:ne(me),B.customClass=ae==null?void 0:ae(me),de},_=B=>{if(n.selectionMode==="week"){const[$,ee]=n.showWeekNumber?[1,7]:[0,6],re=U(B[$+1]);B[$].inRange=re,B[$].start=re,B[ee].inRange=re,B[ee].end=re}},b=V(()=>{const{minDate:B,maxDate:$,rangeState:ee,showWeekNumber:re}=n,ne=S(d),ae=S(o),pe="day";let de=1;if(re)for(let me=0;me<6;me++)ae[me][0]||(ae[me][0]={type:"week",text:S(f).add(me*7+1,pe).week()});return Z3e({row:6,column:7},ae,{startDate:B,columnIndexOffset:re?1:0,nextEndDate:ee.endDate||$||ee.selecting&&B||null,now:Rn().locale(S(t)).startOf(pe),unit:pe,relativeDateGetter:me=>S(f).add(me-ne,pe),setCellMetadata:(...me)=>{y(...me,de)&&(de+=1)},setRowMetadata:_}),ae});St(()=>n.date,async()=>{var B;(B=S(r))!=null&&B.contains(document.activeElement)&&(await cn(),await x())});const x=async()=>{var B;return(B=S(i))==null?void 0:B.focus()},w=B=>n.selectionMode==="date"&&s5(B.type)&&A(B,n.parsedValue),A=(B,$)=>$?Rn($).locale(S(t)).isSame(n.date.date(Number(B.text)),"day"):!1,T=(B,$)=>{const ee=B*7+($-(n.showWeekNumber?1:0))-S(d);return S(f).add(ee,"day")},C=B=>{var $;if(!n.rangeState.selecting)return;let ee=B.target;if(ee.tagName==="SPAN"&&(ee=($=ee.parentNode)==null?void 0:$.parentNode),ee.tagName==="DIV"&&(ee=ee.parentNode),ee.tagName!=="TD")return;const re=ee.parentNode.rowIndex-1,ne=ee.cellIndex;S(b)[re][ne].disabled||(re!==S(a)||ne!==S(s))&&(a.value=re,s.value=ne,e("changerange",{selecting:!0,endDate:T(re,ne)}))},E=B=>!S(p)&&(B==null?void 0:B.text)===1&&B.type==="normal"||B.isCurrent,I=B=>{l||S(p)||n.selectionMode!=="date"||H(B,!0)},P=B=>{B.target.closest("td")&&(l=!0)},L=B=>{B.target.closest("td")&&(l=!1)},N=B=>{!n.rangeState.selecting||!n.minDate?(e("pick",{minDate:B,maxDate:null}),e("select",!0)):(B>=n.minDate?e("pick",{minDate:n.minDate,maxDate:B}):e("pick",{minDate:B,maxDate:n.minDate}),e("select",!1))},F=B=>{const $=B.week(),ee=`${B.year()}w${$}`;e("pick",{year:B.year(),week:$,value:ee,date:B.startOf("week")})},k=(B,$)=>{const ee=$?Uo(n.parsedValue).filter(re=>(re==null?void 0:re.valueOf())!==B.valueOf()):Uo(n.parsedValue).concat([B]);e("pick",ee)},H=(B,$=!1)=>{const ee=B.target.closest("td");if(!ee)return;const re=ee.parentNode.rowIndex-1,ne=ee.cellIndex,ae=S(b)[re][ne];if(ae.disabled||ae.type==="week")return;const pe=T(re,ne);switch(n.selectionMode){case"range":{N(pe);break}case"date":{e("pick",pe,$);break}case"week":{F(pe);break}case"dates":{k(pe,!!ae.selected);break}}},U=B=>{if(n.selectionMode!=="week")return!1;let $=n.date.startOf("day");if(B.type==="prev-month"&&($=$.subtract(1,"month")),B.type==="next-month"&&($=$.add(1,"month")),$=$.date(Number.parseInt(B.text,10)),n.parsedValue&&!Ut(n.parsedValue)){const ee=(n.parsedValue.day()-u+7)%7-1;return n.parsedValue.subtract(ee,"day").isSame($,"day")}return!1};return{WEEKS:h,rows:b,tbodyRef:r,currentCellRef:i,focus:x,isCurrent:w,isWeekActive:U,isSelectedCell:E,handlePickDate:H,handleMouseUp:L,handleMouseDown:P,handleMouseMove:C,handleFocus:I}},n4e=(n,{isCurrent:e,isWeekActive:t})=>{const r=kt("date-table"),{t:i}=Ar(),a=V(()=>[r.b(),{"is-week-mode":n.selectionMode==="week"}]),s=V(()=>i("el.datepicker.dateTablePrompt")),o=V(()=>i("el.datepicker.week"));return{tableKls:a,tableLabel:s,weekLabel:o,getCellClasses:c=>{const d=[];return s5(c.type)&&!c.disabled?(d.push("available"),c.type==="today"&&d.push("today")):d.push(c.type),e(c)&&d.push("current"),c.inRange&&(s5(c.type)||n.selectionMode==="week")&&(d.push("in-range"),c.start&&d.push("start-date"),c.end&&d.push("end-date")),c.disabled&&d.push("disabled"),c.selected&&d.push("selected"),c.customClass&&d.push(c.customClass),d.join(" ")},getRowKls:c=>[r.e("row"),{current:t(c)}],t:i}},r4e=Vt({cell:{type:tt(Object)}});var yB=Ne({name:"ElDatePickerCell",props:r4e,setup(n){const e=kt("date-table-cell"),{slots:t}=Yt(O4);return()=>{const{cell:r}=n;return at(t,"default",{...r},()=>{var i;return[be("div",{class:e.b()},[be("span",{class:e.e("text")},[(i=r==null?void 0:r.renderText)!=null?i:r==null?void 0:r.text])])]})}}});const i4e=Ne({__name:"basic-date-table",props:J3e,emits:e4e,setup(n,{expose:e,emit:t}){const r=n,{WEEKS:i,rows:a,tbodyRef:s,currentCellRef:o,focus:l,isCurrent:u,isWeekActive:c,isSelectedCell:d,handlePickDate:f,handleMouseUp:h,handleMouseDown:p,handleMouseMove:m,handleFocus:v}=t4e(r,t),{tableLabel:g,tableKls:y,weekLabel:_,getCellClasses:b,getRowKls:x,t:w}=n4e(r,{isCurrent:u,isWeekActive:c});return e({focus:l}),(A,T)=>(W(),Se("table",{"aria-label":S(g),class:J(S(y)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:S(f),onMousemove:S(m),onMousedown:Tn(S(p),["prevent"]),onMouseup:S(h)},[Ce("tbody",{ref_key:"tbodyRef",ref:s},[Ce("tr",null,[A.showWeekNumber?(W(),Se("th",{key:0,scope:"col"},Ft(S(_)),1)):st("v-if",!0),(W(!0),Se(on,null,ur(S(i),(C,E)=>(W(),Se("th",{key:E,"aria-label":S(w)("el.datepicker.weeksFull."+C),scope:"col"},Ft(S(w)("el.datepicker.weeks."+C)),9,["aria-label"]))),128))]),(W(!0),Se(on,null,ur(S(a),(C,E)=>(W(),Se("tr",{key:E,class:J(S(x)(C[1]))},[(W(!0),Se(on,null,ur(C,(I,P)=>(W(),Se("td",{key:`${E}.${P}`,ref_for:!0,ref:L=>S(d)(I)&&(o.value=L),class:J(S(b)(I)),"aria-current":I.isCurrent?"date":void 0,"aria-selected":I.isCurrent,tabindex:S(d)(I)?0:-1,onFocus:S(v)},[be(S(yB),{cell:I},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var o5=$t(i4e,[["__file","basic-date-table.vue"]]);const a4e=Vt({...pB,selectionMode:vB("month")}),s4e=Ne({__name:"basic-month-table",props:a4e,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const r=n,i=kt("month-table"),{t:a,lang:s}=Ar(),o=ie(),l=ie(),u=ie(r.date.locale("en").localeData().monthsShort().map(_=>_.toLowerCase())),c=ie([[],[],[]]),d=ie(),f=ie(),h=V(()=>{var _,b;const x=c.value,w=Rn().locale(s.value).startOf("month");for(let A=0;A<3;A++){const T=x[A];for(let C=0;C<4;C++){const E=T[C]||(T[C]={row:A,column:C,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});E.type="normal";const I=A*4+C,P=r.date.startOf("year").month(I),L=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;E.inRange=!!(r.minDate&&P.isSameOrAfter(r.minDate,"month")&&L&&P.isSameOrBefore(L,"month"))||!!(r.minDate&&P.isSameOrBefore(r.minDate,"month")&&L&&P.isSameOrAfter(L,"month")),(_=r.minDate)!=null&&_.isSameOrAfter(L)?(E.start=!!(L&&P.isSame(L,"month")),E.end=r.minDate&&P.isSame(r.minDate,"month")):(E.start=!!(r.minDate&&P.isSame(r.minDate,"month")),E.end=!!(L&&P.isSame(L,"month"))),w.isSame(P)&&(E.type="today"),E.text=I,E.disabled=((b=r.disabledDate)==null?void 0:b.call(r,P.toDate()))||!1}}return x}),p=()=>{var _;(_=l.value)==null||_.focus()},m=_=>{const b={},x=r.date.year(),w=new Date,A=_.text;return b.disabled=r.disabledDate?fM(x,A,s.value).every(r.disabledDate):!1,b.current=Uo(r.parsedValue).findIndex(T=>Rn.isDayjs(T)&&T.year()===x&&T.month()===A)>=0,b.today=w.getFullYear()===x&&w.getMonth()===A,_.inRange&&(b["in-range"]=!0,_.start&&(b["start-date"]=!0),_.end&&(b["end-date"]=!0)),b},v=_=>{const b=r.date.year(),x=_.text;return Uo(r.date).findIndex(w=>w.year()===b&&w.month()===x)>=0},g=_=>{var b;if(!r.rangeState.selecting)return;let x=_.target;if(x.tagName==="SPAN"&&(x=(b=x.parentNode)==null?void 0:b.parentNode),x.tagName==="DIV"&&(x=x.parentNode),x.tagName!=="TD")return;const w=x.parentNode.rowIndex,A=x.cellIndex;h.value[w][A].disabled||(w!==d.value||A!==f.value)&&(d.value=w,f.value=A,t("changerange",{selecting:!0,endDate:r.date.startOf("year").month(w*4+A)}))},y=_=>{var b;const x=(b=_.target)==null?void 0:b.closest("td");if((x==null?void 0:x.tagName)!=="TD"||ml(x,"disabled"))return;const w=x.cellIndex,T=x.parentNode.rowIndex*4+w,C=r.date.startOf("year").month(T);if(r.selectionMode==="months"){if(_.type==="keydown"){t("pick",Uo(r.parsedValue),!1);return}const E=i2(r.date.year(),T,s.value,r.disabledDate),I=ml(x,"current")?Uo(r.parsedValue).filter(P=>(P==null?void 0:P.month())!==E.month()):Uo(r.parsedValue).concat([Rn(E)]);t("pick",I)}else r.selectionMode==="range"?r.rangeState.selecting?(r.minDate&&C>=r.minDate?t("pick",{minDate:r.minDate,maxDate:C}):t("pick",{minDate:C,maxDate:r.minDate}),t("select",!1)):(t("pick",{minDate:C,maxDate:null}),t("select",!0)):t("pick",T)};return St(()=>r.date,async()=>{var _,b;(_=o.value)!=null&&_.contains(document.activeElement)&&(await cn(),(b=l.value)==null||b.focus())}),e({focus:p}),(_,b)=>(W(),Se("table",{role:"grid","aria-label":S(a)("el.datepicker.monthTablePrompt"),class:J(S(i).b()),onClick:y,onMousemove:g},[Ce("tbody",{ref_key:"tbodyRef",ref:o},[(W(!0),Se(on,null,ur(S(h),(x,w)=>(W(),Se("tr",{key:w},[(W(!0),Se(on,null,ur(x,(A,T)=>(W(),Se("td",{key:T,ref_for:!0,ref:C=>v(A)&&(l.value=C),class:J(m(A)),"aria-selected":`${v(A)}`,"aria-label":S(a)(`el.datepicker.month${+A.text+1}`),tabindex:v(A)?0:-1,onKeydown:[hi(Tn(y,["prevent","stop"]),["space"]),hi(Tn(y,["prevent","stop"]),["enter"])]},[be(S(yB),{cell:{...A,renderText:S(a)("el.datepicker.months."+u.value[A.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var l5=$t(s4e,[["__file","basic-month-table.vue"]]);const o4e=Vt({...pB,selectionMode:vB("year")}),l4e=Ne({__name:"basic-year-table",props:o4e,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const r=n,i=(b,x)=>{const w=Rn(String(b)).locale(x).startOf("year"),T=w.endOf("year").dayOfYear();return xp(T).map(C=>w.add(C,"day").toDate())},a=kt("year-table"),{t:s,lang:o}=Ar(),l=ie(),u=ie(),c=V(()=>Math.floor(r.date.year()/10)*10),d=ie([[],[],[]]),f=ie(),h=ie(),p=V(()=>{var b;const x=d.value,w=Rn().locale(o.value).startOf("year");for(let A=0;A<3;A++){const T=x[A];for(let C=0;C<4&&!(A*4+C>=10);C++){let E=T[C];E||(E={row:A,column:C,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),E.type="normal";const I=A*4+C+c.value,P=Rn().year(I),L=r.rangeState.endDate||r.maxDate||r.rangeState.selecting&&r.minDate||null;E.inRange=!!(r.minDate&&P.isSameOrAfter(r.minDate,"year")&&L&&P.isSameOrBefore(L,"year"))||!!(r.minDate&&P.isSameOrBefore(r.minDate,"year")&&L&&P.isSameOrAfter(L,"year")),(b=r.minDate)!=null&&b.isSameOrAfter(L)?(E.start=!!(L&&P.isSame(L,"year")),E.end=!!(r.minDate&&P.isSame(r.minDate,"year"))):(E.start=!!(r.minDate&&P.isSame(r.minDate,"year")),E.end=!!(L&&P.isSame(L,"year"))),w.isSame(P)&&(E.type="today"),E.text=I;const F=P.toDate();E.disabled=r.disabledDate&&r.disabledDate(F)||!1,T[C]=E}}return x}),m=()=>{var b;(b=u.value)==null||b.focus()},v=b=>{const x={},w=Rn().locale(o.value),A=b.text;return x.disabled=r.disabledDate?i(A,o.value).every(r.disabledDate):!1,x.today=w.year()===A,x.current=Uo(r.parsedValue).findIndex(T=>T.year()===A)>=0,b.inRange&&(x["in-range"]=!0,b.start&&(x["start-date"]=!0),b.end&&(x["end-date"]=!0)),x},g=b=>{const x=b.text;return Uo(r.date).findIndex(w=>w.year()===x)>=0},y=b=>{var x;const w=(x=b.target)==null?void 0:x.closest("td");if(!w||!w.textContent||ml(w,"disabled"))return;const A=w.cellIndex,C=w.parentNode.rowIndex*4+A+c.value,E=Rn().year(C);if(r.selectionMode==="range")r.rangeState.selecting?(r.minDate&&E>=r.minDate?t("pick",{minDate:r.minDate,maxDate:E}):t("pick",{minDate:E,maxDate:r.minDate}),t("select",!1)):(t("pick",{minDate:E,maxDate:null}),t("select",!0));else if(r.selectionMode==="years"){if(b.type==="keydown"){t("pick",Uo(r.parsedValue),!1);return}const I=a5(E.startOf("year"),o.value,r.disabledDate),P=ml(w,"current")?Uo(r.parsedValue).filter(L=>(L==null?void 0:L.year())!==C):Uo(r.parsedValue).concat([I]);t("pick",P)}else t("pick",C)},_=b=>{var x;if(!r.rangeState.selecting)return;const w=(x=b.target)==null?void 0:x.closest("td");if(!w)return;const A=w.parentNode.rowIndex,T=w.cellIndex;p.value[A][T].disabled||(A!==f.value||T!==h.value)&&(f.value=A,h.value=T,t("changerange",{selecting:!0,endDate:Rn().year(c.value).add(A*4+T,"year")}))};return St(()=>r.date,async()=>{var b,x;(b=l.value)!=null&&b.contains(document.activeElement)&&(await cn(),(x=u.value)==null||x.focus())}),e({focus:m}),(b,x)=>(W(),Se("table",{role:"grid","aria-label":S(s)("el.datepicker.yearTablePrompt"),class:J(S(a).b()),onClick:y,onMousemove:_},[Ce("tbody",{ref_key:"tbodyRef",ref:l},[(W(!0),Se(on,null,ur(S(p),(w,A)=>(W(),Se("tr",{key:A},[(W(!0),Se(on,null,ur(w,(T,C)=>(W(),Se("td",{key:`${A}_${C}`,ref_for:!0,ref:E=>g(T)&&(u.value=E),class:J(["available",v(T)]),"aria-selected":g(T),"aria-label":String(T.text),tabindex:g(T)?0:-1,onKeydown:[hi(Tn(y,["prevent","stop"]),["space"]),hi(Tn(y,["prevent","stop"]),["enter"])]},[be(S(yB),{cell:T},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var u5=$t(l4e,[["__file","basic-year-table.vue"]]);const u4e=Ne({__name:"panel-date-pick",props:Q3e,emits:["pick","set-picker-option","panel-change"],setup(n,{emit:e}){const t=n,r=(G,_e,ve)=>!0,i=kt("picker-panel"),a=kt("date-picker"),s=om(),o=Oa(),{t:l,lang:u}=Ar(),c=Yt("EP_PICKER_BASE"),d=Yt(k4),{shortcuts:f,disabledDate:h,cellClassName:p,defaultTime:m}=c.props,v=Kr(c.props,"defaultValue"),g=ie(),y=ie(Rn().locale(u.value)),_=ie(!1);let b=!1;const x=V(()=>Rn(m).locale(u.value)),w=V(()=>y.value.month()),A=V(()=>y.value.year()),T=ie([]),C=ie(null),E=ie(null),I=G=>T.value.length>0?r(G,T.value,t.format||"HH:mm:ss"):!0,P=G=>m&&!Ke.value&&!_.value&&!b?x.value.year(G.year()).month(G.month()).date(G.date()):me.value?G.millisecond(0):G.startOf("day"),L=(G,..._e)=>{if(!G)e("pick",G,..._e);else if(Ut(G)){const ve=G.map(P);e("pick",ve,..._e)}else e("pick",P(G),..._e);C.value=null,E.value=null,_.value=!1,b=!1},N=async(G,_e)=>{if($.value==="date"){G=G;let ve=t.parsedValue?t.parsedValue.year(G.year()).month(G.month()).date(G.date()):G;I(ve)||(ve=T.value[0][0].year(G.year()).month(G.month()).date(G.date())),y.value=ve,L(ve,me.value||_e),t.type==="datetime"&&(await cn(),It())}else $.value==="week"?L(G.date):$.value==="dates"&&L(G,!0)},F=G=>{const _e=G?"add":"subtract";y.value=y.value[_e](1,"month"),ot("month")},k=G=>{const _e=y.value,ve=G?"add":"subtract";y.value=H.value==="year"?_e[ve](10,"year"):_e[ve](1,"year"),ot("year")},H=ie("date"),U=V(()=>{const G=l("el.datepicker.year");if(H.value==="year"){const _e=Math.floor(A.value/10)*10;return G?`${_e} ${G} - ${_e+9} ${G}`:`${_e} - ${_e+9}`}return`${A.value} ${G}`}),B=G=>{const _e=hn(G.value)?G.value():G.value;if(_e){b=!0,L(Rn(_e).locale(u.value));return}G.onClick&&G.onClick({attrs:s,slots:o,emit:e})},$=V(()=>{const{type:G}=t;return["week","month","months","year","years","dates"].includes(G)?G:"date"}),ee=V(()=>$.value==="dates"||$.value==="months"||$.value==="years"),re=V(()=>$.value==="date"?H.value:$.value),ne=V(()=>!!f.length),ae=async(G,_e)=>{$.value==="month"?(y.value=i2(y.value.year(),G,u.value,h),L(y.value,!1)):$.value==="months"?L(G,_e??!0):(y.value=i2(y.value.year(),G,u.value,h),H.value="date",["month","year","date","week"].includes($.value)&&(L(y.value,!0),await cn(),It())),ot("month")},pe=async(G,_e)=>{if($.value==="year"){const ve=y.value.startOf("year").year(G);y.value=a5(ve,u.value,h),L(y.value,!1)}else if($.value==="years")L(G,_e??!0);else{const ve=y.value.year(G);y.value=a5(ve,u.value,h),H.value="month",["month","year","date","week"].includes($.value)&&(L(y.value,!0),await cn(),It())}ot("year")},de=async G=>{H.value=G,await cn(),It()},me=V(()=>t.type==="datetime"||t.type==="datetimerange"),ke=V(()=>{const G=me.value||$.value==="dates",_e=$.value==="years",ve=$.value==="months",Le=H.value==="date",we=H.value==="year",Ie=H.value==="month";return G&&Le||_e&&we||ve&&Ie}),Be=V(()=>h?t.parsedValue?Ut(t.parsedValue)?h(t.parsedValue[0].toDate()):h(t.parsedValue.toDate()):!0:!1),Xe=()=>{if(ee.value)L(t.parsedValue);else{let G=t.parsedValue;if(!G){const _e=Rn(m).locale(u.value),ve=At();G=_e.year(ve.year()).month(ve.month()).date(ve.date())}y.value=G,L(G)}},Ye=V(()=>h?h(Rn().locale(u.value).toDate()):!1),Y=()=>{const _e=Rn().locale(u.value).toDate();_.value=!0,(!h||!h(_e))&&I(_e)&&(y.value=Rn().locale(u.value),L(y.value))},he=V(()=>t.timeFormat||hte(t.format)),le=V(()=>t.dateFormat||fte(t.format)),Ke=V(()=>{if(E.value)return E.value;if(!(!t.parsedValue&&!v.value))return(t.parsedValue||y.value).format(he.value)}),Ue=V(()=>{if(C.value)return C.value;if(!(!t.parsedValue&&!v.value))return(t.parsedValue||y.value).format(le.value)}),Ze=ie(!1),je=()=>{Ze.value=!0},He=()=>{Ze.value=!1},ut=G=>({hour:G.hour(),minute:G.minute(),second:G.second(),year:G.year(),month:G.month(),date:G.date()}),ge=(G,_e,ve)=>{const{hour:Le,minute:we,second:Ie}=ut(G),wt=t.parsedValue?t.parsedValue.hour(Le).minute(we).second(Ie):G;y.value=wt,L(y.value,!0),ve||(Ze.value=_e)},q=G=>{const _e=Rn(G,he.value).locale(u.value);if(_e.isValid()&&I(_e)){const{year:ve,month:Le,date:we}=ut(y.value);y.value=_e.year(ve).month(Le).date(we),E.value=null,Ze.value=!1,L(y.value,!0)}},te=G=>{const _e=Rn(G,le.value).locale(u.value);if(_e.isValid()){if(h&&h(_e.toDate()))return;const{hour:ve,minute:Le,second:we}=ut(y.value);y.value=_e.hour(ve).minute(Le).second(we),C.value=null,L(y.value,!0)}},ye=G=>Rn.isDayjs(G)&&G.isValid()&&(h?!h(G.toDate()):!0),Ve=G=>Ut(G)?G.map(_e=>_e.format(t.format)):G.format(t.format),et=G=>Rn(G,t.format).locale(u.value),At=()=>{const G=Rn(v.value).locale(u.value);if(!v.value){const _e=x.value;return Rn().hour(_e.hour()).minute(_e.minute()).second(_e.second()).locale(u.value)}return G},It=async()=>{var G;["week","month","year","date"].includes($.value)&&((G=g.value)==null||G.focus(),$.value==="week"&&Tt(jt.down))},De=G=>{const{code:_e}=G;[jt.up,jt.down,jt.left,jt.right,jt.home,jt.end,jt.pageUp,jt.pageDown].includes(_e)&&(Tt(_e),G.stopPropagation(),G.preventDefault()),[jt.enter,jt.space,jt.numpadEnter].includes(_e)&&C.value===null&&E.value===null&&(G.preventDefault(),L(y.value,!1))},Tt=G=>{var _e;const{up:ve,down:Le,left:we,right:Ie,home:wt,end:Pe,pageUp:Rt,pageDown:dt}=jt,Mt={year:{[ve]:-4,[Le]:4,[we]:-1,[Ie]:1,offset:(zt,Sn)=>zt.setFullYear(zt.getFullYear()+Sn)},month:{[ve]:-4,[Le]:4,[we]:-1,[Ie]:1,offset:(zt,Sn)=>zt.setMonth(zt.getMonth()+Sn)},week:{[ve]:-1,[Le]:1,[we]:-1,[Ie]:1,offset:(zt,Sn)=>zt.setDate(zt.getDate()+Sn*7)},date:{[ve]:-7,[Le]:7,[we]:-1,[Ie]:1,[wt]:zt=>-zt.getDay(),[Pe]:zt=>-zt.getDay()+6,[Rt]:zt=>-new Date(zt.getFullYear(),zt.getMonth(),0).getDate(),[dt]:zt=>new Date(zt.getFullYear(),zt.getMonth()+1,0).getDate(),offset:(zt,Sn)=>zt.setDate(zt.getDate()+Sn)}},Wt=y.value.toDate();for(;Math.abs(y.value.diff(Wt,"year",!0))<1;){const zt=Mt[re.value];if(!zt)return;if(zt.offset(Wt,hn(zt[G])?zt[G](Wt):(_e=zt[G])!=null?_e:0),h&&h(Wt))break;const Sn=Rn(Wt).locale(u.value);y.value=Sn,e("pick",Sn,!0);break}},ot=G=>{e("panel-change",y.value.toDate(),G,H.value)};return St(()=>$.value,G=>{if(["month","year"].includes(G)){H.value=G;return}else if(G==="years"){H.value="year";return}else if(G==="months"){H.value="month";return}H.value="date"},{immediate:!0}),St(()=>H.value,()=>{d==null||d.updatePopper()}),St(()=>v.value,G=>{G&&(y.value=At())},{immediate:!0}),St(()=>t.parsedValue,G=>{if(G){if(ee.value||Ut(G))return;y.value=G}else y.value=At()},{immediate:!0}),e("set-picker-option",["isValidValue",ye]),e("set-picker-option",["formatToString",Ve]),e("set-picker-option",["parseUserInput",et]),e("set-picker-option",["handleFocusPicker",It]),(G,_e)=>(W(),Se("div",{class:J([S(i).b(),S(a).b(),{"has-sidebar":G.$slots.sidebar||S(ne),"has-time":S(me)}])},[Ce("div",{class:J(S(i).e("body-wrapper"))},[at(G.$slots,"sidebar",{class:J(S(i).e("sidebar"))}),S(ne)?(W(),Se("div",{key:0,class:J(S(i).e("sidebar"))},[(W(!0),Se(on,null,ur(S(f),(ve,Le)=>(W(),Se("button",{key:Le,type:"button",class:J(S(i).e("shortcut")),onClick:we=>B(ve)},Ft(ve.text),11,["onClick"]))),128))],2)):st("v-if",!0),Ce("div",{class:J(S(i).e("body"))},[S(me)?(W(),Se("div",{key:0,class:J(S(a).e("time-header"))},[Ce("span",{class:J(S(a).e("editor-wrap"))},[be(S(_o),{placeholder:S(l)("el.datepicker.selectDate"),"model-value":S(Ue),size:"small","validate-event":!1,onInput:ve=>C.value=ve,onChange:te},null,8,["placeholder","model-value","onInput"])],2),Wn((W(),Se("span",{class:J(S(a).e("editor-wrap"))},[be(S(_o),{placeholder:S(l)("el.datepicker.selectTime"),"model-value":S(Ke),size:"small","validate-event":!1,onFocus:je,onInput:ve=>E.value=ve,onChange:q},null,8,["placeholder","model-value","onInput"]),be(S(dM),{visible:Ze.value,format:S(he),"parsed-value":y.value,onPick:ge},null,8,["visible","format","parsed-value"])],2)),[[S(qf),He]])],2)):st("v-if",!0),Wn(Ce("div",{class:J([S(a).e("header"),(H.value==="year"||H.value==="month")&&S(a).e("header--bordered")])},[Ce("span",{class:J(S(a).e("prev-btn"))},[Ce("button",{type:"button","aria-label":S(l)("el.datepicker.prevYear"),class:J(["d-arrow-left",S(i).e("icon-btn")]),onClick:ve=>k(!1)},[at(G.$slots,"prev-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(zp))]),_:1})])],10,["aria-label","onClick"]),Wn(Ce("button",{type:"button","aria-label":S(l)("el.datepicker.prevMonth"),class:J([S(i).e("icon-btn"),"arrow-left"]),onClick:ve=>F(!1)},[at(G.$slots,"prev-month",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(Up))]),_:1})])],10,["aria-label","onClick"]),[[Nr,H.value==="date"]])],2),Ce("span",{role:"button",class:J(S(a).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:hi(ve=>de("year"),["enter"]),onClick:ve=>de("year")},Ft(S(U)),43,["onKeydown","onClick"]),Wn(Ce("span",{role:"button","aria-live":"polite",tabindex:"0",class:J([S(a).e("header-label"),{active:H.value==="month"}]),onKeydown:hi(ve=>de("month"),["enter"]),onClick:ve=>de("month")},Ft(S(l)(`el.datepicker.month${S(w)+1}`)),43,["onKeydown","onClick"]),[[Nr,H.value==="date"]]),Ce("span",{class:J(S(a).e("next-btn"))},[Wn(Ce("button",{type:"button","aria-label":S(l)("el.datepicker.nextMonth"),class:J([S(i).e("icon-btn"),"arrow-right"]),onClick:ve=>F(!0)},[at(G.$slots,"next-month",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(jo))]),_:1})])],10,["aria-label","onClick"]),[[Nr,H.value==="date"]]),Ce("button",{type:"button","aria-label":S(l)("el.datepicker.nextYear"),class:J([S(i).e("icon-btn"),"d-arrow-right"]),onClick:ve=>k(!0)},[at(G.$slots,"next-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(Hp))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[Nr,H.value!=="time"]]),Ce("div",{class:J(S(i).e("content")),onKeydown:De},[H.value==="date"?(W(),pt(o5,{key:0,ref_key:"currentViewRef",ref:g,"selection-mode":S($),date:y.value,"parsed-value":G.parsedValue,"disabled-date":S(h),"cell-class-name":S(p),onPick:N},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):st("v-if",!0),H.value==="year"?(W(),pt(u5,{key:1,ref_key:"currentViewRef",ref:g,"selection-mode":S($),date:y.value,"disabled-date":S(h),"parsed-value":G.parsedValue,onPick:pe},null,8,["selection-mode","date","disabled-date","parsed-value"])):st("v-if",!0),H.value==="month"?(W(),pt(l5,{key:2,ref_key:"currentViewRef",ref:g,"selection-mode":S($),date:y.value,"parsed-value":G.parsedValue,"disabled-date":S(h),onPick:ae},null,8,["selection-mode","date","parsed-value","disabled-date"])):st("v-if",!0)],34)],2)],2),Wn(Ce("div",{class:J(S(i).e("footer"))},[Wn(be(S(gs),{text:"",size:"small",class:J(S(i).e("link-btn")),disabled:S(Ye),onClick:Y},{default:Oe(()=>[Xn(Ft(S(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[Nr,!S(ee)&&G.showNow]]),be(S(gs),{plain:"",size:"small",class:J(S(i).e("link-btn")),disabled:S(Be),onClick:Xe},{default:Oe(()=>[Xn(Ft(S(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[Nr,S(ke)]])],2))}});var c4e=$t(u4e,[["__file","panel-date-pick.vue"]]);const d4e=Vt({...tne,...mB,visible:Boolean}),nne=n=>{const{emit:e}=tr(),t=om(),r=Oa();return a=>{const s=hn(a.value)?a.value():a.value;if(s){e("pick",[Rn(s[0]).locale(n.value),Rn(s[1]).locale(n.value)]);return}a.onClick&&a.onClick({attrs:t,slots:r,emit:e})}},rne=(n,{defaultValue:e,leftDate:t,rightDate:r,unit:i,onParsedValueChanged:a})=>{const{emit:s}=tr(),{pickerNs:o}=Yt(O4),l=kt("date-range-picker"),{t:u,lang:c}=Ar(),d=nne(c),f=ie(),h=ie(),p=ie({endDate:null,selecting:!1}),m=b=>{p.value=b},v=(b=!1)=>{const x=S(f),w=S(h);k1([x,w])&&s("pick",[x,w],b)},g=b=>{p.value.selecting=b,b||(p.value.endDate=null)},y=b=>{if(Ut(b)&&b.length===2){const[x,w]=b;f.value=x,t.value=x,h.value=w,a(S(f),S(h))}else _()},_=()=>{const[b,x]=gB(S(e),{lang:S(c),unit:i,unlinkPanels:n.unlinkPanels});f.value=void 0,h.value=void 0,t.value=b,r.value=x};return St(e,b=>{b&&_()},{immediate:!0}),St(()=>n.parsedValue,y,{immediate:!0}),{minDate:f,maxDate:h,rangeState:p,lang:c,ppNs:o,drpNs:l,handleChangeRange:m,handleRangeConfirm:v,handleShortcutClick:d,onSelect:g,onReset:y,t:u}},IT="month",f4e=Ne({__name:"panel-date-range",props:d4e,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(n,{emit:e}){const t=n,r=Yt("EP_PICKER_BASE"),{disabledDate:i,cellClassName:a,defaultTime:s,clearable:o}=r.props,l=Kr(r.props,"format"),u=Kr(r.props,"shortcuts"),c=Kr(r.props,"defaultValue"),{lang:d}=Ar(),f=ie(Rn().locale(d.value)),h=ie(Rn().locale(d.value).add(1,IT)),{minDate:p,maxDate:m,rangeState:v,ppNs:g,drpNs:y,handleChangeRange:_,handleRangeConfirm:b,handleShortcutClick:x,onSelect:w,onReset:A,t:T}=rne(t,{defaultValue:c,leftDate:f,rightDate:h,unit:IT,onParsedValueChanged:_e});St(()=>t.visible,ve=>{!ve&&v.value.selecting&&(A(t.parsedValue),w(!1))});const C=ie({min:null,max:null}),E=ie({min:null,max:null}),I=V(()=>`${f.value.year()} ${T("el.datepicker.year")} ${T(`el.datepicker.month${f.value.month()+1}`)}`),P=V(()=>`${h.value.year()} ${T("el.datepicker.year")} ${T(`el.datepicker.month${h.value.month()+1}`)}`),L=V(()=>f.value.year()),N=V(()=>f.value.month()),F=V(()=>h.value.year()),k=V(()=>h.value.month()),H=V(()=>!!u.value.length),U=V(()=>C.value.min!==null?C.value.min:p.value?p.value.format(ne.value):""),B=V(()=>C.value.max!==null?C.value.max:m.value||p.value?(m.value||p.value).format(ne.value):""),$=V(()=>E.value.min!==null?E.value.min:p.value?p.value.format(re.value):""),ee=V(()=>E.value.max!==null?E.value.max:m.value||p.value?(m.value||p.value).format(re.value):""),re=V(()=>t.timeFormat||hte(l.value)),ne=V(()=>t.dateFormat||fte(l.value)),ae=ve=>k1(ve)&&(i?!i(ve[0].toDate())&&!i(ve[1].toDate()):!0),pe=()=>{f.value=f.value.subtract(1,"year"),t.unlinkPanels||(h.value=f.value.add(1,"month")),he("year")},de=()=>{f.value=f.value.subtract(1,"month"),t.unlinkPanels||(h.value=f.value.add(1,"month")),he("month")},me=()=>{t.unlinkPanels?h.value=h.value.add(1,"year"):(f.value=f.value.add(1,"year"),h.value=f.value.add(1,"month")),he("year")},ke=()=>{t.unlinkPanels?h.value=h.value.add(1,"month"):(f.value=f.value.add(1,"month"),h.value=f.value.add(1,"month")),he("month")},Be=()=>{f.value=f.value.add(1,"year"),he("year")},Xe=()=>{f.value=f.value.add(1,"month"),he("month")},Ye=()=>{h.value=h.value.subtract(1,"year"),he("year")},Y=()=>{h.value=h.value.subtract(1,"month"),he("month")},he=ve=>{e("panel-change",[f.value.toDate(),h.value.toDate()],ve)},le=V(()=>{const ve=(N.value+1)%12,Le=N.value+1>=12?1:0;return t.unlinkPanels&&new Date(L.value+Le,ve)<new Date(F.value,k.value)}),Ke=V(()=>t.unlinkPanels&&F.value*12+k.value-(L.value*12+N.value+1)>=12),Ue=V(()=>!(p.value&&m.value&&!v.value.selecting&&k1([p.value,m.value]))),Ze=V(()=>t.type==="datetime"||t.type==="datetimerange"),je=(ve,Le)=>{if(ve)return s?Rn(s[Le]||s).locale(d.value).year(ve.year()).month(ve.month()).date(ve.date()):ve},He=(ve,Le=!0)=>{const we=ve.minDate,Ie=ve.maxDate,wt=je(we,0),Pe=je(Ie,1);m.value===Pe&&p.value===wt||(e("calendar-change",[we.toDate(),Ie&&Ie.toDate()]),m.value=Pe,p.value=wt,!(!Le||Ze.value)&&b())},ut=ie(!1),ge=ie(!1),q=()=>{ut.value=!1},te=()=>{ge.value=!1},ye=(ve,Le)=>{C.value[Le]=ve;const we=Rn(ve,ne.value).locale(d.value);if(we.isValid()){if(i&&i(we.toDate()))return;Le==="min"?(f.value=we,p.value=(p.value||f.value).year(we.year()).month(we.month()).date(we.date()),!t.unlinkPanels&&(!m.value||m.value.isBefore(p.value))&&(h.value=we.add(1,"month"),m.value=p.value.add(1,"month"))):(h.value=we,m.value=(m.value||h.value).year(we.year()).month(we.month()).date(we.date()),!t.unlinkPanels&&(!p.value||p.value.isAfter(m.value))&&(f.value=we.subtract(1,"month"),p.value=m.value.subtract(1,"month")))}},Ve=(ve,Le)=>{C.value[Le]=null},et=(ve,Le)=>{E.value[Le]=ve;const we=Rn(ve,re.value).locale(d.value);we.isValid()&&(Le==="min"?(ut.value=!0,p.value=(p.value||f.value).hour(we.hour()).minute(we.minute()).second(we.second())):(ge.value=!0,m.value=(m.value||h.value).hour(we.hour()).minute(we.minute()).second(we.second()),h.value=m.value))},At=(ve,Le)=>{E.value[Le]=null,Le==="min"?(f.value=p.value,ut.value=!1,(!m.value||m.value.isBefore(p.value))&&(m.value=p.value)):(h.value=m.value,ge.value=!1,m.value&&m.value.isBefore(p.value)&&(p.value=m.value))},It=(ve,Le,we)=>{E.value.min||(ve&&(f.value=ve,p.value=(p.value||f.value).hour(ve.hour()).minute(ve.minute()).second(ve.second())),we||(ut.value=Le),(!m.value||m.value.isBefore(p.value))&&(m.value=p.value,h.value=ve))},De=(ve,Le,we)=>{E.value.max||(ve&&(h.value=ve,m.value=(m.value||h.value).hour(ve.hour()).minute(ve.minute()).second(ve.second())),we||(ge.value=Le),m.value&&m.value.isBefore(p.value)&&(p.value=m.value))},Tt=()=>{f.value=gB(S(c),{lang:S(d),unit:"month",unlinkPanels:t.unlinkPanels})[0],h.value=f.value.add(1,"month"),m.value=void 0,p.value=void 0,e("pick",null)},ot=ve=>Ut(ve)?ve.map(Le=>Le.format(l.value)):ve.format(l.value),G=ve=>Ut(ve)?ve.map(Le=>Rn(Le,l.value).locale(d.value)):Rn(ve,l.value).locale(d.value);function _e(ve,Le){if(t.unlinkPanels&&Le){const we=(ve==null?void 0:ve.year())||0,Ie=(ve==null?void 0:ve.month())||0,wt=Le.year(),Pe=Le.month();h.value=we===wt&&Ie===Pe?Le.add(1,IT):Le}else h.value=f.value.add(1,IT),Le&&(h.value=h.value.hour(Le.hour()).minute(Le.minute()).second(Le.second()))}return e("set-picker-option",["isValidValue",ae]),e("set-picker-option",["parseUserInput",G]),e("set-picker-option",["formatToString",ot]),e("set-picker-option",["handleClear",Tt]),(ve,Le)=>(W(),Se("div",{class:J([S(g).b(),S(y).b(),{"has-sidebar":ve.$slots.sidebar||S(H),"has-time":S(Ze)}])},[Ce("div",{class:J(S(g).e("body-wrapper"))},[at(ve.$slots,"sidebar",{class:J(S(g).e("sidebar"))}),S(H)?(W(),Se("div",{key:0,class:J(S(g).e("sidebar"))},[(W(!0),Se(on,null,ur(S(u),(we,Ie)=>(W(),Se("button",{key:Ie,type:"button",class:J(S(g).e("shortcut")),onClick:wt=>S(x)(we)},Ft(we.text),11,["onClick"]))),128))],2)):st("v-if",!0),Ce("div",{class:J(S(g).e("body"))},[S(Ze)?(W(),Se("div",{key:0,class:J(S(y).e("time-header"))},[Ce("span",{class:J(S(y).e("editors-wrap"))},[Ce("span",{class:J(S(y).e("time-picker-wrap"))},[be(S(_o),{size:"small",disabled:S(v).selecting,placeholder:S(T)("el.datepicker.startDate"),class:J(S(y).e("editor")),"model-value":S(U),"validate-event":!1,onInput:we=>ye(we,"min"),onChange:we=>Ve(we,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),Wn((W(),Se("span",{class:J(S(y).e("time-picker-wrap"))},[be(S(_o),{size:"small",class:J(S(y).e("editor")),disabled:S(v).selecting,placeholder:S(T)("el.datepicker.startTime"),"model-value":S($),"validate-event":!1,onFocus:we=>ut.value=!0,onInput:we=>et(we,"min"),onChange:we=>At(we,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),be(S(dM),{visible:ut.value,format:S(re),"datetime-role":"start","parsed-value":f.value,onPick:It},null,8,["visible","format","parsed-value"])],2)),[[S(qf),q]])],2),Ce("span",null,[be(S(tn),null,{default:Oe(()=>[be(S(jo))]),_:1})]),Ce("span",{class:J([S(y).e("editors-wrap"),"is-right"])},[Ce("span",{class:J(S(y).e("time-picker-wrap"))},[be(S(_o),{size:"small",class:J(S(y).e("editor")),disabled:S(v).selecting,placeholder:S(T)("el.datepicker.endDate"),"model-value":S(B),readonly:!S(p),"validate-event":!1,onInput:we=>ye(we,"max"),onChange:we=>Ve(we,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),Wn((W(),Se("span",{class:J(S(y).e("time-picker-wrap"))},[be(S(_o),{size:"small",class:J(S(y).e("editor")),disabled:S(v).selecting,placeholder:S(T)("el.datepicker.endTime"),"model-value":S(ee),readonly:!S(p),"validate-event":!1,onFocus:we=>S(p)&&(ge.value=!0),onInput:we=>et(we,"max"),onChange:we=>At(we,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),be(S(dM),{"datetime-role":"end",visible:ge.value,format:S(re),"parsed-value":h.value,onPick:De},null,8,["visible","format","parsed-value"])],2)),[[S(qf),te]])],2)],2)):st("v-if",!0),Ce("div",{class:J([[S(g).e("content"),S(y).e("content")],"is-left"])},[Ce("div",{class:J(S(y).e("header"))},[Ce("button",{type:"button",class:J([S(g).e("icon-btn"),"d-arrow-left"]),"aria-label":S(T)("el.datepicker.prevYear"),onClick:pe},[at(ve.$slots,"prev-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(zp))]),_:1})])],10,["aria-label"]),Ce("button",{type:"button",class:J([S(g).e("icon-btn"),"arrow-left"]),"aria-label":S(T)("el.datepicker.prevMonth"),onClick:de},[at(ve.$slots,"prev-month",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(Up))]),_:1})])],10,["aria-label"]),ve.unlinkPanels?(W(),Se("button",{key:0,type:"button",disabled:!S(Ke),class:J([[S(g).e("icon-btn"),{"is-disabled":!S(Ke)}],"d-arrow-right"]),"aria-label":S(T)("el.datepicker.nextYear"),onClick:Be},[at(ve.$slots,"next-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(Hp))]),_:1})])],10,["disabled","aria-label"])):st("v-if",!0),ve.unlinkPanels?(W(),Se("button",{key:1,type:"button",disabled:!S(le),class:J([[S(g).e("icon-btn"),{"is-disabled":!S(le)}],"arrow-right"]),"aria-label":S(T)("el.datepicker.nextMonth"),onClick:Xe},[at(ve.$slots,"next-month",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(jo))]),_:1})])],10,["disabled","aria-label"])):st("v-if",!0),Ce("div",null,Ft(S(I)),1)],2),be(o5,{"selection-mode":"range",date:f.value,"min-date":S(p),"max-date":S(m),"range-state":S(v),"disabled-date":S(i),"cell-class-name":S(a),onChangerange:S(_),onPick:He,onSelect:S(w)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),Ce("div",{class:J([[S(g).e("content"),S(y).e("content")],"is-right"])},[Ce("div",{class:J(S(y).e("header"))},[ve.unlinkPanels?(W(),Se("button",{key:0,type:"button",disabled:!S(Ke),class:J([[S(g).e("icon-btn"),{"is-disabled":!S(Ke)}],"d-arrow-left"]),"aria-label":S(T)("el.datepicker.prevYear"),onClick:Ye},[at(ve.$slots,"prev-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(zp))]),_:1})])],10,["disabled","aria-label"])):st("v-if",!0),ve.unlinkPanels?(W(),Se("button",{key:1,type:"button",disabled:!S(le),class:J([[S(g).e("icon-btn"),{"is-disabled":!S(le)}],"arrow-left"]),"aria-label":S(T)("el.datepicker.prevMonth"),onClick:Y},[at(ve.$slots,"prev-month",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(Up))]),_:1})])],10,["disabled","aria-label"])):st("v-if",!0),Ce("button",{type:"button","aria-label":S(T)("el.datepicker.nextYear"),class:J([S(g).e("icon-btn"),"d-arrow-right"]),onClick:me},[at(ve.$slots,"next-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(Hp))]),_:1})])],10,["aria-label"]),Ce("button",{type:"button",class:J([S(g).e("icon-btn"),"arrow-right"]),"aria-label":S(T)("el.datepicker.nextMonth"),onClick:ke},[at(ve.$slots,"next-month",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(jo))]),_:1})])],10,["aria-label"]),Ce("div",null,Ft(S(P)),1)],2),be(o5,{"selection-mode":"range",date:h.value,"min-date":S(p),"max-date":S(m),"range-state":S(v),"disabled-date":S(i),"cell-class-name":S(a),onChangerange:S(_),onPick:He,onSelect:S(w)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),S(Ze)?(W(),Se("div",{key:0,class:J(S(g).e("footer"))},[S(o)?(W(),pt(S(gs),{key:0,text:"",size:"small",class:J(S(g).e("link-btn")),onClick:Tt},{default:Oe(()=>[Xn(Ft(S(T)("el.datepicker.clear")),1)]),_:1},8,["class"])):st("v-if",!0),be(S(gs),{plain:"",size:"small",class:J(S(g).e("link-btn")),disabled:S(Ue),onClick:we=>S(b)(!1)},{default:Oe(()=>[Xn(Ft(S(T)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):st("v-if",!0)],2))}});var h4e=$t(f4e,[["__file","panel-date-range.vue"]]);const p4e=Vt({...mB}),m4e=["pick","set-picker-option","calendar-change"],v4e=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const{t:r}=Ar(),i=()=>{e.value=e.value.subtract(1,"year"),n.value||(t.value=t.value.subtract(1,"year"))},a=()=>{n.value||(e.value=e.value.add(1,"year")),t.value=t.value.add(1,"year")},s=()=>{e.value=e.value.add(1,"year")},o=()=>{t.value=t.value.subtract(1,"year")},l=V(()=>`${e.value.year()} ${r("el.datepicker.year")}`),u=V(()=>`${t.value.year()} ${r("el.datepicker.year")}`),c=V(()=>e.value.year()),d=V(()=>t.value.year()===e.value.year()?e.value.year()+1:t.value.year());return{leftPrevYear:i,rightNextYear:a,leftNextYear:s,rightPrevYear:o,leftLabel:l,rightLabel:u,leftYear:c,rightYear:d}},DT="year",g4e=Ne({name:"DatePickerMonthRange"}),y4e=Ne({...g4e,props:p4e,emits:m4e,setup(n,{emit:e}){const t=n,{lang:r}=Ar(),i=Yt("EP_PICKER_BASE"),{shortcuts:a,disabledDate:s}=i.props,o=Kr(i.props,"format"),l=Kr(i.props,"defaultValue"),u=ie(Rn().locale(r.value)),c=ie(Rn().locale(r.value).add(1,DT)),{minDate:d,maxDate:f,rangeState:h,ppNs:p,drpNs:m,handleChangeRange:v,handleRangeConfirm:g,handleShortcutClick:y,onSelect:_}=rne(t,{defaultValue:l,leftDate:u,rightDate:c,unit:DT,onParsedValueChanged:U}),b=V(()=>!!a.length),{leftPrevYear:x,rightNextYear:w,leftNextYear:A,rightPrevYear:T,leftLabel:C,rightLabel:E,leftYear:I,rightYear:P}=v4e({unlinkPanels:Kr(t,"unlinkPanels"),leftDate:u,rightDate:c}),L=V(()=>t.unlinkPanels&&P.value>I.value+1),N=(B,$=!0)=>{const ee=B.minDate,re=B.maxDate;f.value===re&&d.value===ee||(e("calendar-change",[ee.toDate(),re&&re.toDate()]),f.value=re,d.value=ee,$&&g())},F=()=>{u.value=gB(S(l),{lang:S(r),unit:"year",unlinkPanels:t.unlinkPanels})[0],c.value=u.value.add(1,"year"),e("pick",null)},k=B=>Ut(B)?B.map($=>$.format(o.value)):B.format(o.value),H=B=>Ut(B)?B.map($=>Rn($,o.value).locale(r.value)):Rn(B,o.value).locale(r.value);function U(B,$){if(t.unlinkPanels&&$){const ee=(B==null?void 0:B.year())||0,re=$.year();c.value=ee===re?$.add(1,DT):$}else c.value=u.value.add(1,DT)}return e("set-picker-option",["isValidValue",k1]),e("set-picker-option",["formatToString",k]),e("set-picker-option",["parseUserInput",H]),e("set-picker-option",["handleClear",F]),(B,$)=>(W(),Se("div",{class:J([S(p).b(),S(m).b(),{"has-sidebar":!!B.$slots.sidebar||S(b)}])},[Ce("div",{class:J(S(p).e("body-wrapper"))},[at(B.$slots,"sidebar",{class:J(S(p).e("sidebar"))}),S(b)?(W(),Se("div",{key:0,class:J(S(p).e("sidebar"))},[(W(!0),Se(on,null,ur(S(a),(ee,re)=>(W(),Se("button",{key:re,type:"button",class:J(S(p).e("shortcut")),onClick:ne=>S(y)(ee)},Ft(ee.text),11,["onClick"]))),128))],2)):st("v-if",!0),Ce("div",{class:J(S(p).e("body"))},[Ce("div",{class:J([[S(p).e("content"),S(m).e("content")],"is-left"])},[Ce("div",{class:J(S(m).e("header"))},[Ce("button",{type:"button",class:J([S(p).e("icon-btn"),"d-arrow-left"]),onClick:S(x)},[at(B.$slots,"prev-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(zp))]),_:1})])],10,["onClick"]),B.unlinkPanels?(W(),Se("button",{key:0,type:"button",disabled:!S(L),class:J([[S(p).e("icon-btn"),{[S(p).is("disabled")]:!S(L)}],"d-arrow-right"]),onClick:S(A)},[at(B.$slots,"next-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(Hp))]),_:1})])],10,["disabled","onClick"])):st("v-if",!0),Ce("div",null,Ft(S(C)),1)],2),be(l5,{"selection-mode":"range",date:u.value,"min-date":S(d),"max-date":S(f),"range-state":S(h),"disabled-date":S(s),onChangerange:S(v),onPick:N,onSelect:S(_)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),Ce("div",{class:J([[S(p).e("content"),S(m).e("content")],"is-right"])},[Ce("div",{class:J(S(m).e("header"))},[B.unlinkPanels?(W(),Se("button",{key:0,type:"button",disabled:!S(L),class:J([[S(p).e("icon-btn"),{"is-disabled":!S(L)}],"d-arrow-left"]),onClick:S(T)},[at(B.$slots,"prev-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(zp))]),_:1})])],10,["disabled","onClick"])):st("v-if",!0),Ce("button",{type:"button",class:J([S(p).e("icon-btn"),"d-arrow-right"]),onClick:S(w)},[at(B.$slots,"next-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(Hp))]),_:1})])],10,["onClick"]),Ce("div",null,Ft(S(E)),1)],2),be(l5,{"selection-mode":"range",date:c.value,"min-date":S(d),"max-date":S(f),"range-state":S(h),"disabled-date":S(s),onChangerange:S(v),onPick:N,onSelect:S(_)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var _4e=$t(y4e,[["__file","panel-month-range.vue"]]);const b4e=Vt({...mB}),S4e=["pick","set-picker-option","calendar-change"],x4e=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const r=()=>{e.value=e.value.subtract(10,"year"),n.value||(t.value=t.value.subtract(10,"year"))},i=()=>{n.value||(e.value=e.value.add(10,"year")),t.value=t.value.add(10,"year")},a=()=>{e.value=e.value.add(10,"year")},s=()=>{t.value=t.value.subtract(10,"year")},o=V(()=>{const d=Math.floor(e.value.year()/10)*10;return`${d}-${d+9}`}),l=V(()=>{const d=Math.floor(t.value.year()/10)*10;return`${d}-${d+9}`}),u=V(()=>Math.floor(e.value.year()/10)*10+9),c=V(()=>Math.floor(t.value.year()/10)*10);return{leftPrevYear:r,rightNextYear:i,leftNextYear:a,rightPrevYear:s,leftLabel:o,rightLabel:l,leftYear:u,rightYear:c}},FV="year",w4e=Ne({name:"DatePickerYearRange"}),T4e=Ne({...w4e,props:b4e,emits:S4e,setup(n,{emit:e}){const t=n,{lang:r}=Ar(),i=ie(Rn().locale(r.value)),a=ie(i.value.add(10,"year")),{pickerNs:s}=Yt(O4),o=kt("date-range-picker"),l=V(()=>!!N.length),u=V(()=>[s.b(),o.b(),{"has-sidebar":!!Oa().sidebar||l.value}]),c=V(()=>({content:[s.e("content"),o.e("content"),"is-left"],arrowLeftBtn:[s.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[s.e("icon-btn"),{[s.is("disabled")]:!x.value},"d-arrow-right"]})),d=V(()=>({content:[s.e("content"),o.e("content"),"is-right"],arrowLeftBtn:[s.e("icon-btn"),{"is-disabled":!x.value},"d-arrow-left"],arrowRightBtn:[s.e("icon-btn"),"d-arrow-right"]})),f=nne(r),{leftPrevYear:h,rightNextYear:p,leftNextYear:m,rightPrevYear:v,leftLabel:g,rightLabel:y,leftYear:_,rightYear:b}=x4e({unlinkPanels:Kr(t,"unlinkPanels"),leftDate:i,rightDate:a}),x=V(()=>t.unlinkPanels&&b.value>_.value+1),w=ie(),A=ie(),T=ie({endDate:null,selecting:!1}),C=ne=>{T.value=ne},E=(ne,ae=!0)=>{const pe=ne.minDate,de=ne.maxDate;A.value===de&&w.value===pe||(e("calendar-change",[pe.toDate(),de&&de.toDate()]),A.value=de,w.value=pe,ae&&I())},I=(ne=!1)=>{k1([w.value,A.value])&&e("pick",[w.value,A.value],ne)},P=ne=>{T.value.selecting=ne,ne||(T.value.endDate=null)},L=Yt("EP_PICKER_BASE"),{shortcuts:N,disabledDate:F}=L.props,k=Kr(L.props,"format"),H=Kr(L.props,"defaultValue"),U=()=>{let ne;if(Ut(H.value)){const ae=Rn(H.value[0]);let pe=Rn(H.value[1]);return t.unlinkPanels||(pe=ae.add(10,FV)),[ae,pe]}else H.value?ne=Rn(H.value):ne=Rn();return ne=ne.locale(r.value),[ne,ne.add(10,FV)]};St(()=>H.value,ne=>{if(ne){const ae=U();i.value=ae[0],a.value=ae[1]}},{immediate:!0}),St(()=>t.parsedValue,ne=>{if(ne&&ne.length===2)if(w.value=ne[0],A.value=ne[1],i.value=w.value,t.unlinkPanels&&A.value){const ae=w.value.year(),pe=A.value.year();a.value=ae===pe?A.value.add(10,"year"):A.value}else a.value=i.value.add(10,"year");else{const ae=U();w.value=void 0,A.value=void 0,i.value=ae[0],a.value=ae[1]}},{immediate:!0});const B=ne=>Ut(ne)?ne.map(ae=>Rn(ae,k.value).locale(r.value)):Rn(ne,k.value).locale(r.value),$=ne=>Ut(ne)?ne.map(ae=>ae.format(k.value)):ne.format(k.value),ee=ne=>k1(ne)&&(F?!F(ne[0].toDate())&&!F(ne[1].toDate()):!0),re=()=>{const ne=U();i.value=ne[0],a.value=ne[1],A.value=void 0,w.value=void 0,e("pick",null)};return e("set-picker-option",["isValidValue",ee]),e("set-picker-option",["parseUserInput",B]),e("set-picker-option",["formatToString",$]),e("set-picker-option",["handleClear",re]),(ne,ae)=>(W(),Se("div",{class:J(S(u))},[Ce("div",{class:J(S(s).e("body-wrapper"))},[at(ne.$slots,"sidebar",{class:J(S(s).e("sidebar"))}),S(l)?(W(),Se("div",{key:0,class:J(S(s).e("sidebar"))},[(W(!0),Se(on,null,ur(S(N),(pe,de)=>(W(),Se("button",{key:de,type:"button",class:J(S(s).e("shortcut")),onClick:me=>S(f)(pe)},Ft(pe.text),11,["onClick"]))),128))],2)):st("v-if",!0),Ce("div",{class:J(S(s).e("body"))},[Ce("div",{class:J(S(c).content)},[Ce("div",{class:J(S(o).e("header"))},[Ce("button",{type:"button",class:J(S(c).arrowLeftBtn),onClick:S(h)},[at(ne.$slots,"prev-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(zp))]),_:1})])],10,["onClick"]),ne.unlinkPanels?(W(),Se("button",{key:0,type:"button",disabled:!S(x),class:J(S(c).arrowRightBtn),onClick:S(m)},[at(ne.$slots,"next-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(Hp))]),_:1})])],10,["disabled","onClick"])):st("v-if",!0),Ce("div",null,Ft(S(g)),1)],2),be(u5,{"selection-mode":"range",date:i.value,"min-date":w.value,"max-date":A.value,"range-state":T.value,"disabled-date":S(F),onChangerange:C,onPick:E,onSelect:P},null,8,["date","min-date","max-date","range-state","disabled-date"])],2),Ce("div",{class:J(S(d).content)},[Ce("div",{class:J(S(o).e("header"))},[ne.unlinkPanels?(W(),Se("button",{key:0,type:"button",disabled:!S(x),class:J(S(d).arrowLeftBtn),onClick:S(v)},[at(ne.$slots,"prev-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(zp))]),_:1})])],10,["disabled","onClick"])):st("v-if",!0),Ce("button",{type:"button",class:J(S(d).arrowRightBtn),onClick:S(p)},[at(ne.$slots,"next-year",{},()=>[be(S(tn),null,{default:Oe(()=>[be(S(Hp))]),_:1})])],10,["onClick"]),Ce("div",null,Ft(S(y)),1)],2),be(u5,{"selection-mode":"range",date:a.value,"min-date":w.value,"max-date":A.value,"range-state":T.value,"disabled-date":S(F),onChangerange:C,onPick:E,onSelect:P},null,8,["date","min-date","max-date","range-state","disabled-date"])],2)],2)],2)],2))}});var C4e=$t(T4e,[["__file","panel-year-range.vue"]]);const A4e=function(n){switch(n){case"daterange":case"datetimerange":return h4e;case"monthrange":return _4e;case"yearrange":return C4e;default:return c4e}};Rn.extend(mte);Rn.extend(b3e);Rn.extend(fB);Rn.extend(x3e);Rn.extend(T3e);Rn.extend(A3e);Rn.extend(M3e);Rn.extend(D3e);var E4e=Ne({name:"ElDatePicker",install:null,props:X3e,emits:["update:modelValue"],setup(n,{expose:e,emit:t,slots:r}){const i=kt("picker-panel");pr("ElPopperOptions",$r(Kr(n,"popperOptions"))),pr(O4,{slots:r,pickerNs:i});const a=ie();e({focus:()=>{var l;(l=a.value)==null||l.focus()},blur:()=>{var l;(l=a.value)==null||l.blur()},handleOpen:()=>{var l;(l=a.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=a.value)==null||l.handleClose()}});const o=l=>{t("update:modelValue",l)};return()=>{var l;const u=(l=n.format)!=null?l:P3e[n.type]||yy,c=A4e(n.type);return be(Yte,lr(n,{format:u,type:n.type,ref:a,"onUpdate:modelValue":o}),{default:d=>be(c,d,{"prev-month":r["prev-month"],"next-month":r["next-month"],"prev-year":r["prev-year"],"next-year":r["next-year"]}),"range-separator":r["range-separator"]})}}});const M4e=Bn(E4e),_B=Symbol("elDescriptions");var Rb=Ne({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:Yt(_B,{})}},render(){var n;const e=UAe(this.cell),t=(((n=this.cell)==null?void 0:n.dirs)||[]).map(g=>{const{dir:y,arg:_,modifiers:b,value:x}=g;return[y,x,_,b]}),{border:r,direction:i}=this.descriptions,a=i==="vertical",s=()=>{var g,y,_;return((_=(y=(g=this.cell)==null?void 0:g.children)==null?void 0:y.label)==null?void 0:_.call(y))||e.label},o=()=>{var g,y,_;return(_=(y=(g=this.cell)==null?void 0:g.children)==null?void 0:y.default)==null?void 0:_.call(y)},l=e.span,u=e.rowspan,c=e.align?`is-${e.align}`:"",d=e.labelAlign?`is-${e.labelAlign}`:c,f=e.className,h=e.labelClassName,p=this.type==="label"&&(e.labelWidth||this.descriptions.labelWidth)||e.width,m={width:ia(p),minWidth:ia(e.minWidth)},v=kt("descriptions");switch(this.type){case"label":return Wn(an(this.tag,{style:m,class:[v.e("cell"),v.e("label"),v.is("bordered-label",r),v.is("vertical-label",a),d,h],colSpan:a?l:1,rowspan:a?1:u},s()),t);case"content":return Wn(an(this.tag,{style:m,class:[v.e("cell"),v.e("content"),v.is("bordered-content",r),v.is("vertical-content",a),c,f],colSpan:a?l:l*2-1,rowspan:a?u*2-1:u},o()),t);default:{const g=s();return Wn(an("td",{style:m,class:[v.e("cell"),c],colSpan:l,rowspan:u},[es(g)?void 0:an("span",{class:[v.e("label"),h]},g),an("span",{class:[v.e("content"),f]},o())]),t)}}}});const I4e=Vt({row:{type:tt(Array),default:()=>[]}}),D4e=Ne({name:"ElDescriptionsRow"}),P4e=Ne({...D4e,props:I4e,setup(n){const e=Yt(_B,{});return(t,r)=>S(e).direction==="vertical"?(W(),Se(on,{key:0},[Ce("tr",null,[(W(!0),Se(on,null,ur(t.row,(i,a)=>(W(),pt(S(Rb),{key:`tr1-${a}`,cell:i,tag:"th",type:"label"},null,8,["cell"]))),128))]),Ce("tr",null,[(W(!0),Se(on,null,ur(t.row,(i,a)=>(W(),pt(S(Rb),{key:`tr2-${a}`,cell:i,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(W(),Se("tr",{key:1},[(W(!0),Se(on,null,ur(t.row,(i,a)=>(W(),Se(on,{key:`tr3-${a}`},[S(e).border?(W(),Se(on,{key:0},[be(S(Rb),{cell:i,tag:"td",type:"label"},null,8,["cell"]),be(S(Rb),{cell:i,tag:"td",type:"content"},null,8,["cell"])],64)):(W(),pt(S(Rb),{key:1,cell:i,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var R4e=$t(P4e,[["__file","descriptions-row.vue"]]);const k4e=Vt({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:La,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number],default:""}}),L4e=Ne({name:"ElDescriptions"}),O4e=Ne({...L4e,props:k4e,setup(n){const e=n,t=kt("descriptions"),r=Ca(),i=Oa();pr(_B,e);const a=V(()=>[t.b(),t.m(r.value)]),s=(l,u,c,d=!1)=>(l.props||(l.props={}),u>c&&(l.props.span=c),d&&(l.props.span=u),l),o=()=>{if(!i.default)return[];const l=wp(i.default()).filter(p=>{var m;return((m=p==null?void 0:p.type)==null?void 0:m.name)==="ElDescriptionsItem"}),u=[];let c=[],d=e.column,f=0;const h=[];return l.forEach((p,m)=>{var v,g,y;const _=((v=p.props)==null?void 0:v.span)||1,b=((g=p.props)==null?void 0:g.rowspan)||1,x=u.length;if(h[x]||(h[x]=0),b>1)for(let w=1;w<b;w++)h[y=x+w]||(h[y]=0),h[x+w]++,f++;if(h[x]>0&&(d-=h[x],h[x]=0),m<l.length-1&&(f+=_>d?d:_),m===l.length-1){const w=e.column-f%e.column;c.push(s(p,w,d,!0)),u.push(c);return}_<d?(d-=_,c.push(p)):(c.push(s(p,_,d)),u.push(c),d=e.column,c=[])}),u};return(l,u)=>(W(),Se("div",{class:J(S(a))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(W(),Se("div",{key:0,class:J(S(t).e("header"))},[Ce("div",{class:J(S(t).e("title"))},[at(l.$slots,"title",{},()=>[Xn(Ft(l.title),1)])],2),Ce("div",{class:J(S(t).e("extra"))},[at(l.$slots,"extra",{},()=>[Xn(Ft(l.extra),1)])],2)],2)):st("v-if",!0),Ce("div",{class:J(S(t).e("body"))},[Ce("table",{class:J([S(t).e("table"),S(t).is("bordered",l.border)])},[Ce("tbody",null,[(W(!0),Se(on,null,ur(o(),(c,d)=>(W(),pt(R4e,{key:d,row:c},null,8,["row"]))),128))])],2)],2)],2))}});var N4e=$t(O4e,[["__file","description.vue"]]);const B4e=Vt({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),ine=Ne({name:"ElDescriptionsItem",props:B4e}),F4e=Bn(N4e,{DescriptionsItem:ine}),U4e=Xi(ine),bB=n=>{if(!n)return{onClick:Jr,onMousedown:Jr,onMouseup:Jr};let e=!1,t=!1;return{onClick:s=>{e&&t&&n(s),e=t=!1},onMousedown:s=>{e=s.target===s.currentTarget},onMouseup:s=>{t=s.target===s.currentTarget}}},z4e=Vt({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:tt([String,Array,Object])},zIndex:{type:tt([String,Number])}}),H4e={click:n=>n instanceof MouseEvent},V4e="overlay";var $4e=Ne({name:"ElOverlay",props:z4e,emits:H4e,setup(n,{slots:e,emit:t}){const r=kt(V4e),i=l=>{t("click",l)},{onClick:a,onMousedown:s,onMouseup:o}=bB(n.customMaskEvent?void 0:i);return()=>n.mask?be("div",{class:[r.b(),n.overlayClass],style:{zIndex:n.zIndex},onClick:a,onMousedown:s,onMouseup:o},[at(e,"default")],xu.STYLE|xu.CLASS|xu.PROPS,["onClick","onMouseup","onMousedown"]):an("div",{class:n.overlayClass,style:{zIndex:n.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[at(e,"default")])}});const SB=$4e,ane=Symbol("dialogInjectionKey"),sne=Vt({center:Boolean,alignCenter:Boolean,closeIcon:{type:li},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),G4e={close:()=>!0},one=(n,e,t,r)=>{let i={offsetX:0,offsetY:0};const a=u=>{const c=u.clientX,d=u.clientY,{offsetX:f,offsetY:h}=i,p=n.value.getBoundingClientRect(),m=p.left,v=p.top,g=p.width,y=p.height,_=document.documentElement.clientWidth,b=document.documentElement.clientHeight,x=-m+f,w=-v+h,A=_-m-g+f,T=b-v-y+h,C=I=>{let P=f+I.clientX-c,L=h+I.clientY-d;r!=null&&r.value||(P=Math.min(Math.max(P,x),A),L=Math.min(Math.max(L,w),T)),i={offsetX:P,offsetY:L},n.value&&(n.value.style.transform=`translate(${ia(P)}, ${ia(L)})`)},E=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",E)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",E)},s=()=>{e.value&&n.value&&e.value.addEventListener("mousedown",a)},o=()=>{e.value&&n.value&&e.value.removeEventListener("mousedown",a)},l=()=>{i={offsetX:0,offsetY:0},n.value&&(n.value.style.transform="none")};return zn(()=>{vs(()=>{t.value?s():o()})}),Wr(()=>{o()}),{resetPosition:l}},N4=(...n)=>e=>{n.forEach(t=>{hn(t)?t(e):t.value=e})},W4e=Ne({name:"ElDialogContent"}),q4e=Ne({...W4e,props:sne,emits:G4e,setup(n,{expose:e}){const t=n,{t:r}=Ar(),{Close:i}=WN,{dialogRef:a,headerRef:s,bodyId:o,ns:l,style:u}=Yt(ane),{focusTrapRef:c}=Yt(QN),d=V(()=>[l.b(),l.is("fullscreen",t.fullscreen),l.is("draggable",t.draggable),l.is("align-center",t.alignCenter),{[l.m("center")]:t.center}]),f=N4(c,a),h=V(()=>t.draggable),p=V(()=>t.overflow),{resetPosition:m}=one(a,s,h,p);return e({resetPosition:m}),(v,g)=>(W(),Se("div",{ref:S(f),class:J(S(d)),style:Jt(S(u)),tabindex:"-1"},[Ce("header",{ref_key:"headerRef",ref:s,class:J([S(l).e("header"),{"show-close":v.showClose}])},[at(v.$slots,"header",{},()=>[Ce("span",{role:"heading","aria-level":v.ariaLevel,class:J(S(l).e("title"))},Ft(v.title),11,["aria-level"])]),v.showClose?(W(),Se("button",{key:0,"aria-label":S(r)("el.dialog.close"),class:J(S(l).e("headerbtn")),type:"button",onClick:y=>v.$emit("close")},[be(S(tn),{class:J(S(l).e("close"))},{default:Oe(()=>[(W(),pt(ir(v.closeIcon||S(i))))]),_:1},8,["class"])],10,["aria-label","onClick"])):st("v-if",!0)],2),Ce("div",{id:S(o),class:J(S(l).e("body"))},[at(v.$slots,"default")],10,["id"]),v.$slots.footer?(W(),Se("footer",{key:0,class:J(S(l).e("footer"))},[at(v.$slots,"footer")],2)):st("v-if",!0)],6))}});var j4e=$t(q4e,[["__file","dialog-content.vue"]]);const lne=Vt({...sne,appendToBody:Boolean,appendTo:{type:tt([String,Object]),default:"body"},beforeClose:{type:tt(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),une={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[jn]:n=>mi(n),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},xB=(n,e={})=>{xi(n)||Xa("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||kt("popup"),r=V(()=>t.bm("parent","hidden"));if(!Cr||ml(document.body,r.value))return;let i=0,a=!1,s="0";const o=()=>{setTimeout(()=>{typeof document>"u"||(xo(document==null?void 0:document.body,r.value),a&&document&&(document.body.style.width=s))},200)};St(n,l=>{if(!l){o();return}a=!ml(document.body,r.value),a&&(s=document.body.style.width),i=_ee(t.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,c=Cf(document.body,"overflowY");i>0&&(u||c==="scroll")&&a&&(document.body.style.width=`calc(100% - ${i}px)`),ku(document.body,r.value)}),hZ(()=>o())},cne=(n,e)=>{var t;const i=tr().emit,{nextZIndex:a}=I_();let s="";const o=Ds(),l=Ds(),u=ie(!1),c=ie(!1),d=ie(!1),f=ie((t=n.zIndex)!=null?t:a());let h,p;const m=A4("namespace",XS),v=V(()=>{const F={},k=`--${m.value}-dialog`;return n.fullscreen||(n.top&&(F[`${k}-margin-top`]=n.top),n.width&&(F[`${k}-width`]=ia(n.width))),F}),g=V(()=>n.alignCenter?{display:"flex"}:{});function y(){i("opened")}function _(){i("closed"),i(jn,!1),n.destroyOnClose&&(d.value=!1)}function b(){i("close")}function x(){p==null||p(),h==null||h(),n.openDelay&&n.openDelay>0?{stop:h}=sv(()=>C(),n.openDelay):C()}function w(){h==null||h(),p==null||p(),n.closeDelay&&n.closeDelay>0?{stop:p}=sv(()=>E(),n.closeDelay):E()}function A(){function F(k){k||(c.value=!0,u.value=!1)}n.beforeClose?n.beforeClose(F):w()}function T(){n.closeOnClickModal&&A()}function C(){Cr&&(u.value=!0)}function E(){u.value=!1}function I(){i("openAutoFocus")}function P(){i("closeAutoFocus")}function L(F){var k;((k=F.detail)==null?void 0:k.focusReason)==="pointer"&&F.preventDefault()}n.lockScroll&&xB(u);function N(){n.closeOnPressEscape&&A()}return St(()=>n.modelValue,F=>{F?(c.value=!1,x(),d.value=!0,f.value=tee(n.zIndex)?a():f.value++,cn(()=>{i("open"),e.value&&(e.value.scrollTop=0)})):u.value&&w()}),St(()=>n.fullscreen,F=>{e.value&&(F?(s=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=s)}),zn(()=>{n.modelValue&&(u.value=!0,d.value=!0,x())}),{afterEnter:y,afterLeave:_,beforeLeave:b,handleClose:A,onModalClick:T,close:w,doClose:E,onOpenAutoFocus:I,onCloseAutoFocus:P,onCloseRequested:N,onFocusoutPrevented:L,titleId:o,bodyId:l,closed:c,style:v,overlayDialogStyle:g,rendered:d,visible:u,zIndex:f}},K4e=Ne({name:"ElDialog",inheritAttrs:!1}),X4e=Ne({...K4e,props:lne,emits:une,setup(n,{expose:e}){const t=n,r=Oa();Sp({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},V(()=>!!r.title));const i=kt("dialog"),a=ie(),s=ie(),o=ie(),{visible:l,titleId:u,bodyId:c,style:d,overlayDialogStyle:f,rendered:h,zIndex:p,afterEnter:m,afterLeave:v,beforeLeave:g,handleClose:y,onModalClick:_,onOpenAutoFocus:b,onCloseAutoFocus:x,onCloseRequested:w,onFocusoutPrevented:A}=cne(t,a);pr(ane,{dialogRef:a,headerRef:s,bodyId:c,ns:i,rendered:h,style:d});const T=bB(_),C=V(()=>t.draggable&&!t.fullscreen);return e({visible:l,dialogContentRef:o,resetPosition:()=>{var I;(I=o.value)==null||I.resetPosition()}}),(I,P)=>(W(),pt(S(R_),{to:I.appendTo,disabled:I.appendTo!=="body"?!1:!I.appendToBody},{default:Oe(()=>[be(Ka,{name:"dialog-fade",onAfterEnter:S(m),onAfterLeave:S(v),onBeforeLeave:S(g),persisted:""},{default:Oe(()=>[Wn(be(S(SB),{"custom-mask-event":"",mask:I.modal,"overlay-class":I.modalClass,"z-index":S(p)},{default:Oe(()=>[Ce("div",{role:"dialog","aria-modal":"true","aria-label":I.title||void 0,"aria-labelledby":I.title?void 0:S(u),"aria-describedby":S(c),class:J(`${S(i).namespace.value}-overlay-dialog`),style:Jt(S(f)),onClick:S(T).onClick,onMousedown:S(T).onMousedown,onMouseup:S(T).onMouseup},[be(S(P_),{loop:"",trapped:S(l),"focus-start-el":"container",onFocusAfterTrapped:S(b),onFocusAfterReleased:S(x),onFocusoutPrevented:S(A),onReleaseRequested:S(w)},{default:Oe(()=>[S(h)?(W(),pt(j4e,lr({key:0,ref_key:"dialogContentRef",ref:o},I.$attrs,{center:I.center,"align-center":I.alignCenter,"close-icon":I.closeIcon,draggable:S(C),overflow:I.overflow,fullscreen:I.fullscreen,"show-close":I.showClose,title:I.title,"aria-level":I.headerAriaLevel,onClose:S(y)}),Wu({header:Oe(()=>[I.$slots.title?at(I.$slots,"title",{key:1}):at(I.$slots,"header",{key:0,close:S(y),titleId:S(u),titleClass:S(i).e("title")})]),default:Oe(()=>[at(I.$slots,"default")]),_:2},[I.$slots.footer?{name:"footer",fn:Oe(()=>[at(I.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):st("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Nr,S(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Y4e=$t(X4e,[["__file","dialog.vue"]]);const Q4e=Bn(Y4e),Z4e=Vt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:tt(String),default:"solid"}}),J4e=Ne({name:"ElDivider"}),eIe=Ne({...J4e,props:Z4e,setup(n){const e=n,t=kt("divider"),r=V(()=>t.cssVar({"border-style":e.borderStyle}));return(i,a)=>(W(),Se("div",{class:J([S(t).b(),S(t).m(i.direction)]),style:Jt(S(r)),role:"separator"},[i.$slots.default&&i.direction!=="vertical"?(W(),Se("div",{key:0,class:J([S(t).e("text"),S(t).is(i.contentPosition)])},[at(i.$slots,"default")],2)):st("v-if",!0)],6))}});var tIe=$t(eIe,[["__file","divider.vue"]]);const dne=Bn(tIe),nIe=Vt({...lne,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),rIe=une,iIe=Ne({name:"ElDrawer",inheritAttrs:!1}),aIe=Ne({...iIe,props:nIe,emits:rIe,setup(n,{expose:e}){const t=n,r=Oa();Sp({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},V(()=>!!r.title));const i=ie(),a=ie(),s=kt("drawer"),{t:o}=Ar(),{afterEnter:l,afterLeave:u,beforeLeave:c,visible:d,rendered:f,titleId:h,bodyId:p,zIndex:m,onModalClick:v,onOpenAutoFocus:g,onCloseAutoFocus:y,onFocusoutPrevented:_,onCloseRequested:b,handleClose:x}=cne(t,i),w=V(()=>t.direction==="rtl"||t.direction==="ltr"),A=V(()=>ia(t.size));return e({handleClose:x,afterEnter:l,afterLeave:u}),(T,C)=>(W(),pt(S(R_),{to:T.appendTo,disabled:T.appendTo!=="body"?!1:!T.appendToBody},{default:Oe(()=>[be(Ka,{name:S(s).b("fade"),onAfterEnter:S(l),onAfterLeave:S(u),onBeforeLeave:S(c),persisted:""},{default:Oe(()=>[Wn(be(S(SB),{mask:T.modal,"overlay-class":T.modalClass,"z-index":S(m),onClick:S(v)},{default:Oe(()=>[be(S(P_),{loop:"",trapped:S(d),"focus-trap-el":i.value,"focus-start-el":a.value,onFocusAfterTrapped:S(g),onFocusAfterReleased:S(y),onFocusoutPrevented:S(_),onReleaseRequested:S(b)},{default:Oe(()=>[Ce("div",lr({ref_key:"drawerRef",ref:i,"aria-modal":"true","aria-label":T.title||void 0,"aria-labelledby":T.title?void 0:S(h),"aria-describedby":S(p)},T.$attrs,{class:[S(s).b(),T.direction,S(d)&&"open"],style:S(w)?"width: "+S(A):"height: "+S(A),role:"dialog",onClick:Tn(()=>{},["stop"])}),[Ce("span",{ref_key:"focusStartRef",ref:a,class:J(S(s).e("sr-focus")),tabindex:"-1"},null,2),T.withHeader?(W(),Se("header",{key:0,class:J(S(s).e("header"))},[T.$slots.title?at(T.$slots,"title",{key:1},()=>[st(" DEPRECATED SLOT ")]):at(T.$slots,"header",{key:0,close:S(x),titleId:S(h),titleClass:S(s).e("title")},()=>[T.$slots.title?st("v-if",!0):(W(),Se("span",{key:0,id:S(h),role:"heading","aria-level":T.headerAriaLevel,class:J(S(s).e("title"))},Ft(T.title),11,["id","aria-level"]))]),T.showClose?(W(),Se("button",{key:2,"aria-label":S(o)("el.drawer.close"),class:J(S(s).e("close-btn")),type:"button",onClick:S(x)},[be(S(tn),{class:J(S(s).e("close"))},{default:Oe(()=>[be(S(Fc))]),_:1},8,["class"])],10,["aria-label","onClick"])):st("v-if",!0)],2)):st("v-if",!0),S(f)?(W(),Se("div",{key:1,id:S(p),class:J(S(s).e("body"))},[at(T.$slots,"default")],10,["id"])):st("v-if",!0),T.$slots.footer?(W(),Se("div",{key:2,class:J(S(s).e("footer"))},[at(T.$slots,"footer")],2)):st("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Nr,S(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var sIe=$t(aIe,[["__file","drawer.vue"]]);const oIe=Bn(sIe),lIe=Ne({inheritAttrs:!1});function uIe(n,e,t,r,i,a){return at(n.$slots,"default")}var cIe=$t(lIe,[["render",uIe],["__file","collection.vue"]]);const dIe=Ne({name:"ElCollectionItem",inheritAttrs:!1});function fIe(n,e,t,r,i,a){return at(n.$slots,"default")}var hIe=$t(dIe,[["render",fIe],["__file","collection-item.vue"]]);const fne="data-el-collection-item",hne=n=>{const e=`El${n}Collection`,t=`${e}Item`,r=Symbol(e),i=Symbol(t),a={...cIe,name:e,setup(){const o=ie(null),l=new Map;pr(r,{itemMap:l,getItems:()=>{const c=S(o);if(!c)return[];const d=Array.from(c.querySelectorAll(`[${fne}]`));return[...l.values()].sort((h,p)=>d.indexOf(h.ref)-d.indexOf(p.ref))},collectionRef:o})}},s={...hIe,name:t,setup(o,{attrs:l}){const u=ie(null),c=Yt(r,void 0);pr(i,{collectionItemRef:u}),zn(()=>{const d=S(u);d&&c.itemMap.set(d,{ref:d,...l})}),Wr(()=>{const d=S(u);c.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:r,COLLECTION_ITEM_INJECTION_KEY:i,ElCollection:a,ElCollectionItem:s}},pIe=Vt({style:{type:tt([String,Array,Object])},currentTabId:{type:tt(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:tt(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:mIe,ElCollectionItem:vIe,COLLECTION_INJECTION_KEY:wB,COLLECTION_ITEM_INJECTION_KEY:gIe}=hne("RovingFocusGroup"),TB=Symbol("elRovingFocusGroup"),pne=Symbol("elRovingFocusGroupItem"),yIe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},_Ie=(n,e)=>{if(e!=="rtl")return n;switch(n){case jt.right:return jt.left;case jt.left:return jt.right;default:return n}},bIe=(n,e,t)=>{const r=_Ie(n.code,t);if(!(e==="vertical"&&[jt.left,jt.right].includes(r))&&!(e==="horizontal"&&[jt.up,jt.down].includes(r)))return yIe[r]},SIe=(n,e)=>n.map((t,r)=>n[(r+e)%n.length]),CB=n=>{const{activeElement:e}=document;for(const t of n)if(t===e||(t.focus(),e!==document.activeElement))return},UV="currentTabIdChange",zV="rovingFocusGroup.entryFocus",xIe={bubbles:!1,cancelable:!0},wIe=Ne({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:pIe,emits:[UV,"entryFocus"],setup(n,{emit:e}){var t;const r=ie((t=n.currentTabId||n.defaultCurrentTabId)!=null?t:null),i=ie(!1),a=ie(!1),s=ie(null),{getItems:o}=Yt(wB,void 0),l=V(()=>[{outline:"none"},n.style]),u=m=>{e(UV,m)},c=()=>{i.value=!0},d=ra(m=>{var v;(v=n.onMousedown)==null||v.call(n,m)},()=>{a.value=!0}),f=ra(m=>{var v;(v=n.onFocus)==null||v.call(n,m)},m=>{const v=!S(a),{target:g,currentTarget:y}=m;if(g===y&&v&&!S(i)){const _=new Event(zV,xIe);if(y==null||y.dispatchEvent(_),!_.defaultPrevented){const b=o().filter(C=>C.focusable),x=b.find(C=>C.active),w=b.find(C=>C.id===S(r)),T=[x,w,...b].filter(Boolean).map(C=>C.ref);CB(T)}}a.value=!1}),h=ra(m=>{var v;(v=n.onBlur)==null||v.call(n,m)},()=>{i.value=!1}),p=(...m)=>{e("entryFocus",...m)};pr(TB,{currentTabbedId:Cv(r),loop:Kr(n,"loop"),tabIndex:V(()=>S(i)?-1:0),rovingFocusGroupRef:s,rovingFocusGroupRootStyle:l,orientation:Kr(n,"orientation"),dir:Kr(n,"dir"),onItemFocus:u,onItemShiftTab:c,onBlur:h,onFocus:f,onMousedown:d}),St(()=>n.currentTabId,m=>{r.value=m??null}),ni(s,zV,p)}});function TIe(n,e,t,r,i,a){return at(n.$slots,"default")}var CIe=$t(wIe,[["render",TIe],["__file","roving-focus-group-impl.vue"]]);const AIe=Ne({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:mIe,ElRovingFocusGroupImpl:CIe}});function EIe(n,e,t,r,i,a){const s=Kt("el-roving-focus-group-impl"),o=Kt("el-focus-group-collection");return W(),pt(o,null,{default:Oe(()=>[be(s,Ac(Op(n.$attrs)),{default:Oe(()=>[at(n.$slots,"default")]),_:3},16)]),_:3})}var MIe=$t(AIe,[["render",EIe],["__file","roving-focus-group.vue"]]);const nE=Vt({trigger:n2.trigger,triggerKeys:{type:tt(Array),default:()=>[jt.enter,jt.numpadEnter,jt.space,jt.down]},effect:{...os.effect,default:"light"},type:{type:tt(String)},placement:{type:tt(String),default:"bottom"},popperOptions:{type:tt(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:tt([Number,String]),default:0},maxHeight:{type:tt([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:tt(Object)},teleported:os.teleported}),mne=Vt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:li}}),IIe=Vt({onKeydown:{type:tt(Function)}}),DIe=[jt.down,jt.pageDown,jt.home],vne=[jt.up,jt.pageUp,jt.end],PIe=[...DIe,...vne],{ElCollection:RIe,ElCollectionItem:kIe,COLLECTION_INJECTION_KEY:LIe,COLLECTION_ITEM_INJECTION_KEY:OIe}=hne("Dropdown"),B4=Symbol("elDropdown"),{ButtonGroup:NIe}=gs,BIe=Ne({name:"ElDropdown",components:{ElButton:gs,ElButtonGroup:NIe,ElScrollbar:Vd,ElDropdownCollection:RIe,ElTooltip:Ys,ElRovingFocusGroup:MIe,ElOnlyChild:Nee,ElIcon:tn,ArrowDown:lh},props:nE,emits:["visible-change","click","command"],setup(n,{emit:e}){const t=tr(),r=kt("dropdown"),{t:i}=Ar(),a=ie(),s=ie(),o=ie(null),l=ie(null),u=ie(null),c=ie(null),d=ie(!1),f=V(()=>({maxHeight:ia(n.maxHeight)})),h=V(()=>[r.m(b.value)]),p=V(()=>vo(n.trigger)),m=Ds().value,v=V(()=>n.id||m);St([a,p],([k,H],[U])=>{var B,$,ee;(B=U==null?void 0:U.$el)!=null&&B.removeEventListener&&U.$el.removeEventListener("pointerenter",w),($=k==null?void 0:k.$el)!=null&&$.removeEventListener&&k.$el.removeEventListener("pointerenter",w),(ee=k==null?void 0:k.$el)!=null&&ee.addEventListener&&H.includes("hover")&&k.$el.addEventListener("pointerenter",w)},{immediate:!0}),Wr(()=>{var k,H;(H=(k=a.value)==null?void 0:k.$el)!=null&&H.removeEventListener&&a.value.$el.removeEventListener("pointerenter",w)});function g(){y()}function y(){var k;(k=o.value)==null||k.onClose()}function _(){var k;(k=o.value)==null||k.onOpen()}const b=Ca();function x(...k){e("command",...k)}function w(){var k,H;(H=(k=a.value)==null?void 0:k.$el)==null||H.focus()}function A(){}function T(){const k=S(l);p.value.includes("hover")&&(k==null||k.focus()),c.value=null}function C(k){c.value=k}function E(k){d.value||(k.preventDefault(),k.stopImmediatePropagation())}function I(){e("visible-change",!0)}function P(k){(k==null?void 0:k.type)==="keydown"&&l.value.focus()}function L(){e("visible-change",!1)}return pr(B4,{contentRef:l,role:V(()=>n.role),triggerId:v,isUsingKeyboard:d,onItemEnter:A,onItemLeave:T}),pr("elDropdown",{instance:t,dropdownSize:b,handleClick:g,commandHandler:x,trigger:Kr(n,"trigger"),hideOnClick:Kr(n,"hideOnClick")}),{t:i,ns:r,scrollbar:u,wrapStyle:f,dropdownTriggerKls:h,dropdownSize:b,triggerId:v,currentTabId:c,handleCurrentTabIdChange:C,handlerMainButtonClick:k=>{e("click",k)},handleEntryFocus:E,handleClose:y,handleOpen:_,handleBeforeShowTooltip:I,handleShowTooltip:P,handleBeforeHideTooltip:L,onFocusAfterTrapped:k=>{var H,U;k.preventDefault(),(U=(H=l.value)==null?void 0:H.focus)==null||U.call(H,{preventScroll:!0})},popperRef:o,contentRef:l,triggeringElementRef:a,referenceElementRef:s}}});function FIe(n,e,t,r,i,a){var s;const o=Kt("el-dropdown-collection"),l=Kt("el-roving-focus-group"),u=Kt("el-scrollbar"),c=Kt("el-only-child"),d=Kt("el-tooltip"),f=Kt("el-button"),h=Kt("arrow-down"),p=Kt("el-icon"),m=Kt("el-button-group");return W(),Se("div",{class:J([n.ns.b(),n.ns.is("disabled",n.disabled)])},[be(d,{ref:"popperRef",role:n.role,effect:n.effect,"fallback-placements":["bottom","top"],"popper-options":n.popperOptions,"gpu-acceleration":!1,"hide-after":n.trigger==="hover"?n.hideTimeout:0,"manual-mode":!0,placement:n.placement,"popper-class":[n.ns.e("popper"),n.popperClass],"reference-element":(s=n.referenceElementRef)==null?void 0:s.$el,trigger:n.trigger,"trigger-keys":n.triggerKeys,"trigger-target-el":n.contentRef,"show-after":n.trigger==="hover"?n.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":n.triggeringElementRef,"virtual-triggering":n.splitButton,disabled:n.disabled,transition:`${n.ns.namespace.value}-zoom-in-top`,teleported:n.teleported,pure:"",persistent:"",onBeforeShow:n.handleBeforeShowTooltip,onShow:n.handleShowTooltip,onBeforeHide:n.handleBeforeHideTooltip},Wu({content:Oe(()=>[be(u,{ref:"scrollbar","wrap-style":n.wrapStyle,tag:"div","view-class":n.ns.e("list")},{default:Oe(()=>[be(l,{loop:n.loop,"current-tab-id":n.currentTabId,orientation:"horizontal",onCurrentTabIdChange:n.handleCurrentTabIdChange,onEntryFocus:n.handleEntryFocus},{default:Oe(()=>[be(o,null,{default:Oe(()=>[at(n.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[n.splitButton?void 0:{name:"default",fn:Oe(()=>[be(c,{id:n.triggerId,ref:"triggeringElementRef",role:"button",tabindex:n.tabindex},{default:Oe(()=>[at(n.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),n.splitButton?(W(),pt(m,{key:0},{default:Oe(()=>[be(f,lr({ref:"referenceElementRef"},n.buttonProps,{size:n.dropdownSize,type:n.type,disabled:n.disabled,tabindex:n.tabindex,onClick:n.handlerMainButtonClick}),{default:Oe(()=>[at(n.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),be(f,lr({id:n.triggerId,ref:"triggeringElementRef"},n.buttonProps,{role:"button",size:n.dropdownSize,type:n.type,class:n.ns.e("caret-button"),disabled:n.disabled,tabindex:n.tabindex,"aria-label":n.t("el.dropdown.toggleDropdown")}),{default:Oe(()=>[be(p,{class:J(n.ns.e("icon"))},{default:Oe(()=>[be(h)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):st("v-if",!0)],2)}var UIe=$t(BIe,[["render",FIe],["__file","dropdown.vue"]]);const zIe=Ne({components:{ElRovingFocusCollectionItem:vIe},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(n,{emit:e}){const{currentTabbedId:t,loop:r,onItemFocus:i,onItemShiftTab:a}=Yt(TB,void 0),{getItems:s}=Yt(wB,void 0),o=Ds(),l=ie(null),u=ra(h=>{e("mousedown",h)},h=>{n.focusable?i(S(o)):h.preventDefault()}),c=ra(h=>{e("focus",h)},()=>{i(S(o))}),d=ra(h=>{e("keydown",h)},h=>{const{code:p,shiftKey:m,target:v,currentTarget:g}=h;if(p===jt.tab&&m){a();return}if(v!==g)return;const y=bIe(h);if(y){h.preventDefault();let b=s().filter(x=>x.focusable).map(x=>x.ref);switch(y){case"last":{b.reverse();break}case"prev":case"next":{y==="prev"&&b.reverse();const x=b.indexOf(g);b=r.value?SIe(b,x+1):b.slice(x+1);break}}cn(()=>{CB(b)})}}),f=V(()=>t.value===S(o));return pr(pne,{rovingFocusGroupItemRef:l,tabIndex:V(()=>S(f)?0:-1),handleMousedown:u,handleFocus:c,handleKeydown:d}),{id:o,handleKeydown:d,handleFocus:c,handleMousedown:u}}});function HIe(n,e,t,r,i,a){const s=Kt("el-roving-focus-collection-item");return W(),pt(s,{id:n.id,focusable:n.focusable,active:n.active},{default:Oe(()=>[at(n.$slots,"default")]),_:3},8,["id","focusable","active"])}var VIe=$t(zIe,[["render",HIe],["__file","roving-focus-item.vue"]]);const $Ie=Ne({name:"DropdownItemImpl",components:{ElIcon:tn},props:mne,emits:["pointermove","pointerleave","click","clickimpl"],setup(n,{emit:e}){const t=kt("dropdown"),{role:r}=Yt(B4,void 0),{collectionItemRef:i}=Yt(OIe,void 0),{collectionItemRef:a}=Yt(gIe,void 0),{rovingFocusGroupItemRef:s,tabIndex:o,handleFocus:l,handleKeydown:u,handleMousedown:c}=Yt(pne,void 0),d=N4(i,a,s),f=V(()=>r.value==="menu"?"menuitem":r.value==="navigation"?"link":"button"),h=ra(p=>{if([jt.enter,jt.numpadEnter,jt.space].includes(p.code))return p.preventDefault(),p.stopImmediatePropagation(),e("clickimpl",p),!0},u);return{ns:t,itemRef:d,dataset:{[fne]:""},role:f,tabIndex:o,handleFocus:l,handleKeydown:h,handleMousedown:c}}});function GIe(n,e,t,r,i,a){const s=Kt("el-icon");return W(),Se(on,null,[n.divided?(W(),Se("li",{key:0,role:"separator",class:J(n.ns.bem("menu","item","divided"))},null,2)):st("v-if",!0),Ce("li",lr({ref:n.itemRef},{...n.dataset,...n.$attrs},{"aria-disabled":n.disabled,class:[n.ns.be("menu","item"),n.ns.is("disabled",n.disabled)],tabindex:n.tabIndex,role:n.role,onClick:o=>n.$emit("clickimpl",o),onFocus:n.handleFocus,onKeydown:Tn(n.handleKeydown,["self"]),onMousedown:n.handleMousedown,onPointermove:o=>n.$emit("pointermove",o),onPointerleave:o=>n.$emit("pointerleave",o)}),[n.icon?(W(),pt(s,{key:0},{default:Oe(()=>[(W(),pt(ir(n.icon)))]),_:1})):st("v-if",!0),at(n.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var WIe=$t($Ie,[["render",GIe],["__file","dropdown-item-impl.vue"]]);const gne=()=>{const n=Yt("elDropdown",{}),e=V(()=>n==null?void 0:n.dropdownSize);return{elDropdown:n,_elDropdownSize:e}},qIe=Ne({name:"ElDropdownItem",components:{ElDropdownCollectionItem:kIe,ElRovingFocusItem:VIe,ElDropdownItemImpl:WIe},inheritAttrs:!1,props:mne,emits:["pointermove","pointerleave","click"],setup(n,{emit:e,attrs:t}){const{elDropdown:r}=gne(),i=tr(),a=ie(null),s=V(()=>{var h,p;return(p=(h=S(a))==null?void 0:h.textContent)!=null?p:""}),{onItemEnter:o,onItemLeave:l}=Yt(B4,void 0),u=ra(h=>(e("pointermove",h),h.defaultPrevented),vV(h=>{if(n.disabled){l(h);return}const p=h.currentTarget;p===document.activeElement||p.contains(document.activeElement)||(o(h),h.defaultPrevented||p==null||p.focus())})),c=ra(h=>(e("pointerleave",h),h.defaultPrevented),vV(l)),d=ra(h=>{if(!n.disabled)return e("click",h),h.type!=="keydown"&&h.defaultPrevented},h=>{var p,m,v;if(n.disabled){h.stopImmediatePropagation();return}(p=r==null?void 0:r.hideOnClick)!=null&&p.value&&((m=r.handleClick)==null||m.call(r)),(v=r.commandHandler)==null||v.call(r,n.command,i,h)}),f=V(()=>({...n,...t}));return{handleClick:d,handlePointerMove:u,handlePointerLeave:c,textContent:s,propsAndAttrs:f}}});function jIe(n,e,t,r,i,a){var s;const o=Kt("el-dropdown-item-impl"),l=Kt("el-roving-focus-item"),u=Kt("el-dropdown-collection-item");return W(),pt(u,{disabled:n.disabled,"text-value":(s=n.textValue)!=null?s:n.textContent},{default:Oe(()=>[be(l,{focusable:!n.disabled},{default:Oe(()=>[be(o,lr(n.propsAndAttrs,{onPointerleave:n.handlePointerLeave,onPointermove:n.handlePointerMove,onClickimpl:n.handleClick}),{default:Oe(()=>[at(n.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var yne=$t(qIe,[["render",jIe],["__file","dropdown-item.vue"]]);const KIe=Ne({name:"ElDropdownMenu",props:IIe,setup(n){const e=kt("dropdown"),{_elDropdownSize:t}=gne(),r=t.value,{focusTrapRef:i,onKeydown:a}=Yt(QN,void 0),{contentRef:s,role:o,triggerId:l}=Yt(B4,void 0),{collectionRef:u,getItems:c}=Yt(LIe,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:f,tabIndex:h,onBlur:p,onFocus:m,onMousedown:v}=Yt(TB,void 0),{collectionRef:g}=Yt(wB,void 0),y=V(()=>[e.b("menu"),e.bm("menu",r==null?void 0:r.value)]),_=N4(s,u,i,d,g),b=ra(w=>{var A;(A=n.onKeydown)==null||A.call(n,w)},w=>{const{currentTarget:A,code:T,target:C}=w;if(A.contains(C),jt.tab===T&&w.stopImmediatePropagation(),w.preventDefault(),C!==S(s)||!PIe.includes(T))return;const I=c().filter(P=>!P.disabled).map(P=>P.ref);vne.includes(T)&&I.reverse(),CB(I)});return{size:r,rovingFocusGroupRootStyle:f,tabIndex:h,dropdownKls:y,role:o,triggerId:l,dropdownListWrapperRef:_,handleKeydown:w=>{b(w),a(w)},onBlur:p,onFocus:m,onMousedown:v}}});function XIe(n,e,t,r,i,a){return W(),Se("ul",{ref:n.dropdownListWrapperRef,class:J(n.dropdownKls),style:Jt(n.rovingFocusGroupRootStyle),tabindex:-1,role:n.role,"aria-labelledby":n.triggerId,onBlur:n.onBlur,onFocus:n.onFocus,onKeydown:Tn(n.handleKeydown,["self"]),onMousedown:Tn(n.onMousedown,["self"])},[at(n.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var _ne=$t(KIe,[["render",XIe],["__file","dropdown-menu.vue"]]);const YIe=Bn(UIe,{DropdownItem:yne,DropdownMenu:_ne}),QIe=Xi(yne),ZIe=Xi(_ne),JIe=Ne({name:"ImgEmpty"}),eDe=Ne({...JIe,setup(n){const e=kt("empty"),t=Ds();return(r,i)=>(W(),Se("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[Ce("defs",null,[Ce("linearGradient",{id:`linearGradient-1-${S(t)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[Ce("stop",{"stop-color":`var(${S(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),Ce("stop",{"stop-color":`var(${S(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),Ce("linearGradient",{id:`linearGradient-2-${S(t)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[Ce("stop",{"stop-color":`var(${S(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),Ce("stop",{"stop-color":`var(${S(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),Ce("rect",{id:`path-3-${S(t)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),Ce("g",{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[Ce("g",{id:"B-type",transform:"translate(-1268.000000, -535.000000)"},[Ce("g",{id:"Group-2",transform:"translate(1268.000000, 535.000000)"},[Ce("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${S(e).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),Ce("polygon",{id:"Rectangle-Copy-14",fill:`var(${S(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),Ce("g",{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[Ce("polygon",{id:"Rectangle-Copy-10",fill:`var(${S(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),Ce("polygon",{id:"Rectangle-Copy-11",fill:`var(${S(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),Ce("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${S(t)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),Ce("polygon",{id:"Rectangle-Copy-13",fill:`var(${S(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),Ce("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${S(t)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),Ce("g",{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},[Ce("use",{id:"Mask",fill:`var(${S(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${S(t)}`},null,8,["fill","xlink:href"]),Ce("polygon",{id:"Rectangle-Copy",fill:`var(${S(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${S(t)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),Ce("polygon",{id:"Rectangle-Copy-18",fill:`var(${S(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var tDe=$t(eDe,[["__file","img-empty.vue"]]);const nDe=Vt({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),rDe=Ne({name:"ElEmpty"}),iDe=Ne({...rDe,props:nDe,setup(n){const e=n,{t}=Ar(),r=kt("empty"),i=V(()=>e.description||t("el.table.emptyText")),a=V(()=>({width:ia(e.imageSize)}));return(s,o)=>(W(),Se("div",{class:J(S(r).b())},[Ce("div",{class:J(S(r).e("image")),style:Jt(S(a))},[s.image?(W(),Se("img",{key:0,src:s.image,ondragstart:"return false"},null,8,["src"])):at(s.$slots,"image",{key:1},()=>[be(tDe)])],6),Ce("div",{class:J(S(r).e("description"))},[s.$slots.description?at(s.$slots,"description",{key:0}):(W(),Se("p",{key:1},Ft(S(i)),1))],2),s.$slots.default?(W(),Se("div",{key:0,class:J(S(r).e("bottom"))},[at(s.$slots,"default")],2)):st("v-if",!0)],2))}});var aDe=$t(iDe,[["__file","empty.vue"]]);const bne=Bn(aDe),sDe=Vt({size:{type:String,values:Hd},disabled:Boolean}),oDe=Vt({...sDe,model:Object,rules:{type:tt(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),lDe={validate:(n,e,t)=>(Ut(n)||ln(n))&&mi(e)&&ln(t)};function uDe(){const n=ie([]),e=V(()=>{if(!n.value.length)return"0";const a=Math.max(...n.value);return a?`${a}px`:""});function t(a){const s=n.value.indexOf(a);return s===-1&&e.value,s}function r(a,s){if(a&&s){const o=t(s);n.value.splice(o,1,a)}else a&&n.value.push(a)}function i(a){const s=t(a);s>-1&&n.value.splice(s,1)}return{autoLabelWidth:e,registerLabelWidth:r,deregisterLabelWidth:i}}const PT=(n,e)=>{const t=vo(e);return t.length>0?n.filter(r=>r.prop&&t.includes(r.prop)):n},cDe="ElForm",dDe=Ne({name:cDe}),fDe=Ne({...dDe,props:oDe,emits:lDe,setup(n,{expose:e,emit:t}){const r=n,i=[],a=Ca(),s=kt("form"),o=V(()=>{const{labelPosition:_,inline:b}=r;return[s.b(),s.m(a.value||"default"),{[s.m(`label-${_}`)]:_,[s.m("inline")]:b}]}),l=_=>i.find(b=>b.prop===_),u=_=>{i.push(_)},c=_=>{_.prop&&i.splice(i.indexOf(_),1)},d=(_=[])=>{r.model&&PT(i,_).forEach(b=>b.resetField())},f=(_=[])=>{PT(i,_).forEach(b=>b.clearValidate())},h=V(()=>!!r.model),p=_=>{if(i.length===0)return[];const b=PT(i,_);return b.length?b:[]},m=async _=>g(void 0,_),v=async(_=[])=>{if(!h.value)return!1;const b=p(_);if(b.length===0)return!0;let x={};for(const w of b)try{await w.validate("")}catch(A){x={...x,...A}}return Object.keys(x).length===0?!0:Promise.reject(x)},g=async(_=[],b)=>{const x=!hn(b);try{const w=await v(_);return w===!0&&await(b==null?void 0:b(w)),w}catch(w){if(w instanceof Error)throw w;const A=w;return r.scrollToError&&y(Object.keys(A)[0]),await(b==null?void 0:b(!1,A)),x&&Promise.reject(A)}},y=_=>{var b;const x=PT(i,_)[0];x&&((b=x.$el)==null||b.scrollIntoView(r.scrollIntoViewOptions))};return St(()=>r.rules,()=>{r.validateOnRuleChange&&m().catch(_=>void 0)},{deep:!0}),pr(Iv,$r({...ja(r),emit:t,resetFields:d,clearValidate:f,validateField:g,getField:l,addField:u,removeField:c,...uDe()})),e({validate:m,validateField:g,resetFields:d,clearValidate:f,scrollToField:y,fields:i}),(_,b)=>(W(),Se("form",{class:J(S(o))},[at(_.$slots,"default")],2))}});var hDe=$t(fDe,[["__file","form.vue"]]);function C0(){return C0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},C0.apply(this,arguments)}function pDe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,a2(n,e)}function c5(n){return c5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c5(n)}function a2(n,e){return a2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},a2(n,e)}function mDe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rE(n,e,t){return mDe()?rE=Reflect.construct.bind():rE=function(i,a,s){var o=[null];o.push.apply(o,a);var l=Function.bind.apply(i,o),u=new l;return s&&a2(u,s.prototype),u},rE.apply(null,arguments)}function vDe(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function d5(n){var e=typeof Map=="function"?new Map:void 0;return d5=function(r){if(r===null||!vDe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return rE(r,arguments,c5(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a2(i,r)},d5(n)}var gDe=/%[sdj%]/g,yDe=function(){};typeof process<"u"&&process.env;function f5(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var r=t.field;e[r]=e[r]||[],e[r].push(t)}),e}function Xl(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=0,a=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var s=n.replace(gDe,function(o){if(o==="%%")return"%";if(i>=a)return o;switch(o){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return o}});return s}return n}function _De(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function ys(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||_De(e)&&typeof n=="string"&&!n)}function bDe(n,e,t){var r=[],i=0,a=n.length;function s(o){r.push.apply(r,o||[]),i++,i===a&&t(r)}n.forEach(function(o){e(o,s)})}function HV(n,e,t){var r=0,i=n.length;function a(s){if(s&&s.length){t(s);return}var o=r;r=r+1,o<i?e(n[o],a):t([])}a([])}function SDe(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var VV=function(n){pDe(e,n);function e(t,r){var i;return i=n.call(this,"Async Validation Error")||this,i.errors=t,i.fields=r,i}return e}(d5(Error));function xDe(n,e,t,r,i){if(e.first){var a=new Promise(function(f,h){var p=function(g){return r(g),g.length?h(new VV(g,f5(g))):f(i)},m=SDe(n);HV(m,t,p)});return a.catch(function(f){return f}),a}var s=e.firstFields===!0?Object.keys(n):e.firstFields||[],o=Object.keys(n),l=o.length,u=0,c=[],d=new Promise(function(f,h){var p=function(v){if(c.push.apply(c,v),u++,u===l)return r(c),c.length?h(new VV(c,f5(c))):f(i)};o.length||(r(c),f(i)),o.forEach(function(m){var v=n[m];s.indexOf(m)!==-1?HV(v,t,p):bDe(v,t,p)})});return d.catch(function(f){return f}),d}function wDe(n){return!!(n&&n.message!==void 0)}function TDe(n,e){for(var t=n,r=0;r<e.length;r++){if(t==null)return t;t=t[e[r]]}return t}function $V(n,e){return function(t){var r;return n.fullFields?r=TDe(e,n.fullFields):r=e[t.field||n.fullField],wDe(t)?(t.field=t.field||n.fullField,t.fieldValue=r,t):{message:typeof t=="function"?t():t,fieldValue:r,field:t.field||n.fullField}}}function GV(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];typeof r=="object"&&typeof n[t]=="object"?n[t]=C0({},n[t],r):n[t]=r}}return n}var Sne=function(e,t,r,i,a,s){e.required&&(!r.hasOwnProperty(e.field)||ys(t,s||e.type))&&i.push(Xl(a.messages.required,e.fullField))},CDe=function(e,t,r,i,a){(/^\s+$/.test(t)||t==="")&&i.push(Xl(a.messages.whitespace,e.fullField))},RT,ADe=function(){if(RT)return RT;var n="[a-fA-F\\d:]",e=function(b){return b&&b.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+t+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+t+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+t+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+t+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+t+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+t+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+t+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+t+"$)|(?:^"+i+"$)"),s=new RegExp("^"+t+"$"),o=new RegExp("^"+i+"$"),l=function(b){return b&&b.exact?a:new RegExp("(?:"+e(b)+t+e(b)+")|(?:"+e(b)+i+e(b)+")","g")};l.v4=function(_){return _&&_.exact?s:new RegExp(""+e(_)+t+e(_),"g")},l.v6=function(_){return _&&_.exact?o:new RegExp(""+e(_)+i+e(_),"g")};var u="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,f=l.v6().source,h="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?',y="(?:"+u+"|www\\.)"+c+"(?:localhost|"+d+"|"+f+"|"+h+p+m+")"+v+g;return RT=new RegExp("(?:^"+y+"$)","i"),RT},WV={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},AS={integer:function(e){return AS.number(e)&&parseInt(e,10)===e},float:function(e){return AS.number(e)&&!AS.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!AS.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(WV.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(ADe())},hex:function(e){return typeof e=="string"&&!!e.match(WV.hex)}},EDe=function(e,t,r,i,a){if(e.required&&t===void 0){Sne(e,t,r,i,a);return}var s=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;s.indexOf(o)>-1?AS[o](t)||i.push(Xl(a.messages.types[o],e.fullField,e.type)):o&&typeof t!==e.type&&i.push(Xl(a.messages.types[o],e.fullField,e.type))},MDe=function(e,t,r,i,a){var s=typeof e.len=="number",o=typeof e.min=="number",l=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=t,d=null,f=typeof t=="number",h=typeof t=="string",p=Array.isArray(t);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(c=t.length),h&&(c=t.replace(u,"_").length),s?c!==e.len&&i.push(Xl(a.messages[d].len,e.fullField,e.len)):o&&!l&&c<e.min?i.push(Xl(a.messages[d].min,e.fullField,e.min)):l&&!o&&c>e.max?i.push(Xl(a.messages[d].max,e.fullField,e.max)):o&&l&&(c<e.min||c>e.max)&&i.push(Xl(a.messages[d].range,e.fullField,e.min,e.max))},ag="enum",IDe=function(e,t,r,i,a){e[ag]=Array.isArray(e[ag])?e[ag]:[],e[ag].indexOf(t)===-1&&i.push(Xl(a.messages[ag],e.fullField,e[ag].join(", ")))},DDe=function(e,t,r,i,a){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(Xl(a.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var s=new RegExp(e.pattern);s.test(t)||i.push(Xl(a.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},vi={required:Sne,whitespace:CDe,type:EDe,range:MDe,enum:IDe,pattern:DDe},PDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t,"string")&&!e.required)return r();vi.required(e,t,i,s,a,"string"),ys(t,"string")||(vi.type(e,t,i,s,a),vi.range(e,t,i,s,a),vi.pattern(e,t,i,s,a),e.whitespace===!0&&vi.whitespace(e,t,i,s,a))}r(s)},RDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t)&&!e.required)return r();vi.required(e,t,i,s,a),t!==void 0&&vi.type(e,t,i,s,a)}r(s)},kDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(t===""&&(t=void 0),ys(t)&&!e.required)return r();vi.required(e,t,i,s,a),t!==void 0&&(vi.type(e,t,i,s,a),vi.range(e,t,i,s,a))}r(s)},LDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t)&&!e.required)return r();vi.required(e,t,i,s,a),t!==void 0&&vi.type(e,t,i,s,a)}r(s)},ODe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t)&&!e.required)return r();vi.required(e,t,i,s,a),ys(t)||vi.type(e,t,i,s,a)}r(s)},NDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t)&&!e.required)return r();vi.required(e,t,i,s,a),t!==void 0&&(vi.type(e,t,i,s,a),vi.range(e,t,i,s,a))}r(s)},BDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t)&&!e.required)return r();vi.required(e,t,i,s,a),t!==void 0&&(vi.type(e,t,i,s,a),vi.range(e,t,i,s,a))}r(s)},FDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(t==null&&!e.required)return r();vi.required(e,t,i,s,a,"array"),t!=null&&(vi.type(e,t,i,s,a),vi.range(e,t,i,s,a))}r(s)},UDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t)&&!e.required)return r();vi.required(e,t,i,s,a),t!==void 0&&vi.type(e,t,i,s,a)}r(s)},zDe="enum",HDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t)&&!e.required)return r();vi.required(e,t,i,s,a),t!==void 0&&vi[zDe](e,t,i,s,a)}r(s)},VDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t,"string")&&!e.required)return r();vi.required(e,t,i,s,a),ys(t,"string")||vi.pattern(e,t,i,s,a)}r(s)},$De=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t,"date")&&!e.required)return r();if(vi.required(e,t,i,s,a),!ys(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),vi.type(e,l,i,s,a),l&&vi.range(e,l.getTime(),i,s,a)}}r(s)},GDe=function(e,t,r,i,a){var s=[],o=Array.isArray(t)?"array":typeof t;vi.required(e,t,i,s,a,o),r(s)},VD=function(e,t,r,i,a){var s=e.type,o=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(ys(t,s)&&!e.required)return r();vi.required(e,t,i,o,a,s),ys(t,s)||vi.type(e,t,i,o,a)}r(o)},WDe=function(e,t,r,i,a){var s=[],o=e.required||!e.required&&i.hasOwnProperty(e.field);if(o){if(ys(t)&&!e.required)return r();vi.required(e,t,i,s,a)}r(s)},ex={string:PDe,method:RDe,number:kDe,boolean:LDe,regexp:ODe,integer:NDe,float:BDe,array:FDe,object:UDe,enum:HDe,pattern:VDe,date:$De,url:VD,hex:VD,email:VD,required:GDe,any:WDe};function h5(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var p5=h5(),xw=function(){function n(t){this.rules=null,this._messages=p5,this.define(t)}var e=n.prototype;return e.define=function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(a){var s=r[a];i.rules[a]=Array.isArray(s)?s:[s]})},e.messages=function(r){return r&&(this._messages=GV(h5(),r)),this._messages},e.validate=function(r,i,a){var s=this;i===void 0&&(i={}),a===void 0&&(a=function(){});var o=r,l=i,u=a;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,o),Promise.resolve(o);function c(m){var v=[],g={};function y(b){if(Array.isArray(b)){var x;v=(x=v).concat.apply(x,b)}else v.push(b)}for(var _=0;_<m.length;_++)y(m[_]);v.length?(g=f5(v),u(v,g)):u(null,o)}if(l.messages){var d=this.messages();d===p5&&(d=h5()),GV(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(m){var v=s.rules[m],g=o[m];v.forEach(function(y){var _=y;typeof _.transform=="function"&&(o===r&&(o=C0({},o)),g=o[m]=_.transform(g)),typeof _=="function"?_={validator:_}:_=C0({},_),_.validator=s.getValidationMethod(_),_.validator&&(_.field=m,_.fullField=_.fullField||m,_.type=s.getType(_),f[m]=f[m]||[],f[m].push({rule:_,value:g,source:o,field:m}))})});var p={};return xDe(f,l,function(m,v){var g=m.rule,y=(g.type==="object"||g.type==="array")&&(typeof g.fields=="object"||typeof g.defaultField=="object");y=y&&(g.required||!g.required&&m.value),g.field=m.field;function _(w,A){return C0({},A,{fullField:g.fullField+"."+w,fullFields:g.fullFields?[].concat(g.fullFields,[w]):[w]})}function b(w){w===void 0&&(w=[]);var A=Array.isArray(w)?w:[w];!l.suppressWarning&&A.length&&n.warning("async-validator:",A),A.length&&g.message!==void 0&&(A=[].concat(g.message));var T=A.map($V(g,o));if(l.first&&T.length)return p[g.field]=1,v(T);if(!y)v(T);else{if(g.required&&!m.value)return g.message!==void 0?T=[].concat(g.message).map($V(g,o)):l.error&&(T=[l.error(g,Xl(l.messages.required,g.field))]),v(T);var C={};g.defaultField&&Object.keys(m.value).map(function(P){C[P]=g.defaultField}),C=C0({},C,m.rule.fields);var E={};Object.keys(C).forEach(function(P){var L=C[P],N=Array.isArray(L)?L:[L];E[P]=N.map(_.bind(null,P))});var I=new n(E);I.messages(l.messages),m.rule.options&&(m.rule.options.messages=l.messages,m.rule.options.error=l.error),I.validate(m.value,m.rule.options||l,function(P){var L=[];T&&T.length&&L.push.apply(L,T),P&&P.length&&L.push.apply(L,P),v(L.length?L:null)})}}var x;if(g.asyncValidator)x=g.asyncValidator(g,m.value,b,m.source,l);else if(g.validator){try{x=g.validator(g,m.value,b,m.source,l)}catch(w){console.error==null||console.error(w),l.suppressValidatorError||setTimeout(function(){throw w},0),b(w.message)}x===!0?b():x===!1?b(typeof g.message=="function"?g.message(g.fullField||g.field):g.message||(g.fullField||g.field)+" fails"):x instanceof Array?b(x):x instanceof Error&&b(x.message)}x&&x.then&&x.then(function(){return b()},function(w){return b(w)})},function(m){c(m)},o)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!ex.hasOwnProperty(r.type))throw new Error(Xl("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),a=i.indexOf("message");return a!==-1&&i.splice(a,1),i.length===1&&i[0]==="required"?ex.required:ex[this.getType(r)]||void 0},n}();xw.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");ex[e]=t};xw.warning=yDe;xw.messages=p5;xw.validators=ex;const qDe=["","error","validating","success"],jDe=Vt({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:tt([String,Array])},required:{type:Boolean,default:void 0},rules:{type:tt([Object,Array])},error:String,validateStatus:{type:String,values:qDe},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Hd}}),qV="ElLabelWrap";var KDe=Ne({name:qV,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:e}){const t=Yt(Iv,void 0),r=Yt(Rd);r||Xa(qV,"usage: <el-form-item><label-wrap /></el-form-item>");const i=kt("form"),a=ie(),s=ie(0),o=()=>{var c;if((c=a.value)!=null&&c.firstElementChild){const d=window.getComputedStyle(a.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(c="update")=>{cn(()=>{e.default&&n.isAutoWidth&&(c==="update"?s.value=o():c==="remove"&&(t==null||t.deregisterLabelWidth(s.value)))})},u=()=>l("update");return zn(()=>{u()}),Wr(()=>{l("remove")}),Ju(()=>u()),St(s,(c,d)=>{n.updateAll&&(t==null||t.registerLabelWidth(c,d))}),zi(V(()=>{var c,d;return(d=(c=a.value)==null?void 0:c.firstElementChild)!=null?d:null}),u),()=>{var c,d;if(!e)return null;const{isAutoWidth:f}=n;if(f){const h=t==null?void 0:t.autoLabelWidth,p=r==null?void 0:r.hasLabel,m={};if(p&&h&&h!=="auto"){const v=Math.max(0,Number.parseInt(h,10)-s.value),y=(r.labelPosition||t.labelPosition)==="left"?"marginRight":"marginLeft";v&&(m[y]=`${v}px`)}return be("div",{ref:a,class:[i.be("item","label-wrap")],style:m},[(c=e.default)==null?void 0:c.call(e)])}else return be(on,{ref:a},[(d=e.default)==null?void 0:d.call(e)])}}});const XDe=Ne({name:"ElFormItem"}),YDe=Ne({...XDe,props:jDe,setup(n,{expose:e}){const t=n,r=Oa(),i=Yt(Iv,void 0),a=Yt(Rd,void 0),s=Ca(void 0,{formItem:!1}),o=kt("form-item"),l=Ds().value,u=ie([]),c=ie(""),d=mSe(c,100),f=ie(""),h=ie();let p,m=!1;const v=V(()=>t.labelPosition||(i==null?void 0:i.labelPosition)),g=V(()=>{if(v.value==="top")return{};const ke=ia(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return ke?{width:ke}:{}}),y=V(()=>{if(v.value==="top"||i!=null&&i.inline)return{};if(!t.label&&!t.labelWidth&&E)return{};const ke=ia(t.labelWidth||(i==null?void 0:i.labelWidth)||"");return!t.label&&!r.label?{marginLeft:ke}:{}}),_=V(()=>[o.b(),o.m(s.value),o.is("error",c.value==="error"),o.is("validating",c.value==="validating"),o.is("success",c.value==="success"),o.is("required",F.value||t.required),o.is("no-asterisk",i==null?void 0:i.hideRequiredAsterisk),(i==null?void 0:i.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[o.m("feedback")]:i==null?void 0:i.statusIcon,[o.m(`label-${v.value}`)]:v.value}]),b=V(()=>mi(t.inlineMessage)?t.inlineMessage:(i==null?void 0:i.inlineMessage)||!1),x=V(()=>[o.e("error"),{[o.em("error","inline")]:b.value}]),w=V(()=>t.prop?ln(t.prop)?t.prop:t.prop.join("."):""),A=V(()=>!!(t.label||r.label)),T=V(()=>t.for||(u.value.length===1?u.value[0]:void 0)),C=V(()=>!T.value&&A.value),E=!!a,I=V(()=>{const ke=i==null?void 0:i.model;if(!(!ke||!t.prop))return QA(ke,t.prop).value}),P=V(()=>{const{required:ke}=t,Be=[];t.rules&&Be.push(...vo(t.rules));const Xe=i==null?void 0:i.rules;if(Xe&&t.prop){const Ye=QA(Xe,t.prop).value;Ye&&Be.push(...vo(Ye))}if(ke!==void 0){const Ye=Be.map((Y,he)=>[Y,he]).filter(([Y])=>Object.keys(Y).includes("required"));if(Ye.length>0)for(const[Y,he]of Ye)Y.required!==ke&&(Be[he]={...Y,required:ke});else Be.push({required:ke})}return Be}),L=V(()=>P.value.length>0),N=ke=>P.value.filter(Xe=>!Xe.trigger||!ke?!0:Ut(Xe.trigger)?Xe.trigger.includes(ke):Xe.trigger===ke).map(({trigger:Xe,...Ye})=>Ye),F=V(()=>P.value.some(ke=>ke.required)),k=V(()=>{var ke;return d.value==="error"&&t.showMessage&&((ke=i==null?void 0:i.showMessage)!=null?ke:!0)}),H=V(()=>`${t.label||""}${(i==null?void 0:i.labelSuffix)||""}`),U=ke=>{c.value=ke},B=ke=>{var Be,Xe;const{errors:Ye,fields:Y}=ke;(!Ye||!Y)&&console.error(ke),U("error"),f.value=Ye?(Xe=(Be=Ye==null?void 0:Ye[0])==null?void 0:Be.message)!=null?Xe:`${t.prop} is required`:"",i==null||i.emit("validate",t.prop,!1,f.value)},$=()=>{U("success"),i==null||i.emit("validate",t.prop,!0,"")},ee=async ke=>{const Be=w.value;return new xw({[Be]:ke}).validate({[Be]:I.value},{firstFields:!0}).then(()=>($(),!0)).catch(Ye=>(B(Ye),Promise.reject(Ye)))},re=async(ke,Be)=>{if(m||!t.prop)return!1;const Xe=hn(Be);if(!L.value)return Be==null||Be(!1),!1;const Ye=N(ke);return Ye.length===0?(Be==null||Be(!0),!0):(U("validating"),ee(Ye).then(()=>(Be==null||Be(!0),!0)).catch(Y=>{const{fields:he}=Y;return Be==null||Be(!1,he),Xe?!1:Promise.reject(he)}))},ne=()=>{U(""),f.value="",m=!1},ae=async()=>{const ke=i==null?void 0:i.model;if(!ke||!t.prop)return;const Be=QA(ke,t.prop);m=!0,Be.value=TH(p),await cn(),ne(),m=!1},pe=ke=>{u.value.includes(ke)||u.value.push(ke)},de=ke=>{u.value=u.value.filter(Be=>Be!==ke)};St(()=>t.error,ke=>{f.value=ke||"",U(ke?"error":"")},{immediate:!0}),St(()=>t.validateStatus,ke=>U(ke||""));const me=$r({...ja(t),$el:h,size:s,validateState:c,labelId:l,inputIds:u,isGroup:C,hasLabel:A,fieldValue:I,addInputId:pe,removeInputId:de,resetField:ae,clearValidate:ne,validate:re});return pr(Rd,me),zn(()=>{t.prop&&(i==null||i.addField(me),p=TH(I.value))}),Wr(()=>{i==null||i.removeField(me)}),e({size:s,validateMessage:f,validateState:c,validate:re,clearValidate:ne,resetField:ae}),(ke,Be)=>{var Xe;return W(),Se("div",{ref_key:"formItemRef",ref:h,class:J(S(_)),role:S(C)?"group":void 0,"aria-labelledby":S(C)?S(l):void 0},[be(S(KDe),{"is-auto-width":S(g).width==="auto","update-all":((Xe=S(i))==null?void 0:Xe.labelWidth)==="auto"},{default:Oe(()=>[S(A)?(W(),pt(ir(S(T)?"label":"div"),{key:0,id:S(l),for:S(T),class:J(S(o).e("label")),style:Jt(S(g))},{default:Oe(()=>[at(ke.$slots,"label",{label:S(H)},()=>[Xn(Ft(S(H)),1)])]),_:3},8,["id","for","class","style"])):st("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),Ce("div",{class:J(S(o).e("content")),style:Jt(S(y))},[at(ke.$slots,"default"),be(uJ,{name:`${S(o).namespace.value}-zoom-in-top`},{default:Oe(()=>[S(k)?at(ke.$slots,"error",{key:0,error:f.value},()=>[Ce("div",{class:J(S(x))},Ft(f.value),3)]):st("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var xne=$t(YDe,[["__file","form-item.vue"]]);const QDe=Bn(hDe,{FormItem:xne}),ZDe=Xi(xne),JDe=Vt({urlList:{type:tt(Array),default:()=>Ki([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:tt(String)}}),ePe={close:()=>!0,switch:n=>_n(n),rotate:n=>_n(n)},tPe=Ne({name:"ElImageViewer"}),nPe=Ne({...tPe,props:JDe,emits:ePe,setup(n,{expose:e,emit:t}){var r;const i=n,a={CONTAIN:{name:"contain",icon:Lf(Pxe)},ORIGINAL:{name:"original",icon:Lf(Qxe)}},{t:s}=Ar(),o=kt("image-viewer"),{nextZIndex:l}=I_(),u=ie(),c=ie([]),d=Cpe(),f=ie(!0),h=ie(i.initialIndex),p=jr(a.CONTAIN),m=ie({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),v=ie((r=i.zIndex)!=null?r:l()),g=V(()=>{const{urlList:re}=i;return re.length<=1}),y=V(()=>h.value===0),_=V(()=>h.value===i.urlList.length-1),b=V(()=>i.urlList[h.value]),x=V(()=>[o.e("btn"),o.e("prev"),o.is("disabled",!i.infinite&&y.value)]),w=V(()=>[o.e("btn"),o.e("next"),o.is("disabled",!i.infinite&&_.value)]),A=V(()=>{const{scale:re,deg:ne,offsetX:ae,offsetY:pe,enableTransition:de}=m.value;let me=ae/re,ke=pe/re;const Be=ne*Math.PI/180,Xe=Math.cos(Be),Ye=Math.sin(Be);me=me*Xe+ke*Ye,ke=ke*Xe-ae/re*Ye;const Y={transform:`scale(${re}) rotate(${ne}deg) translate(${me}px, ${ke}px)`,transition:de?"transform .3s":""};return p.value.name===a.CONTAIN.name&&(Y.maxWidth=Y.maxHeight="100%"),Y});function T(){E(),t("close")}function C(){const re=V0(ae=>{switch(ae.code){case jt.esc:i.closeOnPressEscape&&T();break;case jt.space:F();break;case jt.left:H();break;case jt.up:B("zoomIn");break;case jt.right:U();break;case jt.down:B("zoomOut");break}}),ne=V0(ae=>{const pe=ae.deltaY||ae.deltaX;B(pe<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})});d.run(()=>{ni(document,"keydown",re),ni(document,"wheel",ne)})}function E(){d.stop()}function I(){f.value=!1}function P(re){f.value=!1,re.target.alt=s("el.image.error")}function L(re){if(f.value||re.button!==0||!u.value)return;m.value.enableTransition=!1;const{offsetX:ne,offsetY:ae}=m.value,pe=re.pageX,de=re.pageY,me=V0(Be=>{m.value={...m.value,offsetX:ne+Be.pageX-pe,offsetY:ae+Be.pageY-de}}),ke=ni(document,"mousemove",me);ni(document,"mouseup",()=>{ke()}),re.preventDefault()}function N(){m.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function F(){if(f.value)return;const re=A1(a),ne=Object.values(a),ae=p.value.name,de=(ne.findIndex(me=>me.name===ae)+1)%re.length;p.value=a[re[de]],N()}function k(re){const ne=i.urlList.length;h.value=(re+ne)%ne}function H(){y.value&&!i.infinite||k(h.value-1)}function U(){_.value&&!i.infinite||k(h.value+1)}function B(re,ne={}){if(f.value)return;const{minScale:ae,maxScale:pe}=i,{zoomRate:de,rotateDeg:me,enableTransition:ke}={zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0,...ne};switch(re){case"zoomOut":m.value.scale>ae&&(m.value.scale=Number.parseFloat((m.value.scale/de).toFixed(3)));break;case"zoomIn":m.value.scale<pe&&(m.value.scale=Number.parseFloat((m.value.scale*de).toFixed(3)));break;case"clockwise":m.value.deg+=me,t("rotate",m.value.deg);break;case"anticlockwise":m.value.deg-=me,t("rotate",m.value.deg);break}m.value.enableTransition=ke}function $(re){var ne;((ne=re.detail)==null?void 0:ne.focusReason)==="pointer"&&re.preventDefault()}function ee(){i.closeOnPressEscape&&T()}return St(b,()=>{cn(()=>{const re=c.value[0];re!=null&&re.complete||(f.value=!0)})}),St(h,re=>{N(),t("switch",re)}),zn(()=>{C()}),e({setActiveItem:k}),(re,ne)=>(W(),pt(S(R_),{to:"body",disabled:!re.teleported},{default:Oe(()=>[be(Ka,{name:"viewer-fade",appear:""},{default:Oe(()=>[Ce("div",{ref_key:"wrapper",ref:u,tabindex:-1,class:J(S(o).e("wrapper")),style:Jt({zIndex:v.value})},[be(S(P_),{loop:"",trapped:"","focus-trap-el":u.value,"focus-start-el":"container",onFocusoutPrevented:$,onReleaseRequested:ee},{default:Oe(()=>[Ce("div",{class:J(S(o).e("mask")),onClick:Tn(ae=>re.hideOnClickModal&&T(),["self"])},null,10,["onClick"]),st(" CLOSE "),Ce("span",{class:J([S(o).e("btn"),S(o).e("close")]),onClick:T},[be(S(tn),null,{default:Oe(()=>[be(S(Fc))]),_:1})],2),st(" ARROW "),S(g)?st("v-if",!0):(W(),Se(on,{key:0},[Ce("span",{class:J(S(x)),onClick:H},[be(S(tn),null,{default:Oe(()=>[be(S(Up))]),_:1})],2),Ce("span",{class:J(S(w)),onClick:U},[be(S(tn),null,{default:Oe(()=>[be(S(jo))]),_:1})],2)],64)),st(" ACTIONS "),Ce("div",{class:J([S(o).e("btn"),S(o).e("actions")])},[Ce("div",{class:J(S(o).e("actions__inner"))},[be(S(tn),{onClick:ae=>B("zoomOut")},{default:Oe(()=>[be(S(h2e))]),_:1},8,["onClick"]),be(S(tn),{onClick:ae=>B("zoomIn")},{default:Oe(()=>[be(S(Aee))]),_:1},8,["onClick"]),Ce("i",{class:J(S(o).e("actions__divider"))},null,2),be(S(tn),{onClick:F},{default:Oe(()=>[(W(),pt(ir(S(p).icon)))]),_:1}),Ce("i",{class:J(S(o).e("actions__divider"))},null,2),be(S(tn),{onClick:ae=>B("anticlockwise")},{default:Oe(()=>[be(S(jxe))]),_:1},8,["onClick"]),be(S(tn),{onClick:ae=>B("clockwise")},{default:Oe(()=>[be(S(Xxe))]),_:1},8,["onClick"])],2)],2),st(" CANVAS "),Ce("div",{class:J(S(o).e("canvas"))},[(W(!0),Se(on,null,ur(re.urlList,(ae,pe)=>Wn((W(),Se("img",{ref_for:!0,ref:de=>c.value[pe]=de,key:ae,src:ae,style:Jt(S(A)),class:J(S(o).e("img")),crossorigin:re.crossorigin,onLoad:I,onError:P,onMousedown:L},null,46,["src","crossorigin"])),[[Nr,pe===h.value]])),128))],2),at(re.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var rPe=$t(nPe,[["__file","image-viewer.vue"]]);const wne=Bn(rPe),iPe=Vt({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:tt([String,Object])},previewSrcList:{type:tt(Array),default:()=>Ki([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:tt(String)}}),aPe={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>_n(n),close:()=>!0,show:()=>!0},sPe=Ne({name:"ElImage",inheritAttrs:!1}),oPe=Ne({...sPe,props:iPe,emits:aPe,setup(n,{emit:e}){const t=n;let r="";const{t:i}=Ar(),a=kt("image"),s=om(),o=V(()=>Jx(Object.entries(s).filter(([U])=>/^(data-|on[A-Z])/i.test(U)||["id","style"].includes(U)))),l=yw({excludeListeners:!0,excludeKeys:V(()=>Object.keys(o.value))}),u=ie(),c=ie(!1),d=ie(!0),f=ie(!1),h=ie(),p=ie(),m=Cr&&"loading"in HTMLImageElement.prototype;let v,g;const y=V(()=>[a.e("inner"),b.value&&a.e("preview"),d.value&&a.is("loading")]),_=V(()=>{const{fit:U}=t;return Cr&&U?{objectFit:U}:{}}),b=V(()=>{const{previewSrcList:U}=t;return Ut(U)&&U.length>0}),x=V(()=>{const{previewSrcList:U,initialIndex:B}=t;let $=B;return B>U.length-1&&($=0),$}),w=V(()=>t.loading==="eager"?!1:!m&&t.loading==="lazy"||t.lazy),A=()=>{Cr&&(d.value=!0,c.value=!1,u.value=t.src)};function T(U){d.value=!1,c.value=!1,e("load",U)}function C(U){d.value=!1,c.value=!0,e("error",U)}function E(){MMe(h.value,p.value)&&(A(),L())}const I=aee(E,200,!0);async function P(){var U;if(!Cr)return;await cn();const{scrollContainer:B}=t;Zl(B)?p.value=B:ln(B)&&B!==""?p.value=(U=document.querySelector(B))!=null?U:void 0:h.value&&(p.value=FN(h.value)),p.value&&(v=ni(p,"scroll",I),setTimeout(()=>E(),100))}function L(){!Cr||!p.value||!I||(v==null||v(),p.value=void 0)}function N(U){if(U.ctrlKey){if(U.deltaY<0)return U.preventDefault(),!1;if(U.deltaY>0)return U.preventDefault(),!1}}function F(){b.value&&(g=ni("wheel",N,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",f.value=!0,e("show"))}function k(){g==null||g(),document.body.style.overflow=r,f.value=!1,e("close")}function H(U){e("switch",U)}return St(()=>t.src,()=>{w.value?(d.value=!0,c.value=!1,L(),P()):A()}),zn(()=>{w.value?P():A()}),(U,B)=>(W(),Se("div",lr({ref_key:"container",ref:h},S(o),{class:[S(a).b(),U.$attrs.class]}),[c.value?at(U.$slots,"error",{key:0},()=>[Ce("div",{class:J(S(a).e("error"))},Ft(S(i)("el.image.error")),3)]):(W(),Se(on,{key:1},[u.value!==void 0?(W(),Se("img",lr({key:0},S(l),{src:u.value,loading:U.loading,style:S(_),class:S(y),crossorigin:U.crossorigin,onClick:F,onLoad:T,onError:C}),null,16,["src","loading","crossorigin"])):st("v-if",!0),d.value?(W(),Se("div",{key:1,class:J(S(a).e("wrapper"))},[at(U.$slots,"placeholder",{},()=>[Ce("div",{class:J(S(a).e("placeholder"))},null,2)])],2)):st("v-if",!0)],64)),S(b)?(W(),Se(on,{key:2},[f.value?(W(),pt(S(wne),{key:0,"z-index":U.zIndex,"initial-index":S(x),infinite:U.infinite,"zoom-rate":U.zoomRate,"min-scale":U.minScale,"max-scale":U.maxScale,"url-list":U.previewSrcList,crossorigin:U.crossorigin,"hide-on-click-modal":U.hideOnClickModal,teleported:U.previewTeleported,"close-on-press-escape":U.closeOnPressEscape,onClose:k,onSwitch:H},{default:Oe(()=>[U.$slots.viewer?(W(),Se("div",{key:0},[at(U.$slots,"viewer")])):st("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):st("v-if",!0)],64)):st("v-if",!0)],16))}});var lPe=$t(oPe,[["__file","image.vue"]]);const uPe=Bn(lPe),cPe=Vt({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:La,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||_n(n)||["min","max"].includes(n),default:null},name:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)},validateEvent:{type:Boolean,default:!0},...ks(["ariaLabel"])}),dPe={[si]:(n,e)=>e!==n,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[Ks]:n=>_n(n)||es(n),[jn]:n=>_n(n)||es(n)},fPe=Ne({name:"ElInputNumber"}),hPe=Ne({...fPe,props:cPe,emits:dPe,setup(n,{expose:e,emit:t}){const r=n,{t:i}=Ar(),a=kt("input-number"),s=ie(),o=$r({currentValue:r.modelValue,userInput:null}),{formItem:l}=Zs(),u=V(()=>_n(r.modelValue)&&r.modelValue<=r.min),c=V(()=>_n(r.modelValue)&&r.modelValue>=r.max),d=V(()=>{const F=g(r.step);return ti(r.precision)?Math.max(g(r.modelValue),F):(F>r.precision,r.precision)}),f=V(()=>r.controls&&r.controlsPosition==="right"),h=Ca(),p=Js(),m=V(()=>{if(o.userInput!==null)return o.userInput;let F=o.currentValue;if(es(F))return"";if(_n(F)){if(Number.isNaN(F))return"";ti(r.precision)||(F=F.toFixed(r.precision))}return F}),v=(F,k)=>{if(ti(k)&&(k=d.value),k===0)return Math.round(F);let H=String(F);const U=H.indexOf(".");if(U===-1||!H.replace(".","").split("")[U+k])return F;const ee=H.length;return H.charAt(ee-1)==="5"&&(H=`${H.slice(0,Math.max(0,ee-1))}6`),Number.parseFloat(Number(H).toFixed(k))},g=F=>{if(es(F))return 0;const k=F.toString(),H=k.indexOf(".");let U=0;return H!==-1&&(U=k.length-H-1),U},y=(F,k=1)=>_n(F)?v(F+r.step*k):o.currentValue,_=()=>{if(r.readonly||p.value||c.value)return;const F=Number(m.value)||0,k=y(F);w(k),t(Ks,o.currentValue),L()},b=()=>{if(r.readonly||p.value||u.value)return;const F=Number(m.value)||0,k=y(F,-1);w(k),t(Ks,o.currentValue),L()},x=(F,k)=>{const{max:H,min:U,step:B,precision:$,stepStrictly:ee,valueOnClear:re}=r;H<U&&Xa("InputNumber","min should not be greater than max.");let ne=Number(F);if(es(F)||Number.isNaN(ne))return null;if(F===""){if(re===null)return null;ne=ln(re)?{min:U,max:H}[re]:re}return ee&&(ne=v(Math.round(ne/B)*B,$),ne!==F&&k&&t(jn,ne)),ti($)||(ne=v(ne,$)),(ne>H||ne<U)&&(ne=ne>H?H:U,k&&t(jn,ne)),ne},w=(F,k=!0)=>{var H;const U=o.currentValue,B=x(F);if(!k){t(jn,B);return}U===B&&F||(o.userInput=null,t(jn,B),U!==B&&t(si,B,U),r.validateEvent&&((H=l==null?void 0:l.validate)==null||H.call(l,"change").catch($=>void 0)),o.currentValue=B)},A=F=>{o.userInput=F;const k=F===""?null:Number(F);t(Ks,k),w(k,!1)},T=F=>{const k=F!==""?Number(F):"";(_n(k)&&!Number.isNaN(k)||F==="")&&w(k),L(),o.userInput=null},C=()=>{var F,k;(k=(F=s.value)==null?void 0:F.focus)==null||k.call(F)},E=()=>{var F,k;(k=(F=s.value)==null?void 0:F.blur)==null||k.call(F)},I=F=>{t("focus",F)},P=F=>{var k,H;o.userInput=null,D4()&&o.currentValue===null&&((k=s.value)!=null&&k.input)&&(s.value.input.value=""),t("blur",F),r.validateEvent&&((H=l==null?void 0:l.validate)==null||H.call(l,"blur").catch(U=>void 0))},L=()=>{o.currentValue!==r.modelValue&&(o.currentValue=r.modelValue)},N=F=>{document.activeElement===F.target&&F.preventDefault()};return St(()=>r.modelValue,(F,k)=>{const H=x(F,!0);o.userInput===null&&H!==k&&(o.currentValue=H)},{immediate:!0}),zn(()=>{var F;const{min:k,max:H,modelValue:U}=r,B=(F=s.value)==null?void 0:F.input;if(B.setAttribute("role","spinbutton"),Number.isFinite(H)?B.setAttribute("aria-valuemax",String(H)):B.removeAttribute("aria-valuemax"),Number.isFinite(k)?B.setAttribute("aria-valuemin",String(k)):B.removeAttribute("aria-valuemin"),B.setAttribute("aria-valuenow",o.currentValue||o.currentValue===0?String(o.currentValue):""),B.setAttribute("aria-disabled",String(p.value)),!_n(U)&&U!=null){let $=Number(U);Number.isNaN($)&&($=null),t(jn,$)}B.addEventListener("wheel",N,{passive:!1})}),Ju(()=>{var F,k;const H=(F=s.value)==null?void 0:F.input;H==null||H.setAttribute("aria-valuenow",`${(k=o.currentValue)!=null?k:""}`)}),e({focus:C,blur:E}),(F,k)=>(W(),Se("div",{class:J([S(a).b(),S(a).m(S(h)),S(a).is("disabled",S(p)),S(a).is("without-controls",!F.controls),S(a).is("controls-right",S(f))]),onDragstart:Tn(()=>{},["prevent"])},[F.controls?Wn((W(),Se("span",{key:0,role:"button","aria-label":S(i)("el.inputNumber.decrease"),class:J([S(a).e("decrease"),S(a).is("disabled",S(u))]),onKeydown:hi(b,["enter"])},[at(F.$slots,"decrease-icon",{},()=>[be(S(tn),null,{default:Oe(()=>[S(f)?(W(),pt(S(lh),{key:0})):(W(),pt(S(Bxe),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[S(cM),b]]):st("v-if",!0),F.controls?Wn((W(),Se("span",{key:1,role:"button","aria-label":S(i)("el.inputNumber.increase"),class:J([S(a).e("increase"),S(a).is("disabled",S(c))]),onKeydown:hi(_,["enter"])},[at(F.$slots,"increase-icon",{},()=>[be(S(tn),null,{default:Oe(()=>[S(f)?(W(),pt(S(zN),{key:0})):(W(),pt(S(Cee),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[S(cM),_]]):st("v-if",!0),be(S(_o),{id:F.id,ref_key:"input",ref:s,type:"number",step:F.step,"model-value":S(m),placeholder:F.placeholder,readonly:F.readonly,disabled:S(p),size:S(h),max:F.max,min:F.min,name:F.name,"aria-label":F.ariaLabel,"validate-event":!1,onKeydown:[hi(Tn(_,["prevent"]),["up"]),hi(Tn(b,["prevent"]),["down"])],onBlur:P,onFocus:I,onInput:A,onChange:T},Wu({_:2},[F.$slots.prefix?{name:"prefix",fn:Oe(()=>[at(F.$slots,"prefix")])}:void 0,F.$slots.suffix?{name:"suffix",fn:Oe(()=>[at(F.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var pPe=$t(hPe,[["__file","input-number.vue"]]);const Tne=Bn(pPe),mPe=Vt({modelValue:{type:tt(Array)},max:Number,tagType:{...Wf.type,default:"info"},tagEffect:Wf.effect,trigger:{type:tt(String),default:jt.enter},draggable:{type:Boolean,default:!1},size:La,clearable:Boolean,disabled:{type:Boolean,default:void 0},validateEvent:{type:Boolean,default:!0},readonly:Boolean,autofocus:Boolean,id:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},placeholder:String,autocomplete:{type:String,default:"off"},ariaLabel:String}),vPe={[jn]:n=>Ut(n)||ti(n),[si]:n=>Ut(n)||ti(n),[Ks]:n=>ln(n),"add-tag":n=>ln(n),"remove-tag":n=>ln(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0};function gPe({props:n,emit:e,formItem:t}){const r=Js(),i=Ca(),a=jr(),s=ie(),o=V(()=>["small"].includes(i.value)?"small":"default"),l=V(()=>{var C;return(C=n.modelValue)!=null&&C.length?void 0:n.placeholder}),u=V(()=>!(n.readonly||r.value)),c=V(()=>{var C,E;return ti(n.max)?!1:((E=(C=n.modelValue)==null?void 0:C.length)!=null?E:0)>=n.max}),d=C=>{if(c.value){s.value=void 0;return}x.value||e(Ks,C.target.value)},f=C=>{var E;if(!x.value)switch(C.code){case n.trigger:C.preventDefault(),C.stopPropagation(),h();break;case jt.numpadEnter:n.trigger===jt.enter&&(C.preventDefault(),C.stopPropagation(),h());break;case jt.backspace:!s.value&&((E=n.modelValue)!=null&&E.length)&&(C.preventDefault(),C.stopPropagation(),p(n.modelValue.length-1));break}},h=()=>{var C,E;const I=(C=s.value)==null?void 0:C.trim();if(!I||c.value)return;const P=[...(E=n.modelValue)!=null?E:[],I];e(jn,P),e(si,P),e("add-tag",I),s.value=void 0},p=C=>{var E;const I=((E=n.modelValue)!=null?E:[]).slice(),[P]=I.splice(C,1);e(jn,I),e(si,I),e("remove-tag",P)},m=()=>{s.value=void 0,e(jn,void 0),e(si,void 0),e("clear")},v=(C,E,I)=>{var P;const L=((P=n.modelValue)!=null?P:[]).slice(),[N]=L.splice(C,1),F=E>C&&I==="before"?-1:E<C&&I==="after"?1:0;L.splice(E+F,0,N),e(jn,L),e(si,L)},g=()=>{var C;(C=a.value)==null||C.focus()},y=()=>{var C;(C=a.value)==null||C.blur()},{wrapperRef:_,isFocused:b}=um(a,{beforeFocus(){return r.value},afterBlur(){var C;h(),n.validateEvent&&((C=t==null?void 0:t.validate)==null||C.call(t,"blur").catch(E=>void 0))}}),{isComposing:x,handleCompositionStart:w,handleCompositionUpdate:A,handleCompositionEnd:T}=_w({afterComposition:d});return St(()=>n.modelValue,()=>{var C;n.validateEvent&&((C=t==null?void 0:t.validate)==null||C.call(t,si).catch(E=>void 0))}),{inputRef:a,wrapperRef:_,isFocused:b,isComposing:x,inputValue:s,size:i,tagSize:o,placeholder:l,closable:u,disabled:r,inputLimit:c,handleDragged:v,handleInput:d,handleKeydown:f,handleAddTag:h,handleRemoveTag:p,handleClear:m,handleCompositionStart:w,handleCompositionUpdate:A,handleCompositionEnd:T,focus:g,blur:y}}function yPe(){const n=ie(!1);return{hovering:n,handleMouseEnter:()=>{n.value=!0},handleMouseLeave:()=>{n.value=!1}}}function _Pe(){const n=jr(),e=ie(0),t=11,r=V(()=>({minWidth:`${Math.max(e.value,t)}px`}));return zi(n,()=>{var a,s;e.value=(s=(a=n.value)==null?void 0:a.getBoundingClientRect().width)!=null?s:0}),{calculatorRef:n,calculatorWidth:e,inputStyle:r}}function bPe({wrapperRef:n,handleDragged:e,afterDragged:t}){const r=kt("input-tag"),i=jr(),a=ie(!1);let s,o,l,u;function c(p){return`.${r.e("inner")} .${r.namespace.value}-tag:nth-child(${p+1})`}function d(p,m){s=m,o=n.value.querySelector(c(m)),o&&(o.style.opacity="0.5"),p.dataTransfer.effectAllowed="move"}function f(p,m){if(l=m,p.preventDefault(),p.dataTransfer.dropEffect="move",ti(s)||s===m){a.value=!1;return}const v=n.value.querySelector(c(m)).getBoundingClientRect(),g=s+1!==m,y=s-1!==m,_=p.clientX-v.left,b=g?y?.5:1:-1,x=y?g?.5:0:1;_<=v.width*b?u="before":_>v.width*x?u="after":u=void 0;const w=n.value.querySelector(`.${r.e("inner")}`),A=w.getBoundingClientRect(),T=Number.parseFloat(Cf(w,"gap"))/2,C=v.top-A.top;let E=-9999;if(u==="before")E=Math.max(v.left-A.left-T,Math.floor(-T/2));else if(u==="after"){const I=v.right-A.left;E=I+(A.width===I?Math.floor(T/2):T)}yee(i.value,{top:`${C}px`,left:`${E}px`}),a.value=!!u}function h(p){p.preventDefault(),o&&(o.style.opacity=""),u&&!ti(s)&&!ti(l)&&s!==l&&e(s,l,u),a.value=!1,s=void 0,o=null,l=void 0,u=void 0,t==null||t()}return{dropIndicatorRef:i,showDropIndicator:a,handleDragStart:d,handleDragOver:f,handleDragEnd:h}}function SPe({props:n,isFocused:e,hovering:t,disabled:r,inputValue:i,size:a,validateState:s,validateIcon:o,needStatusIcon:l}){const u=om(),c=Oa(),d=kt("input-tag"),f=kt("input"),h=V(()=>[d.b(),d.is("focused",e.value),d.is("hovering",t.value),d.is("disabled",r.value),d.m(a.value),d.e("wrapper"),u.class]),p=V(()=>[u.style]),m=V(()=>{var y,_;return[d.e("inner"),d.is("draggable",n.draggable),d.is("left-space",!((y=n.modelValue)!=null&&y.length)&&!c.prefix),d.is("right-space",!((_=n.modelValue)!=null&&_.length)&&!g.value)]}),v=V(()=>{var y;return n.clearable&&!r.value&&!n.readonly&&(((y=n.modelValue)==null?void 0:y.length)||i.value)&&(e.value||t.value)}),g=V(()=>c.suffix||v.value||s.value&&o.value&&l.value);return{ns:d,nsInput:f,containerKls:h,containerStyle:p,innerKls:m,showClear:v,showSuffix:g}}const xPe=Ne({name:"ElInputTag",inheritAttrs:!1}),wPe=Ne({...xPe,props:mPe,emits:vPe,setup(n,{expose:e,emit:t}){const r=n,i=yw(),a=Oa(),{form:s,formItem:o}=Zs(),{inputId:l}=ec(r,{formItemContext:o}),u=V(()=>{var Y;return(Y=s==null?void 0:s.statusIcon)!=null?Y:!1}),c=V(()=>(o==null?void 0:o.validateState)||""),d=V(()=>c.value&&I4[c.value]),{inputRef:f,wrapperRef:h,isFocused:p,inputValue:m,size:v,tagSize:g,placeholder:y,closable:_,disabled:b,handleDragged:x,handleInput:w,handleKeydown:A,handleRemoveTag:T,handleClear:C,handleCompositionStart:E,handleCompositionUpdate:I,handleCompositionEnd:P,focus:L,blur:N}=gPe({props:r,emit:t,formItem:o}),{hovering:F,handleMouseEnter:k,handleMouseLeave:H}=yPe(),{calculatorRef:U,inputStyle:B}=_Pe(),{dropIndicatorRef:$,showDropIndicator:ee,handleDragStart:re,handleDragOver:ne,handleDragEnd:ae}=bPe({wrapperRef:h,handleDragged:x,afterDragged:L}),{ns:pe,nsInput:de,containerKls:me,containerStyle:ke,innerKls:Be,showClear:Xe,showSuffix:Ye}=SPe({props:r,hovering:F,isFocused:p,inputValue:m,disabled:b,size:v,validateState:c,validateIcon:d,needStatusIcon:u});return e({focus:L,blur:N}),(Y,he)=>(W(),Se("div",{ref_key:"wrapperRef",ref:h,class:J(S(me)),style:Jt(S(ke)),onMouseenter:S(k),onMouseleave:S(H)},[S(a).prefix?(W(),Se("div",{key:0,class:J(S(pe).e("prefix"))},[at(Y.$slots,"prefix")],2)):st("v-if",!0),Ce("div",{class:J(S(Be))},[(W(!0),Se(on,null,ur(Y.modelValue,(le,Ke)=>(W(),pt(S(R1),{key:Ke,size:S(g),closable:S(_),type:Y.tagType,effect:Y.tagEffect,draggable:S(_)&&Y.draggable,"disable-transitions":"",onClose:Ue=>S(T)(Ke),onDragstart:Ue=>S(re)(Ue,Ke),onDragover:Ue=>S(ne)(Ue,Ke),onDragend:S(ae),onDrop:Tn(()=>{},["stop"])},{default:Oe(()=>[at(Y.$slots,"tag",{value:le,index:Ke},()=>[Xn(Ft(le),1)])]),_:2},1032,["size","closable","type","effect","draggable","onClose","onDragstart","onDragover","onDragend","onDrop"]))),128)),Ce("div",{class:J(S(pe).e("input-wrapper"))},[Wn(Ce("input",lr({id:S(l),ref_key:"inputRef",ref:f,"onUpdate:modelValue":le=>xi(m)?m.value=le:null},S(i),{type:"text",minlength:Y.minlength,maxlength:Y.maxlength,disabled:S(b),readonly:Y.readonly,autocomplete:Y.autocomplete,tabindex:Y.tabindex,placeholder:S(y),autofocus:Y.autofocus,ariaLabel:Y.ariaLabel,class:S(pe).e("input"),style:S(B),onCompositionstart:S(E),onCompositionupdate:S(I),onCompositionend:S(P),onInput:S(w),onKeydown:S(A)}),null,16,["id","onUpdate:modelValue","minlength","maxlength","disabled","readonly","autocomplete","tabindex","placeholder","autofocus","ariaLabel","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onKeydown"]),[[v4,S(m)]]),Ce("span",{ref_key:"calculatorRef",ref:U,"aria-hidden":"true",class:J(S(pe).e("input-calculator")),textContent:Ft(S(m))},null,10,["textContent"])],2),Wn(Ce("div",{ref_key:"dropIndicatorRef",ref:$,class:J(S(pe).e("drop-indicator"))},null,2),[[Nr,S(ee)]])],2),S(Ye)?(W(),Se("div",{key:1,class:J(S(pe).e("suffix"))},[at(Y.$slots,"suffix"),S(Xe)?(W(),pt(S(tn),{key:0,class:J([S(pe).e("icon"),S(pe).e("clear")]),onMousedown:Tn(S(Jr),["prevent"]),onClick:S(C)},{default:Oe(()=>[be(S(uh))]),_:1},8,["class","onMousedown","onClick"])):st("v-if",!0),S(c)&&S(d)&&S(u)?(W(),pt(S(tn),{key:1,class:J([S(de).e("icon"),S(de).e("validateIcon"),S(de).is("loading",S(c)==="validating")])},{default:Oe(()=>[(W(),pt(ir(S(d))))]),_:1},8,["class"])):st("v-if",!0)],2)):st("v-if",!0)],46,["onMouseenter","onMouseleave"]))}});var TPe=$t(wPe,[["__file","input-tag.vue"]]);const CPe=Bn(TPe),APe=Vt({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:li}}),EPe={click:n=>n instanceof MouseEvent},MPe=Ne({name:"ElLink"}),IPe=Ne({...MPe,props:APe,emits:EPe,setup(n,{emit:e}){const t=n,r=kt("link"),i=V(()=>[r.b(),r.m(t.type),r.is("disabled",t.disabled),r.is("underline",t.underline&&!t.disabled)]);function a(s){t.disabled||e("click",s)}return(s,o)=>(W(),Se("a",{class:J(S(i)),href:s.disabled||!s.href?void 0:s.href,target:s.disabled||!s.href?void 0:s.target,onClick:a},[s.icon?(W(),pt(S(tn),{key:0},{default:Oe(()=>[(W(),pt(ir(s.icon)))]),_:1})):st("v-if",!0),s.$slots.default?(W(),Se("span",{key:1,class:J(S(r).e("inner"))},[at(s.$slots,"default")],2)):st("v-if",!0),s.$slots.icon?at(s.$slots,"icon",{key:2}):st("v-if",!0)],10,["href","target"]))}});var DPe=$t(IPe,[["__file","link.vue"]]);const PPe=Bn(DPe);let RPe=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,t=>{t.addEventListener("keydown",r=>{let i=!1;switch(r.code){case jt.down:{this.gotoSubIndex(this.subIndex+1),i=!0;break}case jt.up:{this.gotoSubIndex(this.subIndex-1),i=!0;break}case jt.tab:{ZA(e,"mouseleave");break}case jt.enter:case jt.numpadEnter:case jt.space:{i=!0,r.currentTarget.click();break}}return i&&(r.preventDefault(),r.stopPropagation()),!1})})}},kPe=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new RPe(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let t=!1;switch(e.code){case jt.down:{ZA(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break}case jt.up:{ZA(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break}case jt.tab:{ZA(e.currentTarget,"mouseleave");break}case jt.enter:case jt.numpadEnter:case jt.space:{t=!0,e.currentTarget.click();break}}t&&e.preventDefault()})}},LPe=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){const t=this.domNode.childNodes;Array.from(t).forEach(r=>{r.nodeType===1&&new kPe(r,e)})}};const OPe=Ne({name:"ElMenuCollapseTransition",setup(){const n=kt("menu");return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,r){ku(t,`${n.namespace.value}-opacity-transition`),t.style.opacity="1",r()},onAfterEnter(t){xo(t,`${n.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),ml(t,n.m("collapse"))?(xo(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),ku(t,n.m("collapse"))):(ku(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),xo(t,n.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){ku(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function NPe(n,e,t,r,i,a){return W(),pt(Ka,lr({mode:"out-in"},n.listeners),{default:Oe(()=>[at(n.$slots,"default")]),_:3},16)}var BPe=$t(OPe,[["render",NPe],["__file","menu-collapse-transition.vue"]]);function Cne(n,e){const t=V(()=>{let i=n.parent;const a=[e.value];for(;i.type.name!=="ElMenu";)i.props.index&&a.unshift(i.props.index),i=i.parent;return a});return{parentMenu:V(()=>{let i=n.parent;for(;i&&!["ElMenu","ElSubMenu"].includes(i.type.name);)i=i.parent;return i}),indexPath:t}}function FPe(n){return V(()=>{const t=n.backgroundColor;return t?new ote(t).shade(20).toString():""})}const Ane=(n,e)=>{const t=kt("menu");return V(()=>t.cssVarBlock({"text-color":n.textColor||"","hover-text-color":n.textColor||"","bg-color":n.backgroundColor||"","hover-bg-color":FPe(n).value||"","active-color":n.activeTextColor||"",level:`${e}`}))},UPe=Vt({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:li},expandOpenIcon:{type:li},collapseCloseIcon:{type:li},collapseOpenIcon:{type:li}}),$D="ElSubMenu";var AB=Ne({name:$D,props:UPe,setup(n,{slots:e,expose:t}){const r=tr(),{indexPath:i,parentMenu:a}=Cne(r,V(()=>n.index)),s=kt("menu"),o=kt("sub-menu"),l=Yt("rootMenu");l||Xa($D,"can not inject root menu");const u=Yt(`subMenu:${a.value.uid}`);u||Xa($D,"can not inject sub menu");const c=ie({}),d=ie({});let f;const h=ie(!1),p=ie(),m=ie(null),v=V(()=>T.value==="horizontal"&&y.value?"bottom-start":"right-start"),g=V(()=>T.value==="horizontal"&&y.value||T.value==="vertical"&&!l.props.collapse?n.expandCloseIcon&&n.expandOpenIcon?w.value?n.expandOpenIcon:n.expandCloseIcon:lh:n.collapseCloseIcon&&n.collapseOpenIcon?w.value?n.collapseOpenIcon:n.collapseCloseIcon:jo),y=V(()=>u.level===0),_=V(()=>{const $=n.teleported;return $===void 0?y.value:$}),b=V(()=>l.props.collapse?`${s.namespace.value}-zoom-in-left`:`${s.namespace.value}-zoom-in-top`),x=V(()=>T.value==="horizontal"&&y.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),w=V(()=>l.openedMenus.includes(n.index)),A=V(()=>{let $=!1;return Object.values(c.value).forEach(ee=>{ee.active&&($=!0)}),Object.values(d.value).forEach(ee=>{ee.active&&($=!0)}),$}),T=V(()=>l.props.mode),C=$r({index:n.index,indexPath:i,active:A}),E=Ane(l.props,u.level+1),I=V(()=>{var $;return($=n.popperOffset)!=null?$:l.props.popperOffset}),P=V(()=>{var $;return($=n.popperClass)!=null?$:l.props.popperClass}),L=V(()=>{var $;return($=n.showTimeout)!=null?$:l.props.showTimeout}),N=V(()=>{var $;return($=n.hideTimeout)!=null?$:l.props.hideTimeout}),F=()=>{var $,ee,re;return(re=(ee=($=m.value)==null?void 0:$.popperRef)==null?void 0:ee.popperInstanceRef)==null?void 0:re.destroy()},k=$=>{$||F()},H=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||n.disabled||l.handleSubMenuClick({index:n.index,indexPath:i.value,active:A.value})},U=($,ee=L.value)=>{var re;if($.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||n.disabled){u.mouseInChild.value=!0;return}u.mouseInChild.value=!0,f==null||f(),{stop:f}=sv(()=>{l.openMenu(n.index,i.value)},ee),_.value&&((re=a.value.vnode.el)==null||re.dispatchEvent(new MouseEvent("mouseenter")))}},B=($=!1)=>{var ee;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){u.mouseInChild.value=!1;return}f==null||f(),u.mouseInChild.value=!1,{stop:f}=sv(()=>!h.value&&l.closeMenu(n.index,i.value),N.value),_.value&&$&&((ee=u.handleMouseleave)==null||ee.call(u,!0))};St(()=>l.props.collapse,$=>k(!!$));{const $=re=>{d.value[re.index]=re},ee=re=>{delete d.value[re.index]};pr(`subMenu:${r.uid}`,{addSubMenu:$,removeSubMenu:ee,handleMouseleave:B,mouseInChild:h,level:u.level+1})}return t({opened:w}),zn(()=>{l.addSubMenu(C),u.addSubMenu(C)}),Wr(()=>{u.removeSubMenu(C),l.removeSubMenu(C)}),()=>{var $;const ee=[($=e.title)==null?void 0:$.call(e),an(tn,{class:o.e("icon-arrow"),style:{transform:w.value?n.expandCloseIcon&&n.expandOpenIcon||n.collapseCloseIcon&&n.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>ln(g.value)?an(r.appContext.components[g.value]):an(g.value)})],re=l.isMenuPopup?an(Ys,{ref:m,visible:w.value,effect:"light",pure:!0,offset:I.value,showArrow:!1,persistent:!0,popperClass:P.value,placement:v.value,teleported:_.value,fallbackPlacements:x.value,transition:b.value,gpuAcceleration:!1},{content:()=>{var ne;return an("div",{class:[s.m(T.value),s.m("popup-container"),P.value],onMouseenter:ae=>U(ae,100),onMouseleave:()=>B(!0),onFocus:ae=>U(ae,100)},[an("ul",{class:[s.b(),s.m("popup"),s.m(`popup-${v.value}`)],style:E.value},[(ne=e.default)==null?void 0:ne.call(e)])])},default:()=>an("div",{class:o.e("title"),onClick:H},ee)}):an(on,{},[an("div",{class:o.e("title"),ref:p,onClick:H},ee),an(L4,{},{default:()=>{var ne;return Wn(an("ul",{role:"menu",class:[s.b(),s.m("inline")],style:E.value},[(ne=e.default)==null?void 0:ne.call(e)]),[[Nr,w.value]])}})]);return an("li",{class:[o.b(),o.is("active",A.value),o.is("opened",w.value),o.is("disabled",n.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:w.value,onMouseenter:U,onMouseleave:()=>B(),onFocus:U},[re])}}});const zPe=Vt({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:tt(Array),default:()=>Ki([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:li,default:()=>zxe},popperEffect:{type:tt(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),GD=n=>Ut(n)&&n.every(e=>ln(e)),HPe={close:(n,e)=>ln(n)&&GD(e),open:(n,e)=>ln(n)&&GD(e),select:(n,e,t,r)=>ln(n)&&GD(e)&&er(t)&&(r===void 0||r instanceof Promise)};var VPe=Ne({name:"ElMenu",props:zPe,emits:HPe,setup(n,{emit:e,slots:t,expose:r}){const i=tr(),a=i.appContext.config.globalProperties.$router,s=ie(),o=kt("menu"),l=kt("sub-menu"),u=ie(-1),c=ie(n.defaultOpeneds&&!n.collapse?n.defaultOpeneds.slice(0):[]),d=ie(n.defaultActive),f=ie({}),h=ie({}),p=V(()=>n.mode==="horizontal"||n.mode==="vertical"&&n.collapse),m=()=>{const F=d.value&&f.value[d.value];if(!F||n.mode==="horizontal"||n.collapse)return;F.indexPath.forEach(H=>{const U=h.value[H];U&&v(H,U.indexPath)})},v=(F,k)=>{c.value.includes(F)||(n.uniqueOpened&&(c.value=c.value.filter(H=>k.includes(H))),c.value.push(F),e("open",F,k))},g=F=>{const k=c.value.indexOf(F);k!==-1&&c.value.splice(k,1)},y=(F,k)=>{g(F),e("close",F,k)},_=({index:F,indexPath:k})=>{c.value.includes(F)?y(F,k):v(F,k)},b=F=>{(n.mode==="horizontal"||n.collapse)&&(c.value=[]);const{index:k,indexPath:H}=F;if(!(es(k)||es(H)))if(n.router&&a){const U=F.route||k,B=a.push(U).then($=>($||(d.value=k),$));e("select",k,H,{index:k,indexPath:H,route:U},B)}else d.value=k,e("select",k,H,{index:k,indexPath:H})},x=F=>{const k=f.value,H=k[F]||d.value&&k[d.value]||k[n.defaultActive];H?d.value=H.index:d.value=F},w=F=>{const k=getComputedStyle(F),H=Number.parseInt(k.marginLeft,10),U=Number.parseInt(k.marginRight,10);return F.offsetWidth+H+U||0},A=()=>{var F,k;if(!s.value)return-1;const H=Array.from((k=(F=s.value)==null?void 0:F.childNodes)!=null?k:[]).filter(pe=>pe.nodeName!=="#comment"&&(pe.nodeName!=="#text"||pe.nodeValue)),U=64,B=getComputedStyle(s.value),$=Number.parseInt(B.paddingLeft,10),ee=Number.parseInt(B.paddingRight,10),re=s.value.clientWidth-$-ee;let ne=0,ae=0;return H.forEach((pe,de)=>{ne+=w(pe),ne<=re-U&&(ae=de+1)}),ae===H.length?-1:ae},T=F=>h.value[F].indexPath,C=(F,k=33.34)=>{let H;return()=>{H&&clearTimeout(H),H=setTimeout(()=>{F()},k)}};let E=!0;const I=()=>{if(u.value===A())return;const F=()=>{u.value=-1,cn(()=>{u.value=A()})};E?F():C(F)(),E=!1};St(()=>n.defaultActive,F=>{f.value[F]||(d.value=""),x(F)}),St(()=>n.collapse,F=>{F&&(c.value=[])}),St(f.value,m);let P;vs(()=>{n.mode==="horizontal"&&n.ellipsis?P=zi(s,I).stop:P==null||P()});const L=ie(!1);{const F=B=>{h.value[B.index]=B},k=B=>{delete h.value[B.index]};pr("rootMenu",$r({props:n,openedMenus:c,items:f,subMenus:h,activeIndex:d,isMenuPopup:p,addMenuItem:B=>{f.value[B.index]=B},removeMenuItem:B=>{delete f.value[B.index]},addSubMenu:F,removeSubMenu:k,openMenu:v,closeMenu:y,handleMenuItemClick:b,handleSubMenuClick:_})),pr(`subMenu:${i.uid}`,{addSubMenu:F,removeSubMenu:k,mouseInChild:L,level:0})}zn(()=>{n.mode==="horizontal"&&new LPe(i.vnode.el,o.namespace.value)}),r({open:k=>{const{indexPath:H}=h.value[k];H.forEach(U=>v(U,H))},close:g,handleResize:I});const N=Ane(n,0);return()=>{var F,k;let H=(k=(F=t.default)==null?void 0:F.call(t))!=null?k:[];const U=[];if(n.mode==="horizontal"&&s.value){const ee=wp(H),re=u.value===-1?ee:ee.slice(0,u.value),ne=u.value===-1?[]:ee.slice(u.value);ne!=null&&ne.length&&n.ellipsis&&(H=re,U.push(an(AB,{index:"sub-menu-more",class:l.e("hide-arrow"),popperOffset:n.popperOffset},{title:()=>an(tn,{class:l.e("icon-more")},{default:()=>an(n.ellipsisIcon)}),default:()=>ne})))}const B=n.closeOnClickOutside?[[qf,()=>{c.value.length&&(L.value||(c.value.forEach(ee=>e("close",ee,T(ee))),c.value=[]))}]]:[],$=Wn(an("ul",{key:String(n.collapse),role:"menubar",ref:s,style:N.value,class:{[o.b()]:!0,[o.m(n.mode)]:!0,[o.m("collapse")]:n.collapse}},[...H,...U]),B);return n.collapseTransition&&n.mode==="vertical"?an(BPe,()=>$):$}}});const $Pe=Vt({index:{type:tt([String,null]),default:null},route:{type:tt([String,Object])},disabled:Boolean}),GPe={click:n=>ln(n.index)&&Ut(n.indexPath)},WD="ElMenuItem",WPe=Ne({name:WD,components:{ElTooltip:Ys},props:$Pe,emits:GPe,setup(n,{emit:e}){const t=tr(),r=Yt("rootMenu"),i=kt("menu"),a=kt("menu-item");r||Xa(WD,"can not inject root menu");const{parentMenu:s,indexPath:o}=Cne(t,Kr(n,"index")),l=Yt(`subMenu:${s.value.uid}`);l||Xa(WD,"can not inject sub menu");const u=V(()=>n.index===r.activeIndex),c=$r({index:n.index,indexPath:o,active:u}),d=()=>{n.disabled||(r.handleMenuItemClick({index:n.index,indexPath:o.value,route:n.route}),e("click",c))};return zn(()=>{l.addSubMenu(c),r.addMenuItem(c)}),Wr(()=>{l.removeSubMenu(c),r.removeMenuItem(c)}),{parentMenu:s,rootMenu:r,active:u,nsMenu:i,nsMenuItem:a,handleClick:d}}});function qPe(n,e,t,r,i,a){const s=Kt("el-tooltip");return W(),Se("li",{class:J([n.nsMenuItem.b(),n.nsMenuItem.is("active",n.active),n.nsMenuItem.is("disabled",n.disabled)]),role:"menuitem",tabindex:"-1",onClick:n.handleClick},[n.parentMenu.type.name==="ElMenu"&&n.rootMenu.props.collapse&&n.$slots.title?(W(),pt(s,{key:0,effect:n.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:Oe(()=>[at(n.$slots,"title")]),default:Oe(()=>[Ce("div",{class:J(n.nsMenu.be("tooltip","trigger"))},[at(n.$slots,"default")],2)]),_:3},8,["effect"])):(W(),Se(on,{key:1},[at(n.$slots,"default"),at(n.$slots,"title")],64))],10,["onClick"])}var Ene=$t(WPe,[["render",qPe],["__file","menu-item.vue"]]);const jPe={title:String},KPe="ElMenuItemGroup",XPe=Ne({name:KPe,props:jPe,setup(){return{ns:kt("menu-item-group")}}});function YPe(n,e,t,r,i,a){return W(),Se("li",{class:J(n.ns.b())},[Ce("div",{class:J(n.ns.e("title"))},[n.$slots.title?at(n.$slots,"title",{key:1}):(W(),Se(on,{key:0},[Xn(Ft(n.title),1)],64))],2),Ce("ul",null,[at(n.$slots,"default")])],2)}var Mne=$t(XPe,[["render",YPe],["__file","menu-item-group.vue"]]);const QPe=Bn(VPe,{MenuItem:Ene,MenuItemGroup:Mne,SubMenu:AB}),ZPe=Xi(Ene),JPe=Xi(Mne),eRe=Xi(AB),tRe=Vt({icon:{type:li,default:()=>uxe},title:String,content:{type:String,default:""}}),nRe={back:()=>!0},rRe=Ne({name:"ElPageHeader"}),iRe=Ne({...rRe,props:tRe,emits:nRe,setup(n,{emit:e}){const t=Oa(),{t:r}=Ar(),i=kt("page-header"),a=V(()=>[i.b(),{[i.m("has-breadcrumb")]:!!t.breadcrumb,[i.m("has-extra")]:!!t.extra,[i.is("contentful")]:!!t.default}]);function s(){e("back")}return(o,l)=>(W(),Se("div",{class:J(S(a))},[o.$slots.breadcrumb?(W(),Se("div",{key:0,class:J(S(i).e("breadcrumb"))},[at(o.$slots,"breadcrumb")],2)):st("v-if",!0),Ce("div",{class:J(S(i).e("header"))},[Ce("div",{class:J(S(i).e("left"))},[Ce("div",{class:J(S(i).e("back")),role:"button",tabindex:"0",onClick:s},[o.icon||o.$slots.icon?(W(),Se("div",{key:0,"aria-label":o.title||S(r)("el.pageHeader.title"),class:J(S(i).e("icon"))},[at(o.$slots,"icon",{},()=>[o.icon?(W(),pt(S(tn),{key:0},{default:Oe(()=>[(W(),pt(ir(o.icon)))]),_:1})):st("v-if",!0)])],10,["aria-label"])):st("v-if",!0),Ce("div",{class:J(S(i).e("title"))},[at(o.$slots,"title",{},()=>[Xn(Ft(o.title||S(r)("el.pageHeader.title")),1)])],2)],2),be(S(dne),{direction:"vertical"}),Ce("div",{class:J(S(i).e("content"))},[at(o.$slots,"content",{},()=>[Xn(Ft(o.content),1)])],2)],2),o.$slots.extra?(W(),Se("div",{key:0,class:J(S(i).e("extra"))},[at(o.$slots,"extra")],2)):st("v-if",!0)],2),o.$slots.default?(W(),Se("div",{key:1,class:J(S(i).e("main"))},[at(o.$slots,"default")],2)):st("v-if",!0)],2))}});var aRe=$t(iRe,[["__file","page-header.vue"]]);const sRe=Bn(aRe),Ine=Symbol("elPaginationKey"),oRe=Vt({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:li}}),lRe={click:n=>n instanceof MouseEvent},uRe=Ne({name:"ElPaginationPrev"}),cRe=Ne({...uRe,props:oRe,emits:lRe,setup(n){const e=n,{t}=Ar(),r=V(()=>e.disabled||e.currentPage<=1);return(i,a)=>(W(),Se("button",{type:"button",class:"btn-prev",disabled:S(r),"aria-label":i.prevText||S(t)("el.pagination.prev"),"aria-disabled":S(r),onClick:s=>i.$emit("click",s)},[i.prevText?(W(),Se("span",{key:0},Ft(i.prevText),1)):(W(),pt(S(tn),{key:1},{default:Oe(()=>[(W(),pt(ir(i.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var dRe=$t(cRe,[["__file","prev.vue"]]);const fRe=Vt({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:li}}),hRe=Ne({name:"ElPaginationNext"}),pRe=Ne({...hRe,props:fRe,emits:["click"],setup(n){const e=n,{t}=Ar(),r=V(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(i,a)=>(W(),Se("button",{type:"button",class:"btn-next",disabled:S(r),"aria-label":i.nextText||S(t)("el.pagination.next"),"aria-disabled":S(r),onClick:s=>i.$emit("click",s)},[i.nextText?(W(),Se("span",{key:0},Ft(i.nextText),1)):(W(),pt(S(tn),{key:1},{default:Oe(()=>[(W(),pt(ir(i.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var mRe=$t(pRe,[["__file","next.vue"]]);const Dne=Symbol("ElSelectGroup"),L_=Symbol("ElSelect");function vRe(n,e){const t=Yt(L_),r=Yt(Dne,{disabled:!1}),i=V(()=>c(vo(t.props.modelValue),n.value)),a=V(()=>{var h;if(t.props.multiple){const p=vo((h=t.props.modelValue)!=null?h:[]);return!i.value&&p.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),s=V(()=>n.label||(er(n.value)?"":n.value)),o=V(()=>n.value||n.label||""),l=V(()=>n.disabled||e.groupDisabled||a.value),u=tr(),c=(h=[],p)=>{if(er(n.value)){const m=t.props.valueKey;return h&&h.some(v=>ri(ba(v,m))===ba(p,m))}else return h&&h.includes(p)},d=()=>{!n.disabled&&!r.disabled&&(t.states.hoveringIndex=t.optionsArray.indexOf(u.proxy))},f=h=>{const p=new RegExp(cB(h),"i");e.visible=p.test(s.value)||n.created};return St(()=>s.value,()=>{!n.created&&!t.props.remote&&t.setSelected()}),St(()=>n.value,(h,p)=>{const{remote:m,valueKey:v}=t.props;if(h!==p&&(t.onOptionDestroy(p,u.proxy),t.onOptionCreate(u.proxy)),!n.created&&!m){if(v&&er(h)&&er(p)&&h[v]===p[v])return;t.setSelected()}}),St(()=>r.disabled,()=>{e.groupDisabled=r.disabled},{immediate:!0}),{select:t,currentLabel:s,currentValue:o,itemSelected:i,isDisabled:l,hoverItem:d,updateOption:f}}const gRe=Ne({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(n){const e=kt("select"),t=Ds(),r=V(()=>[e.be("dropdown","item"),e.is("disabled",S(o)),e.is("selected",S(s)),e.is("hovering",S(f))]),i=$r({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:a,itemSelected:s,isDisabled:o,select:l,hoverItem:u,updateOption:c}=vRe(n,i),{visible:d,hover:f}=ja(i),h=tr().proxy;l.onOptionCreate(h),Wr(()=>{const m=h.value,{selected:v}=l.states,g=v.some(y=>y.value===h.value);cn(()=>{l.states.cachedOptions.get(m)===h&&!g&&l.states.cachedOptions.delete(m)}),l.onOptionDestroy(m,h)});function p(){o.value||l.handleOptionSelect(h)}return{ns:e,id:t,containerKls:r,currentLabel:a,itemSelected:s,isDisabled:o,select:l,hoverItem:u,updateOption:c,visible:d,hover:f,selectOptionClick:p,states:i}}});function yRe(n,e,t,r,i,a){return Wn((W(),Se("li",{id:n.id,class:J(n.containerKls),role:"option","aria-disabled":n.isDisabled||void 0,"aria-selected":n.itemSelected,onMousemove:n.hoverItem,onClick:Tn(n.selectOptionClick,["stop"])},[at(n.$slots,"default",{},()=>[Ce("span",null,Ft(n.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[Nr,n.visible]])}var EB=$t(gRe,[["render",yRe],["__file","option.vue"]]);const _Re=Ne({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const n=Yt(L_),e=kt("select"),t=V(()=>n.props.popperClass),r=V(()=>n.props.multiple),i=V(()=>n.props.fitInputWidth),a=ie("");function s(){var o;a.value=`${(o=n.selectRef)==null?void 0:o.offsetWidth}px`}return zn(()=>{s(),zi(n.selectRef,s)}),{ns:e,minWidth:a,popperClass:t,isMultiple:r,isFitInputWidth:i}}});function bRe(n,e,t,r,i,a){return W(),Se("div",{class:J([n.ns.b("dropdown"),n.ns.is("multiple",n.isMultiple),n.popperClass]),style:Jt({[n.isFitInputWidth?"width":"minWidth"]:n.minWidth})},[n.$slots.header?(W(),Se("div",{key:0,class:J(n.ns.be("dropdown","header"))},[at(n.$slots,"header")],2)):st("v-if",!0),at(n.$slots,"default"),n.$slots.footer?(W(),Se("div",{key:1,class:J(n.ns.be("dropdown","footer"))},[at(n.$slots,"footer")],2)):st("v-if",!0)],6)}var SRe=$t(_Re,[["render",bRe],["__file","select-dropdown.vue"]]);const xRe=11,wRe=(n,e)=>{const{t}=Ar(),r=Ds(),i=kt("select"),a=kt("input"),s=$r({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),o=ie(null),l=ie(null),u=ie(null),c=ie(null),d=ie(null),f=ie(null),h=ie(null),p=ie(null),m=ie(null),v=ie(null),g=ie(null),y=ie(null),{isComposing:_,handleCompositionStart:b,handleCompositionUpdate:x,handleCompositionEnd:w}=_w({afterComposition:ct=>De(ct)}),{wrapperRef:A,isFocused:T,handleBlur:C}=um(d,{beforeFocus(){return H.value},afterFocus(){n.automaticDropdown&&!E.value&&(E.value=!0,s.menuVisibleOnFocus=!0)},beforeBlur(ct){var Ot,rn;return((Ot=u.value)==null?void 0:Ot.isFocusInsideContent(ct))||((rn=c.value)==null?void 0:rn.isFocusInsideContent(ct))},afterBlur(){E.value=!1,s.menuVisibleOnFocus=!1}}),E=ie(!1),I=ie(),{form:P,formItem:L}=Zs(),{inputId:N}=ec(n,{formItemContext:L}),{valueOnClear:F,isEmptyValue:k}=C4(n),H=V(()=>n.disabled||(P==null?void 0:P.disabled)),U=V(()=>Ut(n.modelValue)?n.modelValue.length>0:!k(n.modelValue)),B=V(()=>{var ct;return(ct=P==null?void 0:P.statusIcon)!=null?ct:!1}),$=V(()=>n.clearable&&!H.value&&s.inputHovering&&U.value),ee=V(()=>n.remote&&n.filterable&&!n.remoteShowSuffix?"":n.suffixIcon),re=V(()=>i.is("reverse",ee.value&&E.value)),ne=V(()=>(L==null?void 0:L.validateState)||""),ae=V(()=>I4[ne.value]),pe=V(()=>n.remote?300:0),de=V(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!s.inputValue&&s.options.size===0?!1:n.filterable&&s.inputValue&&s.options.size>0&&me.value===0?n.noMatchText||t("el.select.noMatch"):s.options.size===0?n.noDataText||t("el.select.noData"):null),me=V(()=>ke.value.filter(ct=>ct.visible).length),ke=V(()=>{const ct=Array.from(s.options.values()),Ot=[];return s.optionValues.forEach(rn=>{const gn=ct.findIndex(Zn=>Zn.value===rn);gn>-1&&Ot.push(ct[gn])}),Ot.length>=ct.length?Ot:ct}),Be=V(()=>Array.from(s.cachedOptions.values())),Xe=V(()=>{const ct=ke.value.filter(Ot=>!Ot.created).some(Ot=>Ot.currentLabel===s.inputValue);return n.filterable&&n.allowCreate&&s.inputValue!==""&&!ct}),Ye=()=>{n.filterable&&hn(n.filterMethod)||n.filterable&&n.remote&&hn(n.remoteMethod)||ke.value.forEach(ct=>{var Ot;(Ot=ct.updateOption)==null||Ot.call(ct,s.inputValue)})},Y=Ca(),he=V(()=>["small"].includes(Y.value)?"small":"default"),le=V({get(){return E.value&&de.value!==!1},set(ct){E.value=ct}}),Ke=V(()=>{if(n.multiple&&!ti(n.modelValue))return vo(n.modelValue).length===0&&!s.inputValue;const ct=Ut(n.modelValue)?n.modelValue[0]:n.modelValue;return n.filterable||ti(ct)?!s.inputValue:!0}),Ue=V(()=>{var ct;const Ot=(ct=n.placeholder)!=null?ct:t("el.select.placeholder");return n.multiple||!U.value?Ot:s.selectedLabel}),Ze=V(()=>WL?null:"mouseenter");St(()=>n.modelValue,(ct,Ot)=>{n.multiple&&n.filterable&&!n.reserveKeyword&&(s.inputValue="",je("")),ut(),!Ms(ct,Ot)&&n.validateEvent&&(L==null||L.validate("change").catch(rn=>void 0))},{flush:"post",deep:!0}),St(()=>E.value,ct=>{ct?je(s.inputValue):(s.inputValue="",s.previousQuery=null,s.isBeforeHide=!0),e("visible-change",ct)}),St(()=>s.options.entries(),()=>{Cr&&(ut(),n.defaultFirstOption&&(n.filterable||n.remote)&&me.value&&He())},{flush:"post"}),St(()=>s.hoveringIndex,ct=>{_n(ct)&&ct>-1?I.value=ke.value[ct]||{}:I.value={},ke.value.forEach(Ot=>{Ot.hover=I.value===Ot})}),vs(()=>{s.isBeforeHide||Ye()});const je=ct=>{s.previousQuery===ct||_.value||(s.previousQuery=ct,n.filterable&&hn(n.filterMethod)?n.filterMethod(ct):n.filterable&&n.remote&&hn(n.remoteMethod)&&n.remoteMethod(ct),n.defaultFirstOption&&(n.filterable||n.remote)&&me.value?cn(He):cn(q))},He=()=>{const ct=ke.value.filter(Zn=>Zn.visible&&!Zn.disabled&&!Zn.states.groupDisabled),Ot=ct.find(Zn=>Zn.created),rn=ct[0],gn=ke.value.map(Zn=>Zn.value);s.hoveringIndex=Ie(gn,Ot||rn)},ut=()=>{if(n.multiple)s.selectedLabel="";else{const Ot=Ut(n.modelValue)?n.modelValue[0]:n.modelValue,rn=ge(Ot);s.selectedLabel=rn.currentLabel,s.selected=[rn];return}const ct=[];ti(n.modelValue)||vo(n.modelValue).forEach(Ot=>{ct.push(ge(Ot))}),s.selected=ct},ge=ct=>{let Ot;const rn=Fx(ct);for(let rt=s.cachedOptions.size-1;rt>=0;rt--){const fr=Be.value[rt];if(rn?ba(fr.value,n.valueKey)===ba(ct,n.valueKey):fr.value===ct){Ot={value:ct,currentLabel:fr.currentLabel,get isDisabled(){return fr.isDisabled}};break}}if(Ot)return Ot;const gn=rn?ct.label:ct??"";return{value:ct,currentLabel:gn}},q=()=>{s.hoveringIndex=ke.value.findIndex(ct=>s.selected.some(Ot=>Yn(Ot)===Yn(ct)))},te=()=>{s.selectionWidth=l.value.getBoundingClientRect().width},ye=()=>{s.calculatorWidth=f.value.getBoundingClientRect().width},Ve=()=>{s.collapseItemWidth=g.value.getBoundingClientRect().width},et=()=>{var ct,Ot;(Ot=(ct=u.value)==null?void 0:ct.updatePopper)==null||Ot.call(ct)},At=()=>{var ct,Ot;(Ot=(ct=c.value)==null?void 0:ct.updatePopper)==null||Ot.call(ct)},It=()=>{s.inputValue.length>0&&!E.value&&(E.value=!0),je(s.inputValue)},De=ct=>{if(s.inputValue=ct.target.value,n.remote)Tt();else return It()},Tt=Cl(()=>{It()},pe.value),ot=ct=>{Ms(n.modelValue,ct)||e(si,ct)},G=ct=>eee(ct,Ot=>{const rn=s.cachedOptions.get(Ot);return rn&&!rn.disabled&&!rn.states.groupDisabled}),_e=ct=>{if(n.multiple&&ct.code!==jt.delete&&ct.target.value.length<=0){const Ot=vo(n.modelValue).slice(),rn=G(Ot);if(rn<0)return;const gn=Ot[rn];Ot.splice(rn,1),e(jn,Ot),ot(Ot),e("remove-tag",gn)}},ve=(ct,Ot)=>{const rn=s.selected.indexOf(Ot);if(rn>-1&&!H.value){const gn=vo(n.modelValue).slice();gn.splice(rn,1),e(jn,gn),ot(gn),e("remove-tag",Ot.value)}ct.stopPropagation(),Wt()},Le=ct=>{ct.stopPropagation();const Ot=n.multiple?[]:F.value;if(n.multiple)for(const rn of s.selected)rn.isDisabled&&Ot.push(rn.value);e(jn,Ot),ot(Ot),s.hoveringIndex=-1,E.value=!1,e("clear"),Wt()},we=ct=>{var Ot;if(n.multiple){const rn=vo((Ot=n.modelValue)!=null?Ot:[]).slice(),gn=Ie(rn,ct);gn>-1?rn.splice(gn,1):(n.multipleLimit<=0||rn.length<n.multipleLimit)&&rn.push(ct.value),e(jn,rn),ot(rn),ct.created&&je(""),n.filterable&&!n.reserveKeyword&&(s.inputValue="")}else e(jn,ct.value),ot(ct.value),E.value=!1;Wt(),!E.value&&cn(()=>{wt(ct)})},Ie=(ct=[],Ot)=>ti(Ot)?-1:er(Ot.value)?ct.findIndex(rn=>Ms(ba(rn,n.valueKey),Yn(Ot))):ct.indexOf(Ot.value),wt=ct=>{var Ot,rn,gn,Zn,rt;const fr=Ut(ct)?ct[0]:ct;let mt=null;if(fr!=null&&fr.value){const Fe=ke.value.filter(Dt=>Dt.value===fr.value);Fe.length>0&&(mt=Fe[0].$el)}if(u.value&&mt){const Fe=(Zn=(gn=(rn=(Ot=u.value)==null?void 0:Ot.popperRef)==null?void 0:rn.contentRef)==null?void 0:gn.querySelector)==null?void 0:Zn.call(gn,`.${i.be("dropdown","wrap")}`);Fe&&UN(Fe,mt)}(rt=y.value)==null||rt.handleScroll()},Pe=ct=>{s.options.set(ct.value,ct),s.cachedOptions.set(ct.value,ct)},Rt=(ct,Ot)=>{s.options.get(ct)===Ot&&s.options.delete(ct)},dt=V(()=>{var ct,Ot;return(Ot=(ct=u.value)==null?void 0:ct.popperRef)==null?void 0:Ot.contentRef}),Mt=()=>{s.isBeforeHide=!1,cn(()=>wt(s.selected))},Wt=()=>{var ct;(ct=d.value)==null||ct.focus()},zt=()=>{var ct;if(E.value){E.value=!1,cn(()=>{var Ot;return(Ot=d.value)==null?void 0:Ot.blur()});return}(ct=d.value)==null||ct.blur()},Sn=ct=>{Le(ct)},On=ct=>{if(E.value=!1,T.value){const Ot=new FocusEvent("focus",ct);cn(()=>C(Ot))}},Er=()=>{s.inputValue.length>0?s.inputValue="":E.value=!1},Qn=()=>{H.value||(WL&&(s.inputHovering=!0),s.menuVisibleOnFocus?s.menuVisibleOnFocus=!1:E.value=!E.value)},Xr=()=>{if(!E.value)Qn();else{const ct=ke.value[s.hoveringIndex];ct&&!ct.isDisabled&&we(ct)}},Yn=ct=>er(ct.value)?ba(ct.value,n.valueKey):ct.value,Q=V(()=>ke.value.filter(ct=>ct.visible).every(ct=>ct.isDisabled)),ue=V(()=>n.multiple?n.collapseTags?s.selected.slice(0,n.maxCollapseTags):s.selected:[]),Zt=V(()=>n.multiple?n.collapseTags?s.selected.slice(n.maxCollapseTags):[]:[]),Ee=ct=>{if(!E.value){E.value=!0;return}if(!(s.options.size===0||me.value===0||_.value)&&!Q.value){ct==="next"?(s.hoveringIndex++,s.hoveringIndex===s.options.size&&(s.hoveringIndex=0)):ct==="prev"&&(s.hoveringIndex--,s.hoveringIndex<0&&(s.hoveringIndex=s.options.size-1));const Ot=ke.value[s.hoveringIndex];(Ot.isDisabled||!Ot.visible)&&Ee(ct),cn(()=>wt(I.value))}},ce=()=>{if(!l.value)return 0;const ct=window.getComputedStyle(l.value);return Number.parseFloat(ct.gap||"6px")},Et=V(()=>{const ct=ce();return{maxWidth:`${g.value&&n.maxCollapseTags===1?s.selectionWidth-s.collapseItemWidth-ct:s.selectionWidth}px`}}),Ct=V(()=>({maxWidth:`${s.selectionWidth}px`})),Ht=V(()=>({width:`${Math.max(s.calculatorWidth,xRe)}px`}));return zi(l,te),zi(f,ye),zi(m,et),zi(A,et),zi(v,At),zi(g,Ve),zn(()=>{ut()}),{inputId:N,contentId:r,nsSelect:i,nsInput:a,states:s,isFocused:T,expanded:E,optionsArray:ke,hoverOption:I,selectSize:Y,filteredOptionsCount:me,resetCalculatorWidth:ye,updateTooltip:et,updateTagTooltip:At,debouncedOnInputChange:Tt,onInput:De,deletePrevTag:_e,deleteTag:ve,deleteSelected:Le,handleOptionSelect:we,scrollToOption:wt,hasModelValue:U,shouldShowPlaceholder:Ke,currentPlaceholder:Ue,mouseEnterEventName:Ze,needStatusIcon:B,showClose:$,iconComponent:ee,iconReverse:re,validateState:ne,validateIcon:ae,showNewOption:Xe,updateOptions:Ye,collapseTagSize:he,setSelected:ut,selectDisabled:H,emptyText:de,handleCompositionStart:b,handleCompositionUpdate:x,handleCompositionEnd:w,onOptionCreate:Pe,onOptionDestroy:Rt,handleMenuEnter:Mt,focus:Wt,blur:zt,handleClearClick:Sn,handleClickOutside:On,handleEsc:Er,toggleMenu:Qn,selectOption:Xr,getValueKey:Yn,navigateOptions:Ee,dropdownMenuVisible:le,showTagList:ue,collapseTagList:Zt,tagStyle:Et,collapseTagStyle:Ct,inputStyle:Ht,popperRef:dt,inputRef:d,tooltipRef:u,tagTooltipRef:c,calculatorRef:f,prefixRef:h,suffixRef:p,selectRef:o,wrapperRef:A,selectionRef:l,scrollbarRef:y,menuRef:m,tagMenuRef:v,collapseItemRef:g}};var TRe=Ne({name:"ElOptions",setup(n,{slots:e}){const t=Yt(L_);let r=[];return()=>{var i,a;const s=(i=e.default)==null?void 0:i.call(e),o=[];function l(u){Ut(u)&&u.forEach(c=>{var d,f,h,p;const m=(d=(c==null?void 0:c.type)||{})==null?void 0:d.name;m==="ElOptionGroup"?l(!ln(c.children)&&!Ut(c.children)&&hn((f=c.children)==null?void 0:f.default)?(h=c.children)==null?void 0:h.default():c.children):m==="ElOption"?o.push((p=c.props)==null?void 0:p.value):Ut(c.children)&&l(c.children)})}return s.length&&l((a=s[0])==null?void 0:a.children),Ms(o,r)||(r=o,t&&(t.states.optionValues=o)),s}}});const CRe=Vt({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:La,effect:{type:tt(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:tt(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:os.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:li,default:uh},fitInputWidth:Boolean,suffixIcon:{type:li,default:lh},tagType:{...Wf.type,default:"info"},tagEffect:{...Wf.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:tt(String),values:ch,default:"bottom-start"},fallbackPlacements:{type:tt(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:String,...D_,...ks(["ariaLabel"])}),jV="ElSelect",ARe=Ne({name:jV,componentName:jV,components:{ElSelectMenu:SRe,ElOption:EB,ElOptions:TRe,ElTag:R1,ElScrollbar:Vd,ElTooltip:Ys,ElIcon:tn},directives:{ClickOutside:qf},props:CRe,emits:[jn,si,"remove-tag","clear","visible-change","focus","blur"],setup(n,{emit:e}){const t=V(()=>{const{modelValue:s,multiple:o}=n,l=o?[]:void 0;return Ut(s)?o?s:l:o?l:s}),r=$r({...ja(n),modelValue:t}),i=wRe(r,e);pr(L_,$r({props:r,states:i.states,optionsArray:i.optionsArray,handleOptionSelect:i.handleOptionSelect,onOptionCreate:i.onOptionCreate,onOptionDestroy:i.onOptionDestroy,selectRef:i.selectRef,setSelected:i.setSelected}));const a=V(()=>n.multiple?i.states.selected.map(s=>s.currentLabel):i.states.selectedLabel);return{...i,modelValue:t,selectedLabel:a}}});function ERe(n,e,t,r,i,a){const s=Kt("el-tag"),o=Kt("el-tooltip"),l=Kt("el-icon"),u=Kt("el-option"),c=Kt("el-options"),d=Kt("el-scrollbar"),f=Kt("el-select-menu"),h=h4("click-outside");return Wn((W(),Se("div",{ref:"selectRef",class:J([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),[GS(n.mouseEnterEventName)]:p=>n.states.inputHovering=!0,onMouseleave:p=>n.states.inputHovering=!1},[be(o,{ref:"tooltipRef",visible:n.dropdownMenuVisible,placement:n.placement,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,pure:"",trigger:"click",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:n.persistent,"append-to":n.appendTo,"show-arrow":n.showArrow,offset:n.offset,onBeforeShow:n.handleMenuEnter,onHide:p=>n.states.isBeforeHide=!1},{default:Oe(()=>{var p;return[Ce("div",{ref:"wrapperRef",class:J([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:Tn(n.toggleMenu,["prevent"])},[n.$slots.prefix?(W(),Se("div",{key:0,ref:"prefixRef",class:J(n.nsSelect.e("prefix"))},[at(n.$slots,"prefix")],2)):st("v-if",!0),Ce("div",{ref:"selectionRef",class:J([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.states.selected.length)])},[n.multiple?at(n.$slots,"tag",{key:0},()=>[(W(!0),Se(on,null,ur(n.showTagList,m=>(W(),Se("div",{key:n.getValueKey(m),class:J(n.nsSelect.e("selected-item"))},[be(s,{closable:!n.selectDisabled&&!m.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Jt(n.tagStyle),onClose:v=>n.deleteTag(v,m)},{default:Oe(()=>[Ce("span",{class:J(n.nsSelect.e("tags-text"))},[at(n.$slots,"label",{label:m.currentLabel,value:m.value},()=>[Xn(Ft(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.states.selected.length>n.maxCollapseTags?(W(),pt(o,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:Oe(()=>[Ce("div",{ref:"collapseItemRef",class:J(n.nsSelect.e("selected-item"))},[be(s,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Jt(n.collapseTagStyle)},{default:Oe(()=>[Ce("span",{class:J(n.nsSelect.e("tags-text"))}," + "+Ft(n.states.selected.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:Oe(()=>[Ce("div",{ref:"tagMenuRef",class:J(n.nsSelect.e("selection"))},[(W(!0),Se(on,null,ur(n.collapseTagList,m=>(W(),Se("div",{key:n.getValueKey(m),class:J(n.nsSelect.e("selected-item"))},[be(s,{class:"in-tooltip",closable:!n.selectDisabled&&!m.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:v=>n.deleteTag(v,m)},{default:Oe(()=>[Ce("span",{class:J(n.nsSelect.e("tags-text"))},[at(n.$slots,"label",{label:m.currentLabel,value:m.value},()=>[Xn(Ft(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):st("v-if",!0)]):st("v-if",!0),Ce("div",{class:J([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Wn(Ce("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":m=>n.states.inputValue=m,type:"text",name:n.name,class:J([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,autocomplete:n.autocomplete,style:Jt(n.inputStyle),tabindex:n.tabindex,role:"combobox",readonly:!n.filterable,spellcheck:"false","aria-activedescendant":((p=n.hoverOption)==null?void 0:p.id)||"","aria-controls":n.contentId,"aria-expanded":n.dropdownMenuVisible,"aria-label":n.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[hi(Tn(m=>n.navigateOptions("next"),["stop","prevent"]),["down"]),hi(Tn(m=>n.navigateOptions("prev"),["stop","prevent"]),["up"]),hi(Tn(n.handleEsc,["stop","prevent"]),["esc"]),hi(Tn(n.selectOption,["stop","prevent"]),["enter"]),hi(Tn(n.deletePrevTag,["stop"]),["delete"])],onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onInput:n.onInput,onClick:Tn(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[v4,n.states.inputValue]]),n.filterable?(W(),Se("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:J(n.nsSelect.e("input-calculator")),textContent:Ft(n.states.inputValue)},null,10,["textContent"])):st("v-if",!0)],2),n.shouldShowPlaceholder?(W(),Se("div",{key:1,class:J([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?at(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[Ce("span",null,Ft(n.currentPlaceholder),1)]):(W(),Se("span",{key:1},Ft(n.currentPlaceholder),1))],2)):st("v-if",!0)],2),Ce("div",{ref:"suffixRef",class:J(n.nsSelect.e("suffix"))},[n.iconComponent&&!n.showClose?(W(),pt(l,{key:0,class:J([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.iconReverse])},{default:Oe(()=>[(W(),pt(ir(n.iconComponent)))]),_:1},8,["class"])):st("v-if",!0),n.showClose&&n.clearIcon?(W(),pt(l,{key:1,class:J([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.nsSelect.e("clear")]),onClick:n.handleClearClick},{default:Oe(()=>[(W(),pt(ir(n.clearIcon)))]),_:1},8,["class","onClick"])):st("v-if",!0),n.validateState&&n.validateIcon&&n.needStatusIcon?(W(),pt(l,{key:2,class:J([n.nsInput.e("icon"),n.nsInput.e("validateIcon")])},{default:Oe(()=>[(W(),pt(ir(n.validateIcon)))]),_:1},8,["class"])):st("v-if",!0)],2)],10,["onClick"])]}),content:Oe(()=>[be(f,{ref:"menuRef"},{default:Oe(()=>[n.$slots.header?(W(),Se("div",{key:0,class:J(n.nsSelect.be("dropdown","header")),onClick:Tn(()=>{},["stop"])},[at(n.$slots,"header")],10,["onClick"])):st("v-if",!0),Wn(be(d,{id:n.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":n.nsSelect.be("dropdown","wrap"),"view-class":n.nsSelect.be("dropdown","list"),class:J([n.nsSelect.is("empty",n.filteredOptionsCount===0)]),role:"listbox","aria-label":n.ariaLabel,"aria-orientation":"vertical"},{default:Oe(()=>[n.showNewOption?(W(),pt(u,{key:0,value:n.states.inputValue,created:!0},null,8,["value"])):st("v-if",!0),be(c,null,{default:Oe(()=>[at(n.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Nr,n.states.options.size>0&&!n.loading]]),n.$slots.loading&&n.loading?(W(),Se("div",{key:1,class:J(n.nsSelect.be("dropdown","loading"))},[at(n.$slots,"loading")],2)):n.loading||n.filteredOptionsCount===0?(W(),Se("div",{key:2,class:J(n.nsSelect.be("dropdown","empty"))},[at(n.$slots,"empty",{},()=>[Ce("span",null,Ft(n.emptyText),1)])],2)):st("v-if",!0),n.$slots.footer?(W(),Se("div",{key:3,class:J(n.nsSelect.be("dropdown","footer")),onClick:Tn(()=>{},["stop"])},[at(n.$slots,"footer")],10,["onClick"])):st("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[h,n.handleClickOutside,n.popperRef]])}var MRe=$t(ARe,[["render",ERe],["__file","select.vue"]]);const IRe=Ne({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(n){const e=kt("select"),t=ie(null),r=tr(),i=ie([]);pr(Dne,$r({...ja(n)}));const a=V(()=>i.value.some(u=>u.visible===!0)),s=u=>{var c,d;return((c=u.type)==null?void 0:c.name)==="ElOption"&&!!((d=u.component)!=null&&d.proxy)},o=u=>{const c=vo(u),d=[];return c.forEach(f=>{var h,p;s(f)?d.push(f.component.proxy):(h=f.children)!=null&&h.length?d.push(...o(f.children)):(p=f.component)!=null&&p.subTree&&d.push(...o(f.component.subTree))}),d},l=()=>{i.value=o(r.subTree)};return zn(()=>{l()}),oee(t,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:t,visible:a,ns:e}}});function DRe(n,e,t,r,i,a){return Wn((W(),Se("ul",{ref:"groupRef",class:J(n.ns.be("group","wrap"))},[Ce("li",{class:J(n.ns.be("group","title"))},Ft(n.label),3),Ce("li",null,[Ce("ul",{class:J(n.ns.b("group"))},[at(n.$slots,"default")],2)])],2)),[[Nr,n.visible]])}var Pne=$t(IRe,[["render",DRe],["__file","option-group.vue"]]);const lv=Bn(MRe,{Option:EB,OptionGroup:Pne}),hM=Xi(EB),PRe=Xi(Pne),MB=()=>Yt(Ine,{}),RRe=Vt({pageSize:{type:Number,required:!0},pageSizes:{type:tt(Array),default:()=>Ki([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:Hd},appendSizeTo:String}),kRe=Ne({name:"ElPaginationSizes"}),LRe=Ne({...kRe,props:RRe,emits:["page-size-change"],setup(n,{emit:e}){const t=n,{t:r}=Ar(),i=kt("pagination"),a=MB(),s=ie(t.pageSize);St(()=>t.pageSizes,(u,c)=>{if(!Ms(u,c)&&Ut(u)){const d=u.includes(t.pageSize)?t.pageSize:t.pageSizes[0];e("page-size-change",d)}}),St(()=>t.pageSize,u=>{s.value=u});const o=V(()=>t.pageSizes);function l(u){var c;u!==s.value&&(s.value=u,(c=a.handleSizeChange)==null||c.call(a,Number(u)))}return(u,c)=>(W(),Se("span",{class:J(S(i).e("sizes"))},[be(S(lv),{"model-value":s.value,disabled:u.disabled,"popper-class":u.popperClass,size:u.size,teleported:u.teleported,"validate-event":!1,"append-to":u.appendSizeTo,onChange:l},{default:Oe(()=>[(W(!0),Se(on,null,ur(S(o),d=>(W(),pt(S(hM),{key:d,value:d,label:d+S(r)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var ORe=$t(LRe,[["__file","sizes.vue"]]);const NRe=Vt({size:{type:String,values:Hd}}),BRe=Ne({name:"ElPaginationJumper"}),FRe=Ne({...BRe,props:NRe,setup(n){const{t:e}=Ar(),t=kt("pagination"),{pageCount:r,disabled:i,currentPage:a,changeEvent:s}=MB(),o=ie(),l=V(()=>{var d;return(d=o.value)!=null?d:a==null?void 0:a.value});function u(d){o.value=d?+d:""}function c(d){d=Math.trunc(+d),s==null||s(d),o.value=void 0}return(d,f)=>(W(),Se("span",{class:J(S(t).e("jump")),disabled:S(i)},[Ce("span",{class:J([S(t).e("goto")])},Ft(S(e)("el.pagination.goto")),3),be(S(_o),{size:d.size,class:J([S(t).e("editor"),S(t).is("in-pagination")]),min:1,max:S(r),disabled:S(i),"model-value":S(l),"validate-event":!1,"aria-label":S(e)("el.pagination.page"),type:"number","onUpdate:modelValue":u,onChange:c},null,8,["size","class","max","disabled","model-value","aria-label"]),Ce("span",{class:J([S(t).e("classifier")])},Ft(S(e)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var URe=$t(FRe,[["__file","jumper.vue"]]);const zRe=Vt({total:{type:Number,default:1e3}}),HRe=Ne({name:"ElPaginationTotal"}),VRe=Ne({...HRe,props:zRe,setup(n){const{t:e}=Ar(),t=kt("pagination"),{disabled:r}=MB();return(i,a)=>(W(),Se("span",{class:J(S(t).e("total")),disabled:S(r)},Ft(S(e)("el.pagination.total",{total:i.total})),11,["disabled"]))}});var $Re=$t(VRe,[["__file","total.vue"]]);const GRe=Vt({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),WRe=Ne({name:"ElPaginationPager"}),qRe=Ne({...WRe,props:GRe,emits:["change"],setup(n,{emit:e}){const t=n,r=kt("pager"),i=kt("icon"),{t:a}=Ar(),s=ie(!1),o=ie(!1),l=ie(!1),u=ie(!1),c=ie(!1),d=ie(!1),f=V(()=>{const b=t.pagerCount,x=(b-1)/2,w=Number(t.currentPage),A=Number(t.pageCount);let T=!1,C=!1;A>b&&(w>b-x&&(T=!0),w<A-x&&(C=!0));const E=[];if(T&&!C){const I=A-(b-2);for(let P=I;P<A;P++)E.push(P)}else if(!T&&C)for(let I=2;I<b;I++)E.push(I);else if(T&&C){const I=Math.floor(b/2)-1;for(let P=w-I;P<=w+I;P++)E.push(P)}else for(let I=2;I<A;I++)E.push(I);return E}),h=V(()=>["more","btn-quickprev",i.b(),r.is("disabled",t.disabled)]),p=V(()=>["more","btn-quicknext",i.b(),r.is("disabled",t.disabled)]),m=V(()=>t.disabled?-1:0);vs(()=>{const b=(t.pagerCount-1)/2;s.value=!1,o.value=!1,t.pageCount>t.pagerCount&&(t.currentPage>t.pagerCount-b&&(s.value=!0),t.currentPage<t.pageCount-b&&(o.value=!0))});function v(b=!1){t.disabled||(b?l.value=!0:u.value=!0)}function g(b=!1){b?c.value=!0:d.value=!0}function y(b){const x=b.target;if(x.tagName.toLowerCase()==="li"&&Array.from(x.classList).includes("number")){const w=Number(x.textContent);w!==t.currentPage&&e("change",w)}else x.tagName.toLowerCase()==="li"&&Array.from(x.classList).includes("more")&&_(b)}function _(b){const x=b.target;if(x.tagName.toLowerCase()==="ul"||t.disabled)return;let w=Number(x.textContent);const A=t.pageCount,T=t.currentPage,C=t.pagerCount-2;x.className.includes("more")&&(x.className.includes("quickprev")?w=T-C:x.className.includes("quicknext")&&(w=T+C)),Number.isNaN(+w)||(w<1&&(w=1),w>A&&(w=A)),w!==T&&e("change",w)}return(b,x)=>(W(),Se("ul",{class:J(S(r).b()),onClick:_,onKeyup:hi(y,["enter"])},[b.pageCount>0?(W(),Se("li",{key:0,class:J([[S(r).is("active",b.currentPage===1),S(r).is("disabled",b.disabled)],"number"]),"aria-current":b.currentPage===1,"aria-label":S(a)("el.pagination.currentPage",{pager:1}),tabindex:S(m)}," 1 ",10,["aria-current","aria-label","tabindex"])):st("v-if",!0),s.value?(W(),Se("li",{key:1,class:J(S(h)),tabindex:S(m),"aria-label":S(a)("el.pagination.prevPages",{pager:b.pagerCount-2}),onMouseenter:w=>v(!0),onMouseleave:w=>l.value=!1,onFocus:w=>g(!0),onBlur:w=>c.value=!1},[(l.value||c.value)&&!b.disabled?(W(),pt(S(zp),{key:0})):(W(),pt(S(qH),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):st("v-if",!0),(W(!0),Se(on,null,ur(S(f),w=>(W(),Se("li",{key:w,class:J([[S(r).is("active",b.currentPage===w),S(r).is("disabled",b.disabled)],"number"]),"aria-current":b.currentPage===w,"aria-label":S(a)("el.pagination.currentPage",{pager:w}),tabindex:S(m)},Ft(w),11,["aria-current","aria-label","tabindex"]))),128)),o.value?(W(),Se("li",{key:2,class:J(S(p)),tabindex:S(m),"aria-label":S(a)("el.pagination.nextPages",{pager:b.pagerCount-2}),onMouseenter:w=>v(),onMouseleave:w=>u.value=!1,onFocus:w=>g(),onBlur:w=>d.value=!1},[(u.value||d.value)&&!b.disabled?(W(),pt(S(Hp),{key:0})):(W(),pt(S(qH),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):st("v-if",!0),b.pageCount>1?(W(),Se("li",{key:3,class:J([[S(r).is("active",b.currentPage===b.pageCount),S(r).is("disabled",b.disabled)],"number"]),"aria-current":b.currentPage===b.pageCount,"aria-label":S(a)("el.pagination.currentPage",{pager:b.pageCount}),tabindex:S(m)},Ft(b.pageCount),11,["aria-current","aria-label","tabindex"])):st("v-if",!0)],42,["onKeyup"]))}});var jRe=$t(qRe,[["__file","pager.vue"]]);const Io=n=>typeof n!="number",KRe=Vt({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:n=>_n(n)&&Math.trunc(n)===n&&n>4&&n<22&&n%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:tt(Array),default:()=>Ki([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:li,default:()=>Up},nextText:{type:String,default:""},nextIcon:{type:li,default:()=>jo},teleported:{type:Boolean,default:!0},small:Boolean,size:La,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),XRe={"update:current-page":n=>_n(n),"update:page-size":n=>_n(n),"size-change":n=>_n(n),change:(n,e)=>_n(n)&&_n(e),"current-change":n=>_n(n),"prev-click":n=>_n(n),"next-click":n=>_n(n)},KV="ElPagination";var YRe=Ne({name:KV,props:KRe,emits:XRe,setup(n,{emit:e,slots:t}){const{t:r}=Ar(),i=kt("pagination"),a=tr().vnode.props||{},s=pee(),o=V(()=>{var x;return n.small?"small":(x=n.size)!=null?x:s.value});Sp({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},V(()=>!!n.small));const l="onUpdate:currentPage"in a||"onUpdate:current-page"in a||"onCurrentChange"in a,u="onUpdate:pageSize"in a||"onUpdate:page-size"in a||"onSizeChange"in a,c=V(()=>{if(Io(n.total)&&Io(n.pageCount)||!Io(n.currentPage)&&!l)return!1;if(n.layout.includes("sizes")){if(Io(n.pageCount)){if(!Io(n.total)&&!Io(n.pageSize)&&!u)return!1}else if(!u)return!1}return!0}),d=ie(Io(n.defaultPageSize)?10:n.defaultPageSize),f=ie(Io(n.defaultCurrentPage)?1:n.defaultCurrentPage),h=V({get(){return Io(n.pageSize)?d.value:n.pageSize},set(x){Io(n.pageSize)&&(d.value=x),u&&(e("update:page-size",x),e("size-change",x))}}),p=V(()=>{let x=0;return Io(n.pageCount)?Io(n.total)||(x=Math.max(1,Math.ceil(n.total/h.value))):x=n.pageCount,x}),m=V({get(){return Io(n.currentPage)?f.value:n.currentPage},set(x){let w=x;x<1?w=1:x>p.value&&(w=p.value),Io(n.currentPage)&&(f.value=w),l&&(e("update:current-page",w),e("current-change",w))}});St(p,x=>{m.value>x&&(m.value=x)}),St([m,h],x=>{e("change",...x)},{flush:"post"});function v(x){m.value=x}function g(x){h.value=x;const w=p.value;m.value>w&&(m.value=w)}function y(){n.disabled||(m.value-=1,e("prev-click",m.value))}function _(){n.disabled||(m.value+=1,e("next-click",m.value))}function b(x,w){x&&(x.props||(x.props={}),x.props.class=[x.props.class,w].join(" "))}return pr(Ine,{pageCount:p,disabled:V(()=>n.disabled),currentPage:m,changeEvent:v,handleSizeChange:g}),()=>{var x,w;if(!c.value)return r("el.pagination.deprecationWarning"),null;if(!n.layout||n.hideOnSinglePage&&p.value<=1)return null;const A=[],T=[],C=an("div",{class:i.e("rightwrapper")},T),E={prev:an(dRe,{disabled:n.disabled,currentPage:m.value,prevText:n.prevText,prevIcon:n.prevIcon,onClick:y}),jumper:an(URe,{size:o.value}),pager:an(jRe,{currentPage:m.value,pageCount:p.value,pagerCount:n.pagerCount,onChange:v,disabled:n.disabled}),next:an(mRe,{disabled:n.disabled,currentPage:m.value,pageCount:p.value,nextText:n.nextText,nextIcon:n.nextIcon,onClick:_}),sizes:an(ORe,{pageSize:h.value,pageSizes:n.pageSizes,popperClass:n.popperClass,disabled:n.disabled,teleported:n.teleported,size:o.value,appendSizeTo:n.appendSizeTo}),slot:(w=(x=t==null?void 0:t.default)==null?void 0:x.call(t))!=null?w:null,total:an($Re,{total:Io(n.total)?0:n.total})},I=n.layout.split(",").map(L=>L.trim());let P=!1;return I.forEach(L=>{if(L==="->"){P=!0;return}P?T.push(E[L]):A.push(E[L])}),b(A[0],i.is("first")),b(A[A.length-1],i.is("last")),P&&T.length>0&&(b(T[0],i.is("first")),b(T[T.length-1],i.is("last")),A.push(C)),an("div",{class:[i.b(),i.is("background",n.background),i.m(o.value)]},A)}}});const QRe=Bn(YRe),ZRe=Vt({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:KL,default:"primary"},cancelButtonType:{type:String,values:KL,default:"text"},icon:{type:li,default:()=>Wxe},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:os.teleported,persistent:os.persistent,width:{type:[String,Number],default:150}}),JRe={confirm:n=>n instanceof MouseEvent,cancel:n=>n instanceof MouseEvent},eke=Ne({name:"ElPopconfirm"}),tke=Ne({...eke,props:ZRe,emits:JRe,setup(n,{emit:e}){const t=n,{t:r}=Ar(),i=kt("popconfirm"),a=ie(),s=()=>{var f,h;(h=(f=a.value)==null?void 0:f.onClose)==null||h.call(f)},o=V(()=>({width:ia(t.width)})),l=f=>{e("confirm",f),s()},u=f=>{e("cancel",f),s()},c=V(()=>t.confirmButtonText||r("el.popconfirm.confirmButtonText")),d=V(()=>t.cancelButtonText||r("el.popconfirm.cancelButtonText"));return(f,h)=>(W(),pt(S(Ys),lr({ref_key:"tooltipRef",ref:a,trigger:"click",effect:"light"},f.$attrs,{"popper-class":`${S(i).namespace.value}-popover`,"popper-style":S(o),teleported:f.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":f.hideAfter,persistent:f.persistent}),{content:Oe(()=>[Ce("div",{class:J(S(i).b())},[Ce("div",{class:J(S(i).e("main"))},[!f.hideIcon&&f.icon?(W(),pt(S(tn),{key:0,class:J(S(i).e("icon")),style:Jt({color:f.iconColor})},{default:Oe(()=>[(W(),pt(ir(f.icon)))]),_:1},8,["class","style"])):st("v-if",!0),Xn(" "+Ft(f.title),1)],2),Ce("div",{class:J(S(i).e("action"))},[at(f.$slots,"actions",{confirm:l,cancel:u},()=>[be(S(gs),{size:"small",type:f.cancelButtonType==="text"?"":f.cancelButtonType,text:f.cancelButtonType==="text",onClick:u},{default:Oe(()=>[Xn(Ft(S(d)),1)]),_:1},8,["type","text"]),be(S(gs),{size:"small",type:f.confirmButtonType==="text"?"":f.confirmButtonType,text:f.confirmButtonType==="text",onClick:l},{default:Oe(()=>[Xn(Ft(S(c)),1)]),_:1},8,["type","text"])])],2)],2)]),default:Oe(()=>[f.$slots.reference?at(f.$slots,"reference",{key:0}):st("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var nke=$t(tke,[["__file","popconfirm.vue"]]);const rke=Bn(nke),ike=Vt({trigger:n2.trigger,placement:nE.placement,disabled:n2.disabled,visible:os.visible,transition:os.transition,popperOptions:nE.popperOptions,tabindex:nE.tabindex,content:os.content,popperStyle:os.popperStyle,popperClass:os.popperClass,enterable:{...os.enterable,default:!0},effect:{...os.effect,default:"light"},teleported:os.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),ake={"update:visible":n=>mi(n),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},ske="onUpdate:visible",oke=Ne({name:"ElPopover"}),lke=Ne({...oke,props:ike,emits:ake,setup(n,{expose:e,emit:t}){const r=n,i=V(()=>r[ske]),a=kt("popover"),s=ie(),o=V(()=>{var v;return(v=S(s))==null?void 0:v.popperRef}),l=V(()=>[{width:ia(r.width)},r.popperStyle]),u=V(()=>[a.b(),r.popperClass,{[a.m("plain")]:!!r.content}]),c=V(()=>r.transition===`${a.namespace.value}-fade-in-linear`),d=()=>{var v;(v=s.value)==null||v.hide()},f=()=>{t("before-enter")},h=()=>{t("before-leave")},p=()=>{t("after-enter")},m=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:o,hide:d}),(v,g)=>(W(),pt(S(Ys),lr({ref_key:"tooltipRef",ref:s},v.$attrs,{trigger:v.trigger,placement:v.placement,disabled:v.disabled,visible:v.visible,transition:v.transition,"popper-options":v.popperOptions,tabindex:v.tabindex,content:v.content,offset:v.offset,"show-after":v.showAfter,"hide-after":v.hideAfter,"auto-close":v.autoClose,"show-arrow":v.showArrow,"aria-label":v.title,effect:v.effect,enterable:v.enterable,"popper-class":S(u),"popper-style":S(l),teleported:v.teleported,persistent:v.persistent,"gpu-acceleration":S(c),"onUpdate:visible":S(i),onBeforeShow:f,onBeforeHide:h,onShow:p,onHide:m}),{content:Oe(()=>[v.title?(W(),Se("div",{key:0,class:J(S(a).e("title")),role:"title"},Ft(v.title),3)):st("v-if",!0),at(v.$slots,"default",{},()=>[Xn(Ft(v.content),1)])]),default:Oe(()=>[v.$slots.reference?at(v.$slots,"reference",{key:0}):st("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var uke=$t(lke,[["__file","popover.vue"]]);const XV=(n,e)=>{const t=e.arg||e.value,r=t==null?void 0:t.popperRef;r&&(r.triggerRef=n)};var cke={mounted(n,e){XV(n,e)},updated(n,e){XV(n,e)}};const dke="popover",Rne=ZSe(cke,dke),fke=Bn(uke,{directive:Rne}),hke=Vt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:n=>n>=0&&n<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:tt(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:tt([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:tt(Function),default:n=>`${n}%`}}),pke=Ne({name:"ElProgress"}),mke=Ne({...pke,props:hke,setup(n){const e=n,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=kt("progress"),i=V(()=>{const _={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},b=y(e.percentage);return b.includes("gradient")?_.background=b:_.backgroundColor=b,_}),a=V(()=>(e.strokeWidth/e.width*100).toFixed(1)),s=V(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(a.value)/2}`,10):0),o=V(()=>{const _=s.value,b=e.type==="dashboard";return`
          M 50 50
          m 0 ${b?"":"-"}${_}
          a ${_} ${_} 0 1 1 0 ${b?"-":""}${_*2}
          a ${_} ${_} 0 1 1 0 ${b?"":"-"}${_*2}
          `}),l=V(()=>2*Math.PI*s.value),u=V(()=>e.type==="dashboard"?.75:1),c=V(()=>`${-1*l.value*(1-u.value)/2}px`),d=V(()=>({strokeDasharray:`${l.value*u.value}px, ${l.value}px`,strokeDashoffset:c.value})),f=V(()=>({strokeDasharray:`${l.value*u.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:c.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),h=V(()=>{let _;return e.color?_=y(e.percentage):_=t[e.status]||t.default,_}),p=V(()=>e.status==="warning"?M4:e.type==="line"?e.status==="success"?HN:uh:e.status==="success"?gw:Fc),m=V(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),v=V(()=>e.format(e.percentage));function g(_){const b=100/_.length;return _.map((w,A)=>ln(w)?{color:w,percentage:(A+1)*b}:w).sort((w,A)=>w.percentage-A.percentage)}const y=_=>{var b;const{color:x}=e;if(hn(x))return x(_);if(ln(x))return x;{const w=g(x);for(const A of w)if(A.percentage>_)return A.color;return(b=w[w.length-1])==null?void 0:b.color}};return(_,b)=>(W(),Se("div",{class:J([S(r).b(),S(r).m(_.type),S(r).is(_.status),{[S(r).m("without-text")]:!_.showText,[S(r).m("text-inside")]:_.textInside}]),role:"progressbar","aria-valuenow":_.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[_.type==="line"?(W(),Se("div",{key:0,class:J(S(r).b("bar"))},[Ce("div",{class:J(S(r).be("bar","outer")),style:Jt({height:`${_.strokeWidth}px`})},[Ce("div",{class:J([S(r).be("bar","inner"),{[S(r).bem("bar","inner","indeterminate")]:_.indeterminate},{[S(r).bem("bar","inner","striped")]:_.striped},{[S(r).bem("bar","inner","striped-flow")]:_.stripedFlow}]),style:Jt(S(i))},[(_.showText||_.$slots.default)&&_.textInside?(W(),Se("div",{key:0,class:J(S(r).be("bar","innerText"))},[at(_.$slots,"default",{percentage:_.percentage},()=>[Ce("span",null,Ft(S(v)),1)])],2)):st("v-if",!0)],6)],6)],2)):(W(),Se("div",{key:1,class:J(S(r).b("circle")),style:Jt({height:`${_.width}px`,width:`${_.width}px`})},[(W(),Se("svg",{viewBox:"0 0 100 100"},[Ce("path",{class:J(S(r).be("circle","track")),d:S(o),stroke:`var(${S(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":_.strokeLinecap,"stroke-width":S(a),fill:"none",style:Jt(S(d))},null,14,["d","stroke","stroke-linecap","stroke-width"]),Ce("path",{class:J(S(r).be("circle","path")),d:S(o),stroke:S(h),fill:"none",opacity:_.percentage?1:0,"stroke-linecap":_.strokeLinecap,"stroke-width":S(a),style:Jt(S(f))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(_.showText||_.$slots.default)&&!_.textInside?(W(),Se("div",{key:2,class:J(S(r).e("text")),style:Jt({fontSize:`${S(m)}px`})},[at(_.$slots,"default",{percentage:_.percentage},()=>[_.status?(W(),pt(S(tn),{key:1},{default:Oe(()=>[(W(),pt(ir(S(p))))]),_:1})):(W(),Se("span",{key:0},Ft(S(v)),1))])],6)):st("v-if",!0)],10,["aria-valuenow"]))}});var vke=$t(mke,[["__file","progress.vue"]]);const kne=Bn(vke),gke=Vt({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:tt([Array,Object]),default:()=>Ki(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:tt([Array,Object]),default:()=>[ST,ST,ST]},voidIcon:{type:li,default:()=>s2e},disabledVoidIcon:{type:li,default:()=>ST},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:tt(Array),default:()=>Ki(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:La,clearable:Boolean,...ks(["ariaLabel"])}),yke={[si]:n=>_n(n),[jn]:n=>_n(n)},_ke=Ne({name:"ElRate"}),bke=Ne({..._ke,props:gke,emits:yke,setup(n,{expose:e,emit:t}){const r=n;function i(k,H){const U=ee=>er(ee),B=Object.keys(H).map(ee=>+ee).filter(ee=>{const re=H[ee];return(U(re)?re.excluded:!1)?k<ee:k<=ee}).sort((ee,re)=>ee-re),$=H[B[0]];return U($)&&$.value||$}const a=Yt(Iv,void 0),s=Yt(Rd,void 0),o=Ca(),l=kt("rate"),{inputId:u,isLabeledByFormItem:c}=ec(r,{formItemContext:s}),d=ie(r.modelValue),f=ie(-1),h=ie(!0),p=V(()=>[l.b(),l.m(o.value)]),m=V(()=>r.disabled||(a==null?void 0:a.disabled)),v=V(()=>l.cssVarBlock({"void-color":r.voidColor,"disabled-void-color":r.disabledVoidColor,"fill-color":b.value})),g=V(()=>{let k="";return r.showScore?k=r.scoreTemplate.replace(/\{\s*value\s*\}/,m.value?`${r.modelValue}`:`${d.value}`):r.showText&&(k=r.texts[Math.ceil(d.value)-1]),k}),y=V(()=>r.modelValue*100-Math.floor(r.modelValue)*100),_=V(()=>Ut(r.colors)?{[r.lowThreshold]:r.colors[0],[r.highThreshold]:{value:r.colors[1],excluded:!0},[r.max]:r.colors[2]}:r.colors),b=V(()=>{const k=i(d.value,_.value);return er(k)?"":k}),x=V(()=>{let k="";return m.value?k=`${y.value}%`:r.allowHalf&&(k="50%"),{color:b.value,width:k}}),w=V(()=>{let k=Ut(r.icons)?[...r.icons]:{...r.icons};return k=Lf(k),Ut(k)?{[r.lowThreshold]:k[0],[r.highThreshold]:{value:k[1],excluded:!0},[r.max]:k[2]}:k}),A=V(()=>i(r.modelValue,w.value)),T=V(()=>m.value?ln(r.disabledVoidIcon)?r.disabledVoidIcon:Lf(r.disabledVoidIcon):ln(r.voidIcon)?r.voidIcon:Lf(r.voidIcon)),C=V(()=>i(d.value,w.value));function E(k){const H=m.value&&y.value>0&&k-1<r.modelValue&&k>r.modelValue,U=r.allowHalf&&h.value&&k-.5<=d.value&&k>d.value;return H||U}function I(k){r.clearable&&k===r.modelValue&&(k=0),t(jn,k),r.modelValue!==k&&t("change",k)}function P(k){m.value||(r.allowHalf&&h.value?I(d.value):I(k))}function L(k){if(m.value)return;let H=d.value;const U=k.code;return U===jt.up||U===jt.right?(r.allowHalf?H+=.5:H+=1,k.stopPropagation(),k.preventDefault()):(U===jt.left||U===jt.down)&&(r.allowHalf?H-=.5:H-=1,k.stopPropagation(),k.preventDefault()),H=H<0?0:H,H=H>r.max?r.max:H,t(jn,H),t("change",H),H}function N(k,H){if(!m.value){if(r.allowHalf&&H){let U=H.target;ml(U,l.e("item"))&&(U=U.querySelector(`.${l.e("icon")}`)),(U.clientWidth===0||ml(U,l.e("decimal")))&&(U=U.parentNode),h.value=H.offsetX*2<=U.clientWidth,d.value=h.value?k-.5:k}else d.value=k;f.value=k}}function F(){m.value||(r.allowHalf&&(h.value=r.modelValue!==Math.floor(r.modelValue)),d.value=r.modelValue,f.value=-1)}return St(()=>r.modelValue,k=>{d.value=k,h.value=r.modelValue!==Math.floor(r.modelValue)}),r.modelValue||t(jn,0),e({setCurrentValue:N,resetCurrentValue:F}),(k,H)=>{var U;return W(),Se("div",{id:S(u),class:J([S(p),S(l).is("disabled",S(m))]),role:"slider","aria-label":S(c)?void 0:k.ariaLabel||"rating","aria-labelledby":S(c)?(U=S(s))==null?void 0:U.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":S(g)||void 0,"aria-valuemin":"0","aria-valuemax":k.max,tabindex:"0",style:Jt(S(v)),onKeydown:L},[(W(!0),Se(on,null,ur(k.max,(B,$)=>(W(),Se("span",{key:$,class:J(S(l).e("item")),onMousemove:ee=>N(B,ee),onMouseleave:F,onClick:ee=>P(B)},[be(S(tn),{class:J([S(l).e("icon"),{hover:f.value===B},S(l).is("active",B<=d.value)])},{default:Oe(()=>[E(B)?st("v-if",!0):(W(),Se(on,{key:0},[Wn((W(),pt(ir(S(C)),null,null,512)),[[Nr,B<=d.value]]),Wn((W(),pt(ir(S(T)),null,null,512)),[[Nr,!(B<=d.value)]])],64)),E(B)?(W(),Se(on,{key:1},[(W(),pt(ir(S(T)),{class:J([S(l).em("decimal","box")])},null,8,["class"])),be(S(tn),{style:Jt(S(x)),class:J([S(l).e("icon"),S(l).e("decimal")])},{default:Oe(()=>[(W(),pt(ir(S(A))))]),_:1},8,["style","class"])],64)):st("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),k.showText||k.showScore?(W(),Se("span",{key:0,class:J(S(l).e("text")),style:Jt({color:k.textColor})},Ft(S(g)),7)):st("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var Ske=$t(bke,[["__file","rate.vue"]]);const xke=Bn(Ske),Dy={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},YV={[Dy.success]:gxe,[Dy.warning]:M4,[Dy.error]:VN,[Dy.info]:$N},wke=Vt({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),Tke=Ne({name:"ElResult"}),Cke=Ne({...Tke,props:wke,setup(n){const e=n,t=kt("result"),r=V(()=>{const i=e.icon,a=i&&Dy[i]?Dy[i]:"icon-info",s=YV[a]||YV["icon-info"];return{class:a,component:s}});return(i,a)=>(W(),Se("div",{class:J(S(t).b())},[Ce("div",{class:J(S(t).e("icon"))},[at(i.$slots,"icon",{},()=>[S(r).component?(W(),pt(ir(S(r).component),{key:0,class:J(S(r).class)},null,8,["class"])):st("v-if",!0)])],2),i.title||i.$slots.title?(W(),Se("div",{key:0,class:J(S(t).e("title"))},[at(i.$slots,"title",{},()=>[Ce("p",null,Ft(i.title),1)])],2)):st("v-if",!0),i.subTitle||i.$slots["sub-title"]?(W(),Se("div",{key:1,class:J(S(t).e("subtitle"))},[at(i.$slots,"sub-title",{},()=>[Ce("p",null,Ft(i.subTitle),1)])],2)):st("v-if",!0),i.$slots.extra?(W(),Se("div",{key:2,class:J(S(t).e("extra"))},[at(i.$slots,"extra")],2)):st("v-if",!0)],2))}});var Ake=$t(Cke,[["__file","result.vue"]]);const Eke=Bn(Ake),Mke=["start","center","end","space-around","space-between","space-evenly"],Ike=["top","middle","bottom"],Dke=Vt({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:Mke,default:"start"},align:{type:String,values:Ike}}),Pke=Ne({name:"ElRow"}),Rke=Ne({...Pke,props:Dke,setup(n){const e=n,t=kt("row"),r=V(()=>e.gutter);pr(kte,{gutter:r});const i=V(()=>{const s={};return e.gutter&&(s.marginRight=s.marginLeft=`-${e.gutter/2}px`),s}),a=V(()=>[t.b(),t.is(`justify-${e.justify}`,e.justify!=="start"),t.is(`align-${e.align}`,!!e.align)]);return(s,o)=>(W(),pt(ir(s.tag),{class:J(S(a)),style:Jt(S(i))},{default:Oe(()=>[at(s.$slots,"default")]),_:3},8,["class","style"]))}});var kke=$t(Rke,[["__file","row.vue"]]);const Lke=Bn(kke),Oke=Ne({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:kt("select")}}});function Nke(n,e,t,r,i,a){return W(),Se("div",{class:J(n.ns.be("group","title")),style:Jt({...n.style,lineHeight:`${n.height}px`})},Ft(n.item.label),7)}var Bke=$t(Oke,[["render",Nke],["__file","group-item.vue"]]);function Fke(n,{emit:e}){return{hoverItem:()=>{n.disabled||e("hover",n.index)},selectOptionClick:()=>{n.disabled||e("select",n.item,n.index)}}}const Lne={label:"label",value:"value",disabled:"disabled",options:"options"};function F4(n){const e=V(()=>({...Lne,...n.props}));return{aliasProps:e,getLabel:s=>ba(s,e.value.label),getValue:s=>ba(s,e.value.value),getDisabled:s=>ba(s,e.value.disabled),getOptions:s=>ba(s,e.value.options)}}const Uke=Vt({allowCreate:Boolean,autocomplete:{type:tt(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:li,default:uh},effect:{type:tt(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:tt([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:tt(Array),required:!0},placeholder:{type:String},teleported:os.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:tt(Object),default:()=>({})},remote:Boolean,size:La,props:{type:tt(Object),default:()=>Lne},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:tt(String),values:ch,default:"bottom-start"},fallbackPlacements:{type:tt(Array),default:["bottom-start","top-start","right","left"]},tagType:{...Wf.type,default:"info"},tagEffect:{...Wf.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:String,...D_,...ks(["ariaLabel"])}),zke=Vt({data:Array,disabled:Boolean,hovering:Boolean,item:{type:tt(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),Hke={[jn]:n=>!0,[si]:n=>!0,"remove-tag":n=>!0,"visible-change":n=>!0,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0},Vke={hover:n=>_n(n),select:(n,e)=>!0},IB=Symbol("ElSelectV2Injection"),$ke=Ne({props:zke,emits:Vke,setup(n,{emit:e}){const t=Yt(IB),r=kt("select"),{hoverItem:i,selectOptionClick:a}=Fke(n,{emit:e}),{getLabel:s}=F4(t.props);return{ns:r,hoverItem:i,selectOptionClick:a,getLabel:s}}});function Gke(n,e,t,r,i,a){return W(),Se("li",{"aria-selected":n.selected,style:Jt(n.style),class:J([n.ns.be("dropdown","item"),n.ns.is("selected",n.selected),n.ns.is("disabled",n.disabled),n.ns.is("created",n.created),n.ns.is("hovering",n.hovering)]),onMousemove:n.hoverItem,onClick:Tn(n.selectOptionClick,["stop"])},[at(n.$slots,"default",{item:n.item,index:n.index,disabled:n.disabled},()=>[Ce("span",null,Ft(n.getLabel(n.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var Wke=$t($ke,[["render",Gke],["__file","option-item.vue"]]),QV=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function qke(n,e){return!!(n===e||QV(n)&&QV(e))}function jke(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!qke(n[t],e[t]))return!1;return!0}function Kke(n,e){e===void 0&&(e=jke);var t=null;function r(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var s=n.apply(this,i);return t={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){t=null},r}const One=()=>{const e=tr().proxy.$props;return V(()=>{const t=(r,i,a)=>({});return e.perfMode?S4(t):Kke(t)})},m5=50,pM="itemRendered",mM="scroll",Py="forward",vM="backward",Lu="auto",U4="smart",s2="start",hd="center",o2="end",L1="horizontal",DB="vertical",Xke="ltr",n1="rtl",l2="negative",PB="positive-ascending",RB="positive-descending",Yke={[L1]:"left",[DB]:"top"},Qke=20,Zke={[L1]:"deltaX",[DB]:"deltaY"},Jke=({atEndEdge:n,atStartEdge:e,layout:t},r)=>{let i,a=0;const s=l=>l<0&&e.value||l>0&&n.value;return{hasReachedEdge:s,onWheel:l=>{ov(i);const u=l[Zke[t.value]];s(a)&&s(a+u)||(a+=u,D4()||l.preventDefault(),i=Fp(()=>{r(a),a=0}))}}},v5=Hc({type:tt([Number,Function]),required:!0}),g5=Hc({type:Number}),y5=Hc({type:Number,default:2}),eLe=Hc({type:String,values:["ltr","rtl"],default:"ltr"}),_5=Hc({type:Number,default:0}),gM=Hc({type:Number,required:!0}),Nne=Hc({type:String,values:["horizontal","vertical"],default:DB}),Bne=Vt({className:{type:String,default:""},containerElement:{type:tt([String,Object]),default:"div"},data:{type:tt(Array),default:()=>Ki([])},direction:eLe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:tt([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Fne=Vt({cache:y5,estimatedItemSize:g5,layout:Nne,initScrollOffset:_5,total:gM,itemSize:v5,...Bne}),b5={type:Number,default:6},Une={type:Number,default:0},zne={type:Number,default:2},G0=Vt({columnCache:y5,columnWidth:v5,estimatedColumnWidth:g5,estimatedRowHeight:g5,initScrollLeft:_5,initScrollTop:_5,itemKey:{type:tt(Function),default:({columnIndex:n,rowIndex:e})=>`${e}:${n}`},rowCache:y5,rowHeight:v5,totalColumn:gM,totalRow:gM,hScrollbarSize:b5,vScrollbarSize:b5,scrollbarStartGap:Une,scrollbarEndGap:zne,role:String,...Bne}),Hne=Vt({alwaysOn:Boolean,class:String,layout:Nne,total:gM,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:b5,startGap:Une,endGap:zne,visible:Boolean}),A0=(n,e)=>n<e?Py:vM,u2=n=>n===Xke||n===n1||n===L1,ZV=n=>n===n1;let sg=null;function yM(n=!1){if(sg===null||n){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?sg=RB:(e.scrollLeft=1,e.scrollLeft===0?sg=l2:sg=PB),document.body.removeChild(e),sg}return sg}function tLe({move:n,size:e,bar:t},r){const i={},a=`translate${t.axis}(${n}px)`;return i[t.size]=e,i.transform=a,i.msTransform=a,i.webkitTransform=a,r==="horizontal"?i.height="100%":i.width="100%",i}const S5=Ne({name:"ElVirtualScrollBar",props:Hne,emits:["scroll","start-move","stop-move"],setup(n,{emit:e}){const t=V(()=>n.startGap+n.endGap),r=kt("virtual-scrollbar"),i=kt("scrollbar"),a=ie(),s=ie();let o=null,l=null;const u=$r({isDragging:!1,traveled:0}),c=V(()=>Mee[n.layout]),d=V(()=>n.clientSize-S(t)),f=V(()=>({position:"absolute",width:`${L1===n.layout?d.value:n.scrollbarSize}px`,height:`${L1===n.layout?n.scrollbarSize:d.value}px`,[Yke[n.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),h=V(()=>{const w=n.ratio,A=n.clientSize;if(w>=100)return Number.POSITIVE_INFINITY;if(w>=50)return w*A/100;const T=A/3;return Math.floor(Math.min(Math.max(w*A,Qke),T))}),p=V(()=>{if(!Number.isFinite(h.value))return{display:"none"};const w=`${h.value}px`;return tLe({bar:c.value,size:w,move:u.traveled},n.layout)}),m=V(()=>Math.floor(n.clientSize-h.value-S(t))),v=()=>{window.addEventListener("mousemove",b),window.addEventListener("mouseup",_);const w=S(s);w&&(l=document.onselectstart,document.onselectstart=()=>!1,w.addEventListener("touchmove",b,{passive:!0}),w.addEventListener("touchend",_))},g=()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",_),document.onselectstart=l,l=null;const w=S(s);w&&(w.removeEventListener("touchmove",b),w.removeEventListener("touchend",_))},y=w=>{w.stopImmediatePropagation(),!(w.ctrlKey||[1,2].includes(w.button))&&(u.isDragging=!0,u[c.value.axis]=w.currentTarget[c.value.offset]-(w[c.value.client]-w.currentTarget.getBoundingClientRect()[c.value.direction]),e("start-move"),v())},_=()=>{u.isDragging=!1,u[c.value.axis]=0,e("stop-move"),g()},b=w=>{const{isDragging:A}=u;if(!A||!s.value||!a.value)return;const T=u[c.value.axis];if(!T)return;ov(o);const C=(a.value.getBoundingClientRect()[c.value.direction]-w[c.value.client])*-1,E=s.value[c.value.offset]-T,I=C-E;o=Fp(()=>{u.traveled=Math.max(n.startGap,Math.min(I,m.value)),e("scroll",I,m.value)})},x=w=>{const A=Math.abs(w.target.getBoundingClientRect()[c.value.direction]-w[c.value.client]),T=s.value[c.value.offset]/2,C=A-T;u.traveled=Math.max(0,Math.min(C,m.value)),e("scroll",C,m.value)};return St(()=>n.scrollFrom,w=>{u.isDragging||(u.traveled=Math.ceil(w*m.value))}),Wr(()=>{g()}),()=>an("div",{role:"presentation",ref:a,class:[r.b(),n.class,(n.alwaysOn||u.isDragging)&&"always-on"],style:f.value,onMousedown:Tn(x,["stop","prevent"]),onTouchstartPrevent:y},an("div",{ref:s,class:i.e("thumb"),style:p.value,onMousedown:y},[]))}}),Vne=({name:n,getOffset:e,getItemSize:t,getItemOffset:r,getEstimatedTotalSize:i,getStartIndexForOffset:a,getStopIndexForStartIndex:s,initCache:o,clearCache:l,validateProps:u})=>Ne({name:n??"ElVirtualList",props:Fne,emits:[pM,mM],setup(c,{emit:d,expose:f}){u(c);const h=tr(),p=kt("vl"),m=ie(o(c,h)),v=One(),g=ie(),y=ie(),_=ie(),b=ie({isScrolling:!1,scrollDir:"forward",scrollOffset:_n(c.initScrollOffset)?c.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:c.scrollbarAlwaysOn}),x=V(()=>{const{total:ne,cache:ae}=c,{isScrolling:pe,scrollDir:de,scrollOffset:me}=S(b);if(ne===0)return[0,0,0,0];const ke=a(c,me,S(m)),Be=s(c,ke,me,S(m)),Xe=!pe||de===vM?Math.max(1,ae):1,Ye=!pe||de===Py?Math.max(1,ae):1;return[Math.max(0,ke-Xe),Math.max(0,Math.min(ne-1,Be+Ye)),ke,Be]}),w=V(()=>i(c,S(m))),A=V(()=>u2(c.layout)),T=V(()=>[{position:"relative",[`overflow-${A.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:c.direction,height:_n(c.height)?`${c.height}px`:c.height,width:_n(c.width)?`${c.width}px`:c.width},c.style]),C=V(()=>{const ne=S(w),ae=S(A);return{height:ae?"100%":`${ne}px`,pointerEvents:S(b).isScrolling?"none":void 0,width:ae?`${ne}px`:"100%"}}),E=V(()=>A.value?c.width:c.height),{onWheel:I}=Jke({atStartEdge:V(()=>b.value.scrollOffset<=0),atEndEdge:V(()=>b.value.scrollOffset>=w.value),layout:V(()=>c.layout)},ne=>{var ae,pe;(pe=(ae=_.value).onMouseUp)==null||pe.call(ae),H(Math.min(b.value.scrollOffset+ne,w.value-E.value))});ni(g,"wheel",I,{passive:!1});const P=()=>{const{total:ne}=c;if(ne>0){const[me,ke,Be,Xe]=S(x);d(pM,me,ke,Be,Xe)}const{scrollDir:ae,scrollOffset:pe,updateRequested:de}=S(b);d(mM,ae,pe,de)},L=ne=>{const{clientHeight:ae,scrollHeight:pe,scrollTop:de}=ne.currentTarget,me=S(b);if(me.scrollOffset===de)return;const ke=Math.max(0,Math.min(de,pe-ae));b.value={...me,isScrolling:!0,scrollDir:A0(me.scrollOffset,ke),scrollOffset:ke,updateRequested:!1},cn($)},N=ne=>{const{clientWidth:ae,scrollLeft:pe,scrollWidth:de}=ne.currentTarget,me=S(b);if(me.scrollOffset===pe)return;const{direction:ke}=c;let Be=pe;if(ke===n1)switch(yM()){case l2:{Be=-pe;break}case RB:{Be=de-ae-pe;break}}Be=Math.max(0,Math.min(Be,de-ae)),b.value={...me,isScrolling:!0,scrollDir:A0(me.scrollOffset,Be),scrollOffset:Be,updateRequested:!1},cn($)},F=ne=>{S(A)?N(ne):L(ne),P()},k=(ne,ae)=>{const pe=(w.value-E.value)/ae*ne;H(Math.min(w.value-E.value,pe))},H=ne=>{ne=Math.max(ne,0),ne!==S(b).scrollOffset&&(b.value={...S(b),scrollOffset:ne,scrollDir:A0(S(b).scrollOffset,ne),updateRequested:!0},cn($))},U=(ne,ae=Lu)=>{const{scrollOffset:pe}=S(b);ne=Math.max(0,Math.min(ne,c.total-1)),H(e(c,ne,ae,pe,S(m)))},B=ne=>{const{direction:ae,itemSize:pe,layout:de}=c,me=v.value(l&&pe,l&&de,l&&ae);let ke;if(Ir(me,String(ne)))ke=me[ne];else{const Be=r(c,ne,S(m)),Xe=t(c,ne,S(m)),Ye=S(A),Y=ae===n1,he=Ye?Be:0;me[ne]=ke={position:"absolute",left:Y?void 0:`${he}px`,right:Y?`${he}px`:void 0,top:Ye?0:`${Be}px`,height:Ye?"100%":`${Xe}px`,width:Ye?`${Xe}px`:"100%"}}return ke},$=()=>{b.value.isScrolling=!1,cn(()=>{v.value(-1,null,null)})},ee=()=>{const ne=g.value;ne&&(ne.scrollTop=0)};zn(()=>{if(!Cr)return;const{initScrollOffset:ne}=c,ae=S(g);_n(ne)&&ae&&(S(A)?ae.scrollLeft=ne:ae.scrollTop=ne),P()}),Ju(()=>{const{direction:ne,layout:ae}=c,{scrollOffset:pe,updateRequested:de}=S(b),me=S(g);if(de&&me)if(ae===L1)if(ne===n1)switch(yM()){case l2:{me.scrollLeft=-pe;break}case PB:{me.scrollLeft=pe;break}default:{const{clientWidth:ke,scrollWidth:Be}=me;me.scrollLeft=Be-ke-pe;break}}else me.scrollLeft=pe;else me.scrollTop=pe}),cN(()=>{S(g).scrollTop=S(b).scrollOffset});const re={ns:p,clientSize:E,estimatedTotalSize:w,windowStyle:T,windowRef:g,innerRef:y,innerStyle:C,itemsToRender:x,scrollbarRef:_,states:b,getItemStyle:B,onScroll:F,onScrollbarScroll:k,onWheel:I,scrollTo:H,scrollToItem:U,resetScrollTop:ee};return f({windowRef:g,innerRef:y,getItemStyleCache:v,scrollTo:H,scrollToItem:U,resetScrollTop:ee,states:b}),re},render(c){var d;const{$slots:f,className:h,clientSize:p,containerElement:m,data:v,getItemStyle:g,innerElement:y,itemsToRender:_,innerStyle:b,layout:x,total:w,onScroll:A,onScrollbarScroll:T,states:C,useIsScrolling:E,windowStyle:I,ns:P}=c,[L,N]=_,F=ir(m),k=ir(y),H=[];if(w>0)for(let ee=L;ee<=N;ee++)H.push(an(on,{key:ee},(d=f.default)==null?void 0:d.call(f,{data:v,index:ee,isScrolling:E?C.isScrolling:void 0,style:g(ee)})));const U=[an(k,{style:b,ref:"innerRef"},ln(k)?H:{default:()=>H})],B=an(S5,{ref:"scrollbarRef",clientSize:p,layout:x,onScroll:T,ratio:p*100/this.estimatedTotalSize,scrollFrom:C.scrollOffset/(this.estimatedTotalSize-p),total:w}),$=an(F,{class:[P.e("window"),h],style:I,onScroll:A,ref:"windowRef",key:0},ln(F)?[U]:{default:()=>[U]});return an("div",{key:0,class:[P.e("wrapper"),C.scrollbarAlwaysOn?"always-on":""]},[$,B])}}),$ne=Vne({name:"ElFixedSizeList",getItemOffset:({itemSize:n},e)=>e*n,getItemSize:({itemSize:n})=>n,getEstimatedTotalSize:({total:n,itemSize:e})=>e*n,getOffset:({height:n,total:e,itemSize:t,layout:r,width:i},a,s,o)=>{const l=u2(r)?i:n,u=Math.max(0,e*t-l),c=Math.min(u,a*t),d=Math.max(0,(a+1)*t-l);switch(s===U4&&(o>=d-l&&o<=c+l?s=Lu:s=hd),s){case s2:return c;case o2:return d;case hd:{const f=Math.round(d+(c-d)/2);return f<Math.ceil(l/2)?0:f>u+Math.floor(l/2)?u:f}case Lu:default:return o>=d&&o<=c?o:o<d?d:c}},getStartIndexForOffset:({total:n,itemSize:e},t)=>Math.max(0,Math.min(n-1,Math.floor(t/e))),getStopIndexForStartIndex:({height:n,total:e,itemSize:t,layout:r,width:i},a,s)=>{const o=a*t,l=u2(r)?i:n,u=Math.ceil((l+s-o)/t);return Math.max(0,Math.min(e-1,a+u-1))},initCache(){},clearCache:!0,validateProps(){}}),Ry=(n,e,t)=>{const{itemSize:r}=n,{items:i,lastVisitedIndex:a}=t;if(e>a){let s=0;if(a>=0){const o=i[a];s=o.offset+o.size}for(let o=a+1;o<=e;o++){const l=r(o);i[o]={offset:s,size:l},s+=l}t.lastVisitedIndex=e}return i[e]},nLe=(n,e,t)=>{const{items:r,lastVisitedIndex:i}=e;return(i>0?r[i].offset:0)>=t?Gne(n,e,0,i,t):rLe(n,e,Math.max(0,i),t)},Gne=(n,e,t,r,i)=>{for(;t<=r;){const a=t+Math.floor((r-t)/2),s=Ry(n,a,e).offset;if(s===i)return a;s<i?t=a+1:s>i&&(r=a-1)}return Math.max(0,t-1)},rLe=(n,e,t,r)=>{const{total:i}=n;let a=1;for(;t<i&&Ry(n,t,e).offset<r;)t+=a,a*=2;return Gne(n,e,Math.floor(t/2),Math.min(t,i-1),r)},JV=({total:n},{items:e,estimatedItemSize:t,lastVisitedIndex:r})=>{let i=0;if(r>=n&&(r=n-1),r>=0){const o=e[r];i=o.offset+o.size}const s=(n-r-1)*t;return i+s},iLe=Vne({name:"ElDynamicSizeList",getItemOffset:(n,e,t)=>Ry(n,e,t).offset,getItemSize:(n,e,{items:t})=>t[e].size,getEstimatedTotalSize:JV,getOffset:(n,e,t,r,i)=>{const{height:a,layout:s,width:o}=n,l=u2(s)?o:a,u=Ry(n,e,i),c=JV(n,i),d=Math.max(0,Math.min(c-l,u.offset)),f=Math.max(0,u.offset-l+u.size);switch(t===U4&&(r>=f-l&&r<=d+l?t=Lu:t=hd),t){case s2:return d;case o2:return f;case hd:return Math.round(f+(d-f)/2);case Lu:default:return r>=f&&r<=d?r:r<f?f:d}},getStartIndexForOffset:(n,e,t)=>nLe(n,t,e),getStopIndexForStartIndex:(n,e,t,r)=>{const{height:i,total:a,layout:s,width:o}=n,l=u2(s)?o:i,u=Ry(n,e,r),c=t+l;let d=u.offset+u.size,f=e;for(;f<a-1&&d<c;)f++,d+=Ry(n,f,r).size;return f},initCache({estimatedItemSize:n=m5},e){const t={items:{},estimatedItemSize:n,lastVisitedIndex:-1};return t.clearCacheAfterIndex=(r,i=!0)=>{var a,s;t.lastVisitedIndex=Math.min(t.lastVisitedIndex,r-1),(a=e.exposed)==null||a.getItemStyleCache(-1),i&&((s=e.proxy)==null||s.$forceUpdate())},t},clearCache:!1,validateProps:({itemSize:n})=>{}}),aLe={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var sLe=Ne({name:"ElSelectDropdown",props:aLe,setup(n,{slots:e,expose:t}){const r=Yt(IB),i=kt("select"),{getLabel:a,getValue:s,getDisabled:o}=F4(r.props),l=ie([]),u=ie(),c=V(()=>n.data.length);St(()=>c.value,()=>{var I,P;(P=(I=r.tooltipRef.value).updatePopper)==null||P.call(I)});const d=V(()=>ti(r.props.estimatedOptionHeight)),f=V(()=>d.value?{itemSize:r.props.itemHeight}:{estimatedSize:r.props.estimatedOptionHeight,itemSize:I=>l.value[I]}),h=(I=[],P)=>{const{props:{valueKey:L}}=r;return er(P)?I&&I.some(N=>ri(ba(N,L))===ba(P,L)):I.includes(P)},p=(I,P)=>{if(er(P)){const{valueKey:L}=r.props;return ba(I,L)===ba(P,L)}else return I===P},m=(I,P)=>r.props.multiple?h(I,s(P)):p(I,s(P)),v=(I,P)=>{const{disabled:L,multiple:N,multipleLimit:F}=r.props;return L||!P&&(N?F>0&&I.length>=F:!1)},g=I=>n.hoveringIndex===I;t({listRef:u,isSized:d,isItemDisabled:v,isItemHovering:g,isItemSelected:m,scrollToItem:I=>{const P=u.value;P&&P.scrollToItem(I)},resetScrollTop:()=>{const I=u.value;I&&I.resetScrollTop()}});const x=I=>{const{index:P,data:L,style:N}=I,F=S(d),{itemSize:k,estimatedSize:H}=S(f),{modelValue:U}=r.props,{onSelect:B,onHover:$}=r,ee=L[P];if(ee.type==="Group")return be(Bke,{item:ee,style:N,height:F?k:H},null);const re=m(U,ee),ne=v(U,re),ae=g(P);return be(Wke,lr(I,{selected:re,disabled:o(ee)||ne,created:!!ee.created,hovering:ae,item:ee,onSelect:B,onHover:$}),{default:pe=>{var de;return((de=e.default)==null?void 0:de.call(e,pe))||be("span",null,[a(ee)])}})},{onKeyboardNavigate:w,onKeyboardSelect:A}=r,T=()=>{w("forward")},C=()=>{w("backward")},E=I=>{const{code:P}=I,{tab:L,esc:N,down:F,up:k,enter:H,numpadEnter:U}=jt;switch(P!==L&&(I.preventDefault(),I.stopPropagation()),P){case L:case N:break;case F:T();break;case k:C();break;case H:case U:A();break}};return()=>{var I,P,L,N;const{data:F,width:k}=n,{height:H,multiple:U,scrollbarAlwaysOn:B}=r.props,$=S(d)?$ne:iLe;return be("div",{class:[i.b("dropdown"),i.is("multiple",U)],style:{width:`${k}px`}},[(I=e.header)==null?void 0:I.call(e),((P=e.loading)==null?void 0:P.call(e))||((L=e.empty)==null?void 0:L.call(e))||be($,lr({ref:u},S(f),{className:i.be("dropdown","list"),scrollbarAlwaysOn:B,data:F,height:H,width:k,total:F.length,onKeydown:E}),{default:ee=>be(x,ee,null)}),(N=e.footer)==null?void 0:N.call(e)])}}});function oLe(n,e){const{aliasProps:t,getLabel:r,getValue:i}=F4(n),a=ie(0),s=ie(),o=V(()=>n.allowCreate&&n.filterable);function l(h){const p=m=>r(m)===h;return n.options&&n.options.some(p)||e.createdOptions.some(p)}function u(h){o.value&&(n.multiple&&h.created?a.value++:s.value=h)}function c(h){if(o.value)if(h&&h.length>0){if(l(h))return;const p={[t.value.value]:h,[t.value.label]:h,created:!0,[t.value.disabled]:!1};e.createdOptions.length>=a.value?e.createdOptions[a.value]=p:e.createdOptions.push(p)}else if(n.multiple)e.createdOptions.length=a.value;else{const p=s.value;e.createdOptions.length=0,p&&p.created&&e.createdOptions.push(p)}}function d(h){if(!o.value||!h||!h.created||h.created&&n.reserveKeyword&&e.inputValue===r(h))return;const p=e.createdOptions.findIndex(m=>i(m)===i(h));~p&&(e.createdOptions.splice(p,1),a.value--)}function f(){o.value&&(e.createdOptions.length=0,a.value=0)}return{createNewOption:c,removeNewOption:d,selectNewOption:u,clearAllNewOption:f}}const lLe=11,uLe=(n,e)=>{const{t}=Ar(),r=kt("select"),i=kt("input"),{form:a,formItem:s}=Zs(),{inputId:o}=ec(n,{formItemContext:s}),{aliasProps:l,getLabel:u,getValue:c,getDisabled:d,getOptions:f}=F4(n),{valueOnClear:h,isEmptyValue:p}=C4(n),m=$r({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),v=ie(-1),g=ie(),y=ie(),_=ie(),b=ie(),x=ie(),w=ie(),A=ie(),T=ie(),C=ie(),E=ie(),I=ie(),{isComposing:P,handleCompositionStart:L,handleCompositionEnd:N,handleCompositionUpdate:F}=_w({afterComposition:Qe=>Zn(Qe)}),{wrapperRef:k,isFocused:H,handleBlur:U}=um(x,{beforeFocus(){return re.value},afterFocus(){n.automaticDropdown&&!ee.value&&(ee.value=!0,m.menuVisibleOnFocus=!0)},beforeBlur(Qe){var yt,ht;return((yt=_.value)==null?void 0:yt.isFocusInsideContent(Qe))||((ht=b.value)==null?void 0:ht.isFocusInsideContent(Qe))},afterBlur(){ee.value=!1,m.menuVisibleOnFocus=!1}}),B=ie([]),$=ie([]),ee=ie(!1),re=V(()=>n.disabled||(a==null?void 0:a.disabled)),ne=V(()=>{var Qe;return(Qe=a==null?void 0:a.statusIcon)!=null?Qe:!1}),ae=V(()=>{const Qe=$.value.length*n.itemHeight;return Qe>n.height?n.height:Qe}),pe=V(()=>n.multiple?Ut(n.modelValue)&&n.modelValue.length>0:!p(n.modelValue)),de=V(()=>n.clearable&&!re.value&&m.inputHovering&&pe.value),me=V(()=>n.remote&&n.filterable?"":lh),ke=V(()=>me.value&&r.is("reverse",ee.value)),Be=V(()=>(s==null?void 0:s.validateState)||""),Xe=V(()=>{if(Be.value)return I4[Be.value]}),Ye=V(()=>n.remote?300:0),Y=V(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!m.inputValue&&B.value.length===0?!1:n.filterable&&m.inputValue&&B.value.length>0&&$.value.length===0?n.noMatchText||t("el.select.noMatch"):B.value.length===0?n.noDataText||t("el.select.noData"):null),he=Qe=>{const yt=ht=>{if(n.filterable&&hn(n.filterMethod)||n.filterable&&n.remote&&hn(n.remoteMethod))return!0;const Nt=new RegExp(cB(Qe),"i");return Qe?Nt.test(u(ht)||""):!0};return n.loading?[]:[...m.createdOptions,...n.options].reduce((ht,Nt)=>{const yn=f(Nt);if(Ut(yn)){const un=yn.filter(yt);un.length>0&&ht.push({label:u(Nt),type:"Group"},...un)}else(n.remote||yt(Nt))&&ht.push(Nt);return ht},[])},le=()=>{B.value=he(""),$.value=he(m.inputValue)},Ke=V(()=>{const Qe=new Map;return B.value.forEach((yt,ht)=>{Qe.set(zt(c(yt)),{option:yt,index:ht})}),Qe}),Ue=V(()=>{const Qe=new Map;return $.value.forEach((yt,ht)=>{Qe.set(zt(c(yt)),{option:yt,index:ht})}),Qe}),Ze=V(()=>$.value.every(Qe=>d(Qe))),je=Ca(),He=V(()=>je.value==="small"?"small":"default"),ut=()=>{var Qe;v.value=((Qe=g.value)==null?void 0:Qe.offsetWidth)||200},ge=()=>{if(!y.value)return 0;const Qe=window.getComputedStyle(y.value);return Number.parseFloat(Qe.gap||"6px")},q=V(()=>{const Qe=ge();return{maxWidth:`${I.value&&n.maxCollapseTags===1?m.selectionWidth-m.collapseItemWidth-Qe:m.selectionWidth}px`}}),te=V(()=>({maxWidth:`${m.selectionWidth}px`})),ye=V(()=>({width:`${Math.max(m.calculatorWidth,lLe)}px`})),Ve=V(()=>Ut(n.modelValue)?n.modelValue.length===0&&!m.inputValue:n.filterable?!m.inputValue:!0),et=V(()=>{var Qe;const yt=(Qe=n.placeholder)!=null?Qe:t("el.select.placeholder");return n.multiple||!pe.value?yt:m.selectedLabel}),At=V(()=>{var Qe,yt;return(yt=(Qe=_.value)==null?void 0:Qe.popperRef)==null?void 0:yt.contentRef}),It=V(()=>{if(n.multiple){const Qe=n.modelValue.length;if(n.modelValue.length>0&&Ue.value.has(n.modelValue[Qe-1])){const{index:yt}=Ue.value.get(n.modelValue[Qe-1]);return yt}}else if(!p(n.modelValue)&&Ue.value.has(n.modelValue)){const{index:Qe}=Ue.value.get(n.modelValue);return Qe}return-1}),De=V({get(){return ee.value&&Y.value!==!1},set(Qe){ee.value=Qe}}),Tt=V(()=>n.multiple?n.collapseTags?m.cachedOptions.slice(0,n.maxCollapseTags):m.cachedOptions:[]),ot=V(()=>n.multiple?n.collapseTags?m.cachedOptions.slice(n.maxCollapseTags):[]:[]),{createNewOption:G,removeNewOption:_e,selectNewOption:ve,clearAllNewOption:Le}=oLe(n,m),we=()=>{re.value||(m.menuVisibleOnFocus?m.menuVisibleOnFocus=!1:ee.value=!ee.value)},Ie=()=>{m.inputValue.length>0&&!ee.value&&(ee.value=!0),G(m.inputValue),Pe(m.inputValue)},wt=Cl(Ie,Ye.value),Pe=Qe=>{m.previousQuery===Qe||P.value||(m.previousQuery=Qe,n.filterable&&hn(n.filterMethod)?n.filterMethod(Qe):n.filterable&&n.remote&&hn(n.remoteMethod)&&n.remoteMethod(Qe),n.defaultFirstOption&&(n.filterable||n.remote)&&$.value.length?cn(Rt):cn(gn))},Rt=()=>{const Qe=$.value.filter(Nt=>!Nt.disabled&&Nt.type!=="Group"),yt=Qe.find(Nt=>Nt.created),ht=Qe[0];m.hoveringIndex=Wt($.value,yt||ht)},dt=Qe=>{Ms(n.modelValue,Qe)||e(si,Qe)},Mt=Qe=>{e(jn,Qe),dt(Qe),m.previousValue=n.multiple?String(Qe):Qe},Wt=(Qe=[],yt)=>{if(!er(yt))return Qe.indexOf(yt);const ht=n.valueKey;let Nt=-1;return Qe.some((yn,un)=>ba(yn,ht)===ba(yt,ht)?(Nt=un,!0):!1),Nt},zt=Qe=>er(Qe)?ba(Qe,n.valueKey):Qe,Sn=()=>{ut()},On=()=>{m.selectionWidth=y.value.getBoundingClientRect().width},Er=()=>{m.calculatorWidth=w.value.getBoundingClientRect().width},Qn=()=>{m.collapseItemWidth=I.value.getBoundingClientRect().width},Xr=()=>{var Qe,yt;(yt=(Qe=_.value)==null?void 0:Qe.updatePopper)==null||yt.call(Qe)},Yn=()=>{var Qe,yt;(yt=(Qe=b.value)==null?void 0:Qe.updatePopper)==null||yt.call(Qe)},Q=Qe=>{if(n.multiple){let yt=n.modelValue.slice();const ht=Wt(yt,c(Qe));ht>-1?(yt=[...yt.slice(0,ht),...yt.slice(ht+1)],m.cachedOptions.splice(ht,1),_e(Qe)):(n.multipleLimit<=0||yt.length<n.multipleLimit)&&(yt=[...yt,c(Qe)],m.cachedOptions.push(Qe),ve(Qe)),Mt(yt),Qe.created&&Pe(""),n.filterable&&!n.reserveKeyword&&(m.inputValue="")}else m.selectedLabel=u(Qe),Mt(c(Qe)),ee.value=!1,ve(Qe),Qe.created||Le();Zt()},ue=(Qe,yt)=>{let ht=n.modelValue.slice();const Nt=Wt(ht,c(yt));Nt>-1&&!re.value&&(ht=[...n.modelValue.slice(0,Nt),...n.modelValue.slice(Nt+1)],m.cachedOptions.splice(Nt,1),Mt(ht),e("remove-tag",c(yt)),_e(yt)),Qe.stopPropagation(),Zt()},Zt=()=>{var Qe;(Qe=x.value)==null||Qe.focus()},Ee=()=>{var Qe;if(ee.value){ee.value=!1,cn(()=>{var yt;return(yt=x.value)==null?void 0:yt.blur()});return}(Qe=x.value)==null||Qe.blur()},ce=()=>{m.inputValue.length>0?m.inputValue="":ee.value=!1},Et=Qe=>eee(Qe,yt=>!m.cachedOptions.some(ht=>c(ht)===yt&&d(ht))),Ct=Qe=>{if(n.multiple&&Qe.code!==jt.delete&&m.inputValue.length===0){Qe.preventDefault();const yt=n.modelValue.slice(),ht=Et(yt);if(ht<0)return;const Nt=yt[ht];yt.splice(ht,1);const yn=m.cachedOptions[ht];m.cachedOptions.splice(ht,1),_e(yn),Mt(yt),e("remove-tag",Nt)}},Ht=()=>{let Qe;Ut(n.modelValue)?Qe=[]:Qe=h.value,n.multiple?m.cachedOptions=[]:m.selectedLabel="",ee.value=!1,Mt(Qe),e("clear"),Le(),Zt()},ct=(Qe,yt=void 0)=>{const ht=$.value;if(!["forward","backward"].includes(Qe)||re.value||ht.length<=0||Ze.value||P.value)return;if(!ee.value)return we();yt===void 0&&(yt=m.hoveringIndex);let Nt=-1;Qe==="forward"?(Nt=yt+1,Nt>=ht.length&&(Nt=0)):Qe==="backward"&&(Nt=yt-1,(Nt<0||Nt>=ht.length)&&(Nt=ht.length-1));const yn=ht[Nt];if(d(yn)||yn.type==="Group")return ct(Qe,Nt);m.hoveringIndex=Nt,mt(Nt)},Ot=()=>{if(ee.value)~m.hoveringIndex&&$.value[m.hoveringIndex]&&Q($.value[m.hoveringIndex]);else return we()},rn=Qe=>{m.hoveringIndex=Qe??-1},gn=()=>{n.multiple?m.hoveringIndex=$.value.findIndex(Qe=>n.modelValue.some(yt=>zt(yt)===zt(Qe))):m.hoveringIndex=$.value.findIndex(Qe=>zt(Qe)===zt(n.modelValue))},Zn=Qe=>{if(m.inputValue=Qe.target.value,n.remote)wt();else return Ie()},rt=Qe=>{if(ee.value=!1,H.value){const yt=new FocusEvent("focus",Qe);U(yt)}},fr=()=>(m.isBeforeHide=!1,cn(()=>{~It.value&&mt(m.hoveringIndex)})),mt=Qe=>{C.value.scrollToItem(Qe)},Fe=(Qe,yt)=>{const ht=zt(Qe);if(Ke.value.has(ht)){const{option:Nt}=Ke.value.get(ht);return Nt}if(yt&&yt.length){const Nt=yt.find(yn=>zt(c(yn))===ht);if(Nt)return Nt}return{[l.value.value]:Qe,[l.value.label]:Qe}},Dt=(Qe=!1)=>{if(n.multiple)if(n.modelValue.length>0){const yt=m.cachedOptions.slice();m.cachedOptions.length=0,m.previousValue=n.modelValue.toString();for(const ht of n.modelValue){const Nt=Fe(ht,yt);m.cachedOptions.push(Nt)}}else m.cachedOptions=[],m.previousValue=void 0;else if(pe.value){m.previousValue=n.modelValue;const yt=$.value,ht=yt.findIndex(Nt=>zt(c(Nt))===zt(n.modelValue));~ht?m.selectedLabel=u(yt[ht]):(!m.selectedLabel||Qe)&&(m.selectedLabel=zt(n.modelValue))}else m.selectedLabel="",m.previousValue=void 0;Le(),ut()};return St(ee,Qe=>{Qe?Pe(""):(m.inputValue="",m.previousQuery=null,m.isBeforeHide=!0,G("")),e("visible-change",Qe)}),St(()=>n.modelValue,(Qe,yt)=>{var ht;(!Qe||Ut(Qe)&&Qe.length===0||n.multiple&&!Ms(Qe.toString(),m.previousValue)||!n.multiple&&zt(Qe)!==zt(m.previousValue))&&Dt(!0),!Ms(Qe,yt)&&n.validateEvent&&((ht=s==null?void 0:s.validate)==null||ht.call(s,"change").catch(yn=>void 0))},{deep:!0}),St(()=>n.options,()=>{const Qe=x.value;(!Qe||Qe&&document.activeElement!==Qe)&&Dt()},{deep:!0,flush:"post"}),St(()=>$.value,()=>C.value&&cn(C.value.resetScrollTop)),vs(()=>{m.isBeforeHide||le()}),vs(()=>{const{valueKey:Qe,options:yt}=n,ht=new Map;for(const Nt of yt){const yn=c(Nt);let un=yn;if(er(un)&&(un=ba(yn,Qe)),ht.get(un))break;ht.set(un,!0)}}),zn(()=>{Dt()}),zi(g,Sn),zi(y,On),zi(w,Er),zi(C,Xr),zi(k,Xr),zi(E,Yn),zi(I,Qn),{inputId:o,collapseTagSize:He,currentPlaceholder:et,expanded:ee,emptyText:Y,popupHeight:ae,debounce:Ye,allOptions:B,filteredOptions:$,iconComponent:me,iconReverse:ke,tagStyle:q,collapseTagStyle:te,inputStyle:ye,popperSize:v,dropdownMenuVisible:De,hasModelValue:pe,shouldShowPlaceholder:Ve,selectDisabled:re,selectSize:je,needStatusIcon:ne,showClearBtn:de,states:m,isFocused:H,nsSelect:r,nsInput:i,calculatorRef:w,inputRef:x,menuRef:C,tagMenuRef:E,tooltipRef:_,tagTooltipRef:b,selectRef:g,wrapperRef:k,selectionRef:y,prefixRef:A,suffixRef:T,collapseItemRef:I,popperRef:At,validateState:Be,validateIcon:Xe,showTagList:Tt,collapseTagList:ot,debouncedOnInputChange:wt,deleteTag:ue,getLabel:u,getValue:c,getDisabled:d,getValueKey:zt,handleClear:Ht,handleClickOutside:rt,handleDel:Ct,handleEsc:ce,focus:Zt,blur:Ee,handleMenuEnter:fr,handleResize:Sn,resetSelectionWidth:On,resetCalculatorWidth:Er,updateTooltip:Xr,updateTagTooltip:Yn,updateOptions:le,toggleMenu:we,scrollTo:mt,onInput:Zn,onKeyboardNavigate:ct,onKeyboardSelect:Ot,onSelect:Q,onHover:rn,handleCompositionStart:L,handleCompositionEnd:N,handleCompositionUpdate:F}},cLe=Ne({name:"ElSelectV2",components:{ElSelectMenu:sLe,ElTag:R1,ElTooltip:Ys,ElIcon:tn},directives:{ClickOutside:qf},props:Uke,emits:Hke,setup(n,{emit:e}){const t=V(()=>{const{modelValue:a,multiple:s}=n,o=s?[]:void 0;return Ut(a)?s?a:o:s?o:a}),r=uLe($r({...ja(n),modelValue:t}),e);pr(IB,{props:$r({...ja(n),height:r.popupHeight,modelValue:t}),expanded:r.expanded,tooltipRef:r.tooltipRef,onSelect:r.onSelect,onHover:r.onHover,onKeyboardNavigate:r.onKeyboardNavigate,onKeyboardSelect:r.onKeyboardSelect});const i=V(()=>n.multiple?r.states.cachedOptions.map(a=>a.label):r.states.selectedLabel);return{...r,modelValue:t,selectedLabel:i}}});function dLe(n,e,t,r,i,a){const s=Kt("el-tag"),o=Kt("el-tooltip"),l=Kt("el-icon"),u=Kt("el-select-menu"),c=h4("click-outside");return Wn((W(),Se("div",{ref:"selectRef",class:J([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),onMouseenter:d=>n.states.inputHovering=!0,onMouseleave:d=>n.states.inputHovering=!1},[be(o,{ref:"tooltipRef",visible:n.dropdownMenuVisible,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,placement:n.placement,pure:"",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:n.persistent,"append-to":n.appendTo,"show-arrow":n.showArrow,offset:n.offset,onBeforeShow:n.handleMenuEnter,onHide:d=>n.states.isBeforeHide=!1},{default:Oe(()=>[Ce("div",{ref:"wrapperRef",class:J([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:Tn(n.toggleMenu,["prevent"])},[n.$slots.prefix?(W(),Se("div",{key:0,ref:"prefixRef",class:J(n.nsSelect.e("prefix"))},[at(n.$slots,"prefix")],2)):st("v-if",!0),Ce("div",{ref:"selectionRef",class:J([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.modelValue.length)])},[n.multiple?at(n.$slots,"tag",{key:0},()=>[(W(!0),Se(on,null,ur(n.showTagList,d=>(W(),Se("div",{key:n.getValueKey(n.getValue(d)),class:J(n.nsSelect.e("selected-item"))},[be(s,{closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Jt(n.tagStyle),onClose:f=>n.deleteTag(f,d)},{default:Oe(()=>[Ce("span",{class:J(n.nsSelect.e("tags-text"))},[at(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[Xn(Ft(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.modelValue.length>n.maxCollapseTags?(W(),pt(o,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:Oe(()=>[Ce("div",{ref:"collapseItemRef",class:J(n.nsSelect.e("selected-item"))},[be(s,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,style:Jt(n.collapseTagStyle),"disable-transitions":""},{default:Oe(()=>[Ce("span",{class:J(n.nsSelect.e("tags-text"))}," + "+Ft(n.modelValue.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:Oe(()=>[Ce("div",{ref:"tagMenuRef",class:J(n.nsSelect.e("selection"))},[(W(!0),Se(on,null,ur(n.collapseTagList,d=>(W(),Se("div",{key:n.getValueKey(n.getValue(d)),class:J(n.nsSelect.e("selected-item"))},[be(s,{class:"in-tooltip",closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:f=>n.deleteTag(f,d)},{default:Oe(()=>[Ce("span",{class:J(n.nsSelect.e("tags-text"))},[at(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[Xn(Ft(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):st("v-if",!0)]):st("v-if",!0),Ce("div",{class:J([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Wn(Ce("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":d=>n.states.inputValue=d,style:Jt(n.inputStyle),autocomplete:n.autocomplete,tabindex:n.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":n.expanded,"aria-label":n.ariaLabel,class:J([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,role:"combobox",readonly:!n.filterable,spellcheck:"false",type:"text",name:n.name,onInput:n.onInput,onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onKeydown:[hi(Tn(d=>n.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),hi(Tn(d=>n.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),hi(Tn(n.onKeyboardSelect,["stop","prevent"]),["enter"]),hi(Tn(n.handleEsc,["stop","prevent"]),["esc"]),hi(Tn(n.handleDel,["stop"]),["delete"])],onClick:Tn(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[v4,n.states.inputValue]]),n.filterable?(W(),Se("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:J(n.nsSelect.e("input-calculator")),textContent:Ft(n.states.inputValue)},null,10,["textContent"])):st("v-if",!0)],2),n.shouldShowPlaceholder?(W(),Se("div",{key:1,class:J([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?at(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[Ce("span",null,Ft(n.currentPlaceholder),1)]):(W(),Se("span",{key:1},Ft(n.currentPlaceholder),1))],2)):st("v-if",!0)],2),Ce("div",{ref:"suffixRef",class:J(n.nsSelect.e("suffix"))},[n.iconComponent?Wn((W(),pt(l,{key:0,class:J([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.iconReverse])},{default:Oe(()=>[(W(),pt(ir(n.iconComponent)))]),_:1},8,["class"])),[[Nr,!n.showClearBtn]]):st("v-if",!0),n.showClearBtn&&n.clearIcon?(W(),pt(l,{key:1,class:J([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.nsSelect.e("clear")]),onClick:Tn(n.handleClear,["prevent","stop"])},{default:Oe(()=>[(W(),pt(ir(n.clearIcon)))]),_:1},8,["class","onClick"])):st("v-if",!0),n.validateState&&n.validateIcon&&n.needStatusIcon?(W(),pt(l,{key:2,class:J([n.nsInput.e("icon"),n.nsInput.e("validateIcon")])},{default:Oe(()=>[(W(),pt(ir(n.validateIcon)))]),_:1},8,["class"])):st("v-if",!0)],2)],10,["onClick"])]),content:Oe(()=>[be(u,{ref:"menuRef",data:n.filteredOptions,width:n.popperSize,"hovering-index":n.states.hoveringIndex,"scrollbar-always-on":n.scrollbarAlwaysOn},Wu({default:Oe(d=>[at(n.$slots,"default",Ac(Op(d)))]),_:2},[n.$slots.header?{name:"header",fn:Oe(()=>[Ce("div",{class:J(n.nsSelect.be("dropdown","header"))},[at(n.$slots,"header")],2)])}:void 0,n.$slots.loading&&n.loading?{name:"loading",fn:Oe(()=>[Ce("div",{class:J(n.nsSelect.be("dropdown","loading"))},[at(n.$slots,"loading")],2)])}:n.loading||n.filteredOptions.length===0?{name:"empty",fn:Oe(()=>[Ce("div",{class:J(n.nsSelect.be("dropdown","empty"))},[at(n.$slots,"empty",{},()=>[Ce("span",null,Ft(n.emptyText),1)])],2)])}:void 0,n.$slots.footer?{name:"footer",fn:Oe(()=>[Ce("div",{class:J(n.nsSelect.be("dropdown","footer"))},[at(n.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[c,n.handleClickOutside,n.popperRef]])}var fLe=$t(cLe,[["render",dLe],["__file","select.vue"]]);const hLe=Bn(fLe),pLe=Vt({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:tt([Number,Object])}}),mLe=Vt({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),vLe=Ne({name:"ElSkeletonItem"}),gLe=Ne({...vLe,props:mLe,setup(n){const e=kt("skeleton");return(t,r)=>(W(),Se("div",{class:J([S(e).e("item"),S(e).e(t.variant)])},[t.variant==="image"?(W(),pt(S(Vxe),{key:0})):st("v-if",!0)],2))}});var _M=$t(gLe,[["__file","skeleton-item.vue"]]);const yLe=(n,e=0)=>{if(e===0)return n;const t=er(e)&&!!e.initVal,r=ie(t);let i=null;const a=o=>{if(ti(o)){r.value=n.value;return}i&&clearTimeout(i),i=setTimeout(()=>{r.value=n.value},o)},s=o=>{o==="leading"?_n(e)?a(e):a(e.leading):er(e)?a(e.trailing):r.value=!1};return zn(()=>s("leading")),St(()=>n.value,o=>{s(o?"leading":"trailing")}),r},_Le=Ne({name:"ElSkeleton"}),bLe=Ne({..._Le,props:pLe,setup(n,{expose:e}){const t=n,r=kt("skeleton"),i=yLe(Kr(t,"loading"),t.throttle);return e({uiLoading:i}),(a,s)=>S(i)?(W(),Se("div",lr({key:0,class:[S(r).b(),S(r).is("animated",a.animated)]},a.$attrs),[(W(!0),Se(on,null,ur(a.count,o=>(W(),Se(on,{key:o},[S(i)?at(a.$slots,"template",{key:o},()=>[be(_M,{class:J(S(r).is("first")),variant:"p"},null,8,["class"]),(W(!0),Se(on,null,ur(a.rows,l=>(W(),pt(_M,{key:l,class:J([S(r).e("paragraph"),S(r).is("last",l===a.rows&&a.rows>1)]),variant:"p"},null,8,["class"]))),128))]):st("v-if",!0)],64))),128))],16)):at(a.$slots,"default",Ac(lr({key:1},a.$attrs)))}});var SLe=$t(bLe,[["__file","skeleton.vue"]]);const xLe=Bn(SLe,{SkeletonItem:_M}),wLe=Xi(_M),Wne=Symbol("sliderContextKey"),TLe=Vt({modelValue:{type:tt([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:La,inputSize:La,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:tt(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:tt(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:ch,default:"top"},marks:{type:tt(Object)},validateEvent:{type:Boolean,default:!0},...ks(["ariaLabel"])}),qD=n=>_n(n)||Ut(n)&&n.every(_n),CLe={[jn]:qD,[Ks]:qD,[si]:qD},ALe=Vt({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:ch,default:"top"}}),ELe={[jn]:n=>_n(n)},MLe=(n,e,t)=>{const r=ie(),i=ie(!1),a=V(()=>e.value instanceof Function),s=V(()=>a.value&&e.value(n.modelValue)||n.modelValue),o=Cl(()=>{t.value&&(i.value=!0)},50),l=Cl(()=>{t.value&&(i.value=!1)},50);return{tooltip:r,tooltipVisible:i,formatValue:s,displayTooltip:o,hideTooltip:l}},ILe=(n,e,t)=>{const{disabled:r,min:i,max:a,step:s,showTooltip:o,precision:l,sliderSize:u,formatTooltip:c,emitChange:d,resetSize:f,updateDragging:h}=Yt(Wne),{tooltip:p,tooltipVisible:m,formatValue:v,displayTooltip:g,hideTooltip:y}=MLe(n,c,o),_=ie(),b=V(()=>`${(n.modelValue-i.value)/(a.value-i.value)*100}%`),x=V(()=>n.vertical?{bottom:b.value}:{left:b.value}),w=()=>{e.hovering=!0,g()},A=()=>{e.hovering=!1,e.dragging||y()},T=re=>{r.value||(re.preventDefault(),U(re),window.addEventListener("mousemove",B),window.addEventListener("touchmove",B),window.addEventListener("mouseup",$),window.addEventListener("touchend",$),window.addEventListener("contextmenu",$),_.value.focus())},C=re=>{r.value||(e.newPosition=Number.parseFloat(b.value)+re/(a.value-i.value)*100,ee(e.newPosition),d())},E=()=>{C(-s.value)},I=()=>{C(s.value)},P=()=>{C(-s.value*4)},L=()=>{C(s.value*4)},N=()=>{r.value||(ee(0),d())},F=()=>{r.value||(ee(100),d())},k=re=>{let ne=!0;switch(re.code){case jt.left:case jt.down:E();break;case jt.right:case jt.up:I();break;case jt.home:N();break;case jt.end:F();break;case jt.pageDown:P();break;case jt.pageUp:L();break;default:ne=!1;break}ne&&re.preventDefault()},H=re=>{let ne,ae;return re.type.startsWith("touch")?(ae=re.touches[0].clientY,ne=re.touches[0].clientX):(ae=re.clientY,ne=re.clientX),{clientX:ne,clientY:ae}},U=re=>{e.dragging=!0,e.isClick=!0;const{clientX:ne,clientY:ae}=H(re);n.vertical?e.startY=ae:e.startX=ne,e.startPosition=Number.parseFloat(b.value),e.newPosition=e.startPosition},B=re=>{if(e.dragging){e.isClick=!1,g(),f();let ne;const{clientX:ae,clientY:pe}=H(re);n.vertical?(e.currentY=pe,ne=(e.startY-e.currentY)/u.value*100):(e.currentX=ae,ne=(e.currentX-e.startX)/u.value*100),e.newPosition=e.startPosition+ne,ee(e.newPosition)}},$=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||y(),e.isClick||ee(e.newPosition),d()},0),window.removeEventListener("mousemove",B),window.removeEventListener("touchmove",B),window.removeEventListener("mouseup",$),window.removeEventListener("touchend",$),window.removeEventListener("contextmenu",$))},ee=async re=>{if(re===null||Number.isNaN(+re))return;re<0?re=0:re>100&&(re=100);const ne=100/((a.value-i.value)/s.value);let pe=Math.round(re/ne)*ne*(a.value-i.value)*.01+i.value;pe=Number.parseFloat(pe.toFixed(l.value)),pe!==n.modelValue&&t(jn,pe),!e.dragging&&n.modelValue!==e.oldValue&&(e.oldValue=n.modelValue),await cn(),e.dragging&&g(),p.value.updatePopper()};return St(()=>e.dragging,re=>{h(re)}),ni(_,"touchstart",T,{passive:!1}),{disabled:r,button:_,tooltip:p,tooltipVisible:m,showTooltip:o,wrapperStyle:x,formatValue:v,handleMouseEnter:w,handleMouseLeave:A,onButtonDown:T,onKeyDown:k,setPosition:ee}},DLe=Ne({name:"ElSliderButton"}),PLe=Ne({...DLe,props:ALe,emits:ELe,setup(n,{expose:e,emit:t}){const r=n,i=kt("slider"),a=$r({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:r.modelValue}),{disabled:s,button:o,tooltip:l,showTooltip:u,tooltipVisible:c,wrapperStyle:d,formatValue:f,handleMouseEnter:h,handleMouseLeave:p,onButtonDown:m,onKeyDown:v,setPosition:g}=ILe(r,a,t),{hovering:y,dragging:_}=ja(a);return e({onButtonDown:m,onKeyDown:v,setPosition:g,hovering:y,dragging:_}),(b,x)=>(W(),Se("div",{ref_key:"button",ref:o,class:J([S(i).e("button-wrapper"),{hover:S(y),dragging:S(_)}]),style:Jt(S(d)),tabindex:S(s)?-1:0,onMouseenter:S(h),onMouseleave:S(p),onMousedown:S(m),onFocus:S(h),onBlur:S(p),onKeydown:S(v)},[be(S(Ys),{ref_key:"tooltip",ref:l,visible:S(c),placement:b.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":b.tooltipClass,disabled:!S(u),persistent:S(u)},{content:Oe(()=>[Ce("span",null,Ft(S(f)),1)]),default:Oe(()=>[Ce("div",{class:J([S(i).e("button"),{hover:S(y),dragging:S(_)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var e$=$t(PLe,[["__file","button.vue"]]);const RLe=Vt({mark:{type:tt([String,Object]),default:void 0}});var kLe=Ne({name:"ElSliderMarker",props:RLe,setup(n){const e=kt("slider"),t=V(()=>ln(n.mark)?n.mark:n.mark.label),r=V(()=>ln(n.mark)?void 0:n.mark.style);return()=>an("div",{class:e.e("marks-text"),style:r.value},t.value)}});const LLe=(n,e,t)=>{const{form:r,formItem:i}=Zs(),a=jr(),s=ie(),o=ie(),l={firstButton:s,secondButton:o},u=V(()=>n.disabled||(r==null?void 0:r.disabled)||!1),c=V(()=>Math.min(e.firstValue,e.secondValue)),d=V(()=>Math.max(e.firstValue,e.secondValue)),f=V(()=>n.range?`${100*(d.value-c.value)/(n.max-n.min)}%`:`${100*(e.firstValue-n.min)/(n.max-n.min)}%`),h=V(()=>n.range?`${100*(c.value-n.min)/(n.max-n.min)}%`:"0%"),p=V(()=>n.vertical?{height:n.height}:{}),m=V(()=>n.vertical?{height:f.value,bottom:h.value}:{width:f.value,left:h.value}),v=()=>{a.value&&(e.sliderSize=a.value[`client${n.vertical?"Height":"Width"}`])},g=P=>{const L=n.min+P*(n.max-n.min)/100;if(!n.range)return s;let N;return Math.abs(c.value-L)<Math.abs(d.value-L)?N=e.firstValue<e.secondValue?"firstButton":"secondButton":N=e.firstValue>e.secondValue?"firstButton":"secondButton",l[N]},y=P=>{const L=g(P);return L.value.setPosition(P),L},_=P=>{e.firstValue=P??n.min,x(n.range?[c.value,d.value]:P??n.min)},b=P=>{e.secondValue=P,n.range&&x([c.value,d.value])},x=P=>{t(jn,P),t(Ks,P)},w=async()=>{await cn(),t(si,n.range?[c.value,d.value]:n.modelValue)},A=P=>{var L,N,F,k,H,U;if(u.value||e.dragging)return;v();let B=0;if(n.vertical){const $=(F=(N=(L=P.touches)==null?void 0:L.item(0))==null?void 0:N.clientY)!=null?F:P.clientY;B=(a.value.getBoundingClientRect().bottom-$)/e.sliderSize*100}else{const $=(U=(H=(k=P.touches)==null?void 0:k.item(0))==null?void 0:H.clientX)!=null?U:P.clientX,ee=a.value.getBoundingClientRect().left;B=($-ee)/e.sliderSize*100}if(!(B<0||B>100))return y(B)};return{elFormItem:i,slider:a,firstButton:s,secondButton:o,sliderDisabled:u,minValue:c,maxValue:d,runwayStyle:p,barStyle:m,resetSize:v,setPosition:y,emitChange:w,onSliderWrapperPrevent:P=>{var L,N;((L=l.firstButton.value)!=null&&L.dragging||(N=l.secondButton.value)!=null&&N.dragging)&&P.preventDefault()},onSliderClick:P=>{A(P)&&w()},onSliderDown:async P=>{const L=A(P);L&&(await cn(),L.value.onButtonDown(P))},onSliderMarkerDown:P=>{u.value||e.dragging||y(P)},setFirstValue:_,setSecondValue:b}},OLe=(n,e,t,r)=>({stops:V(()=>{if(!n.showStops||n.min>n.max)return[];if(n.step===0)return[];const s=(n.max-n.min)/n.step,o=100*n.step/(n.max-n.min),l=Array.from({length:s-1}).map((u,c)=>(c+1)*o);return n.range?l.filter(u=>u<100*(t.value-n.min)/(n.max-n.min)||u>100*(r.value-n.min)/(n.max-n.min)):l.filter(u=>u>100*(e.firstValue-n.min)/(n.max-n.min))}),getStopStyle:s=>n.vertical?{bottom:`${s}%`}:{left:`${s}%`}}),NLe=n=>V(()=>n.marks?Object.keys(n.marks).map(Number.parseFloat).sort((t,r)=>t-r).filter(t=>t<=n.max&&t>=n.min).map(t=>({point:t,position:(t-n.min)*100/(n.max-n.min),mark:n.marks[t]})):[]),BLe=(n,e,t,r,i,a)=>{const s=u=>{i(jn,u),i(Ks,u)},o=()=>n.range?![t.value,r.value].every((u,c)=>u===e.oldValue[c]):n.modelValue!==e.oldValue,l=()=>{var u,c;n.min>n.max&&Xa("Slider","min should not be greater than max.");const d=n.modelValue;n.range&&Ut(d)?d[1]<n.min?s([n.min,n.min]):d[0]>n.max?s([n.max,n.max]):d[0]<n.min?s([n.min,d[1]]):d[1]>n.max?s([d[0],n.max]):(e.firstValue=d[0],e.secondValue=d[1],o()&&(n.validateEvent&&((u=a==null?void 0:a.validate)==null||u.call(a,"change").catch(f=>void 0)),e.oldValue=d.slice())):!n.range&&_n(d)&&!Number.isNaN(d)&&(d<n.min?s(n.min):d>n.max?s(n.max):(e.firstValue=d,o()&&(n.validateEvent&&((c=a==null?void 0:a.validate)==null||c.call(a,"change").catch(f=>void 0)),e.oldValue=d)))};l(),St(()=>e.dragging,u=>{u||l()}),St(()=>n.modelValue,(u,c)=>{e.dragging||Ut(u)&&Ut(c)&&u.every((d,f)=>d===c[f])&&e.firstValue===u[0]&&e.secondValue===u[1]||l()},{deep:!0}),St(()=>[n.min,n.max],()=>{l()})},FLe=(n,e,t)=>{const r=ie();return zn(async()=>{n.range?(Ut(n.modelValue)?(e.firstValue=Math.max(n.min,n.modelValue[0]),e.secondValue=Math.min(n.max,n.modelValue[1])):(e.firstValue=n.min,e.secondValue=n.max),e.oldValue=[e.firstValue,e.secondValue]):(!_n(n.modelValue)||Number.isNaN(n.modelValue)?e.firstValue=n.min:e.firstValue=Math.min(n.max,Math.max(n.min,n.modelValue)),e.oldValue=e.firstValue),ni(window,"resize",t),await cn(),t()}),{sliderWrapper:r}},ULe=Ne({name:"ElSlider"}),zLe=Ne({...ULe,props:TLe,emits:CLe,setup(n,{expose:e,emit:t}){const r=n,i=kt("slider"),{t:a}=Ar(),s=$r({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:o,slider:l,firstButton:u,secondButton:c,sliderDisabled:d,minValue:f,maxValue:h,runwayStyle:p,barStyle:m,resetSize:v,emitChange:g,onSliderWrapperPrevent:y,onSliderClick:_,onSliderDown:b,onSliderMarkerDown:x,setFirstValue:w,setSecondValue:A}=LLe(r,s,t),{stops:T,getStopStyle:C}=OLe(r,s,f,h),{inputId:E,isLabeledByFormItem:I}=ec(r,{formItemContext:o}),P=Ca(),L=V(()=>r.inputSize||P.value),N=V(()=>r.ariaLabel||a("el.slider.defaultLabel",{min:r.min,max:r.max})),F=V(()=>r.range?r.rangeStartLabel||a("el.slider.defaultRangeStartLabel"):N.value),k=V(()=>r.formatValueText?r.formatValueText(ne.value):`${ne.value}`),H=V(()=>r.rangeEndLabel||a("el.slider.defaultRangeEndLabel")),U=V(()=>r.formatValueText?r.formatValueText(ae.value):`${ae.value}`),B=V(()=>[i.b(),i.m(P.value),i.is("vertical",r.vertical),{[i.m("with-input")]:r.showInput}]),$=NLe(r);BLe(r,s,f,h,t,o);const ee=V(()=>{const me=[r.min,r.max,r.step].map(ke=>{const Be=`${ke}`.split(".")[1];return Be?Be.length:0});return Math.max.apply(null,me)}),{sliderWrapper:re}=FLe(r,s,v),{firstValue:ne,secondValue:ae,sliderSize:pe}=ja(s),de=me=>{s.dragging=me};return ni(re,"touchstart",y,{passive:!1}),ni(re,"touchmove",y,{passive:!1}),pr(Wne,{...ja(r),sliderSize:pe,disabled:d,precision:ee,emitChange:g,resetSize:v,updateDragging:de}),e({onSliderClick:_}),(me,ke)=>{var Be,Xe;return W(),Se("div",{id:me.range?S(E):void 0,ref_key:"sliderWrapper",ref:re,class:J(S(B)),role:me.range?"group":void 0,"aria-label":me.range&&!S(I)?S(N):void 0,"aria-labelledby":me.range&&S(I)?(Be=S(o))==null?void 0:Be.labelId:void 0},[Ce("div",{ref_key:"slider",ref:l,class:J([S(i).e("runway"),{"show-input":me.showInput&&!me.range},S(i).is("disabled",S(d))]),style:Jt(S(p)),onMousedown:S(b),onTouchstartPassive:S(b)},[Ce("div",{class:J(S(i).e("bar")),style:Jt(S(m))},null,6),be(e$,{id:me.range?void 0:S(E),ref_key:"firstButton",ref:u,"model-value":S(ne),vertical:me.vertical,"tooltip-class":me.tooltipClass,placement:me.placement,role:"slider","aria-label":me.range||!S(I)?S(F):void 0,"aria-labelledby":!me.range&&S(I)?(Xe=S(o))==null?void 0:Xe.labelId:void 0,"aria-valuemin":me.min,"aria-valuemax":me.range?S(ae):me.max,"aria-valuenow":S(ne),"aria-valuetext":S(k),"aria-orientation":me.vertical?"vertical":"horizontal","aria-disabled":S(d),"onUpdate:modelValue":S(w)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),me.range?(W(),pt(e$,{key:0,ref_key:"secondButton",ref:c,"model-value":S(ae),vertical:me.vertical,"tooltip-class":me.tooltipClass,placement:me.placement,role:"slider","aria-label":S(H),"aria-valuemin":S(ne),"aria-valuemax":me.max,"aria-valuenow":S(ae),"aria-valuetext":S(U),"aria-orientation":me.vertical?"vertical":"horizontal","aria-disabled":S(d),"onUpdate:modelValue":S(A)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):st("v-if",!0),me.showStops?(W(),Se("div",{key:1},[(W(!0),Se(on,null,ur(S(T),(Ye,Y)=>(W(),Se("div",{key:Y,class:J(S(i).e("stop")),style:Jt(S(C)(Ye))},null,6))),128))])):st("v-if",!0),S($).length>0?(W(),Se(on,{key:2},[Ce("div",null,[(W(!0),Se(on,null,ur(S($),(Ye,Y)=>(W(),Se("div",{key:Y,style:Jt(S(C)(Ye.position)),class:J([S(i).e("stop"),S(i).e("marks-stop")])},null,6))),128))]),Ce("div",{class:J(S(i).e("marks"))},[(W(!0),Se(on,null,ur(S($),(Ye,Y)=>(W(),pt(S(kLe),{key:Y,mark:Ye.mark,style:Jt(S(C)(Ye.position)),onMousedown:Tn(he=>S(x)(Ye.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):st("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),me.showInput&&!me.range?(W(),pt(S(Tne),{key:0,ref:"input","model-value":S(ne),class:J(S(i).e("input")),step:me.step,disabled:S(d),controls:me.showInputControls,min:me.min,max:me.max,precision:S(ee),debounce:me.debounce,size:S(L),"onUpdate:modelValue":S(w),onChange:S(g)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):st("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var HLe=$t(zLe,[["__file","slider.vue"]]);const VLe=Bn(HLe),$Le=Vt({prefixCls:{type:String}}),t$=Ne({name:"ElSpaceItem",props:$Le,setup(n,{slots:e}){const t=kt("space"),r=V(()=>`${n.prefixCls||t.b()}__item`);return()=>an("div",{class:r.value},at(e,"default"))}}),n$={small:8,default:12,large:16};function GLe(n){const e=kt("space"),t=V(()=>[e.b(),e.m(n.direction),n.class]),r=ie(0),i=ie(0),a=V(()=>{const o=n.wrap||n.fill?{flexWrap:"wrap"}:{},l={alignItems:n.alignment},u={rowGap:`${i.value}px`,columnGap:`${r.value}px`};return[o,l,u,n.style]}),s=V(()=>n.fill?{flexGrow:1,minWidth:`${n.fillRatio}%`}:{});return vs(()=>{const{size:o="small",wrap:l,direction:u,fill:c}=n;if(Ut(o)){const[d=0,f=0]=o;r.value=d,i.value=f}else{let d;_n(o)?d=o:d=n$[o||"small"]||n$.small,(l||c)&&u==="horizontal"?r.value=i.value=d:u==="horizontal"?(r.value=d,i.value=0):(i.value=d,r.value=0)}}),{classes:t,containerStyle:a,itemStyle:s}}const WLe=Vt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:tt([String,Object,Array]),default:""},style:{type:tt([String,Array,Object]),default:""},alignment:{type:tt(String),default:"center"},prefixCls:{type:String},spacer:{type:tt([Object,String,Number,Array]),default:null,validator:n=>qi(n)||_n(n)||ln(n)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:Hd,validator:n=>_n(n)||Ut(n)&&n.length===2&&n.every(_n)}}),qLe=Ne({name:"ElSpace",props:WLe,setup(n,{slots:e}){const{classes:t,containerStyle:r,itemStyle:i}=GLe(n);function a(s,o="",l=[]){const{prefixCls:u}=n;return s.forEach((c,d)=>{ZL(c)?Ut(c.children)&&c.children.forEach((f,h)=>{ZL(f)&&Ut(f.children)?a(f.children,`${o+h}-`,l):l.push(be(t$,{style:i.value,prefixCls:u,key:`nested-${o+h}`},{default:()=>[f]},xu.PROPS|xu.STYLE,["style","prefixCls"]))}):FAe(c)&&l.push(be(t$,{style:i.value,prefixCls:u,key:`LoopKey${o+d}`},{default:()=>[c]},xu.PROPS|xu.STYLE,["style","prefixCls"]))}),l}return()=>{var s;const{spacer:o,direction:l}=n,u=at(e,"default",{key:0},()=>[]);if(((s=u.children)!=null?s:[]).length===0)return null;if(Ut(u.children)){let c=a(u.children);if(o){const d=c.length-1;c=c.reduce((f,h,p)=>{const m=[...f,h];return p!==d&&m.push(be("span",{style:[i.value,l==="vertical"?"width: 100%":null],key:p},[qi(o)?o:Xn(o,xu.TEXT)],xu.STYLE)),m},[])}return be("div",{class:t.value,style:r.value},c,xu.STYLE|xu.CLASS)}return u.children}}}),jLe=Bn(qLe),KLe=Vt({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:tt([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:tt([String,Object,Array])}}),XLe=Ne({name:"ElStatistic"}),YLe=Ne({...XLe,props:KLe,setup(n,{expose:e}){const t=n,r=kt("statistic"),i=V(()=>{const{value:a,formatter:s,precision:o,decimalSeparator:l,groupSeparator:u}=t;if(hn(s))return s(a);if(!_n(a)||Number.isNaN(a))return a;let[c,d=""]=String(a).split(".");return d=d.padEnd(o,"0").slice(0,o>0?o:0),c=c.replace(/\B(?=(\d{3})+(?!\d))/g,u),[c,d].join(d?l:"")});return e({displayValue:i}),(a,s)=>(W(),Se("div",{class:J(S(r).b())},[a.$slots.title||a.title?(W(),Se("div",{key:0,class:J(S(r).e("head"))},[at(a.$slots,"title",{},()=>[Xn(Ft(a.title),1)])],2)):st("v-if",!0),Ce("div",{class:J(S(r).e("content"))},[a.$slots.prefix||a.prefix?(W(),Se("div",{key:0,class:J(S(r).e("prefix"))},[at(a.$slots,"prefix",{},()=>[Ce("span",null,Ft(a.prefix),1)])],2)):st("v-if",!0),Ce("span",{class:J(S(r).e("number")),style:Jt(a.valueStyle)},Ft(S(i)),7),a.$slots.suffix||a.suffix?(W(),Se("div",{key:1,class:J(S(r).e("suffix"))},[at(a.$slots,"suffix",{},()=>[Ce("span",null,Ft(a.suffix),1)])],2)):st("v-if",!0)],2)],2))}});var QLe=$t(YLe,[["__file","statistic.vue"]]);const qne=Bn(QLe),ZLe=Vt({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:tt([Number,Object]),default:0},valueStyle:{type:tt([String,Object,Array])}}),JLe={finish:()=>!0,[si]:n=>_n(n)},e5e=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],r$=n=>_n(n)?new Date(n).getTime():n.valueOf(),i$=(n,e)=>{let t=n;const r=/\[([^\]]*)]/g;return e5e.reduce((a,[s,o])=>{const l=new RegExp(`${s}+(?![^\\[\\]]*\\])`,"g");if(l.test(a)){const u=Math.floor(t/o);return t-=u*o,a.replace(l,c=>String(u).padStart(c.length,"0"))}return a},e).replace(r,"$1")},t5e=Ne({name:"ElCountdown"}),n5e=Ne({...t5e,props:ZLe,emits:JLe,setup(n,{expose:e,emit:t}){const r=n;let i;const a=ie(0),s=V(()=>i$(a.value,r.format)),o=c=>i$(c,r.format),l=()=>{i&&(ov(i),i=void 0)},u=()=>{const c=r$(r.value),d=()=>{let f=c-Date.now();t("change",f),f<=0?(f=0,l(),t("finish")):i=Fp(d),a.value=f};i=Fp(d)};return zn(()=>{a.value=r$(r.value)-Date.now(),St(()=>[r.value,r.format],()=>{l(),u()},{immediate:!0})}),Wr(()=>{l()}),e({displayValue:s}),(c,d)=>(W(),pt(S(qne),{value:a.value,title:c.title,prefix:c.prefix,suffix:c.suffix,"value-style":c.valueStyle,formatter:o},Wu({_:2},[ur(c.$slots,(f,h)=>({name:h,fn:Oe(()=>[at(c.$slots,h)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var r5e=$t(n5e,[["__file","countdown.vue"]]);const i5e=Bn(r5e),a5e=Vt({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),s5e={[si]:(n,e)=>[n,e].every(_n)},o5e=Ne({name:"ElSteps"}),l5e=Ne({...o5e,props:a5e,emits:s5e,setup(n,{emit:e}){const t=n,r=kt("steps"),{children:i,addChild:a,removeChild:s}=lB(tr(),"ElStep");return St(i,()=>{i.value.forEach((o,l)=>{o.setIndex(l)})}),pr("ElSteps",{props:t,steps:i,addStep:a,removeStep:s}),St(()=>t.active,(o,l)=>{e(si,o,l)}),(o,l)=>(W(),Se("div",{class:J([S(r).b(),S(r).m(o.simple?"simple":o.direction)])},[at(o.$slots,"default")],2))}});var u5e=$t(l5e,[["__file","steps.vue"]]);const c5e=Vt({title:{type:String,default:""},icon:{type:li},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),d5e=Ne({name:"ElStep"}),f5e=Ne({...d5e,props:c5e,setup(n){const e=n,t=kt("step"),r=ie(-1),i=ie({}),a=ie(""),s=Yt("ElSteps"),o=tr();zn(()=>{St([()=>s.props.active,()=>s.props.processStatus,()=>s.props.finishStatus],([w])=>{b(w)},{immediate:!0})}),Wr(()=>{s.removeStep(x.uid)});const l=V(()=>e.status||a.value),u=V(()=>{const w=s.steps.value[r.value-1];return w?w.currentStatus:"wait"}),c=V(()=>s.props.alignCenter),d=V(()=>s.props.direction==="vertical"),f=V(()=>s.props.simple),h=V(()=>s.steps.value.length),p=V(()=>{var w;return((w=s.steps.value[h.value-1])==null?void 0:w.uid)===(o==null?void 0:o.uid)}),m=V(()=>f.value?"":s.props.space),v=V(()=>[t.b(),t.is(f.value?"simple":s.props.direction),t.is("flex",p.value&&!m.value&&!c.value),t.is("center",c.value&&!d.value&&!f.value)]),g=V(()=>{const w={flexBasis:_n(m.value)?`${m.value}px`:m.value?m.value:`${100/(h.value-(c.value?0:1))}%`};return d.value||p.value&&(w.maxWidth=`${100/h.value}%`),w}),y=w=>{r.value=w},_=w=>{const A=w==="wait",T={transitionDelay:`${A?"-":""}${150*r.value}ms`},C=w===s.props.processStatus||A?0:100;T.borderWidth=C&&!f.value?"1px":0,T[s.props.direction==="vertical"?"height":"width"]=`${C}%`,i.value=T},b=w=>{w>r.value?a.value=s.props.finishStatus:w===r.value&&u.value!=="error"?a.value=s.props.processStatus:a.value="wait";const A=s.steps.value[r.value-1];A&&A.calcProgress(a.value)},x=$r({uid:o.uid,currentStatus:l,setIndex:y,calcProgress:_});return s.addStep(x),(w,A)=>(W(),Se("div",{style:Jt(S(g)),class:J(S(v))},[st(" icon & line "),Ce("div",{class:J([S(t).e("head"),S(t).is(S(l))])},[S(f)?st("v-if",!0):(W(),Se("div",{key:0,class:J(S(t).e("line"))},[Ce("i",{class:J(S(t).e("line-inner")),style:Jt(i.value)},null,6)],2)),Ce("div",{class:J([S(t).e("icon"),S(t).is(w.icon||w.$slots.icon?"icon":"text")])},[at(w.$slots,"icon",{},()=>[w.icon?(W(),pt(S(tn),{key:0,class:J(S(t).e("icon-inner"))},{default:Oe(()=>[(W(),pt(ir(w.icon)))]),_:1},8,["class"])):S(l)==="success"?(W(),pt(S(tn),{key:1,class:J([S(t).e("icon-inner"),S(t).is("status")])},{default:Oe(()=>[be(S(gw))]),_:1},8,["class"])):S(l)==="error"?(W(),pt(S(tn),{key:2,class:J([S(t).e("icon-inner"),S(t).is("status")])},{default:Oe(()=>[be(S(Fc))]),_:1},8,["class"])):S(f)?st("v-if",!0):(W(),Se("div",{key:3,class:J(S(t).e("icon-inner"))},Ft(r.value+1),3))])],2)],2),st(" title & description "),Ce("div",{class:J(S(t).e("main"))},[Ce("div",{class:J([S(t).e("title"),S(t).is(S(l))])},[at(w.$slots,"title",{},()=>[Xn(Ft(w.title),1)])],2),S(f)?(W(),Se("div",{key:0,class:J(S(t).e("arrow"))},null,2)):(W(),Se("div",{key:1,class:J([S(t).e("description"),S(t).is(S(l))])},[at(w.$slots,"description",{},()=>[Xn(Ft(w.description),1)])],2))],2)],6))}});var jne=$t(f5e,[["__file","item.vue"]]);const h5e=Bn(u5e,{Step:jne}),p5e=Xi(jne),Kne=n=>["",...Hd].includes(n),m5e=Vt({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:Kne},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:li},activeActionIcon:{type:li},activeIcon:{type:li},inactiveIcon:{type:li},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:tt(Function)},id:String,tabindex:{type:[String,Number]},...ks(["ariaLabel"])}),v5e={[jn]:n=>mi(n)||ln(n)||_n(n),[si]:n=>mi(n)||ln(n)||_n(n),[Ks]:n=>mi(n)||ln(n)||_n(n)},Xne="ElSwitch",g5e=Ne({name:Xne}),y5e=Ne({...g5e,props:m5e,emits:v5e,setup(n,{expose:e,emit:t}){const r=n,{formItem:i}=Zs(),a=Ca(),s=kt("switch"),{inputId:o}=ec(r,{formItemContext:i}),l=Js(V(()=>r.loading)),u=ie(r.modelValue!==!1),c=ie(),d=ie(),f=V(()=>[s.b(),s.m(a.value),s.is("disabled",l.value),s.is("checked",g.value)]),h=V(()=>[s.e("label"),s.em("label","left"),s.is("active",!g.value)]),p=V(()=>[s.e("label"),s.em("label","right"),s.is("active",g.value)]),m=V(()=>({width:ia(r.width)}));St(()=>r.modelValue,()=>{u.value=!0});const v=V(()=>u.value?r.modelValue:!1),g=V(()=>v.value===r.activeValue);[r.activeValue,r.inactiveValue].includes(v.value)||(t(jn,r.inactiveValue),t(si,r.inactiveValue),t(Ks,r.inactiveValue)),St(g,x=>{var w;c.value.checked=x,r.validateEvent&&((w=i==null?void 0:i.validate)==null||w.call(i,"change").catch(A=>void 0))});const y=()=>{const x=g.value?r.inactiveValue:r.activeValue;t(jn,x),t(si,x),t(Ks,x),cn(()=>{c.value.checked=g.value})},_=()=>{if(l.value)return;const{beforeChange:x}=r;if(!x){y();return}const w=x();[Bx(w),mi(w)].includes(!0)||Xa(Xne,"beforeChange must return type `Promise<boolean>` or `boolean`"),Bx(w)?w.then(T=>{T&&y()}).catch(T=>{}):w&&y()},b=()=>{var x,w;(w=(x=c.value)==null?void 0:x.focus)==null||w.call(x)};return zn(()=>{c.value.checked=g.value}),e({focus:b,checked:g}),(x,w)=>(W(),Se("div",{class:J(S(f)),onClick:Tn(_,["prevent"])},[Ce("input",{id:S(o),ref_key:"input",ref:c,class:J(S(s).e("input")),type:"checkbox",role:"switch","aria-checked":S(g),"aria-disabled":S(l),"aria-label":x.ariaLabel,name:x.name,"true-value":x.activeValue,"false-value":x.inactiveValue,disabled:S(l),tabindex:x.tabindex,onChange:y,onKeydown:hi(_,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!x.inlinePrompt&&(x.inactiveIcon||x.inactiveText)?(W(),Se("span",{key:0,class:J(S(h))},[x.inactiveIcon?(W(),pt(S(tn),{key:0},{default:Oe(()=>[(W(),pt(ir(x.inactiveIcon)))]),_:1})):st("v-if",!0),!x.inactiveIcon&&x.inactiveText?(W(),Se("span",{key:1,"aria-hidden":S(g)},Ft(x.inactiveText),9,["aria-hidden"])):st("v-if",!0)],2)):st("v-if",!0),Ce("span",{ref_key:"core",ref:d,class:J(S(s).e("core")),style:Jt(S(m))},[x.inlinePrompt?(W(),Se("div",{key:0,class:J(S(s).e("inner"))},[x.activeIcon||x.inactiveIcon?(W(),pt(S(tn),{key:0,class:J(S(s).is("icon"))},{default:Oe(()=>[(W(),pt(ir(S(g)?x.activeIcon:x.inactiveIcon)))]),_:1},8,["class"])):x.activeText||x.inactiveText?(W(),Se("span",{key:1,class:J(S(s).is("text")),"aria-hidden":!S(g)},Ft(S(g)?x.activeText:x.inactiveText),11,["aria-hidden"])):st("v-if",!0)],2)):st("v-if",!0),Ce("div",{class:J(S(s).e("action"))},[x.loading?(W(),pt(S(tn),{key:0,class:J(S(s).is("loading"))},{default:Oe(()=>[be(S(Pd))]),_:1},8,["class"])):S(g)?at(x.$slots,"active-action",{key:1},()=>[x.activeActionIcon?(W(),pt(S(tn),{key:0},{default:Oe(()=>[(W(),pt(ir(x.activeActionIcon)))]),_:1})):st("v-if",!0)]):S(g)?st("v-if",!0):at(x.$slots,"inactive-action",{key:2},()=>[x.inactiveActionIcon?(W(),pt(S(tn),{key:0},{default:Oe(()=>[(W(),pt(ir(x.inactiveActionIcon)))]),_:1})):st("v-if",!0)])],2)],6),!x.inlinePrompt&&(x.activeIcon||x.activeText)?(W(),Se("span",{key:1,class:J(S(p))},[x.activeIcon?(W(),pt(S(tn),{key:0},{default:Oe(()=>[(W(),pt(ir(x.activeIcon)))]),_:1})):st("v-if",!0),!x.activeIcon&&x.activeText?(W(),Se("span",{key:1,"aria-hidden":!S(g)},Ft(x.activeText),9,["aria-hidden"])):st("v-if",!0)],2)):st("v-if",!0)],10,["onClick"]))}});var _5e=$t(y5e,[["__file","switch.vue"]]);const b5e=Bn(_5e),jD=function(n){var e;return(e=n.target)==null?void 0:e.closest("td")},S5e=function(n,e,t,r,i){if(!e&&!r&&(!i||Ut(i)&&!i.length))return n;ln(t)?t=t==="descending"?-1:1:t=t&&t<0?-1:1;const a=r?null:function(o,l){return i?(Ut(i)||(i=[i]),i.map(u=>ln(u)?ba(o,u):u(o,l,n))):(e!=="$key"&&er(o)&&"$value"in o&&(o=o.$value),[er(o)?ba(o,e):o])},s=function(o,l){if(r)return r(o.value,l.value);for(let u=0,c=o.key.length;u<c;u++){if(o.key[u]<l.key[u])return-1;if(o.key[u]>l.key[u])return 1}return 0};return n.map((o,l)=>({value:o,index:l,key:a?a(o,l):null})).sort((o,l)=>{let u=s(o,l);return u||(u=o.index-l.index),u*+t}).map(o=>o.value)},Yne=function(n,e){let t=null;return n.columns.forEach(r=>{r.id===e&&(t=r)}),t},x5e=function(n,e){let t=null;for(let r=0;r<n.columns.length;r++){const i=n.columns[r];if(i.columnKey===e){t=i;break}}return t||Xa("ElTable",`No column matching with column-key: ${e}`),t},a$=function(n,e,t){const r=(e.className||"").match(new RegExp(`${t}-table_[^\\s]+`,"gm"));return r?Yne(n,r[0]):null},go=(n,e)=>{if(!n)throw new Error("Row is required when get row identity");if(ln(e)){if(!e.includes("."))return`${n[e]}`;const t=e.split(".");let r=n;for(const i of t)r=r[i];return`${r}`}else if(hn(e))return e.call(null,n)},E0=function(n,e){const t={};return(n||[]).forEach((r,i)=>{t[go(r,e)]={row:r,index:i}}),t};function w5e(n,e){const t={};let r;for(r in n)t[r]=n[r];for(r in e)if(Ir(e,r)){const i=e[r];typeof i<"u"&&(t[r]=i)}return t}function kB(n){return n===""||n!==void 0&&(n=Number.parseInt(n,10),Number.isNaN(n)&&(n="")),n}function Qne(n){return n===""||n!==void 0&&(n=kB(n),Number.isNaN(n)&&(n=80)),n}function T5e(n){return _n(n)?n:ln(n)?/^\d+(?:px)?$/.test(n)?Number.parseInt(n,10):n:null}function C5e(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...r)=>e(t(...r)))}function bM(n,e,t,r,i,a){let s=a??0,o=!1;const l=n.indexOf(e),u=l!==-1,c=i==null?void 0:i.call(null,e,a),d=h=>{h==="add"?n.push(e):n.splice(l,1),o=!0},f=h=>{let p=0;const m=(r==null?void 0:r.children)&&h[r.children];return m&&Ut(m)&&(p+=m.length,m.forEach(v=>{p+=f(v)})),p};return(!i||c)&&(mi(t)?t&&!u?d("add"):!t&&u&&d("remove"):d(u?"remove":"add")),!(r!=null&&r.checkStrictly)&&(r!=null&&r.children)&&Ut(e[r.children])&&e[r.children].forEach(h=>{bM(n,h,t??!u,r,i,s+1),s+=f(h)+1}),o}function A5e(n,e,t="children",r="hasChildren"){const i=s=>!(Ut(s)&&s.length);function a(s,o,l){e(s,o,l),o.forEach(u=>{if(u[r]){e(u,null,l+1);return}const c=u[t];i(c)||a(u,c,l+1)})}n.forEach(s=>{if(s[r]){e(s,null,0);return}const o=s[t];i(o)||a(s,o,0)})}const s$=(n,e)=>({content:e,...n,popperOptions:{strategy:"fixed",...n.popperOptions}});let gu=null;function E5e(n,e,t,r){if((gu==null?void 0:gu.trigger)===t){nee(gu.vm.component.props,s$(n,e));return}gu==null||gu();const i=r==null?void 0:r.refs.tableWrapper,a=i==null?void 0:i.dataset.prefix,s=be(Ys,{virtualTriggering:!0,virtualRef:t,appendTo:i,placement:"top",transition:"none",offset:0,hideAfter:0,...s$(n,e)});s.appContext={...r.appContext,...r};const o=document.createElement("div");Np(s,o),s.component.exposed.onOpen();const l=i==null?void 0:i.querySelector(`.${a}-scrollbar__wrap`);gu=()=>{Np(null,o),l==null||l.removeEventListener("scroll",gu),gu=null},gu.trigger=t,gu.vm=s,l==null||l.addEventListener("scroll",gu)}function Zne(n){return n.children?Pbe(n.children,Zne):[n]}function o$(n,e){return n+e.colSpan}const Jne=(n,e,t,r)=>{let i=0,a=n;const s=t.states.columns.value;if(r){const l=Zne(r[n]);i=s.slice(0,s.indexOf(l[0])).reduce(o$,0),a=i+l.reduce(o$,0)-1}else i=n;let o;switch(e){case"left":a<t.states.fixedLeafColumnsLength.value&&(o="left");break;case"right":i>=s.length-t.states.rightFixedLeafColumnsLength.value&&(o="right");break;default:a<t.states.fixedLeafColumnsLength.value?o="left":i>=s.length-t.states.rightFixedLeafColumnsLength.value&&(o="right")}return o?{direction:o,start:i,after:a}:{}},LB=(n,e,t,r,i,a=0)=>{const s=[],{direction:o,start:l,after:u}=Jne(e,t,r,i);if(o){const c=o==="left";s.push(`${n}-fixed-column--${o}`),c&&u+a===r.states.fixedLeafColumnsLength.value-1?s.push("is-last-column"):!c&&l-a===r.states.columns.value.length-r.states.rightFixedLeafColumnsLength.value&&s.push("is-first-column")}return s};function l$(n,e){return n+(e.realWidth===null||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const OB=(n,e,t,r)=>{const{direction:i,start:a=0,after:s=0}=Jne(n,e,t,r);if(!i)return;const o={},l=i==="left",u=t.states.columns.value;return l?o.left=u.slice(0,a).reduce(l$,0):o.right=u.slice(s+1).reverse().reduce(l$,0),o},O1=(n,e)=>{n&&(Number.isNaN(n[e])||(n[e]=`${n[e]}px`))};function M5e(n){const e=tr(),t=ie(!1),r=ie([]);return{updateExpandRows:()=>{const l=n.data.value||[],u=n.rowKey.value;if(t.value)r.value=l.slice();else if(u){const c=E0(r.value,u);r.value=l.reduce((d,f)=>{const h=go(f,u);return c[h]&&d.push(f),d},[])}else r.value=[]},toggleRowExpansion:(l,u)=>{bM(r.value,l,u)&&e.emit("expand-change",l,r.value.slice())},setExpandRowKeys:l=>{e.store.assertRowKey();const u=n.data.value||[],c=n.rowKey.value,d=E0(u,c);r.value=l.reduce((f,h)=>{const p=d[h];return p&&f.push(p.row),f},[])},isRowExpanded:l=>{const u=n.rowKey.value;return u?!!E0(r.value,u)[go(l,u)]:r.value.includes(l)},states:{expandRows:r,defaultExpandAll:t}}}function I5e(n){const e=tr(),t=ie(null),r=ie(null),i=u=>{e.store.assertRowKey(),t.value=u,s(u)},a=()=>{t.value=null},s=u=>{const{data:c,rowKey:d}=n;let f=null;d.value&&(f=(S(c)||[]).find(h=>go(h,d.value)===u)),r.value=f,e.emit("current-change",r.value,null)};return{setCurrentRowKey:i,restoreCurrentRowKey:a,setCurrentRowByKey:s,updateCurrentRow:u=>{const c=r.value;if(u&&u!==c){r.value=u,e.emit("current-change",r.value,c);return}!u&&c&&(r.value=null,e.emit("current-change",null,c))},updateCurrentRowData:()=>{const u=n.rowKey.value,c=n.data.value||[],d=r.value;if(!c.includes(d)&&d){if(u){const f=go(d,u);s(f)}else r.value=null;r.value===null&&e.emit("current-change",null,d)}else t.value&&(s(t.value),a())},states:{_currentRowKey:t,currentRow:r}}}function D5e(n){const e=ie([]),t=ie({}),r=ie(16),i=ie(!1),a=ie({}),s=ie("hasChildren"),o=ie("children"),l=ie(!1),u=tr(),c=V(()=>{if(!n.rowKey.value)return{};const _=n.data.value||[];return f(_)}),d=V(()=>{const _=n.rowKey.value,b=Object.keys(a.value),x={};return b.length&&b.forEach(w=>{if(a.value[w].length){const A={children:[]};a.value[w].forEach(T=>{const C=go(T,_);A.children.push(C),T[s.value]&&!x[C]&&(x[C]={children:[]})}),x[w]=A}}),x}),f=_=>{const b=n.rowKey.value,x={};return A5e(_,(w,A,T)=>{const C=go(w,b);Ut(A)?x[C]={children:A.map(E=>go(E,b)),level:T}:i.value&&(x[C]={children:[],lazy:!0,level:T})},o.value,s.value),x},h=(_=!1,b=(x=>(x=u.store)==null?void 0:x.states.defaultExpandAll.value)())=>{var x;const w=c.value,A=d.value,T=Object.keys(w),C={};if(T.length){const E=S(t),I=[],P=(N,F)=>{if(_)return e.value?b||e.value.includes(F):!!(b||N!=null&&N.expanded);{const k=b||e.value&&e.value.includes(F);return!!(N!=null&&N.expanded||k)}};T.forEach(N=>{const F=E[N],k={...w[N]};if(k.expanded=P(F,N),k.lazy){const{loaded:H=!1,loading:U=!1}=F||{};k.loaded=!!H,k.loading=!!U,I.push(N)}C[N]=k});const L=Object.keys(A);i.value&&L.length&&I.length&&L.forEach(N=>{const F=E[N],k=A[N].children;if(I.includes(N)){if(C[N].children.length!==0)throw new Error("[ElTable]children must be an empty array.");C[N].children=k}else{const{loaded:H=!1,loading:U=!1}=F||{};C[N]={lazy:!0,loaded:!!H,loading:!!U,expanded:P(F,N),children:k,level:""}}})}t.value=C,(x=u.store)==null||x.updateTableScrollY()};St(()=>e.value,()=>{h(!0)}),St(()=>c.value,()=>{h()}),St(()=>d.value,()=>{h()});const p=_=>{e.value=_,h()},m=(_,b)=>{u.store.assertRowKey();const x=n.rowKey.value,w=go(_,x),A=w&&t.value[w];if(w&&A&&"expanded"in A){const T=A.expanded;b=ti(b)?!A.expanded:b,t.value[w].expanded=b,T!==b&&u.emit("expand-change",_,b),u.store.updateTableScrollY()}},v=_=>{u.store.assertRowKey();const b=n.rowKey.value,x=go(_,b),w=t.value[x];i.value&&w&&"loaded"in w&&!w.loaded?g(_,x,w):m(_,void 0)},g=(_,b,x)=>{const{load:w}=u.props;w&&!t.value[b].loaded&&(t.value[b].loading=!0,w(_,x,A=>{if(!Ut(A))throw new TypeError("[ElTable] data must be an array");t.value[b].loading=!1,t.value[b].loaded=!0,t.value[b].expanded=!0,A.length&&(a.value[b]=A),u.emit("expand-change",_,!0)}))};return{loadData:g,loadOrToggle:v,toggleTreeExpansion:m,updateTreeExpandKeys:p,updateTreeData:h,updateKeyChildren:(_,b)=>{const{lazy:x,rowKey:w}=u.props;if(x){if(!w)throw new Error("[Table] rowKey is required in updateKeyChild");a.value[_]&&(a.value[_]=b)}},normalize:f,states:{expandRowKeys:e,treeData:t,indent:r,lazy:i,lazyTreeNodeMap:a,lazyColumnIdentifier:s,childrenColumnName:o,checkStrictly:l}}}const P5e=(n,e)=>{const t=e.sortingColumn;return!t||ln(t.sortable)?n:S5e(n,e.sortProp,e.sortOrder,t.sortMethod,t.sortBy)},iE=n=>{const e=[];return n.forEach(t=>{t.children&&t.children.length>0?e.push.apply(e,iE(t.children)):e.push(t)}),e};function R5e(){var n;const e=tr(),{size:t}=ja((n=e.proxy)==null?void 0:n.$props),r=ie(null),i=ie([]),a=ie([]),s=ie(!1),o=ie([]),l=ie([]),u=ie([]),c=ie([]),d=ie([]),f=ie([]),h=ie([]),p=ie([]),m=[],v=ie(0),g=ie(0),y=ie(0),_=ie(!1),b=ie([]),x=ie(!1),w=ie(!1),A=ie(null),T=ie({}),C=ie(null),E=ie(null),I=ie(null),P=ie(null),L=ie(null);St(i,()=>{var G;e.state&&(U(!1),e.props.tableLayout==="auto"&&((G=e.refs.tableHeaderRef)==null||G.updateFixedColumnStyle()))},{deep:!0});const N=()=>{if(!r.value)throw new Error("[ElTable] prop row-key is required")},F=G=>{var _e;(_e=G.children)==null||_e.forEach(ve=>{ve.fixed=G.fixed,F(ve)})};let k;const H=()=>{o.value.forEach(we=>{F(we)}),c.value=o.value.filter(we=>we.fixed===!0||we.fixed==="left"),d.value=o.value.filter(we=>we.fixed==="right"),ti(k)&&o.value[0]&&o.value[0].type==="selection"&&(k=!!o.value[0].fixed),c.value.length>0&&o.value[0]&&o.value[0].type==="selection"&&(o.value[0].fixed?c.value.some(Ie=>Ie.type!=="selection")?k=void 0:(o.value[0].fixed=k,k||c.value.shift()):(o.value[0].fixed=!0,c.value.unshift(o.value[0])));const G=o.value.filter(we=>!we.fixed);l.value=[].concat(c.value).concat(G).concat(d.value);const _e=iE(G),ve=iE(c.value),Le=iE(d.value);v.value=_e.length,g.value=ve.length,y.value=Le.length,u.value=[].concat(ve).concat(_e).concat(Le),s.value=c.value.length>0||d.value.length>0},U=(G,_e=!1)=>{G&&H(),_e?e.state.doLayout():e.state.debouncedUpdateLayout()},B=G=>b.value.some(_e=>Ms(_e,G)),$=()=>{_.value=!1;const G=b.value;b.value=[],G.length&&e.emit("selection-change",[])},ee=()=>{let G;if(r.value){G=[];const _e=E0(b.value,r.value),ve=E0(i.value,r.value);for(const Le in _e)Ir(_e,Le)&&!ve[Le]&&G.push(_e[Le].row)}else G=b.value.filter(_e=>!i.value.includes(_e));if(G.length){const _e=b.value.filter(ve=>!G.includes(ve));b.value=_e,e.emit("selection-change",_e.slice())}},re=()=>(b.value||[]).slice(),ne=(G,_e,ve=!0,Le=!1)=>{var we,Ie,wt,Pe;const Rt={children:(Ie=(we=e==null?void 0:e.store)==null?void 0:we.states)==null?void 0:Ie.childrenColumnName.value,checkStrictly:(Pe=(wt=e==null?void 0:e.store)==null?void 0:wt.states)==null?void 0:Pe.checkStrictly.value};if(bM(b.value,G,_e,Rt,Le?void 0:A.value)){const Mt=(b.value||[]).slice();ve&&e.emit("select",Mt,G),e.emit("selection-change",Mt)}},ae=()=>{var G,_e;const ve=w.value?!_.value:!(_.value||b.value.length);_.value=ve;let Le=!1,we=0;const Ie=(_e=(G=e==null?void 0:e.store)==null?void 0:G.states)==null?void 0:_e.rowKey.value,{childrenColumnName:wt}=e.store.states,Pe={children:wt.value,checkStrictly:!1};i.value.forEach((Rt,dt)=>{const Mt=dt+we;bM(b.value,Rt,ve,Pe,A.value,Mt)&&(Le=!0),we+=me(go(Rt,Ie))}),Le&&e.emit("selection-change",b.value?b.value.slice():[]),e.emit("select-all",(b.value||[]).slice())},pe=()=>{const G=E0(b.value,r.value);i.value.forEach(_e=>{const ve=go(_e,r.value),Le=G[ve];Le&&(b.value[Le.index]=_e)})},de=()=>{var G;if(((G=i.value)==null?void 0:G.length)===0){_.value=!1;return}const{childrenColumnName:_e}=e.store.states,ve=r.value?E0(b.value,r.value):void 0;let Le=0,we=0;const Ie=Rt=>ve?!!ve[go(Rt,r.value)]:b.value.includes(Rt),wt=Rt=>{var dt;for(const Mt of Rt){const Wt=A.value&&A.value.call(null,Mt,Le);if(Ie(Mt))we++;else if(!A.value||Wt)return!1;if(Le++,(dt=Mt[_e.value])!=null&&dt.length&&!wt(Mt[_e.value]))return!1}return!0},Pe=wt(i.value||[]);_.value=we===0?!1:Pe},me=G=>{var _e;if(!e||!e.store)return 0;const{treeData:ve}=e.store.states;let Le=0;const we=(_e=ve.value[G])==null?void 0:_e.children;return we&&(Le+=we.length,we.forEach(Ie=>{Le+=me(Ie)})),Le},ke=(G,_e)=>{Ut(G)||(G=[G]);const ve={};return G.forEach(Le=>{T.value[Le.id]=_e,ve[Le.columnKey||Le.id]=_e}),ve},Be=(G,_e,ve)=>{E.value&&E.value!==G&&(E.value.order=null),E.value=G,I.value=_e,P.value=ve},Xe=()=>{let G=S(a);Object.keys(T.value).forEach(_e=>{const ve=T.value[_e];if(!ve||ve.length===0)return;const Le=Yne({columns:u.value},_e);Le&&Le.filterMethod&&(G=G.filter(we=>ve.some(Ie=>Le.filterMethod.call(null,Ie,we,Le))))}),C.value=G},Ye=()=>{i.value=P5e(C.value,{sortingColumn:E.value,sortProp:I.value,sortOrder:P.value})},Y=(G=void 0)=>{G&&G.filter||Xe(),Ye()},he=G=>{const{tableHeaderRef:_e}=e.refs;if(!_e)return;const ve=Object.assign({},_e.filterPanels),Le=Object.keys(ve);if(Le.length)if(ln(G)&&(G=[G]),Ut(G)){const we=G.map(Ie=>x5e({columns:u.value},Ie));Le.forEach(Ie=>{const wt=we.find(Pe=>Pe.id===Ie);wt&&(wt.filteredValue=[])}),e.store.commit("filterChange",{column:we,values:[],silent:!0,multi:!0})}else Le.forEach(we=>{const Ie=u.value.find(wt=>wt.id===we);Ie&&(Ie.filteredValue=[])}),T.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},le=()=>{E.value&&(Be(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Ke,toggleRowExpansion:Ue,updateExpandRows:Ze,states:je,isRowExpanded:He}=M5e({data:i,rowKey:r}),{updateTreeExpandKeys:ut,toggleTreeExpansion:ge,updateTreeData:q,updateKeyChildren:te,loadOrToggle:ye,states:Ve}=D5e({data:i,rowKey:r}),{updateCurrentRowData:et,updateCurrentRow:At,setCurrentRowKey:It,states:De}=I5e({data:i,rowKey:r});return{assertRowKey:N,updateColumns:H,scheduleLayout:U,isSelected:B,clearSelection:$,cleanSelection:ee,getSelectionRows:re,toggleRowSelection:ne,_toggleAllSelection:ae,toggleAllSelection:null,updateSelectionByRowKey:pe,updateAllSelected:de,updateFilters:ke,updateCurrentRow:At,updateSort:Be,execFilter:Xe,execSort:Ye,execQuery:Y,clearFilter:he,clearSort:le,toggleRowExpansion:Ue,setExpandRowKeysAdapter:G=>{Ke(G),ut(G)},setCurrentRowKey:It,toggleRowExpansionAdapter:(G,_e)=>{u.value.some(({type:Le})=>Le==="expand")?Ue(G,_e):ge(G,_e)},isRowExpanded:He,updateExpandRows:Ze,updateCurrentRowData:et,loadOrToggle:ye,updateTreeData:q,updateKeyChildren:te,states:{tableSize:t,rowKey:r,data:i,_data:a,isComplex:s,_columns:o,originColumns:l,columns:u,fixedColumns:c,rightFixedColumns:d,leafColumns:f,fixedLeafColumns:h,rightFixedLeafColumns:p,updateOrderFns:m,leafColumnsLength:v,fixedLeafColumnsLength:g,rightFixedLeafColumnsLength:y,isAllSelected:_,selection:b,reserveSelection:x,selectOnIndeterminate:w,selectable:A,filters:T,filteredData:C,sortingColumn:E,sortProp:I,sortOrder:P,hoverRow:L,...je,...Ve,...De}}}function x5(n,e){return n.map(t=>{var r;return t.id===e.id?e:((r=t.children)!=null&&r.length&&(t.children=x5(t.children,e)),t)})}function w5(n){n.forEach(e=>{var t,r;e.no=(t=e.getColumnIndex)==null?void 0:t.call(e),(r=e.children)!=null&&r.length&&w5(e.children)}),n.sort((e,t)=>e.no-t.no)}function k5e(){const n=tr(),e=R5e();return{ns:kt("table"),...e,mutations:{setData(s,o){const l=S(s._data)!==o;s.data.value=o,s._data.value=o,n.store.execQuery(),n.store.updateCurrentRowData(),n.store.updateExpandRows(),n.store.updateTreeData(n.store.states.defaultExpandAll.value),S(s.reserveSelection)?(n.store.assertRowKey(),n.store.updateSelectionByRowKey()):l?n.store.clearSelection():n.store.cleanSelection(),n.store.updateAllSelected(),n.$ready&&n.store.scheduleLayout()},insertColumn(s,o,l,u){const c=S(s._columns);let d=[];l?(l&&!l.children&&(l.children=[]),l.children.push(o),d=x5(c,l)):(c.push(o),d=c),w5(d),s._columns.value=d,s.updateOrderFns.push(u),o.type==="selection"&&(s.selectable.value=o.selectable,s.reserveSelection.value=o.reserveSelection),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},updateColumnOrder(s,o){var l;((l=o.getColumnIndex)==null?void 0:l.call(o))!==o.no&&(w5(s._columns.value),n.$ready&&n.store.updateColumns())},removeColumn(s,o,l,u){const c=S(s._columns)||[];if(l)l.children.splice(l.children.findIndex(f=>f.id===o.id),1),cn(()=>{var f;((f=l.children)==null?void 0:f.length)===0&&delete l.children}),s._columns.value=x5(c,l);else{const f=c.indexOf(o);f>-1&&(c.splice(f,1),s._columns.value=c)}const d=s.updateOrderFns.indexOf(u);d>-1&&s.updateOrderFns.splice(d,1),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},sort(s,o){const{prop:l,order:u,init:c}=o;if(l){const d=S(s.columns).find(f=>f.property===l);d&&(d.order=u,n.store.updateSort(d,l,u),n.store.commit("changeSortCondition",{init:c}))}},changeSortCondition(s,o){const{sortingColumn:l,sortProp:u,sortOrder:c}=s,d=S(l),f=S(u),h=S(c);h===null&&(s.sortingColumn.value=null,s.sortProp.value=null);const p={filter:!0};n.store.execQuery(p),(!o||!(o.silent||o.init))&&n.emit("sort-change",{column:d,prop:f,order:h}),n.store.updateTableScrollY()},filterChange(s,o){const{column:l,values:u,silent:c}=o,d=n.store.updateFilters(l,u);n.store.execQuery(),c||n.emit("filter-change",d),n.store.updateTableScrollY()},toggleAllSelection(){n.store.toggleAllSelection()},rowSelectedChanged(s,o){n.store.toggleRowSelection(o),n.store.updateAllSelected()},setHoverRow(s,o){s.hoverRow.value=o},setCurrentRow(s,o){n.store.updateCurrentRow(o)}},commit:function(s,...o){const l=n.store.mutations;if(l[s])l[s].apply(n,[n.store.states].concat(o));else throw new Error(`Action not found: ${s}`)},updateTableScrollY:function(){cn(()=>n.layout.updateScrollY.apply(n.layout))}}}const tx={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function L5e(n,e){if(!n)throw new Error("Table is required.");const t=k5e();return t.toggleAllSelection=Cl(t._toggleAllSelection,10),Object.keys(tx).forEach(r=>{ere(tre(e,r),r,t)}),O5e(t,e),t}function O5e(n,e){Object.keys(tx).forEach(t=>{St(()=>tre(e,t),r=>{ere(r,t,n)})})}function ere(n,e,t){let r=n,i=tx[e];typeof tx[e]=="object"&&(i=i.key,r=r||tx[e].default),t.states[i].value=r}function tre(n,e){if(e.includes(".")){const t=e.split(".");let r=n;return t.forEach(i=>{r=r[i]}),r}else return n[e]}class N5e{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ie(null),this.scrollX=ie(!1),this.scrollY=ie(!1),this.bodyWidth=ie(null),this.fixedWidth=ie(null),this.rightFixedWidth=ie(null),this.gutterWidth=0;for(const t in e)Ir(e,t)&&(xi(this[t])?this[t].value=e[t]:this[t]=e[t]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const t=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(t!=null&&t.wrapRef)){let r=!0;const i=this.scrollY.value;return r=t.wrapRef.scrollHeight>t.wrapRef.clientHeight,this.scrollY.value=r,i!==r}return!1}setHeight(e,t="height"){if(!Cr)return;const r=this.table.vnode.el;if(e=T5e(e),this.height.value=Number(e),!r&&(e||e===0))return cn(()=>this.setHeight(e,t));_n(e)?(r.style[t]=`${e}px`,this.updateElsHeight()):ln(e)&&(r.style[t]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(r=>{r.isColumnGroup?e.push.apply(e,r.columns):e.push(r)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let t=e;for(;t.tagName!=="DIV";){if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}updateColumnsWidth(){if(!Cr)return;const e=this.fit,t=this.table.vnode.el.clientWidth;let r=0;const i=this.getFlattenColumns(),a=i.filter(l=>!_n(l.width));if(i.forEach(l=>{_n(l.width)&&l.realWidth&&(l.realWidth=null)}),a.length>0&&e){if(i.forEach(l=>{r+=Number(l.width||l.minWidth||80)}),r<=t){this.scrollX.value=!1;const l=t-r;if(a.length===1)a[0].realWidth=Number(a[0].minWidth||80)+l;else{const u=a.reduce((f,h)=>f+Number(h.minWidth||80),0),c=l/u;let d=0;a.forEach((f,h)=>{if(h===0)return;const p=Math.floor(Number(f.minWidth||80)*c);d+=p,f.realWidth=Number(f.minWidth||80)+p}),a[0].realWidth=Number(a[0].minWidth||80)+l-d}}else this.scrollX.value=!0,a.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(r,t),this.table.state.resizeState.value.width=this.bodyWidth.value}else i.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),r+=l.realWidth}),this.scrollX.value=r>t,this.bodyWidth.value=r;const s=this.store.states.fixedColumns.value;if(s.length>0){let l=0;s.forEach(u=>{l+=Number(u.realWidth||u.width)}),this.fixedWidth.value=l}const o=this.store.states.rightFixedColumns.value;if(o.length>0){let l=0;o.forEach(u=>{l+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t!==-1&&this.observers.splice(t,1)}notifyObservers(e){this.observers.forEach(r=>{var i,a;switch(e){case"columns":(i=r.state)==null||i.onColumnsChange(this);break;case"scrollable":(a=r.state)==null||a.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:B5e}=Xu,F5e=Ne({name:"ElTableFilterPanel",components:{ElCheckbox:Xu,ElCheckboxGroup:B5e,ElScrollbar:Vd,ElTooltip:Ys,ElIcon:tn,ArrowDown:lh,ArrowUp:zN},directives:{ClickOutside:qf},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:{type:String}},setup(n){const e=tr(),{t}=Ar(),r=kt("table-filter"),i=e==null?void 0:e.parent;i.filterPanels.value[n.column.id]||(i.filterPanels.value[n.column.id]=e);const a=ie(!1),s=ie(null),o=V(()=>n.column&&n.column.filters),l=V(()=>n.column.filterClassName?`${r.b()} ${n.column.filterClassName}`:r.b()),u=V({get:()=>{var x;return(((x=n.column)==null?void 0:x.filteredValue)||[])[0]},set:x=>{c.value&&(typeof x<"u"&&x!==null?c.value.splice(0,1,x):c.value.splice(0,1))}}),c=V({get(){return n.column?n.column.filteredValue||[]:[]},set(x){n.column&&n.upDataColumn("filteredValue",x)}}),d=V(()=>n.column?n.column.filterMultiple:!0),f=x=>x.value===u.value,h=()=>{a.value=!1},p=x=>{x.stopPropagation(),a.value=!a.value},m=()=>{a.value=!1},v=()=>{_(c.value),h()},g=()=>{c.value=[],_(c.value),h()},y=x=>{u.value=x,_(typeof x<"u"&&x!==null?c.value:[]),h()},_=x=>{n.store.commit("filterChange",{column:n.column,values:x}),n.store.updateAllSelected()};St(a,x=>{n.column&&n.upDataColumn("filterOpened",x)},{immediate:!0});const b=V(()=>{var x,w;return(w=(x=s.value)==null?void 0:x.popperRef)==null?void 0:w.contentRef});return{tooltipVisible:a,multiple:d,filterClassName:l,filteredValue:c,filterValue:u,filters:o,handleConfirm:v,handleReset:g,handleSelect:y,isActive:f,t,ns:r,showFilterPanel:p,hideFilterPanel:m,popperPaneRef:b,tooltip:s}}});function U5e(n,e,t,r,i,a){const s=Kt("el-checkbox"),o=Kt("el-checkbox-group"),l=Kt("el-scrollbar"),u=Kt("arrow-up"),c=Kt("arrow-down"),d=Kt("el-icon"),f=Kt("el-tooltip"),h=h4("click-outside");return W(),pt(f,{ref:"tooltip",visible:n.tooltipVisible,offset:0,placement:n.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":n.filterClassName,persistent:"","append-to":n.appendTo},{content:Oe(()=>[n.multiple?(W(),Se("div",{key:0},[Ce("div",{class:J(n.ns.e("content"))},[be(l,{"wrap-class":n.ns.e("wrap")},{default:Oe(()=>[be(o,{modelValue:n.filteredValue,"onUpdate:modelValue":p=>n.filteredValue=p,class:J(n.ns.e("checkbox-group"))},{default:Oe(()=>[(W(!0),Se(on,null,ur(n.filters,p=>(W(),pt(s,{key:p.value,value:p.value},{default:Oe(()=>[Xn(Ft(p.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),Ce("div",{class:J(n.ns.e("bottom"))},[Ce("button",{class:J({[n.ns.is("disabled")]:n.filteredValue.length===0}),disabled:n.filteredValue.length===0,type:"button",onClick:n.handleConfirm},Ft(n.t("el.table.confirmFilter")),11,["disabled","onClick"]),Ce("button",{type:"button",onClick:n.handleReset},Ft(n.t("el.table.resetFilter")),9,["onClick"])],2)])):(W(),Se("ul",{key:1,class:J(n.ns.e("list"))},[Ce("li",{class:J([n.ns.e("list-item"),{[n.ns.is("active")]:n.filterValue===void 0||n.filterValue===null}]),onClick:p=>n.handleSelect(null)},Ft(n.t("el.table.clearFilter")),11,["onClick"]),(W(!0),Se(on,null,ur(n.filters,p=>(W(),Se("li",{key:p.value,class:J([n.ns.e("list-item"),n.ns.is("active",n.isActive(p))]),label:p.value,onClick:m=>n.handleSelect(p.value)},Ft(p.text),11,["label","onClick"]))),128))],2))]),default:Oe(()=>[Wn((W(),Se("span",{class:J([`${n.ns.namespace.value}-table__column-filter-trigger`,`${n.ns.namespace.value}-none-outline`]),onClick:n.showFilterPanel},[be(d,null,{default:Oe(()=>[at(n.$slots,"filter-icon",{},()=>[n.column.filterOpened?(W(),pt(u,{key:0})):(W(),pt(c,{key:1}))])]),_:3})],10,["onClick"])),[[h,n.hideFilterPanel,n.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var z5e=$t(F5e,[["render",U5e],["__file","filter-panel.vue"]]);function nre(n){const e=tr();f4(()=>{t.value.addObserver(e)}),zn(()=>{r(t.value),i(t.value)}),Ju(()=>{r(t.value),i(t.value)}),sm(()=>{t.value.removeObserver(e)});const t=V(()=>{const a=n.layout;if(!a)throw new Error("Can not find table layout.");return a}),r=a=>{var s;const o=((s=n.vnode.el)==null?void 0:s.querySelectorAll("colgroup > col"))||[];if(!o.length)return;const l=a.getFlattenColumns(),u={};l.forEach(c=>{u[c.id]=c});for(let c=0,d=o.length;c<d;c++){const f=o[c],h=f.getAttribute("name"),p=u[h];p&&f.setAttribute("width",p.realWidth||p.width)}},i=a=>{var s,o;const l=((s=n.vnode.el)==null?void 0:s.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let c=0,d=l.length;c<d;c++)l[c].setAttribute("width",a.scrollY.value?a.gutterWidth:"0");const u=((o=n.vnode.el)==null?void 0:o.querySelectorAll("th.gutter"))||[];for(let c=0,d=u.length;c<d;c++){const f=u[c];f.style.width=a.scrollY.value?`${a.gutterWidth}px`:"0",f.style.display=a.scrollY.value?"":"none"}};return{tableLayout:t.value,onColumnsChange:r,onScrollableChange:i}}const $d=Symbol("ElTable");function H5e(n,e){const t=tr(),r=Yt($d),i=m=>{m.stopPropagation()},a=(m,v)=>{!v.filters&&v.sortable?p(m,v,!1):v.filterable&&!v.sortable&&i(m),r==null||r.emit("header-click",v,m)},s=(m,v)=>{r==null||r.emit("header-contextmenu",v,m)},o=ie(null),l=ie(!1),u=ie({}),c=(m,v)=>{if(Cr&&!(v.children&&v.children.length>0)&&o.value&&n.border){l.value=!0;const g=r;e("set-drag-visible",!0);const _=(g==null?void 0:g.vnode.el).getBoundingClientRect().left,b=t.vnode.el.querySelector(`th.${v.id}`),x=b.getBoundingClientRect(),w=x.left-_+30;ku(b,"noclick"),u.value={startMouseLeft:m.clientX,startLeft:x.right-_,startColumnLeft:x.left-_,tableLeft:_};const A=g==null?void 0:g.refs.resizeProxy;A.style.left=`${u.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const T=E=>{const I=E.clientX-u.value.startMouseLeft,P=u.value.startLeft+I;A.style.left=`${Math.max(w,P)}px`},C=()=>{if(l.value){const{startColumnLeft:E,startLeft:I}=u.value,L=Number.parseInt(A.style.left,10)-E;v.width=v.realWidth=L,g==null||g.emit("header-dragend",v.width,I-E,v,m),requestAnimationFrame(()=>{n.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,o.value=null,u.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",C),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{xo(b,"noclick")},0)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",C)}},d=(m,v)=>{var g;if(v.children&&v.children.length>0)return;const y=m.target;if(!Zl(y))return;const _=y==null?void 0:y.closest("th");if(!(!v||!v.resizable||!_)&&!l.value&&n.border){const b=_.getBoundingClientRect(),x=document.body.style,w=((g=_.parentNode)==null?void 0:g.lastElementChild)===_;b.width>12&&b.right-m.pageX<8&&!w?(x.cursor="col-resize",ml(_,"is-sortable")&&(_.style.cursor="col-resize"),o.value=v):l.value||(x.cursor="",ml(_,"is-sortable")&&(_.style.cursor="pointer"),o.value=null)}},f=()=>{Cr&&(document.body.style.cursor="")},h=({order:m,sortOrders:v})=>{if(m==="")return v[0];const g=v.indexOf(m||null);return v[g>v.length-2?0:g+1]},p=(m,v,g)=>{var y;m.stopPropagation();const _=v.order===g?null:g||h(v),b=(y=m.target)==null?void 0:y.closest("th");if(b&&ml(b,"noclick")){xo(b,"noclick");return}if(!v.sortable)return;const x=m.currentTarget;if(["ascending","descending"].some(E=>ml(x,E)&&!v.sortOrders.includes(E)))return;const w=n.store.states;let A=w.sortProp.value,T;const C=w.sortingColumn.value;(C!==v||C===v&&C.order===null)&&(C&&(C.order=null),w.sortingColumn.value=v,A=v.property),_?T=v.order=_:T=v.order=null,w.sortProp.value=A,w.sortOrder.value=T,r==null||r.store.commit("changeSortCondition")};return{handleHeaderClick:a,handleHeaderContextMenu:s,handleMouseDown:c,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:i}}function V5e(n){const e=Yt($d),t=kt("table");return{getHeaderRowStyle:o=>{const l=e==null?void 0:e.props.headerRowStyle;return hn(l)?l.call(null,{rowIndex:o}):l},getHeaderRowClass:o=>{const l=[],u=e==null?void 0:e.props.headerRowClassName;return ln(u)?l.push(u):hn(u)&&l.push(u.call(null,{rowIndex:o})),l.join(" ")},getHeaderCellStyle:(o,l,u,c)=>{var d;let f=(d=e==null?void 0:e.props.headerCellStyle)!=null?d:{};hn(f)&&(f=f.call(null,{rowIndex:o,columnIndex:l,row:u,column:c}));const h=OB(l,c.fixed,n.store,u);return O1(h,"left"),O1(h,"right"),Object.assign({},f,h)},getHeaderCellClass:(o,l,u,c)=>{const d=LB(t.b(),l,c.fixed,n.store,u),f=[c.id,c.order,c.headerAlign,c.className,c.labelClassName,...d];c.children||f.push("is-leaf"),c.sortable&&f.push("is-sortable");const h=e==null?void 0:e.props.headerCellClassName;return ln(h)?f.push(h):hn(h)&&f.push(h.call(null,{rowIndex:o,columnIndex:l,row:u,column:c})),f.push(t.e("cell")),f.filter(p=>!!p).join(" ")}}}const rre=n=>{const e=[];return n.forEach(t=>{t.children?(e.push(t),e.push.apply(e,rre(t.children))):e.push(t)}),e},ire=n=>{let e=1;const t=(a,s)=>{if(s&&(a.level=s.level+1,e<a.level&&(e=a.level)),a.children){let o=0;a.children.forEach(l=>{t(l,a),o+=l.colSpan}),a.colSpan=o}else a.colSpan=1};n.forEach(a=>{a.level=1,t(a,void 0)});const r=[];for(let a=0;a<e;a++)r.push([]);return rre(n).forEach(a=>{a.children?(a.rowSpan=1,a.children.forEach(s=>s.isSubColumn=!0)):a.rowSpan=e-a.level+1,r[a.level-1].push(a)}),r};function $5e(n){const e=Yt($d),t=V(()=>ire(n.store.states.originColumns.value));return{isGroup:V(()=>{const a=t.value.length>1;return a&&e&&(e.state.isGroup.value=!0),a}),toggleAllSelection:a=>{a.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:t}}var G5e=Ne({name:"ElTableHeader",components:{ElCheckbox:Xu},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String}},setup(n,{emit:e}){const t=tr(),r=Yt($d),i=kt("table"),a=ie({}),{onColumnsChange:s,onScrollableChange:o}=nre(r),l=(r==null?void 0:r.props.tableLayout)==="auto",u=$r(new Map),c=ie(),d=()=>{setTimeout(()=>{u.size>0&&(u.forEach((E,I)=>{const P=c.value.querySelector(`.${I.replace(/\s/g,".")}`);if(P){const L=P.getBoundingClientRect().width;E.width=L}}),u.clear())})};St(u,d),zn(async()=>{await cn(),await cn();const{prop:E,order:I}=n.defaultSort;r==null||r.store.commit("sort",{prop:E,order:I,init:!0}),d()});const{handleHeaderClick:f,handleHeaderContextMenu:h,handleMouseDown:p,handleMouseMove:m,handleMouseOut:v,handleSortClick:g,handleFilterClick:y}=H5e(n,e),{getHeaderRowStyle:_,getHeaderRowClass:b,getHeaderCellStyle:x,getHeaderCellClass:w}=V5e(n),{isGroup:A,toggleAllSelection:T,columnRows:C}=$5e(n);return t.state={onColumnsChange:s,onScrollableChange:o},t.filterPanels=a,{ns:i,filterPanels:a,onColumnsChange:s,onScrollableChange:o,columnRows:C,getHeaderRowClass:b,getHeaderRowStyle:_,getHeaderCellClass:w,getHeaderCellStyle:x,handleHeaderClick:f,handleHeaderContextMenu:h,handleMouseDown:p,handleMouseMove:m,handleMouseOut:v,handleSortClick:g,handleFilterClick:y,isGroup:A,toggleAllSelection:T,saveIndexSelection:u,isTableLayoutAuto:l,theadRef:c,updateFixedColumnStyle:d}},render(){const{ns:n,isGroup:e,columnRows:t,getHeaderCellStyle:r,getHeaderCellClass:i,getHeaderRowClass:a,getHeaderRowStyle:s,handleHeaderClick:o,handleHeaderContextMenu:l,handleMouseDown:u,handleMouseMove:c,handleSortClick:d,handleMouseOut:f,store:h,$parent:p,saveIndexSelection:m,isTableLayoutAuto:v}=this;let g=1;return an("thead",{ref:"theadRef",class:{[n.is("group")]:e}},t.map((y,_)=>an("tr",{class:a(_),key:_,style:s(_)},y.map((b,x)=>{b.rowSpan>g&&(g=b.rowSpan);const w=i(_,x,y,b);return v&&b.fixed&&m.set(w,b),an("th",{class:w,colspan:b.colSpan,key:`${b.id}-thead`,rowspan:b.rowSpan,style:r(_,x,y,b),onClick:A=>{A.currentTarget.classList.contains("noclick")||o(A,b)},onContextmenu:A=>l(A,b),onMousedown:A=>u(A,b),onMousemove:A=>c(A,b),onMouseout:f},[an("div",{class:["cell",b.filteredValue&&b.filteredValue.length>0?"highlight":""]},[b.renderHeader?b.renderHeader({column:b,$index:x,store:h,_self:p}):b.label,b.sortable&&an("span",{onClick:A=>d(A,b),class:"caret-wrapper"},[an("i",{onClick:A=>d(A,b,"ascending"),class:"sort-caret ascending"}),an("i",{onClick:A=>d(A,b,"descending"),class:"sort-caret descending"})]),b.filterable&&an(z5e,{store:h,placement:b.filterPlacement||"bottom-start",appendTo:p.appendFilterPanelTo,column:b,upDataColumn:(A,T)=>{b[A]=T}},{"filter-icon":()=>b.renderFilterIcon?b.renderFilterIcon({filterOpened:b.filterOpened}):null})])])}))))}});function KD(n,e,t=.03){return n-e>t}function W5e(n){const e=Yt($d),t=ie(""),r=ie(an("div")),i=(p,m,v)=>{var g;const y=e,_=jD(p);let b;const x=(g=y==null?void 0:y.vnode.el)==null?void 0:g.dataset.prefix;_&&(b=a$({columns:n.store.states.columns.value},_,x),b&&(y==null||y.emit(`cell-${v}`,m,b,_,p))),y==null||y.emit(`row-${v}`,m,b,p)},a=(p,m)=>{i(p,m,"dblclick")},s=(p,m)=>{n.store.commit("setCurrentRow",m),i(p,m,"click")},o=(p,m)=>{i(p,m,"contextmenu")},l=Cl(p=>{n.store.commit("setHoverRow",p)},30),u=Cl(()=>{n.store.commit("setHoverRow",null)},30),c=p=>{const m=window.getComputedStyle(p,null),v=Number.parseInt(m.paddingLeft,10)||0,g=Number.parseInt(m.paddingRight,10)||0,y=Number.parseInt(m.paddingTop,10)||0,_=Number.parseInt(m.paddingBottom,10)||0;return{left:v,right:g,top:y,bottom:_}},d=(p,m,v)=>{let g=m.target.parentNode;for(;p>1&&(g=g==null?void 0:g.nextSibling,!(!g||g.nodeName!=="TR"));)v(g,"hover-row hover-fixed-row"),p--};return{handleDoubleClick:a,handleClick:s,handleContextMenu:o,handleMouseEnter:l,handleMouseLeave:u,handleCellMouseEnter:(p,m,v)=>{var g;const y=e,_=jD(p),b=(g=y==null?void 0:y.vnode.el)==null?void 0:g.dataset.prefix;if(_){const H=a$({columns:n.store.states.columns.value},_,b);_.rowSpan>1&&d(_.rowSpan,p,ku);const U=y.hoverState={cell:_,column:H,row:m};y==null||y.emit("cell-mouse-enter",U.row,U.column,U.cell,p)}if(!v)return;const x=p.target.querySelector(".cell");if(!(ml(x,`${b}-tooltip`)&&x.childNodes.length))return;const w=document.createRange();w.setStart(x,0),w.setEnd(x,x.childNodes.length);const{width:A,height:T}=w.getBoundingClientRect(),{width:C,height:E}=x.getBoundingClientRect(),{top:I,left:P,right:L,bottom:N}=c(x),F=P+L,k=I+N;(KD(A+F,C)||KD(T+k,E)||KD(x.scrollWidth,C))&&E5e(v,_.innerText||_.textContent,_,y)},handleCellMouseLeave:p=>{const m=jD(p);if(!m)return;m.rowSpan>1&&d(m.rowSpan,p,xo);const v=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",v==null?void 0:v.row,v==null?void 0:v.column,v==null?void 0:v.cell,p)},tooltipContent:t,tooltipTrigger:r}}function q5e(n){const e=Yt($d),t=kt("table");return{getRowStyle:(u,c)=>{const d=e==null?void 0:e.props.rowStyle;return hn(d)?d.call(null,{row:u,rowIndex:c}):d||null},getRowClass:(u,c)=>{const d=[t.e("row")];e!=null&&e.props.highlightCurrentRow&&u===n.store.states.currentRow.value&&d.push("current-row"),n.stripe&&c%2===1&&d.push(t.em("row","striped"));const f=e==null?void 0:e.props.rowClassName;return ln(f)?d.push(f):hn(f)&&d.push(f.call(null,{row:u,rowIndex:c})),d},getCellStyle:(u,c,d,f)=>{const h=e==null?void 0:e.props.cellStyle;let p=h??{};hn(h)&&(p=h.call(null,{rowIndex:u,columnIndex:c,row:d,column:f}));const m=OB(c,n==null?void 0:n.fixed,n.store);return O1(m,"left"),O1(m,"right"),Object.assign({},p,m)},getCellClass:(u,c,d,f,h)=>{const p=LB(t.b(),c,n==null?void 0:n.fixed,n.store,void 0,h),m=[f.id,f.align,f.className,...p],v=e==null?void 0:e.props.cellClassName;return ln(v)?m.push(v):hn(v)&&m.push(v.call(null,{rowIndex:u,columnIndex:c,row:d,column:f})),m.push(t.e("cell")),m.filter(g=>!!g).join(" ")},getSpan:(u,c,d,f)=>{let h=1,p=1;const m=e==null?void 0:e.props.spanMethod;if(hn(m)){const v=m({row:u,column:c,rowIndex:d,columnIndex:f});Ut(v)?(h=v[0],p=v[1]):typeof v=="object"&&(h=v.rowspan,p=v.colspan)}return{rowspan:h,colspan:p}},getColspanRealWidth:(u,c,d)=>{if(c<1)return u[d].realWidth;const f=u.map(({realWidth:h,width:p})=>h||p).slice(d,d+c);return Number(f.reduce((h,p)=>Number(h)+Number(p),-1))}}}const j5e=Ne({name:"TableTdWrapper"}),K5e=Ne({...j5e,props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(n){return(e,t)=>(W(),Se("td",{colspan:n.colspan,rowspan:n.rowspan},[at(e.$slots,"default")],8,["colspan","rowspan"]))}});var X5e=$t(K5e,[["__file","td-wrapper.vue"]]);function Y5e(n){const e=Yt($d),t=kt("table"),{handleDoubleClick:r,handleClick:i,handleContextMenu:a,handleMouseEnter:s,handleMouseLeave:o,handleCellMouseEnter:l,handleCellMouseLeave:u,tooltipContent:c,tooltipTrigger:d}=W5e(n),{getRowStyle:f,getRowClass:h,getCellStyle:p,getCellClass:m,getSpan:v,getColspanRealWidth:g}=q5e(n),y=V(()=>n.store.states.columns.value.findIndex(({type:A})=>A==="default")),_=(A,T)=>{const C=e.props.rowKey;return C?go(A,C):T},b=(A,T,C,E=!1)=>{const{tooltipEffect:I,tooltipOptions:P,store:L}=n,{indent:N,columns:F}=L.states,k=h(A,T);let H=!0;return C&&(k.push(t.em("row",`level-${C.level}`)),H=C.display),an("tr",{style:[H?null:{display:"none"},f(A,T)],class:k,key:_(A,T),onDblclick:B=>r(B,A),onClick:B=>i(B,A),onContextmenu:B=>a(B,A),onMouseenter:()=>s(T),onMouseleave:o},F.value.map((B,$)=>{const{rowspan:ee,colspan:re}=v(A,B,T,$);if(!ee||!re)return null;const ne=Object.assign({},B);ne.realWidth=g(F.value,re,$);const ae={store:n.store,_self:n.context||e,column:ne,row:A,$index:T,cellIndex:$,expanded:E};$===y.value&&C&&(ae.treeNode={indent:C.level*N.value,level:C.level},mi(C.expanded)&&(ae.treeNode.expanded=C.expanded,"loading"in C&&(ae.treeNode.loading=C.loading),"noLazyChildren"in C&&(ae.treeNode.noLazyChildren=C.noLazyChildren)));const pe=`${_(A,T)},${$}`,de=ne.columnKey||ne.rawColumnKey||"",me=B.showOverflowTooltip&&nee({effect:I},P,B.showOverflowTooltip);return an(X5e,{style:p(T,$,A,B),class:m(T,$,A,B,re-1),key:`${de}${pe}`,rowspan:ee,colspan:re,onMouseenter:ke=>l(ke,A,me),onMouseleave:u},{default:()=>x($,B,ae)})}))},x=(A,T,C)=>T.renderCell(C);return{wrappedRowRender:(A,T)=>{const C=n.store,{isRowExpanded:E,assertRowKey:I}=C,{treeData:P,lazyTreeNodeMap:L,childrenColumnName:N,rowKey:F}=C.states,k=C.states.columns.value;if(k.some(({type:U})=>U==="expand")){const U=E(A),B=b(A,T,void 0,U),$=e.renderExpanded;return U?$?[[B,an("tr",{key:`expanded-row__${B.key}`},[an("td",{colspan:k.length,class:`${t.e("cell")} ${t.e("expanded-cell")}`},[$({row:A,$index:T,store:C,expanded:U})])])]]:(console.error("[Element Error]renderExpanded is required."),B):[[B]]}else if(Object.keys(P.value).length){I();const U=go(A,F.value);let B=P.value[U],$=null;B&&($={expanded:B.expanded,level:B.level,display:!0},mi(B.lazy)&&(mi(B.loaded)&&B.loaded&&($.noLazyChildren=!(B.children&&B.children.length)),$.loading=B.loading));const ee=[b(A,T,$)];if(B){let re=0;const ne=(pe,de)=>{pe&&pe.length&&de&&pe.forEach(me=>{const ke={display:de.display&&de.expanded,level:de.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Be=go(me,F.value);if(Be==null)throw new Error("For nested data item, row-key is required.");if(B={...P.value[Be]},B&&(ke.expanded=B.expanded,B.level=B.level||ke.level,B.display=!!(B.expanded&&ke.display),mi(B.lazy)&&(mi(B.loaded)&&B.loaded&&(ke.noLazyChildren=!(B.children&&B.children.length)),ke.loading=B.loading)),re++,ee.push(b(me,T+re,ke)),B){const Xe=L.value[Be]||me[N.value];ne(Xe,B)}})};B.display=!0;const ae=L.value[U]||A[N.value];ne(ae,B)}return ee}else return b(A,T,void 0)},tooltipContent:c,tooltipTrigger:d}}const Q5e={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var Z5e=Ne({name:"ElTableBody",props:Q5e,setup(n){const e=tr(),t=Yt($d),r=kt("table"),{wrappedRowRender:i,tooltipContent:a,tooltipTrigger:s}=Y5e(n),{onColumnsChange:o,onScrollableChange:l}=nre(t),u=[];return St(n.store.states.hoverRow,(c,d)=>{var f;const h=e==null?void 0:e.vnode.el,p=Array.from((h==null?void 0:h.children)||[]).filter(g=>g==null?void 0:g.classList.contains(`${r.e("row")}`));let m=c;const v=(f=p[m])==null?void 0:f.childNodes;if(v!=null&&v.length){let g=0;Array.from(v).reduce((_,b,x)=>{var w,A;return((w=v[x])==null?void 0:w.colSpan)>1&&(g=(A=v[x])==null?void 0:A.colSpan),b.nodeName!=="TD"&&g===0&&_.push(x),g>0&&g--,_},[]).forEach(_=>{var b;for(m=c;m>0;){const x=(b=p[m-1])==null?void 0:b.childNodes;if(x[_]&&x[_].nodeName==="TD"&&x[_].rowSpan>1){ku(x[_],"hover-cell"),u.push(x[_]);break}m--}})}else u.forEach(g=>xo(g,"hover-cell")),u.length=0;!n.store.states.isComplex.value||!Cr||Fp(()=>{const g=p[d],y=p[c];g&&!g.classList.contains("hover-fixed-row")&&xo(g,"hover-row"),y&&ku(y,"hover-row")})}),sm(()=>{var c;(c=gu)==null||c()}),{ns:r,onColumnsChange:o,onScrollableChange:l,wrappedRowRender:i,tooltipContent:a,tooltipTrigger:s}},render(){const{wrappedRowRender:n,store:e}=this,t=e.states.data.value||[];return an("tbody",{tabIndex:-1},[t.reduce((r,i)=>r.concat(n(i,r.length)),[])])}});function J5e(){const n=Yt($d),e=n==null?void 0:n.store,t=V(()=>e.states.fixedLeafColumnsLength.value),r=V(()=>e.states.rightFixedColumns.value.length),i=V(()=>e.states.columns.value.length),a=V(()=>e.states.fixedColumns.value.length),s=V(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:t,rightFixedLeafCount:r,columnsCount:i,leftFixedCount:a,rightFixedCount:s,columns:e.states.columns}}function e6e(n){const{columns:e}=J5e(),t=kt("table");return{getCellClasses:(a,s)=>{const o=a[s],l=[t.e("cell"),o.id,o.align,o.labelClassName,...LB(t.b(),s,o.fixed,n.store)];return o.className&&l.push(o.className),o.children||l.push(t.is("leaf")),l},getCellStyles:(a,s)=>{const o=OB(s,a.fixed,n.store);return O1(o,"left"),O1(o,"right"),o},columns:e}}var t6e=Ne({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(n){const{getCellClasses:e,getCellStyles:t,columns:r}=e6e(n);return{ns:kt("table"),getCellClasses:e,getCellStyles:t,columns:r}},render(){const{columns:n,getCellStyles:e,getCellClasses:t,summaryMethod:r,sumText:i}=this,a=this.store.states.data.value;let s=[];return r?s=r({columns:n,data:a}):n.forEach((o,l)=>{if(l===0){s[l]=i;return}const u=a.map(h=>Number(h[o.property])),c=[];let d=!0;u.forEach(h=>{if(!Number.isNaN(+h)){d=!1;const p=`${h}`.split(".")[1];c.push(p?p.length:0)}});const f=Math.max.apply(null,c);d?s[l]="":s[l]=u.reduce((h,p)=>{const m=Number(p);return Number.isNaN(+m)?h:Number.parseFloat((h+p).toFixed(Math.min(f,20)))},0)}),an(an("tfoot",[an("tr",{},[...n.map((o,l)=>an("td",{key:l,colspan:o.colSpan,rowspan:o.rowSpan,class:t(n,l),style:e(o,l)},[an("div",{class:["cell",o.labelClassName]},[s[l]])]))])]))}});function n6e(n){return{setCurrentRow:d=>{n.commit("setCurrentRow",d)},getSelectionRows:()=>n.getSelectionRows(),toggleRowSelection:(d,f,h=!0)=>{n.toggleRowSelection(d,f,!1,h),n.updateAllSelected()},clearSelection:()=>{n.clearSelection()},clearFilter:d=>{n.clearFilter(d)},toggleAllSelection:()=>{n.commit("toggleAllSelection")},toggleRowExpansion:(d,f)=>{n.toggleRowExpansionAdapter(d,f)},clearSort:()=>{n.clearSort()},sort:(d,f)=>{n.commit("sort",{prop:d,order:f})},updateKeyChildren:(d,f)=>{n.updateKeyChildren(d,f)}}}function r6e(n,e,t,r){const i=ie(!1),a=ie(null),s=ie(!1),o=U=>{s.value=U},l=ie({width:null,height:null,headerHeight:null}),u=ie(!1),c={display:"inline-block",verticalAlign:"middle"},d=ie(),f=ie(0),h=ie(0),p=ie(0),m=ie(0),v=ie(0);vs(()=>{e.setHeight(n.height)}),vs(()=>{e.setMaxHeight(n.maxHeight)}),St(()=>[n.currentRowKey,t.states.rowKey],([U,B])=>{!S(B)||!S(U)||t.setCurrentRowKey(`${U}`)},{immediate:!0}),St(()=>n.data,U=>{r.store.commit("setData",U)},{immediate:!0,deep:!0}),vs(()=>{n.expandRowKeys&&t.setExpandRowKeysAdapter(n.expandRowKeys)});const g=()=>{r.store.commit("setHoverRow",null),r.hoverState&&(r.hoverState=null)},y=(U,B)=>{const{pixelX:$,pixelY:ee}=B;Math.abs($)>=Math.abs(ee)&&(r.refs.bodyWrapper.scrollLeft+=B.pixelX/5)},_=V(()=>n.height||n.maxHeight||t.states.fixedColumns.value.length>0||t.states.rightFixedColumns.value.length>0),b=V(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),x=()=>{_.value&&e.updateElsHeight(),e.updateColumnsWidth(),requestAnimationFrame(C)};zn(async()=>{await cn(),t.updateColumns(),E(),requestAnimationFrame(x);const U=r.vnode.el,B=r.refs.headerWrapper;n.flexible&&U&&U.parentElement&&(U.parentElement.style.minWidth="0"),l.value={width:d.value=U.offsetWidth,height:U.offsetHeight,headerHeight:n.showHeader&&B?B.offsetHeight:null},t.states.columns.value.forEach($=>{$.filteredValue&&$.filteredValue.length&&r.store.commit("filterChange",{column:$,values:$.filteredValue,silent:!0})}),r.$ready=!0});const w=(U,B)=>{if(!U)return;const $=Array.from(U.classList).filter(ee=>!ee.startsWith("is-scrolling-"));$.push(e.scrollX.value?B:"is-scrolling-none"),U.className=$.join(" ")},A=U=>{const{tableWrapper:B}=r.refs;w(B,U)},T=U=>{const{tableWrapper:B}=r.refs;return!!(B&&B.classList.contains(U))},C=function(){if(!r.refs.scrollBarRef)return;if(!e.scrollX.value){const pe="is-scrolling-none";T(pe)||A(pe);return}const U=r.refs.scrollBarRef.wrapRef;if(!U)return;const{scrollLeft:B,offsetWidth:$,scrollWidth:ee}=U,{headerWrapper:re,footerWrapper:ne}=r.refs;re&&(re.scrollLeft=B),ne&&(ne.scrollLeft=B);const ae=ee-$-1;B>=ae?A("is-scrolling-right"):A(B===0?"is-scrolling-left":"is-scrolling-middle")},E=()=>{r.refs.scrollBarRef&&(r.refs.scrollBarRef.wrapRef&&ni(r.refs.scrollBarRef.wrapRef,"scroll",C,{passive:!0}),n.fit?zi(r.vnode.el,I):ni(window,"resize",I),zi(r.refs.bodyWrapper,()=>{var U,B;I(),(B=(U=r.refs)==null?void 0:U.scrollBarRef)==null||B.update()}))},I=()=>{var U,B,$,ee;const re=r.vnode.el;if(!r.$ready||!re)return;let ne=!1;const{width:ae,height:pe,headerHeight:de}=l.value,me=d.value=re.offsetWidth;ae!==me&&(ne=!0);const ke=re.offsetHeight;(n.height||_.value)&&pe!==ke&&(ne=!0);const Be=n.tableLayout==="fixed"?r.refs.headerWrapper:(U=r.refs.tableHeaderRef)==null?void 0:U.$el;n.showHeader&&(Be==null?void 0:Be.offsetHeight)!==de&&(ne=!0),f.value=((B=r.refs.tableWrapper)==null?void 0:B.scrollHeight)||0,p.value=(Be==null?void 0:Be.scrollHeight)||0,m.value=(($=r.refs.footerWrapper)==null?void 0:$.offsetHeight)||0,v.value=((ee=r.refs.appendWrapper)==null?void 0:ee.offsetHeight)||0,h.value=f.value-p.value-m.value-v.value,ne&&(l.value={width:me,height:ke,headerHeight:n.showHeader&&(Be==null?void 0:Be.offsetHeight)||0},x())},P=Ca(),L=V(()=>{const{bodyWidth:U,scrollY:B,gutterWidth:$}=e;return U.value?`${U.value-(B.value?$:0)}px`:""}),N=V(()=>n.maxHeight?"fixed":n.tableLayout),F=V(()=>{if(n.data&&n.data.length)return null;let U="100%";n.height&&h.value&&(U=`${h.value}px`);const B=d.value;return{width:B?`${B}px`:"",height:U}}),k=V(()=>n.height?{height:"100%"}:n.maxHeight?Number.isNaN(Number(n.maxHeight))?{maxHeight:`calc(${n.maxHeight} - ${p.value+m.value}px)`}:{maxHeight:`${n.maxHeight-p.value-m.value}px`}:{});return{isHidden:i,renderExpanded:a,setDragVisible:o,isGroup:u,handleMouseLeave:g,handleHeaderFooterMousewheel:y,tableSize:P,emptyBlockStyle:F,handleFixedMousewheel:(U,B)=>{const $=r.refs.bodyWrapper;if(Math.abs(B.spinY)>0){const ee=$.scrollTop;B.pixelY<0&&ee!==0&&U.preventDefault(),B.pixelY>0&&$.scrollHeight-$.clientHeight>ee&&U.preventDefault(),$.scrollTop+=Math.ceil(B.pixelY/5)}else $.scrollLeft+=Math.ceil(B.pixelX/5)},resizeProxyVisible:s,bodyWidth:L,resizeState:l,doLayout:x,tableBodyStyles:b,tableLayout:N,scrollbarViewStyle:c,scrollbarStyle:k}}function i6e(n){const e=ie(),t=()=>{const i=n.vnode.el.querySelector(".hidden-columns"),a={childList:!0,subtree:!0},s=n.store.states.updateOrderFns;e.value=new MutationObserver(()=>{s.forEach(o=>o())}),e.value.observe(i,a)};zn(()=>{t()}),sm(()=>{var r;(r=e.value)==null||r.disconnect()})}var a6e={data:{type:Array,default:()=>[]},size:La,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0}};function are(n){const e=n.tableLayout==="auto";let t=n.columns||[];e&&t.every(i=>i.width===void 0)&&(t=[]);const r=i=>{const a={key:`${n.tableLayout}_${i.id}`,style:{},name:void 0};return e?a.style={width:`${i.width}px`}:a.name=i.id,a};return an("colgroup",{},t.map(i=>an("col",r(i))))}are.props=["columns","tableLayout"];const s6e=()=>{const n=ie(),e=(a,s)=>{const o=n.value;o&&o.scrollTo(a,s)},t=(a,s)=>{const o=n.value;o&&_n(s)&&["Top","Left"].includes(a)&&o[`setScroll${a}`](s)};return{scrollBarRef:n,scrollTo:e,setScrollTop:a=>t("Top",a),setScrollLeft:a=>t("Left",a)}};var u$=!1,h0,T5,C5,aE,sE,sre,oE,A5,E5,M5,ore,I5,D5,lre,ure;function al(){if(!u$){u$=!0;var n=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(n),t=/(Mac OS X)|(Windows)|(Linux)/.exec(n);if(I5=/\b(iPhone|iP[ao]d)/.exec(n),D5=/\b(iP[ao]d)/.exec(n),M5=/Android/i.exec(n),lre=/FBAN\/\w+;/i.exec(n),ure=/Mobile/i.exec(n),ore=!!/Win64/.exec(n),e){h0=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,h0&&document&&document.documentMode&&(h0=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(n);sre=r?parseFloat(r[1])+4:h0,T5=e[2]?parseFloat(e[2]):NaN,C5=e[3]?parseFloat(e[3]):NaN,aE=e[4]?parseFloat(e[4]):NaN,aE?(e=/(?:Chrome\/(\d+\.\d+))/.exec(n),sE=e&&e[1]?parseFloat(e[1]):NaN):sE=NaN}else h0=T5=C5=sE=aE=NaN;if(t){if(t[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(n);oE=i?parseFloat(i[1].replace("_",".")):!0}else oE=!1;A5=!!t[2],E5=!!t[3]}else oE=A5=E5=!1}}var P5={ie:function(){return al()||h0},ieCompatibilityMode:function(){return al()||sre>h0},ie64:function(){return P5.ie()&&ore},firefox:function(){return al()||T5},opera:function(){return al()||C5},webkit:function(){return al()||aE},safari:function(){return P5.webkit()},chrome:function(){return al()||sE},windows:function(){return al()||A5},osx:function(){return al()||oE},linux:function(){return al()||E5},iphone:function(){return al()||I5},mobile:function(){return al()||I5||D5||M5||ure},nativeApp:function(){return al()||lre},android:function(){return al()||M5},ipad:function(){return al()||D5}},o6e=P5,kT=!!(typeof window<"u"&&window.document&&window.document.createElement),l6e={canUseDOM:kT,canUseWorkers:typeof Worker<"u",canUseEventListeners:kT&&!!(window.addEventListener||window.attachEvent),canUseViewport:kT&&!!window.screen,isInWorker:!kT},cre=l6e,dre;cre.canUseDOM&&(dre=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function u6e(n,e){if(!cre.canUseDOM||e&&!("addEventListener"in document))return!1;var t="on"+n,r=t in document;if(!r){var i=document.createElement("div");i.setAttribute(t,"return;"),r=typeof i[t]=="function"}return!r&&dre&&n==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var c6e=u6e,c$=10,d$=40,f$=800;function fre(n){var e=0,t=0,r=0,i=0;return"detail"in n&&(t=n.detail),"wheelDelta"in n&&(t=-n.wheelDelta/120),"wheelDeltaY"in n&&(t=-n.wheelDeltaY/120),"wheelDeltaX"in n&&(e=-n.wheelDeltaX/120),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(e=t,t=0),r=e*c$,i=t*c$,"deltaY"in n&&(i=n.deltaY),"deltaX"in n&&(r=n.deltaX),(r||i)&&n.deltaMode&&(n.deltaMode==1?(r*=d$,i*=d$):(r*=f$,i*=f$)),r&&!e&&(e=r<1?-1:1),i&&!t&&(t=i<1?-1:1),{spinX:e,spinY:t,pixelX:r,pixelY:i}}fre.getEventType=function(){return o6e.firefox()?"DOMMouseScroll":c6e("wheel")?"wheel":"mousewheel"};var d6e=fre;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const f6e=function(n,e){if(n&&n.addEventListener){const t=function(r){const i=d6e(r);e&&Reflect.apply(e,this,[r,i])};n.addEventListener("wheel",t,{passive:!0})}},h6e={beforeMount(n,e){f6e(n,e.value)}};let p6e=1;const m6e=Ne({name:"ElTable",directives:{Mousewheel:h6e},components:{TableHeader:G5e,TableBody:Z5e,TableFooter:t6e,ElScrollbar:Vd,hColgroup:are},props:a6e,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","scroll"],setup(n){const{t:e}=Ar(),t=kt("table"),r=tr();pr($d,r);const i=L5e(r,n);r.store=i;const a=new N5e({store:r.store,table:r,fit:n.fit,showHeader:n.showHeader});r.layout=a;const s=V(()=>(i.states.data.value||[]).length===0),{setCurrentRow:o,getSelectionRows:l,toggleRowSelection:u,clearSelection:c,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,sort:m,updateKeyChildren:v}=n6e(i),{isHidden:g,renderExpanded:y,setDragVisible:_,isGroup:b,handleMouseLeave:x,handleHeaderFooterMousewheel:w,tableSize:A,emptyBlockStyle:T,handleFixedMousewheel:C,resizeProxyVisible:E,bodyWidth:I,resizeState:P,doLayout:L,tableBodyStyles:N,tableLayout:F,scrollbarViewStyle:k,scrollbarStyle:H}=r6e(n,a,i,r),{scrollBarRef:U,scrollTo:B,setScrollLeft:$,setScrollTop:ee}=s6e(),re=Cl(L,50),ne=`${t.namespace.value}-table_${p6e++}`;r.tableId=ne,r.state={isGroup:b,resizeState:P,doLayout:L,debouncedUpdateLayout:re};const ae=V(()=>{var me;return(me=n.sumText)!=null?me:e("el.table.sumText")}),pe=V(()=>{var me;return(me=n.emptyText)!=null?me:e("el.table.emptyText")}),de=V(()=>ire(i.states.originColumns.value)[0]);return i6e(r),Wr(()=>{re.cancel()}),{ns:t,layout:a,store:i,columns:de,handleHeaderFooterMousewheel:w,handleMouseLeave:x,tableId:ne,tableSize:A,isHidden:g,isEmpty:s,renderExpanded:y,resizeProxyVisible:E,resizeState:P,isGroup:b,bodyWidth:I,tableBodyStyles:N,emptyBlockStyle:T,debouncedUpdateLayout:re,handleFixedMousewheel:C,setCurrentRow:o,getSelectionRows:l,toggleRowSelection:u,clearSelection:c,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,doLayout:L,sort:m,updateKeyChildren:v,t:e,setDragVisible:_,context:r,computedSumText:ae,computedEmptyText:pe,tableLayout:F,scrollbarViewStyle:k,scrollbarStyle:H,scrollBarRef:U,scrollTo:B,setScrollLeft:$,setScrollTop:ee}}});function v6e(n,e,t,r,i,a){const s=Kt("hColgroup"),o=Kt("table-header"),l=Kt("table-body"),u=Kt("table-footer"),c=Kt("el-scrollbar"),d=h4("mousewheel");return W(),Se("div",{ref:"tableWrapper",class:J([{[n.ns.m("fit")]:n.fit,[n.ns.m("striped")]:n.stripe,[n.ns.m("border")]:n.border||n.isGroup,[n.ns.m("hidden")]:n.isHidden,[n.ns.m("group")]:n.isGroup,[n.ns.m("fluid-height")]:n.maxHeight,[n.ns.m("scrollable-x")]:n.layout.scrollX.value,[n.ns.m("scrollable-y")]:n.layout.scrollY.value,[n.ns.m("enable-row-hover")]:!n.store.states.isComplex.value,[n.ns.m("enable-row-transition")]:(n.store.states.data.value||[]).length!==0&&(n.store.states.data.value||[]).length<100,"has-footer":n.showSummary},n.ns.m(n.tableSize),n.className,n.ns.b(),n.ns.m(`layout-${n.tableLayout}`)]),style:Jt(n.style),"data-prefix":n.ns.namespace.value,onMouseleave:n.handleMouseLeave},[Ce("div",{class:J(n.ns.e("inner-wrapper"))},[Ce("div",{ref:"hiddenColumns",class:"hidden-columns"},[at(n.$slots,"default")],512),n.showHeader&&n.tableLayout==="fixed"?Wn((W(),Se("div",{key:0,ref:"headerWrapper",class:J(n.ns.e("header-wrapper"))},[Ce("table",{ref:"tableHeader",class:J(n.ns.e("header")),style:Jt(n.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[be(s,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),be(o,{ref:"tableHeaderRef",border:n.border,"default-sort":n.defaultSort,store:n.store,"append-filter-panel-to":n.appendFilterPanelTo,onSetDragVisible:n.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","onSetDragVisible"])],6)],2)),[[d,n.handleHeaderFooterMousewheel]]):st("v-if",!0),Ce("div",{ref:"bodyWrapper",class:J(n.ns.e("body-wrapper"))},[be(c,{ref:"scrollBarRef","view-style":n.scrollbarViewStyle,"wrap-style":n.scrollbarStyle,always:n.scrollbarAlwaysOn,tabindex:n.scrollbarTabindex,onScroll:f=>n.$emit("scroll",f)},{default:Oe(()=>[Ce("table",{ref:"tableBody",class:J(n.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Jt({width:n.bodyWidth,tableLayout:n.tableLayout})},[be(s,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),n.showHeader&&n.tableLayout==="auto"?(W(),pt(o,{key:0,ref:"tableHeaderRef",class:J(n.ns.e("body-header")),border:n.border,"default-sort":n.defaultSort,store:n.store,"append-filter-panel-to":n.appendFilterPanelTo,onSetDragVisible:n.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):st("v-if",!0),be(l,{context:n.context,highlight:n.highlightCurrentRow,"row-class-name":n.rowClassName,"tooltip-effect":n.tooltipEffect,"tooltip-options":n.tooltipOptions,"row-style":n.rowStyle,store:n.store,stripe:n.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),n.showSummary&&n.tableLayout==="auto"?(W(),pt(u,{key:1,class:J(n.ns.e("body-footer")),border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):st("v-if",!0)],6),n.isEmpty?(W(),Se("div",{key:0,ref:"emptyBlock",style:Jt(n.emptyBlockStyle),class:J(n.ns.e("empty-block"))},[Ce("span",{class:J(n.ns.e("empty-text"))},[at(n.$slots,"empty",{},()=>[Xn(Ft(n.computedEmptyText),1)])],2)],6)):st("v-if",!0),n.$slots.append?(W(),Se("div",{key:1,ref:"appendWrapper",class:J(n.ns.e("append-wrapper"))},[at(n.$slots,"append")],2)):st("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex","onScroll"])],2),n.showSummary&&n.tableLayout==="fixed"?Wn((W(),Se("div",{key:1,ref:"footerWrapper",class:J(n.ns.e("footer-wrapper"))},[Ce("table",{class:J(n.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:Jt(n.tableBodyStyles)},[be(s,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),be(u,{border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Nr,!n.isEmpty],[d,n.handleHeaderFooterMousewheel]]):st("v-if",!0),n.border||n.isGroup?(W(),Se("div",{key:2,class:J(n.ns.e("border-left-patch"))},null,2)):st("v-if",!0)],2),Wn(Ce("div",{ref:"resizeProxy",class:J(n.ns.e("column-resize-proxy"))},null,2),[[Nr,n.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var g6e=$t(m6e,[["render",v6e],["__file","table.vue"]]);const y6e={selection:"table-column--selection",expand:"table__expand-column"},_6e={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},b6e=n=>y6e[n]||"",S6e={selection:{renderHeader({store:n,column:e}){function t(){return n.states.data.value&&n.states.data.value.length===0}return an(Xu,{disabled:t(),size:n.states.tableSize.value,indeterminate:n.states.selection.value.length>0&&!n.states.isAllSelected.value,"onUpdate:modelValue":n.toggleAllSelection,modelValue:n.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:n,column:e,store:t,$index:r}){return an(Xu,{disabled:e.selectable?!e.selectable.call(null,n,r):!1,size:t.states.tableSize.value,onChange:()=>{t.commit("rowSelectedChanged",n)},onClick:i=>i.stopPropagation(),modelValue:t.isSelected(n),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:n}){return n.label||"#"},renderCell({column:n,$index:e}){let t=e+1;const r=n.index;return _n(r)?t=e+r:hn(r)&&(t=r(e)),an("div",{},[t])},sortable:!1},expand:{renderHeader({column:n}){return n.label||""},renderCell({row:n,store:e,expanded:t}){const{ns:r}=e,i=[r.e("expand-icon")];return t&&i.push(r.em("expand-icon","expanded")),an("div",{class:i,onClick:function(s){s.stopPropagation(),e.toggleRowExpansion(n)}},{default:()=>[an(tn,null,{default:()=>[an(jo)]})]})},sortable:!1,resizable:!1}};function x6e({row:n,column:e,$index:t}){var r;const i=e.property,a=i&&QA(n,i).value;return e&&e.formatter?e.formatter(n,e,a,t):((r=a==null?void 0:a.toString)==null?void 0:r.call(a))||""}function w6e({row:n,treeNode:e,store:t},r=!1){const{ns:i}=t;if(!e)return r?[an("span",{class:i.e("placeholder")})]:null;const a=[],s=function(o){o.stopPropagation(),!e.loading&&t.loadOrToggle(n)};if(e.indent&&a.push(an("span",{class:i.e("indent"),style:{"padding-left":`${e.indent}px`}})),mi(e.expanded)&&!e.noLazyChildren){const o=[i.e("expand-icon"),e.expanded?i.em("expand-icon","expanded"):""];let l=jo;e.loading&&(l=Pd),a.push(an("div",{class:o,onClick:s},{default:()=>[an(tn,{class:{[i.is("loading")]:e.loading}},{default:()=>[an(l)]})]}))}else a.push(an("span",{class:i.e("placeholder")}));return a}function h$(n,e){return n.reduce((t,r)=>(t[r]=r,t),e)}function T6e(n,e){const t=tr();return{registerComplexWatchers:()=>{const a=["fixed"],s={realWidth:"width",realMinWidth:"minWidth"},o=h$(a,s);Object.keys(o).forEach(l=>{const u=s[l];Ir(e,u)&&St(()=>e[u],c=>{let d=c;u==="width"&&l==="realWidth"&&(d=kB(c)),u==="minWidth"&&l==="realMinWidth"&&(d=Qne(c)),t.columnConfig.value[u]=d,t.columnConfig.value[l]=d;const f=u==="fixed";n.value.store.scheduleLayout(f)})})},registerNormalWatchers:()=>{const a=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],s={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},o=h$(a,s);Object.keys(o).forEach(l=>{const u=s[l];Ir(e,u)&&St(()=>e[u],c=>{t.columnConfig.value[l]=c})})}}}function C6e(n,e,t){const r=tr(),i=ie(""),a=ie(!1),s=ie(),o=ie(),l=kt("table");vs(()=>{s.value=n.align?`is-${n.align}`:null,s.value}),vs(()=>{o.value=n.headerAlign?`is-${n.headerAlign}`:s.value,o.value});const u=V(()=>{let b=r.vnode.vParent||r.parent;for(;b&&!b.tableId&&!b.columnId;)b=b.vnode.vParent||b.parent;return b}),c=V(()=>{const{store:b}=r.parent;if(!b)return!1;const{treeData:x}=b.states,w=x.value;return w&&Object.keys(w).length>0}),d=ie(kB(n.width)),f=ie(Qne(n.minWidth)),h=b=>(d.value&&(b.width=d.value),f.value&&(b.minWidth=f.value),!d.value&&f.value&&(b.width=void 0),b.minWidth||(b.minWidth=80),b.realWidth=Number(b.width===void 0?b.minWidth:b.width),b),p=b=>{const x=b.type,w=S6e[x]||{};Object.keys(w).forEach(T=>{const C=w[T];T!=="className"&&C!==void 0&&(b[T]=C)});const A=b6e(x);if(A){const T=`${S(l.namespace)}-${A}`;b.className=b.className?`${b.className} ${T}`:T}return b},m=b=>{Ut(b)?b.forEach(w=>x(w)):x(b);function x(w){var A;((A=w==null?void 0:w.type)==null?void 0:A.name)==="ElTableColumn"&&(w.vParent=r)}};return{columnId:i,realAlign:s,isSubColumn:a,realHeaderAlign:o,columnOrTableParent:u,setColumnWidth:h,setColumnForcedProps:p,setColumnRenders:b=>{n.renderHeader||b.type!=="selection"&&(b.renderHeader=w=>(r.columnConfig.value.label,at(e,"header",w,()=>[b.label]))),e["filter-icon"]&&(b.renderFilterIcon=w=>at(e,"filter-icon",w));let x=b.renderCell;return b.type==="expand"?(b.renderCell=w=>an("div",{class:"cell"},[x(w)]),t.value.renderExpanded=w=>e.default?e.default(w):e.default):(x=x||x6e,b.renderCell=w=>{let A=null;if(e.default){const L=e.default(w);A=L.some(N=>N.type!==So)?L:x(w)}else A=x(w);const{columns:T}=t.value.store.states,C=T.value.findIndex(L=>L.type==="default"),E=c.value&&w.cellIndex===C,I=w6e(w,E),P={class:"cell",style:{}};return b.showOverflowTooltip&&(P.class=`${P.class} ${S(l.namespace)}-tooltip`,P.style={width:`${(w.column.realWidth||Number(w.column.width))-1}px`}),m(A),an("div",P,[I,A])}),b},getPropsData:(...b)=>b.reduce((x,w)=>(Ut(w)&&w.forEach(A=>{x[A]=n[A]}),x),{}),getColumnElIndex:(b,x)=>Array.prototype.indexOf.call(b,x),updateColumnOrder:()=>{t.value.store.commit("updateColumnOrder",r.columnConfig.value)}}}var A6e={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:n=>n.every(e=>["ascending","descending",null].includes(e))}};let E6e=1;var hre=Ne({name:"ElTableColumn",components:{ElCheckbox:Xu},props:A6e,setup(n,{slots:e}){const t=tr(),r=ie({}),i=V(()=>{let _=t.parent;for(;_&&!_.tableId;)_=_.parent;return _}),{registerNormalWatchers:a,registerComplexWatchers:s}=T6e(i,n),{columnId:o,isSubColumn:l,realHeaderAlign:u,columnOrTableParent:c,setColumnWidth:d,setColumnForcedProps:f,setColumnRenders:h,getPropsData:p,getColumnElIndex:m,realAlign:v,updateColumnOrder:g}=C6e(n,e,i),y=c.value;o.value=`${y.tableId||y.columnId}_column_${E6e++}`,f4(()=>{l.value=i.value!==y;const _=n.type||"default",b=n.sortable===""?!0:n.sortable,x=ti(n.showOverflowTooltip)?y.props.showOverflowTooltip:n.showOverflowTooltip,w={..._6e[_],id:o.value,type:_,property:n.prop||n.property,align:v,headerAlign:u,showOverflowTooltip:x,filterable:n.filters||n.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:b,index:n.index,rawColumnKey:t.vnode.key};let I=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);I=w5e(w,I),I=C5e(h,d,f)(I),r.value=I,a(),s()}),zn(()=>{var _;const b=c.value,x=l.value?b.vnode.el.children:(_=b.refs.hiddenColumns)==null?void 0:_.children,w=()=>m(x||[],t.vnode.el);r.value.getColumnIndex=w,w()>-1&&i.value.store.commit("insertColumn",r.value,l.value?b.columnConfig.value:null,g)}),Wr(()=>{const _=r.value.getColumnIndex;(_?_():-1)>-1&&i.value.store.commit("removeColumn",r.value,l.value?y.columnConfig.value:null,g)}),t.columnId=o.value,t.columnConfig=r},render(){var n,e,t;try{const r=(e=(n=this.$slots).default)==null?void 0:e.call(n,{row:{},column:{},$index:-1}),i=[];if(Ut(r))for(const s of r)((t=s.type)==null?void 0:t.name)==="ElTableColumn"||s.shapeFlag&2?i.push(s):s.type===on&&Ut(s.children)&&s.children.forEach(o=>{(o==null?void 0:o.patchFlag)!==1024&&!ln(o==null?void 0:o.children)&&i.push(o)});return an("div",i)}catch{return an("div",[])}}});const M6e=Bn(g6e,{TableColumn:hre}),I6e=Xi(hre);var c2=(n=>(n.ASC="asc",n.DESC="desc",n))(c2||{}),d2=(n=>(n.CENTER="center",n.RIGHT="right",n))(d2||{}),pre=(n=>(n.LEFT="left",n.RIGHT="right",n))(pre||{});const R5={asc:"desc",desc:"asc"},f2=Symbol("placeholder"),D6e=(n,e,t)=>{var r;const i={flexGrow:0,flexShrink:0,...t?{}:{flexGrow:n.flexGrow||0,flexShrink:n.flexShrink||1}};t||(i.flexShrink=1);const a={...(r=n.style)!=null?r:{},...i,flexBasis:"auto",width:n.width};return e||(n.maxWidth&&(a.maxWidth=n.maxWidth),n.minWidth&&(a.minWidth=n.minWidth)),a};function P6e(n,e,t){const r=V(()=>S(e).map((v,g)=>{var y,_;return{...v,key:(_=(y=v.key)!=null?y:v.dataKey)!=null?_:g}})),i=V(()=>S(r).filter(v=>!v.hidden)),a=V(()=>S(i).filter(v=>v.fixed==="left"||v.fixed===!0)),s=V(()=>S(i).filter(v=>v.fixed==="right")),o=V(()=>S(i).filter(v=>!v.fixed)),l=V(()=>{const v=[];return S(a).forEach(g=>{v.push({...g,placeholderSign:f2})}),S(o).forEach(g=>{v.push(g)}),S(s).forEach(g=>{v.push({...g,placeholderSign:f2})}),v}),u=V(()=>S(a).length||S(s).length),c=V(()=>S(r).reduce((v,g)=>(v[g.key]=D6e(g,S(t),n.fixed),v),{})),d=V(()=>S(i).reduce((v,g)=>v+g.width,0)),f=v=>S(r).find(g=>g.key===v),h=v=>S(c)[v],p=(v,g)=>{v.width=g};function m(v){var g;const{key:y}=v.currentTarget.dataset;if(!y)return;const{sortState:_,sortBy:b}=n;let x=c2.ASC;er(_)?x=R5[_[y]]:x=R5[b.order],(g=n.onColumnSort)==null||g.call(n,{column:f(y),key:y,order:x})}return{columns:r,columnsStyles:c,columnsTotalWidth:d,fixedColumnsOnLeft:a,fixedColumnsOnRight:s,hasFixedColumns:u,mainColumns:l,normalColumns:o,visibleColumns:i,getColumn:f,getColumnStyle:h,updateColumnWidth:p,onColumnSorted:m}}const R6e=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:r,onMaybeEndReached:i})=>{const a=ie({scrollLeft:0,scrollTop:0});function s(h){var p,m,v;const{scrollTop:g}=h;(p=e.value)==null||p.scrollTo(h),(m=t.value)==null||m.scrollToTop(g),(v=r.value)==null||v.scrollToTop(g)}function o(h){a.value=h,s(h)}function l(h){a.value.scrollTop=h,s(S(a))}function u(h){var p,m;a.value.scrollLeft=h,(m=(p=e.value)==null?void 0:p.scrollTo)==null||m.call(p,S(a))}function c(h){var p;o(h),(p=n.onScroll)==null||p.call(n,h)}function d({scrollTop:h}){const{scrollTop:p}=S(a);h!==p&&l(h)}function f(h,p="auto"){var m;(m=e.value)==null||m.scrollToRow(h,p)}return St(()=>S(a).scrollTop,(h,p)=>{h>p&&i()}),{scrollPos:a,scrollTo:o,scrollToLeft:u,scrollToTop:l,scrollToRow:f,onScroll:c,onVerticalScroll:d}},k6e=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:r,tableInstance:i,ns:a,isScrolling:s})=>{const o=tr(),{emit:l}=o,u=jr(!1),c=ie(n.defaultExpandedRowKeys||[]),d=ie(-1),f=jr(null),h=ie({}),p=ie({}),m=jr({}),v=jr({}),g=jr({}),y=V(()=>_n(n.estimatedRowHeight));function _(E){var I;(I=n.onRowsRendered)==null||I.call(n,E),E.rowCacheEnd>S(d)&&(d.value=E.rowCacheEnd)}function b({hovered:E,rowKey:I}){if(s.value)return;i.vnode.el.querySelectorAll(`[rowkey="${String(I)}"]`).forEach(N=>{E?N.classList.add(a.is("hovered")):N.classList.remove(a.is("hovered"))})}function x({expanded:E,rowData:I,rowIndex:P,rowKey:L}){var N,F;const k=[...S(c)],H=k.indexOf(L);E?H===-1&&k.push(L):H>-1&&k.splice(H,1),c.value=k,l("update:expandedRowKeys",k),(N=n.onRowExpand)==null||N.call(n,{expanded:E,rowData:I,rowIndex:P,rowKey:L}),(F=n.onExpandedRowsChange)==null||F.call(n,k)}const w=Cl(()=>{var E,I,P,L;u.value=!0,h.value={...S(h),...S(p)},A(S(f),!1),p.value={},f.value=null,(E=e.value)==null||E.forceUpdate(),(I=t.value)==null||I.forceUpdate(),(P=r.value)==null||P.forceUpdate(),(L=o.proxy)==null||L.$forceUpdate(),u.value=!1},0);function A(E,I=!1){S(y)&&[e,t,r].forEach(P=>{const L=S(P);L&&L.resetAfterRowIndex(E,I)})}function T(E,I,P){const L=S(f);(L===null||L>P)&&(f.value=P),p.value[E]=I}function C({rowKey:E,height:I,rowIndex:P},L){L?L===pre.RIGHT?g.value[E]=I:m.value[E]=I:v.value[E]=I;const N=Math.max(...[m,g,v].map(F=>F.value[E]||0));S(h)[E]!==N&&(T(E,N,P),w())}return{expandedRowKeys:c,lastRenderedRowIndex:d,isDynamic:y,isResetting:u,rowHeights:h,resetAfterIndex:A,onRowExpanded:x,onRowHovered:b,onRowsRendered:_,onRowHeightChange:C}},L6e=(n,{expandedRowKeys:e,lastRenderedRowIndex:t,resetAfterIndex:r})=>{const i=ie({}),a=V(()=>{const o={},{data:l,rowKey:u}=n,c=S(e);if(!c||!c.length)return l;const d=[],f=new Set;c.forEach(p=>f.add(p));let h=l.slice();for(h.forEach(p=>o[p[u]]=0);h.length>0;){const p=h.shift();d.push(p),f.has(p[u])&&Ut(p.children)&&p.children.length>0&&(h=[...p.children,...h],p.children.forEach(m=>o[m[u]]=o[p[u]]+1))}return i.value=o,d}),s=V(()=>{const{data:o,expandColumnKey:l}=n;return l?S(a):o});return St(s,(o,l)=>{o!==l&&(t.value=-1,r(0,!0))}),{data:s,depthMap:i}},O6e=(n,e)=>n+e,lE=n=>Ut(n)?n.reduce(O6e,0):n,uv=(n,e,t={})=>hn(n)?n(e):n??t,fp=n=>(["width","maxWidth","minWidth","height"].forEach(e=>{n[e]=ia(n[e])}),n),mre=n=>qi(n)?e=>an(n,e):n,N6e=(n,{columnsTotalWidth:e,rowsHeight:t,fixedColumnsOnLeft:r,fixedColumnsOnRight:i})=>{const a=V(()=>{const{fixed:y,width:_,vScrollbarSize:b}=n,x=_-b;return y?Math.max(Math.round(S(e)),x):x}),s=V(()=>S(a)+n.vScrollbarSize),o=V(()=>{const{height:y=0,maxHeight:_=0,footerHeight:b,hScrollbarSize:x}=n;if(_>0){const w=S(h),A=S(t),C=S(f)+w+A+x;return Math.min(C,_-b)}return y-b}),l=V(()=>{const{maxHeight:y}=n,_=S(o);if(_n(y)&&y>0)return _;const b=S(t)+S(f)+S(h);return Math.min(_,b)}),u=y=>y.width,c=V(()=>lE(S(r).map(u))),d=V(()=>lE(S(i).map(u))),f=V(()=>lE(n.headerHeight)),h=V(()=>{var y;return(((y=n.fixedData)==null?void 0:y.length)||0)*n.rowHeight}),p=V(()=>S(o)-S(f)-S(h)),m=V(()=>{const{style:y={},height:_,width:b}=n;return fp({...y,height:_,width:b})}),v=V(()=>fp({height:n.footerHeight})),g=V(()=>({top:ia(S(f)),bottom:ia(n.footerHeight),width:ia(n.width)}));return{bodyWidth:a,fixedTableHeight:l,mainTableHeight:o,leftTableWidth:c,rightTableWidth:d,headerWidth:s,windowHeight:p,footerHeight:v,emptyStyle:g,rootStyle:m,headerHeight:f}};function B6e(n){const e=ie(),t=ie(),r=ie(),{columns:i,columnsStyles:a,columnsTotalWidth:s,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,hasFixedColumns:u,mainColumns:c,onColumnSorted:d}=P6e(n,Kr(n,"columns"),Kr(n,"fixed")),{scrollTo:f,scrollToLeft:h,scrollToTop:p,scrollToRow:m,onScroll:v,onVerticalScroll:g,scrollPos:y}=R6e(n,{mainTableRef:e,leftTableRef:t,rightTableRef:r,onMaybeEndReached:he}),_=kt("table-v2"),b=tr(),x=jr(!1),{expandedRowKeys:w,lastRenderedRowIndex:A,isDynamic:T,isResetting:C,rowHeights:E,resetAfterIndex:I,onRowExpanded:P,onRowHeightChange:L,onRowHovered:N,onRowsRendered:F}=k6e(n,{mainTableRef:e,leftTableRef:t,rightTableRef:r,tableInstance:b,ns:_,isScrolling:x}),{data:k,depthMap:H}=L6e(n,{expandedRowKeys:w,lastRenderedRowIndex:A,resetAfterIndex:I}),U=V(()=>{const{estimatedRowHeight:le,rowHeight:Ke}=n,Ue=S(k);return _n(le)?Object.values(S(E)).reduce((Ze,je)=>Ze+je,0):Ue.length*Ke}),{bodyWidth:B,fixedTableHeight:$,mainTableHeight:ee,leftTableWidth:re,rightTableWidth:ne,headerWidth:ae,windowHeight:pe,footerHeight:de,emptyStyle:me,rootStyle:ke,headerHeight:Be}=N6e(n,{columnsTotalWidth:s,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,rowsHeight:U}),Xe=ie(),Ye=V(()=>{const le=S(k).length===0;return Ut(n.fixedData)?n.fixedData.length===0&&le:le});function Y(le){const{estimatedRowHeight:Ke,rowHeight:Ue,rowKey:Ze}=n;return Ke?S(E)[S(k)[le][Ze]]||Ke:Ue}function he(){const{onEndReached:le}=n;if(!le)return;const{scrollTop:Ke}=S(y),Ue=S(U),Ze=S(pe),je=Ue-(Ke+Ze)+n.hScrollbarSize;S(A)>=0&&Ue===Ke+S(ee)-S(Be)&&le(je)}return St(()=>n.expandedRowKeys,le=>w.value=le,{deep:!0}),{columns:i,containerRef:Xe,mainTableRef:e,leftTableRef:t,rightTableRef:r,isDynamic:T,isResetting:C,isScrolling:x,hasFixedColumns:u,columnsStyles:a,columnsTotalWidth:s,data:k,expandedRowKeys:w,depthMap:H,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,mainColumns:c,bodyWidth:B,emptyStyle:me,rootStyle:ke,headerWidth:ae,footerHeight:de,mainTableHeight:ee,fixedTableHeight:$,leftTableWidth:re,rightTableWidth:ne,showEmpty:Ye,getRowHeight:Y,onColumnSorted:d,onRowHovered:N,onRowExpanded:P,onRowsRendered:F,onRowHeightChange:L,scrollTo:f,scrollToLeft:h,scrollToTop:p,scrollToRow:m,onScroll:v,onVerticalScroll:g}}const NB=Symbol("tableV2"),vre=String,ww={type:tt(Array),required:!0},BB={type:tt(Array)},gre={...BB,required:!0},F6e=String,p$={type:tt(Array),default:()=>Ki([])},p0={type:Number,required:!0},yre={type:tt([String,Number,Symbol]),default:"id"},m$={type:tt(Object)},M0=Vt({class:String,columns:ww,columnsStyles:{type:tt(Object),required:!0},depth:Number,expandColumnKey:F6e,estimatedRowHeight:{...G0.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:tt(Function)},onRowHover:{type:tt(Function)},onRowHeightChange:{type:tt(Function)},rowData:{type:tt(Object),required:!0},rowEventHandlers:{type:tt(Object)},rowIndex:{type:Number,required:!0},rowKey:yre,style:{type:tt(Object)}}),XD={type:Number,required:!0},FB=Vt({class:String,columns:ww,fixedHeaderData:{type:tt(Array)},headerData:{type:tt(Array),required:!0},headerHeight:{type:tt([Number,Array]),default:50},rowWidth:XD,rowHeight:{type:Number,default:50},height:XD,width:XD}),uE=Vt({columns:ww,data:gre,fixedData:BB,estimatedRowHeight:M0.estimatedRowHeight,width:p0,height:p0,headerWidth:p0,headerHeight:FB.headerHeight,bodyWidth:p0,rowHeight:p0,cache:Fne.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:G0.scrollbarAlwaysOn,scrollbarStartGap:G0.scrollbarStartGap,scrollbarEndGap:G0.scrollbarEndGap,class:vre,style:m$,containerStyle:m$,getRowHeight:{type:tt(Function),required:!0},rowKey:M0.rowKey,onRowsRendered:{type:tt(Function)},onScroll:{type:tt(Function)}}),U6e=Vt({cache:uE.cache,estimatedRowHeight:M0.estimatedRowHeight,rowKey:yre,headerClass:{type:tt([String,Function])},headerProps:{type:tt([Object,Function])},headerCellProps:{type:tt([Object,Function])},headerHeight:FB.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:tt([String,Function])},rowProps:{type:tt([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:tt([Object,Function])},columns:ww,data:gre,dataGetter:{type:tt(Function)},fixedData:BB,expandColumnKey:M0.expandColumnKey,expandedRowKeys:p$,defaultExpandedRowKeys:p$,class:vre,fixed:Boolean,style:{type:tt(Object)},width:p0,height:p0,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:G0.hScrollbarSize,vScrollbarSize:G0.vScrollbarSize,scrollbarAlwaysOn:Hne.alwaysOn,sortBy:{type:tt(Object),default:()=>({})},sortState:{type:tt(Object),default:void 0},onColumnSort:{type:tt(Function)},onExpandedRowsChange:{type:tt(Function)},onEndReached:{type:tt(Function)},onRowExpand:M0.onRowExpand,onScroll:uE.onScroll,onRowsRendered:uE.onRowsRendered,rowEventHandlers:M0.rowEventHandlers}),z6e="ElTableV2Header",H6e=Ne({name:z6e,props:FB,setup(n,{slots:e,expose:t}){const r=kt("table-v2"),i=Yt("tableV2GridScrollLeft"),a=ie(),s=V(()=>fp({width:n.width,height:n.height})),o=V(()=>fp({width:n.rowWidth,height:n.height})),l=V(()=>vo(S(n.headerHeight))),u=f=>{const h=S(a);cn(()=>{h!=null&&h.scroll&&h.scroll({left:f})})},c=()=>{const f=r.e("fixed-header-row"),{columns:h,fixedHeaderData:p,rowHeight:m}=n;return p==null?void 0:p.map((v,g)=>{var y;const _=fp({height:m,width:"100%"});return(y=e.fixed)==null?void 0:y.call(e,{class:f,columns:h,rowData:v,rowIndex:-(g+1),style:_})})},d=()=>{const f=r.e("dynamic-header-row"),{columns:h}=n;return S(l).map((p,m)=>{var v;const g=fp({width:"100%",height:p});return(v=e.dynamic)==null?void 0:v.call(e,{class:f,columns:h,headerIndex:m,style:g})})};return Ju(()=>{i!=null&&i.value&&u(i.value)}),t({scrollToLeft:u}),()=>{if(!(n.height<=0))return be("div",{ref:a,class:n.class,style:S(s),role:"rowgroup"},[be("div",{style:S(o),class:r.e("header")},[d(),c()])])}}});var V6e=H6e;const $6e=({atXEndEdge:n,atXStartEdge:e,atYEndEdge:t,atYStartEdge:r},i)=>{let a=null,s=0,o=0;const l=(c,d)=>{const f=c<=0&&e.value||c>=0&&n.value,h=d<=0&&r.value||d>=0&&t.value;return f&&h};return{hasReachedEdge:l,onWheel:c=>{ov(a);let d=c.deltaX,f=c.deltaY;Math.abs(d)>Math.abs(f)?f=0:d=0,c.shiftKey&&f!==0&&(d=f,f=0),!(l(s,o)&&l(s+d,o+f))&&(s+=d,o+=f,c.preventDefault(),a=Fp(()=>{i(s,o),s=0,o=0}))}}},_re=({name:n,clearCache:e,getColumnPosition:t,getColumnStartIndexForOffset:r,getColumnStopIndexForStartIndex:i,getEstimatedTotalHeight:a,getEstimatedTotalWidth:s,getColumnOffset:o,getRowOffset:l,getRowPosition:u,getRowStartIndexForOffset:c,getRowStopIndexForStartIndex:d,initCache:f,injectToInstance:h,validateProps:p})=>Ne({name:n??"ElVirtualList",props:G0,emits:[pM,mM],setup(m,{emit:v,expose:g,slots:y}){const _=kt("vl");p(m);const b=tr(),x=ie(f(m,b));h==null||h(b,x);const w=ie(),A=ie(),T=ie(),C=ie(null),E=ie({isScrolling:!1,scrollLeft:_n(m.initScrollLeft)?m.initScrollLeft:0,scrollTop:_n(m.initScrollTop)?m.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Py,yAxisScrollDir:Py}),I=One(),P=V(()=>Number.parseInt(`${m.height}`,10)),L=V(()=>Number.parseInt(`${m.width}`,10)),N=V(()=>{const{totalColumn:Ze,totalRow:je,columnCache:He}=m,{isScrolling:ut,xAxisScrollDir:ge,scrollLeft:q}=S(E);if(Ze===0||je===0)return[0,0,0,0];const te=r(m,q,S(x)),ye=i(m,te,q,S(x)),Ve=!ut||ge===vM?Math.max(1,He):1,et=!ut||ge===Py?Math.max(1,He):1;return[Math.max(0,te-Ve),Math.max(0,Math.min(Ze-1,ye+et)),te,ye]}),F=V(()=>{const{totalColumn:Ze,totalRow:je,rowCache:He}=m,{isScrolling:ut,yAxisScrollDir:ge,scrollTop:q}=S(E);if(Ze===0||je===0)return[0,0,0,0];const te=c(m,q,S(x)),ye=d(m,te,q,S(x)),Ve=!ut||ge===vM?Math.max(1,He):1,et=!ut||ge===Py?Math.max(1,He):1;return[Math.max(0,te-Ve),Math.max(0,Math.min(je-1,ye+et)),te,ye]}),k=V(()=>a(m,S(x))),H=V(()=>s(m,S(x))),U=V(()=>{var Ze;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:m.direction,height:_n(m.height)?`${m.height}px`:m.height,width:_n(m.width)?`${m.width}px`:m.width},(Ze=m.style)!=null?Ze:{}]}),B=V(()=>{const Ze=`${S(H)}px`;return{height:`${S(k)}px`,pointerEvents:S(E).isScrolling?"none":void 0,width:Ze}}),$=()=>{const{totalColumn:Ze,totalRow:je}=m;if(Ze>0&&je>0){const[ye,Ve,et,At]=S(N),[It,De,Tt,ot]=S(F);v(pM,{columnCacheStart:ye,columnCacheEnd:Ve,rowCacheStart:It,rowCacheEnd:De,columnVisibleStart:et,columnVisibleEnd:At,rowVisibleStart:Tt,rowVisibleEnd:ot})}const{scrollLeft:He,scrollTop:ut,updateRequested:ge,xAxisScrollDir:q,yAxisScrollDir:te}=S(E);v(mM,{xAxisScrollDir:q,scrollLeft:He,yAxisScrollDir:te,scrollTop:ut,updateRequested:ge})},ee=Ze=>{const{clientHeight:je,clientWidth:He,scrollHeight:ut,scrollLeft:ge,scrollTop:q,scrollWidth:te}=Ze.currentTarget,ye=S(E);if(ye.scrollTop===q&&ye.scrollLeft===ge)return;let Ve=ge;if(ZV(m.direction))switch(yM()){case l2:Ve=-ge;break;case RB:Ve=te-He-ge;break}E.value={...ye,isScrolling:!0,scrollLeft:Ve,scrollTop:Math.max(0,Math.min(q,ut-je)),updateRequested:!0,xAxisScrollDir:A0(ye.scrollLeft,Ve),yAxisScrollDir:A0(ye.scrollTop,q)},cn(()=>ke()),Be(),$()},re=(Ze,je)=>{const He=S(P),ut=(k.value-He)/je*Ze;pe({scrollTop:Math.min(k.value-He,ut)})},ne=(Ze,je)=>{const He=S(L),ut=(H.value-He)/je*Ze;pe({scrollLeft:Math.min(H.value-He,ut)})},{onWheel:ae}=$6e({atXStartEdge:V(()=>E.value.scrollLeft<=0),atXEndEdge:V(()=>E.value.scrollLeft>=H.value-S(L)),atYStartEdge:V(()=>E.value.scrollTop<=0),atYEndEdge:V(()=>E.value.scrollTop>=k.value-S(P))},(Ze,je)=>{var He,ut,ge,q;(ut=(He=A.value)==null?void 0:He.onMouseUp)==null||ut.call(He),(q=(ge=T.value)==null?void 0:ge.onMouseUp)==null||q.call(ge);const te=S(L),ye=S(P);pe({scrollLeft:Math.min(E.value.scrollLeft+Ze,H.value-te),scrollTop:Math.min(E.value.scrollTop+je,k.value-ye)})});ni(w,"wheel",ae,{passive:!1});const pe=({scrollLeft:Ze=E.value.scrollLeft,scrollTop:je=E.value.scrollTop})=>{Ze=Math.max(Ze,0),je=Math.max(je,0);const He=S(E);je===He.scrollTop&&Ze===He.scrollLeft||(E.value={...He,xAxisScrollDir:A0(He.scrollLeft,Ze),yAxisScrollDir:A0(He.scrollTop,je),scrollLeft:Ze,scrollTop:je,updateRequested:!0},cn(()=>ke()),Be(),$())},de=(Ze=0,je=0,He=Lu)=>{const ut=S(E);je=Math.max(0,Math.min(je,m.totalColumn-1)),Ze=Math.max(0,Math.min(Ze,m.totalRow-1));const ge=_ee(_.namespace.value),q=S(x),te=a(m,q),ye=s(m,q);pe({scrollLeft:o(m,je,He,ut.scrollLeft,q,ye>m.width?ge:0),scrollTop:l(m,Ze,He,ut.scrollTop,q,te>m.height?ge:0)})},me=(Ze,je)=>{const{columnWidth:He,direction:ut,rowHeight:ge}=m,q=I.value(e&&He,e&&ge,e&&ut),te=`${Ze},${je}`;if(Ir(q,te))return q[te];{const[,ye]=t(m,je,S(x)),Ve=S(x),et=ZV(ut),[At,It]=u(m,Ze,Ve),[De]=t(m,je,Ve);return q[te]={position:"absolute",left:et?void 0:`${ye}px`,right:et?`${ye}px`:void 0,top:`${It}px`,height:`${At}px`,width:`${De}px`},q[te]}},ke=()=>{E.value.isScrolling=!1,cn(()=>{I.value(-1,null,null)})};zn(()=>{if(!Cr)return;const{initScrollLeft:Ze,initScrollTop:je}=m,He=S(w);He&&(_n(Ze)&&(He.scrollLeft=Ze),_n(je)&&(He.scrollTop=je)),$()});const Be=()=>{const{direction:Ze}=m,{scrollLeft:je,scrollTop:He,updateRequested:ut}=S(E),ge=S(w);if(ut&&ge){if(Ze===n1)switch(yM()){case l2:{ge.scrollLeft=-je;break}case PB:{ge.scrollLeft=je;break}default:{const{clientWidth:q,scrollWidth:te}=ge;ge.scrollLeft=te-q-je;break}}else ge.scrollLeft=Math.max(0,je);ge.scrollTop=Math.max(0,He)}},{resetAfterColumnIndex:Xe,resetAfterRowIndex:Ye,resetAfter:Y}=b.proxy;g({windowRef:w,innerRef:C,getItemStyleCache:I,scrollTo:pe,scrollToItem:de,states:E,resetAfterColumnIndex:Xe,resetAfterRowIndex:Ye,resetAfter:Y});const he=()=>{const{scrollbarAlwaysOn:Ze,scrollbarStartGap:je,scrollbarEndGap:He,totalColumn:ut,totalRow:ge}=m,q=S(L),te=S(P),ye=S(H),Ve=S(k),{scrollLeft:et,scrollTop:At}=S(E),It=an(S5,{ref:A,alwaysOn:Ze,startGap:je,endGap:He,class:_.e("horizontal"),clientSize:q,layout:"horizontal",onScroll:ne,ratio:q*100/ye,scrollFrom:et/(ye-q),total:ge,visible:!0}),De=an(S5,{ref:T,alwaysOn:Ze,startGap:je,endGap:He,class:_.e("vertical"),clientSize:te,layout:"vertical",onScroll:re,ratio:te*100/Ve,scrollFrom:At/(Ve-te),total:ut,visible:!0});return{horizontalScrollbar:It,verticalScrollbar:De}},le=()=>{var Ze;const[je,He]=S(N),[ut,ge]=S(F),{data:q,totalColumn:te,totalRow:ye,useIsScrolling:Ve,itemKey:et}=m,At=[];if(ye>0&&te>0)for(let It=ut;It<=ge;It++)for(let De=je;De<=He;De++){const Tt=et({columnIndex:De,data:q,rowIndex:It});At.push(an(on,{key:Tt},(Ze=y.default)==null?void 0:Ze.call(y,{columnIndex:De,data:q,isScrolling:Ve?S(E).isScrolling:void 0,style:me(It,De),rowIndex:It})))}return At},Ke=()=>{const Ze=ir(m.innerElement),je=le();return[an(Ze,{style:S(B),ref:C},ln(Ze)?je:{default:()=>je})]};return()=>{const Ze=ir(m.containerElement),{horizontalScrollbar:je,verticalScrollbar:He}=he(),ut=Ke();return an("div",{key:0,class:_.e("wrapper"),role:m.role},[an(Ze,{class:m.className,style:S(U),onScroll:ee,ref:w},ln(Ze)?ut:{default:()=>ut}),je,He])}}}),{max:SM,min:bre,floor:Sre}=Math,G6e={column:"columnWidth",row:"rowHeight"},k5={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},xf=(n,e,t,r)=>{const[i,a,s]=[t[r],n[G6e[r]],t[k5[r]]];if(e>s){let o=0;if(s>=0){const l=i[s];o=l.offset+l.size}for(let l=s+1;l<=e;l++){const u=a(l);i[l]={offset:o,size:u},o+=u}t[k5[r]]=e}return i[e]},xre=(n,e,t,r,i,a)=>{for(;t<=r;){const s=t+Sre((r-t)/2),o=xf(n,s,e,a).offset;if(o===i)return s;o<i?t=s+1:r=s-1}return SM(0,t-1)},W6e=(n,e,t,r,i)=>{const a=i==="column"?n.totalColumn:n.totalRow;let s=1;for(;t<a&&xf(n,t,e,i).offset<r;)t+=s,s*=2;return xre(n,e,Sre(t/2),bre(t,a-1),r,i)},v$=(n,e,t,r)=>{const[i,a]=[e[r],e[k5[r]]];return(a>0?i[a].offset:0)>=t?xre(n,e,0,a,t,r):W6e(n,e,SM(0,a),t,r)},wre=({totalRow:n},{estimatedRowHeight:e,lastVisitedRowIndex:t,row:r})=>{let i=0;if(t>=n&&(t=n-1),t>=0){const o=r[t];i=o.offset+o.size}const s=(n-t-1)*e;return i+s},Tre=({totalColumn:n},{column:e,estimatedColumnWidth:t,lastVisitedColumnIndex:r})=>{let i=0;if(r>n&&(r=n-1),r>=0){const o=e[r];i=o.offset+o.size}const s=(n-r-1)*t;return i+s},q6e={column:Tre,row:wre},g$=(n,e,t,r,i,a,s)=>{const[o,l]=[a==="row"?n.height:n.width,q6e[a]],u=xf(n,e,i,a),c=l(n,i),d=SM(0,bre(c-o,u.offset)),f=SM(0,u.offset-o+s+u.size);switch(t===U4&&(r>=f-o&&r<=d+o?t=Lu:t=hd),t){case s2:return d;case o2:return f;case hd:return Math.round(f+(d-f)/2);case Lu:default:return r>=f&&r<=d?r:f>d||r<f?f:d}},j6e=_re({name:"ElDynamicSizeGrid",getColumnPosition:(n,e,t)=>{const r=xf(n,e,t,"column");return[r.size,r.offset]},getRowPosition:(n,e,t)=>{const r=xf(n,e,t,"row");return[r.size,r.offset]},getColumnOffset:(n,e,t,r,i,a)=>g$(n,e,t,r,i,"column",a),getRowOffset:(n,e,t,r,i,a)=>g$(n,e,t,r,i,"row",a),getColumnStartIndexForOffset:(n,e,t)=>v$(n,t,e,"column"),getColumnStopIndexForStartIndex:(n,e,t,r)=>{const i=xf(n,e,r,"column"),a=t+n.width;let s=i.offset+i.size,o=e;for(;o<n.totalColumn-1&&s<a;)o++,s+=xf(n,e,r,"column").size;return o},getEstimatedTotalHeight:wre,getEstimatedTotalWidth:Tre,getRowStartIndexForOffset:(n,e,t)=>v$(n,t,e,"row"),getRowStopIndexForStartIndex:(n,e,t,r)=>{const{totalRow:i,height:a}=n,s=xf(n,e,r,"row"),o=t+a;let l=s.size+s.offset,u=e;for(;u<i-1&&l<o;)u++,l+=xf(n,u,r,"row").size;return u},injectToInstance:(n,e)=>{const t=({columnIndex:a,rowIndex:s},o)=>{var l,u;o=ti(o)?!0:o,_n(a)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,a-1)),_n(s)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,s-1)),(l=n.exposed)==null||l.getItemStyleCache.value(-1,null,null),o&&((u=n.proxy)==null||u.$forceUpdate())},r=(a,s)=>{t({columnIndex:a},s)},i=(a,s)=>{t({rowIndex:a},s)};Object.assign(n.proxy,{resetAfterColumnIndex:r,resetAfterRowIndex:i,resetAfter:t})},initCache:({estimatedColumnWidth:n=m5,estimatedRowHeight:e=m5})=>({column:{},estimatedColumnWidth:n,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:n,rowHeight:e})=>{}}),K6e=_re({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:n},e)=>[n,e*n],getRowPosition:({rowHeight:n},e)=>[n,e*n],getEstimatedTotalHeight:({totalRow:n,rowHeight:e})=>e*n,getEstimatedTotalWidth:({totalColumn:n,columnWidth:e})=>e*n,getColumnOffset:({totalColumn:n,columnWidth:e,width:t},r,i,a,s,o)=>{t=Number(t);const l=Math.max(0,n*e-t),u=Math.min(l,r*e),c=Math.max(0,r*e-t+o+e);switch(i==="smart"&&(a>=c-t&&a<=u+t?i=Lu:i=hd),i){case s2:return u;case o2:return c;case hd:{const d=Math.round(c+(u-c)/2);return d<Math.ceil(t/2)?0:d>l+Math.floor(t/2)?l:d}case Lu:default:return a>=c&&a<=u?a:c>u||a<c?c:u}},getRowOffset:({rowHeight:n,height:e,totalRow:t},r,i,a,s,o)=>{e=Number(e);const l=Math.max(0,t*n-e),u=Math.min(l,r*n),c=Math.max(0,r*n-e+o+n);switch(i===U4&&(a>=c-e&&a<=u+e?i=Lu:i=hd),i){case s2:return u;case o2:return c;case hd:{const d=Math.round(c+(u-c)/2);return d<Math.ceil(e/2)?0:d>l+Math.floor(e/2)?l:d}case Lu:default:return a>=c&&a<=u?a:c>u||a<c?c:u}},getColumnStartIndexForOffset:({columnWidth:n,totalColumn:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getColumnStopIndexForStartIndex:({columnWidth:n,totalColumn:e,width:t},r,i)=>{const a=r*n,s=Math.ceil((t+i-a)/n);return Math.max(0,Math.min(e-1,r+s-1))},getRowStartIndexForOffset:({rowHeight:n,totalRow:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getRowStopIndexForStartIndex:({rowHeight:n,totalRow:e,height:t},r,i)=>{const a=r*n,s=Math.ceil((t+i-a)/n);return Math.max(0,Math.min(e-1,r+s-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:n,rowHeight:e})=>{}}),X6e="ElTableV2Grid",Y6e=n=>{const e=ie(),t=ie(),r=ie(0),i=V(()=>{const{data:v,rowHeight:g,estimatedRowHeight:y}=n;if(!y)return v.length*g}),a=V(()=>{const{fixedData:v,rowHeight:g}=n;return((v==null?void 0:v.length)||0)*g}),s=V(()=>lE(n.headerHeight)),o=V(()=>{const{height:v}=n;return Math.max(0,v-S(s)-S(a))}),l=V(()=>S(s)+S(a)>0),u=({data:v,rowIndex:g})=>v[g][n.rowKey];function c({rowCacheStart:v,rowCacheEnd:g,rowVisibleStart:y,rowVisibleEnd:_}){var b;(b=n.onRowsRendered)==null||b.call(n,{rowCacheStart:v,rowCacheEnd:g,rowVisibleStart:y,rowVisibleEnd:_})}function d(v,g){var y;(y=t.value)==null||y.resetAfterRowIndex(v,g)}function f(v,g){const y=S(e),_=S(t);er(v)?(y==null||y.scrollToLeft(v.scrollLeft),r.value=v.scrollLeft,_==null||_.scrollTo(v)):(y==null||y.scrollToLeft(v),r.value=v,_==null||_.scrollTo({scrollLeft:v,scrollTop:g}))}function h(v){var g;(g=S(t))==null||g.scrollTo({scrollTop:v})}function p(v,g){var y;(y=S(t))==null||y.scrollToItem(v,1,g)}function m(){var v,g;(v=S(t))==null||v.$forceUpdate(),(g=S(e))==null||g.$forceUpdate()}return{bodyRef:t,forceUpdate:m,fixedRowHeight:a,gridHeight:o,hasHeader:l,headerHeight:s,headerRef:e,totalHeight:i,itemKey:u,onItemRendered:c,resetAfterRowIndex:d,scrollTo:f,scrollToTop:h,scrollToRow:p,scrollLeft:r}},Q6e=Ne({name:X6e,props:uE,setup(n,{slots:e,expose:t}){const{ns:r}=Yt(NB),{bodyRef:i,fixedRowHeight:a,gridHeight:s,hasHeader:o,headerRef:l,headerHeight:u,totalHeight:c,forceUpdate:d,itemKey:f,onItemRendered:h,resetAfterRowIndex:p,scrollTo:m,scrollToTop:v,scrollToRow:g,scrollLeft:y}=Y6e(n);pr("tableV2GridScrollLeft",y),t({forceUpdate:d,totalHeight:c,scrollTo:m,scrollToTop:v,scrollToRow:g,resetAfterRowIndex:p});const _=()=>n.bodyWidth;return()=>{const{cache:b,columns:x,data:w,fixedData:A,useIsScrolling:T,scrollbarAlwaysOn:C,scrollbarEndGap:E,scrollbarStartGap:I,style:P,rowHeight:L,bodyWidth:N,estimatedRowHeight:F,headerWidth:k,height:H,width:U,getRowHeight:B,onScroll:$}=n,ee=_n(F),re=ee?j6e:K6e,ne=S(u);return be("div",{role:"table",class:[r.e("table"),n.class],style:P},[be(re,{ref:i,data:w,useIsScrolling:T,itemKey:f,columnCache:0,columnWidth:ee?_:N,totalColumn:1,totalRow:w.length,rowCache:b,rowHeight:ee?B:L,width:U,height:S(s),class:r.e("body"),role:"rowgroup",scrollbarStartGap:I,scrollbarEndGap:E,scrollbarAlwaysOn:C,onScroll:$,onItemRendered:h,perfMode:!1},{default:ae=>{var pe;const de=w[ae.rowIndex];return(pe=e.row)==null?void 0:pe.call(e,{...ae,columns:x,rowData:de})}}),S(o)&&be(V6e,{ref:l,class:r.e("header-wrapper"),columns:x,headerData:w,headerHeight:n.headerHeight,fixedHeaderData:A,rowWidth:k,rowHeight:L,width:U,height:Math.min(ne+S(a),H)},{dynamic:e.header,fixed:e.row})])}}});var UB=Q6e;function Z6e(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!qi(n)}const J6e=(n,{slots:e})=>{const{mainTableRef:t,...r}=n;return be(UB,lr({ref:t},r),Z6e(e)?e:{default:()=>[e]})};var eOe=J6e;function tOe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!qi(n)}const nOe=(n,{slots:e})=>{if(!n.columns.length)return;const{leftTableRef:t,...r}=n;return be(UB,lr({ref:t},r),tOe(e)?e:{default:()=>[e]})};var rOe=nOe;function iOe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!qi(n)}const aOe=(n,{slots:e})=>{if(!n.columns.length)return;const{rightTableRef:t,...r}=n;return be(UB,lr({ref:t},r),iOe(e)?e:{default:()=>[e]})};var sOe=aOe;const oOe=n=>{const{isScrolling:e}=Yt(NB),t=ie(!1),r=ie(),i=V(()=>_n(n.estimatedRowHeight)&&n.rowIndex>=0),a=(l=!1)=>{const u=S(r);if(!u)return;const{columns:c,onRowHeightChange:d,rowKey:f,rowIndex:h,style:p}=n,{height:m}=u.getBoundingClientRect();t.value=!0,cn(()=>{if(l||m!==Number.parseInt(p.height)){const v=c[0],g=(v==null?void 0:v.placeholderSign)===f2;d==null||d({rowKey:f,height:m,rowIndex:h},v&&!g&&v.fixed)}})},s=V(()=>{const{rowData:l,rowIndex:u,rowKey:c,onRowHover:d}=n,f=n.rowEventHandlers||{},h={};return Object.entries(f).forEach(([p,m])=>{hn(m)&&(h[p]=v=>{m({event:v,rowData:l,rowIndex:u,rowKey:c})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:p,hovered:m})=>{const v=h[p];h[p]=g=>{d({event:g,hovered:m,rowData:l,rowIndex:u,rowKey:c}),v==null||v(g)}}),h}),o=l=>{const{onRowExpand:u,rowData:c,rowIndex:d,rowKey:f}=n;u==null||u({expanded:l,rowData:c,rowIndex:d,rowKey:f})};return zn(()=>{S(i)&&a(!0)}),{isScrolling:e,measurable:i,measured:t,rowRef:r,eventHandlers:s,onExpand:o}},lOe="ElTableV2TableRow",uOe=Ne({name:lOe,props:M0,setup(n,{expose:e,slots:t,attrs:r}){const{eventHandlers:i,isScrolling:a,measurable:s,measured:o,rowRef:l,onExpand:u}=oOe(n);return e({onExpand:u}),()=>{const{columns:c,columnsStyles:d,expandColumnKey:f,depth:h,rowData:p,rowIndex:m,style:v}=n;let g=c.map((y,_)=>{const b=Ut(p.children)&&p.children.length>0&&y.key===f;return t.cell({column:y,columns:c,columnIndex:_,depth:h,style:d[y.key],rowData:p,rowIndex:m,isScrolling:S(a),expandIconProps:b?{rowData:p,rowIndex:m,onExpand:u}:void 0})});if(t.row&&(g=t.row({cells:g.map(y=>Ut(y)&&y.length===1?y[0]:y),style:v,columns:c,depth:h,rowData:p,rowIndex:m,isScrolling:S(a)})),S(s)){const{height:y,..._}=v||{},b=S(o);return be("div",lr({ref:l,class:n.class,style:b?v:_,role:"row"},r,S(i)),[g])}return be("div",lr(r,{ref:l,class:n.class,style:v,role:"row"},S(i)),[g])}}});var cOe=uOe;function dOe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!qi(n)}const fOe=(n,{slots:e})=>{const{columns:t,columnsStyles:r,depthMap:i,expandColumnKey:a,expandedRowKeys:s,estimatedRowHeight:o,hasFixedColumns:l,rowData:u,rowIndex:c,style:d,isScrolling:f,rowProps:h,rowClass:p,rowKey:m,rowEventHandlers:v,ns:g,onRowHovered:y,onRowExpanded:_}=n,b=uv(p,{columns:t,rowData:u,rowIndex:c},""),x=uv(h,{columns:t,rowData:u,rowIndex:c}),w=u[m],A=i[w]||0,T=!!a,C=c<0,E=[g.e("row"),b,{[g.e(`row-depth-${A}`)]:T&&c>=0,[g.is("expanded")]:T&&s.includes(w),[g.is("fixed")]:!A&&C,[g.is("customized")]:!!e.row}],I=l?y:void 0,P={...x,columns:t,columnsStyles:r,class:E,depth:A,expandColumnKey:a,estimatedRowHeight:C?void 0:o,isScrolling:f,rowIndex:c,rowData:u,rowKey:w,rowEventHandlers:v,style:d};return be(cOe,lr(P,{onRowExpand:_,onMouseenter:F=>{I==null||I({hovered:!0,rowKey:w,event:F,rowData:u,rowIndex:c})},onMouseleave:F=>{I==null||I({hovered:!1,rowKey:w,event:F,rowData:u,rowIndex:c})},rowkey:w}),dOe(e)?e:{default:()=>[e]})};var hOe=fOe;const zB=(n,{slots:e})=>{var t;const{cellData:r,style:i}=n,a=((t=r==null?void 0:r.toString)==null?void 0:t.call(r))||"",s=at(e,"default",n,()=>[a]);return be("div",{class:n.class,title:a,style:i},[s])};zB.displayName="ElTableV2Cell";zB.inheritAttrs=!1;var pOe=zB;const mOe=n=>{const{expanded:e,expandable:t,onExpand:r,style:i,size:a}=n,s={onClick:t?()=>r(!e):void 0,class:n.class};return be(tn,lr(s,{size:a,style:i}),{default:()=>[be(jo,null,null)]})};var vOe=mOe;const Cre=({columns:n,column:e,columnIndex:t,depth:r,expandIconProps:i,isScrolling:a,rowData:s,rowIndex:o,style:l,expandedRowKeys:u,ns:c,cellProps:d,expandColumnKey:f,indentSize:h,iconSize:p,rowKey:m},{slots:v})=>{const g=fp(l);if(e.placeholderSign===f2)return be("div",{class:c.em("row-cell","placeholder"),style:g},null);const{cellRenderer:y,dataKey:_,dataGetter:b}=e,x=hn(b)?b({columns:n,column:e,columnIndex:t,rowData:s,rowIndex:o}):ba(s,_??""),w=uv(d,{cellData:x,columns:n,column:e,columnIndex:t,rowIndex:o,rowData:s}),A={class:c.e("cell-text"),columns:n,column:e,columnIndex:t,cellData:x,isScrolling:a,rowData:s,rowIndex:o},T=mre(y),C=T?T(A):at(v,"default",A,()=>[be(pOe,A,null)]),E=[c.e("row-cell"),e.class,e.align===d2.CENTER&&c.is("align-center"),e.align===d2.RIGHT&&c.is("align-right")],I=o>=0&&f&&e.key===f,P=o>=0&&u.includes(s[m]);let L;const N=`margin-inline-start: ${r*h}px;`;return I&&(er(i)?L=be(vOe,lr(i,{class:[c.e("expand-icon"),c.is("expanded",P)],size:p,expanded:P,style:N,expandable:!0}),null):L=be("div",{style:[N,`width: ${p}px; height: ${p}px;`].join(" ")},null)),be("div",lr({class:E,style:g},w,{role:"cell"}),[L,C])};Cre.inheritAttrs=!1;var y$=Cre;const gOe=Vt({class:String,columns:ww,columnsStyles:{type:tt(Object),required:!0},headerIndex:Number,style:{type:tt(Object)}}),yOe=Ne({name:"ElTableV2HeaderRow",props:gOe,setup(n,{slots:e}){return()=>{const{columns:t,columnsStyles:r,headerIndex:i,style:a}=n;let s=t.map((o,l)=>e.cell({columns:t,column:o,columnIndex:l,headerIndex:i,style:r[o.key]}));return e.header&&(s=e.header({cells:s.map(o=>Ut(o)&&o.length===1?o[0]:o),columns:t,headerIndex:i})),be("div",{class:n.class,style:a,role:"row"},[s])}}});var _Oe=yOe;function bOe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!qi(n)}const SOe=({columns:n,columnsStyles:e,headerIndex:t,style:r,headerClass:i,headerProps:a,ns:s},{slots:o})=>{const l={columns:n,headerIndex:t},u=[s.e("header-row"),uv(i,l,""),{[s.is("customized")]:!!o.header}],c={...uv(a,l),columnsStyles:e,class:u,columns:n,headerIndex:t,style:r};return be(_Oe,c,bOe(o)?o:{default:()=>[o]})};var xOe=SOe;const HB=(n,{slots:e})=>at(e,"default",n,()=>{var t,r;return[be("div",{class:n.class,title:(t=n.column)==null?void 0:t.title},[(r=n.column)==null?void 0:r.title])]});HB.displayName="ElTableV2HeaderCell";HB.inheritAttrs=!1;var wOe=HB;const TOe=n=>{const{sortOrder:e}=n;return be(tn,{size:14,class:n.class},{default:()=>[e===c2.ASC?be(r2e,null,null):be(t2e,null,null)]})};var COe=TOe;const AOe=(n,{slots:e})=>{const{column:t,ns:r,style:i,onColumnSorted:a}=n,s=fp(i);if(t.placeholderSign===f2)return be("div",{class:r.em("header-row-cell","placeholder"),style:s},null);const{headerCellRenderer:o,headerClass:l,sortable:u}=t,c={...n,class:r.e("header-cell-text")},d=mre(o),f=d?d(c):at(e,"default",c,()=>[be(wOe,c,null)]),{sortBy:h,sortState:p,headerCellProps:m}=n;let v,g;if(p){const b=p[t.key];v=!!R5[b],g=v?b:c2.ASC}else v=t.key===h.key,g=v?h.order:c2.ASC;const y=[r.e("header-cell"),uv(l,n,""),t.align===d2.CENTER&&r.is("align-center"),t.align===d2.RIGHT&&r.is("align-right"),u&&r.is("sortable")],_={...uv(m,n),onClick:t.sortable?a:void 0,class:y,style:s,"data-key":t.key};return be("div",lr(_,{role:"columnheader"}),[f,u&&be(COe,{class:[r.e("sort-icon"),v&&r.is("sorting")],sortOrder:g},null)])};var _$=AOe;const Are=(n,{slots:e})=>{var t;return be("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};Are.displayName="ElTableV2Footer";var EOe=Are;const Ere=(n,{slots:e})=>{const t=at(e,"default",{},()=>[be(bne,null,null)]);return be("div",{class:n.class,style:n.style},[t])};Ere.displayName="ElTableV2Empty";var MOe=Ere;const Mre=(n,{slots:e})=>{var t;return be("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};Mre.displayName="ElTableV2Overlay";var IOe=Mre;function kb(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!qi(n)}const DOe="ElTableV2",POe=Ne({name:DOe,props:U6e,setup(n,{slots:e,expose:t}){const r=kt("table-v2"),{columnsStyles:i,fixedColumnsOnLeft:a,fixedColumnsOnRight:s,mainColumns:o,mainTableHeight:l,fixedTableHeight:u,leftTableWidth:c,rightTableWidth:d,data:f,depthMap:h,expandedRowKeys:p,hasFixedColumns:m,mainTableRef:v,leftTableRef:g,rightTableRef:y,isDynamic:_,isResetting:b,isScrolling:x,bodyWidth:w,emptyStyle:A,rootStyle:T,headerWidth:C,footerHeight:E,showEmpty:I,scrollTo:P,scrollToLeft:L,scrollToTop:N,scrollToRow:F,getRowHeight:k,onColumnSorted:H,onRowHeightChange:U,onRowHovered:B,onRowExpanded:$,onRowsRendered:ee,onScroll:re,onVerticalScroll:ne}=B6e(n);return t({scrollTo:P,scrollToLeft:L,scrollToTop:N,scrollToRow:F}),pr(NB,{ns:r,isResetting:b,isScrolling:x}),()=>{const{cache:ae,cellProps:pe,estimatedRowHeight:de,expandColumnKey:me,fixedData:ke,headerHeight:Be,headerClass:Xe,headerProps:Ye,headerCellProps:Y,sortBy:he,sortState:le,rowHeight:Ke,rowClass:Ue,rowEventHandlers:Ze,rowKey:je,rowProps:He,scrollbarAlwaysOn:ut,indentSize:ge,iconSize:q,useIsScrolling:te,vScrollbarSize:ye,width:Ve}=n,et=S(f),At={cache:ae,class:r.e("main"),columns:S(o),data:et,fixedData:ke,estimatedRowHeight:de,bodyWidth:S(w)+ye,headerHeight:Be,headerWidth:S(C),height:S(l),mainTableRef:v,rowKey:je,rowHeight:Ke,scrollbarAlwaysOn:ut,scrollbarStartGap:2,scrollbarEndGap:ye,useIsScrolling:te,width:Ve,getRowHeight:k,onRowsRendered:ee,onScroll:re},It=S(c),De=S(u),Tt={cache:ae,class:r.e("left"),columns:S(a),data:et,estimatedRowHeight:de,leftTableRef:g,rowHeight:Ke,bodyWidth:It,headerWidth:It,headerHeight:Be,height:De,rowKey:je,scrollbarAlwaysOn:ut,scrollbarStartGap:2,scrollbarEndGap:ye,useIsScrolling:te,width:It,getRowHeight:k,onScroll:ne},G=S(d)+ye,_e={cache:ae,class:r.e("right"),columns:S(s),data:et,estimatedRowHeight:de,rightTableRef:y,rowHeight:Ke,bodyWidth:G,headerWidth:G,headerHeight:Be,height:De,rowKey:je,scrollbarAlwaysOn:ut,scrollbarStartGap:2,scrollbarEndGap:ye,width:G,style:`--${S(r.namespace)}-table-scrollbar-size: ${ye}px`,useIsScrolling:te,getRowHeight:k,onScroll:ne},ve=S(i),Le={ns:r,depthMap:S(h),columnsStyles:ve,expandColumnKey:me,expandedRowKeys:S(p),estimatedRowHeight:de,hasFixedColumns:S(m),rowProps:He,rowClass:Ue,rowKey:je,rowEventHandlers:Ze,onRowHovered:B,onRowExpanded:$,onRowHeightChange:U},we={cellProps:pe,expandColumnKey:me,indentSize:ge,iconSize:q,rowKey:je,expandedRowKeys:S(p),ns:r},Ie={ns:r,headerClass:Xe,headerProps:Ye,columnsStyles:ve},wt={ns:r,sortBy:he,sortState:le,headerCellProps:Y,onColumnSorted:H},Pe={row:Mt=>be(hOe,lr(Mt,Le),{row:e.row,cell:Wt=>{let zt;return e.cell?be(y$,lr(Wt,we,{style:ve[Wt.column.key]}),kb(zt=e.cell(Wt))?zt:{default:()=>[zt]}):be(y$,lr(Wt,we,{style:ve[Wt.column.key]}),null)}}),header:Mt=>be(xOe,lr(Mt,Ie),{header:e.header,cell:Wt=>{let zt;return e["header-cell"]?be(_$,lr(Wt,wt,{style:ve[Wt.column.key]}),kb(zt=e["header-cell"](Wt))?zt:{default:()=>[zt]}):be(_$,lr(Wt,wt,{style:ve[Wt.column.key]}),null)}})},Rt=[n.class,r.b(),r.e("root"),{[r.is("dynamic")]:S(_)}],dt={class:r.e("footer"),style:S(E)};return be("div",{class:Rt,style:S(T)},[be(eOe,At,kb(Pe)?Pe:{default:()=>[Pe]}),be(rOe,Tt,kb(Pe)?Pe:{default:()=>[Pe]}),be(sOe,_e,kb(Pe)?Pe:{default:()=>[Pe]}),e.footer&&be(EOe,dt,{default:e.footer}),S(I)&&be(MOe,{class:r.e("empty"),style:S(A)},{default:e.empty}),e.overlay&&be(IOe,{class:r.e("overlay")},{default:e.overlay})])}}});var ROe=POe;const kOe=Vt({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:tt(Function)}}),LOe=n=>{const e=ie(),t=ie(0),r=ie(0);let i;return zn(()=>{i=zi(e,([a])=>{const{width:s,height:o}=a.contentRect,{paddingLeft:l,paddingRight:u,paddingTop:c,paddingBottom:d}=getComputedStyle(a.target),f=Number.parseInt(l)||0,h=Number.parseInt(u)||0,p=Number.parseInt(c)||0,m=Number.parseInt(d)||0;t.value=s-f-h,r.value=o-p-m}).stop}),Wr(()=>{i==null||i()}),St([t,r],([a,s])=>{var o;(o=n.onResize)==null||o.call(n,{width:a,height:s})}),{sizer:e,width:t,height:r}},OOe=Ne({name:"ElAutoResizer",props:kOe,setup(n,{slots:e}){const t=kt("auto-resizer"),{height:r,width:i,sizer:a}=LOe(n),s={width:"100%",height:"100%"};return()=>{var o;return be("div",{ref:a,class:t.b(),style:s},[(o=e.default)==null?void 0:o.call(e,{height:r.value,width:i.value})])}}});var NOe=OOe;const BOe=Bn(ROe),FOe=Bn(NOe),z4=Symbol("tabsRootContextKey"),UOe=Vt({tabs:{type:tt(Array),default:()=>Ki([])}}),Ire="ElTabBar",zOe=Ne({name:Ire}),HOe=Ne({...zOe,props:UOe,setup(n,{expose:e}){const t=n,r=tr(),i=Yt(z4);i||Xa(Ire,"<el-tabs><el-tab-bar /></el-tabs>");const a=kt("tabs"),s=ie(),o=ie(),l=()=>{let h=0,p=0;const m=["top","bottom"].includes(i.props.tabPosition)?"width":"height",v=m==="width"?"x":"y",g=v==="x"?"left":"top";return t.tabs.every(y=>{var _,b;const x=(b=(_=r.parent)==null?void 0:_.refs)==null?void 0:b[`tab-${y.uid}`];if(!x)return!1;if(!y.active)return!0;h=x[`offset${cd(g)}`],p=x[`client${cd(m)}`];const w=window.getComputedStyle(x);return m==="width"&&(p-=Number.parseFloat(w.paddingLeft)+Number.parseFloat(w.paddingRight),h+=Number.parseFloat(w.paddingLeft)),!1}),{[m]:`${p}px`,transform:`translate${cd(v)}(${h}px)`}},u=()=>o.value=l(),c=[],d=()=>{var h;c.forEach(m=>m.stop()),c.length=0;const p=(h=r.parent)==null?void 0:h.refs;if(p){for(const m in p)if(m.startsWith("tab-")){const v=p[m];v&&c.push(zi(v,u))}}};St(()=>t.tabs,async()=>{await cn(),u(),d()},{immediate:!0});const f=zi(s,()=>u());return Wr(()=>{c.forEach(h=>h.stop()),c.length=0,f.stop()}),e({ref:s,update:u}),(h,p)=>(W(),Se("div",{ref_key:"barRef",ref:s,class:J([S(a).e("active-bar"),S(a).is(S(i).props.tabPosition)]),style:Jt(o.value)},null,6))}});var VOe=$t(HOe,[["__file","tab-bar.vue"]]);const $Oe=Vt({panes:{type:tt(Array),default:()=>Ki([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),GOe={tabClick:(n,e,t)=>t instanceof Event,tabRemove:(n,e)=>e instanceof Event},b$="ElTabNav",WOe=Ne({name:b$,props:$Oe,emits:GOe,setup(n,{expose:e,emit:t}){const r=Yt(z4);r||Xa(b$,"<el-tabs><tab-nav /></el-tabs>");const i=kt("tabs"),a=bSe(),s=RSe(),o=ie(),l=ie(),u=ie(),c=ie(),d=ie(!1),f=ie(0),h=ie(!1),p=ie(!0),m=V(()=>["top","bottom"].includes(r.props.tabPosition)?"width":"height"),v=V(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${f.value}px)`})),g=()=>{if(!o.value)return;const T=o.value[`offset${cd(m.value)}`],C=f.value;if(!C)return;const E=C>T?C-T:0;f.value=E},y=()=>{if(!o.value||!l.value)return;const T=l.value[`offset${cd(m.value)}`],C=o.value[`offset${cd(m.value)}`],E=f.value;if(T-E<=C)return;const I=T-E>C*2?E+C:T-C;f.value=I},_=async()=>{const T=l.value;if(!d.value||!u.value||!o.value||!T)return;await cn();const C=u.value.querySelector(".is-active");if(!C)return;const E=o.value,I=["top","bottom"].includes(r.props.tabPosition),P=C.getBoundingClientRect(),L=E.getBoundingClientRect(),N=I?T.offsetWidth-L.width:T.offsetHeight-L.height,F=f.value;let k=F;I?(P.left<L.left&&(k=F-(L.left-P.left)),P.right>L.right&&(k=F+P.right-L.right)):(P.top<L.top&&(k=F-(L.top-P.top)),P.bottom>L.bottom&&(k=F+(P.bottom-L.bottom))),k=Math.max(k,0),f.value=Math.min(k,N)},b=()=>{var T;if(!l.value||!o.value)return;n.stretch&&((T=c.value)==null||T.update());const C=l.value[`offset${cd(m.value)}`],E=o.value[`offset${cd(m.value)}`],I=f.value;E<C?(d.value=d.value||{},d.value.prev=I,d.value.next=I+E<C,C-I<E&&(f.value=C-E)):(d.value=!1,I>0&&(f.value=0))},x=T=>{let C=0;switch(T.code){case jt.left:case jt.up:C=-1;break;case jt.right:case jt.down:C=1;break;default:return}const E=Array.from(T.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let P=E.indexOf(T.target)+C;P<0?P=E.length-1:P>=E.length&&(P=0),E[P].focus({preventScroll:!0}),E[P].click(),w()},w=()=>{p.value&&(h.value=!0)},A=()=>h.value=!1;return St(a,T=>{T==="hidden"?p.value=!1:T==="visible"&&setTimeout(()=>p.value=!0,50)}),St(s,T=>{T?setTimeout(()=>p.value=!0,50):p.value=!1}),zi(u,b),zn(()=>setTimeout(()=>_(),0)),Ju(()=>b()),e({scrollToActiveTab:_,removeFocus:A}),()=>{const T=d.value?[be("span",{class:[i.e("nav-prev"),i.is("disabled",!d.value.prev)],onClick:g},[be(tn,null,{default:()=>[be(Up,null,null)]})]),be("span",{class:[i.e("nav-next"),i.is("disabled",!d.value.next)],onClick:y},[be(tn,null,{default:()=>[be(jo,null,null)]})])]:null,C=n.panes.map((E,I)=>{var P,L,N,F;const k=E.uid,H=E.props.disabled,U=(L=(P=E.props.name)!=null?P:E.index)!=null?L:`${I}`,B=!H&&(E.isClosable||n.editable);E.index=`${I}`;const $=B?be(tn,{class:"is-icon-close",onClick:ne=>t("tabRemove",E,ne)},{default:()=>[be(Fc,null,null)]}):null,ee=((F=(N=E.slots).label)==null?void 0:F.call(N))||E.props.label,re=!H&&E.active?0:-1;return be("div",{ref:`tab-${k}`,class:[i.e("item"),i.is(r.props.tabPosition),i.is("active",E.active),i.is("disabled",H),i.is("closable",B),i.is("focus",h.value)],id:`tab-${U}`,key:`tab-${k}`,"aria-controls":`pane-${U}`,role:"tab","aria-selected":E.active,tabindex:re,onFocus:()=>w(),onBlur:()=>A(),onClick:ne=>{A(),t("tabClick",E,U,ne)},onKeydown:ne=>{B&&(ne.code===jt.delete||ne.code===jt.backspace)&&t("tabRemove",E,ne)}},[ee,$])});return be("div",{ref:u,class:[i.e("nav-wrap"),i.is("scrollable",!!d.value),i.is(r.props.tabPosition)]},[T,be("div",{class:i.e("nav-scroll"),ref:o},[be("div",{class:[i.e("nav"),i.is(r.props.tabPosition),i.is("stretch",n.stretch&&["top","bottom"].includes(r.props.tabPosition))],ref:l,style:v.value,role:"tablist",onKeydown:x},[n.type?null:be(VOe,{ref:c,tabs:[...n.panes]},null),C])])])}}}),qOe=Vt({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:tt(Function),default:()=>!0},stretch:Boolean}),YD=n=>ln(n)||_n(n),jOe={[jn]:n=>YD(n),tabClick:(n,e)=>e instanceof Event,tabChange:n=>YD(n),edit:(n,e)=>["remove","add"].includes(e),tabRemove:n=>YD(n),tabAdd:()=>!0},KOe=Ne({name:"ElTabs",props:qOe,emits:jOe,setup(n,{emit:e,slots:t,expose:r}){var i;const a=kt("tabs"),s=V(()=>["left","right"].includes(n.tabPosition)),{children:o,addChild:l,removeChild:u}=lB(tr(),"ElTabPane"),c=ie(),d=ie((i=n.modelValue)!=null?i:"0"),f=async(g,y=!1)=>{var _,b,x;if(!(d.value===g||ti(g)))try{await((_=n.beforeLeave)==null?void 0:_.call(n,g,d.value))!==!1&&(d.value=g,y&&(e(jn,g),e("tabChange",g)),(x=(b=c.value)==null?void 0:b.removeFocus)==null||x.call(b))}catch{}},h=(g,y,_)=>{g.props.disabled||(f(y,!0),e("tabClick",g,_))},p=(g,y)=>{g.props.disabled||ti(g.props.name)||(y.stopPropagation(),e("edit",g.props.name,"remove"),e("tabRemove",g.props.name))},m=()=>{e("edit",void 0,"add"),e("tabAdd")};St(()=>n.modelValue,g=>f(g)),St(d,async()=>{var g;await cn(),(g=c.value)==null||g.scrollToActiveTab()}),pr(z4,{props:n,currentName:d,registerPane:g=>{o.value.push(g)},sortPane:l,unregisterPane:u}),r({currentName:d});const v=({render:g})=>g();return()=>{const g=t["add-icon"],y=n.editable||n.addable?be("div",{class:[a.e("new-tab"),s.value&&a.e("new-tab-vertical")],tabindex:"0",onClick:m,onKeydown:x=>{[jt.enter,jt.numpadEnter].includes(x.code)&&m()}},[g?at(t,"add-icon"):be(tn,{class:a.is("icon-plus")},{default:()=>[be(Cee,null,null)]})]):null,_=be("div",{class:[a.e("header"),s.value&&a.e("header-vertical"),a.is(n.tabPosition)]},[be(v,{render:()=>{const x=o.value.some(w=>w.slots.label);return be(WOe,{ref:c,currentName:d.value,editable:n.editable,type:n.type,panes:o.value,stretch:n.stretch,onTabClick:h,onTabRemove:p},{$stable:!x})}},null),y]),b=be("div",{class:a.e("content")},[at(t,"default")]);return be("div",{class:[a.b(),a.m(n.tabPosition),{[a.m("card")]:n.type==="card",[a.m("border-card")]:n.type==="border-card"}]},[b,_])}}});var XOe=KOe;const YOe=Vt({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Dre="ElTabPane",QOe=Ne({name:Dre}),ZOe=Ne({...QOe,props:YOe,setup(n){const e=n,t=tr(),r=Oa(),i=Yt(z4);i||Xa(Dre,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const a=kt("tab-pane"),s=ie(),o=V(()=>e.closable||i.props.closable),l=$L(()=>{var h;return i.currentName.value===((h=e.name)!=null?h:s.value)}),u=ie(l.value),c=V(()=>{var h;return(h=e.name)!=null?h:s.value}),d=$L(()=>!e.lazy||u.value||l.value);St(l,h=>{h&&(u.value=!0)});const f=$r({uid:t.uid,slots:r,props:e,paneName:c,active:l,index:s,isClosable:o});return i.registerPane(f),zn(()=>{i.sortPane(f)}),sm(()=>{i.unregisterPane(f.uid)}),(h,p)=>S(d)?Wn((W(),Se("div",{key:0,id:`pane-${S(c)}`,class:J(S(a).b()),role:"tabpanel","aria-hidden":!S(l),"aria-labelledby":`tab-${S(c)}`},[at(h.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Nr,S(l)]]):st("v-if",!0)}});var Pre=$t(ZOe,[["__file","tab-pane.vue"]]);const JOe=Bn(XOe,{TabPane:Pre}),e8e=Xi(Pre),t8e=Vt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Hd,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),n8e=Ne({name:"ElText"}),r8e=Ne({...n8e,props:t8e,setup(n){const e=n,t=Ca(),r=kt("text"),i=V(()=>[r.b(),r.m(e.type),r.m(t.value),r.is("truncated",e.truncated),r.is("line-clamp",!ti(e.lineClamp))]);return(a,s)=>(W(),pt(ir(a.tag),{class:J(S(i)),style:Jt({"-webkit-line-clamp":a.lineClamp})},{default:Oe(()=>[at(a.$slots,"default")]),_:3},8,["class","style"]))}});var i8e=$t(r8e,[["__file","text.vue"]]);const a8e=Bn(i8e),s8e=Vt({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:tt(String),default:"light"},clearable:{type:Boolean,default:!0},size:La,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:tt([String,Object]),default:()=>wee},clearIcon:{type:tt([String,Object]),default:()=>uh},...D_}),Af=n=>{const e=(n||"").split(":");if(e.length>=2){let t=Number.parseInt(e[0],10);const r=Number.parseInt(e[1],10),i=n.toUpperCase();return i.includes("AM")&&t===12?t=0:i.includes("PM")&&t!==12&&(t+=12),{hours:t,minutes:r}}return null},QD=(n,e)=>{const t=Af(n);if(!t)return-1;const r=Af(e);if(!r)return-1;const i=t.minutes+t.hours*60,a=r.minutes+r.hours*60;return i===a?0:i>a?1:-1},S$=n=>`${n}`.padStart(2,"0"),_y=n=>`${S$(n.hours)}:${S$(n.minutes)}`,o8e=(n,e)=>{const t=Af(n);if(!t)return"";const r=Af(e);if(!r)return"";const i={hours:t.hours,minutes:t.minutes};return i.minutes+=r.minutes,i.hours+=r.hours,i.hours+=Math.floor(i.minutes/60),i.minutes=i.minutes%60,_y(i)},l8e=Ne({name:"ElTimeSelect"}),u8e=Ne({...l8e,props:s8e,emits:["change","blur","focus","clear","update:modelValue"],setup(n,{expose:e}){const t=n;Rn.extend(fB);const{Option:r}=lv,i=kt("input"),a=ie(),s=Js(),{lang:o}=Ar(),l=V(()=>t.modelValue),u=V(()=>{const g=Af(t.start);return g?_y(g):null}),c=V(()=>{const g=Af(t.end);return g?_y(g):null}),d=V(()=>{const g=Af(t.step);return g?_y(g):null}),f=V(()=>{const g=Af(t.minTime||"");return g?_y(g):null}),h=V(()=>{const g=Af(t.maxTime||"");return g?_y(g):null}),p=V(()=>{const g=[];if(t.start&&t.end&&t.step){let y=u.value,_;for(;y&&c.value&&QD(y,c.value)<=0;)_=Rn(y,"HH:mm").locale(o.value).format(t.format),g.push({value:_,disabled:QD(y,f.value||"-1:-1")<=0||QD(y,h.value||"100:100")>=0}),y=o8e(y,d.value)}return g});return e({blur:()=>{var g,y;(y=(g=a.value)==null?void 0:g.blur)==null||y.call(g)},focus:()=>{var g,y;(y=(g=a.value)==null?void 0:g.focus)==null||y.call(g)}}),(g,y)=>(W(),pt(S(lv),{ref_key:"select",ref:a,"model-value":S(l),disabled:S(s),clearable:g.clearable,"clear-icon":g.clearIcon,size:g.size,effect:g.effect,placeholder:g.placeholder,"default-first-option":"",filterable:g.editable,"empty-values":g.emptyValues,"value-on-clear":g.valueOnClear,"onUpdate:modelValue":_=>g.$emit("update:modelValue",_),onChange:_=>g.$emit("change",_),onBlur:_=>g.$emit("blur",_),onFocus:_=>g.$emit("focus",_),onClear:()=>g.$emit("clear")},{prefix:Oe(()=>[g.prefixIcon?(W(),pt(S(tn),{key:0,class:J(S(i).e("prefix-icon"))},{default:Oe(()=>[(W(),pt(ir(g.prefixIcon)))]),_:1},8,["class"])):st("v-if",!0)]),default:Oe(()=>[(W(!0),Se(on,null,ur(S(p),_=>(W(),pt(S(r),{key:_.value,label:_.value,value:_.value,disabled:_.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var c8e=$t(u8e,[["__file","time-select.vue"]]);const d8e=Bn(c8e),f8e=Ne({name:"ElTimeline",setup(n,{slots:e}){const t=kt("timeline");return pr("timeline",e),()=>an("ul",{class:[t.b()]},[at(e,"default")])}}),h8e=Vt({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:li},hollow:Boolean}),p8e=Ne({name:"ElTimelineItem"}),m8e=Ne({...p8e,props:h8e,setup(n){const e=n,t=kt("timeline-item"),r=V(()=>[t.e("node"),t.em("node",e.size||""),t.em("node",e.type||""),t.is("hollow",e.hollow)]);return(i,a)=>(W(),Se("li",{class:J([S(t).b(),{[S(t).e("center")]:i.center}])},[Ce("div",{class:J(S(t).e("tail"))},null,2),i.$slots.dot?st("v-if",!0):(W(),Se("div",{key:0,class:J(S(r)),style:Jt({backgroundColor:i.color})},[i.icon?(W(),pt(S(tn),{key:0,class:J(S(t).e("icon"))},{default:Oe(()=>[(W(),pt(ir(i.icon)))]),_:1},8,["class"])):st("v-if",!0)],6)),i.$slots.dot?(W(),Se("div",{key:1,class:J(S(t).e("dot"))},[at(i.$slots,"dot")],2)):st("v-if",!0),Ce("div",{class:J(S(t).e("wrapper"))},[!i.hideTimestamp&&i.placement==="top"?(W(),Se("div",{key:0,class:J([S(t).e("timestamp"),S(t).is("top")])},Ft(i.timestamp),3)):st("v-if",!0),Ce("div",{class:J(S(t).e("content"))},[at(i.$slots,"default")],2),!i.hideTimestamp&&i.placement==="bottom"?(W(),Se("div",{key:1,class:J([S(t).e("timestamp"),S(t).is("bottom")])},Ft(i.timestamp),3)):st("v-if",!0)],2)],2))}});var Rre=$t(m8e,[["__file","timeline-item.vue"]]);const v8e=Bn(f8e,{TimelineItem:Rre}),g8e=Xi(Rre),kre=Vt({nowrap:Boolean});var Lre=(n=>(n.top="top",n.bottom="bottom",n.left="left",n.right="right",n))(Lre||{});const y8e=Object.values(Lre),VB=Vt({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:tt(Object),default:null}}),_8e=Vt({side:{type:tt(String),values:y8e,required:!0}}),b8e=["absolute","fixed"],S8e=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],$B=Vt({arrowPadding:{type:tt(Number),default:5},effect:{type:tt(String),default:"light"},contentClass:String,placement:{type:tt(String),values:S8e,default:"bottom"},reference:{type:tt(Object),default:null},offset:{type:Number,default:8},strategy:{type:tt(String),values:b8e,default:"absolute"},showArrow:Boolean,...ks(["ariaLabel"])}),GB=Vt({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:tt(Function)},"onUpdate:open":{type:tt(Function)}}),og={type:tt(Function)},WB=Vt({onBlur:og,onClick:og,onFocus:og,onMouseDown:og,onMouseEnter:og,onMouseLeave:og}),x8e=Vt({...GB,...VB,...WB,...$B,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:tt(Object),default:null},teleported:Boolean,to:{type:tt(String),default:"body"}}),H4=Symbol("tooltipV2"),Ore=Symbol("tooltipV2Content"),ZD="tooltip_v2.open",w8e=Ne({name:"ElTooltipV2Root"}),T8e=Ne({...w8e,props:GB,setup(n,{expose:e}){const t=n,r=ie(t.defaultOpen),i=ie(null),a=V({get:()=>av(t.open)?r.value:t.open,set:v=>{var g;r.value=v,(g=t["onUpdate:open"])==null||g.call(t,v)}}),s=V(()=>_n(t.delayDuration)&&t.delayDuration>0),{start:o,stop:l}=sv(()=>{a.value=!0},V(()=>t.delayDuration),{immediate:!1}),u=kt("tooltip-v2"),c=Ds(),d=()=>{l(),a.value=!0},f=()=>{S(s)?o():d()},h=d,p=()=>{l(),a.value=!1};return St(a,v=>{var g;v&&(document.dispatchEvent(new CustomEvent(ZD)),h()),(g=t.onOpenChange)==null||g.call(t,v)}),zn(()=>{document.addEventListener(ZD,p)}),Wr(()=>{l(),document.removeEventListener(ZD,p)}),pr(H4,{contentId:c,triggerRef:i,ns:u,onClose:p,onDelayOpen:f,onOpen:h}),e({onOpen:h,onClose:p}),(v,g)=>at(v.$slots,"default",{open:S(a)})}});var C8e=$t(T8e,[["__file","root.vue"]]);const A8e=Ne({name:"ElTooltipV2Arrow"}),E8e=Ne({...A8e,props:{...VB,..._8e},setup(n){const e=n,{ns:t}=Yt(H4),{arrowRef:r}=Yt(Ore),i=V(()=>{const{style:a,width:s,height:o}=e,l=t.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${s}px`,[`--${l}-tooltip-v2-arrow-height`]:`${o}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${s/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:s/2-1,...a||{}}});return(a,s)=>(W(),Se("span",{ref_key:"arrowRef",ref:r,style:Jt(S(i)),class:J(S(t).e("arrow"))},null,6))}});var x$=$t(E8e,[["__file","arrow.vue"]]);const N1=Math.min,W0=Math.max,xM=Math.round,LT=Math.floor,$p=n=>({x:n,y:n}),M8e={left:"right",right:"left",bottom:"top",top:"bottom"},I8e={start:"end",end:"start"};function L5(n,e,t){return W0(n,N1(e,t))}function Tw(n,e){return typeof n=="function"?n(e):n}function cv(n){return n.split("-")[0]}function Cw(n){return n.split("-")[1]}function Nre(n){return n==="x"?"y":"x"}function qB(n){return n==="y"?"height":"width"}function V4(n){return["top","bottom"].includes(cv(n))?"y":"x"}function jB(n){return Nre(V4(n))}function D8e(n,e,t){t===void 0&&(t=!1);const r=Cw(n),i=jB(n),a=qB(i);let s=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(s=wM(s)),[s,wM(s)]}function P8e(n){const e=wM(n);return[O5(n),e,O5(e)]}function O5(n){return n.replace(/start|end/g,e=>I8e[e])}function R8e(n,e,t){const r=["left","right"],i=["right","left"],a=["top","bottom"],s=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?a:s;default:return[]}}function k8e(n,e,t,r){const i=Cw(n);let a=R8e(cv(n),t==="start",r);return i&&(a=a.map(s=>s+"-"+i),e&&(a=a.concat(a.map(O5)))),a}function wM(n){return n.replace(/left|right|bottom|top/g,e=>M8e[e])}function L8e(n){return{top:0,right:0,bottom:0,left:0,...n}}function Bre(n){return typeof n!="number"?L8e(n):{top:n,right:n,bottom:n,left:n}}function TM(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function w$(n,e,t){let{reference:r,floating:i}=n;const a=V4(e),s=jB(e),o=qB(s),l=cv(e),u=a==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[o]/2-i[o]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Cw(e)){case"start":h[s]-=f*(t&&u?-1:1);break;case"end":h[s]+=f*(t&&u?-1:1);break}return h}const O8e=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:s}=t,o=a.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:n,floating:e,strategy:i}),{x:c,y:d}=w$(u,r,l),f=r,h={},p=0;for(let m=0;m<o.length;m++){const{name:v,fn:g}=o[m],{x:y,y:_,data:b,reset:x}=await g({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:s,elements:{reference:n,floating:e}});if(c=y??c,d=_??d,h={...h,[v]:{...h[v],...b}},x&&p<=50){p++,typeof x=="object"&&(x.placement&&(f=x.placement),x.rects&&(u=x.rects===!0?await s.getElementRects({reference:n,floating:e,strategy:i}):x.rects),{x:c,y:d}=w$(u,f,l)),m=-1;continue}}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function KB(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:s,elements:o,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Tw(e,n),p=Bre(h),v=o[f?d==="floating"?"reference":"floating":d],g=TM(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(v)))==null||t?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:u,rootBoundary:c,strategy:l})),y=d==="floating"?{...s.floating,x:r,y:i}:s.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),b=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},x=TM(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:_,strategy:l}):y);return{top:(g.top-x.top+p.top)/b.y,bottom:(x.bottom-g.bottom+p.bottom)/b.y,left:(g.left-x.left+p.left)/b.x,right:(x.right-g.right+p.right)/b.x}}const Fre=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:a,platform:s,elements:o}=e,{element:l,padding:u=0}=Tw(n,e)||{};if(l==null)return{};const c=Bre(u),d={x:t,y:r},f=jB(i),h=qB(f),p=await s.getDimensions(l),m=f==="y",v=m?"top":"left",g=m?"bottom":"right",y=m?"clientHeight":"clientWidth",_=a.reference[h]+a.reference[f]-d[f]-a.floating[h],b=d[f]-a.reference[f],x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let w=x?x[y]:0;(!w||!await(s.isElement==null?void 0:s.isElement(x)))&&(w=o.floating[y]||a.floating[h]);const A=_/2-b/2,T=w/2-p[h]/2-1,C=N1(c[v],T),E=N1(c[g],T),I=C,P=w-p[h]-E,L=w/2-p[h]/2+A,N=L5(I,L,P),k=Cw(i)!=null&&L!=N&&a.reference[h]/2-(L<I?C:E)-p[h]/2<0?L<I?I-L:P-L:0;return{[f]:d[f]-k,data:{[f]:N,centerOffset:L-N+k}}}}),N8e=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:r,middlewareData:i,rects:a,initialPlacement:s,platform:o,elements:l}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:p=!0,...m}=Tw(n,e),v=cv(r),g=cv(s)===s,y=await(o.isRTL==null?void 0:o.isRTL(l.floating)),_=d||(g||!p?[wM(s)]:P8e(s));!d&&h!=="none"&&_.push(...k8e(s,p,h,y));const b=[s,..._],x=await KB(e,m),w=[];let A=((t=i.flip)==null?void 0:t.overflows)||[];if(u&&w.push(x[v]),c){const I=D8e(r,a,y);w.push(x[I[0]],x[I[1]])}if(A=[...A,{placement:r,overflows:w}],!w.every(I=>I<=0)){var T,C;const I=(((T=i.flip)==null?void 0:T.index)||0)+1,P=b[I];if(P)return{data:{index:I,overflows:A},reset:{placement:P}};let L=(C=A.filter(N=>N.overflows[0]<=0).sort((N,F)=>N.overflows[1]-F.overflows[1])[0])==null?void 0:C.placement;if(!L)switch(f){case"bestFit":{var E;const N=(E=A.map(F=>[F.placement,F.overflows.filter(k=>k>0).reduce((k,H)=>k+H,0)]).sort((F,k)=>F[1]-k[1])[0])==null?void 0:E[0];N&&(L=N);break}case"initialPlacement":L=s;break}if(r!==L)return{reset:{placement:L}}}return{}}}};async function B8e(n,e){const{placement:t,platform:r,elements:i}=n,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=cv(t),o=Cw(t),l=V4(t)==="y",u=["left","top"].includes(s)?-1:1,c=a&&l?-1:1,d=Tw(e,n);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return o&&typeof p=="number"&&(h=o==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const Ure=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:r}=e,i=await B8e(e,n);return{x:t+i.x,y:r+i.y,data:i}}}},F8e=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:s=!1,limiter:o={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...l}=Tw(n,e),u={x:t,y:r},c=await KB(e,l),d=V4(cv(i)),f=Nre(d);let h=u[f],p=u[d];if(a){const v=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=h+c[v],_=h-c[g];h=L5(y,h,_)}if(s){const v=d==="y"?"top":"left",g=d==="y"?"bottom":"right",y=p+c[v],_=p-c[g];p=L5(y,p,_)}const m=o.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-t,y:m.y-r}}}}};function Gp(n){return zre(n)?(n.nodeName||"").toLowerCase():"#document"}function Jl(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function dh(n){var e;return(e=(zre(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function zre(n){return n instanceof Node||n instanceof Jl(n).Node}function jf(n){return n instanceof Element||n instanceof Jl(n).Element}function Ld(n){return n instanceof HTMLElement||n instanceof Jl(n).HTMLElement}function T$(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Jl(n).ShadowRoot}function Aw(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Yu(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function U8e(n){return["table","td","th"].includes(Gp(n))}function XB(n){const e=YB(),t=Yu(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function YB(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $4(n){return["html","body","#document"].includes(Gp(n))}function Yu(n){return Jl(n).getComputedStyle(n)}function G4(n){return jf(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function B1(n){if(Gp(n)==="html")return n;const e=n.assignedSlot||n.parentNode||T$(n)&&n.host||dh(n);return T$(e)?e.host:e}function Hre(n){const e=B1(n);return $4(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ld(e)&&Aw(e)?e:Hre(e)}function CM(n,e){var t;e===void 0&&(e=[]);const r=Hre(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),a=Jl(r);return i?e.concat(a,a.visualViewport||[],Aw(r)?r:[]):e.concat(r,CM(r))}function Vre(n){const e=Yu(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ld(n),a=i?n.offsetWidth:t,s=i?n.offsetHeight:r,o=xM(t)!==a||xM(r)!==s;return o&&(t=a,r=s),{width:t,height:r,$:o}}function QB(n){return jf(n)?n:n.contextElement}function r1(n){const e=QB(n);if(!Ld(e))return $p(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:a}=Vre(e);let s=(a?xM(t.width):t.width)/r,o=(a?xM(t.height):t.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const z8e=$p(0);function $re(n){const e=Jl(n);return!YB()||!e.visualViewport?z8e:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function H8e(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Jl(n)?!1:e}function dv(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=QB(n);let s=$p(1);e&&(r?jf(r)&&(s=r1(r)):s=r1(n));const o=H8e(a,t,r)?$re(a):$p(0);let l=(i.left+o.x)/s.x,u=(i.top+o.y)/s.y,c=i.width/s.x,d=i.height/s.y;if(a){const f=Jl(a),h=r&&jf(r)?Jl(r):r;let p=f.frameElement;for(;p&&r&&h!==f;){const m=r1(p),v=p.getBoundingClientRect(),g=Yu(p),y=v.left+(p.clientLeft+parseFloat(g.paddingLeft))*m.x,_=v.top+(p.clientTop+parseFloat(g.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,d*=m.y,l+=y,u+=_,p=Jl(p).frameElement}}return TM({width:c,height:d,x:l,y:u})}function V8e(n){let{rect:e,offsetParent:t,strategy:r}=n;const i=Ld(t),a=dh(t);if(t===a)return e;let s={scrollLeft:0,scrollTop:0},o=$p(1);const l=$p(0);if((i||!i&&r!=="fixed")&&((Gp(t)!=="body"||Aw(a))&&(s=G4(t)),Ld(t))){const u=dv(t);o=r1(t),l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-s.scrollLeft*o.x+l.x,y:e.y*o.y-s.scrollTop*o.y+l.y}}function $8e(n){return Array.from(n.getClientRects())}function Gre(n){return dv(dh(n)).left+G4(n).scrollLeft}function G8e(n){const e=dh(n),t=G4(n),r=n.ownerDocument.body,i=W0(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=W0(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-t.scrollLeft+Gre(n);const o=-t.scrollTop;return Yu(r).direction==="rtl"&&(s+=W0(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:s,y:o}}function W8e(n,e){const t=Jl(n),r=dh(n),i=t.visualViewport;let a=r.clientWidth,s=r.clientHeight,o=0,l=0;if(i){a=i.width,s=i.height;const u=YB();(!u||u&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:a,height:s,x:o,y:l}}function q8e(n,e){const t=dv(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,a=Ld(n)?r1(n):$p(1),s=n.clientWidth*a.x,o=n.clientHeight*a.y,l=i*a.x,u=r*a.y;return{width:s,height:o,x:l,y:u}}function C$(n,e,t){let r;if(e==="viewport")r=W8e(n,t);else if(e==="document")r=G8e(dh(n));else if(jf(e))r=q8e(e,t);else{const i=$re(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return TM(r)}function Wre(n,e){const t=B1(n);return t===e||!jf(t)||$4(t)?!1:Yu(t).position==="fixed"||Wre(t,e)}function j8e(n,e){const t=e.get(n);if(t)return t;let r=CM(n).filter(o=>jf(o)&&Gp(o)!=="body"),i=null;const a=Yu(n).position==="fixed";let s=a?B1(n):n;for(;jf(s)&&!$4(s);){const o=Yu(s),l=XB(s);!l&&o.position==="fixed"&&(i=null),(a?!l&&!i:!l&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Aw(s)&&!l&&Wre(n,s))?r=r.filter(c=>c!==s):i=o,s=B1(s)}return e.set(n,r),r}function K8e(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const s=[...t==="clippingAncestors"?j8e(e,this._c):[].concat(t),r],o=s[0],l=s.reduce((u,c)=>{const d=C$(e,c,i);return u.top=W0(d.top,u.top),u.right=N1(d.right,u.right),u.bottom=N1(d.bottom,u.bottom),u.left=W0(d.left,u.left),u},C$(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function X8e(n){return Vre(n)}function Y8e(n,e,t){const r=Ld(e),i=dh(e),a=t==="fixed",s=dv(n,!0,a,e);let o={scrollLeft:0,scrollTop:0};const l=$p(0);if(r||!r&&!a)if((Gp(e)!=="body"||Aw(i))&&(o=G4(e)),r){const u=dv(e,!0,a,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else i&&(l.x=Gre(i));return{x:s.left+o.scrollLeft-l.x,y:s.top+o.scrollTop-l.y,width:s.width,height:s.height}}function A$(n,e){return!Ld(n)||Yu(n).position==="fixed"?null:e?e(n):n.offsetParent}function Q8e(n){let e=B1(n);for(;Ld(e)&&!$4(e);){if(XB(e))return e;e=B1(e)}return null}function qre(n,e){const t=Jl(n);if(!Ld(n))return t;let r=A$(n,e);for(;r&&U8e(r)&&Yu(r).position==="static";)r=A$(r,e);return r&&(Gp(r)==="html"||Gp(r)==="body"&&Yu(r).position==="static"&&!XB(r))?t:r||Q8e(n)||t}const Z8e=async function(n){let{reference:e,floating:t,strategy:r}=n;const i=this.getOffsetParent||qre,a=this.getDimensions;return{reference:Y8e(e,await i(t),r),floating:{x:0,y:0,...await a(t)}}};function J8e(n){return Yu(n).direction==="rtl"}const eNe={convertOffsetParentRelativeRectToViewportRelativeRect:V8e,getDocumentElement:dh,getClippingRect:K8e,getOffsetParent:qre,getElementRects:Z8e,getClientRects:$8e,getDimensions:X8e,getScale:r1,isElement:jf,isRTL:J8e};function tNe(n,e){let t=null,r;const i=dh(n);function a(){clearTimeout(r),t&&t.disconnect(),t=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();const{left:u,top:c,width:d,height:f}=n.getBoundingClientRect();if(o||e(),!d||!f)return;const h=LT(c),p=LT(i.clientWidth-(u+d)),m=LT(i.clientHeight-(c+f)),v=LT(u),y={rootMargin:-h+"px "+-p+"px "+-m+"px "+-v+"px",threshold:W0(0,N1(1,l))||1};let _=!0;function b(x){const w=x[0].intersectionRatio;if(w!==l){if(!_)return s();w?s(!1,w):r=setTimeout(()=>{s(!1,1e-7)},100)}_=!1}try{t=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch{t=new IntersectionObserver(b,y)}t.observe(n)}return s(!0),a}function nNe(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=QB(n),c=i||a?[...u?CM(u):[],...CM(e)]:[];c.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),a&&g.addEventListener("resize",t)});const d=u&&o?tNe(u,t):null;let f=-1,h=null;s&&(h=new ResizeObserver(g=>{let[y]=g;y&&y.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{h&&h.observe(e)})),t()}),u&&!l&&h.observe(u),h.observe(e));let p,m=l?dv(n):null;l&&v();function v(){const g=dv(n);m&&(g.x!==m.x||g.y!==m.y||g.width!==m.width||g.height!==m.height)&&t(),m=g,p=requestAnimationFrame(v)}return t(),()=>{c.forEach(g=>{i&&g.removeEventListener("scroll",t),a&&g.removeEventListener("resize",t)}),d&&d(),h&&h.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const jre=(n,e,t)=>{const r=new Map,i={platform:eNe,...t},a={...i.platform,_c:r};return O8e(n,e,{...i,platform:a})},rNe=Vt({style:{type:tt([String,Object,Array]),default:()=>({})}}),iNe=Ne({name:"ElVisuallyHidden"}),aNe=Ne({...iNe,props:rNe,setup(n){const e=n,t=V(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(r,i)=>(W(),Se("span",lr(r.$attrs,{style:S(t)}),[at(r.$slots,"default")],16))}});var sNe=$t(aNe,[["__file","visual-hidden.vue"]]);Vt({});const oNe=n=>{if(!Cr)return;if(!n)return n;const e=Wo(n);return e||(xi(n)?e:n)},lNe=({middleware:n,placement:e,strategy:t})=>{const r=ie(),i=ie(),a=ie(),s=ie(),o=ie({}),l={x:a,y:s,placement:e,strategy:t,middlewareData:o},u=async()=>{if(!Cr)return;const c=oNe(r),d=Wo(i);if(!c||!d)return;const f=await jre(c,d,{placement:S(e),strategy:S(t),middleware:S(n)});A1(l).forEach(h=>{l[h].value=f[h]})};return zn(()=>{vs(()=>{u()})}),{...l,update:u,referenceRef:r,contentRef:i}},uNe=({arrowRef:n,padding:e})=>({name:"arrow",options:{element:n,padding:e},fn(t){const r=S(n);return r?Fre({element:r,padding:e}).fn(t):{}}}),cNe=Ne({name:"ElTooltipV2Content"}),dNe=Ne({...cNe,props:{...$B,...kre},setup(n){const e=n,{triggerRef:t,contentId:r}=Yt(H4),i=ie(e.placement),a=ie(e.strategy),s=ie(null),{referenceRef:o,contentRef:l,middlewareData:u,x:c,y:d,update:f}=lNe({placement:i,strategy:a,middleware:V(()=>{const _=[Ure(e.offset)];return e.showArrow&&_.push(uNe({arrowRef:s})),_})}),h=I_().nextZIndex(),p=kt("tooltip-v2"),m=V(()=>i.value.split("-")[0]),v=V(()=>({position:S(a),top:`${S(d)||0}px`,left:`${S(c)||0}px`,zIndex:h})),g=V(()=>{if(!e.showArrow)return{};const{arrow:_}=S(u);return{[`--${p.namespace.value}-tooltip-v2-arrow-x`]:`${_==null?void 0:_.x}px`||"",[`--${p.namespace.value}-tooltip-v2-arrow-y`]:`${_==null?void 0:_.y}px`||""}}),y=V(()=>[p.e("content"),p.is("dark",e.effect==="dark"),p.is(S(a)),e.contentClass]);return St(s,()=>f()),St(()=>e.placement,_=>i.value=_),zn(()=>{St(()=>e.reference||t.value,_=>{o.value=_||void 0},{immediate:!0})}),pr(Ore,{arrowRef:s}),(_,b)=>(W(),Se("div",{ref_key:"contentRef",ref:l,style:Jt(S(v)),"data-tooltip-v2-root":""},[_.nowrap?st("v-if",!0):(W(),Se("div",{key:0,"data-side":S(m),class:J(S(y))},[at(_.$slots,"default",{contentStyle:S(v),contentClass:S(y)}),be(S(sNe),{id:S(r),role:"tooltip"},{default:Oe(()=>[_.ariaLabel?(W(),Se(on,{key:0},[Xn(Ft(_.ariaLabel),1)],64)):at(_.$slots,"default",{key:1})]),_:3},8,["id"]),at(_.$slots,"arrow",{style:Jt(S(g)),side:S(m)})],10,["data-side"]))],4))}});var E$=$t(dNe,[["__file","content.vue"]]);const fNe=Vt({setRef:{type:tt(Function),required:!0},onlyChild:Boolean});var hNe=Ne({props:fNe,setup(n,{slots:e}){const t=ie(),r=N4(t,i=>{i?n.setRef(i.nextElementSibling):n.setRef(null)});return()=>{var i;const[a]=((i=e.default)==null?void 0:i.call(e))||[],s=n.onlyChild?zAe(a.children):a.children;return be(on,{ref:r},[s])}}});const pNe=Ne({name:"ElTooltipV2Trigger"}),mNe=Ne({...pNe,props:{...kre,...WB},setup(n){const e=n,{onClose:t,onOpen:r,onDelayOpen:i,triggerRef:a,contentId:s}=Yt(H4);let o=!1;const l=y=>{a.value=y},u=()=>{o=!1},c=ra(e.onMouseEnter,i),d=ra(e.onMouseLeave,t),f=ra(e.onMouseDown,()=>{t(),o=!0,document.addEventListener("mouseup",u,{once:!0})}),h=ra(e.onFocus,()=>{o||r()}),p=ra(e.onBlur,t),m=ra(e.onClick,y=>{y.detail===0&&t()}),v={blur:p,click:m,focus:h,mousedown:f,mouseenter:c,mouseleave:d},g=(y,_,b)=>{y&&Object.entries(_).forEach(([x,w])=>{y[b](x,w)})};return St(a,(y,_)=>{g(y,v,"addEventListener"),g(_,v,"removeEventListener"),y&&y.setAttribute("aria-describedby",s.value)}),Wr(()=>{g(a.value,v,"removeEventListener"),document.removeEventListener("mouseup",u)}),(y,_)=>y.nowrap?(W(),pt(S(hNe),{key:0,"set-ref":l,"only-child":""},{default:Oe(()=>[at(y.$slots,"default")]),_:3})):(W(),Se("button",lr({key:1,ref_key:"triggerRef",ref:a},y.$attrs),[at(y.$slots,"default")],16))}});var vNe=$t(mNe,[["__file","trigger.vue"]]);const gNe=Ne({name:"ElTooltipV2"}),yNe=Ne({...gNe,props:x8e,setup(n){const t=ja(n),r=$r(Mc(t,Object.keys(VB))),i=$r(Mc(t,Object.keys($B))),a=$r(Mc(t,Object.keys(GB))),s=$r(Mc(t,Object.keys(WB)));return(o,l)=>(W(),pt(C8e,Ac(Op(a)),{default:Oe(({open:u})=>[be(vNe,lr(s,{nowrap:""}),{default:Oe(()=>[at(o.$slots,"trigger")]),_:3},16),be(S(R_),{to:o.to,disabled:!o.teleported},{default:Oe(()=>[o.fullTransition?(W(),pt(Ka,Ac(lr({key:0},o.transitionProps)),{default:Oe(()=>[o.alwaysOn||u?(W(),pt(E$,Ac(lr({key:0},i)),{arrow:Oe(({style:c,side:d})=>[o.showArrow?(W(),pt(x$,lr({key:0},r,{style:c,side:d}),null,16,["style","side"])):st("v-if",!0)]),default:Oe(()=>[at(o.$slots,"default")]),_:3},16)):st("v-if",!0)]),_:2},1040)):(W(),Se(on,{key:1},[o.alwaysOn||u?(W(),pt(E$,Ac(lr({key:0},i)),{arrow:Oe(({style:c,side:d})=>[o.showArrow?(W(),pt(x$,lr({key:0},r,{style:c,side:d}),null,16,["style","side"])):st("v-if",!0)]),default:Oe(()=>[at(o.$slots,"default")]),_:3},16)):st("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var _Ne=$t(yNe,[["__file","tooltip.vue"]]);const bNe=Bn(_Ne),Kre="left-check-change",Xre="right-check-change",by=Vt({data:{type:tt(Array),default:()=>[]},titles:{type:tt(Array),default:()=>[]},buttonTexts:{type:tt(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:tt(Function)},leftDefaultChecked:{type:tt(Array),default:()=>[]},rightDefaultChecked:{type:tt(Array),default:()=>[]},renderContent:{type:tt(Function)},modelValue:{type:tt(Array),default:()=>[]},format:{type:tt(Object),default:()=>({})},filterable:Boolean,props:{type:tt(Object),default:()=>Ki({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),N5=(n,e)=>[n,e].every(Ut)||Ut(n)&&es(e),SNe={[si]:(n,e,t)=>[n,t].every(Ut)&&["left","right"].includes(e),[jn]:n=>Ut(n),[Kre]:N5,[Xre]:N5},B5="checked-change",xNe=Vt({data:by.data,optionRender:{type:tt(Function)},placeholder:String,title:String,filterable:Boolean,format:by.format,filterMethod:by.filterMethod,defaultChecked:by.leftDefaultChecked,props:by.props}),wNe={[B5]:N5},Ew=n=>{const e={label:"label",key:"key",disabled:"disabled"};return V(()=>({...e,...n.props}))},TNe=(n,e,t)=>{const r=Ew(n),i=V(()=>n.data.filter(c=>hn(n.filterMethod)?n.filterMethod(e.query,c):String(c[r.value.label]||c[r.value.key]).toLowerCase().includes(e.query.toLowerCase()))),a=V(()=>i.value.filter(c=>!c[r.value.disabled])),s=V(()=>{const c=e.checked.length,d=n.data.length,{noChecked:f,hasChecked:h}=n.format;return f&&h?c>0?h.replace(/\${checked}/g,c.toString()).replace(/\${total}/g,d.toString()):f.replace(/\${total}/g,d.toString()):`${c}/${d}`}),o=V(()=>{const c=e.checked.length;return c>0&&c<a.value.length}),l=()=>{const c=a.value.map(d=>d[r.value.key]);e.allChecked=c.length>0&&c.every(d=>e.checked.includes(d))},u=c=>{e.checked=c?a.value.map(d=>d[r.value.key]):[]};return St(()=>e.checked,(c,d)=>{if(l(),e.checkChangeByUser){const f=c.concat(d).filter(h=>!c.includes(h)||!d.includes(h));t(B5,c,f)}else t(B5,c),e.checkChangeByUser=!0}),St(a,()=>{l()}),St(()=>n.data,()=>{const c=[],d=i.value.map(f=>f[r.value.key]);e.checked.forEach(f=>{d.includes(f)&&c.push(f)}),e.checkChangeByUser=!1,e.checked=c}),St(()=>n.defaultChecked,(c,d)=>{if(d&&c.length===d.length&&c.every(p=>d.includes(p)))return;const f=[],h=a.value.map(p=>p[r.value.key]);c.forEach(p=>{h.includes(p)&&f.push(p)}),e.checkChangeByUser=!1,e.checked=f},{immediate:!0}),{filteredData:i,checkableData:a,checkedSummary:s,isIndeterminate:o,updateAllChecked:l,handleAllCheckedChange:u}},CNe=Ne({name:"ElTransferPanel"}),ANe=Ne({...CNe,props:xNe,emits:wNe,setup(n,{expose:e,emit:t}){const r=n,i=Oa(),a=({option:_})=>_,{t:s}=Ar(),o=kt("transfer"),l=$r({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),u=Ew(r),{filteredData:c,checkedSummary:d,isIndeterminate:f,handleAllCheckedChange:h}=TNe(r,l,t),p=V(()=>!ql(l.query)&&ql(c.value)),m=V(()=>!ql(i.default()[0].children)),{checked:v,allChecked:g,query:y}=ja(l);return e({query:y}),(_,b)=>(W(),Se("div",{class:J(S(o).b("panel"))},[Ce("p",{class:J(S(o).be("panel","header"))},[be(S(Xu),{modelValue:S(g),"onUpdate:modelValue":x=>xi(g)?g.value=x:null,indeterminate:S(f),"validate-event":!1,onChange:S(h)},{default:Oe(()=>[Xn(Ft(_.title)+" ",1),Ce("span",null,Ft(S(d)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),Ce("div",{class:J([S(o).be("panel","body"),S(o).is("with-footer",S(m))])},[_.filterable?(W(),pt(S(_o),{key:0,modelValue:S(y),"onUpdate:modelValue":x=>xi(y)?y.value=x:null,class:J(S(o).be("panel","filter")),size:"default",placeholder:_.placeholder,"prefix-icon":S(Jxe),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):st("v-if",!0),Wn(be(S(wte),{modelValue:S(v),"onUpdate:modelValue":x=>xi(v)?v.value=x:null,"validate-event":!1,class:J([S(o).is("filterable",_.filterable),S(o).be("panel","list")])},{default:Oe(()=>[(W(!0),Se(on,null,ur(S(c),x=>(W(),pt(S(Xu),{key:x[S(u).key],class:J(S(o).be("panel","item")),value:x[S(u).key],disabled:x[S(u).disabled],"validate-event":!1},{default:Oe(()=>{var w;return[be(a,{option:(w=_.optionRender)==null?void 0:w.call(_,x)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[Nr,!S(p)&&!S(ql)(_.data)]]),Wn(Ce("div",{class:J(S(o).be("panel","empty"))},[at(_.$slots,"empty",{},()=>[Xn(Ft(S(p)?S(s)("el.transfer.noMatch"):S(s)("el.transfer.noData")),1)])],2),[[Nr,S(p)||S(ql)(_.data)]])],2),S(m)?(W(),Se("p",{key:0,class:J(S(o).be("panel","footer"))},[at(_.$slots,"default")],2)):st("v-if",!0)],2))}});var M$=$t(ANe,[["__file","transfer-panel.vue"]]);const ENe=n=>{const e=Ew(n),t=V(()=>n.data.reduce((a,s)=>(a[s[e.value.key]]=s)&&a,{})),r=V(()=>n.data.filter(a=>!n.modelValue.includes(a[e.value.key]))),i=V(()=>n.targetOrder==="original"?n.data.filter(a=>n.modelValue.includes(a[e.value.key])):n.modelValue.reduce((a,s)=>{const o=t.value[s];return o&&a.push(o),a},[]));return{sourceData:r,targetData:i}},MNe=(n,e,t)=>{const r=Ew(n),i=(o,l,u)=>{t(jn,o),t(si,o,l,u)};return{addToLeft:()=>{const o=n.modelValue.slice();e.rightChecked.forEach(l=>{const u=o.indexOf(l);u>-1&&o.splice(u,1)}),i(o,"left",e.rightChecked)},addToRight:()=>{let o=n.modelValue.slice();const l=n.data.filter(u=>{const c=u[r.value.key];return e.leftChecked.includes(c)&&!n.modelValue.includes(c)}).map(u=>u[r.value.key]);o=n.targetOrder==="unshift"?l.concat(o):o.concat(l),n.targetOrder==="original"&&(o=n.data.filter(u=>o.includes(u[r.value.key])).map(u=>u[r.value.key])),i(o,"right",e.leftChecked)}}},INe=(n,e)=>({onSourceCheckedChange:(i,a)=>{n.leftChecked=i,a&&e(Kre,i,a)},onTargetCheckedChange:(i,a)=>{n.rightChecked=i,a&&e(Xre,i,a)}}),DNe=Ne({name:"ElTransfer"}),PNe=Ne({...DNe,props:by,emits:SNe,setup(n,{expose:e,emit:t}){const r=n,i=Oa(),{t:a}=Ar(),s=kt("transfer"),{formItem:o}=Zs(),l=$r({leftChecked:[],rightChecked:[]}),u=Ew(r),{sourceData:c,targetData:d}=ENe(r),{onSourceCheckedChange:f,onTargetCheckedChange:h}=INe(l,t),{addToLeft:p,addToRight:m}=MNe(r,l,t),v=ie(),g=ie(),y=T=>{switch(T){case"left":v.value.query="";break;case"right":g.value.query="";break}},_=V(()=>r.buttonTexts.length===2),b=V(()=>r.titles[0]||a("el.transfer.titles.0")),x=V(()=>r.titles[1]||a("el.transfer.titles.1")),w=V(()=>r.filterPlaceholder||a("el.transfer.filterPlaceholder"));St(()=>r.modelValue,()=>{var T;r.validateEvent&&((T=o==null?void 0:o.validate)==null||T.call(o,"change").catch(C=>void 0))});const A=V(()=>T=>{var C;if(r.renderContent)return r.renderContent(an,T);const E=(((C=i.default)==null?void 0:C.call(i,{option:T}))||[]).filter(I=>I.type!==So);return E.length?E:an("span",T[u.value.label]||T[u.value.key])});return e({clearQuery:y,leftPanel:v,rightPanel:g}),(T,C)=>(W(),Se("div",{class:J(S(s).b())},[be(M$,{ref_key:"leftPanel",ref:v,data:S(c),"option-render":S(A),placeholder:S(w),title:S(b),filterable:T.filterable,format:T.format,"filter-method":T.filterMethod,"default-checked":T.leftDefaultChecked,props:r.props,onCheckedChange:S(f)},{empty:Oe(()=>[at(T.$slots,"left-empty")]),default:Oe(()=>[at(T.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),Ce("div",{class:J(S(s).e("buttons"))},[be(S(gs),{type:"primary",class:J([S(s).e("button"),S(s).is("with-texts",S(_))]),disabled:S(ql)(l.rightChecked),onClick:S(p)},{default:Oe(()=>[be(S(tn),null,{default:Oe(()=>[be(S(Up))]),_:1}),S(ti)(T.buttonTexts[0])?st("v-if",!0):(W(),Se("span",{key:0},Ft(T.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),be(S(gs),{type:"primary",class:J([S(s).e("button"),S(s).is("with-texts",S(_))]),disabled:S(ql)(l.leftChecked),onClick:S(m)},{default:Oe(()=>[S(ti)(T.buttonTexts[1])?st("v-if",!0):(W(),Se("span",{key:0},Ft(T.buttonTexts[1]),1)),be(S(tn),null,{default:Oe(()=>[be(S(jo))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),be(M$,{ref_key:"rightPanel",ref:g,data:S(d),"option-render":S(A),placeholder:S(w),filterable:T.filterable,format:T.format,"filter-method":T.filterMethod,title:S(x),"default-checked":T.rightDefaultChecked,props:r.props,onCheckedChange:S(h)},{empty:Oe(()=>[at(T.$slots,"right-empty")]),default:Oe(()=>[at(T.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var RNe=$t(PNe,[["__file","transfer.vue"]]);const kNe=Bn(RNe),i1="$treeNodeId",I$=function(n,e){!e||e[i1]||Object.defineProperty(e,i1,{value:n.id,enumerable:!1,configurable:!1,writable:!1})},ZB=function(n,e){return n?e[n]:e[i1]},F5=(n,e,t)=>{const r=n.value.currentNode;t();const i=n.value.currentNode;r!==i&&e("current-change",i?i.data:null,i)},U5=n=>{let e=!0,t=!0,r=!0;for(let i=0,a=n.length;i<a;i++){const s=n[i];(s.checked!==!0||s.indeterminate)&&(e=!1,s.disabled||(r=!1)),(s.checked!==!1||s.indeterminate)&&(t=!1)}return{all:e,none:t,allWithoutDisable:r,half:!e&&!t}},ES=function(n){if(n.childNodes.length===0||n.loading)return;const{all:e,none:t,half:r}=U5(n.childNodes);e?(n.checked=!0,n.indeterminate=!1):r?(n.checked=!1,n.indeterminate=!0):t&&(n.checked=!1,n.indeterminate=!1);const i=n.parent;!i||i.level===0||n.store.checkStrictly||ES(i)},OT=function(n,e){const t=n.store.props,r=n.data||{},i=t[e];if(hn(i))return i(r,n);if(ln(i))return r[i];if(ti(i)){const a=r[e];return a===void 0?"":a}};let LNe=0,z5=class cE{constructor(e){this.id=LNe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)Ir(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&typeof t.isLeaf<"u"){const a=OT(this,"isLeaf");mi(a)&&(this.isLeafByUser=a)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&!this.isLeafByUser&&this.expand(),Ut(this.data)||I$(this,this.data),!this.data)return;const r=e.defaultExpandedKeys,i=e.key;i&&r&&r.includes(this.key)&&this.expand(null,e.autoExpandParent),i&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Ut(e)||I$(this,e),this.data=e,this.childNodes=[];let t;this.level===0&&Ut(this.data)?t=this.data:t=OT(this,"children")||[];for(let r=0,i=t.length;r<i;r++)this.insertChild({data:t[r]})}get label(){return OT(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return OT(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some(r=>r===e||t&&r.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,r){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof cE)){if(!r){const i=this.getChildren(!0);i.includes(e.data)||(ti(t)||t<0?i.push(e.data):i.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=$r(new cE(e)),e instanceof cE&&e.initialize()}e.level=this.level+1,ti(t)||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let r;t&&(r=this.childNodes.indexOf(t)),this.insertChild(e,r)}insertAfter(e,t){let r;t&&(r=this.childNodes.indexOf(t),r!==-1&&(r+=1)),this.insertChild(e,r)}removeChild(e){const t=this.getChildren()||[],r=t.indexOf(e.data);r>-1&&t.splice(r,1);const i=this.childNodes.indexOf(e);i>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(i,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let r=0;r<this.childNodes.length;r++)if(this.childNodes[r].data===e){t=this.childNodes[r];break}t&&this.removeChild(t)}expand(e,t){const r=()=>{if(t){let i=this.parent;for(;i.level>0;)i.expanded=!0,i=i.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(i=>{i.canFocus=!0})};this.shouldLoadData()?this.loadData(i=>{Ut(i)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||ES(this),r())}):r()}doCreateChildren(e,t={}){e.forEach(r=>{this.insertChild(Object.assign({data:r},t),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,t,r,i){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:s,allWithoutDisable:o}=U5(this.childNodes);!this.isLeaf&&!s&&o&&(this.checked=!1,e=!1);const l=()=>{if(t){const u=this.childNodes;for(let f=0,h=u.length;f<h;f++){const p=u[f];i=i||e!==!1;const m=p.disabled?p.checked:i;p.setChecked(m,t,!0,i)}const{half:c,all:d}=U5(u);d||(this.checked=d,this.indeterminate=c)}};if(this.shouldLoadData()){this.loadData(()=>{l(),ES(this)},{checked:e!==!1});return}else l()}const a=this.parent;!a||a.level===0||r||ES(a)}getChildren(e=!1){if(this.level===0)return this.data;const t=this.data;if(!t)return null;const r=this.store.props;let i="children";return r&&(i=r.children||"children"),t[i]===void 0&&(t[i]=null),e&&!t[i]&&(t[i]=[]),t[i]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map(a=>a.data),r={},i=[];e.forEach((a,s)=>{const o=a[i1];!!o&&t.findIndex(u=>u[i1]===o)>=0?r[o]={index:s,data:a}:i.push({index:s,data:a})}),this.store.lazy||t.forEach(a=>{r[a[i1]]||this.removeChildByData(a)}),i.forEach(({index:a,data:s})=>{this.insertChild({data:s},a)}),this.updateLeafState()}loadData(e,t={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(t).length)){this.loading=!0;const r=a=>{this.childNodes=[],this.doCreateChildren(a,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,a)},i=()=>{this.loading=!1};this.store.load(this,r,i)}else e&&e.call(this)}eachNode(e){const t=[this];for(;t.length;){const r=t.shift();t.unshift(...r.childNodes),e(r)}}reInitChecked(){this.store.checkStrictly||ES(this)}};class ONe{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)Ir(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new z5({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,t=>{this.root.doCreateChildren(t),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,r=this.lazy,i=function(a){const s=a.root?a.root.childNodes:a.childNodes;if(s.forEach(o=>{o.visible=t.call(o,e,o.data,o),i(o)}),!a.visible&&s.length){let o=!0;o=!s.some(l=>l.visible),a.root?a.root.visible=o===!1:a.visible=o===!1}e&&a.visible&&!a.isLeaf&&(!r||a.loaded)&&a.expand()};i(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof z5)return e;const t=er(e)?ZB(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const r=this.getNode(t);r.parent.insertBefore({data:e},r)}insertAfter(e,t){const r=this.getNode(t);r.parent.insertAfter({data:e},r)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const r=av(t)?this.root:this.getNode(t);r&&r.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach(r=>{const i=t[r];i&&i.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;!e||!e.data||(t?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(r=>{this.deregisterNode(r)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const r=[],i=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(o=>{(o.checked||t&&o.indeterminate)&&(!e||e&&o.isLeaf)&&r.push(o.data),i(o)})};return i(this),r}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(t=>(t||{})[this.key])}getHalfCheckedNodes(){const e=[],t=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(a=>{a.indeterminate&&e.push(a.data),t(a)})};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],t=this.nodesMap;for(const r in t)Ir(t,r)&&e.push(t[r]);return e}updateChildren(e,t){const r=this.nodesMap[e];if(!r)return;const i=r.childNodes;for(let a=i.length-1;a>=0;a--){const s=i[a];this.remove(s.data)}for(let a=0,s=t.length;a<s;a++){const o=t[a];this.append(o,r.data)}}_setCheckedKeys(e,t=!1,r){const i=this._getAllNodes().sort((l,u)=>l.level-u.level),a=Object.create(null),s=Object.keys(r);i.forEach(l=>l.setChecked(!1,!1));const o=l=>{l.childNodes.forEach(u=>{var c;a[u.data[e]]=!0,(c=u.childNodes)!=null&&c.length&&o(u)})};for(let l=0,u=i.length;l<u;l++){const c=i[l],d=c.data[e].toString();if(!s.includes(d)){c.checked&&!a[d]&&c.setChecked(!1,!1);continue}if(c.childNodes.length&&o(c),c.isLeaf||this.checkStrictly){c.setChecked(!0,!1);continue}if(c.setChecked(!0,!0),t){c.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(v=>{v.isLeaf||v.setChecked(!1,!1),h(v)})};h(c)}}}setCheckedNodes(e,t=!1){const r=this.key,i={};e.forEach(a=>{i[(a||{})[r]]=!0}),this._setCheckedKeys(r,t,i)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const r=this.key,i={};e.forEach(a=>{i[a]=!0}),this._setCheckedKeys(r,t,i)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(t=>{const r=this.getNode(t);r&&r.expand(null,this.autoExpandParent)})}setChecked(e,t,r){const i=this.getNode(e);i&&i.setChecked(!!t,r)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const r=e[this.key],i=this.nodesMap[r];this.setCurrentNode(i),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(this.currentNodeKey=e,e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const r=this.getNode(e);r&&(this.setCurrentNode(r),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const NNe=Ne({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(n){const e=kt("tree"),t=Yt("NodeInstance"),r=Yt("RootTree");return()=>{const i=n.node,{data:a,store:s}=i;return n.renderContent?n.renderContent(an,{_self:t,node:i,data:a,store:s}):at(r.ctx.slots,"default",{node:i,data:a},()=>[an("span",{class:e.be("node","label")},[i.label])])}}});var BNe=$t(NNe,[["__file","tree-node-content.vue"]]);function Yre(n){const e=Yt("TreeNodeMap",null),t={treeNodeExpand:r=>{n.node!==r&&n.node.collapse()},children:[]};return e&&e.children.push(t),pr("TreeNodeMap",t),{broadcastExpanded:r=>{if(n.accordion)for(const i of t.children)i.treeNodeExpand(r)}}}const Qre=Symbol("dragEvents");function FNe({props:n,ctx:e,el$:t,dropIndicator$:r,store:i}){const a=kt("tree"),s=ie({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return pr(Qre,{treeNodeDragStart:({event:c,treeNode:d})=>{if(hn(n.allowDrag)&&!n.allowDrag(d.node))return c.preventDefault(),!1;c.dataTransfer.effectAllowed="move";try{c.dataTransfer.setData("text/plain","")}catch{}s.value.draggingNode=d,e.emit("node-drag-start",d.node,c)},treeNodeDragOver:({event:c,treeNode:d})=>{const f=d,h=s.value.dropNode;h&&h.node.id!==f.node.id&&xo(h.$el,a.is("drop-inner"));const p=s.value.draggingNode;if(!p||!f)return;let m=!0,v=!0,g=!0,y=!0;hn(n.allowDrop)&&(m=n.allowDrop(p.node,f.node,"prev"),y=v=n.allowDrop(p.node,f.node,"inner"),g=n.allowDrop(p.node,f.node,"next")),c.dataTransfer.dropEffect=v||m||g?"move":"none",(m||v||g)&&(h==null?void 0:h.node.id)!==f.node.id&&(h&&e.emit("node-drag-leave",p.node,h.node,c),e.emit("node-drag-enter",p.node,f.node,c)),m||v||g?s.value.dropNode=f:s.value.dropNode=null,f.node.nextSibling===p.node&&(g=!1),f.node.previousSibling===p.node&&(m=!1),f.node.contains(p.node,!1)&&(v=!1),(p.node===f.node||p.node.contains(f.node))&&(m=!1,v=!1,g=!1);const _=f.$el.querySelector(`.${a.be("node","content")}`).getBoundingClientRect(),b=t.value.getBoundingClientRect();let x;const w=m?v?.25:g?.45:1:-1,A=g?v?.75:m?.55:0:1;let T=-9999;const C=c.clientY-_.top;C<_.height*w?x="before":C>_.height*A?x="after":v?x="inner":x="none";const E=f.$el.querySelector(`.${a.be("node","expand-icon")}`).getBoundingClientRect(),I=r.value;x==="before"?T=E.top-b.top:x==="after"&&(T=E.bottom-b.top),I.style.top=`${T}px`,I.style.left=`${E.right-b.left}px`,x==="inner"?ku(f.$el,a.is("drop-inner")):xo(f.$el,a.is("drop-inner")),s.value.showDropIndicator=x==="before"||x==="after",s.value.allowDrop=s.value.showDropIndicator||y,s.value.dropType=x,e.emit("node-drag-over",p.node,f.node,c)},treeNodeDragEnd:c=>{const{draggingNode:d,dropType:f,dropNode:h}=s.value;if(c.preventDefault(),c.dataTransfer&&(c.dataTransfer.dropEffect="move"),d&&h){const p={data:d.node.data};f!=="none"&&d.node.remove(),f==="before"?h.node.parent.insertBefore(p,h.node):f==="after"?h.node.parent.insertAfter(p,h.node):f==="inner"&&h.node.insertChild(p),f!=="none"&&(i.value.registerNode(p),i.value.key&&d.node.eachNode(m=>{var v;(v=i.value.nodesMap[m.data[i.value.key]])==null||v.setChecked(m.checked,!i.value.checkStrictly)})),xo(h.$el,a.is("drop-inner")),e.emit("node-drag-end",d.node,h.node,f,c),f!=="none"&&e.emit("node-drop",d.node,h.node,f,c)}d&&!h&&e.emit("node-drag-end",d.node,null,f,c),s.value.showDropIndicator=!1,s.value.draggingNode=null,s.value.dropNode=null,s.value.allowDrop=!0}}),{dragState:s}}const UNe=Ne({name:"ElTreeNode",components:{ElCollapseTransition:L4,ElCheckbox:Xu,NodeContent:BNe,ElIcon:tn,Loading:Pd},props:{node:{type:z5,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(n,e){const t=kt("tree"),{broadcastExpanded:r}=Yre(n),i=Yt("RootTree"),a=ie(!1),s=ie(!1),o=ie(null),l=ie(null),u=ie(null),c=Yt(Qre),d=tr();pr("NodeInstance",d),n.node.expanded&&(a.value=!0,s.value=!0);const f=i.props.props.children||"children";St(()=>{const C=n.node.data[f];return C&&[...C]},()=>{n.node.updateChildren()}),St(()=>n.node.indeterminate,C=>{m(n.node.checked,C)}),St(()=>n.node.checked,C=>{m(C,n.node.indeterminate)}),St(()=>n.node.childNodes.length,()=>n.node.reInitChecked()),St(()=>n.node.expanded,C=>{cn(()=>a.value=C),C&&(s.value=!0)});const h=C=>ZB(i.props.nodeKey,C.data),p=C=>{const E=n.props.class;if(!E)return{};let I;if(hn(E)){const{data:P}=C;I=E(P,C)}else I=E;return ln(I)?{[I]:!0}:I},m=(C,E)=>{(o.value!==C||l.value!==E)&&i.ctx.emit("check-change",n.node.data,C,E),o.value=C,l.value=E},v=C=>{F5(i.store,i.ctx.emit,()=>{var E;if((E=i==null?void 0:i.props)==null?void 0:E.nodeKey){const P=h(n.node);i.store.value.setCurrentNodeKey(P)}else i.store.value.setCurrentNode(n.node)}),i.currentNode.value=n.node,i.props.expandOnClickNode&&y(),i.props.checkOnClickNode&&!n.node.disabled&&_(null,{target:{checked:!n.node.checked}}),i.ctx.emit("node-click",n.node.data,n.node,d,C)},g=C=>{i.instance.vnode.props.onNodeContextmenu&&(C.stopPropagation(),C.preventDefault()),i.ctx.emit("node-contextmenu",C,n.node.data,n.node,d)},y=()=>{n.node.isLeaf||(a.value?(i.ctx.emit("node-collapse",n.node.data,n.node,d),n.node.collapse()):n.node.expand(()=>{e.emit("node-expand",n.node.data,n.node,d)}))},_=(C,E)=>{n.node.setChecked(E.target.checked,!i.props.checkStrictly),cn(()=>{const I=i.store.value;i.ctx.emit("check",n.node.data,{checkedNodes:I.getCheckedNodes(),checkedKeys:I.getCheckedKeys(),halfCheckedNodes:I.getHalfCheckedNodes(),halfCheckedKeys:I.getHalfCheckedKeys()})})};return{ns:t,node$:u,tree:i,expanded:a,childNodeRendered:s,oldChecked:o,oldIndeterminate:l,getNodeKey:h,getNodeClass:p,handleSelectChange:m,handleClick:v,handleContextMenu:g,handleExpandIconClick:y,handleCheckChange:_,handleChildNodeExpand:(C,E,I)=>{r(E),i.ctx.emit("node-expand",C,E,I)},handleDragStart:C=>{i.props.draggable&&c.treeNodeDragStart({event:C,treeNode:n})},handleDragOver:C=>{C.preventDefault(),i.props.draggable&&c.treeNodeDragOver({event:C,treeNode:{$el:u.value,node:n.node}})},handleDrop:C=>{C.preventDefault()},handleDragEnd:C=>{i.props.draggable&&c.treeNodeDragEnd(C)},CaretRight:xee}}});function zNe(n,e,t,r,i,a){const s=Kt("el-icon"),o=Kt("el-checkbox"),l=Kt("loading"),u=Kt("node-content"),c=Kt("el-tree-node"),d=Kt("el-collapse-transition");return Wn((W(),Se("div",{ref:"node$",class:J([n.ns.b("node"),n.ns.is("expanded",n.expanded),n.ns.is("current",n.node.isCurrent),n.ns.is("hidden",!n.node.visible),n.ns.is("focusable",!n.node.disabled),n.ns.is("checked",!n.node.disabled&&n.node.checked),n.getNodeClass(n.node)]),role:"treeitem",tabindex:"-1","aria-expanded":n.expanded,"aria-disabled":n.node.disabled,"aria-checked":n.node.checked,draggable:n.tree.props.draggable,"data-key":n.getNodeKey(n.node),onClick:Tn(n.handleClick,["stop"]),onContextmenu:n.handleContextMenu,onDragstart:Tn(n.handleDragStart,["stop"]),onDragover:Tn(n.handleDragOver,["stop"]),onDragend:Tn(n.handleDragEnd,["stop"]),onDrop:Tn(n.handleDrop,["stop"])},[Ce("div",{class:J(n.ns.be("node","content")),style:Jt({paddingLeft:(n.node.level-1)*n.tree.props.indent+"px"})},[n.tree.props.icon||n.CaretRight?(W(),pt(s,{key:0,class:J([n.ns.be("node","expand-icon"),n.ns.is("leaf",n.node.isLeaf),{expanded:!n.node.isLeaf&&n.expanded}]),onClick:Tn(n.handleExpandIconClick,["stop"])},{default:Oe(()=>[(W(),pt(ir(n.tree.props.icon||n.CaretRight)))]),_:1},8,["class","onClick"])):st("v-if",!0),n.showCheckbox?(W(),pt(o,{key:1,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:!!n.node.disabled,onClick:Tn(()=>{},["stop"]),onChange:n.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):st("v-if",!0),n.node.loading?(W(),pt(s,{key:2,class:J([n.ns.be("node","loading-icon"),n.ns.is("loading")])},{default:Oe(()=>[be(l)]),_:1},8,["class"])):st("v-if",!0),be(u,{node:n.node,"render-content":n.renderContent},null,8,["node","render-content"])],6),be(d,null,{default:Oe(()=>[!n.renderAfterExpand||n.childNodeRendered?Wn((W(),Se("div",{key:0,class:J(n.ns.be("node","children")),role:"group","aria-expanded":n.expanded},[(W(!0),Se(on,null,ur(n.node.childNodes,f=>(W(),pt(c,{key:n.getNodeKey(f),"render-content":n.renderContent,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,node:f,accordion:n.accordion,props:n.props,onNodeExpand:n.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded"])),[[Nr,n.expanded]]):st("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Nr,n.node.visible]])}var HNe=$t(UNe,[["render",zNe],["__file","tree-node.vue"]]);function VNe({el$:n},e){const t=kt("tree"),r=jr([]),i=jr([]);zn(()=>{s()}),Ju(()=>{r.value=Array.from(n.value.querySelectorAll("[role=treeitem]")),i.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"))}),St(i,o=>{o.forEach(l=>{l.setAttribute("tabindex","-1")})}),ni(n,"keydown",o=>{const l=o.target;if(!l.className.includes(t.b("node")))return;const u=o.code;r.value=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`));const c=r.value.indexOf(l);let d;if([jt.up,jt.down].includes(u)){if(o.preventDefault(),u===jt.up){d=c===-1?0:c!==0?c-1:r.value.length-1;const h=d;for(;!e.value.getNode(r.value[d].dataset.key).canFocus;){if(d--,d===h){d=-1;break}d<0&&(d=r.value.length-1)}}else{d=c===-1?0:c<r.value.length-1?c+1:0;const h=d;for(;!e.value.getNode(r.value[d].dataset.key).canFocus;){if(d++,d===h){d=-1;break}d>=r.value.length&&(d=0)}}d!==-1&&r.value[d].focus()}[jt.left,jt.right].includes(u)&&(o.preventDefault(),l.click());const f=l.querySelector('[type="checkbox"]');[jt.enter,jt.numpadEnter,jt.space].includes(u)&&f&&(o.preventDefault(),f.click())});const s=()=>{var o;r.value=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`)),i.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"));const l=n.value.querySelectorAll(`.${t.is("checked")}[role=treeitem]`);if(l.length){l[0].setAttribute("tabindex","0");return}(o=r.value[0])==null||o.setAttribute("tabindex","0")}}const $Ne=Ne({name:"ElTree",components:{ElTreeNode:HNe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:li}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(n,e){const{t}=Ar(),r=kt("tree"),i=Yt(L_,null),a=ie(new ONe({key:n.nodeKey,data:n.data,lazy:n.lazy,props:n.props,load:n.load,currentNodeKey:n.currentNodeKey,checkStrictly:n.checkStrictly,checkDescendants:n.checkDescendants,defaultCheckedKeys:n.defaultCheckedKeys,defaultExpandedKeys:n.defaultExpandedKeys,autoExpandParent:n.autoExpandParent,defaultExpandAll:n.defaultExpandAll,filterNodeMethod:n.filterNodeMethod}));a.value.initialize();const s=ie(a.value.root),o=ie(null),l=ie(null),u=ie(null),{broadcastExpanded:c}=Yre(n),{dragState:d}=FNe({props:n,ctx:e,el$:l,dropIndicator$:u,store:a});VNe({el$:l},a);const f=V(()=>{const{childNodes:U}=s.value,B=i?i.hasFilteredOptions!==0:!1;return(!U||U.length===0||U.every(({visible:$})=>!$))&&!B});St(()=>n.currentNodeKey,U=>{a.value.setCurrentNodeKey(U)}),St(()=>n.defaultCheckedKeys,U=>{a.value.setDefaultCheckedKey(U)}),St(()=>n.defaultExpandedKeys,U=>{a.value.setDefaultExpandedKeys(U)}),St(()=>n.data,U=>{a.value.setData(U)},{deep:!0}),St(()=>n.checkStrictly,U=>{a.value.checkStrictly=U});const h=U=>{if(!n.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");a.value.filter(U)},p=U=>ZB(n.nodeKey,U.data),m=U=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const B=a.value.getNode(U);if(!B)return[];const $=[B.data];let ee=B.parent;for(;ee&&ee!==s.value;)$.push(ee.data),ee=ee.parent;return $.reverse()},v=(U,B)=>a.value.getCheckedNodes(U,B),g=U=>a.value.getCheckedKeys(U),y=()=>{const U=a.value.getCurrentNode();return U?U.data:null},_=()=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const U=y();return U?U[n.nodeKey]:null},b=(U,B)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");a.value.setCheckedNodes(U,B)},x=(U,B)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");a.value.setCheckedKeys(U,B)},w=(U,B,$)=>{a.value.setChecked(U,B,$)},A=()=>a.value.getHalfCheckedNodes(),T=()=>a.value.getHalfCheckedKeys(),C=(U,B=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");F5(a,e.emit,()=>{c(U),a.value.setUserCurrentNode(U,B)})},E=(U,B=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");F5(a,e.emit,()=>{c(),a.value.setCurrentNodeKey(U,B)})},I=U=>a.value.getNode(U),P=U=>{a.value.remove(U)},L=(U,B)=>{a.value.append(U,B)},N=(U,B)=>{a.value.insertBefore(U,B)},F=(U,B)=>{a.value.insertAfter(U,B)},k=(U,B,$)=>{c(B),e.emit("node-expand",U,B,$)},H=(U,B)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");a.value.updateChildren(U,B)};return pr("RootTree",{ctx:e,props:n,store:a,root:s,currentNode:o,instance:tr()}),pr(Rd,void 0),{ns:r,store:a,root:s,currentNode:o,dragState:d,el$:l,dropIndicator$:u,isEmpty:f,filter:h,getNodeKey:p,getNodePath:m,getCheckedNodes:v,getCheckedKeys:g,getCurrentNode:y,getCurrentKey:_,setCheckedNodes:b,setCheckedKeys:x,setChecked:w,getHalfCheckedNodes:A,getHalfCheckedKeys:T,setCurrentNode:C,setCurrentKey:E,t,getNode:I,remove:P,append:L,insertBefore:N,insertAfter:F,handleNodeExpand:k,updateKeyChildren:H}}});function GNe(n,e,t,r,i,a){const s=Kt("el-tree-node");return W(),Se("div",{ref:"el$",class:J([n.ns.b(),n.ns.is("dragging",!!n.dragState.draggingNode),n.ns.is("drop-not-allow",!n.dragState.allowDrop),n.ns.is("drop-inner",n.dragState.dropType==="inner"),{[n.ns.m("highlight-current")]:n.highlightCurrent}]),role:"tree"},[(W(!0),Se(on,null,ur(n.root.childNodes,o=>(W(),pt(s,{key:n.getNodeKey(o),node:o,props:n.props,accordion:n.accordion,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,"render-content":n.renderContent,onNodeExpand:n.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),n.isEmpty?(W(),Se("div",{key:0,class:J(n.ns.e("empty-block"))},[at(n.$slots,"empty",{},()=>{var o;return[Ce("span",{class:J(n.ns.e("empty-text"))},Ft((o=n.emptyText)!=null?o:n.t("el.tree.emptyText")),3)]})],2)):st("v-if",!0),Wn(Ce("div",{ref:"dropIndicator$",class:J(n.ns.e("drop-indicator"))},null,2),[[Nr,n.dragState.showDropIndicator]])],2)}var WNe=$t($Ne,[["render",GNe],["__file","tree.vue"]]);const AM=Bn(WNe),qNe=(n,{attrs:e,emit:t},{select:r,tree:i,key:a})=>{const s=kt("tree-select");return St(()=>n.data,()=>{n.filterable&&cn(()=>{var l,u;(u=i.value)==null||u.filter((l=r.value)==null?void 0:l.states.inputValue)})},{flush:"post"}),{...Mc(ja(n),Object.keys(lv.props)),...e,"onUpdate:modelValue":l=>t(jn,l),valueKey:a,popperClass:V(()=>{const l=[s.e("popper")];return n.popperClass&&l.push(n.popperClass),l.join(" ")}),filterMethod:(l="")=>{var u;n.filterMethod?n.filterMethod(l):n.remoteMethod?n.remoteMethod(l):(u=i.value)==null||u.filter(l)}}},jNe=Ne({extends:hM,setup(n,e){const t=hM.setup(n,e);delete t.selectOptionClick;const r=tr().proxy;return cn(()=>{t.select.states.cachedOptions.get(r.value)||t.select.onOptionCreate(r)}),St(()=>e.attrs.visible,i=>{t.states.visible=i},{immediate:!0}),t},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function H5(n){return n||n===0}function JB(n){return Ut(n)&&n.length}function lg(n){return Ut(n)?n:H5(n)?[n]:[]}function dE(n,e,t,r,i){for(let a=0;a<n.length;a++){const s=n[a];if(e(s,a,n,i))return r?r(s,a,n,i):s;{const o=t(s);if(JB(o)){const l=dE(o,e,t,r,s);if(l)return l}}}}function fE(n,e,t,r){for(let i=0;i<n.length;i++){const a=n[i];e(a,i,n,r);const s=t(a);JB(s)&&fE(s,e,t,a)}}const KNe=(n,{attrs:e,slots:t,emit:r},{select:i,tree:a,key:s})=>{St(()=>n.modelValue,()=>{n.showCheckbox&&cn(()=>{const f=a.value;f&&!Ms(f.getCheckedKeys(),lg(n.modelValue))&&f.setCheckedKeys(lg(n.modelValue))})},{immediate:!0,deep:!0});const o=V(()=>({value:s.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...n.props})),l=(f,h)=>{var p;const m=o.value[f];return hn(m)?m(h,(p=a.value)==null?void 0:p.getNode(l("value",h))):h[m]},u=lg(n.modelValue).map(f=>dE(n.data||[],h=>l("value",h)===f,h=>l("children",h),(h,p,m,v)=>v&&l("value",v))).filter(f=>H5(f)),c=V(()=>{if(!n.renderAfterExpand&&!n.lazy)return[];const f=[];return fE(n.data.concat(n.cacheData),h=>{const p=l("value",h);f.push({value:p,currentLabel:l("label",h),isDisabled:l("disabled",h)})},h=>l("children",h)),f}),d=()=>{var f;return(f=a.value)==null?void 0:f.getCheckedKeys().filter(h=>{var p;const m=(p=a.value)==null?void 0:p.getNode(h);return!es(m)&&ql(m.childNodes)})};return{...Mc(ja(n),Object.keys(AM.props)),...e,nodeKey:s,expandOnClickNode:V(()=>!n.checkStrictly&&n.expandOnClickNode),defaultExpandedKeys:V(()=>n.defaultExpandedKeys?n.defaultExpandedKeys.concat(u):u),renderContent:(f,{node:h,data:p,store:m})=>f(jNe,{value:l("value",p),label:l("label",p),disabled:l("disabled",p),visible:h.visible},n.renderContent?()=>n.renderContent(f,{node:h,data:p,store:m}):t.default?()=>t.default({node:h,data:p,store:m}):void 0),filterNodeMethod:(f,h,p)=>n.filterNodeMethod?n.filterNodeMethod(f,h,p):f?new RegExp(cB(f),"i").test(l("label",h)||""):!0,onNodeClick:(f,h,p)=>{var m,v,g,y;if((m=e.onNodeClick)==null||m.call(e,f,h,p),!(n.showCheckbox&&n.checkOnClickNode)){if(!n.showCheckbox&&(n.checkStrictly||h.isLeaf)){if(!l("disabled",f)){const _=(v=i.value)==null?void 0:v.states.options.get(l("value",f));(g=i.value)==null||g.handleOptionSelect(_)}}else n.expandOnClickNode&&p.proxy.handleExpandIconClick();(y=i.value)==null||y.focus()}},onCheck:(f,h)=>{var p;if(!n.showCheckbox)return;const m=l("value",f),v={};fE([a.value.store.root],b=>v[b.key]=b,b=>b.childNodes);const g=h.checkedKeys,y=n.multiple?lg(n.modelValue).filter(b=>!(b in v)&&!g.includes(b)):[],_=y.concat(g);if(n.checkStrictly)r(jn,n.multiple?_:_.includes(m)?m:void 0);else if(n.multiple){const b=d();r(jn,y.concat(b))}else{const b=dE([f],A=>!JB(l("children",A))&&!l("disabled",A),A=>l("children",A)),x=b?l("value",b):void 0,w=H5(n.modelValue)&&!!dE([f],A=>l("value",A)===n.modelValue,A=>l("children",A));r(jn,x===n.modelValue||w?void 0:x)}cn(()=>{var b;const x=lg(n.modelValue);a.value.setCheckedKeys(x),(b=e.onCheck)==null||b.call(e,f,{checkedKeys:a.value.getCheckedKeys(),checkedNodes:a.value.getCheckedNodes(),halfCheckedKeys:a.value.getHalfCheckedKeys(),halfCheckedNodes:a.value.getHalfCheckedNodes()})}),(p=i.value)==null||p.focus()},onNodeExpand:(f,h,p)=>{var m;(m=e.onNodeExpand)==null||m.call(e,f,h,p),cn(()=>{if(!n.checkStrictly&&n.lazy&&n.multiple&&h.checked){const v={},g=a.value.getCheckedKeys();fE([a.value.store.root],b=>v[b.key]=b,b=>b.childNodes);const y=lg(n.modelValue).filter(b=>!(b in v)&&!g.includes(b)),_=d();r(jn,y.concat(_))}})},cacheOptions:c}};var XNe=Ne({props:{data:{type:Array,default:()=>[]}},setup(n){const e=Yt(L_);return St(()=>n.data,()=>{var t;n.data.forEach(i=>{e.states.cachedOptions.has(i.value)||e.states.cachedOptions.set(i.value,i)});const r=((t=e.selectRef)==null?void 0:t.querySelectorAll("input"))||[];Cr&&!Array.from(r).includes(document.activeElement)&&e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const YNe=Ne({name:"ElTreeSelect",inheritAttrs:!1,props:{...lv.props,...AM.props,cacheData:{type:Array,default:()=>[]}},setup(n,e){const{slots:t,expose:r}=e,i=ie(),a=ie(),s=V(()=>n.nodeKey||n.valueKey||"value"),o=qNe(n,e,{select:i,tree:a,key:s}),{cacheOptions:l,...u}=KNe(n,e,{select:i,tree:a,key:s}),c=$r({});return r(c),zn(()=>{Object.assign(c,{...Mc(a.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Mc(i.value,["focus","blur","selectedLabel"])})}),()=>an(lv,$r({...o,ref:d=>i.value=d}),{...t,default:()=>[an(XNe,{data:l.value}),an(AM,$r({...u,ref:d=>a.value=d}))]})}});var QNe=$t(YNe,[["__file","tree-select.vue"]]);const ZNe=Bn(QNe),eF=Symbol(),JNe={key:-1,level:-1,data:{}};var MS=(n=>(n.KEY="id",n.LABEL="label",n.CHILDREN="children",n.DISABLED="disabled",n.CLASS="",n))(MS||{}),V5=(n=>(n.ADD="add",n.DELETE="delete",n))(V5||{});const Zre={type:Number,default:26},eBe=Vt({data:{type:tt(Array),default:()=>Ki([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:tt(Object),default:()=>Ki({children:"children",label:"label",disabled:"disabled",value:"id",class:""})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:tt(Array),default:()=>Ki([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:tt(Array),default:()=>Ki([])},indent:{type:Number,default:16},itemSize:Zre,icon:{type:li},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:tt([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:tt(Function)},perfMode:{type:Boolean,default:!0}}),tBe=Vt({node:{type:tt(Object),default:()=>Ki(JNe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:Zre}),nBe=Vt({node:{type:tt(Object),required:!0}}),Jre="node-click",eie="node-drop",tie="node-expand",nie="node-collapse",rie="current-change",iie="check",aie="check-change",sie="node-contextmenu",rBe={[Jre]:(n,e,t)=>n&&e&&t,[eie]:(n,e,t)=>n&&e&&t,[tie]:(n,e)=>n&&e,[nie]:(n,e)=>n&&e,[rie]:(n,e)=>n&&e,[iie]:(n,e)=>n&&e,[aie]:(n,e)=>n&&mi(e),[sie]:(n,e,t)=>n&&e&&t},iBe={click:(n,e)=>!!(n&&e),drop:(n,e)=>!!(n&&e),toggle:n=>!!n,check:(n,e)=>n&&mi(e)};function aBe(n,e){const t=ie(new Set),r=ie(new Set),{emit:i}=tr();St([()=>e.value,()=>n.defaultCheckedKeys],()=>cn(()=>{y(n.defaultCheckedKeys)}),{immediate:!0});const a=()=>{if(!e.value||!n.showCheckbox||n.checkStrictly)return;const{levelTreeNodeMap:_,maxLevel:b}=e.value,x=t.value,w=new Set;for(let A=b-1;A>=1;--A){const T=_.get(A);T&&T.forEach(C=>{const E=C.children;if(E){let I=!0,P=!1;for(const L of E){const N=L.key;if(x.has(N))P=!0;else if(w.has(N)){I=!1,P=!0;break}else I=!1}I?x.add(C.key):P?(w.add(C.key),x.delete(C.key)):(x.delete(C.key),w.delete(C.key))}})}r.value=w},s=_=>t.value.has(_.key),o=_=>r.value.has(_.key),l=(_,b,x=!0,w=!0)=>{const A=t.value,T=(C,E)=>{A[E?V5.ADD:V5.DELETE](C.key);const I=C.children;!n.checkStrictly&&I&&I.forEach(P=>{P.disabled||T(P,E)})};T(_,b),w&&a(),x&&u(_,b)},u=(_,b)=>{const{checkedNodes:x,checkedKeys:w}=p(),{halfCheckedNodes:A,halfCheckedKeys:T}=m();i(iie,_.data,{checkedKeys:w,checkedNodes:x,halfCheckedKeys:T,halfCheckedNodes:A}),i(aie,_.data,b)};function c(_=!1){return p(_).checkedKeys}function d(_=!1){return p(_).checkedNodes}function f(){return m().halfCheckedKeys}function h(){return m().halfCheckedNodes}function p(_=!1){const b=[],x=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:w}=e.value;t.value.forEach(A=>{const T=w.get(A);T&&(!_||_&&T.isLeaf)&&(x.push(A),b.push(T.data))})}return{checkedKeys:x,checkedNodes:b}}function m(){const _=[],b=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:x}=e.value;r.value.forEach(w=>{const A=x.get(w);A&&(b.push(w),_.push(A.data))})}return{halfCheckedNodes:_,halfCheckedKeys:b}}function v(_){t.value.clear(),r.value.clear(),cn(()=>{y(_)})}function g(_,b){if(e!=null&&e.value&&n.showCheckbox){const x=e.value.treeNodeMap.get(_);x&&l(x,b,!1)}}function y(_){if(e!=null&&e.value){const{treeNodeMap:b}=e.value;if(n.showCheckbox&&b&&(_==null?void 0:_.length)>0){for(const x of _){const w=b.get(x);w&&!s(w)&&l(w,!0,!1,!1)}a()}}}return{updateCheckedKeys:a,toggleCheckbox:l,isChecked:s,isIndeterminate:o,getCheckedKeys:c,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:g,setCheckedKeys:v}}function sBe(n,e){const t=ie(new Set([])),r=ie(new Set([])),i=V(()=>hn(n.filterMethod));function a(o){var l;if(!i.value)return;const u=new Set,c=r.value,d=t.value,f=[],h=((l=e.value)==null?void 0:l.treeNodes)||[],p=n.filterMethod;d.clear();function m(v){v.forEach(g=>{f.push(g),p!=null&&p(o,g.data,g)?f.forEach(_=>{u.add(_.key)}):g.isLeaf&&d.add(g.key);const y=g.children;if(y&&m(y),!g.isLeaf){if(!u.has(g.key))d.add(g.key);else if(y){let _=!0;for(const b of y)if(!d.has(b.key)){_=!1;break}_?c.add(g.key):c.delete(g.key)}}f.pop()})}return m(h),u}function s(o){return r.value.has(o.key)}return{hiddenExpandIconKeySet:r,hiddenNodeKeySet:t,doFilter:a,isForceHiddenExpandIcon:s}}function oBe(n,e){const t=ie(new Set(n.defaultExpandedKeys)),r=ie(),i=jr(),a=ie();St(()=>n.currentNodeKey,Y=>{r.value=Y},{immediate:!0}),St(()=>n.data,Y=>{ke(Y)},{immediate:!0});const{isIndeterminate:s,isChecked:o,toggleCheckbox:l,getCheckedKeys:u,getCheckedNodes:c,getHalfCheckedKeys:d,getHalfCheckedNodes:f,setChecked:h,setCheckedKeys:p}=aBe(n,i),{doFilter:m,hiddenNodeKeySet:v,isForceHiddenExpandIcon:g}=sBe(n,i),y=V(()=>{var Y;return((Y=n.props)==null?void 0:Y.value)||MS.KEY}),_=V(()=>{var Y;return((Y=n.props)==null?void 0:Y.children)||MS.CHILDREN}),b=V(()=>{var Y;return((Y=n.props)==null?void 0:Y.disabled)||MS.DISABLED}),x=V(()=>{var Y;return((Y=n.props)==null?void 0:Y.label)||MS.LABEL}),w=V(()=>{var Y;const he=t.value,le=v.value,Ke=[],Ue=((Y=i.value)==null?void 0:Y.treeNodes)||[],Ze=[];for(let je=Ue.length-1;je>=0;--je)Ze.push(Ue[je]);for(;Ze.length;){const je=Ze.pop();if(!le.has(je.key)&&(Ke.push(je),je.children&&he.has(je.key)))for(let He=je.children.length-1;He>=0;--He)Ze.push(je.children[He])}return Ke}),A=V(()=>w.value.length>0);function T(Y){const he=new Map,le=new Map;let Ke=1;function Ue(je,He=1,ut=void 0){var ge;const q=[];for(const te of je){const ye=I(te),Ve={level:He,key:ye,data:te};Ve.label=L(te),Ve.parent=ut;const et=E(te);Ve.disabled=P(te),Ve.isLeaf=!et||et.length===0,et&&et.length&&(Ve.children=Ue(et,He+1,Ve)),q.push(Ve),he.set(ye,Ve),le.has(He)||le.set(He,[]),(ge=le.get(He))==null||ge.push(Ve)}return He>Ke&&(Ke=He),q}const Ze=Ue(Y);return{treeNodeMap:he,levelTreeNodeMap:le,maxLevel:Ke,treeNodes:Ze}}function C(Y){const he=m(Y);he&&(t.value=he)}function E(Y){return Y[_.value]}function I(Y){return Y?Y[y.value]:""}function P(Y){return Y[b.value]}function L(Y){return Y[x.value]}function N(Y){t.value.has(Y.key)?ee(Y):$(Y)}function F(Y){const he=new Set,le=i.value.treeNodeMap;Y.forEach(Ke=>{let Ue=le.get(Ke);for(;Ue&&!he.has(Ue.key);)he.add(Ue.key),Ue=Ue.parent}),t.value=he}function k(Y,he){e(Jre,Y.data,Y,he),U(Y),n.expandOnClickNode&&N(Y),n.showCheckbox&&n.checkOnClickNode&&!Y.disabled&&l(Y,!o(Y),!0)}function H(Y,he){e(eie,Y.data,Y,he)}function U(Y){ae(Y)||(r.value=Y.key,e(rie,Y.data,Y))}function B(Y,he){l(Y,he)}function $(Y){const he=t.value;if(i.value&&n.accordion){const{treeNodeMap:le}=i.value;he.forEach(Ke=>{const Ue=le.get(Ke);Y&&Y.level===(Ue==null?void 0:Ue.level)&&he.delete(Ke)})}he.add(Y.key),e(tie,Y.data,Y)}function ee(Y){t.value.delete(Y.key),e(nie,Y.data,Y)}function re(Y){return t.value.has(Y.key)}function ne(Y){return!!Y.disabled}function ae(Y){const he=r.value;return he!==void 0&&he===Y.key}function pe(){var Y,he;if(r.value)return(he=(Y=i.value)==null?void 0:Y.treeNodeMap.get(r.value))==null?void 0:he.data}function de(){return r.value}function me(Y){r.value=Y}function ke(Y){cn(()=>i.value=T(Y))}function Be(Y){var he;const le=er(Y)?I(Y):Y;return(he=i.value)==null?void 0:he.treeNodeMap.get(le)}function Xe(Y,he="auto"){const le=Be(Y);le&&a.value&&a.value.scrollToItem(w.value.indexOf(le),he)}function Ye(Y){var he;(he=a.value)==null||he.scrollTo(Y)}return{tree:i,flattenTree:w,isNotEmpty:A,listRef:a,getKey:I,getChildren:E,toggleExpand:N,toggleCheckbox:l,isExpanded:re,isChecked:o,isIndeterminate:s,isDisabled:ne,isCurrent:ae,isForceHiddenExpandIcon:g,handleNodeClick:k,handleNodeDrop:H,handleNodeCheck:B,getCurrentNode:pe,getCurrentKey:de,setCurrentKey:me,getCheckedKeys:u,getCheckedNodes:c,getHalfCheckedKeys:d,getHalfCheckedNodes:f,setChecked:h,setCheckedKeys:p,filter:C,setData:ke,getNode:Be,expandNode:$,collapseNode:ee,setExpandedKeys:F,scrollToNode:Xe,scrollTo:Ye}}var lBe=Ne({name:"ElTreeNodeContent",props:nBe,setup(n){const e=Yt(eF),t=kt("tree");return()=>{const r=n.node,{data:i}=r;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:r,data:i}):an("span",{class:t.be("node","label")},[r==null?void 0:r.label])}}});const uBe=Ne({name:"ElTreeNode"}),cBe=Ne({...uBe,props:tBe,emits:iBe,setup(n,{emit:e}){const t=n,r=Yt(eF),i=kt("tree"),a=V(()=>{var h;return(h=r==null?void 0:r.props.indent)!=null?h:16}),s=V(()=>{var h;return(h=r==null?void 0:r.props.icon)!=null?h:xee}),o=h=>{const p=r==null?void 0:r.props.props.class;if(!p)return{};let m;if(hn(p)){const{data:v}=h;m=p(v,h)}else m=p;return ln(m)?{[m]:!0}:m},l=h=>{e("click",t.node,h)},u=h=>{e("drop",t.node,h)},c=()=>{e("toggle",t.node)},d=h=>{e("check",t.node,h)},f=h=>{var p,m,v,g;(v=(m=(p=r==null?void 0:r.instance)==null?void 0:p.vnode)==null?void 0:m.props)!=null&&v.onNodeContextmenu&&(h.stopPropagation(),h.preventDefault()),r==null||r.ctx.emit(sie,h,(g=t.node)==null?void 0:g.data,t.node)};return(h,p)=>{var m,v,g;return W(),Se("div",{ref:"node$",class:J([S(i).b("node"),S(i).is("expanded",h.expanded),S(i).is("current",h.current),S(i).is("focusable",!h.disabled),S(i).is("checked",!h.disabled&&h.checked),o(h.node)]),role:"treeitem",tabindex:"-1","aria-expanded":h.expanded,"aria-disabled":h.disabled,"aria-checked":h.checked,"data-key":(m=h.node)==null?void 0:m.key,onClick:Tn(l,["stop"]),onContextmenu:f,onDragover:Tn(()=>{},["prevent"]),onDragenter:Tn(()=>{},["prevent"]),onDrop:Tn(u,["stop"])},[Ce("div",{class:J(S(i).be("node","content")),style:Jt({paddingLeft:`${(h.node.level-1)*S(a)}px`,height:h.itemSize+"px"})},[S(s)?(W(),pt(S(tn),{key:0,class:J([S(i).is("leaf",!!((v=h.node)!=null&&v.isLeaf)),S(i).is("hidden",h.hiddenExpandIcon),{expanded:!((g=h.node)!=null&&g.isLeaf)&&h.expanded},S(i).be("node","expand-icon")]),onClick:Tn(c,["stop"])},{default:Oe(()=>[(W(),pt(ir(S(s))))]),_:1},8,["class","onClick"])):st("v-if",!0),h.showCheckbox?(W(),pt(S(Xu),{key:1,"model-value":h.checked,indeterminate:h.indeterminate,disabled:h.disabled,onChange:d,onClick:Tn(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):st("v-if",!0),be(S(lBe),{node:h.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var dBe=$t(cBe,[["__file","tree-node.vue"]]);const fBe=Ne({name:"ElTreeV2"}),hBe=Ne({...fBe,props:eBe,emits:rBe,setup(n,{expose:e,emit:t}){const r=n,i=Oa(),a=V(()=>r.itemSize);pr(eF,{ctx:{emit:t,slots:i},props:r,instance:tr()}),pr(Rd,void 0);const{t:s}=Ar(),o=kt("tree"),{flattenTree:l,isNotEmpty:u,listRef:c,toggleExpand:d,isExpanded:f,isIndeterminate:h,isChecked:p,isDisabled:m,isCurrent:v,isForceHiddenExpandIcon:g,handleNodeClick:y,handleNodeDrop:_,handleNodeCheck:b,toggleCheckbox:x,getCurrentNode:w,getCurrentKey:A,setCurrentKey:T,getCheckedKeys:C,getCheckedNodes:E,getHalfCheckedKeys:I,getHalfCheckedNodes:P,setChecked:L,setCheckedKeys:N,filter:F,setData:k,getNode:H,expandNode:U,collapseNode:B,setExpandedKeys:$,scrollToNode:ee,scrollTo:re}=oBe(r,t);return e({toggleCheckbox:x,getCurrentNode:w,getCurrentKey:A,setCurrentKey:T,getCheckedKeys:C,getCheckedNodes:E,getHalfCheckedKeys:I,getHalfCheckedNodes:P,setChecked:L,setCheckedKeys:N,filter:F,setData:k,getNode:H,expandNode:U,collapseNode:B,setExpandedKeys:$,scrollToNode:ee,scrollTo:re}),(ne,ae)=>(W(),Se("div",{class:J([S(o).b(),{[S(o).m("highlight-current")]:ne.highlightCurrent}]),role:"tree"},[S(u)?(W(),pt(S($ne),{key:0,ref_key:"listRef",ref:c,"class-name":S(o).b("virtual-list"),data:S(l),total:S(l).length,height:ne.height,"item-size":S(a),"perf-mode":ne.perfMode},{default:Oe(({data:pe,index:de,style:me})=>[(W(),pt(dBe,{key:pe[de].key,style:Jt(me),node:pe[de],expanded:S(f)(pe[de]),"show-checkbox":ne.showCheckbox,checked:S(p)(pe[de]),indeterminate:S(h)(pe[de]),"item-size":S(a),disabled:S(m)(pe[de]),current:S(v)(pe[de]),"hidden-expand-icon":S(g)(pe[de]),onClick:S(y),onToggle:S(d),onCheck:S(b),onDrop:S(_)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(W(),Se("div",{key:1,class:J(S(o).e("empty-block"))},[at(ne.$slots,"empty",{},()=>{var pe;return[Ce("span",{class:J(S(o).e("empty-text"))},Ft((pe=ne.emptyText)!=null?pe:S(s)("el.tree.emptyText")),3)]})],2))],2))}});var pBe=$t(hBe,[["__file","tree.vue"]]);const mBe=Bn(pBe),oie=Symbol("uploadContextKey"),vBe="ElUpload";class gBe extends Error{constructor(e,t,r,i){super(e),this.name="UploadAjaxError",this.status=t,this.method=r,this.url=i}}function D$(n,e,t){let r;return t.response?r=`${t.response.error||t.response}`:t.responseText?r=`${t.responseText}`:r=`fail to ${e.method} ${n} ${t.status}`,new gBe(r,t.status,e.method,n)}function yBe(n){const e=n.responseText||n.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const _Be=n=>{typeof XMLHttpRequest>"u"&&Xa(vBe,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,t=n.action;e.upload&&e.upload.addEventListener("progress",a=>{const s=a;s.percent=a.total>0?a.loaded/a.total*100:0,n.onProgress(s)});const r=new FormData;if(n.data)for(const[a,s]of Object.entries(n.data))Ut(s)&&s.length?r.append(a,...s):r.append(a,s);r.append(n.filename,n.file,n.file.name),e.addEventListener("error",()=>{n.onError(D$(t,n,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return n.onError(D$(t,n,e));n.onSuccess(yBe(e))}),e.open(n.method,t,!0),n.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const i=n.headers||{};if(i instanceof Headers)i.forEach((a,s)=>e.setRequestHeader(s,a));else for(const[a,s]of Object.entries(i))es(s)||e.setRequestHeader(a,String(s));return e.send(r),e},lie=["text","picture","picture-card"];let bBe=1;const $5=()=>Date.now()+bBe++,uie=Vt({action:{type:String,default:"#"},headers:{type:tt(Object)},method:{type:String,default:"post"},data:{type:tt([Object,Function,Promise]),default:()=>Ki({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:tt(Array),default:()=>Ki([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:lie,default:"text"},httpRequest:{type:tt(Function),default:_Be},disabled:Boolean,limit:Number}),SBe=Vt({...uie,beforeUpload:{type:tt(Function),default:Jr},beforeRemove:{type:tt(Function)},onRemove:{type:tt(Function),default:Jr},onChange:{type:tt(Function),default:Jr},onPreview:{type:tt(Function),default:Jr},onSuccess:{type:tt(Function),default:Jr},onProgress:{type:tt(Function),default:Jr},onError:{type:tt(Function),default:Jr},onExceed:{type:tt(Function),default:Jr},crossorigin:{type:tt(String)}}),xBe=Vt({files:{type:tt(Array),default:()=>Ki([])},disabled:{type:Boolean,default:!1},handlePreview:{type:tt(Function),default:Jr},listType:{type:String,values:lie,default:"text"},crossorigin:{type:tt(String)}}),wBe={remove:n=>!!n},TBe=Ne({name:"ElUploadList"}),CBe=Ne({...TBe,props:xBe,emits:wBe,setup(n,{emit:e}){const t=n,{t:r}=Ar(),i=kt("upload"),a=kt("icon"),s=kt("list"),o=Js(),l=ie(!1),u=V(()=>[i.b("list"),i.bm("list",t.listType),i.is("disabled",t.disabled)]),c=d=>{e("remove",d)};return(d,f)=>(W(),pt(uJ,{tag:"ul",class:J(S(u)),name:S(s).b()},{default:Oe(()=>[(W(!0),Se(on,null,ur(d.files,(h,p)=>(W(),Se("li",{key:h.uid||h.name,class:J([S(i).be("list","item"),S(i).is(h.status),{focusing:l.value}]),tabindex:"0",onKeydown:hi(m=>!S(o)&&c(h),["delete"]),onFocus:m=>l.value=!0,onBlur:m=>l.value=!1,onClick:m=>l.value=!1},[at(d.$slots,"default",{file:h,index:p},()=>[d.listType==="picture"||h.status!=="uploading"&&d.listType==="picture-card"?(W(),Se("img",{key:0,class:J(S(i).be("list","item-thumbnail")),src:h.url,crossorigin:d.crossorigin,alt:""},null,10,["src","crossorigin"])):st("v-if",!0),h.status==="uploading"||d.listType!=="picture-card"?(W(),Se("div",{key:1,class:J(S(i).be("list","item-info"))},[Ce("a",{class:J(S(i).be("list","item-name")),onClick:Tn(m=>d.handlePreview(h),["prevent"])},[be(S(tn),{class:J(S(a).m("document"))},{default:Oe(()=>[be(S(Tee))]),_:1},8,["class"]),Ce("span",{class:J(S(i).be("list","item-file-name")),title:h.name},Ft(h.name),11,["title"])],10,["onClick"]),h.status==="uploading"?(W(),pt(S(kne),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(h.percentage),style:Jt(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):st("v-if",!0)],2)):st("v-if",!0),Ce("label",{class:J(S(i).be("list","item-status-label"))},[d.listType==="text"?(W(),pt(S(tn),{key:0,class:J([S(a).m("upload-success"),S(a).m("circle-check")])},{default:Oe(()=>[be(S(HN))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(W(),pt(S(tn),{key:1,class:J([S(a).m("upload-success"),S(a).m("check")])},{default:Oe(()=>[be(S(gw))]),_:1},8,["class"])):st("v-if",!0)],2),S(o)?st("v-if",!0):(W(),pt(S(tn),{key:2,class:J(S(a).m("close")),onClick:m=>c(h)},{default:Oe(()=>[be(S(Fc))]),_:2},1032,["class","onClick"])),st(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),st(" This is a bug which needs to be fixed "),st(" TODO: Fix the incorrect navigation interaction "),S(o)?st("v-if",!0):(W(),Se("i",{key:3,class:J(S(a).m("close-tip"))},Ft(S(r)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(W(),Se("span",{key:4,class:J(S(i).be("list","item-actions"))},[Ce("span",{class:J(S(i).be("list","item-preview")),onClick:m=>d.handlePreview(h)},[be(S(tn),{class:J(S(a).m("zoom-in"))},{default:Oe(()=>[be(S(Aee))]),_:1},8,["class"])],10,["onClick"]),S(o)?st("v-if",!0):(W(),Se("span",{key:0,class:J(S(i).be("list","item-delete")),onClick:m=>c(h)},[be(S(tn),{class:J(S(a).m("delete"))},{default:Oe(()=>[be(S(Axe))]),_:1},8,["class"])],10,["onClick"]))],2)):st("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),at(d.$slots,"append")]),_:3},8,["class","name"]))}});var P$=$t(CBe,[["__file","upload-list.vue"]]);const ABe=Vt({disabled:{type:Boolean,default:!1}}),EBe={file:n=>Ut(n)},cie="ElUploadDrag",MBe=Ne({name:cie}),IBe=Ne({...MBe,props:ABe,emits:EBe,setup(n,{emit:e}){Yt(oie)||Xa(cie,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=kt("upload"),i=ie(!1),a=Js(),s=l=>{if(a.value)return;i.value=!1,l.stopPropagation();const u=Array.from(l.dataTransfer.files);e("file",u)},o=()=>{a.value||(i.value=!0)};return(l,u)=>(W(),Se("div",{class:J([S(r).b("dragger"),S(r).is("dragover",i.value)]),onDrop:Tn(s,["prevent"]),onDragover:Tn(o,["prevent"]),onDragleave:Tn(c=>i.value=!1,["prevent"])},[at(l.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var DBe=$t(IBe,[["__file","upload-dragger.vue"]]);const PBe=Vt({...uie,beforeUpload:{type:tt(Function),default:Jr},onRemove:{type:tt(Function),default:Jr},onStart:{type:tt(Function),default:Jr},onSuccess:{type:tt(Function),default:Jr},onProgress:{type:tt(Function),default:Jr},onError:{type:tt(Function),default:Jr},onExceed:{type:tt(Function),default:Jr}}),RBe=Ne({name:"ElUploadContent",inheritAttrs:!1}),kBe=Ne({...RBe,props:PBe,setup(n,{expose:e}){const t=n,r=kt("upload"),i=Js(),a=jr({}),s=jr(),o=m=>{if(m.length===0)return;const{autoUpload:v,limit:g,fileList:y,multiple:_,onStart:b,onExceed:x}=t;if(g&&y.length+m.length>g){x(m,y);return}_||(m=m.slice(0,1));for(const w of m){const A=w;A.uid=$5(),b(A),v&&l(A)}},l=async m=>{if(s.value.value="",!t.beforeUpload)return c(m);let v,g={};try{const _=t.data,b=t.beforeUpload(m);g=Fx(t.data)?oM(t.data):t.data,v=await b,Fx(t.data)&&Ms(_,g)&&(g=oM(t.data))}catch{v=!1}if(v===!1){t.onRemove(m);return}let y=m;v instanceof Blob&&(v instanceof File?y=v:y=new File([v],m.name,{type:m.type})),c(Object.assign(y,{uid:m.uid}),g)},u=async(m,v)=>hn(m)?m(v):m,c=async(m,v)=>{const{headers:g,data:y,method:_,withCredentials:b,name:x,action:w,onProgress:A,onSuccess:T,onError:C,httpRequest:E}=t;try{v=await u(v??y,m)}catch{t.onRemove(m);return}const{uid:I}=m,P={headers:g||{},withCredentials:b,file:m,data:v,method:_,filename:x,action:w,onProgress:N=>{A(N,m)},onSuccess:N=>{T(N,m),delete a.value[I]},onError:N=>{C(N,m),delete a.value[I]}},L=E(P);a.value[I]=L,L instanceof Promise&&L.then(P.onSuccess,P.onError)},d=m=>{const v=m.target.files;v&&o(Array.from(v))},f=()=>{i.value||(s.value.value="",s.value.click())},h=()=>{f()};return e({abort:m=>{vee(a.value).filter(m?([g])=>String(m.uid)===g:()=>!0).forEach(([g,y])=>{y instanceof XMLHttpRequest&&y.abort(),delete a.value[g]})},upload:l}),(m,v)=>(W(),Se("div",{class:J([S(r).b(),S(r).m(m.listType),S(r).is("drag",m.drag),S(r).is("disabled",S(i))]),tabindex:S(i)?"-1":"0",onClick:f,onKeydown:hi(Tn(h,["self"]),["enter","space"])},[m.drag?(W(),pt(DBe,{key:0,disabled:S(i),onFile:o},{default:Oe(()=>[at(m.$slots,"default")]),_:3},8,["disabled"])):at(m.$slots,"default",{key:1}),Ce("input",{ref_key:"inputRef",ref:s,class:J(S(r).e("input")),name:m.name,disabled:S(i),multiple:m.multiple,accept:m.accept,type:"file",onChange:d,onClick:Tn(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var R$=$t(kBe,[["__file","upload-content.vue"]]);const k$="ElUpload",L$=n=>{var e;(e=n.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(n.url)},LBe=(n,e)=>{const t=lee(n,"fileList",void 0,{passive:!0}),r=h=>t.value.find(p=>p.uid===h.uid);function i(h){var p;(p=e.value)==null||p.abort(h)}function a(h=["ready","uploading","success","fail"]){t.value=t.value.filter(p=>!h.includes(p.status))}function s(h){t.value=t.value.filter(p=>p!==h)}const o=(h,p)=>{const m=r(p);m&&(console.error(h),m.status="fail",s(m),n.onError(h,m,t.value),n.onChange(m,t.value))},l=(h,p)=>{const m=r(p);m&&(n.onProgress(h,m,t.value),m.status="uploading",m.percentage=Math.round(h.percent))},u=(h,p)=>{const m=r(p);m&&(m.status="success",m.response=h,n.onSuccess(h,m,t.value),n.onChange(m,t.value))},c=h=>{es(h.uid)&&(h.uid=$5());const p={name:h.name,percentage:0,status:"ready",size:h.size,raw:h,uid:h.uid};if(n.listType==="picture-card"||n.listType==="picture")try{p.url=URL.createObjectURL(h)}catch(m){m.message,n.onError(m,p,t.value)}t.value=[...t.value,p],n.onChange(p,t.value)},d=async h=>{const p=h instanceof File?r(h):h;p||Xa(k$,"file to be removed not found");const m=v=>{i(v),s(v),n.onRemove(v,t.value),L$(v)};n.beforeRemove?await n.beforeRemove(p,t.value)!==!1&&m(p):m(p)};function f(){t.value.filter(({status:h})=>h==="ready").forEach(({raw:h})=>{var p;return h&&((p=e.value)==null?void 0:p.upload(h))})}return St(()=>n.listType,h=>{h!=="picture-card"&&h!=="picture"||(t.value=t.value.map(p=>{const{raw:m,url:v}=p;if(!v&&m)try{p.url=URL.createObjectURL(m)}catch(g){n.onError(g,p,t.value)}return p}))}),St(t,h=>{for(const p of h)p.uid||(p.uid=$5()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:i,clearFiles:a,handleError:o,handleProgress:l,handleStart:c,handleSuccess:u,handleRemove:d,submit:f,revokeFileObjectURL:L$}},OBe=Ne({name:"ElUpload"}),NBe=Ne({...OBe,props:SBe,setup(n,{expose:e}){const t=n,r=Js(),i=jr(),{abort:a,submit:s,clearFiles:o,uploadFiles:l,handleStart:u,handleError:c,handleRemove:d,handleSuccess:f,handleProgress:h,revokeFileObjectURL:p}=LBe(t,i),m=V(()=>t.listType==="picture-card"),v=V(()=>({...t,fileList:l.value,onStart:u,onProgress:h,onSuccess:f,onError:c,onRemove:d}));return Wr(()=>{l.value.forEach(p)}),pr(oie,{accept:Kr(t,"accept")}),e({abort:a,submit:s,clearFiles:o,handleStart:u,handleRemove:d}),(g,y)=>(W(),Se("div",null,[S(m)&&g.showFileList?(W(),pt(P$,{key:0,disabled:S(r),"list-type":g.listType,files:S(l),crossorigin:g.crossorigin,"handle-preview":g.onPreview,onRemove:S(d)},Wu({append:Oe(()=>[be(R$,lr({ref_key:"uploadRef",ref:i},S(v)),{default:Oe(()=>[g.$slots.trigger?at(g.$slots,"trigger",{key:0}):st("v-if",!0),!g.$slots.trigger&&g.$slots.default?at(g.$slots,"default",{key:1}):st("v-if",!0)]),_:3},16)]),_:2},[g.$slots.file?{name:"default",fn:Oe(({file:_,index:b})=>[at(g.$slots,"file",{file:_,index:b})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):st("v-if",!0),!S(m)||S(m)&&!g.showFileList?(W(),pt(R$,lr({key:1,ref_key:"uploadRef",ref:i},S(v)),{default:Oe(()=>[g.$slots.trigger?at(g.$slots,"trigger",{key:0}):st("v-if",!0),!g.$slots.trigger&&g.$slots.default?at(g.$slots,"default",{key:1}):st("v-if",!0)]),_:3},16)):st("v-if",!0),g.$slots.trigger?at(g.$slots,"default",{key:2}):st("v-if",!0),at(g.$slots,"tip"),!S(m)&&g.showFileList?(W(),pt(P$,{key:3,disabled:S(r),"list-type":g.listType,files:S(l),crossorigin:g.crossorigin,"handle-preview":g.onPreview,onRemove:S(d)},Wu({_:2},[g.$slots.file?{name:"default",fn:Oe(({file:_,index:b})=>[at(g.$slots,"file",{file:_,index:b})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):st("v-if",!0)]))}});var BBe=$t(NBe,[["__file","upload.vue"]]);const FBe=Bn(BBe),UBe=Vt({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:tt([String,Array]),default:"Element Plus"},font:{type:tt(Object)},gap:{type:tt(Array),default:()=>[100,100]},offset:{type:tt(Array)}});function zBe(n){return n.replace(/([A-Z])/g,"-$1").toLowerCase()}function HBe(n){return Object.keys(n).map(e=>`${zBe(e)}: ${n[e]};`).join(" ")}function VBe(){return window.devicePixelRatio||1}const $Be=(n,e)=>{let t=!1;return n.removedNodes.length&&e&&(t=Array.from(n.removedNodes).includes(e)),n.type==="attributes"&&n.target===e&&(t=!0),t},die=3;function JD(n,e,t=1){const r=document.createElement("canvas"),i=r.getContext("2d"),a=n*t,s=e*t;return r.setAttribute("width",`${a}px`),r.setAttribute("height",`${s}px`),i.save(),[i,r,a,s]}function GBe(){function n(e,t,r,i,a,s,o,l){const[u,c,d,f]=JD(i,a,r);if(e instanceof HTMLImageElement)u.drawImage(e,0,0,d,f);else{const{color:ee,fontSize:re,fontStyle:ne,fontWeight:ae,fontFamily:pe,textAlign:de,textBaseline:me}=s,ke=Number(re)*r;u.font=`${ne} normal ${ae} ${ke}px/${a}px ${pe}`,u.fillStyle=ee,u.textAlign=de,u.textBaseline=me;const Be=Ut(e)?e:[e];Be==null||Be.forEach((Xe,Ye)=>{u.fillText(Xe??"",d/2,Ye*(ke+die*r))})}const h=Math.PI/180*Number(t),p=Math.max(i,a),[m,v,g]=JD(p,p,r);m.translate(g/2,g/2),m.rotate(h),d>0&&f>0&&m.drawImage(c,-d/2,-f/2);function y(ee,re){const ne=ee*Math.cos(h)-re*Math.sin(h),ae=ee*Math.sin(h)+re*Math.cos(h);return[ne,ae]}let _=0,b=0,x=0,w=0;const A=d/2,T=f/2;[[0-A,0-T],[0+A,0-T],[0+A,0+T],[0-A,0+T]].forEach(([ee,re])=>{const[ne,ae]=y(ee,re);_=Math.min(_,ne),b=Math.max(b,ne),x=Math.min(x,ae),w=Math.max(w,ae)});const E=_+g/2,I=x+g/2,P=b-_,L=w-x,N=o*r,F=l*r,k=(P+N)*2,H=L+F,[U,B]=JD(k,H);function $(ee=0,re=0){U.drawImage(v,E,I,P,L,ee,re,P,L)}return $(),$(P+N,-L/2-F/2),$(P+N,+L/2+F/2),[B.toDataURL(),k/r,H/r]}return n}const WBe=Ne({name:"ElWatermark"}),qBe=Ne({...WBe,props:UBe,setup(n){const e=n,t={position:"relative"},r=V(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.color)!=null?I:"rgba(0,0,0,.15)"}),i=V(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.fontSize)!=null?I:16}),a=V(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.fontWeight)!=null?I:"normal"}),s=V(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.fontStyle)!=null?I:"normal"}),o=V(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.fontFamily)!=null?I:"sans-serif"}),l=V(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.textAlign)!=null?I:"center"}),u=V(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.textBaseline)!=null?I:"hanging"}),c=V(()=>e.gap[0]),d=V(()=>e.gap[1]),f=V(()=>c.value/2),h=V(()=>d.value/2),p=V(()=>{var E,I;return(I=(E=e.offset)==null?void 0:E[0])!=null?I:f.value}),m=V(()=>{var E,I;return(I=(E=e.offset)==null?void 0:E[1])!=null?I:h.value}),v=()=>{const E={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let I=p.value-f.value,P=m.value-h.value;return I>0&&(E.left=`${I}px`,E.width=`calc(100% - ${I}px)`,I=0),P>0&&(E.top=`${P}px`,E.height=`calc(100% - ${P}px)`,P=0),E.backgroundPosition=`${I}px ${P}px`,E},g=jr(null),y=jr(),_=ie(!1),b=()=>{y.value&&(y.value.remove(),y.value=void 0)},x=(E,I)=>{var P;g.value&&y.value&&(_.value=!0,y.value.setAttribute("style",HBe({...v(),backgroundImage:`url('${E}')`,backgroundSize:`${Math.floor(I)}px`})),(P=g.value)==null||P.append(y.value),setTimeout(()=>{_.value=!1}))},w=E=>{let I=120,P=64;const L=e.image,N=e.content,F=e.width,k=e.height;if(!L&&E.measureText){E.font=`${Number(i.value)}px ${o.value}`;const H=Ut(N)?N:[N],U=H.map(B=>{const $=E.measureText(B);return[$.width,$.fontBoundingBoxAscent!==void 0?$.fontBoundingBoxAscent+$.fontBoundingBoxDescent:$.actualBoundingBoxAscent+$.actualBoundingBoxDescent]});I=Math.ceil(Math.max(...U.map(B=>B[0]))),P=Math.ceil(Math.max(...U.map(B=>B[1])))*H.length+(H.length-1)*die}return[F??I,k??P]},A=GBe(),T=()=>{const I=document.createElement("canvas").getContext("2d"),P=e.image,L=e.content,N=e.rotate;if(I){y.value||(y.value=document.createElement("div"));const F=VBe(),[k,H]=w(I),U=B=>{const[$,ee]=A(B||"",N,F,k,H,{color:r.value,fontSize:i.value,fontStyle:s.value,fontWeight:a.value,fontFamily:o.value,textAlign:l.value,textBaseline:u.value},c.value,d.value);x($,ee)};if(P){const B=new Image;B.onload=()=>{U(B)},B.onerror=()=>{U(L)},B.crossOrigin="anonymous",B.referrerPolicy="no-referrer",B.src=P}else U(L)}};return zn(()=>{T()}),St(()=>e,()=>{T()},{deep:!0,flush:"post"}),Wr(()=>{b()}),oee(g,E=>{_.value||E.forEach(I=>{$Be(I,y.value)&&(b(),T())})},{attributes:!0,subtree:!0,childList:!0}),(E,I)=>(W(),Se("div",{ref_key:"containerRef",ref:g,style:Jt([t])},[at(E.$slots,"default")],4))}});var jBe=$t(qBe,[["__file","watermark.vue"]]);const KBe=Bn(jBe),XBe=Vt({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:tt(Object)},targetAreaClickable:{type:Boolean,default:!0}}),YBe=(n,e,t,r,i)=>{const a=ie(null),s=()=>{let d;return ln(n.value)?d=document.querySelector(n.value):hn(n.value)?d=n.value():d=n.value,d},o=()=>{const d=s();if(!d||!e.value){a.value=null;return}QBe(d)||d.scrollIntoView(i.value);const{left:f,top:h,width:p,height:m}=d.getBoundingClientRect();a.value={left:f,top:h,width:p,height:m,radius:0}};zn(()=>{St([e,n],()=>{o()},{immediate:!0}),window.addEventListener("resize",o)}),Wr(()=>{window.removeEventListener("resize",o)});const l=d=>{var f;return(f=Ut(t.value.offset)?t.value.offset[d]:t.value.offset)!=null?f:6},u=V(()=>{var d;if(!a.value)return a.value;const f=l(0),h=l(1),p=((d=t.value)==null?void 0:d.radius)||2;return{left:a.value.left-f,top:a.value.top-h,width:a.value.width+f*2,height:a.value.height+h*2,radius:p}}),c=V(()=>{const d=s();return!r.value||!d||!window.DOMRect?d||void 0:{getBoundingClientRect(){var f,h,p,m;return window.DOMRect.fromRect({width:((f=u.value)==null?void 0:f.width)||0,height:((h=u.value)==null?void 0:h.height)||0,x:((p=u.value)==null?void 0:p.left)||0,y:((m=u.value)==null?void 0:m.top)||0})}}});return{mergedPosInfo:u,triggerTarget:c}},W4=Symbol("ElTour");function QBe(n){const e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,{top:r,right:i,bottom:a,left:s}=n.getBoundingClientRect();return r>=0&&s>=0&&i<=e&&a<=t}const ZBe=(n,e,t,r,i,a,s,o)=>{const l=ie(),u=ie(),c=ie({}),d={x:l,y:u,placement:r,strategy:i,middlewareData:c},f=V(()=>{const g=[Ure(S(a)),N8e(),F8e(),JBe()];return S(o)&&S(t)&&g.push(Fre({element:S(t)})),g}),h=async()=>{if(!Cr)return;const g=S(n),y=S(e);if(!g||!y)return;const _=await jre(g,y,{placement:S(r),strategy:S(i),middleware:S(f)});A1(d).forEach(b=>{d[b].value=_[b]})},p=V(()=>{if(!S(n))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:S(s)};const{overflow:g}=S(c);return{position:S(i),zIndex:S(s),top:S(u)!=null?`${S(u)}px`:"",left:S(l)!=null?`${S(l)}px`:"",maxWidth:g!=null&&g.maxWidth?`${g==null?void 0:g.maxWidth}px`:""}}),m=V(()=>{if(!S(o))return{};const{arrow:g}=S(c);return{left:(g==null?void 0:g.x)!=null?`${g==null?void 0:g.x}px`:"",top:(g==null?void 0:g.y)!=null?`${g==null?void 0:g.y}px`:""}});let v;return zn(()=>{const g=S(n),y=S(e);g&&y&&(v=nNe(g,y,h)),vs(()=>{h()})}),Wr(()=>{v&&v()}),{update:h,contentStyle:p,arrowStyle:m}},JBe=()=>({name:"overflow",async fn(n){const e=await KB(n);let t=0;return e.left>0&&(t=e.left),e.right>0&&(t=e.right),{data:{maxWidth:n.rects.floating.width-t}}}}),eFe=Ne({name:"ElTourMask",inheritAttrs:!1}),tFe=Ne({...eFe,props:XBe,setup(n){const e=n,{ns:t}=Yt(W4),r=V(()=>{var o,l;return(l=(o=e.pos)==null?void 0:o.radius)!=null?l:2}),i=V(()=>{const o=r.value,l=`a${o},${o} 0 0 1`;return{topRight:`${l} ${o},${o}`,bottomRight:`${l} ${-o},${o}`,bottomLeft:`${l} ${-o},${-o}`,topLeft:`${l} ${o},${-o}`}}),a=V(()=>{const o=window.innerWidth,l=window.innerHeight,u=i.value,c=`M${o},0 L0,0 L0,${l} L${o},${l} L${o},0 Z`,d=r.value;return e.pos?`${c} M${e.pos.left+d},${e.pos.top} h${e.pos.width-d*2} ${u.topRight} v${e.pos.height-d*2} ${u.bottomRight} h${-e.pos.width+d*2} ${u.bottomLeft} v${-e.pos.height+d*2} ${u.topLeft} z`:c}),s=V(()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"}));return xB(Kr(e,"visible"),{ns:t}),(o,l)=>o.visible?(W(),Se("div",lr({key:0,class:S(t).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:o.zIndex,pointerEvents:o.pos&&o.targetAreaClickable?"none":"auto"}},o.$attrs),[(W(),Se("svg",{style:{width:"100%",height:"100%"}},[Ce("path",{class:J(S(t).e("hollow")),style:Jt(S(s)),d:S(a)},null,14,["d"])]))],16)):st("v-if",!0)}});var nFe=$t(tFe,[["__file","mask.vue"]]);const rFe=["absolute","fixed"],iFe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],tF=Vt({placement:{type:tt(String),values:iFe,default:"bottom"},reference:{type:tt(Object),default:null},strategy:{type:tt(String),values:rFe,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),aFe={close:()=>!0},sFe=Ne({name:"ElTourContent"}),oFe=Ne({...sFe,props:tF,emits:aFe,setup(n,{emit:e}){const t=n,r=ie(t.placement),i=ie(t.strategy),a=ie(null),s=ie(null);St(()=>t.placement,()=>{r.value=t.placement});const{contentStyle:o,arrowStyle:l}=ZBe(Kr(t,"reference"),a,s,r,i,Kr(t,"offset"),Kr(t,"zIndex"),Kr(t,"showArrow")),u=V(()=>r.value.split("-")[0]),{ns:c}=Yt(W4),d=()=>{e("close")},f=h=>{h.detail.focusReason==="pointer"&&h.preventDefault()};return(h,p)=>(W(),Se("div",{ref_key:"contentRef",ref:a,style:Jt(S(o)),class:J(S(c).e("content")),"data-side":S(u),tabindex:"-1"},[be(S(P_),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":a.value||void 0,onReleaseRequested:d,onFocusoutPrevented:f},{default:Oe(()=>[at(h.$slots,"default")]),_:3},8,["focus-trap-el"]),h.showArrow?(W(),Se("span",{key:0,ref_key:"arrowRef",ref:s,style:Jt(S(l)),class:J(S(c).e("arrow"))},null,6)):st("v-if",!0)],14,["data-side"]))}});var lFe=$t(oFe,[["__file","content.vue"]]),uFe=Ne({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(n,{slots:e,emit:t}){let r=0;return()=>{var i,a;const s=(i=e.default)==null?void 0:i.call(e),o=[];let l=0;function u(c){Ut(c)&&c.forEach(d=>{var f;((f=(d==null?void 0:d.type)||{})==null?void 0:f.name)==="ElTourStep"&&(o.push(d),l+=1)})}return s.length&&u(wp((a=s[0])==null?void 0:a.children)),r!==l&&(r=l,t("update-total",l)),o.length?o[n.current]:null}}});const cFe=Vt({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:li},placement:tF.placement,contentStyle:{type:tt([Object])},mask:{type:tt([Boolean,Object]),default:!0},gap:{type:tt(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:tt([Boolean,Object]),default:()=>({block:"center"})},type:{type:tt(String)},appendTo:{type:tt([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),dFe={[jn]:n=>mi(n),"update:current":n=>_n(n),close:n=>_n(n),finish:()=>!0,change:n=>_n(n)},fFe=Ne({name:"ElTour"}),hFe=Ne({...fFe,props:cFe,emits:dFe,setup(n,{emit:e}){const t=n,r=kt("tour"),i=ie(0),a=ie(),s=lee(t,"current",e,{passive:!0}),o=V(()=>{var C;return(C=a.value)==null?void 0:C.target}),l=V(()=>[r.b(),v.value==="primary"?r.m("primary"):""]),u=V(()=>{var C;return((C=a.value)==null?void 0:C.placement)||t.placement}),c=V(()=>{var C,E;return(E=(C=a.value)==null?void 0:C.contentStyle)!=null?E:t.contentStyle}),d=V(()=>{var C,E;return(E=(C=a.value)==null?void 0:C.mask)!=null?E:t.mask}),f=V(()=>!!d.value&&t.modelValue),h=V(()=>mi(d.value)?void 0:d.value),p=V(()=>{var C,E;return!!o.value&&((E=(C=a.value)==null?void 0:C.showArrow)!=null?E:t.showArrow)}),m=V(()=>{var C,E;return(E=(C=a.value)==null?void 0:C.scrollIntoViewOptions)!=null?E:t.scrollIntoViewOptions}),v=V(()=>{var C,E;return(E=(C=a.value)==null?void 0:C.type)!=null?E:t.type}),{nextZIndex:g}=I_(),y=g(),_=V(()=>{var C;return(C=t.zIndex)!=null?C:y}),{mergedPosInfo:b,triggerTarget:x}=YBe(o,Kr(t,"modelValue"),Kr(t,"gap"),d,m);St(()=>t.modelValue,C=>{C||(s.value=0)});const w=()=>{t.closeOnPressEscape&&(e("update:modelValue",!1),e("close",s.value))},A=C=>{i.value=C},T=Oa();return pr(W4,{currentStep:a,current:s,total:i,showClose:Kr(t,"showClose"),closeIcon:Kr(t,"closeIcon"),mergedType:v,ns:r,slots:T,updateModelValue(C){e("update:modelValue",C)},onClose(){e("close",s.value)},onFinish(){e("finish")},onChange(){e("change",s.value)}}),(C,E)=>(W(),Se(on,null,[be(S(R_),{to:C.appendTo},{default:Oe(()=>{var I,P;return[Ce("div",lr({class:S(l)},C.$attrs),[be(nFe,{visible:S(f),fill:(I=S(h))==null?void 0:I.color,style:Jt((P=S(h))==null?void 0:P.style),pos:S(b),"z-index":S(_),"target-area-clickable":C.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),C.modelValue?(W(),pt(lFe,{key:S(s),reference:S(x),placement:S(u),"show-arrow":S(p),"z-index":S(_),style:Jt(S(c)),onClose:w},{default:Oe(()=>[be(S(uFe),{current:S(s),onUpdateTotal:A},{default:Oe(()=>[at(C.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):st("v-if",!0)],16)]}),_:3},8,["to"]),st(" just for IDE "),st("v-if",!0)],64))}});var pFe=$t(hFe,[["__file","tour.vue"]]);const mFe=Vt({target:{type:tt([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:li},showArrow:{type:Boolean,default:void 0},placement:tF.placement,mask:{type:tt([Boolean,Object]),default:void 0},contentStyle:{type:tt([Object])},prevButtonProps:{type:tt(Object)},nextButtonProps:{type:tt(Object)},scrollIntoViewOptions:{type:tt([Boolean,Object]),default:void 0},type:{type:tt(String)}}),vFe={close:()=>!0},gFe=Ne({name:"ElTourStep"}),yFe=Ne({...gFe,props:mFe,emits:vFe,setup(n,{emit:e}){const t=n,{Close:r}=WN,{t:i}=Ar(),{currentStep:a,current:s,total:o,showClose:l,closeIcon:u,mergedType:c,ns:d,slots:f,updateModelValue:h,onClose:p,onFinish:m,onChange:v}=Yt(W4);St(t,T=>{a.value=T},{immediate:!0});const g=V(()=>{var T;return(T=t.showClose)!=null?T:l.value}),y=V(()=>{var T,C;return(C=(T=t.closeIcon)!=null?T:u.value)!=null?C:r}),_=T=>{if(T)return Vbe(T,["children","onClick"])},b=()=>{var T,C;s.value-=1,(T=t.prevButtonProps)!=null&&T.onClick&&((C=t.prevButtonProps)==null||C.onClick()),v()},x=()=>{var T;s.value>=o.value-1?w():s.value+=1,(T=t.nextButtonProps)!=null&&T.onClick&&t.nextButtonProps.onClick(),v()},w=()=>{A(),m()},A=()=>{h(!1),p(),e("close")};return(T,C)=>(W(),Se(on,null,[S(g)?(W(),Se("button",{key:0,"aria-label":"Close",class:J(S(d).e("closebtn")),type:"button",onClick:A},[be(S(tn),{class:J(S(d).e("close"))},{default:Oe(()=>[(W(),pt(ir(S(y))))]),_:1},8,["class"])],2)):st("v-if",!0),Ce("header",{class:J([S(d).e("header"),{"show-close":S(l)}])},[at(T.$slots,"header",{},()=>[Ce("span",{role:"heading",class:J(S(d).e("title"))},Ft(T.title),3)])],2),Ce("div",{class:J(S(d).e("body"))},[at(T.$slots,"default",{},()=>[Ce("span",null,Ft(T.description),1)])],2),Ce("footer",{class:J(S(d).e("footer"))},[Ce("div",{class:J(S(d).b("indicators"))},[S(f).indicators?(W(),pt(ir(S(f).indicators),{key:0,current:S(s),total:S(o)},null,8,["current","total"])):(W(!0),Se(on,{key:1},ur(S(o),(E,I)=>(W(),Se("span",{key:E,class:J([S(d).b("indicator"),I===S(s)?"is-active":""])},null,2))),128))],2),Ce("div",{class:J(S(d).b("buttons"))},[S(s)>0?(W(),pt(S(gs),lr({key:0,size:"small",type:S(c)},_(T.prevButtonProps),{onClick:b}),{default:Oe(()=>{var E,I;return[Xn(Ft((I=(E=T.prevButtonProps)==null?void 0:E.children)!=null?I:S(i)("el.tour.previous")),1)]}),_:1},16,["type"])):st("v-if",!0),S(s)<=S(o)-1?(W(),pt(S(gs),lr({key:1,size:"small",type:S(c)==="primary"?"default":"primary"},_(T.nextButtonProps),{onClick:x}),{default:Oe(()=>{var E,I;return[Xn(Ft((I=(E=T.nextButtonProps)==null?void 0:E.children)!=null?I:S(s)===S(o)-1?S(i)("el.tour.finish"):S(i)("el.tour.next")),1)]}),_:1},16,["type"])):st("v-if",!0)],2)],2)],64))}});var fie=$t(yFe,[["__file","step.vue"]]);const _Fe=Bn(pFe,{TourStep:fie}),bFe=Xi(fie),SFe=Vt({container:{type:tt([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:tt(String),default:"default"},direction:{type:tt(String),default:"vertical"}}),xFe={change:n=>ln(n),click:(n,e)=>n instanceof MouseEvent&&(ln(e)||ti(e))},hie=Symbol("anchor"),NT=n=>{if(!Cr||n==="")return null;if(ln(n))try{return document.querySelector(n)}catch{return null}return n};function wFe(n){let e=0;const t=(...r)=>{e&&ov(e),e=Fp(()=>{n(...r),e=0})};return t.cancel=()=>{ov(e),e=0},t}const TFe=Ne({name:"ElAnchor"}),CFe=Ne({...TFe,props:SFe,emits:xFe,setup(n,{expose:e,emit:t}){const r=n,i=ie(""),a=ie(null),s=ie(null),o=ie(),l={};let u=!1,c=0;const d=kt("anchor"),f=V(()=>[d.b(),r.type==="underline"?d.m("underline"):"",d.m(r.direction)]),h=T=>{l[T.href]=T.el},p=T=>{delete l[T]},m=T=>{i.value!==T&&(i.value=T,t("change",T))};let v=null;const g=T=>{if(!o.value)return;const C=NT(T);if(!C)return;v&&v(),u=!0;const E=GH(C,o.value),I=n5(C,E),P=E.scrollHeight-E.clientHeight,L=Math.min(I-r.offset,P);v=KSe(o.value,c,L,r.duration,()=>{setTimeout(()=>{u=!1},20)})},y=T=>{T&&(m(T),g(T))},_=(T,C)=>{t("click",T,C),y(C)},b=wFe(()=>{o.value&&(c=WH(o.value));const T=x();u||ti(T)||m(T)}),x=()=>{if(!o.value)return;const T=WH(o.value),C=[];for(const E of Object.keys(l)){const I=NT(E);if(!I)continue;const P=GH(I,o.value),L=n5(I,P);C.push({top:L-r.offset-r.bound,href:E})}C.sort((E,I)=>E.top-I.top);for(let E=0;E<C.length;E++){const I=C[E],P=C[E+1];if(E===0&&T===0)return"";if(I.top<=T&&(!P||P.top>T))return I.href}},w=()=>{const T=NT(r.container);!T||T4(T)?o.value=window:o.value=T};ni(o,"scroll",b);const A=V(()=>{if(!a.value||!s.value||!i.value)return{};const T=l[i.value];if(!T)return{};const C=a.value.getBoundingClientRect(),E=s.value.getBoundingClientRect(),I=T.getBoundingClientRect();return r.direction==="horizontal"?{left:`${I.left-C.left}px`,width:`${I.width}px`,opacity:1}:{top:`${I.top-C.top+(I.height-E.height)/2}px`,opacity:1}});return zn(()=>{w();const T=decodeURIComponent(window.location.hash);NT(T)?y(T):b()}),St(()=>r.container,()=>{w()}),pr(hie,{ns:d,direction:r.direction,currentAnchor:i,addLink:h,removeLink:p,handleClick:_}),e({scrollTo:y}),(T,C)=>(W(),Se("div",{ref_key:"anchorRef",ref:a,class:J(S(f))},[T.marker?(W(),Se("div",{key:0,ref_key:"markerRef",ref:s,class:J(S(d).e("marker")),style:Jt(S(A))},null,6)):st("v-if",!0),Ce("div",{class:J(S(d).e("list"))},[at(T.$slots,"default")],2)],2))}});var AFe=$t(CFe,[["__file","anchor.vue"]]);const EFe=Vt({title:String,href:String}),MFe=Ne({name:"ElAnchorLink"}),IFe=Ne({...MFe,props:EFe,setup(n){const e=n,t=ie(null),{ns:r,direction:i,currentAnchor:a,addLink:s,removeLink:o,handleClick:l}=Yt(hie),u=V(()=>[r.e("link"),r.is("active",a.value===e.href)]),c=d=>{l(d,e.href)};return St(()=>e.href,(d,f)=>{cn(()=>{f&&o(f),d&&s({href:d,el:t.value})})}),zn(()=>{const{href:d}=e;d&&s({href:d,el:t.value})}),Wr(()=>{const{href:d}=e;d&&o(d)}),(d,f)=>(W(),Se("div",{class:J(S(r).e("item"))},[Ce("a",{ref_key:"linkRef",ref:t,class:J(S(u)),href:d.href,onClick:c},[at(d.$slots,"default",{},()=>[Xn(Ft(d.title),1)])],10,["href"]),d.$slots["sub-link"]&&S(i)==="vertical"?(W(),Se("div",{key:0,class:J(S(r).e("list"))},[at(d.$slots,"sub-link")],2)):st("v-if",!0)],2))}});var pie=$t(IFe,[["__file","anchor-link.vue"]]);const DFe=Bn(AFe,{AnchorLink:pie}),PFe=Xi(pie),RFe=Vt({direction:{type:tt(String),default:"horizontal"},options:{type:tt(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},block:Boolean,size:La,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...ks(["ariaLabel"])}),kFe={[jn]:n=>ln(n)||_n(n)||mi(n),[si]:n=>ln(n)||_n(n)||mi(n)},LFe=Ne({name:"ElSegmented"}),OFe=Ne({...LFe,props:RFe,emits:kFe,setup(n,{emit:e}){const t=n,r=kt("segmented"),i=Ds(),a=Ca(),s=Js(),{formItem:o}=Zs(),{inputId:l,isLabeledByFormItem:u}=ec(t,{formItemContext:o}),c=ie(null),d=gSe(),f=$r({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),h=C=>{const E=p(C);e(jn,E),e(si,E)},p=C=>er(C)?C.value:C,m=C=>er(C)?C.label:C,v=C=>!!(s.value||er(C)&&C.disabled),g=C=>t.modelValue===p(C),y=C=>t.options.find(E=>p(E)===C),_=C=>[r.e("item"),r.is("selected",g(C)),r.is("disabled",v(C))],b=()=>{if(!c.value)return;const C=c.value.querySelector(".is-selected"),E=c.value.querySelector(".is-selected input");if(!C||!E){f.width=0,f.height=0,f.translateX=0,f.translateY=0,f.focusVisible=!1;return}const I=C.getBoundingClientRect();f.isInit=!0,t.direction==="vertical"?(f.height=I.height,f.translateY=C.offsetTop):(f.width=I.width,f.translateX=C.offsetLeft);try{f.focusVisible=E.matches(":focus-visible")}catch{}},x=V(()=>[r.b(),r.m(a.value),r.is("block",t.block)]),w=V(()=>({width:t.direction==="vertical"?"100%":`${f.width}px`,height:t.direction==="vertical"?`${f.height}px`:"100%",transform:t.direction==="vertical"?`translateY(${f.translateY}px)`:`translateX(${f.translateX}px)`,display:f.isInit?"block":"none"})),A=V(()=>[r.e("item-selected"),r.is("disabled",v(y(t.modelValue))),r.is("focus-visible",f.focusVisible)]),T=V(()=>t.name||i.value);return zi(c,b),St(d,b),St(()=>t.modelValue,()=>{var C;b(),t.validateEvent&&((C=o==null?void 0:o.validate)==null||C.call(o,"change").catch(E=>void 0))},{flush:"post"}),(C,E)=>C.options.length?(W(),Se("div",{key:0,id:S(l),ref_key:"segmentedRef",ref:c,class:J(S(x)),role:"radiogroup","aria-label":S(u)?void 0:C.ariaLabel||"segmented","aria-labelledby":S(u)?S(o).labelId:void 0},[Ce("div",{class:J([S(r).e("group"),S(r).m(t.direction)])},[Ce("div",{style:Jt(S(w)),class:J(S(A))},null,6),(W(!0),Se(on,null,ur(C.options,(I,P)=>(W(),Se("label",{key:P,class:J(_(I))},[Ce("input",{class:J(S(r).e("item-input")),type:"radio",name:S(T),disabled:v(I),checked:g(I),onChange:L=>h(I)},null,42,["name","disabled","checked","onChange"]),Ce("div",{class:J(S(r).e("item-label"))},[at(C.$slots,"default",{item:I},()=>[Xn(Ft(m(I)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):st("v-if",!0)}});var NFe=$t(OFe,[["__file","segmented.vue"]]);const BFe=Bn(NFe),FFe=(n,e)=>{const t=n.toLowerCase();return(e.label||e.value).toLowerCase().includes(t)},UFe=(n,e,t)=>{const{selectionEnd:r}=n;if(r===null)return;const i=n.value,a=vo(e);let s=-1,o;for(let l=r-1;l>=0;--l){const u=i[l];if(u===t||u===`
`||u==="\r"){s=l;continue}if(a.includes(u)){const c=s===-1?r:s;o={pattern:i.slice(l+1,c),start:l+1,end:c,prefix:u,prefixIndex:l,splitIndex:s,selectionEnd:r};break}}return o},zFe=(n,e={debug:!1,useSelectionEnd:!1})=>{const t=n.selectionStart!==null?n.selectionStart:0,r=n.selectionEnd!==null?n.selectionEnd:0,i=e.useSelectionEnd?r:t,a=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(e.debug){const f=document.querySelector("#input-textarea-caret-position-mirror-div");f!=null&&f.parentNode&&f.parentNode.removeChild(f)}const s=document.createElement("div");s.id="input-textarea-caret-position-mirror-div",document.body.appendChild(s);const o=s.style,l=window.getComputedStyle(n),u=n.nodeName==="INPUT";o.whiteSpace=u?"nowrap":"pre-wrap",u||(o.wordWrap="break-word"),o.position="absolute",e.debug||(o.visibility="hidden"),a.forEach(f=>{if(u&&f==="lineHeight")if(l.boxSizing==="border-box"){const h=Number.parseInt(l.height),p=Number.parseInt(l.paddingTop)+Number.parseInt(l.paddingBottom)+Number.parseInt(l.borderTopWidth)+Number.parseInt(l.borderBottomWidth),m=p+Number.parseInt(l.lineHeight);h>m?o.lineHeight=`${h-p}px`:h===m?o.lineHeight=l.lineHeight:o.lineHeight="0"}else o.lineHeight=l.height;else o[f]=l[f]}),D4()?n.scrollHeight>Number.parseInt(l.height)&&(o.overflowY="scroll"):o.overflow="hidden",s.textContent=n.value.slice(0,Math.max(0,i)),u&&s.textContent&&(s.textContent=s.textContent.replace(/\s/g," "));const c=document.createElement("span");c.textContent=n.value.slice(Math.max(0,i))||".",c.style.position="relative",c.style.left=`${-n.scrollLeft}px`,c.style.top=`${-n.scrollTop}px`,s.appendChild(c);const d={top:c.offsetTop+Number.parseInt(l.borderTopWidth),left:c.offsetLeft+Number.parseInt(l.borderLeftWidth),height:Number.parseInt(l.fontSize)*1.5};return e.debug?c.style.backgroundColor="#aaa":document.body.removeChild(s),d.left>=n.clientWidth&&(d.left=n.clientWidth),d},HFe=Vt({...jN,options:{type:tt(Array),default:()=>[]},prefix:{type:tt([String,Array]),default:"@",validator:n=>ln(n)?n.length===1:n.every(e=>ln(e)&&e.length===1)},split:{type:String,default:" ",validator:n=>n.length===1},filterOption:{type:tt([Boolean,Function]),default:()=>FFe,validator:n=>n===!1?!0:hn(n)},placement:{type:tt(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:tt(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:tt(Object),default:()=>({})}}),VFe={[jn]:n=>ln(n),search:(n,e)=>ln(n)&&ln(e),select:(n,e)=>ln(n.value)&&ln(e),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},$Fe=Vt({options:{type:tt(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),GFe={select:n=>ln(n.value)},WFe=Ne({name:"ElMentionDropdown"}),qFe=Ne({...WFe,props:$Fe,emits:GFe,setup(n,{expose:e,emit:t}){const r=n,i=kt("mention"),{t:a}=Ar(),s=ie(-1),o=ie(),l=ie(),u=ie(),c=(_,b)=>[i.be("dropdown","item"),i.is("hovering",s.value===b),i.is("disabled",_.disabled||r.disabled)],d=_=>{_.disabled||r.disabled||t("select",_)},f=_=>{s.value=_},h=V(()=>r.disabled||r.options.every(_=>_.disabled)),p=V(()=>r.options[s.value]),m=()=>{p.value&&t("select",p.value)},v=_=>{const{options:b}=r;if(b.length===0||h.value)return;_==="next"?(s.value++,s.value===b.length&&(s.value=0)):_==="prev"&&(s.value--,s.value<0&&(s.value=b.length-1));const x=b[s.value];if(x.disabled){v(_);return}cn(()=>g(x))},g=_=>{var b,x,w,A;const{options:T}=r,C=T.findIndex(I=>I.value===_.value),E=(b=l.value)==null?void 0:b[C];if(E){const I=(w=(x=u.value)==null?void 0:x.querySelector)==null?void 0:w.call(x,`.${i.be("dropdown","wrap")}`);I&&UN(I,E)}(A=o.value)==null||A.handleScroll()};return St(()=>r.options,()=>{h.value||r.options.length===0?s.value=-1:s.value=0},{immediate:!0}),e({hoveringIndex:s,navigateOptions:v,selectHoverOption:m,hoverOption:p}),(_,b)=>(W(),Se("div",{ref_key:"dropdownRef",ref:u,class:J(S(i).b("dropdown"))},[_.$slots.header?(W(),Se("div",{key:0,class:J(S(i).be("dropdown","header"))},[at(_.$slots,"header")],2)):st("v-if",!0),Wn(be(S(Vd),{id:_.contentId,ref_key:"scrollbarRef",ref:o,tag:"ul","wrap-class":S(i).be("dropdown","wrap"),"view-class":S(i).be("dropdown","list"),role:"listbox","aria-label":_.ariaLabel,"aria-orientation":"vertical"},{default:Oe(()=>[(W(!0),Se(on,null,ur(_.options,(x,w)=>(W(),Se("li",{id:`${_.contentId}-${w}`,ref_for:!0,ref_key:"optionRefs",ref:l,key:w,class:J(c(x,w)),role:"option","aria-disabled":x.disabled||_.disabled||void 0,"aria-selected":s.value===w,onMousemove:A=>f(w),onClick:Tn(A=>d(x),["stop"])},[at(_.$slots,"label",{item:x,index:w},()=>{var A;return[Ce("span",null,Ft((A=x.label)!=null?A:x.value),1)]})],42,["id","aria-disabled","aria-selected","onMousemove","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[Nr,_.options.length>0&&!_.loading]]),_.loading?(W(),Se("div",{key:1,class:J(S(i).be("dropdown","loading"))},[at(_.$slots,"loading",{},()=>[Xn(Ft(S(a)("el.mention.loading")),1)])],2)):st("v-if",!0),_.$slots.footer?(W(),Se("div",{key:2,class:J(S(i).be("dropdown","footer"))},[at(_.$slots,"footer")],2)):st("v-if",!0)],2))}});var jFe=$t(qFe,[["__file","mention-dropdown.vue"]]);const KFe=Ne({name:"ElMention",inheritAttrs:!1}),XFe=Ne({...KFe,props:HFe,emits:VFe,setup(n,{expose:e,emit:t}){const r=n,i=V(()=>Mc(r,Object.keys(jN))),a=kt("mention"),s=Js(),o=Ds(),l=ie(),u=ie(),c=ie(),d=ie(!1),f=ie(),h=ie(),p=V(()=>r.showArrow?r.placement:`${r.placement}-start`),m=V(()=>r.showArrow?["bottom","top"]:["bottom-start","top-start"]),v=V(()=>{const{filterOption:P,options:L}=r;return!h.value||!P?L:L.filter(N=>P(h.value.pattern,N))}),g=V(()=>d.value&&(!!v.value.length||r.loading)),y=V(()=>{var P;return`${o.value}-${(P=c.value)==null?void 0:P.hoveringIndex}`}),_=P=>{t("update:modelValue",P),C()},b=P=>{var L,N,F,k;if(!(!("code"in P)||(L=l.value)!=null&&L.isComposing))switch(P.code){case jt.left:case jt.right:C();break;case jt.up:case jt.down:if(!d.value)return;P.preventDefault(),(N=c.value)==null||N.navigateOptions(P.code===jt.up?"prev":"next");break;case jt.enter:case jt.numpadEnter:if(!d.value)return;P.preventDefault(),(F=c.value)!=null&&F.hoverOption?(k=c.value)==null||k.selectHoverOption():d.value=!1;break;case jt.esc:if(!d.value)return;P.preventDefault(),d.value=!1;break;case jt.backspace:if(r.whole&&h.value){const{splitIndex:H,selectionEnd:U,pattern:B,prefixIndex:$,prefix:ee}=h.value,re=T();if(!re)return;const ne=re.value,ae=r.options.find(de=>de.value===B);if((hn(r.checkIsWhole)?r.checkIsWhole(B,ee):ae)&&H!==-1&&H+1===U){P.preventDefault();const de=ne.slice(0,$)+ne.slice(H+1);t(jn,de);const me=$;cn(()=>{re.selectionStart=me,re.selectionEnd=me,I()})}}}},{wrapperRef:x}=um(l,{beforeFocus(){return s.value},afterFocus(){C()},beforeBlur(P){var L;return(L=u.value)==null?void 0:L.isFocusInsideContent(P)},afterBlur(){d.value=!1}}),w=()=>{C()},A=P=>{if(!h.value)return;const L=T();if(!L)return;const N=L.value,{split:F}=r,k=N.slice(h.value.end),H=k.startsWith(F),U=`${P.value}${H?"":F}`,B=N.slice(0,h.value.start)+U+k;t(jn,B),t("select",P,h.value.prefix);const $=h.value.start+U.length+(H?1:0);cn(()=>{L.selectionStart=$,L.selectionEnd=$,L.focus(),I()})},T=()=>{var P,L;return r.type==="textarea"?(P=l.value)==null?void 0:P.textarea:(L=l.value)==null?void 0:L.input},C=()=>{setTimeout(()=>{E(),I(),cn(()=>{var P;return(P=u.value)==null?void 0:P.updatePopper()})},0)},E=()=>{const P=T();if(!P)return;const L=zFe(P),N=P.getBoundingClientRect(),F=l.value.$el.getBoundingClientRect();f.value={position:"absolute",width:0,height:`${L.height}px`,left:`${L.left+N.left-F.left}px`,top:`${L.top+N.top-F.top}px`}},I=()=>{const P=T();if(document.activeElement!==P){d.value=!1;return}const{prefix:L,split:N}=r;if(h.value=UFe(P,L,N),h.value&&h.value.splitIndex===-1){d.value=!0,t("search",h.value.pattern,h.value.prefix);return}d.value=!1};return e({input:l,tooltip:u,dropdownVisible:g}),(P,L)=>(W(),Se("div",{ref_key:"wrapperRef",ref:x,class:J(S(a).b())},[be(S(_o),lr(lr(S(i),P.$attrs),{ref_key:"elInputRef",ref:l,"model-value":P.modelValue,disabled:S(s),role:S(g)?"combobox":void 0,"aria-activedescendant":S(g)?S(y)||"":void 0,"aria-controls":S(g)?S(o):void 0,"aria-expanded":S(g)||void 0,"aria-label":P.ariaLabel,"aria-autocomplete":S(g)?"none":void 0,"aria-haspopup":S(g)?"listbox":void 0,onInput:_,onKeydown:b,onMousedown:w}),Wu({_:2},[ur(P.$slots,(N,F)=>({name:F,fn:Oe(k=>[at(P.$slots,F,Ac(Op(k)))])}))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),be(S(Ys),{ref_key:"tooltipRef",ref:u,visible:S(g),"popper-class":[S(a).e("popper"),P.popperClass],"popper-options":P.popperOptions,placement:S(p),"fallback-placements":S(m),effect:"light",pure:"",offset:P.offset,"show-arrow":P.showArrow},{default:Oe(()=>[Ce("div",{style:Jt(f.value)},null,4)]),content:Oe(()=>{var N;return[be(jFe,{ref_key:"dropdownRef",ref:c,options:S(v),disabled:S(s),loading:P.loading,"content-id":S(o),"aria-label":P.ariaLabel,onSelect:A,onClick:Tn((N=l.value)==null?void 0:N.focus,["stop"])},Wu({_:2},[ur(P.$slots,(F,k)=>({name:k,fn:Oe(H=>[at(P.$slots,k,Ac(Op(H)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var YFe=$t(XFe,[["__file","mention.vue"]]);const QFe=Bn(YFe);var ZFe=[JSe,b2e,hCe,FOe,_Ce,ACe,nte,FCe,UCe,gs,ute,IAe,LAe,QAe,ZAe,ZEe,Rte,iMe,Xu,fEe,wte,uMe,CMe,AMe,L4,ZMe,t3e,h3e,p3e,m3e,v3e,g3e,M4e,F4e,U4e,Q4e,dne,oIe,YIe,QIe,ZIe,bne,QDe,ZDe,tn,uPe,wne,_o,Tne,CPe,PPe,QPe,ZPe,JPe,eRe,sRe,QRe,rke,fke,Qee,kne,Dte,CEe,TEe,xke,Eke,Lke,Vd,lv,hM,PRe,hLe,xLe,wLe,VLe,jLe,qne,i5e,h5e,p5e,b5e,M6e,I6e,BOe,JOe,e8e,R1,a8e,K3e,d8e,v8e,g8e,Ys,bNe,kNe,AM,ZNe,mBe,FBe,KBe,_Fe,bFe,DFe,PFe,BFe,QFe];const Tu="ElInfiniteScroll",JFe=50,e7e=200,t7e=0,n7e={delay:{type:Number,default:e7e},distance:{type:Number,default:t7e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},nF=(n,e)=>Object.entries(n7e).reduce((t,[r,i])=>{var a,s;const{type:o,default:l}=i,u=n.getAttribute(`infinite-scroll-${r}`);let c=(s=(a=e[u])!=null?a:u)!=null?s:l;return c=c==="false"?!1:c,c=o(c),t[r]=Number.isNaN(c)?l:c,t},{}),mie=n=>{const{observer:e}=n[Tu];e&&(e.disconnect(),delete n[Tu].observer)},r7e=(n,e)=>{const{container:t,containerEl:r,instance:i,observer:a,lastScrollTop:s}=n[Tu],{disabled:o,distance:l}=nF(n,i),{clientHeight:u,scrollHeight:c,scrollTop:d}=r,f=d-s;if(n[Tu].lastScrollTop=d,a||o||f<0)return;let h=!1;if(t===n)h=c-(u+d)<=l;else{const{clientTop:p,scrollHeight:m}=n,v=n5(n,r);h=d+u>=v+p+m-l}h&&e.call(i)};function eP(n,e){const{containerEl:t,instance:r}=n[Tu],{disabled:i}=nF(n,r);i||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?e.call(r):mie(n))}const i7e={async mounted(n,e){const{instance:t,value:r}=e;hn(r)||Xa(Tu,"'v-infinite-scroll' binding value must be a function"),await cn();const{delay:i,immediate:a}=nF(n,t),s=FN(n,!0),o=s===window?document.documentElement:s,l=V0(r7e.bind(null,n,r),i);if(s){if(n[Tu]={instance:t,container:s,containerEl:o,delay:i,cb:r,onScroll:l,lastScrollTop:o.scrollTop},a){const u=new MutationObserver(V0(eP.bind(null,n,r),JFe));n[Tu].observer=u,u.observe(n,{childList:!0,subtree:!0}),eP(n,r)}s.addEventListener("scroll",l)}},unmounted(n){if(!n[Tu])return;const{container:e,onScroll:t}=n[Tu];e==null||e.removeEventListener("scroll",t),mie(n)},async updated(n){if(!n[Tu])await cn();else{const{containerEl:e,cb:t,observer:r}=n[Tu];e.clientHeight&&r&&eP(n,t)}}},G5=i7e;G5.install=n=>{n.directive("InfiniteScroll",G5)};const a7e=G5;function s7e(n){let e;const t=ie(!1),r=$r({...n,originalPosition:"",originalOverflow:"",visible:!1});function i(f){r.text=f}function a(){const f=r.parent,h=d.ns;if(!f.vLoadingAddClassList){let p=f.getAttribute("loading-number");p=Number.parseInt(p)-1,p?f.setAttribute("loading-number",p.toString()):(xo(f,h.bm("parent","relative")),f.removeAttribute("loading-number")),xo(f,h.bm("parent","hidden"))}s(),c.unmount()}function s(){var f,h;(h=(f=d.$el)==null?void 0:f.parentNode)==null||h.removeChild(d.$el)}function o(){var f;n.beforeClose&&!n.beforeClose()||(t.value=!0,clearTimeout(e),e=setTimeout(l,400),r.visible=!1,(f=n.closed)==null||f.call(n))}function l(){if(!t.value)return;const f=r.parent;t.value=!1,f.vLoadingAddClassList=void 0,a()}const u=Ne({name:"ElLoading",setup(f,{expose:h}){const{ns:p,zIndex:m}=E4("loading");return h({ns:p,zIndex:m}),()=>{const v=r.spinner||r.svg,g=an("svg",{class:"circular",viewBox:r.svgViewBox?r.svgViewBox:"0 0 50 50",...v?{innerHTML:v}:{}},[an("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),y=r.text?an("p",{class:p.b("text")},[r.text]):void 0;return an(Ka,{name:p.b("fade"),onAfterLeave:l},{default:Oe(()=>[Wn(be("div",{style:{backgroundColor:r.background||""},class:[p.b("mask"),r.customClass,r.fullscreen?"is-fullscreen":""]},[an("div",{class:p.b("spinner")},[g,y])]),[[Nr,r.visible]])])})}}}),c=pJ(u),d=c.mount(document.createElement("div"));return{...ja(r),setText:i,removeElLoadingChild:s,close:o,handleAfterLeave:l,vm:d,get $el(){return d.$el}}}let BT;const W5=function(n={}){if(!Cr)return;const e=o7e(n);if(e.fullscreen&&BT)return BT;const t=s7e({...e,closed:()=>{var i;(i=e.closed)==null||i.call(e),e.fullscreen&&(BT=void 0)}});l7e(e,e.parent,t),O$(e,e.parent,t),e.parent.vLoadingAddClassList=()=>O$(e,e.parent,t);let r=e.parent.getAttribute("loading-number");return r?r=`${Number.parseInt(r)+1}`:r="1",e.parent.setAttribute("loading-number",r),e.parent.appendChild(t.$el),cn(()=>t.visible.value=e.visible),e.fullscreen&&(BT=t),t},o7e=n=>{var e,t,r,i;let a;return ln(n.target)?a=(e=document.querySelector(n.target))!=null?e:document.body:a=n.target||document.body,{parent:a===document.body||n.body?document.body:a,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:a===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(r=n.lock)!=null?r:!1,customClass:n.customClass||"",visible:(i=n.visible)!=null?i:!0,beforeClose:n.beforeClose,closed:n.closed,target:a}},l7e=async(n,e,t)=>{const{nextZIndex:r}=t.vm.zIndex||t.vm._.exposed.zIndex,i={};if(n.fullscreen)t.originalPosition.value=Cf(document.body,"position"),t.originalOverflow.value=Cf(document.body,"overflow"),i.zIndex=r();else if(n.parent===document.body){t.originalPosition.value=Cf(document.body,"position"),await cn();for(const a of["top","left"]){const s=a==="top"?"scrollTop":"scrollLeft";i[a]=`${n.target.getBoundingClientRect()[a]+document.body[s]+document.documentElement[s]-Number.parseInt(Cf(document.body,`margin-${a}`),10)}px`}for(const a of["height","width"])i[a]=`${n.target.getBoundingClientRect()[a]}px`}else t.originalPosition.value=Cf(e,"position");for(const[a,s]of Object.entries(i))t.$el.style[a]=s},O$=(n,e,t)=>{const r=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?xo(e,r.bm("parent","relative")):ku(e,r.bm("parent","relative")),n.fullscreen&&n.lock?ku(e,r.bm("parent","hidden")):xo(e,r.bm("parent","hidden"))},hE=Symbol("ElLoading"),N$=(n,e)=>{var t,r,i,a;const s=e.instance,o=f=>er(e.value)?e.value[f]:void 0,l=f=>{const h=ln(f)&&(s==null?void 0:s[f])||f;return h&&ie(h)},u=f=>l(o(f)||n.getAttribute(`element-loading-${am(f)}`)),c=(t=o("fullscreen"))!=null?t:e.modifiers.fullscreen,d={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:c,target:(r=o("target"))!=null?r:c?void 0:n,body:(i=o("body"))!=null?i:e.modifiers.body,lock:(a=o("lock"))!=null?a:e.modifiers.lock};n[hE]={options:d,instance:W5(d)}},u7e=(n,e)=>{for(const t of Object.keys(e))xi(e[t])&&(e[t].value=n[t])},B$={mounted(n,e){e.value&&N$(n,e)},updated(n,e){const t=n[hE];e.oldValue!==e.value&&(e.value&&!e.oldValue?N$(n,e):e.value&&e.oldValue?er(e.value)&&u7e(e.value,t.options):t==null||t.instance.close())},unmounted(n){var e;(e=n[hE])==null||e.instance.close(),n[hE]=null}},c7e={install(n){n.directive("loading",B$),n.config.globalProperties.$loading=W5},directive:B$,service:W5},vie=["success","info","warning","error"],lo=Ki({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Cr?document.body:void 0}),d7e=Vt({customClass:{type:String,default:lo.customClass},center:{type:Boolean,default:lo.center},dangerouslyUseHTMLString:{type:Boolean,default:lo.dangerouslyUseHTMLString},duration:{type:Number,default:lo.duration},icon:{type:li,default:lo.icon},id:{type:String,default:lo.id},message:{type:tt([String,Object,Function]),default:lo.message},onClose:{type:tt(Function),default:lo.onClose},showClose:{type:Boolean,default:lo.showClose},type:{type:String,values:vie,default:lo.type},plain:{type:Boolean,default:lo.plain},offset:{type:Number,default:lo.offset},zIndex:{type:Number,default:lo.zIndex},grouping:{type:Boolean,default:lo.grouping},repeatNum:{type:Number,default:lo.repeatNum}}),f7e={destroy:()=>!0},Ic=TZ([]),h7e=n=>{const e=Ic.findIndex(i=>i.id===n),t=Ic[e];let r;return e>0&&(r=Ic[e-1]),{current:t,prev:r}},p7e=n=>{const{prev:e}=h7e(n);return e?e.vm.exposed.bottom.value:0},m7e=(n,e)=>Ic.findIndex(r=>r.id===n)>0?16:e,v7e=Ne({name:"ElMessage"}),g7e=Ne({...v7e,props:d7e,emits:f7e,setup(n,{expose:e}){const t=n,{Close:r}=qN,{ns:i,zIndex:a}=E4("message"),{currentZIndex:s,nextZIndex:o}=a,l=ie(),u=ie(!1),c=ie(0);let d;const f=V(()=>t.type?t.type==="error"?"danger":t.type:"info"),h=V(()=>{const A=t.type;return{[i.bm("icon",A)]:A&&Vp[A]}}),p=V(()=>t.icon||Vp[t.type]||""),m=V(()=>p7e(t.id)),v=V(()=>m7e(t.id,t.offset)+m.value),g=V(()=>c.value+v.value),y=V(()=>({top:`${v.value}px`,zIndex:s.value}));function _(){t.duration!==0&&({stop:d}=sv(()=>{x()},t.duration))}function b(){d==null||d()}function x(){u.value=!1}function w({code:A}){A===jt.esc&&x()}return zn(()=>{_(),o(),u.value=!0}),St(()=>t.repeatNum,()=>{b(),_()}),ni(document,"keydown",w),zi(l,()=>{c.value=l.value.getBoundingClientRect().height}),e({visible:u,bottom:g,close:x}),(A,T)=>(W(),pt(Ka,{name:S(i).b("fade"),onBeforeLeave:A.onClose,onAfterLeave:C=>A.$emit("destroy"),persisted:""},{default:Oe(()=>[Wn(Ce("div",{id:A.id,ref_key:"messageRef",ref:l,class:J([S(i).b(),{[S(i).m(A.type)]:A.type},S(i).is("center",A.center),S(i).is("closable",A.showClose),S(i).is("plain",A.plain),A.customClass]),style:Jt(S(y)),role:"alert",onMouseenter:b,onMouseleave:_},[A.repeatNum>1?(W(),pt(S(nte),{key:0,value:A.repeatNum,type:S(f),class:J(S(i).e("badge"))},null,8,["value","type","class"])):st("v-if",!0),S(p)?(W(),pt(S(tn),{key:1,class:J([S(i).e("icon"),S(h)])},{default:Oe(()=>[(W(),pt(ir(S(p))))]),_:1},8,["class"])):st("v-if",!0),at(A.$slots,"default",{},()=>[A.dangerouslyUseHTMLString?(W(),Se(on,{key:1},[st(" Caution here, message could've been compromised, never use user's input as message "),Ce("p",{class:J(S(i).e("content")),innerHTML:A.message},null,10,["innerHTML"])],2112)):(W(),Se("p",{key:0,class:J(S(i).e("content"))},Ft(A.message),3))]),A.showClose?(W(),pt(S(tn),{key:2,class:J(S(i).e("closeBtn")),onClick:Tn(x,["stop"])},{default:Oe(()=>[be(S(r))]),_:1},8,["class","onClick"])):st("v-if",!0)],46,["id"]),[[Nr,u.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var y7e=$t(g7e,[["__file","message.vue"]]);let _7e=1;const gie=n=>{const e=!n||ln(n)||qi(n)||hn(n)?{message:n}:n,t={...lo,...e};if(!t.appendTo)t.appendTo=document.body;else if(ln(t.appendTo)){let r=document.querySelector(t.appendTo);Zl(r)||(r=document.body),t.appendTo=r}return mi(xc.grouping)&&!t.grouping&&(t.grouping=xc.grouping),_n(xc.duration)&&t.duration===3e3&&(t.duration=xc.duration),_n(xc.offset)&&t.offset===16&&(t.offset=xc.offset),mi(xc.showClose)&&!t.showClose&&(t.showClose=xc.showClose),t},b7e=n=>{const e=Ic.indexOf(n);if(e===-1)return;Ic.splice(e,1);const{handler:t}=n;t.close()},S7e=({appendTo:n,...e},t)=>{const r=`message_${_7e++}`,i=e.onClose,a=document.createElement("div"),s={...e,id:r,onClose:()=>{i==null||i(),b7e(c)},onDestroy:()=>{Np(null,a)}},o=be(y7e,s,hn(s.message)||qi(s.message)?{default:hn(s.message)?s.message:()=>s.message}:null);o.appContext=t||F1._context,Np(o,a),n.appendChild(a.firstElementChild);const l=o.component,c={id:r,vnode:o,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:o.component.props};return c},F1=(n={},e)=>{if(!Cr)return{close:()=>{}};const t=gie(n);if(t.grouping&&Ic.length){const i=Ic.find(({vnode:a})=>{var s;return((s=a.props)==null?void 0:s.message)===t.message});if(i)return i.props.repeatNum+=1,i.props.type=t.type,i.handler}if(_n(xc.max)&&Ic.length>=xc.max)return{close:()=>{}};const r=S7e(t,e);return Ic.push(r),r.handler};vie.forEach(n=>{F1[n]=(e={},t)=>{const r=gie(e);return F1({...r,type:n},t)}});function x7e(n){for(const e of Ic)(!n||n===e.props.type)&&e.handler.close()}F1.closeAll=x7e;F1._context=null;const w7e=See(F1,"$message"),q5="_trap-focus-children",I0=[],F$=n=>{if(I0.length===0)return;const e=I0[I0.length-1][q5];if(e.length>0&&n.code===jt.tab){if(e.length===1){n.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const t=n.shiftKey,r=n.target===e[0],i=n.target===e[e.length-1];r&&t&&(n.preventDefault(),e[e.length-1].focus()),i&&!t&&(n.preventDefault(),e[0].focus())}},T7e={beforeMount(n){n[q5]=YH(n),I0.push(n),I0.length<=1&&document.addEventListener("keydown",F$)},updated(n){cn(()=>{n[q5]=YH(n)})},unmounted(){I0.shift(),I0.length===0&&document.removeEventListener("keydown",F$)}},C7e=Ne({name:"ElMessageBox",directives:{TrapFocus:T7e},components:{ElButton:gs,ElFocusTrap:P_,ElInput:_o,ElOverlay:SB,ElIcon:tn,...qN},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Kne},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(n,{emit:e}){const{locale:t,zIndex:r,ns:i,size:a}=E4("message-box",V(()=>n.buttonSize)),{t:s}=t,{nextZIndex:o}=r,l=ie(!1),u=$r({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:Lf(Pd),cancelButtonLoadingIcon:Lf(Pd),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:o()}),c=V(()=>{const k=u.type;return{[i.bm("icon",k)]:k&&Vp[k]}}),d=Ds(),f=Ds(),h=V(()=>u.icon||Vp[u.type]||""),p=V(()=>!!u.message),m=ie(),v=ie(),g=ie(),y=ie(),_=ie(),b=V(()=>u.confirmButtonClass);St(()=>u.inputValue,async k=>{await cn(),n.boxType==="prompt"&&k!==null&&P()},{immediate:!0}),St(()=>l.value,k=>{var H,U;k&&(n.boxType!=="prompt"&&(u.autofocus?g.value=(U=(H=_.value)==null?void 0:H.$el)!=null?U:m.value:g.value=m.value),u.zIndex=o()),n.boxType==="prompt"&&(k?cn().then(()=>{var B;y.value&&y.value.$el&&(u.autofocus?g.value=(B=L())!=null?B:m.value:g.value=m.value)}):(u.editorErrorMessage="",u.validateError=!1))});const x=V(()=>n.draggable),w=V(()=>n.overflow);one(m,v,x,w),zn(async()=>{await cn(),n.closeOnHashChange&&window.addEventListener("hashchange",A)}),Wr(()=>{n.closeOnHashChange&&window.removeEventListener("hashchange",A)});function A(){l.value&&(l.value=!1,cn(()=>{u.action&&e("action",u.action)}))}const T=()=>{n.closeOnClickModal&&I(u.distinguishCancelAndClose?"close":"cancel")},C=bB(T),E=k=>{if(u.inputType!=="textarea")return k.preventDefault(),I("confirm")},I=k=>{var H;n.boxType==="prompt"&&k==="confirm"&&!P()||(u.action=k,u.beforeClose?(H=u.beforeClose)==null||H.call(u,k,u,A):A())},P=()=>{if(n.boxType==="prompt"){const k=u.inputPattern;if(k&&!k.test(u.inputValue||""))return u.editorErrorMessage=u.inputErrorMessage||s("el.messagebox.error"),u.validateError=!0,!1;const H=u.inputValidator;if(hn(H)){const U=H(u.inputValue);if(U===!1)return u.editorErrorMessage=u.inputErrorMessage||s("el.messagebox.error"),u.validateError=!0,!1;if(ln(U))return u.editorErrorMessage=U,u.validateError=!0,!1}}return u.editorErrorMessage="",u.validateError=!1,!0},L=()=>{const k=y.value.$refs;return k.input||k.textarea},N=()=>{I("close")},F=()=>{n.closeOnPressEscape&&N()};return n.lockScroll&&xB(l),{...ja(u),ns:i,overlayEvent:C,visible:l,hasMessage:p,typeClass:c,contentId:d,inputId:f,btnSize:a,iconComponent:h,confirmButtonClasses:b,rootRef:m,focusStartRef:g,headerRef:v,inputRef:y,confirmRef:_,doClose:A,handleClose:N,onCloseRequested:F,handleWrapperClick:T,handleInputEnter:E,handleAction:I,t:s}}});function A7e(n,e,t,r,i,a){const s=Kt("el-icon"),o=Kt("close"),l=Kt("el-input"),u=Kt("el-button"),c=Kt("el-focus-trap"),d=Kt("el-overlay");return W(),pt(Ka,{name:"fade-in-linear",onAfterLeave:f=>n.$emit("vanish"),persisted:""},{default:Oe(()=>[Wn(be(d,{"z-index":n.zIndex,"overlay-class":[n.ns.is("message-box"),n.modalClass],mask:n.modal},{default:Oe(()=>[Ce("div",{role:"dialog","aria-label":n.title,"aria-modal":"true","aria-describedby":n.showInput?void 0:n.contentId,class:J(`${n.ns.namespace.value}-overlay-message-box`),onClick:n.overlayEvent.onClick,onMousedown:n.overlayEvent.onMousedown,onMouseup:n.overlayEvent.onMouseup},[be(c,{loop:"",trapped:n.visible,"focus-trap-el":n.rootRef,"focus-start-el":n.focusStartRef,onReleaseRequested:n.onCloseRequested},{default:Oe(()=>[Ce("div",{ref:"rootRef",class:J([n.ns.b(),n.customClass,n.ns.is("draggable",n.draggable),{[n.ns.m("center")]:n.center}]),style:Jt(n.customStyle),tabindex:"-1",onClick:Tn(()=>{},["stop"])},[n.title!==null&&n.title!==void 0?(W(),Se("div",{key:0,ref:"headerRef",class:J([n.ns.e("header"),{"show-close":n.showClose}])},[Ce("div",{class:J(n.ns.e("title"))},[n.iconComponent&&n.center?(W(),pt(s,{key:0,class:J([n.ns.e("status"),n.typeClass])},{default:Oe(()=>[(W(),pt(ir(n.iconComponent)))]),_:1},8,["class"])):st("v-if",!0),Ce("span",null,Ft(n.title),1)],2),n.showClose?(W(),Se("button",{key:0,type:"button",class:J(n.ns.e("headerbtn")),"aria-label":n.t("el.messagebox.close"),onClick:f=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),onKeydown:hi(Tn(f=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[be(s,{class:J(n.ns.e("close"))},{default:Oe(()=>[be(o)]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):st("v-if",!0)],2)):st("v-if",!0),Ce("div",{id:n.contentId,class:J(n.ns.e("content"))},[Ce("div",{class:J(n.ns.e("container"))},[n.iconComponent&&!n.center&&n.hasMessage?(W(),pt(s,{key:0,class:J([n.ns.e("status"),n.typeClass])},{default:Oe(()=>[(W(),pt(ir(n.iconComponent)))]),_:1},8,["class"])):st("v-if",!0),n.hasMessage?(W(),Se("div",{key:1,class:J(n.ns.e("message"))},[at(n.$slots,"default",{},()=>[n.dangerouslyUseHTMLString?(W(),pt(ir(n.showInput?"label":"p"),{key:1,for:n.showInput?n.inputId:void 0,innerHTML:n.message},null,8,["for","innerHTML"])):(W(),pt(ir(n.showInput?"label":"p"),{key:0,for:n.showInput?n.inputId:void 0},{default:Oe(()=>[Xn(Ft(n.dangerouslyUseHTMLString?"":n.message),1)]),_:1},8,["for"]))])],2)):st("v-if",!0)],2),Wn(Ce("div",{class:J(n.ns.e("input"))},[be(l,{id:n.inputId,ref:"inputRef",modelValue:n.inputValue,"onUpdate:modelValue":f=>n.inputValue=f,type:n.inputType,placeholder:n.inputPlaceholder,"aria-invalid":n.validateError,class:J({invalid:n.validateError}),onKeydown:hi(n.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),Ce("div",{class:J(n.ns.e("errormsg")),style:Jt({visibility:n.editorErrorMessage?"visible":"hidden"})},Ft(n.editorErrorMessage),7)],2),[[Nr,n.showInput]])],10,["id"]),Ce("div",{class:J(n.ns.e("btns"))},[n.showCancelButton?(W(),pt(u,{key:0,loading:n.cancelButtonLoading,"loading-icon":n.cancelButtonLoadingIcon,class:J([n.cancelButtonClass]),round:n.roundButton,size:n.btnSize,onClick:f=>n.handleAction("cancel"),onKeydown:hi(Tn(f=>n.handleAction("cancel"),["prevent"]),["enter"])},{default:Oe(()=>[Xn(Ft(n.cancelButtonText||n.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):st("v-if",!0),Wn(be(u,{ref:"confirmRef",type:"primary",loading:n.confirmButtonLoading,"loading-icon":n.confirmButtonLoadingIcon,class:J([n.confirmButtonClasses]),round:n.roundButton,disabled:n.confirmButtonDisabled,size:n.btnSize,onClick:f=>n.handleAction("confirm"),onKeydown:hi(Tn(f=>n.handleAction("confirm"),["prevent"]),["enter"])},{default:Oe(()=>[Xn(Ft(n.confirmButtonText||n.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[Nr,n.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[Nr,n.visible]])]),_:3},8,["onAfterLeave"])}var E7e=$t(C7e,[["render",A7e],["__file","index.vue"]]);const h2=new Map,M7e=n=>{let e=document.body;return n.appendTo&&(ln(n.appendTo)&&(e=document.querySelector(n.appendTo)),Zl(n.appendTo)&&(e=n.appendTo),Zl(e)||(e=document.body)),e},I7e=(n,e,t=null)=>{const r=be(E7e,n,hn(n.message)||qi(n.message)?{default:hn(n.message)?n.message:()=>n.message}:null);return r.appContext=t,Np(r,e),M7e(n).appendChild(e.firstElementChild),r.component},D7e=()=>document.createElement("div"),P7e=(n,e)=>{const t=D7e();n.onVanish=()=>{Np(null,t),h2.delete(i)},n.onAction=a=>{const s=h2.get(i);let o;n.showInput?o={value:i.inputValue,action:a}:o=a,n.callback?n.callback(o,r.proxy):a==="cancel"||a==="close"?n.distinguishCancelAndClose&&a!=="cancel"?s.reject("close"):s.reject("cancel"):s.resolve(o)};const r=I7e(n,t,e),i=r.proxy;for(const a in n)Ir(n,a)&&!Ir(i.$props,a)&&(i[a]=n[a]);return i.visible=!0,i};function O_(n,e=null){if(!Cr)return Promise.reject();let t;return ln(n)||qi(n)?n={message:n}:t=n.callback,new Promise((r,i)=>{const a=P7e(n,e??O_._context);h2.set(a,{options:n,callback:t,resolve:r,reject:i})})}const R7e=["alert","confirm","prompt"],k7e={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};R7e.forEach(n=>{O_[n]=L7e(n)});function L7e(n){return(e,t,r,i)=>{let a="";return er(t)?(r=t,a=""):ti(t)?a="":a=t,O_(Object.assign({title:a,message:e,type:"",...k7e[n]},r,{boxType:n}),i)}}O_.close=()=>{h2.forEach((n,e)=>{e.doClose()}),h2.clear()};O_._context=null;const rp=O_;rp.install=n=>{rp._context=n._context,n.config.globalProperties.$msgbox=rp,n.config.globalProperties.$messageBox=rp,n.config.globalProperties.$alert=rp.alert,n.config.globalProperties.$confirm=rp.confirm,n.config.globalProperties.$prompt=rp.prompt};const O7e=rp,yie=["success","info","warning","error"],N7e=Vt({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:li},id:{type:String,default:""},message:{type:tt([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:tt(Function),default:()=>{}},onClose:{type:tt(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...yie,""],default:""},zIndex:Number}),B7e={destroy:()=>!0},F7e=Ne({name:"ElNotification"}),U7e=Ne({...F7e,props:N7e,emits:B7e,setup(n,{expose:e}){const t=n,{ns:r,zIndex:i}=E4("notification"),{nextZIndex:a,currentZIndex:s}=i,{Close:o}=WN,l=ie(!1);let u;const c=V(()=>{const _=t.type;return _&&Vp[t.type]?r.m(_):""}),d=V(()=>t.type&&Vp[t.type]||t.icon),f=V(()=>t.position.endsWith("right")?"right":"left"),h=V(()=>t.position.startsWith("top")?"top":"bottom"),p=V(()=>{var _;return{[h.value]:`${t.offset}px`,zIndex:(_=t.zIndex)!=null?_:s.value}});function m(){t.duration>0&&({stop:u}=sv(()=>{l.value&&g()},t.duration))}function v(){u==null||u()}function g(){l.value=!1}function y({code:_}){_===jt.delete||_===jt.backspace?v():_===jt.esc?l.value&&g():m()}return zn(()=>{m(),a(),l.value=!0}),ni(document,"keydown",y),e({visible:l,close:g}),(_,b)=>(W(),pt(Ka,{name:S(r).b("fade"),onBeforeLeave:_.onClose,onAfterLeave:x=>_.$emit("destroy"),persisted:""},{default:Oe(()=>[Wn(Ce("div",{id:_.id,class:J([S(r).b(),_.customClass,S(f)]),style:Jt(S(p)),role:"alert",onMouseenter:v,onMouseleave:m,onClick:_.onClick},[S(d)?(W(),pt(S(tn),{key:0,class:J([S(r).e("icon"),S(c)])},{default:Oe(()=>[(W(),pt(ir(S(d))))]),_:1},8,["class"])):st("v-if",!0),Ce("div",{class:J(S(r).e("group"))},[Ce("h2",{class:J(S(r).e("title")),textContent:Ft(_.title)},null,10,["textContent"]),Wn(Ce("div",{class:J(S(r).e("content")),style:Jt(_.title?void 0:{margin:0})},[at(_.$slots,"default",{},()=>[_.dangerouslyUseHTMLString?(W(),Se(on,{key:1},[st(" Caution here, message could've been compromised, never use user's input as message "),Ce("p",{innerHTML:_.message},null,8,["innerHTML"])],2112)):(W(),Se("p",{key:0},Ft(_.message),1))])],6),[[Nr,_.message]]),_.showClose?(W(),pt(S(tn),{key:0,class:J(S(r).e("closeBtn")),onClick:Tn(g,["stop"])},{default:Oe(()=>[be(S(o))]),_:1},8,["class","onClick"])):st("v-if",!0)],2)],46,["id","onClick"]),[[Nr,l.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var z7e=$t(U7e,[["__file","notification.vue"]]);const EM={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},j5=16;let H7e=1;const U1=function(n={},e){if(!Cr)return{close:()=>{}};(ln(n)||qi(n))&&(n={message:n});const t=n.position||"top-right";let r=n.offset||0;EM[t].forEach(({vm:c})=>{var d;r+=(((d=c.el)==null?void 0:d.offsetHeight)||0)+j5}),r+=j5;const i=`notification_${H7e++}`,a=n.onClose,s={...n,offset:r,id:i,onClose:()=>{V7e(i,t,a)}};let o=document.body;Zl(n.appendTo)?o=n.appendTo:ln(n.appendTo)&&(o=document.querySelector(n.appendTo)),Zl(o)||(o=document.body);const l=document.createElement("div"),u=be(z7e,s,hn(s.message)?s.message:qi(s.message)?()=>s.message:null);return u.appContext=ti(e)?U1._context:e,u.props.onDestroy=()=>{Np(null,l)},Np(u,l),EM[t].push({vm:u}),o.appendChild(l.firstElementChild),{close:()=>{u.component.exposed.visible.value=!1}}};yie.forEach(n=>{U1[n]=(e={},t)=>((ln(e)||qi(e))&&(e={message:e}),U1({...e,type:n},t))});function V7e(n,e,t){const r=EM[e],i=r.findIndex(({vm:u})=>{var c;return((c=u.component)==null?void 0:c.props.id)===n});if(i===-1)return;const{vm:a}=r[i];if(!a)return;t==null||t(a);const s=a.el.offsetHeight,o=e.split("-")[0];r.splice(i,1);const l=r.length;if(!(l<1))for(let u=i;u<l;u++){const{el:c,component:d}=r[u].vm,f=Number.parseInt(c.style[o],10)-s-j5;d.props.offset=f}}function $7e(){for(const n of Object.values(EM))n.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}U1.closeAll=$7e;U1._context=null;const G7e=See(U1,"$notify");var W7e=[a7e,c7e,w7e,O7e,G7e,Rne],q7e=$Se([...ZFe,...W7e]);const j7e=["href"],K7e=Ne({__name:"Header",setup(n){const e={name:"Project",link:"#"};return(t,r)=>{const i=Kt("el-menu-item"),a=Kt("el-menu"),s=Kt("el-affix");return W(),pt(s,{offset:0},{default:Oe(()=>[be(a,{"default-active":"1",class:"el-menu-demo",mode:"horizontal",ellipsis:!1},{default:Oe(()=>[be(i,{index:"1"},{default:Oe(()=>[be(S(tn),{size:20},{default:Oe(()=>[be(S(GN))]),_:1}),Ce("a",{href:e.link},Ft(e.name),9,j7e)]),_:1})]),_:1})]),_:1})}}}),$c=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},X7e=$c(K7e,[["__scopeId","data-v-45f15828"]]),Y7e={class:"paper-title"},Q7e=["href"],Z7e={class:"author"},J7e={key:0,class:"name_sup"},e9e=["href"],t9e={class:"address"},n9e={key:0,class:"address_sup"},r9e=["href"],i9e={class:"btn-text"},U$="W2WDiff",a9e="#000000",s9e="#42B883",o9e="#444444",l9e=Ne({__name:"Title",setup(n){const e=[{name:"Yuanlin Zhang",address_flag:"1,2"},{name:"Jieyu Yuan",address_flag:"2"},{name:"Xiao Chen",address_flag:"1"}],t=[{address_flag:"1",name:"Nankai University"},{address_flag:"2",name:"Minzu University of China"}],r=[{disabled:!0,name:"Paper",component:Tee},{disabled:!1,name:"Code",component:Ixe}];return(i,a)=>{const s=Kt("el-image"),o=Kt("el-row"),l=Kt("el-col"),u=Kt("el-avatar"),c=Kt("el-button");return W(),Se("div",null,[i.logo?(W(),pt(o,{key:0,justify:"center"},{default:Oe(()=>[be(s,{src:i.logo,class:"logo",fit:"cover"},null,8,["src"])]),_:1})):st("",!0),be(o,{justify:"center"},{default:Oe(()=>[be(l,{span:20},{default:Oe(()=>[Ce("h1",Y7e,[U$?(W(),Se("span",{key:0,style:Jt({color:a9e})},Ft(U$),4)):st("",!0),i.title_supp?(W(),Se("span",{key:1,style:Jt({color:s9e})},Ft(i.title_supp),5)):st("",!0)])]),_:1})]),_:1}),be(o,{justify:"center"},{default:Oe(()=>[(W(),Se(on,null,ur(e,d=>Ce("a",{href:d.homepage},[be(c,{class:"title-button",type:"primary",text:""},{default:Oe(()=>[d.icon?(W(),pt(u,{key:0,size:40,src:d.icon},null,8,["src"])):st("",!0),Ce("span",Z7e,[Xn(Ft(d.name),1),d.address_flag?(W(),Se("sup",J7e,Ft(d.address_flag),1)):st("",!0)])]),_:2},1024)],8,Q7e)),64))]),_:1}),be(o,{justify:"center"},{default:Oe(()=>[(W(),Se(on,null,ur(t,d=>Ce("a",{href:d.homepage},[be(c,{class:"title-button",type:"primary",text:""},{default:Oe(()=>[d.icon?(W(),pt(u,{key:0,size:40,src:d.icon},null,8,["src"])):st("",!0),Ce("span",t9e,[d.address_flag?(W(),Se("sup",n9e,Ft(d.address_flag),1)):st("",!0),Xn(Ft(d.name),1)])]),_:2},1024)],8,e9e)),64))]),_:1}),be(o,{justify:"center",class:"con-cor"},{default:Oe(()=>[Xn(Ft(i.con_and_corresponding_author),1)]),_:1}),(W(!0),Se(on,null,ur(i.emphases,d=>(W(),pt(o,{justify:"center",class:"emphasis"},{default:Oe(()=>[Xn(Ft(d),1)]),_:2},1024))),256)),be(o,{justify:"center",style:{"margin-bottom":"20px"}},{default:Oe(()=>[be(l,{span:20},{default:Oe(()=>[be(o,{justify:"center"},{default:Oe(()=>[(W(),Se(on,null,ur(r,d=>Ce("a",{href:d.link},[be(c,{class:"guidance-button",size:"default",color:o9e,disabled:d.disabled,round:""},{default:Oe(()=>[be(S(tn),{size:18},{default:Oe(()=>[(W(),pt(ir(d.component)))]),_:2},1024),Ce("span",i9e,Ft(d.name),1)]),_:2},1032,["disabled"])],8,r9e)),64))]),_:1})]),_:1})]),_:1})])}}}),u9e=$c(l9e,[["__scopeId","data-v-5ba56b89"]]),c9e={data(){return{abstract:" This is abstract about W2WDiff"}}},d9e=n=>(x_("data-v-a28b277f"),n=n(),w_(),n),f9e=d9e(()=>Ce("h1",{class:"section-title"},"Abstract",-1));function h9e(n,e,t,r,i,a){const s=Kt("el-divider"),o=Kt("el-row"),l=Kt("el-col");return W(),Se("div",null,[be(s),be(o,{justify:"center"},{default:Oe(()=>[f9e]),_:1}),be(o,{justify:"center"},{default:Oe(()=>[be(l,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Oe(()=>[Ce("p",null,Ft(i.abstract),1)]),_:1})]),_:1})])}const p9e=$c(c9e,[["render",h9e],["__scopeId","data-v-a28b277f"]]),m9e={data(){return{bibtex:["@article{junyaohu2023template,","    title={Title},","    author={Hu, Junyao},","    journal={IJCNN},","    year={2025}","}"]}},methods:{copyVal(){let n=document.createElement("textarea"),e=document.getElementsByTagName("pre")[0].innerText;n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),this.$message.success("Copy Successfully"),n.remove()}}},rF=n=>(x_("data-v-cc56f647"),n=n(),w_(),n),v9e=rF(()=>Ce("h1",{class:"section-title"},"BibTeX",-1)),g9e=rF(()=>Ce("div",{style:{"text-align":"center",color:"var(--el-text-color-secondary)"}},"🖱️ Click here to copy BibTex.",-1)),y9e={class:"code"},_9e=rF(()=>Ce("br",null,null,-1));function b9e(n,e,t,r,i,a){const s=Kt("el-divider"),o=Kt("el-row"),l=Kt("el-scrollbar"),u=Kt("el-col");return W(),Se("div",null,[be(s),be(o,{justify:"center"},{default:Oe(()=>[v9e]),_:1}),be(o,{justify:"center"},{default:Oe(()=>[be(u,{class:"bibtex",xs:24,sm:20,md:14,lg:12,xl:12},{default:Oe(()=>[be(l,{style:{margin:"10px 20px 5px 20px"},onClick:e[0]||(e[0]=c=>a.copyVal())},{default:Oe(()=>[g9e,Ce("pre",null,[(W(!0),Se(on,null,ur(i.bibtex,c=>(W(),Se("code",y9e,[Xn(Ft(c),1),_9e]))),256))])]),_:1})]),_:1})]),_:1})])}const S9e=$c(m9e,[["render",b9e],["__scopeId","data-v-cc56f647"]]);function z$(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function iF(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:z$(e[t])&&z$(n[t])&&Object.keys(e[t]).length>0&&iF(n[t],e[t])})}const _ie={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Td(){const n=typeof document<"u"?document:{};return iF(n,_ie),n}const x9e={document:_ie,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function ou(){const n=typeof window<"u"?window:{};return iF(n,x9e),n}function w9e(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function K5(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function MM(){return Date.now()}function T9e(n){const e=ou();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function C9e(n,e){e===void 0&&(e="x");const t=ou();let r,i,a;const s=T9e(n);return t.WebKitCSSMatrix?(i=s.transform||s.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(o=>o.replace(",",".")).join(", ")),a=new t.WebKitCSSMatrix(i==="none"?"":i)):(a=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=a.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?i=a.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(t.WebKitCSSMatrix?i=a.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function FT(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function A9e(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Wl(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const r=t<0||arguments.length<=t?void 0:arguments[t];if(r!=null&&!A9e(r)){const i=Object.keys(Object(r)).filter(a=>e.indexOf(a)<0);for(let a=0,s=i.length;a<s;a+=1){const o=i[a],l=Object.getOwnPropertyDescriptor(r,o);l!==void 0&&l.enumerable&&(FT(n[o])&&FT(r[o])?r[o].__swiper__?n[o]=r[o]:Wl(n[o],r[o]):!FT(n[o])&&FT(r[o])?(n[o]={},r[o].__swiper__?n[o]=r[o]:Wl(n[o],r[o])):n[o]=r[o])}}}return n}function UT(n,e,t){n.style.setProperty(e,t)}function bie(n){let{swiper:e,targetPosition:t,side:r}=n;const i=ou(),a=-e.translate;let s=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const u=t>a?"next":"prev",c=(f,h)=>u==="next"&&f>=h||u==="prev"&&f<=h,d=()=>{o=new Date().getTime(),s===null&&(s=o);const f=Math.max(Math.min((o-s)/l,1),0),h=.5-Math.cos(f*Math.PI)/2;let p=a+h*(t-a);if(c(p,t)&&(p=t),e.wrapperEl.scrollTo({[r]:p}),c(p,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:p})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(d)};d()}function pd(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function Sie(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:[e]),t}function E9e(n,e){const t=[];for(;n.previousElementSibling;){const r=n.previousElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function M9e(n,e){const t=[];for(;n.nextElementSibling;){const r=n.nextElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function hp(n,e){return ou().getComputedStyle(n,null).getPropertyValue(e)}function IM(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function xie(n,e){const t=[];let r=n.parentElement;for(;r;)e?r.matches(e)&&t.push(r):t.push(r),r=r.parentElement;return t}function X5(n,e,t){const r=ou();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}let tP;function I9e(){const n=ou(),e=Td();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function wie(){return tP||(tP=I9e()),tP}let nP;function D9e(n){let{userAgent:e}=n===void 0?{}:n;const t=wie(),r=ou(),i=r.navigator.platform,a=e||r.navigator.userAgent,s={ios:!1,android:!1},o=r.screen.width,l=r.screen.height,u=a.match(/(Android);?[\s\/]+([\d.]+)?/);let c=a.match(/(iPad).*OS\s([\d_]+)/);const d=a.match(/(iPod)(.*OS\s([\d_]+))?/),f=!c&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=i==="Win32";let p=i==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&p&&t.touch&&m.indexOf(`${o}x${l}`)>=0&&(c=a.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),p=!1),u&&!h&&(s.os="android",s.android=!0),(c||f||d)&&(s.os="ios",s.ios=!0),s}function P9e(n){return n===void 0&&(n={}),nP||(nP=D9e(n)),nP}let rP;function R9e(){const n=ou();let e=!1;function t(){const r=n.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}if(t()){const r=String(n.navigator.userAgent);if(r.includes("Version/")){const[i,a]=r.split("Version/")[1].split(" ")[0].split(".").map(s=>Number(s));e=i<16||i===16&&a<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent)}}function k9e(){return rP||(rP=R9e()),rP}function L9e(n){let{swiper:e,on:t,emit:r}=n;const i=ou();let a=null,s=null;const o=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(a=new ResizeObserver(d=>{s=i.requestAnimationFrame(()=>{const{width:f,height:h}=e;let p=f,m=h;d.forEach(v=>{let{contentBoxSize:g,contentRect:y,target:_}=v;_&&_!==e.el||(p=y?y.width:(g[0]||g).inlineSize,m=y?y.height:(g[0]||g).blockSize)}),(p!==f||m!==h)&&o()})}),a.observe(e.el))},u=()=>{s&&i.cancelAnimationFrame(s),a&&a.unobserve&&e.el&&(a.unobserve(e.el),a=null)},c=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){l();return}i.addEventListener("resize",o),i.addEventListener("orientationchange",c)}),t("destroy",()=>{u(),i.removeEventListener("resize",o),i.removeEventListener("orientationchange",c)})}function O9e(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const a=[],s=ou(),o=function(c,d){d===void 0&&(d={});const f=s.MutationObserver||s.WebkitMutationObserver,h=new f(p=>{if(e.__preventObserver__)return;if(p.length===1){i("observerUpdate",p[0]);return}const m=function(){i("observerUpdate",p[0])};s.requestAnimationFrame?s.requestAnimationFrame(m):s.setTimeout(m,0)});h.observe(c,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),a.push(h)},l=()=>{if(e.params.observer){if(e.params.observeParents){const c=xie(e.hostEl);for(let d=0;d<c.length;d+=1)o(c[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},u=()=>{a.forEach(c=>{c.disconnect()}),a.splice(0,a.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",u)}var N9e={on(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=t?"unshift":"push";return n.split(" ").forEach(a=>{r.eventsListeners[a]||(r.eventsListeners[a]=[]),r.eventsListeners[a][i](e)}),r},once(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(){r.off(n,i),i.__emitterProxy&&delete i.__emitterProxy;for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];e.apply(r,s)}return i.__emitterProxy=e,r.on(n,i,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const r=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[r](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(r=>{typeof e>"u"?t.eventsListeners[r]=[]:t.eventsListeners[r]&&t.eventsListeners[r].forEach((i,a)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&t.eventsListeners[r].splice(a,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,r;for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return typeof a[0]=="string"||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),r=n):(e=a[0].events,t=a[0].data,r=a[0].context||n),t.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(u=>{u.apply(r,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(u=>{u.apply(r,t)})}),n}};function B9e(){const n=this;let e,t;const r=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=r.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=r.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(hp(r,"padding-left")||0,10)-parseInt(hp(r,"padding-right")||0,10),t=t-parseInt(hp(r,"padding-top")||0,10)-parseInt(hp(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function F9e(){const n=this;function e(I){return n.isHorizontal()?I:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[I]}function t(I,P){return parseFloat(I.getPropertyValue(e(P))||0)}const r=n.params,{wrapperEl:i,slidesEl:a,size:s,rtlTranslate:o,wrongRTL:l}=n,u=n.virtual&&r.virtual.enabled,c=u?n.virtual.slides.length:n.slides.length,d=pd(a,`.${n.params.slideClass}, swiper-slide`),f=u?n.virtual.slides.length:d.length;let h=[];const p=[],m=[];let v=r.slidesOffsetBefore;typeof v=="function"&&(v=r.slidesOffsetBefore.call(n));let g=r.slidesOffsetAfter;typeof g=="function"&&(g=r.slidesOffsetAfter.call(n));const y=n.snapGrid.length,_=n.slidesGrid.length;let b=r.spaceBetween,x=-v,w=0,A=0;if(typeof s>"u")return;typeof b=="string"&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*s:typeof b=="string"&&(b=parseFloat(b)),n.virtualSize=-b,d.forEach(I=>{o?I.style.marginLeft="":I.style.marginRight="",I.style.marginBottom="",I.style.marginTop=""}),r.centeredSlides&&r.cssMode&&(UT(i,"--swiper-centered-offset-before",""),UT(i,"--swiper-centered-offset-after",""));const T=r.grid&&r.grid.rows>1&&n.grid;T&&n.grid.initSlides(f);let C;const E=r.slidesPerView==="auto"&&r.breakpoints&&Object.keys(r.breakpoints).filter(I=>typeof r.breakpoints[I].slidesPerView<"u").length>0;for(let I=0;I<f;I+=1){C=0;let P;if(d[I]&&(P=d[I]),T&&n.grid.updateSlide(I,P,f,e),!(d[I]&&hp(P,"display")==="none")){if(r.slidesPerView==="auto"){E&&(d[I].style[e("width")]="");const L=getComputedStyle(P),N=P.style.transform,F=P.style.webkitTransform;if(N&&(P.style.transform="none"),F&&(P.style.webkitTransform="none"),r.roundLengths)C=n.isHorizontal()?X5(P,"width",!0):X5(P,"height",!0);else{const k=t(L,"width"),H=t(L,"padding-left"),U=t(L,"padding-right"),B=t(L,"margin-left"),$=t(L,"margin-right"),ee=L.getPropertyValue("box-sizing");if(ee&&ee==="border-box")C=k+B+$;else{const{clientWidth:re,offsetWidth:ne}=P;C=k+H+U+B+$+(ne-re)}}N&&(P.style.transform=N),F&&(P.style.webkitTransform=F),r.roundLengths&&(C=Math.floor(C))}else C=(s-(r.slidesPerView-1)*b)/r.slidesPerView,r.roundLengths&&(C=Math.floor(C)),d[I]&&(d[I].style[e("width")]=`${C}px`);d[I]&&(d[I].swiperSlideSize=C),m.push(C),r.centeredSlides?(x=x+C/2+w/2+b,w===0&&I!==0&&(x=x-s/2-b),I===0&&(x=x-s/2-b),Math.abs(x)<1/1e3&&(x=0),r.roundLengths&&(x=Math.floor(x)),A%r.slidesPerGroup===0&&h.push(x),p.push(x)):(r.roundLengths&&(x=Math.floor(x)),(A-Math.min(n.params.slidesPerGroupSkip,A))%n.params.slidesPerGroup===0&&h.push(x),p.push(x),x=x+C+b),n.virtualSize+=C+b,w=C,A+=1}}if(n.virtualSize=Math.max(n.virtualSize,s)+g,o&&l&&(r.effect==="slide"||r.effect==="coverflow")&&(i.style.width=`${n.virtualSize+b}px`),r.setWrapperSize&&(i.style[e("width")]=`${n.virtualSize+b}px`),T&&n.grid.updateWrapperSize(C,h,e),!r.centeredSlides){const I=[];for(let P=0;P<h.length;P+=1){let L=h[P];r.roundLengths&&(L=Math.floor(L)),h[P]<=n.virtualSize-s&&I.push(L)}h=I,Math.floor(n.virtualSize-s)-Math.floor(h[h.length-1])>1&&h.push(n.virtualSize-s)}if(u&&r.loop){const I=m[0]+b;if(r.slidesPerGroup>1){const P=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/r.slidesPerGroup),L=I*r.slidesPerGroup;for(let N=0;N<P;N+=1)h.push(h[h.length-1]+L)}for(let P=0;P<n.virtual.slidesBefore+n.virtual.slidesAfter;P+=1)r.slidesPerGroup===1&&h.push(h[h.length-1]+I),p.push(p[p.length-1]+I),n.virtualSize+=I}if(h.length===0&&(h=[0]),b!==0){const I=n.isHorizontal()&&o?"marginLeft":e("marginRight");d.filter((P,L)=>!r.cssMode||r.loop?!0:L!==d.length-1).forEach(P=>{P.style[I]=`${b}px`})}if(r.centeredSlides&&r.centeredSlidesBounds){let I=0;m.forEach(L=>{I+=L+(b||0)}),I-=b;const P=I-s;h=h.map(L=>L<=0?-v:L>P?P+g:L)}if(r.centerInsufficientSlides){let I=0;if(m.forEach(P=>{I+=P+(b||0)}),I-=b,I<s){const P=(s-I)/2;h.forEach((L,N)=>{h[N]=L-P}),p.forEach((L,N)=>{p[N]=L+P})}}if(Object.assign(n,{slides:d,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){UT(i,"--swiper-centered-offset-before",`${-h[0]}px`),UT(i,"--swiper-centered-offset-after",`${n.size/2-m[m.length-1]/2}px`);const I=-n.snapGrid[0],P=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(L=>L+I),n.slidesGrid=n.slidesGrid.map(L=>L+P)}if(f!==c&&n.emit("slidesLengthChange"),h.length!==y&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),p.length!==_&&n.emit("slidesGridLengthChange"),r.watchSlidesProgress&&n.updateSlidesOffset(),!u&&!r.cssMode&&(r.effect==="slide"||r.effect==="fade")){const I=`${r.containerModifierClass}backface-hidden`,P=n.el.classList.contains(I);f<=r.maxBackfaceHiddenSlides?P||n.el.classList.add(I):P&&n.el.classList.remove(I)}}function U9e(n){const e=this,t=[],r=e.virtual&&e.params.virtual.enabled;let i=0,a;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const s=o=>r?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(a=0;a<Math.ceil(e.params.slidesPerView);a+=1){const o=e.activeIndex+a;if(o>e.slides.length&&!r)break;t.push(s(o))}else t.push(s(e.activeIndex));for(a=0;a<t.length;a+=1)if(typeof t[a]<"u"){const o=t[a].offsetHeight;i=o>i?o:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function z9e(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(n.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-t-n.cssOverflowAdjustment()}function H9e(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:r,rtlTranslate:i,snapGrid:a}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let s=-n;i&&(s=n),r.forEach(l=>{l.classList.remove(t.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<r.length;l+=1){const u=r[l];let c=u.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(c-=r[0].swiperSlideOffset);const d=(s+(t.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+o),f=(s-a[0]+(t.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+o),h=-(s-c),p=h+e.slidesSizesGrid[l];(h>=0&&h<e.size-1||p>1&&p<=e.size||h<=0&&p>=e.size)&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(l),r[l].classList.add(t.slideVisibleClass)),u.progress=i?-d:d,u.originalProgress=i?-f:f}}function V9e(n){const e=this;if(typeof n>"u"){const c=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*c||0}const t=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:a,isEnd:s,progressLoop:o}=e;const l=a,u=s;if(r===0)i=0,a=!0,s=!0;else{i=(n-e.minTranslate())/r;const c=Math.abs(n-e.minTranslate())<1,d=Math.abs(n-e.maxTranslate())<1;a=c||i<=0,s=d||i>=1,c&&(i=0),d&&(i=1)}if(t.loop){const c=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[c],h=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(n);m>=f?o=(m-f)/p:o=(m+p-h)/p,o>1&&(o-=1)}Object.assign(e,{progress:i,progressLoop:o,isBeginning:a,isEnd:s}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),a&&!l&&e.emit("reachBeginning toEdge"),s&&!u&&e.emit("reachEnd toEdge"),(l&&!a||u&&!s)&&e.emit("fromEdge"),e.emit("progress",i)}function $9e(){const n=this,{slides:e,params:t,slidesEl:r,activeIndex:i}=n,a=n.virtual&&t.virtual.enabled,s=l=>pd(r,`.${t.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let o;if(a)if(t.loop){let l=i-n.virtual.slidesBefore;l<0&&(l=n.virtual.slides.length+l),l>=n.virtual.slides.length&&(l-=n.virtual.slides.length),o=s(`[data-swiper-slide-index="${l}"]`)}else o=s(`[data-swiper-slide-index="${i}"]`);else o=e[i];if(o){o.classList.add(t.slideActiveClass);let l=M9e(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!l&&(l=e[0]),l&&l.classList.add(t.slideNextClass);let u=E9e(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!u===0&&(u=e[e.length-1]),u&&u.classList.add(t.slidePrevClass)}n.emitSlidesClasses()}const pE=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,r=e.closest(t());if(r){let i=r.querySelector(`.${n.params.lazyPreloaderClass}`);!i&&n.isElement&&(r.shadowRoot?i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},iP=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Y5=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const r=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),i=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const s=i,o=[s-e];o.push(...Array.from({length:e}).map((l,u)=>s+r+u)),n.slides.forEach((l,u)=>{o.includes(l.column)&&iP(n,u)});return}const a=i+r-1;if(n.params.rewind||n.params.loop)for(let s=i-e;s<=a+e;s+=1){const o=(s%t+t)%t;(o<i||o>a)&&iP(n,o)}else for(let s=Math.max(i-e,0);s<=Math.min(a+e,t-1);s+=1)s!==i&&(s>a||s<i)&&iP(n,s)};function G9e(n){const{slidesGrid:e,params:t}=n,r=n.rtlTranslate?n.translate:-n.translate;let i;for(let a=0;a<e.length;a+=1)typeof e[a+1]<"u"?r>=e[a]&&r<e[a+1]-(e[a+1]-e[a])/2?i=a:r>=e[a]&&r<e[a+1]&&(i=a+1):r>=e[a]&&(i=a);return t.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function W9e(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:a,realIndex:s,snapIndex:o}=e;let l=n,u;const c=f=>{let h=f-e.virtual.slidesBefore;return h<0&&(h=e.virtual.slides.length+h),h>=e.virtual.slides.length&&(h-=e.virtual.slides.length),h};if(typeof l>"u"&&(l=G9e(e)),r.indexOf(t)>=0)u=r.indexOf(t);else{const f=Math.min(i.slidesPerGroupSkip,l);u=f+Math.floor((l-f)/i.slidesPerGroup)}if(u>=r.length&&(u=r.length-1),l===a){u!==o&&(e.snapIndex=u,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=c(l));return}let d;e.virtual&&i.virtual.enabled&&i.loop?d=c(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{previousSnapIndex:o,snapIndex:u,previousRealIndex:s,realIndex:d,previousIndex:a,activeIndex:l}),e.initialized&&Y5(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(s!==d&&e.emit("realIndexChange"),e.emit("slideChange"))}function q9e(n,e){const t=this,r=t.params;let i=n.closest(`.${r.slideClass}, swiper-slide`);!i&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(o=>{!i&&o.matches&&o.matches(`.${r.slideClass}, swiper-slide`)&&(i=o)});let a=!1,s;if(i){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===i){a=!0,s=o;break}}if(i&&a)t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=s;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var j9e={updateSize:B9e,updateSlides:F9e,updateAutoHeight:U9e,updateSlidesOffset:z9e,updateSlidesProgress:H9e,updateProgress:V9e,updateSlidesClasses:$9e,updateActiveIndex:W9e,updateClickedSlide:q9e};function K9e(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:r,translate:i,wrapperEl:a}=e;if(t.virtualTranslate)return r?-i:i;if(t.cssMode)return i;let s=C9e(a,n);return s+=e.cssOverflowAdjustment(),r&&(s=-s),s||0}function X9e(n,e){const t=this,{rtlTranslate:r,params:i,wrapperEl:a,progress:s}=t;let o=0,l=0;const u=0;t.isHorizontal()?o=r?-n:n:l=n,i.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,i.cssMode?a[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:i.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),a.style.transform=`translate3d(${o}px, ${l}px, ${u}px)`);let c;const d=t.maxTranslate()-t.minTranslate();d===0?c=0:c=(n-t.minTranslate())/d,c!==s&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function Y9e(){return-this.snapGrid[0]}function Q9e(){return-this.snapGrid[this.snapGrid.length-1]}function Z9e(n,e,t,r,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),r===void 0&&(r=!0);const a=this,{params:s,wrapperEl:o}=a;if(a.animating&&s.preventInteractionOnTransition)return!1;const l=a.minTranslate(),u=a.maxTranslate();let c;if(r&&n>l?c=l:r&&n<u?c=u:c=n,a.updateProgress(c),s.cssMode){const d=a.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-c;else{if(!a.support.smoothScroll)return bie({swiper:a,targetPosition:-c,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-c,behavior:"smooth"})}return!0}return e===0?(a.setTransition(0),a.setTranslate(c),t&&(a.emit("beforeTransitionStart",e,i),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(c),t&&(a.emit("beforeTransitionStart",e,i),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(f){!a||a.destroyed||f.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,t&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}var J9e={getTranslate:K9e,setTranslate:X9e,minTranslate:Y9e,maxTranslate:Q9e,translateTo:Z9e};function eUe(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function Tie(n){let{swiper:e,runCallbacks:t,direction:r,step:i}=n;const{activeIndex:a,previousIndex:s}=e;let o=r;if(o||(a>s?o="next":a<s?o="prev":o="reset"),e.emit(`transition${i}`),t&&a!==s){if(o==="reset"){e.emit(`slideResetTransition${i}`);return}e.emit(`slideChangeTransition${i}`),o==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`)}}function tUe(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;r.cssMode||(r.autoHeight&&t.updateAutoHeight(),Tie({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function nUe(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;t.animating=!1,!r.cssMode&&(t.setTransition(0),Tie({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var rUe={setTransition:eUe,transitionStart:tUe,transitionEnd:nUe};function iUe(n,e,t,r,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const a=this;let s=n;s<0&&(s=0);const{params:o,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:d,rtlTranslate:f,wrapperEl:h,enabled:p}=a;if(a.animating&&o.preventInteractionOnTransition||!p&&!r&&!i)return!1;const m=Math.min(a.params.slidesPerGroupSkip,s);let v=m+Math.floor((s-m)/a.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const g=-l[v];if(o.normalizeSlideIndex)for(let _=0;_<u.length;_+=1){const b=-Math.floor(g*100),x=Math.floor(u[_]*100),w=Math.floor(u[_+1]*100);typeof u[_+1]<"u"?b>=x&&b<w-(w-x)/2?s=_:b>=x&&b<w&&(s=_+1):b>=x&&(s=_)}if(a.initialized&&s!==d&&(!a.allowSlideNext&&(f?g>a.translate&&g>a.minTranslate():g<a.translate&&g<a.minTranslate())||!a.allowSlidePrev&&g>a.translate&&g>a.maxTranslate()&&(d||0)!==s))return!1;s!==(c||0)&&t&&a.emit("beforeSlideChangeStart"),a.updateProgress(g);let y;if(s>d?y="next":s<d?y="prev":y="reset",f&&-g===a.translate||!f&&g===a.translate)return a.updateActiveIndex(s),o.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),o.effect!=="slide"&&a.setTranslate(g),y!=="reset"&&(a.transitionStart(t,y),a.transitionEnd(t,y)),!1;if(o.cssMode){const _=a.isHorizontal(),b=f?g:-g;if(e===0){const x=a.virtual&&a.params.virtual.enabled;x&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),x&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{h[_?"scrollLeft":"scrollTop"]=b})):h[_?"scrollLeft":"scrollTop"]=b,x&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1})}else{if(!a.support.smoothScroll)return bie({swiper:a,targetPosition:b,side:_?"left":"top"}),!0;h.scrollTo({[_?"left":"top"]:b,behavior:"smooth"})}return!0}return a.setTransition(e),a.setTranslate(g),a.updateActiveIndex(s),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,r),a.transitionStart(t,y),e===0?a.transitionEnd(t,y):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(b){!a||a.destroyed||b.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(t,y))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function aUe(n,e,t,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const i=this;let a=n;return i.params.loop&&(i.virtual&&i.params.virtual.enabled?a=a+i.virtual.slidesBefore:a=i.getSlideIndexByData(a)),i.slideTo(a,e,t,r)}function sUe(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const r=this,{enabled:i,params:a,animating:s}=r;if(!i)return r;let o=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(o=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<a.slidesPerGroupSkip?1:o,u=r.virtual&&a.virtual.enabled;if(a.loop){if(s&&!u&&a.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&a.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,n,e,t)}),!0}return a.rewind&&r.isEnd?r.slideTo(0,n,e,t):r.slideTo(r.activeIndex+l,n,e,t)}function oUe(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const r=this,{params:i,snapGrid:a,slidesGrid:s,rtlTranslate:o,enabled:l,animating:u}=r;if(!l)return r;const c=r.virtual&&i.virtual.enabled;if(i.loop){if(u&&!c&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const d=o?r.translate:-r.translate;function f(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}const h=f(d),p=a.map(g=>f(g));let m=a[p.indexOf(h)-1];if(typeof m>"u"&&i.cssMode){let g;a.forEach((y,_)=>{h>=y&&(g=_)}),typeof g<"u"&&(m=a[g>0?g-1:g])}let v=0;if(typeof m<"u"&&(v=s.indexOf(m),v<0&&(v=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(v=v-r.slidesPerViewDynamic("previous",!0)+1,v=Math.max(v,0))),i.rewind&&r.isBeginning){const g=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(g,n,e,t)}else if(i.loop&&r.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(v,n,e,t)}),!0;return r.slideTo(v,n,e,t)}function lUe(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const r=this;return r.slideTo(r.activeIndex,n,e,t)}function uUe(n,e,t,r){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),r===void 0&&(r=.5);const i=this;let a=i.activeIndex;const s=Math.min(i.params.slidesPerGroupSkip,a),o=s+Math.floor((a-s)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[o]){const u=i.snapGrid[o],c=i.snapGrid[o+1];l-u>(c-u)*r&&(a+=i.params.slidesPerGroup)}else{const u=i.snapGrid[o-1],c=i.snapGrid[o];l-u<=(c-u)*r&&(a-=i.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,i.slidesGrid.length-1),i.slideTo(a,n,e,t)}function cUe(){const n=this,{params:e,slidesEl:t}=n,r=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let i=n.clickedIndex,a;const s=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;a=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<n.loopedSlides-r/2||i>n.slides.length-n.loopedSlides+r/2?(n.loopFix(),i=n.getSlideIndex(pd(t,`${s}[data-swiper-slide-index="${a}"]`)[0]),K5(()=>{n.slideTo(i)})):n.slideTo(i):i>n.slides.length-r?(n.loopFix(),i=n.getSlideIndex(pd(t,`${s}[data-swiper-slide-index="${a}"]`)[0]),K5(()=>{n.slideTo(i)})):n.slideTo(i)}else n.slideTo(i)}var dUe={slideTo:iUe,slideToLoop:aUe,slideNext:sUe,slidePrev:oUe,slideReset:lUe,slideToClosest:uUe,slideToClickedSlide:cUe};function fUe(n){const e=this,{params:t,slidesEl:r}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;pd(r,`.${t.slideClass}, swiper-slide`).forEach((a,s)=>{a.setAttribute("data-swiper-slide-index",s)}),e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function hUe(n){let{slideRealIndex:e,slideTo:t=!0,direction:r,setTranslate:i,activeSlideIndex:a,byController:s,byMousewheel:o}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:u,allowSlidePrev:c,allowSlideNext:d,slidesEl:f,params:h}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&h.virtual.enabled){t&&(!h.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):h.centeredSlides&&l.snapIndex<h.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=c,l.allowSlideNext=d,l.emit("loopFix");return}const p=h.slidesPerView==="auto"?l.slidesPerViewDynamic():Math.ceil(parseFloat(h.slidesPerView,10));let m=h.loopedSlides||p;m%h.slidesPerGroup!==0&&(m+=h.slidesPerGroup-m%h.slidesPerGroup),l.loopedSlides=m;const v=[],g=[];let y=l.activeIndex;typeof a>"u"?a=l.getSlideIndex(l.slides.filter(A=>A.classList.contains(h.slideActiveClass))[0]):y=a;const _=r==="next"||!r,b=r==="prev"||!r;let x=0,w=0;if(a<m){x=Math.max(m-a,h.slidesPerGroup);for(let A=0;A<m-a;A+=1){const T=A-Math.floor(A/u.length)*u.length;v.push(u.length-T-1)}}else if(a>l.slides.length-m*2){w=Math.max(a-(l.slides.length-m*2),h.slidesPerGroup);for(let A=0;A<w;A+=1){const T=A-Math.floor(A/u.length)*u.length;g.push(T)}}if(b&&v.forEach(A=>{l.slides[A].swiperLoopMoveDOM=!0,f.prepend(l.slides[A]),l.slides[A].swiperLoopMoveDOM=!1}),_&&g.forEach(A=>{l.slides[A].swiperLoopMoveDOM=!0,f.append(l.slides[A]),l.slides[A].swiperLoopMoveDOM=!1}),l.recalcSlides(),h.slidesPerView==="auto"&&l.updateSlides(),h.watchSlidesProgress&&l.updateSlidesOffset(),t){if(v.length>0&&b)if(typeof e>"u"){const A=l.slidesGrid[y],C=l.slidesGrid[y+x]-A;o?l.setTranslate(l.translate-C):(l.slideTo(y+x,0,!1,!0),i&&(l.touches[l.isHorizontal()?"startX":"startY"]+=C,l.touchEventsData.currentTranslate=l.translate))}else i&&(l.slideToLoop(e,0,!1,!0),l.touchEventsData.currentTranslate=l.translate);else if(g.length>0&&_)if(typeof e>"u"){const A=l.slidesGrid[y],C=l.slidesGrid[y-w]-A;o?l.setTranslate(l.translate-C):(l.slideTo(y-w,0,!1,!0),i&&(l.touches[l.isHorizontal()?"startX":"startY"]+=C,l.touchEventsData.currentTranslate=l.translate))}else l.slideToLoop(e,0,!1,!0)}if(l.allowSlidePrev=c,l.allowSlideNext=d,l.controller&&l.controller.control&&!s){const A={slideRealIndex:e,direction:r,setTranslate:i,activeSlideIndex:a,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(T=>{!T.destroyed&&T.params.loop&&T.loopFix({...A,slideTo:T.params.slidesPerView===h.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...A,slideTo:l.controller.control.params.slidesPerView===h.slidesPerView?t:!1})}l.emit("loopFix")}function pUe(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const r=[];n.slides.forEach(i=>{const a=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;r[a]=i}),n.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),r.forEach(i=>{t.append(i)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var mUe={loopCreate:fUe,loopFix:hUe,loopDestroy:pUe};function vUe(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function gUe(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var yUe={setGrabCursor:vUe,unsetGrabCursor:gUe};function _Ue(n,e){e===void 0&&(e=this);function t(r){if(!r||r===Td()||r===ou())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(n);return!i&&!r.getRootNode?null:i||t(r.getRootNode().host)}return t(e)}function bUe(n){const e=this,t=Td(),r=ou(),i=e.touchEventsData;i.evCache.push(n);const{params:a,touches:s,enabled:o}=e;if(!o||!a.simulateTouch&&n.pointerType==="mouse"||e.animating&&a.preventInteractionOnTransition)return;!e.animating&&a.cssMode&&a.loop&&e.loopFix();let l=n;l.originalEvent&&(l=l.originalEvent);let u=l.target;if(a.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(u)||"which"in l&&l.which===3||"button"in l&&l.button>0||i.isTouched&&i.isMoved)return;const c=!!a.noSwipingClass&&a.noSwipingClass!=="",d=n.composedPath?n.composedPath():n.path;c&&l.target&&l.target.shadowRoot&&d&&(u=d[0]);const f=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,h=!!(l.target&&l.target.shadowRoot);if(a.noSwiping&&(h?_Ue(f,u):u.closest(f))){e.allowClick=!0;return}if(a.swipeHandler&&!u.closest(a.swipeHandler))return;s.currentX=l.pageX,s.currentY=l.pageY;const p=s.currentX,m=s.currentY,v=a.edgeSwipeDetection||a.iOSEdgeSwipeDetection,g=a.edgeSwipeThreshold||a.iOSEdgeSwipeThreshold;if(v&&(p<=g||p>=r.innerWidth-g))if(v==="prevent")n.preventDefault();else return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=p,s.startY=m,i.touchStartTime=MM(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,a.threshold>0&&(i.allowThresholdMove=!1);let y=!0;u.matches(i.focusableElements)&&(y=!1,u.nodeName==="SELECT"&&(i.isTouched=!1)),t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==u&&t.activeElement.blur();const _=y&&e.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||_)&&!u.isContentEditable&&l.preventDefault(),a.freeMode&&a.freeMode.enabled&&e.freeMode&&e.animating&&!a.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function SUe(n){const e=Td(),t=this,r=t.touchEventsData,{params:i,touches:a,rtlTranslate:s,enabled:o}=t;if(!o||!i.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),!r.isTouched){r.startMoving&&r.isScrolling&&t.emit("touchMoveOpposite",l);return}const u=r.evCache.findIndex(A=>A.pointerId===l.pointerId);u>=0&&(r.evCache[u]=l);const c=r.evCache.length>1?r.evCache[0]:l,d=c.pageX,f=c.pageY;if(l.preventedByNestedSwiper){a.startX=d,a.startY=f;return}if(!t.allowTouchMove){l.target.matches(r.focusableElements)||(t.allowClick=!1),r.isTouched&&(Object.assign(a,{startX:d,startY:f,prevX:t.touches.currentX,prevY:t.touches.currentY,currentX:d,currentY:f}),r.touchStartTime=MM());return}if(i.touchReleaseOnEdges&&!i.loop){if(t.isVertical()){if(f<a.startY&&t.translate<=t.maxTranslate()||f>a.startY&&t.translate>=t.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(d<a.startX&&t.translate<=t.maxTranslate()||d>a.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,t.allowClick=!1;return}if(r.allowTouchCallbacks&&t.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;a.currentX=d,a.currentY=f;const h=a.currentX-a.startX,p=a.currentY-a.startY;if(t.params.threshold&&Math.sqrt(h**2+p**2)<t.params.threshold)return;if(typeof r.isScrolling>"u"){let A;t.isHorizontal()&&a.currentY===a.startY||t.isVertical()&&a.currentX===a.startX?r.isScrolling=!1:h*h+p*p>=25&&(A=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,r.isScrolling=t.isHorizontal()?A>i.touchAngle:90-A>i.touchAngle)}if(r.isScrolling&&t.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(r.startMoving=!0),r.isScrolling||t.zoom&&t.params.zoom&&t.params.zoom.enabled&&r.evCache.length>1){r.isTouched=!1;return}if(!r.startMoving)return;t.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let m=t.isHorizontal()?h:p,v=t.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;i.oneWayMovement&&(m=Math.abs(m)*(s?1:-1),v=Math.abs(v)*(s?1:-1)),a.diff=m,m*=i.touchRatio,s&&(m=-m,v=-v);const g=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=v>0?"prev":"next";const y=t.params.loop&&!i.cssMode,_=t.swipeDirection==="next"&&t.allowSlideNext||t.swipeDirection==="prev"&&t.allowSlidePrev;if(!r.isMoved){if(y&&_&&t.loopFix({direction:t.swipeDirection}),r.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const A=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(A)}r.allowMomentumBounce=!1,i.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let b;r.isMoved&&g!==t.touchesDirection&&y&&_&&Math.abs(m)>=1&&(t.loopFix({direction:t.swipeDirection,setTranslate:!0}),b=!0),t.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=m+r.startTranslate;let x=!0,w=i.resistanceRatio;if(i.touchReleaseOnEdges&&(w=0),m>0?(y&&_&&!b&&r.currentTranslate>(i.centeredSlides?t.minTranslate()-t.size/2:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>t.minTranslate()&&(x=!1,i.resistance&&(r.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+r.startTranslate+m)**w))):m<0&&(y&&_&&!b&&r.currentTranslate<(i.centeredSlides?t.maxTranslate()+t.size/2:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(i.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<t.maxTranslate()&&(x=!1,i.resistance&&(r.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-r.startTranslate-m)**w))),x&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(m)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,r.currentTranslate=r.startTranslate,a.diff=t.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&t.freeMode||i.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(r.currentTranslate),t.setTranslate(r.currentTranslate))}function xUe(n){const e=this,t=e.touchEventsData,r=t.evCache.findIndex(_=>_.pointerId===n.pointerId);if(r>=0&&t.evCache.splice(r,1),["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:i,touches:a,rtlTranslate:s,slidesGrid:o,enabled:l}=e;if(!l||!i.simulateTouch&&n.pointerType==="mouse")return;let u=n;if(u.originalEvent&&(u=u.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",u),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&i.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}i.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const c=MM(),d=c-t.touchStartTime;if(e.allowClick){const _=u.path||u.composedPath&&u.composedPath();e.updateClickedSlide(_&&_[0]||u.target,_),e.emit("tap click",u),d<300&&c-t.lastClickTime<300&&e.emit("doubleTap doubleClick",u)}if(t.lastClickTime=MM(),K5(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let f;if(i.followFinger?f=s?e.translate:-e.translate:f=-t.currentTranslate,i.cssMode)return;if(i.freeMode&&i.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:f});return}let h=0,p=e.slidesSizesGrid[0];for(let _=0;_<o.length;_+=_<i.slidesPerGroupSkip?1:i.slidesPerGroup){const b=_<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof o[_+b]<"u"?f>=o[_]&&f<o[_+b]&&(h=_,p=o[_+b]-o[_]):f>=o[_]&&(h=_,p=o[o.length-1]-o[o.length-2])}let m=null,v=null;i.rewind&&(e.isBeginning?v=i.virtual&&i.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const g=(f-o[h])/p,y=h<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(d>i.longSwipesMs){if(!i.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(g>=i.longSwipesRatio?e.slideTo(i.rewind&&e.isEnd?m:h+y):e.slideTo(h)),e.swipeDirection==="prev"&&(g>1-i.longSwipesRatio?e.slideTo(h+y):v!==null&&g<0&&Math.abs(g)>i.longSwipesRatio?e.slideTo(v):e.slideTo(h))}else{if(!i.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(u.target===e.navigation.nextEl||u.target===e.navigation.prevEl)?u.target===e.navigation.nextEl?e.slideTo(h+y):e.slideTo(h):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:h+y),e.swipeDirection==="prev"&&e.slideTo(v!==null?v:h))}}function H$(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:a}=n,s=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const o=s&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!o?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!s?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=i,n.allowSlideNext=r,n.params.watchOverflow&&a!==n.snapGrid&&n.checkOverflow()}function wUe(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function TUe(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:r}=n;if(!r)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let i;const a=n.maxTranslate()-n.minTranslate();a===0?i=0:i=(n.translate-n.minTranslate())/a,i!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function CUe(n){const e=this;pE(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let V$=!1;function AUe(){}const Cie=(n,e)=>{const t=Td(),{params:r,el:i,wrapperEl:a,device:s}=n,o=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",u=e;i[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:o}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",n.onClick,!0),r.cssMode&&a[l]("scroll",n.onScroll),r.updateOnWindowResize?n[u](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",H$,!0):n[u]("observerUpdate",H$,!0),i[l]("load",n.onLoad,{capture:!0})};function EUe(){const n=this,e=Td(),{params:t}=n;n.onTouchStart=bUe.bind(n),n.onTouchMove=SUe.bind(n),n.onTouchEnd=xUe.bind(n),t.cssMode&&(n.onScroll=TUe.bind(n)),n.onClick=wUe.bind(n),n.onLoad=CUe.bind(n),V$||(e.addEventListener("touchstart",AUe),V$=!0),Cie(n,"on")}function MUe(){Cie(this,"off")}var IUe={attachEvents:EUe,detachEvents:MUe};const $$=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function DUe(){const n=this,{realIndex:e,initialized:t,params:r,el:i}=n,a=r.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const s=n.getBreakpoint(a,n.params.breakpointsBase,n.el);if(!s||n.currentBreakpoint===s)return;const l=(s in a?a[s]:void 0)||n.originalParams,u=$$(n,r),c=$$(n,l),d=r.enabled;u&&!c?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),n.emitContainerClasses()):!u&&c&&(i.classList.add(`${r.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),n.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(g=>{if(typeof l[g]>"u")return;const y=r[g]&&r[g].enabled,_=l[g]&&l[g].enabled;y&&!_&&n[g].disable(),!y&&_&&n[g].enable()});const f=l.direction&&l.direction!==r.direction,h=r.loop&&(l.slidesPerView!==r.slidesPerView||f),p=r.loop;f&&t&&n.changeDirection(),Wl(n.params,l);const m=n.params.enabled,v=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),d&&!m?n.disable():!d&&m&&n.enable(),n.currentBreakpoint=s,n.emit("_beforeBreakpoint",l),t&&(h?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!p&&v?(n.loopCreate(e),n.updateSlides()):p&&!v&&n.loopDestroy()),n.emit("breakpoint",l)}function PUe(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let r=!1;const i=ou(),a=e==="window"?i.innerHeight:t.clientHeight,s=Object.keys(n).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:a*l,point:o}}return{value:o,point:o}});s.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<s.length;o+=1){const{point:l,value:u}=s[o];e==="window"?i.matchMedia(`(min-width: ${u}px)`).matches&&(r=l):u<=t.clientWidth&&(r=l)}return r||"max"}var RUe={setBreakpoint:DUe,getBreakpoint:PUe};function kUe(n,e){const t=[];return n.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&t.push(e+i)}):typeof r=="string"&&t.push(e+r)}),t}function LUe(){const n=this,{classNames:e,params:t,rtl:r,el:i,device:a}=n,s=kUe(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:r},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...s),i.classList.add(...e),n.emitContainerClasses()}function OUe(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var NUe={addClasses:LUe,removeClasses:OUe};function BUe(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:r}=t;if(r){const i=n.slides.length-1,a=n.slidesGrid[i]+n.slidesSizesGrid[i]+r*2;n.isLocked=n.size>a}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var FUe={checkOverflow:BUe},Q5={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function UUe(n,e){return function(r){r===void 0&&(r={});const i=Object.keys(r)[0],a=r[i];if(typeof a!="object"||a===null){Wl(e,r);return}if(n[i]===!0&&(n[i]={enabled:!0}),i==="navigation"&&n[i]&&n[i].enabled&&!n[i].prevEl&&!n[i].nextEl&&(n[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&n[i]&&n[i].enabled&&!n[i].el&&(n[i].auto=!0),!(i in n&&"enabled"in a)){Wl(e,r);return}typeof n[i]=="object"&&!("enabled"in n[i])&&(n[i].enabled=!0),n[i]||(n[i]={enabled:!1}),Wl(e,r)}}const aP={eventsEmitter:N9e,update:j9e,translate:J9e,transition:rUe,slide:dUe,loop:mUe,grabCursor:yUe,events:IUe,breakpoints:RUe,checkOverflow:FUe,classes:NUe},sP={};let aF=class mf{constructor(){let e,t;for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?t=i[0]:[e,t]=i,t||(t={}),t=Wl({},t),e&&!t.el&&(t.el=e);const s=Td();if(t.el&&typeof t.el=="string"&&s.querySelectorAll(t.el).length>1){const c=[];return s.querySelectorAll(t.el).forEach(d=>{const f=Wl({},t,{el:d});c.push(new mf(f))}),c}const o=this;o.__swiper__=!0,o.support=wie(),o.device=P9e({userAgent:t.userAgent}),o.browser=k9e(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(c=>{c({params:t,swiper:o,extendParams:UUe(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const u=Wl({},Q5,l);return o.params=Wl({},u,sP,t),o.originalParams=Wl({},o.params),o.passedParams=Wl({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(c=>{o.on(c,o.params.on[c])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getSlideIndex(e){const{slidesEl:t,params:r}=this,i=pd(t,`.${r.slideClass}, swiper-slide`),a=IM(i[0]);return IM(e)-a}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:r}=e;e.slides=pd(t,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),s=(r.maxTranslate()-i)*e+i;r.translateTo(s,typeof t>"u"?0:t),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);t.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const r=this,{params:i,slides:a,slidesGrid:s,slidesSizesGrid:o,size:l,activeIndex:u}=r;let c=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let d=a[u]?a[u].swiperSlideSize:0,f;for(let h=u+1;h<a.length;h+=1)a[h]&&!f&&(d+=a[h].swiperSlideSize,c+=1,d>l&&(f=!0));for(let h=u-1;h>=0;h-=1)a[h]&&!f&&(d+=a[h].swiperSlideSize,c+=1,d>l&&(f=!0))}else if(e==="current")for(let d=u+1;d<a.length;d+=1)(t?s[d]+o[d]-s[u]<l:s[d]-s[u]<l)&&(c+=1);else for(let d=u-1;d>=0;d-=1)s[u]-s[d]<l&&(c+=1);return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(s=>{s.complete&&pE(e,s)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const s=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(s,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let a;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)i(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const s=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;a=e.slideTo(s.length-1,0,!1,!0)}else a=e.slideTo(e.activeIndex,0,!1,!0);a||i()}r.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(a=>{e==="vertical"?a.style.width="":a.style.height=""}),r.emit("changeDirection"),t&&r.update()),r}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let r=e||t.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=t,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(t.isElement=!0);const i=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let s=(()=>r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):pd(r,i())[0])();return!s&&t.params.createElements&&(s=Sie("div",t.params.wrapperClass),r.append(s),pd(r,`.${t.params.slideClass}`).forEach(o=>{s.append(o)})),Object.assign(t,{el:r,wrapperEl:s,slidesEl:t.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:s,hostEl:t.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||hp(r,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||hp(r,"direction")==="rtl"),wrongRTL:hp(s,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const i=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&i.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(a=>{a.complete?pE(t,a):a.addEventListener("load",s=>{pE(t,s.target)})}),Y5(t),t.initialized=!0,Y5(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const r=this,{params:i,el:a,wrapperEl:s,slides:o}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),t&&(r.removeClasses(),a.removeAttribute("style"),s.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el.swiper=null,w9e(r)),r.destroyed=!0),null}static extendDefaults(e){Wl(sP,e)}static get extendedDefaults(){return sP}static get defaults(){return Q5}static installModule(e){mf.prototype.__modules__||(mf.prototype.__modules__=[]);const t=mf.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>mf.installModule(t)),mf):(mf.installModule(e),mf)}};Object.keys(aP).forEach(n=>{Object.keys(aP[n]).forEach(e=>{aF.prototype[e]=aP[n][e]})});aF.use([L9e,O9e]);const Aie=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function fv(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function q0(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof n[r]>"u"?n[r]=e[r]:fv(e[r])&&fv(n[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?n[r]=e[r]:q0(n[r],e[r]):n[r]=e[r]})}function Eie(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function Mie(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function Iie(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function Die(n){n===void 0&&(n="");const e=n.split(" ").map(r=>r.trim()).filter(r=>!!r),t=[];return e.forEach(r=>{t.indexOf(r)<0&&t.push(r)}),t.join(" ")}function zUe(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function HUe(n){let{swiper:e,slides:t,passedParams:r,changedParams:i,nextEl:a,prevEl:s,scrollbarEl:o,paginationEl:l}=n;const u=i.filter(C=>C!=="children"&&C!=="direction"&&C!=="wrapperClass"),{params:c,pagination:d,navigation:f,scrollbar:h,virtual:p,thumbs:m}=e;let v,g,y,_,b,x,w,A;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(v=!0),i.includes("controller")&&r.controller&&r.controller.control&&c.controller&&!c.controller.control&&(g=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(c.pagination||c.pagination===!1)&&d&&!d.el&&(y=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&h&&!h.el&&(_=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||s)&&(r.navigation.nextEl||a)&&(c.navigation||c.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(b=!0);const T=C=>{e[C]&&(e[C].destroy(),C==="navigation"?(e.isElement&&(e[C].prevEl.remove(),e[C].nextEl.remove()),c[C].prevEl=void 0,c[C].nextEl=void 0,e[C].prevEl=void 0,e[C].nextEl=void 0):(e.isElement&&e[C].el.remove(),c[C].el=void 0,e[C].el=void 0))};i.includes("loop")&&e.isElement&&(c.loop&&!r.loop?x=!0:!c.loop&&r.loop?w=!0:A=!0),u.forEach(C=>{if(fv(c[C])&&fv(r[C]))q0(c[C],r[C]),(C==="navigation"||C==="pagination"||C==="scrollbar")&&"enabled"in r[C]&&!r[C].enabled&&T(C);else{const E=r[C];(E===!0||E===!1)&&(C==="navigation"||C==="pagination"||C==="scrollbar")?E===!1&&T(C):c[C]=r[C]}}),u.includes("controller")&&!g&&e.controller&&e.controller.control&&c.controller&&c.controller.control&&(e.controller.control=c.controller.control),i.includes("children")&&t&&p&&c.virtual.enabled&&(p.slides=t,p.update(!0)),i.includes("children")&&t&&c.loop&&(A=!0),v&&m.init()&&m.update(!0),g&&(e.controller.control=c.controller.control),y&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(c.pagination.el=l),d.init(),d.render(),d.update()),_&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),e.el.appendChild(o)),o&&(c.scrollbar.el=o),h.init(),h.updateSize(),h.setTranslate()),b&&(e.isElement&&((!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-next"),a.innerHTML=e.hostEl.constructor.nextButtonSvg,a.part.add("button-next"),e.el.appendChild(a)),(!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-prev"),s.innerHTML=e.hostEl.constructor.prevButtonSvg,s.part.add("button-prev"),e.el.appendChild(s))),a&&(c.navigation.nextEl=a),s&&(c.navigation.prevEl=s),f.init(),f.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&e.changeDirection(r.direction,!1),(x||A)&&e.loopDestroy(),(w||A)&&e.loopCreate(),e.update()}function G$(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},r={},i={};q0(t,Q5),t._emitClasses=!0,t.init=!1;const a={},s=Aie.map(l=>l.replace(/_/,"")),o=Object.assign({},n);return Object.keys(o).forEach(l=>{typeof n[l]>"u"||(s.indexOf(l)>=0?fv(n[l])?(t[l]={},i[l]={},q0(t[l],n[l]),q0(i[l],n[l])):(t[l]=n[l],i[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?e?r[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:a[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:i,rest:a,events:r}}function VUe(n,e){let{el:t,nextEl:r,prevEl:i,paginationEl:a,scrollbarEl:s,swiper:o}=n;Eie(e)&&r&&i&&(o.params.navigation.nextEl=r,o.originalParams.navigation.nextEl=r,o.params.navigation.prevEl=i,o.originalParams.navigation.prevEl=i),Mie(e)&&a&&(o.params.pagination.el=a,o.originalParams.pagination.el=a),Iie(e)&&s&&(o.params.scrollbar.el=s,o.originalParams.scrollbar.el=s),o.init(t)}function $Ue(n,e,t,r,i){const a=[];if(!e)return a;const s=l=>{a.indexOf(l)<0&&a.push(l)};if(t&&r){const l=r.map(i),u=t.map(i);l.join("")!==u.join("")&&s("children"),r.length!==t.length&&s("children")}return Aie.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(fv(n[l])&&fv(e[l])){const u=Object.keys(n[l]),c=Object.keys(e[l]);u.length!==c.length?s(l):(u.forEach(d=>{n[l][d]!==e[l][d]&&s(l)}),c.forEach(d=>{n[l][d]!==e[l][d]&&s(l)}))}else n[l]!==e[l]&&s(l)}),a}const GUe=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function oP(n,e,t){n===void 0&&(n={});const r=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},a=(s,o)=>{Array.isArray(s)&&s.forEach(l=>{const u=typeof l.type=="symbol";o==="default"&&(o="container-end"),u&&l.children?a(l.children,o):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")?r.push(l):i[o]&&i[o].push(l)})};return Object.keys(n).forEach(s=>{if(typeof n[s]!="function")return;const o=n[s]();a(o,s)}),t.value=e.value,e.value=r,{slides:r,slots:i}}function WUe(n,e,t){if(!t)return null;const r=c=>{let d=c;return c<0?d=e.length+c:d>=e.length&&(d=d-e.length),d},i=n.value.isHorizontal()?{[n.value.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:a,to:s}=t,o=n.value.params.loop?-e.length:0,l=n.value.params.loop?e.length*2:e.length,u=[];for(let c=o;c<l;c+=1)c>=a&&c<=s&&u.push(e[r(c)]);return u.map(c=>(c.props||(c.props={}),c.props.style||(c.props.style={}),c.props.swiperRef=n,c.props.style=i,an(c.type,{...c.props},c.children)))}const qUe={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","breakpointsBase","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(n,e){let{slots:t,emit:r}=e;const{tag:i,wrapperTag:a}=n,s=ie("swiper"),o=ie(null),l=ie(!1),u=ie(!1),c=ie(null),d=ie(null),f=ie(null),h={value:[]},p={value:[]},m=ie(null),v=ie(null),g=ie(null),y=ie(null),{params:_,passedParams:b}=G$(n,!1);oP(t,h,p),f.value=b,p.value=h.value;const x=()=>{oP(t,h,p),l.value=!0};_.onAny=function(T){for(var C=arguments.length,E=new Array(C>1?C-1:0),I=1;I<C;I++)E[I-1]=arguments[I];r(T,...E)},Object.assign(_.on,{_beforeBreakpoint:x,_containerClasses(T,C){s.value=C}});const w={..._};if(delete w.wrapperClass,d.value=new aF(w),d.value.virtual&&d.value.params.virtual.enabled){d.value.virtual.slides=h.value;const T={cache:!1,slides:h.value,renderExternal:C=>{o.value=C},renderExternalUpdate:!1};q0(d.value.params.virtual,T),q0(d.value.originalParams.virtual,T)}Ju(()=>{!u.value&&d.value&&(d.value.emitSlidesClasses(),u.value=!0);const{passedParams:T}=G$(n,!1),C=$Ue(T,f.value,h.value,p.value,E=>E.props&&E.props.key);f.value=T,(C.length||l.value)&&d.value&&!d.value.destroyed&&HUe({swiper:d.value,slides:h.value,passedParams:T,changedParams:C,nextEl:m.value,prevEl:v.value,scrollbarEl:y.value,paginationEl:g.value}),l.value=!1}),pr("swiper",d),St(o,()=>{cn(()=>{GUe(d.value)})}),zn(()=>{c.value&&(VUe({el:c.value,nextEl:m.value,prevEl:v.value,paginationEl:g.value,scrollbarEl:y.value,swiper:d.value},_),r("swiper",d.value))}),Wr(()=>{d.value&&!d.value.destroyed&&d.value.destroy(!0,!1)});function A(T){return _.virtual?WUe(d,T,o.value):(T.forEach((C,E)=>{C.props||(C.props={}),C.props.swiperRef=d,C.props.swiperSlideIndex=E}),T)}return()=>{const{slides:T,slots:C}=oP(t,h,p);return an(i,{ref:c,class:Die(s.value)},[C["container-start"],an(a,{class:zUe(_.wrapperClass)},[C["wrapper-start"],A(T),C["wrapper-end"]]),Eie(n)&&[an("div",{ref:v,class:"swiper-button-prev"}),an("div",{ref:m,class:"swiper-button-next"})],Iie(n)&&an("div",{ref:y,class:"swiper-scrollbar"}),Mie(n)&&an("div",{ref:g,class:"swiper-pagination"}),C["container-end"]])}}},jUe={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(n,e){let{slots:t}=e,r=!1;const{swiperRef:i}=n,a=ie(null),s=ie("swiper-slide"),o=ie(!1);function l(d,f,h){f===a.value&&(s.value=h)}zn(()=>{!i||!i.value||(i.value.on("_slideClass",l),r=!0)}),dN(()=>{r||!i||!i.value||(i.value.on("_slideClass",l),r=!0)}),Ju(()=>{!a.value||!i||!i.value||(typeof n.swiperSlideIndex<"u"&&(a.value.swiperSlideIndex=n.swiperSlideIndex),i.value.destroyed&&s.value!=="swiper-slide"&&(s.value="swiper-slide"))}),Wr(()=>{!i||!i.value||i.value.off("_slideClass",l)});const u=V(()=>({isActive:s.value.indexOf("swiper-slide-active")>=0,isVisible:s.value.indexOf("swiper-slide-visible")>=0,isPrev:s.value.indexOf("swiper-slide-prev")>=0,isNext:s.value.indexOf("swiper-slide-next")>=0}));pr("swiperSlide",u);const c=()=>{o.value=!0};return()=>an(n.tag,{class:Die(`${s.value}`),ref:a,"data-swiper-slide-index":typeof n.virtualIndex>"u"&&i&&i.value&&i.value.params.loop?n.swiperSlideIndex:n.virtualIndex,onLoadCapture:c},n.zoom?an("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof n.zoom=="number"?n.zoom:void 0},[t.default&&t.default(u.value),n.lazy&&!o.value&&an("div",{class:"swiper-lazy-preloader"})]):[t.default&&t.default(u.value),n.lazy&&!o.value&&an("div",{class:"swiper-lazy-preloader"})])}};function Pie(n,e,t,r){return n.params.createElements&&Object.keys(r).forEach(i=>{if(!t[i]&&t.auto===!0){let a=pd(n.el,`.${r[i]}`)[0];a||(a=Sie("div",r[i]),a.className=r[i],n.el.append(a)),t[i]=a,e[i]=a}}),t}function W$(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};const a=m=>(Array.isArray(m)?m:[m]).filter(v=>!!v);function s(m){let v;return m&&typeof m=="string"&&e.isElement&&(v=e.el.querySelector(m),v)?v:(m&&(typeof m=="string"&&(v=[...document.querySelectorAll(m)]),e.params.uniqueNavElements&&typeof m=="string"&&v.length>1&&e.el.querySelectorAll(m).length===1&&(v=e.el.querySelector(m))),m&&!v?m:v)}function o(m,v){const g=e.params.navigation;m=a(m),m.forEach(y=>{y&&(y.classList[v?"add":"remove"](...g.disabledClass.split(" ")),y.tagName==="BUTTON"&&(y.disabled=v),e.params.watchOverflow&&e.enabled&&y.classList[e.isLocked?"add":"remove"](g.lockClass))})}function l(){const{nextEl:m,prevEl:v}=e.navigation;if(e.params.loop){o(v,!1),o(m,!1);return}o(v,e.isBeginning&&!e.params.rewind),o(m,e.isEnd&&!e.params.rewind)}function u(m){m.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function c(m){m.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function d(){const m=e.params.navigation;if(e.params.navigation=Pie(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(m.nextEl||m.prevEl))return;let v=s(m.nextEl),g=s(m.prevEl);Object.assign(e.navigation,{nextEl:v,prevEl:g}),v=a(v),g=a(g);const y=(_,b)=>{_&&_.addEventListener("click",b==="next"?c:u),!e.enabled&&_&&_.classList.add(...m.lockClass.split(" "))};v.forEach(_=>y(_,"next")),g.forEach(_=>y(_,"prev"))}function f(){let{nextEl:m,prevEl:v}=e.navigation;m=a(m),v=a(v);const g=(y,_)=>{y.removeEventListener("click",_==="next"?c:u),y.classList.remove(...e.params.navigation.disabledClass.split(" "))};m.forEach(y=>g(y,"next")),v.forEach(y=>g(y,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?p():(d(),l())}),r("toEdge fromEdge lock unlock",()=>{l()}),r("destroy",()=>{f()}),r("enable disable",()=>{let{nextEl:m,prevEl:v}=e.navigation;if(m=a(m),v=a(v),e.enabled){l();return}[...m,...v].filter(g=>!!g).forEach(g=>g.classList.add(e.params.navigation.lockClass))}),r("click",(m,v)=>{let{nextEl:g,prevEl:y}=e.navigation;g=a(g),y=a(y);const _=v.target;if(e.params.navigation.hideOnClick&&!y.includes(_)&&!g.includes(_)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===_||e.pagination.el.contains(_)))return;let b;g.length?b=g[0].classList.contains(e.params.navigation.hiddenClass):y.length&&(b=y[0].classList.contains(e.params.navigation.hiddenClass)),i(b===!0?"navigationShow":"navigationHide"),[...g,...y].filter(x=>!!x).forEach(x=>x.classList.toggle(e.params.navigation.hiddenClass))}});const h=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),l()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),f()};Object.assign(e.navigation,{enable:h,disable:p,update:l,init:d,destroy:f})}function Lb(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function q$(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const a="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:y=>y,formatFractionTotal:y=>y,bulletClass:`${a}-bullet`,bulletActiveClass:`${a}-bullet-active`,modifierClass:`${a}-`,currentClass:`${a}-current`,totalClass:`${a}-total`,hiddenClass:`${a}-hidden`,progressbarFillClass:`${a}-progressbar-fill`,progressbarOppositeClass:`${a}-progressbar-opposite`,clickableClass:`${a}-clickable`,lockClass:`${a}-lock`,horizontalClass:`${a}-horizontal`,verticalClass:`${a}-vertical`,paginationDisabledClass:`${a}-disabled`}}),e.pagination={el:null,bullets:[]};let s,o=0;const l=y=>(Array.isArray(y)?y:[y]).filter(_=>!!_);function u(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(y,_){const{bulletActiveClass:b}=e.params.pagination;y&&(y=y[`${_==="prev"?"previous":"next"}ElementSibling`],y&&(y.classList.add(`${b}-${_}`),y=y[`${_==="prev"?"previous":"next"}ElementSibling`],y&&y.classList.add(`${b}-${_}-${_}`)))}function d(y){const _=y.target.closest(Lb(e.params.pagination.bulletClass));if(!_)return;y.preventDefault();const b=IM(_)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===b)return;const x=e.realIndex,w=e.getSlideIndexByData(b),A=e.getSlideIndexByData(e.realIndex),T=C=>{const E=e.activeIndex;e.loopFix({direction:C,activeSlideIndex:w,slideTo:!1});const I=e.activeIndex;E===I&&e.slideToLoop(x,0,!1,!0)};if(w>e.slides.length-e.loopedSlides)T(w>A?"next":"prev");else if(e.params.centeredSlides){const C=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(parseFloat(e.params.slidesPerView,10));w<Math.floor(C/2)&&T("prev")}e.slideToLoop(b)}else e.slideTo(b)}function f(){const y=e.rtl,_=e.params.pagination;if(u())return;let b=e.pagination.el;b=l(b);let x,w;const A=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,T=e.params.loop?Math.ceil(A/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(w=e.previousRealIndex||0,x=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(x=e.snapIndex,w=e.previousSnapIndex):(w=e.previousIndex||0,x=e.activeIndex||0),_.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const C=e.pagination.bullets;let E,I,P;if(_.dynamicBullets&&(s=X5(C[0],e.isHorizontal()?"width":"height",!0),b.forEach(L=>{L.style[e.isHorizontal()?"width":"height"]=`${s*(_.dynamicMainBullets+4)}px`}),_.dynamicMainBullets>1&&w!==void 0&&(o+=x-(w||0),o>_.dynamicMainBullets-1?o=_.dynamicMainBullets-1:o<0&&(o=0)),E=Math.max(x-o,0),I=E+(Math.min(C.length,_.dynamicMainBullets)-1),P=(I+E)/2),C.forEach(L=>{const N=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(F=>`${_.bulletActiveClass}${F}`)].map(F=>typeof F=="string"&&F.includes(" ")?F.split(" "):F).flat();L.classList.remove(...N)}),b.length>1)C.forEach(L=>{const N=IM(L);N===x?L.classList.add(..._.bulletActiveClass.split(" ")):e.isElement&&L.setAttribute("part","bullet"),_.dynamicBullets&&(N>=E&&N<=I&&L.classList.add(...`${_.bulletActiveClass}-main`.split(" ")),N===E&&c(L,"prev"),N===I&&c(L,"next"))});else{const L=C[x];if(L&&L.classList.add(..._.bulletActiveClass.split(" ")),e.isElement&&C.forEach((N,F)=>{N.setAttribute("part",F===x?"bullet-active":"bullet")}),_.dynamicBullets){const N=C[E],F=C[I];for(let k=E;k<=I;k+=1)C[k]&&C[k].classList.add(...`${_.bulletActiveClass}-main`.split(" "));c(N,"prev"),c(F,"next")}}if(_.dynamicBullets){const L=Math.min(C.length,_.dynamicMainBullets+4),N=(s*L-s)/2-P*s,F=y?"right":"left";C.forEach(k=>{k.style[e.isHorizontal()?F:"top"]=`${N}px`})}}b.forEach((C,E)=>{if(_.type==="fraction"&&(C.querySelectorAll(Lb(_.currentClass)).forEach(I=>{I.textContent=_.formatFractionCurrent(x+1)}),C.querySelectorAll(Lb(_.totalClass)).forEach(I=>{I.textContent=_.formatFractionTotal(T)})),_.type==="progressbar"){let I;_.progressbarOpposite?I=e.isHorizontal()?"vertical":"horizontal":I=e.isHorizontal()?"horizontal":"vertical";const P=(x+1)/T;let L=1,N=1;I==="horizontal"?L=P:N=P,C.querySelectorAll(Lb(_.progressbarFillClass)).forEach(F=>{F.style.transform=`translate3d(0,0,0) scaleX(${L}) scaleY(${N})`,F.style.transitionDuration=`${e.params.speed}ms`})}_.type==="custom"&&_.renderCustom?(C.innerHTML=_.renderCustom(e,x+1,T),E===0&&i("paginationRender",C)):(E===0&&i("paginationRender",C),i("paginationUpdate",C)),e.params.watchOverflow&&e.enabled&&C.classList[e.isLocked?"add":"remove"](_.lockClass)})}function h(){const y=e.params.pagination;if(u())return;const _=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let b=e.pagination.el;b=l(b);let x="";if(y.type==="bullets"){let w=e.params.loop?Math.ceil(_/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&w>_&&(w=_);for(let A=0;A<w;A+=1)y.renderBullet?x+=y.renderBullet.call(e,A,y.bulletClass):x+=`<${y.bulletElement} ${e.isElement?'part="bullet"':""} class="${y.bulletClass}"></${y.bulletElement}>`}y.type==="fraction"&&(y.renderFraction?x=y.renderFraction.call(e,y.currentClass,y.totalClass):x=`<span class="${y.currentClass}"></span> / <span class="${y.totalClass}"></span>`),y.type==="progressbar"&&(y.renderProgressbar?x=y.renderProgressbar.call(e,y.progressbarFillClass):x=`<span class="${y.progressbarFillClass}"></span>`),e.pagination.bullets=[],b.forEach(w=>{y.type!=="custom"&&(w.innerHTML=x||""),y.type==="bullets"&&e.pagination.bullets.push(...w.querySelectorAll(Lb(y.bulletClass)))}),y.type!=="custom"&&i("paginationRender",b[0])}function p(){e.params.pagination=Pie(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const y=e.params.pagination;if(!y.el)return;let _;typeof y.el=="string"&&e.isElement&&(_=e.el.querySelector(y.el)),!_&&typeof y.el=="string"&&(_=[...document.querySelectorAll(y.el)]),_||(_=y.el),!(!_||_.length===0)&&(e.params.uniqueNavElements&&typeof y.el=="string"&&Array.isArray(_)&&_.length>1&&(_=[...e.el.querySelectorAll(y.el)],_.length>1&&(_=_.filter(b=>xie(b,".swiper")[0]===e.el)[0])),Array.isArray(_)&&_.length===1&&(_=_[0]),Object.assign(e.pagination,{el:_}),_=l(_),_.forEach(b=>{y.type==="bullets"&&y.clickable&&b.classList.add(...(y.clickableClass||"").split(" ")),b.classList.add(y.modifierClass+y.type),b.classList.add(e.isHorizontal()?y.horizontalClass:y.verticalClass),y.type==="bullets"&&y.dynamicBullets&&(b.classList.add(`${y.modifierClass}${y.type}-dynamic`),o=0,y.dynamicMainBullets<1&&(y.dynamicMainBullets=1)),y.type==="progressbar"&&y.progressbarOpposite&&b.classList.add(y.progressbarOppositeClass),y.clickable&&b.addEventListener("click",d),e.enabled||b.classList.add(y.lockClass)}))}function m(){const y=e.params.pagination;if(u())return;let _=e.pagination.el;_&&(_=l(_),_.forEach(b=>{b.classList.remove(y.hiddenClass),b.classList.remove(y.modifierClass+y.type),b.classList.remove(e.isHorizontal()?y.horizontalClass:y.verticalClass),y.clickable&&(b.classList.remove(...(y.clickableClass||"").split(" ")),b.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(b=>b.classList.remove(...y.bulletActiveClass.split(" ")))}r("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const y=e.params.pagination;let{el:_}=e.pagination;_=l(_),_.forEach(b=>{b.classList.remove(y.horizontalClass,y.verticalClass),b.classList.add(e.isHorizontal()?y.horizontalClass:y.verticalClass)})}),r("init",()=>{e.params.pagination.enabled===!1?g():(p(),h(),f())}),r("activeIndexChange",()=>{typeof e.snapIndex>"u"&&f()}),r("snapIndexChange",()=>{f()}),r("snapGridLengthChange",()=>{h(),f()}),r("destroy",()=>{m()}),r("enable disable",()=>{let{el:y}=e.pagination;y&&(y=l(y),y.forEach(_=>_.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),r("lock unlock",()=>{f()}),r("click",(y,_)=>{const b=_.target,x=l(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&x&&x.length>0&&!b.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&b===e.navigation.nextEl||e.navigation.prevEl&&b===e.navigation.prevEl))return;const w=x[0].classList.contains(e.params.pagination.hiddenClass);i(w===!0?"paginationShow":"paginationHide"),x.forEach(A=>A.classList.toggle(e.params.pagination.hiddenClass))}});const v=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:y}=e.pagination;y&&(y=l(y),y.forEach(_=>_.classList.remove(e.params.pagination.paginationDisabledClass))),p(),h(),f()},g=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:y}=e.pagination;y&&(y=l(y),y.forEach(_=>_.classList.add(e.params.pagination.paginationDisabledClass))),m()};Object.assign(e.pagination,{enable:v,disable:g,render:h,update:f,init:p,destroy:m})}function j$(n){let{swiper:e,extendParams:t,on:r,emit:i,params:a}=n;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let s,o,l=a&&a.autoplay?a.autoplay.delay:3e3,u=a&&a.autoplay?a.autoplay.delay:3e3,c,d=new Date().getTime,f,h,p,m,v,g;function y(H){!e||e.destroyed||!e.wrapperEl||H.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",y),C())}const _=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(u=c,f=!1);const H=e.autoplay.paused?c:d+u-new Date().getTime();e.autoplay.timeLeft=H,i("autoplayTimeLeft",H,H/l),o=requestAnimationFrame(()=>{_()})},b=()=>{let H;return e.virtual&&e.params.virtual.enabled?H=e.slides.filter(B=>B.classList.contains("swiper-slide-active"))[0]:H=e.slides[e.activeIndex],H?parseInt(H.getAttribute("data-swiper-autoplay"),10):void 0},x=H=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),_();let U=typeof H>"u"?e.params.autoplay.delay:H;l=e.params.autoplay.delay,u=e.params.autoplay.delay;const B=b();!Number.isNaN(B)&&B>0&&typeof H>"u"&&(U=B,l=B,u=B),c=U;const $=e.params.speed,ee=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev($,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,$,!0,!0),i("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext($,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,$,!0,!0),i("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{x()})))};return U>0?(clearTimeout(s),s=setTimeout(()=>{ee()},U)):requestAnimationFrame(()=>{ee()}),U},w=()=>{e.autoplay.running=!0,x(),i("autoplayStart")},A=()=>{e.autoplay.running=!1,clearTimeout(s),cancelAnimationFrame(o),i("autoplayStop")},T=(H,U)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(s),H||(g=!0);const B=()=>{i("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",y):C()};if(e.autoplay.paused=!0,U){v&&(c=e.params.autoplay.delay),v=!1,B();return}c=(c||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&c<0&&!e.params.loop)&&(c<0&&(c=0),B())},C=()=>{e.isEnd&&c<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),g?(g=!1,x(c)):x(),e.autoplay.paused=!1,i("autoplayResume"))},E=()=>{if(e.destroyed||!e.autoplay.running)return;const H=Td();H.visibilityState==="hidden"&&(g=!0,T(!0)),H.visibilityState==="visible"&&C()},I=H=>{H.pointerType==="mouse"&&(g=!0,!(e.animating||e.autoplay.paused)&&T(!0))},P=H=>{H.pointerType==="mouse"&&e.autoplay.paused&&C()},L=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",I),e.el.addEventListener("pointerleave",P))},N=()=>{e.el.removeEventListener("pointerenter",I),e.el.removeEventListener("pointerleave",P)},F=()=>{Td().addEventListener("visibilitychange",E)},k=()=>{Td().removeEventListener("visibilitychange",E)};r("init",()=>{e.params.autoplay.enabled&&(L(),F(),d=new Date().getTime(),w())}),r("destroy",()=>{N(),k(),e.autoplay.running&&A()}),r("beforeTransitionStart",(H,U,B)=>{e.destroyed||!e.autoplay.running||(B||!e.params.autoplay.disableOnInteraction?T(!0,!0):A())}),r("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){A();return}h=!0,p=!1,g=!1,m=setTimeout(()=>{g=!0,p=!0,T(!0)},200)}}),r("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!h)){if(clearTimeout(m),clearTimeout(s),e.params.autoplay.disableOnInteraction){p=!1,h=!1;return}p&&e.params.cssMode&&C(),p=!1,h=!1}}),r("slideChange",()=>{e.destroyed||!e.autoplay.running||(v=!0)}),Object.assign(e.autoplay,{start:w,stop:A,pause:T,resume:C})}const KUe={components:{Swiper:qUe,SwiperSlide:jUe,Navigation:W$,Pagination:q$,Autoplay:j$},data(){return{modules:[W$,q$,j$],image_paths:["./carousel/1.png","./carousel/2.png","./carousel/3.png","./carousel/4.png","./carousel/5.png","./carousel/6.png","./carousel/7.png"]}}};function XUe(n,e,t,r,i,a){const s=Kt("el-image"),o=Kt("swiper-slide"),l=Kt("swiper"),u=Kt("el-col"),c=Kt("el-row");return W(),pt(c,{justify:"center"},{default:Oe(()=>[be(u,{span:24},{default:Oe(()=>[be(l,{loop:!0,slidesPerView:1,breakpoints:{600:{slidesPerView:2},800:{slidesPerView:3}},modules:i.modules,navigation:{hideOnClick:!0},pagination:{hideOnClick:!0,clickable:!0,type:"bullets"},autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0}},{default:Oe(()=>[(W(!0),Se(on,null,ur(i.image_paths,d=>(W(),pt(o,null,{default:Oe(()=>[be(s,{src:d},null,8,["src"])]),_:2},1024))),256))]),_:1},8,["modules"])]),_:1})]),_:1})}const YUe=$c(KUe,[["render",XUe]]);var IS;typeof window<"u"?IS=window:typeof Al<"u"?IS=Al:typeof self<"u"?IS=self:IS={};var q4=IS;const gt=Ls(q4),QUe={},ZUe=Object.freeze(Object.defineProperty({__proto__:null,default:QUe},Symbol.toStringTag,{value:"Module"})),JUe=cte(ZUe);var K$=typeof Al<"u"?Al:typeof window<"u"?window:{},eze=JUe,DS;typeof document<"u"?DS=document:(DS=K$["__GLOBAL_DOCUMENT_CACHE@4"],DS||(DS=K$["__GLOBAL_DOCUMENT_CACHE@4"]=eze));var Rie=DS;const An=Ls(Rie);function Qu(){return Qu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qu.apply(null,arguments)}const tze=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Qu}},Symbol.toStringTag,{value:"Module"}));var Z5={exports:{}};(function(n,e){function t(l){if(l&&typeof l=="object"){var u=l.which||l.keyCode||l.charCode;u&&(l=u)}if(typeof l=="number")return s[l];var c=String(l),d=r[c.toLowerCase()];if(d)return d;var d=i[c.toLowerCase()];if(d)return d;if(c.length===1)return c.charCodeAt(0)}t.isEventKey=function(u,c){if(u&&typeof u=="object"){var d=u.which||u.keyCode||u.charCode;if(d==null)return!1;if(typeof c=="string"){var f=r[c.toLowerCase()];if(f)return f===d;var f=i[c.toLowerCase()];if(f)return f===d}else if(typeof c=="number")return c===d;return!1}},e=n.exports=t;var r=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)r[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)r[a-48]=a;for(a=1;a<13;a++)r["f"+a]=a+111;for(a=0;a<10;a++)r["numpad "+a]=a+96;var s=e.names=e.title={};for(a in r)s[r[a]]=a;for(var o in i)r[o]=i[o]})(Z5,Z5.exports);var nze=Z5.exports;const Hr=Ls(nze);function Fr(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function z1(n,e){return z1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},z1(n,e)}function In(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,z1(n,e)}var rze=ize;function ize(n,e){var t,r=null;try{t=JSON.parse(n,e)}catch(i){r=i}return[r,t]}const aze=Ls(rze);var sF={exports:{}};const sze=cte(tze);var oze=uze,lze=Object.prototype.toString;function uze(n){if(!n)return!1;var e=lze.call(n);return e==="[object Function]"||typeof n=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}var cze=q4,dze=function(e,t){return t===void 0&&(t=!1),function(r,i,a){if(r){e(r);return}if(i.statusCode>=400&&i.statusCode<=599){var s=a;if(t)if(cze.TextDecoder){var o=fze(i.headers&&i.headers["content-type"]);try{s=new TextDecoder(o).decode(a)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:s});return}e(null,a)}};function fze(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(e,t){var r=t.split("="),i=r[0],a=r[1];return i.trim()==="charset"?a.trim():e},"utf-8")}var hze=dze,kie=q4,pze=sze,mze=oze;Cd.httpHandler=hze;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var vze=function(e){var t={};return e&&e.trim().split(`
`).forEach(function(r){var i=r.indexOf(":"),a=r.slice(0,i).trim().toLowerCase(),s=r.slice(i+1).trim();typeof t[a]>"u"?t[a]=s:Array.isArray(t[a])?t[a].push(s):t[a]=[t[a],s]}),t};sF.exports=Cd;sF.exports.default=Cd;Cd.XMLHttpRequest=kie.XMLHttpRequest||bze;Cd.XDomainRequest="withCredentials"in new Cd.XMLHttpRequest?Cd.XMLHttpRequest:kie.XDomainRequest;gze(["get","put","post","patch","head","delete"],function(n){Cd[n==="delete"?"del":n]=function(e,t,r){return t=Lie(e,t,r),t.method=n.toUpperCase(),Oie(t)}});function gze(n,e){for(var t=0;t<n.length;t++)e(n[t])}function yze(n){for(var e in n)if(n.hasOwnProperty(e))return!1;return!0}function Lie(n,e,t){var r=n;return mze(e)?(t=e,typeof n=="string"&&(r={uri:n})):r=pze({},e,{uri:n}),r.callback=t,r}function Cd(n,e,t){return e=Lie(n,e,t),Oie(e)}function Oie(n){if(typeof n.callback>"u")throw new Error("callback argument missing");var e=!1,t=function(_,b,x){e||(e=!0,n.callback(_,b,x))};function r(){o.readyState===4&&setTimeout(s,0)}function i(){var y=void 0;if(o.response?y=o.response:y=o.responseText||_ze(o),m)try{y=JSON.parse(y)}catch{}return y}function a(y){return clearTimeout(v),y instanceof Error||(y=new Error(""+(y||"Unknown XMLHttpRequest Error"))),y.statusCode=0,t(y,g)}function s(){if(!u){var y;clearTimeout(v),n.useXDR&&o.status===void 0?y=200:y=o.status===1223?204:o.status;var _=g,b=null;return y!==0?(_={body:i(),statusCode:y,method:d,headers:{},url:c,rawRequest:o},o.getAllResponseHeaders&&(_.headers=vze(o.getAllResponseHeaders()))):b=new Error("Internal XMLHttpRequest Error"),t(b,_,_.body)}}var o=n.xhr||null;o||(n.cors||n.useXDR?o=new Cd.XDomainRequest:o=new Cd.XMLHttpRequest);var l,u,c=o.url=n.uri||n.url,d=o.method=n.method||"GET",f=n.body||n.data,h=o.headers=n.headers||{},p=!!n.sync,m=!1,v,g={body:void 0,headers:{},statusCode:0,method:d,url:c,rawRequest:o};if("json"in n&&n.json!==!1&&(m=!0,h.accept||h.Accept||(h.Accept="application/json"),d!=="GET"&&d!=="HEAD"&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),f=JSON.stringify(n.json===!0?f:n.json))),o.onreadystatechange=r,o.onload=s,o.onerror=a,o.onprogress=function(){},o.onabort=function(){u=!0},o.ontimeout=a,o.open(d,c,!p,n.username,n.password),p||(o.withCredentials=!!n.withCredentials),!p&&n.timeout>0&&(v=setTimeout(function(){if(!u){u=!0,o.abort("timeout");var y=new Error("XMLHttpRequest timeout");y.code="ETIMEDOUT",a(y)}},n.timeout)),o.setRequestHeader)for(l in h)h.hasOwnProperty(l)&&o.setRequestHeader(l,h[l]);else if(n.headers&&!yze(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(o.responseType=n.responseType),"beforeSend"in n&&typeof n.beforeSend=="function"&&n.beforeSend(o),o.send(f||null),o}function _ze(n){try{if(n.responseType==="document")return n.responseXML;var e=n.responseXML&&n.responseXML.documentElement.nodeName==="parsererror";if(n.responseType===""&&!e)return n.responseXML}catch{}return null}function bze(){}var Sze=sF.exports;const Nie=Ls(Sze);var Bie={exports:{}},X$=Rie,oF=Object.create||function(){function n(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return n.prototype=e,new n}}();function jl(n,e){this.name="ParsingError",this.code=n.code,this.message=e||n.message}jl.prototype=oF(Error.prototype);jl.prototype.constructor=jl;jl.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function lF(n){function e(r,i,a,s){return(r|0)*3600+(i|0)*60+(a|0)+(s|0)/1e3}var t=n.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return t?t[3]?e(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?e(t[1],t[2],0,t[4]):e(0,t[1],t[2],t[4]):null}function nx(){this.values=oF(null)}nx.prototype={set:function(n,e){!this.get(n)&&e!==""&&(this.values[n]=e)},get:function(n,e,t){return t?this.has(n)?this.values[n]:e[t]:this.has(n)?this.values[n]:e},has:function(n){return n in this.values},alt:function(n,e,t){for(var r=0;r<t.length;++r)if(e===t[r]){this.set(n,e);break}},integer:function(n,e){/^-?\d+$/.test(e)&&this.set(n,parseInt(e,10))},percent:function(n,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(n,e),!0):!1}};function PS(n,e,t,r){var i=r?n.split(r):[n];for(var a in i)if(typeof i[a]=="string"){var s=i[a].split(t);if(s.length===2){var o=s[0].trim(),l=s[1].trim();e(o,l)}}}function xze(n,e,t){var r=n;function i(){var o=lF(n);if(o===null)throw new jl(jl.Errors.BadTimeStamp,"Malformed timestamp: "+r);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,l){var u=new nx;PS(o,function(c,d){switch(c){case"region":for(var f=t.length-1;f>=0;f--)if(t[f].id===d){u.set(c,t[f].region);break}break;case"vertical":u.alt(c,d,["rl","lr"]);break;case"line":var h=d.split(","),p=h[0];u.integer(c,p),u.percent(c,p)&&u.set("snapToLines",!1),u.alt(c,p,["auto"]),h.length===2&&u.alt("lineAlign",h[1],["start","center","end"]);break;case"position":h=d.split(","),u.percent(c,h[0]),h.length===2&&u.alt("positionAlign",h[1],["start","center","end"]);break;case"size":u.percent(c,d);break;case"align":u.alt(c,d,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");try{l.line=u.get("line","auto")}catch{}l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100);try{l.align=u.get("align","center")}catch{l.align=u.get("align","middle")}try{l.position=u.get("position","auto")}catch{l.position=u.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=u.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function s(){n=n.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),n.substr(0,3)!=="-->")throw new jl(jl.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+r);n=n.substr(3),s(),e.endTime=i(),s(),a(n,e)}var lP=X$.createElement&&X$.createElement("textarea"),wze={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Y$={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Tze={v:"title",lang:"lang"},Q$={rt:"ruby"};function Fie(n,e){function t(){if(!e)return null;function p(v){return e=e.substr(v.length),v}var m=e.match(/^([^<]*)(<[^>]*>?)?/);return p(m[1]?m[1]:m[2])}function r(p){return lP.innerHTML=p,p=lP.textContent,lP.textContent="",p}function i(p,m){return!Q$[m.localName]||Q$[m.localName]===p.localName}function a(p,m){var v=wze[p];if(!v)return null;var g=n.document.createElement(v),y=Tze[p];return y&&m&&(g[y]=m.trim()),g}for(var s=n.document.createElement("div"),o=s,l,u=[];(l=t())!==null;){if(l[0]==="<"){if(l[1]==="/"){u.length&&u[u.length-1]===l.substr(2).replace(">","")&&(u.pop(),o=o.parentNode);continue}var c=lF(l.substr(1,l.length-2)),d;if(c){d=n.document.createProcessingInstruction("timestamp",c),o.appendChild(d);continue}var f=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f||(d=a(f[1],f[3]),!d)||!i(o,d))continue;if(f[2]){var h=f[2].split(".");h.forEach(function(p){var m=/^bg_/.test(p),v=m?p.slice(3):p;if(Y$.hasOwnProperty(v)){var g=m?"background-color":"color",y=Y$[v];d.style[g]=y}}),d.className=h.join(" ")}u.push(f[1]),o.appendChild(d),o=d;continue}o.appendChild(n.document.createTextNode(r(l)))}return s}var Z$=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Cze(n){for(var e=0;e<Z$.length;e++){var t=Z$[e];if(n>=t[0]&&n<=t[1])return!0}return!1}function Aze(n){var e=[],t="",r;if(!n||!n.childNodes)return"ltr";function i(o,l){for(var u=l.childNodes.length-1;u>=0;u--)o.push(l.childNodes[u])}function a(o){if(!o||!o.length)return null;var l=o.pop(),u=l.textContent||l.innerText;if(u){var c=u.match(/^.*(\n|\r)/);return c?(o.length=0,c[0]):u}if(l.tagName==="ruby")return a(o);if(l.childNodes)return i(o,l),a(o)}for(i(e,n);t=a(e);)for(var s=0;s<t.length;s++)if(r=t.charCodeAt(s),Cze(r))return"rtl";return"ltr"}function Eze(n){if(typeof n.line=="number"&&(n.snapToLines||n.line>=0&&n.line<=100))return n.line;if(!n.track||!n.track.textTrackList||!n.track.textTrackList.mediaElement)return-1;for(var e=n.track,t=e.textTrackList,r=0,i=0;i<t.length&&t[i]!==e;i++)t[i].mode==="showing"&&r++;return++r*-1}function j4(){}j4.prototype.applyStyles=function(n,e){e=e||this.div;for(var t in n)n.hasOwnProperty(t)&&(e.style[t]=n[t])};j4.prototype.formatStyle=function(n,e){return n===0?0:n+e};function DM(n,e,t){j4.call(this),this.cue=e,this.cueDiv=Fie(n,e.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=n.document.createElement("div"),r={direction:Aze(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:t.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(e.positionAlign){case"start":case"line-left":i=e.position;break;case"center":i=e.position-e.size/2;break;case"end":case"line-right":i=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}DM.prototype=oF(j4.prototype);DM.prototype.constructor=DM;function zo(n){var e,t,r,i;if(n.div){t=n.div.offsetHeight,r=n.div.offsetWidth,i=n.div.offsetTop;var a=(a=n.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();n=n.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,n.height/a.length):0}this.left=n.left,this.right=n.right,this.top=n.top||i,this.height=n.height||t,this.bottom=n.bottom||i+(n.height||t),this.width=n.width||r,this.lineHeight=e!==void 0?e:n.lineHeight}zo.prototype.move=function(n,e){switch(e=e!==void 0?e:this.lineHeight,n){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};zo.prototype.overlaps=function(n){return this.left<n.right&&this.right>n.left&&this.top<n.bottom&&this.bottom>n.top};zo.prototype.overlapsAny=function(n){for(var e=0;e<n.length;e++)if(this.overlaps(n[e]))return!0;return!1};zo.prototype.within=function(n){return this.top>=n.top&&this.bottom<=n.bottom&&this.left>=n.left&&this.right<=n.right};zo.prototype.overlapsOppositeAxis=function(n,e){switch(e){case"+x":return this.left<n.left;case"-x":return this.right>n.right;case"+y":return this.top<n.top;case"-y":return this.bottom>n.bottom}};zo.prototype.intersectPercentage=function(n){var e=Math.max(0,Math.min(this.right,n.right)-Math.max(this.left,n.left)),t=Math.max(0,Math.min(this.bottom,n.bottom)-Math.max(this.top,n.top)),r=e*t;return r/(this.height*this.width)};zo.prototype.toCSSCompatValues=function(n){return{top:this.top-n.top,bottom:n.bottom-this.bottom,left:this.left-n.left,right:n.right-this.right,height:this.height,width:this.width}};zo.getSimpleBoxPosition=function(n){var e=n.div?n.div.offsetHeight:n.tagName?n.offsetHeight:0,t=n.div?n.div.offsetWidth:n.tagName?n.offsetWidth:0,r=n.div?n.div.offsetTop:n.tagName?n.offsetTop:0;n=n.div?n.div.getBoundingClientRect():n.tagName?n.getBoundingClientRect():n;var i={left:n.left,right:n.right,top:n.top||r,height:n.height||e,bottom:n.bottom||r+(n.height||e),width:n.width||t};return i};function Mze(n,e,t,r){function i(v,g){for(var y,_=new zo(v),b=1,x=0;x<g.length;x++){for(;v.overlapsOppositeAxis(t,g[x])||v.within(t)&&v.overlapsAny(r);)v.move(g[x]);if(v.within(t))return v;var w=v.intersectPercentage(t);b>w&&(y=new zo(v),b=w),v=new zo(_)}return y||_}var a=new zo(e),s=e.cue,o=Eze(s),l=[];if(s.snapToLines){var u;switch(s.vertical){case"":l=["+y","-y"],u="height";break;case"rl":l=["+x","-x"],u="width";break;case"lr":l=["-x","+x"],u="width";break}var c=a.lineHeight,d=c*Math.round(o),f=t[u]+c,h=l[0];Math.abs(d)>f&&(d=d<0?-1:1,d*=Math.ceil(f/c)*c),o<0&&(d+=s.vertical===""?t.height:t.width,l=l.reverse()),a.move(h,d)}else{var p=a.lineHeight/t.height*100;switch(s.lineAlign){case"center":o-=p/2;break;case"end":o-=p;break}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],a=new zo(e)}var m=i(a,l);e.move(m.toCSSCompatValues(t))}function N_(){}N_.StringDecoder=function(){return{decode:function(n){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};N_.convertCueToDOMTree=function(n,e){return!n||!e?null:Fie(n,e)};var Ize=.05,Dze="sans-serif",Pze="1.5%";N_.processCues=function(n,e,t){if(!n||!e||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var r=n.document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=Pze,t.appendChild(r);function i(c){for(var d=0;d<c.length;d++)if(c[d].hasBeenReset||!c[d].displayState)return!0;return!1}if(!i(e)){for(var a=0;a<e.length;a++)r.appendChild(e[a].displayState);return}var s=[],o=zo.getSimpleBoxPosition(r),l=Math.round(o.height*Ize*100)/100,u={font:l+"px "+Dze};(function(){for(var c,d,f=0;f<e.length;f++)d=e[f],c=new DM(n,d,u),r.appendChild(c.div),Mze(n,c,o,s),d.displayState=c.div,s.push(zo.getSimpleBoxPosition(c))})()};N_.Parser=function(n,e,t){t||(t=e,e={}),e||(e={}),this.window=n,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]};N_.Parser.prototype={reportOrThrowError:function(n){if(n instanceof jl)this.onparsingerror&&this.onparsingerror(n);else throw n},parse:function(n){var e=this;n&&(e.buffer+=e.decoder.decode(n,{stream:!0}));function t(){for(var c=e.buffer,d=0;d<c.length&&c[d]!=="\r"&&c[d]!==`
`;)++d;var f=c.substr(0,d);return c[d]==="\r"&&++d,c[d]===`
`&&++d,e.buffer=c.substr(d),f}function r(c){var d=new nx;if(PS(c,function(h,p){switch(h){case"id":d.set(h,p);break;case"width":d.percent(h,p);break;case"lines":d.integer(h,p);break;case"regionanchor":case"viewportanchor":var m=p.split(",");if(m.length!==2)break;var v=new nx;if(v.percent("x",m[0]),v.percent("y",m[1]),!v.has("x")||!v.has("y"))break;d.set(h+"X",v.get("x")),d.set(h+"Y",v.get("y"));break;case"scroll":d.alt(h,p,["up"]);break}},/=/,/\s/),d.has("id")){var f=new(e.vttjs.VTTRegion||e.window.VTTRegion);f.width=d.get("width",100),f.lines=d.get("lines",3),f.regionAnchorX=d.get("regionanchorX",0),f.regionAnchorY=d.get("regionanchorY",100),f.viewportAnchorX=d.get("viewportanchorX",0),f.viewportAnchorY=d.get("viewportanchorY",100),f.scroll=d.get("scroll",""),e.onregion&&e.onregion(f),e.regionList.push({id:d.get("id"),region:f})}}function i(c){var d=new nx;PS(c,function(f,h){switch(f){case"MPEGT":d.integer(f+"S",h);break;case"LOCA":d.set(f+"L",lF(h));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}function a(c){c.match(/X-TIMESTAMP-MAP/)?PS(c,function(d,f){switch(d){case"X-TIMESTAMP-MAP":i(f);break}},/=/):PS(c,function(d,f){switch(d){case"Region":r(f);break}},/:/)}try{var s;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;s=t();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new jl(jl.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:s=t(),e.state){case"HEADER":/:/.test(s)?a(s):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",s.indexOf("-->")===-1){e.cue.id=s;continue}case"CUE":try{xze(s,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=s.indexOf("-->")!==-1;if(!s||u&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var n=this;try{if(n.buffer+=n.decoder.decode(),(n.cue||n.state==="HEADER")&&(n.buffer+=`

`,n.parse()),n.state==="INITIAL")throw new jl(jl.Errors.BadSignature)}catch(e){n.reportOrThrowError(e)}return n.onflush&&n.onflush(),this}};var Rze=N_,kze="auto",Lze={"":1,lr:1,rl:1},Oze={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Nze(n){if(typeof n!="string")return!1;var e=Lze[n.toLowerCase()];return e?n.toLowerCase():!1}function uP(n){if(typeof n!="string")return!1;var e=Oze[n.toLowerCase()];return e?n.toLowerCase():!1}function Uie(n,e,t){this.hasBeenReset=!1;var r="",i=!1,a=n,s=e,o=t,l=null,u="",c=!0,d="auto",f="start",h="auto",p="auto",m=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(g){r=""+g}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(g){i=!!g}},startTime:{enumerable:!0,get:function(){return a},set:function(g){if(typeof g!="number")throw new TypeError("Start time must be set to a number.");a=g,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(g){if(typeof g!="number")throw new TypeError("End time must be set to a number.");s=g,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(g){o=""+g,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(g){l=g,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(g){var y=Nze(g);if(y===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=y,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(g){c=!!g,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(g){if(typeof g!="number"&&g!==kze)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=g,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(g){var y=uP(g);y?(f=y,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return h},set:function(g){if(g<0||g>100)throw new Error("Position must be between 0 and 100.");h=g,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(g){var y=uP(g);y?(p=y,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return m},set:function(g){if(g<0||g>100)throw new Error("Size must be between 0 and 100.");m=g,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(g){var y=uP(g);if(!y)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=y,this.hasBeenReset=!0}}}),this.displayState=void 0}Uie.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Bze=Uie,Fze={"":!0,up:!0};function Uze(n){if(typeof n!="string")return!1;var e=Fze[n.toLowerCase()];return e?n.toLowerCase():!1}function Ob(n){return typeof n=="number"&&n>=0&&n<=100}function zze(){var n=100,e=3,t=0,r=100,i=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(o){if(!Ob(o))throw new Error("Width must be between 0 and 100.");n=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(o){if(!Ob(o))throw new Error("RegionAnchorX must be between 0 and 100.");r=o}},regionAnchorX:{enumerable:!0,get:function(){return t},set:function(o){if(!Ob(o))throw new Error("RegionAnchorY must be between 0 and 100.");t=o}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(o){if(!Ob(o))throw new Error("ViewportAnchorY must be between 0 and 100.");a=o}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!Ob(o))throw new Error("ViewportAnchorX must be between 0 and 100.");i=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var l=Uze(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=l}}})}var Hze=zze,Kf=q4,Dv=Bie.exports={WebVTT:Rze,VTTCue:Bze,VTTRegion:Hze};Kf.vttjs=Dv;Kf.WebVTT=Dv.WebVTT;var Vze=Dv.VTTCue,$ze=Dv.VTTRegion,Gze=Kf.VTTCue,Wze=Kf.VTTRegion;Dv.shim=function(){Kf.VTTCue=Vze,Kf.VTTRegion=$ze};Dv.restore=function(){Kf.VTTCue=Gze,Kf.VTTRegion=Wze};Kf.VTTCue||Dv.shim();var qze=Bie.exports;const J$=Ls(qze);function zie(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zie=function(){return!!n})()}function Hie(n,e,t){if(zie())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(n.bind.apply(n,r));return t&&z1(i,t.prototype),i}function jze(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&z1(n,e)}var Vie={exports:{}};(function(n,e){(function(t){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var f=o.parseURL(u);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=o.normalizePath(f.path),o.buildURLFromParts(f)):u;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var p=i.exec(h.path);h.netLoc=p[1],h.path=p[2]}h.netLoc&&!h.path&&(h.path="/");var m={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(m.netLoc=h.netLoc,f.path[0]!=="/"))if(!f.path)m.path=h.path,f.params||(m.params=h.params,f.query||(m.query=h.query));else{var v=h.path,g=v.substring(0,v.lastIndexOf("/")+1)+f.path;m.path=o.normalizePath(g)}return m.path===null&&(m.path=c.alwaysNormalize?o.normalizePath(f.path):f.path),o.buildURLFromParts(m)},parseURL:function(l){var u=r.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(a,"");l.length!==(l=l.replace(s,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=o})()})(Vie);var Kze=Vie.exports;const eG=Ls(Kze);var tG="http://example.com",K4=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=gt.location&&gt.location.href||"");var r=typeof gt.URL=="function",i=/^\/\//.test(e),a=!gt.location&&!/\/\//i.test(e);if(r?e=new gt.URL(e,gt.location||tG):/\/\//i.test(e)||(e=eG.buildAbsoluteURL(gt.location&&gt.location.href||"",e)),r){var s=new URL(t,e);return a?s.href.slice(tG.length):i?s.href.slice(s.protocol.length):s.href}return eG.buildAbsoluteURL(e,t)},uF=function(){function n(){this.listeners={}}var e=n.prototype;return e.on=function(r,i){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(i)},e.off=function(r,i){if(!this.listeners[r])return!1;var a=this.listeners[r].indexOf(i);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(a,1),a>-1},e.trigger=function(r){var i=this.listeners[r];if(i)if(arguments.length===2)for(var a=i.length,s=0;s<a;++s)i[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=i.length,u=0;u<l;++u)i[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(i){r.push(i)})},n}(),Xze=function(e){return gt.atob?gt.atob(e):Buffer.from(e,"base64").toString("binary")};function $ie(n){for(var e=Xze(n),t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}/*! @name m3u8-parser @version 4.8.0 @license Apache-2.0 */var Yze=function(n){In(e,n);function e(){var r;return r=n.call(this)||this,r.buffer="",r}var t=e.prototype;return t.push=function(i){var a;for(this.buffer+=i,a=this.buffer.indexOf(`
`);a>-1;a=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)},e}(uF),Qze=String.fromCharCode(9),cP=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),r={};return t[1]&&(r.length=parseInt(t[1],10)),t[2]&&(r.offset=parseInt(t[2],10)),r},Zze=function(){var e="[^=]*",t='"[^"]*"|[^,]*',r="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+r+")")},uc=function(e){for(var t=e.split(Zze()),r={},i=t.length,a;i--;)t[i]!==""&&(a=/([^=]*)=(.*)/.exec(t[i]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),r[a[0]]=a[1]);return r},Jze=function(n){In(e,n);function e(){var r;return r=n.call(this)||this,r.customParsers=[],r.tagMappers=[],r}var t=e.prototype;return t.push=function(i){var a=this,s,o;if(i=i.trim(),i.length!==0){if(i[0]!=="#"){this.trigger("data",{type:"uri",uri:i});return}var l=this.tagMappers.reduce(function(u,c){var d=c(i);return d===i?u:u.concat([d])},[i]);l.forEach(function(u){for(var c=0;c<a.customParsers.length;c++)if(a.customParsers[c].call(a,u))return;if(u.indexOf("#EXT")!==0){a.trigger("data",{type:"comment",text:u.slice(1)});return}if(u=u.replace("\r",""),s=/^#EXTM3U/.exec(u),s){a.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(u),s){o={type:"tag",tagType:"inf"},s[1]&&(o.duration=parseFloat(s[1])),s[2]&&(o.title=s[2]),a.trigger("data",o);return}if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(u),s){o={type:"tag",tagType:"targetduration"},s[1]&&(o.duration=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(u),s){o={type:"tag",tagType:"version"},s[1]&&(o.version=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(u),s){o={type:"tag",tagType:"media-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(u),s){o={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(u),s){o={type:"tag",tagType:"playlist-type"},s[1]&&(o.playlistType=s[1]),a.trigger("data",o);return}if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(u),s){o=Qu(cP(s[1]),{type:"tag",tagType:"byterange"}),a.trigger("data",o);return}if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(u),s){o={type:"tag",tagType:"allow-cache"},s[1]&&(o.allowed=!/NO/.test(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-MAP:?(.*)$/.exec(u),s){if(o={type:"tag",tagType:"map"},s[1]){var d=uc(s[1]);d.URI&&(o.uri=d.URI),d.BYTERANGE&&(o.byterange=cP(d.BYTERANGE))}a.trigger("data",o);return}if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(u),s){if(o={type:"tag",tagType:"stream-inf"},s[1]){if(o.attributes=uc(s[1]),o.attributes.RESOLUTION){var f=o.attributes.RESOLUTION.split("x"),h={};f[0]&&(h.width=parseInt(f[0],10)),f[1]&&(h.height=parseInt(f[1],10)),o.attributes.RESOLUTION=h}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["FRAME-RATE"]&&(o.attributes["FRAME-RATE"]=parseFloat(o.attributes["FRAME-RATE"])),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(u),s){o={type:"tag",tagType:"media"},s[1]&&(o.attributes=uc(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-ENDLIST/.exec(u),s){a.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(u),s){a.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(u),s){o={type:"tag",tagType:"program-date-time"},s[1]&&(o.dateTimeString=s[1],o.dateTimeObject=new Date(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-KEY:?(.*)$/.exec(u),s){o={type:"tag",tagType:"key"},s[1]&&(o.attributes=uc(s[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),a.trigger("data",o);return}if(s=/^#EXT-X-START:?(.*)$/.exec(u),s){o={type:"tag",tagType:"start"},s[1]&&(o.attributes=uc(s[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(u),s){o={type:"tag",tagType:"cue-out-cont"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(u),s){o={type:"tag",tagType:"cue-out"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(u),s){o={type:"tag",tagType:"cue-in"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(u),s&&s[1]){o={type:"tag",tagType:"skip"},o.attributes=uc(s[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(Qze)),a.trigger("data",o);return}if(s=/^#EXT-X-PART:(.*)$/.exec(u),s&&s[1]){o={type:"tag",tagType:"part"},o.attributes=uc(s[1]),["DURATION"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=parseFloat(o.attributes[p]))}),["INDEPENDENT","GAP"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=/YES/.test(o.attributes[p]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=cP(o.attributes.BYTERANGE)),a.trigger("data",o);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(u),s&&s[1]){o={type:"tag",tagType:"server-control"},o.attributes=uc(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=parseFloat(o.attributes[p]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=/YES/.test(o.attributes[p]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(u),s&&s[1]){o={type:"tag",tagType:"part-inf"},o.attributes=uc(s[1]),["PART-TARGET"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=parseFloat(o.attributes[p]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(u),s&&s[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=uc(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(p){if(o.attributes.hasOwnProperty(p)){o.attributes[p]=parseInt(o.attributes[p],10);var m=p==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[m]=o.attributes[p],delete o.attributes[p]}}),a.trigger("data",o);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(u),s&&s[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=uc(s[1]),["LAST-MSN","LAST-PART"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=parseInt(o.attributes[p],10))}),a.trigger("data",o);return}a.trigger("data",{type:"tag",data:u.slice(4)})})}},t.addParser=function(i){var a=this,s=i.expression,o=i.customType,l=i.dataParser,u=i.segment;typeof l!="function"&&(l=function(d){return d}),this.customParsers.push(function(c){var d=s.exec(c);if(d)return a.trigger("data",{type:"custom",data:l(c),customType:o,segment:u}),!0})},t.addTagMapper=function(i){var a=i.expression,s=i.map,o=function(u){return a.test(u)?s(u):u};this.tagMappers.push(o)},e}(uF),eHe=function(e){return e.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})},ug=function(e){var t={};return Object.keys(e).forEach(function(r){t[eHe(r)]=e[r]}),t},dP=function(e){var t=e.serverControl,r=e.targetDuration,i=e.partTargetDuration;if(t){var a="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",l=r&&r*3,u=i&&i*2;r&&!t.hasOwnProperty(s)&&(t[s]=l,this.trigger("info",{message:a+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&t[s]<l&&(this.trigger("warn",{message:a+" clamping HOLD-BACK ("+t[s]+") to targetDuration * 3 ("+l+")"}),t[s]=l),i&&!t.hasOwnProperty(o)&&(t[o]=i*3,this.trigger("info",{message:a+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[o]+")."})),i&&t[o]<u&&(this.trigger("warn",{message:a+" clamping PART-HOLD-BACK ("+t[o]+") to partTargetDuration * 2 ("+u+")."}),t[o]=u)}},tHe=function(n){In(e,n);function e(){var r;r=n.call(this)||this,r.lineStream=new Yze,r.parseStream=new Jze,r.lineStream.pipe(r.parseStream);var i=Fr(r),a=[],s={},o,l,u=!1,c=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},f="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",h=0;r.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var p=0,m=0;return r.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&o&&(s.map=o),!s.key&&l&&(s.key=l),!s.timeline&&typeof h=="number"&&(s.timeline=h),r.manifest.preloadSegment=s)}),r.parseStream.on("data",function(v){var g,y;({tag:function(){({version:function(){v.version&&(this.manifest.version=v.version)},"allow-cache":function(){this.manifest.allowCache=v.allowed,"allowed"in v||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var x={};"length"in v&&(s.byterange=x,x.length=v.length,"offset"in v||(v.offset=p)),"offset"in v&&(s.byterange=x,x.offset=v.offset),p=x.offset+x.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),v.duration>0&&(s.duration=v.duration),v.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(!v.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(v.attributes.METHOD==="NONE"){l=null;return}if(!v.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(v.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:v.attributes};return}if(v.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:v.attributes.URI};return}if(v.attributes.KEYFORMAT===f){var x=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(x.indexOf(v.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(v.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),v.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(v.attributes.KEYID&&v.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:v.attributes.KEYFORMAT,keyId:v.attributes.KEYID.substring(2)},pssh:$ie(v.attributes.URI.split(",")[1])};return}v.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:v.attributes.METHOD||"AES-128",uri:v.attributes.URI},typeof v.attributes.IV<"u"&&(l.iv=v.attributes.IV)},"media-sequence":function(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+v.number});return}this.manifest.mediaSequence=v.number},"discontinuity-sequence":function(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+v.number});return}this.manifest.discontinuitySequence=v.number,h=v.number},"playlist-type":function(){if(!/VOD|EVENT/.test(v.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+v.playlist});return}this.manifest.playlistType=v.playlistType},map:function(){o={},v.uri&&(o.uri=v.uri),v.byterange&&(o.byterange=v.byterange),l&&(o.key=l)},"stream-inf":function(){if(this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||d,!v.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),Qu(s.attributes,v.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,!(v.attributes&&v.attributes.TYPE&&v.attributes["GROUP-ID"]&&v.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var x=this.manifest.mediaGroups[v.attributes.TYPE];x[v.attributes["GROUP-ID"]]=x[v.attributes["GROUP-ID"]]||{},g=x[v.attributes["GROUP-ID"]],y={default:/yes/i.test(v.attributes.DEFAULT)},y.default?y.autoselect=!0:y.autoselect=/yes/i.test(v.attributes.AUTOSELECT),v.attributes.LANGUAGE&&(y.language=v.attributes.LANGUAGE),v.attributes.URI&&(y.uri=v.attributes.URI),v.attributes["INSTREAM-ID"]&&(y.instreamId=v.attributes["INSTREAM-ID"]),v.attributes.CHARACTERISTICS&&(y.characteristics=v.attributes.CHARACTERISTICS),v.attributes.FORCED&&(y.forced=/yes/i.test(v.attributes.FORCED)),g[v.attributes.NAME]=y},discontinuity:function(){h+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=v.dateTimeString,this.manifest.dateTimeObject=v.dateTimeObject),s.dateTimeString=v.dateTimeString,s.dateTimeObject=v.dateTimeObject},targetduration:function(){if(!isFinite(v.duration)||v.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+v.duration});return}this.manifest.targetDuration=v.duration,dP.call(this,this.manifest)},start:function(){if(!v.attributes||isNaN(v.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:v.attributes["TIME-OFFSET"],precise:v.attributes.PRECISE}},"cue-out":function(){s.cueOut=v.data},"cue-out-cont":function(){s.cueOutCont=v.data},"cue-in":function(){s.cueIn=v.data},skip:function(){this.manifest.skip=ug(v.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",v.attributes,["SKIPPED-SEGMENTS"])},part:function(){var x=this;u=!0;var w=this.manifest.segments.length,A=ug(v.attributes);s.parts=s.parts||[],s.parts.push(A),A.byterange&&(A.byterange.hasOwnProperty("offset")||(A.byterange.offset=m),m=A.byterange.offset+A.byterange.length);var T=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+T+" for segment #"+w,v.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(C,E){C.hasOwnProperty("lastPart")||x.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+E+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var x=this.manifest.serverControl=ug(v.attributes);x.hasOwnProperty("canBlockReload")||(x.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),dP.call(this,this.manifest),x.canSkipDateranges&&!x.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var x=this.manifest.segments.length,w=ug(v.attributes),A=w.type&&w.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(w),w.byterange&&(w.byterange.hasOwnProperty("offset")||(w.byterange.offset=A?m:0,A&&(m=w.byterange.offset+w.byterange.length)));var T=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+T+" for segment #"+x,v.attributes,["TYPE","URI"]),!!w.type)for(var C=0;C<s.preloadHints.length-1;C++){var E=s.preloadHints[C];E.type&&E.type===w.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+T+" for segment #"+x+" has the same TYPE "+w.type+" as preload hint #"+C})}},"rendition-report":function(){var x=ug(v.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(x);var w=this.manifest.renditionReports.length-1,A=["LAST-MSN","URI"];u&&A.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+w,v.attributes,A)},"part-inf":function(){this.manifest.partInf=ug(v.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",v.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),dP.call(this,this.manifest)}}[v.tagType]||c).call(i)},uri:function(){s.uri=v.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),l&&(s.key=l),s.timeline=h,o&&(s.map=o),m=0,s={}},comment:function(){},custom:function(){v.segment?(s.custom=s.custom||{},s.custom[v.customType]=v.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[v.customType]=v.data)}})[v.type].call(i)}),r}var t=e.prototype;return t.warnOnMissingAttributes_=function(i,a,s){var o=[];s.forEach(function(l){a.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:i+" lacks required attribute(s): "+o.join(", ")})},t.push=function(i){this.lineStream.push(i)},t.end=function(){this.lineStream.push(`
`),this.trigger("end")},t.addParser=function(i){this.parseStream.addParser(i)},t.addTagMapper=function(i){this.parseStream.addTagMapper(i)},e}(uF),j0={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},nHe=["video","audio","text"],nG=["Video","Audio","Text"],Gie=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,r,i){var a=("00"+Number(r).toString(16)).slice(-2),s=("00"+Number(i).toString(16)).slice(-2);return"avc1."+a+"00"+s})},rd=function(e){e===void 0&&(e="");var t=e.split(","),r=[];return t.forEach(function(i){i=i.trim();var a;nHe.forEach(function(s){var o=j0[s].exec(i.toLowerCase());if(!(!o||o.length<=1)){a=s;var l=i.substring(0,o[1].length),u=i.replace(l,"");r.push({type:l,details:u,mediaType:s})}}),a||r.push({type:i,details:"",mediaType:"unknown"})}),r},rHe=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var r=e.mediaGroups.AUDIO[t];if(!r)return null;for(var i in r){var a=r[i];if(a.default&&a.playlists)return rd(a.playlists[0].attributes.CODECS)}return null},Wie=function(e){return e===void 0&&(e=""),j0.audio.test(e.trim().toLowerCase())},iHe=function(e){return e===void 0&&(e=""),j0.text.test(e.trim().toLowerCase())},p2=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(a){return Gie(a.trim())}),r="video";t.length===1&&Wie(t[0])?r="audio":t.length===1&&iHe(t[0])&&(r="application");var i="mp4";return t.every(function(a){return j0.mp4.test(a)})?i="mp4":t.every(function(a){return j0.webm.test(a)})?i="webm":t.every(function(a){return j0.ogg.test(a)})&&(i="ogg"),r+"/"+i+';codecs="'+e+'"'}},mE=function(e){return e===void 0&&(e=""),gt.MediaSource&&gt.MediaSource.isTypeSupported&&gt.MediaSource.isTypeSupported(p2(e))||!1},fP=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var r=0;r<nG.length;r++){var i=nG[r];if(j0["muxer"+i].test(t))return!0}return!1})},rG="mp4a.40.2",aHe="avc1.4d400d",sHe=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,oHe=/^application\/dash\+xml/i,qie=function(e){return sHe.test(e)?"hls":oHe.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},lHe=function(e){return e.toString(2).length},uHe=function(e){return Math.ceil(lHe(e)/8)},jie=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},cHe=function(e){return jie(e)},Tr=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!cHe(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},zs=gt.BigInt||Number,J5=[zs("0x1"),zs("0x100"),zs("0x10000"),zs("0x1000000"),zs("0x100000000"),zs("0x10000000000"),zs("0x1000000000000"),zs("0x100000000000000"),zs("0x10000000000000000")];(function(){var n=new Uint16Array([65484]),e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var dHe=function(e,t){var r=t===void 0?{}:t,i=r.signed,a=i===void 0?!1:i,s=r.le,o=s===void 0?!1:s;e=Tr(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(f,h,p){var m=o?p:Math.abs(p+1-e.length);return f+zs(h)*J5[m]},zs(0));if(a){var d=J5[e.length]/zs(2)-zs(1);c=zs(c),c>d&&(c-=d,c-=d,c-=zs(2))}return Number(c)},fHe=function(e,t){var r=t===void 0?{}:t,i=r.le,a=i===void 0?!1:i;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=zs(e);for(var s=uHe(e),o=new Uint8Array(new ArrayBuffer(s)),l=0;l<s;l++){var u=a?l:Math.abs(l+1-o.length);o[u]=Number(e/J5[l]&zs(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},Kie=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r},hHe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return Tr(t[0]);var i=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),a=new Uint8Array(i),s=0;return t.forEach(function(o){o=Tr(o),a.set(o,s),s+=o.byteLength}),a},ya=function(e,t,r){var i=r===void 0?{}:r,a=i.offset,s=a===void 0?0:a,o=i.mask,l=o===void 0?[]:o;e=Tr(e),t=Tr(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-s>=t.length&&u.call(t,function(c,d){var f=l[d]?l[d]&e[s+d]:e[s+d];return c===f})},pHe=function(e,t,r){t.forEach(function(i){for(var a in e.mediaGroups[i])for(var s in e.mediaGroups[i][a]){var o=e.mediaGroups[i][a][s];r(o,i,a,s)}})},dm={},fh={};function mHe(n,e,t){if(t===void 0&&(t=Array.prototype),n&&typeof t.find=="function")return t.find.call(n,e);for(var r=0;r<n.length;r++)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];if(e.call(void 0,i,r,n))return i}}function cF(n,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(n):n}function vHe(n,e){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}var Xie=cF({HTML:"text/html",isHTML:function(n){return n===Xie.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Yie=cF({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===Yie.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});fh.assign=vHe;fh.find=mHe;fh.freeze=cF;fh.MIME_TYPE=Xie;fh.NAMESPACE=Yie;var Qie=fh,Ad=Qie.find,m2=Qie.NAMESPACE;function gHe(n){return n!==""}function yHe(n){return n?n.split(/[\t\n\f\r ]+/).filter(gHe):[]}function _He(n,e){return n.hasOwnProperty(e)||(n[e]=!0),n}function iG(n){if(!n)return[];var e=yHe(n);return Object.keys(e.reduce(_He,{}))}function bHe(n){return function(e){return n&&n.indexOf(e)!==-1}}function Mw(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function Il(n,e){var t=n.prototype;if(!(t instanceof e)){let i=function(){};var r=i;i.prototype=e.prototype,i=new i,Mw(t,i),n.prototype=t=i}t.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),t.constructor=n)}var Dl={},Lc=Dl.ELEMENT_NODE=1,H1=Dl.ATTRIBUTE_NODE=2,PM=Dl.TEXT_NODE=3,Zie=Dl.CDATA_SECTION_NODE=4,Jie=Dl.ENTITY_REFERENCE_NODE=5,SHe=Dl.ENTITY_NODE=6,eae=Dl.PROCESSING_INSTRUCTION_NODE=7,tae=Dl.COMMENT_NODE=8,nae=Dl.DOCUMENT_NODE=9,rae=Dl.DOCUMENT_TYPE_NODE=10,Xf=Dl.DOCUMENT_FRAGMENT_NODE=11,xHe=Dl.NOTATION_NODE=12,Ao={},Ps={};Ao.INDEX_SIZE_ERR=(Ps[1]="Index size error",1);Ao.DOMSTRING_SIZE_ERR=(Ps[2]="DOMString size error",2);var dl=Ao.HIERARCHY_REQUEST_ERR=(Ps[3]="Hierarchy request error",3);Ao.WRONG_DOCUMENT_ERR=(Ps[4]="Wrong document",4);Ao.INVALID_CHARACTER_ERR=(Ps[5]="Invalid character",5);Ao.NO_DATA_ALLOWED_ERR=(Ps[6]="No data allowed",6);Ao.NO_MODIFICATION_ALLOWED_ERR=(Ps[7]="No modification allowed",7);var iae=Ao.NOT_FOUND_ERR=(Ps[8]="Not found",8);Ao.NOT_SUPPORTED_ERR=(Ps[9]="Not supported",9);var aG=Ao.INUSE_ATTRIBUTE_ERR=(Ps[10]="Attribute in use",10);Ao.INVALID_STATE_ERR=(Ps[11]="Invalid state",11);Ao.SYNTAX_ERR=(Ps[12]="Syntax error",12);Ao.INVALID_MODIFICATION_ERR=(Ps[13]="Invalid modification",13);Ao.NAMESPACE_ERR=(Ps[14]="Invalid namespace",14);Ao.INVALID_ACCESS_ERR=(Ps[15]="Invalid access",15);function Va(n,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,Ps[n]),this.message=Ps[n],Error.captureStackTrace&&Error.captureStackTrace(this,Va);return t.code=n,e&&(this.message=this.message+": "+e),t}Va.prototype=Error.prototype;Mw(Ao,Va);function Of(){}Of.prototype={length:0,item:function(n){return n>=0&&n<this.length?this[n]:null},toString:function(n,e){for(var t=[],r=0;r<this.length;r++)ky(this[r],t,n,e);return t.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function V1(n,e){this._node=n,this._refresh=e,dF(this)}function dF(n){var e=n._node._inc||n._node.ownerDocument._inc;if(n._inc!==e){var t=n._refresh(n._node);if(vae(n,"length",t.length),!n.$$length||t.length<n.$$length)for(var r=t.length;r in n;r++)Object.prototype.hasOwnProperty.call(n,r)&&delete n[r];Mw(t,n),n._inc=e}}V1.prototype.item=function(n){return dF(this),this[n]||null};Il(V1,Of);function RM(){}function aae(n,e){for(var t=n.length;t--;)if(n[t]===e)return t}function sG(n,e,t,r){if(r?e[aae(e,r)]=t:e[e.length++]=t,n){t.ownerElement=n;var i=n.ownerDocument;i&&(r&&lae(i,n,r),wHe(i,n,t))}}function oG(n,e,t){var r=aae(e,t);if(r>=0){for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,n){var a=n.ownerDocument;a&&(lae(a,n,t),t.ownerElement=null)}}else throw new Va(iae,new Error(n.tagName+"@"+t))}RM.prototype={length:0,item:Of.prototype.item,getNamedItem:function(n){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==n)return t}},setNamedItem:function(n){var e=n.ownerElement;if(e&&e!=this._ownerElement)throw new Va(aG);var t=this.getNamedItem(n.nodeName);return sG(this._ownerElement,this,n,t),t},setNamedItemNS:function(n){var e=n.ownerElement,t;if(e&&e!=this._ownerElement)throw new Va(aG);return t=this.getNamedItemNS(n.namespaceURI,n.localName),sG(this._ownerElement,this,n,t),t},removeNamedItem:function(n){var e=this.getNamedItem(n);return oG(this._ownerElement,this,e),e},removeNamedItemNS:function(n,e){var t=this.getNamedItemNS(n,e);return oG(this._ownerElement,this,t),t},getNamedItemNS:function(n,e){for(var t=this.length;t--;){var r=this[t];if(r.localName==e&&r.namespaceURI==n)return r}return null}};function sae(){}sae.prototype={hasFeature:function(n,e){return!0},createDocument:function(n,e,t){var r=new Iw;if(r.implementation=this,r.childNodes=new Of,r.doctype=t||null,t&&r.appendChild(t),e){var i=r.createElementNS(n,e);r.appendChild(i)}return r},createDocumentType:function(n,e,t){var r=new X4;return r.name=n,r.nodeName=n,r.publicId=e||"",r.systemId=t||"",r}};function Wi(){}Wi.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,e){return kM(this,n,e)},replaceChild:function(n,e){kM(this,n,e,cae),e&&this.removeChild(e)},removeChild:function(n){return uae(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return e6(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var e=n.nextSibling;e&&e.nodeType==PM&&n.nodeType==PM?(this.removeChild(e),n.appendData(e.data)):(n.normalize(),n=e)}},isSupported:function(n,e){return this.ownerDocument.implementation.hasFeature(n,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var e=this;e;){var t=e._nsMap;if(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&t[r]===n)return r}e=e.nodeType==H1?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(n){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n];e=e.nodeType==H1?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(n){var e=this.lookupPrefix(n);return e==null}};function oae(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}Mw(Dl,Wi);Mw(Dl,Wi.prototype);function v2(n,e){if(e(n))return!0;if(n=n.firstChild)do if(v2(n,e))return!0;while(n=n.nextSibling)}function Iw(){this.ownerDocument=this}function wHe(n,e,t){n&&n._inc++;var r=t.namespaceURI;r===m2.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function lae(n,e,t,r){n&&n._inc++;var i=t.namespaceURI;i===m2.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function fF(n,e,t){if(n&&n._inc){n._inc++;var r=e.childNodes;if(t)r[r.length++]=t;else{for(var i=e.firstChild,a=0;i;)r[a++]=i,i=i.nextSibling;r.length=a,delete r[r.length]}}}function uae(n,e){var t=e.previousSibling,r=e.nextSibling;return t?t.nextSibling=r:n.firstChild=r,r?r.previousSibling=t:n.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,fF(n.ownerDocument,n),e}function THe(n){return n&&(n.nodeType===Wi.DOCUMENT_NODE||n.nodeType===Wi.DOCUMENT_FRAGMENT_NODE||n.nodeType===Wi.ELEMENT_NODE)}function CHe(n){return n&&(Ed(n)||hF(n)||Yf(n)||n.nodeType===Wi.DOCUMENT_FRAGMENT_NODE||n.nodeType===Wi.COMMENT_NODE||n.nodeType===Wi.PROCESSING_INSTRUCTION_NODE)}function Yf(n){return n&&n.nodeType===Wi.DOCUMENT_TYPE_NODE}function Ed(n){return n&&n.nodeType===Wi.ELEMENT_NODE}function hF(n){return n&&n.nodeType===Wi.TEXT_NODE}function lG(n,e){var t=n.childNodes||[];if(Ad(t,Ed)||Yf(e))return!1;var r=Ad(t,Yf);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function uG(n,e){var t=n.childNodes||[];function r(a){return Ed(a)&&a!==e}if(Ad(t,r))return!1;var i=Ad(t,Yf);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function AHe(n,e,t){if(!THe(n))throw new Va(dl,"Unexpected parent node type "+n.nodeType);if(t&&t.parentNode!==n)throw new Va(iae,"child not in parent");if(!CHe(e)||Yf(e)&&n.nodeType!==Wi.DOCUMENT_NODE)throw new Va(dl,"Unexpected node type "+e.nodeType+" for parent node type "+n.nodeType)}function EHe(n,e,t){var r=n.childNodes||[],i=e.childNodes||[];if(e.nodeType===Wi.DOCUMENT_FRAGMENT_NODE){var a=i.filter(Ed);if(a.length>1||Ad(i,hF))throw new Va(dl,"More than one element or text in fragment");if(a.length===1&&!lG(n,t))throw new Va(dl,"Element in fragment can not be inserted before doctype")}if(Ed(e)&&!lG(n,t))throw new Va(dl,"Only one element can be added and only after doctype");if(Yf(e)){if(Ad(r,Yf))throw new Va(dl,"Only one doctype is allowed");var s=Ad(r,Ed);if(t&&r.indexOf(s)<r.indexOf(t))throw new Va(dl,"Doctype can only be inserted before an element");if(!t&&s)throw new Va(dl,"Doctype can not be appended since element is present")}}function cae(n,e,t){var r=n.childNodes||[],i=e.childNodes||[];if(e.nodeType===Wi.DOCUMENT_FRAGMENT_NODE){var a=i.filter(Ed);if(a.length>1||Ad(i,hF))throw new Va(dl,"More than one element or text in fragment");if(a.length===1&&!uG(n,t))throw new Va(dl,"Element in fragment can not be inserted before doctype")}if(Ed(e)&&!uG(n,t))throw new Va(dl,"Only one element can be added and only after doctype");if(Yf(e)){let l=function(u){return Yf(u)&&u!==t};var o=l;if(Ad(r,l))throw new Va(dl,"Only one doctype is allowed");var s=Ad(r,Ed);if(t&&r.indexOf(s)<r.indexOf(t))throw new Va(dl,"Doctype can only be inserted before an element")}}function kM(n,e,t,r){AHe(n,e,t),n.nodeType===Wi.DOCUMENT_NODE&&(r||EHe)(n,e,t);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===Xf){var a=e.firstChild;if(a==null)return e;var s=e.lastChild}else a=s=e;var o=t?t.previousSibling:n.lastChild;a.previousSibling=o,s.nextSibling=t,o?o.nextSibling=a:n.firstChild=a,t==null?n.lastChild=s:t.previousSibling=s;do a.parentNode=n;while(a!==s&&(a=a.nextSibling));return fF(n.ownerDocument||n,n),e.nodeType==Xf&&(e.firstChild=e.lastChild=null),e}function MHe(n,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=n,e.previousSibling=n.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:n.firstChild=e,n.lastChild=e,fF(n.ownerDocument,n,e),e}Iw.prototype={nodeName:"#document",nodeType:nae,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,e){if(n.nodeType==Xf){for(var t=n.firstChild;t;){var r=t.nextSibling;this.insertBefore(t,e),t=r}return n}return kM(this,n,e),n.ownerDocument=this,this.documentElement===null&&n.nodeType===Lc&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),uae(this,n)},replaceChild:function(n,e){kM(this,n,e,cae),n.ownerDocument=this,e&&this.removeChild(e),Ed(n)&&(this.documentElement=n)},importNode:function(n,e){return mae(this,n,e)},getElementById:function(n){var e=null;return v2(this.documentElement,function(t){if(t.nodeType==Lc&&t.getAttribute("id")==n)return e=t,!0}),e},getElementsByClassName:function(n){var e=iG(n);return new V1(this,function(t){var r=[];return e.length>0&&v2(t.documentElement,function(i){if(i!==t&&i.nodeType===Lc){var a=i.getAttribute("class");if(a){var s=n===a;if(!s){var o=iG(a);s=e.every(bHe(o))}s&&r.push(i)}}}),r})},createElement:function(n){var e=new hv;e.ownerDocument=this,e.nodeName=n,e.tagName=n,e.localName=n,e.childNodes=new Of;var t=e.attributes=new RM;return t._ownerElement=e,e},createDocumentFragment:function(){var n=new Y4;return n.ownerDocument=this,n.childNodes=new Of,n},createTextNode:function(n){var e=new pF;return e.ownerDocument=this,e.appendData(n),e},createComment:function(n){var e=new mF;return e.ownerDocument=this,e.appendData(n),e},createCDATASection:function(n){var e=new vF;return e.ownerDocument=this,e.appendData(n),e},createProcessingInstruction:function(n,e){var t=new yF;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=n,t.nodeValue=t.data=e,t},createAttribute:function(n){var e=new LM;return e.ownerDocument=this,e.name=n,e.nodeName=n,e.localName=n,e.specified=!0,e},createEntityReference:function(n){var e=new gF;return e.ownerDocument=this,e.nodeName=n,e},createElementNS:function(n,e){var t=new hv,r=e.split(":"),i=t.attributes=new RM;return t.childNodes=new Of,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=n,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,i._ownerElement=t,t},createAttributeNS:function(n,e){var t=new LM,r=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=n,t.specified=!0,r.length==2?(t.prefix=r[0],t.localName=r[1]):t.localName=e,t}};Il(Iw,Wi);function hv(){this._nsMap={}}hv.prototype={nodeType:Lc,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var e=this.getAttributeNode(n);return e&&e.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,e){var t=this.ownerDocument.createAttribute(n);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(n){var e=this.getAttributeNode(n);e&&this.removeAttributeNode(e)},appendChild:function(n){return n.nodeType===Xf?this.insertBefore(n,null):MHe(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(n,e){return this.getAttributeNodeNS(n,e)!=null},getAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);return t&&t.value||""},setAttributeNS:function(n,e,t){var r=this.ownerDocument.createAttributeNS(n,e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},getAttributeNodeNS:function(n,e){return this.attributes.getNamedItemNS(n,e)},getElementsByTagName:function(n){return new V1(this,function(e){var t=[];return v2(e,function(r){r!==e&&r.nodeType==Lc&&(n==="*"||r.tagName==n)&&t.push(r)}),t})},getElementsByTagNameNS:function(n,e){return new V1(this,function(t){var r=[];return v2(t,function(i){i!==t&&i.nodeType===Lc&&(n==="*"||i.namespaceURI===n)&&(e==="*"||i.localName==e)&&r.push(i)}),r})}};Iw.prototype.getElementsByTagName=hv.prototype.getElementsByTagName;Iw.prototype.getElementsByTagNameNS=hv.prototype.getElementsByTagNameNS;Il(hv,Wi);function LM(){}LM.prototype.nodeType=H1;Il(LM,Wi);function Dw(){}Dw.prototype={data:"",substringData:function(n,e){return this.data.substring(n,n+e)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,e){this.replaceData(n,0,e)},appendChild:function(n){throw new Error(Ps[dl])},deleteData:function(n,e){this.replaceData(n,e,"")},replaceData:function(n,e,t){var r=this.data.substring(0,n),i=this.data.substring(n+e);t=r+t+i,this.nodeValue=this.data=t,this.length=t.length}};Il(Dw,Wi);function pF(){}pF.prototype={nodeName:"#text",nodeType:PM,splitText:function(n){var e=this.data,t=e.substring(n);e=e.substring(0,n),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};Il(pF,Dw);function mF(){}mF.prototype={nodeName:"#comment",nodeType:tae};Il(mF,Dw);function vF(){}vF.prototype={nodeName:"#cdata-section",nodeType:Zie};Il(vF,Dw);function X4(){}X4.prototype.nodeType=rae;Il(X4,Wi);function dae(){}dae.prototype.nodeType=xHe;Il(dae,Wi);function fae(){}fae.prototype.nodeType=SHe;Il(fae,Wi);function gF(){}gF.prototype.nodeType=Jie;Il(gF,Wi);function Y4(){}Y4.prototype.nodeName="#document-fragment";Y4.prototype.nodeType=Xf;Il(Y4,Wi);function yF(){}yF.prototype.nodeType=eae;Il(yF,Wi);function hae(){}hae.prototype.serializeToString=function(n,e,t){return pae.call(n,e,t)};Wi.prototype.toString=pae;function pae(n,e){var t=[],r=this.nodeType==9&&this.documentElement||this,i=r.prefix,a=r.namespaceURI;if(a&&i==null){var i=r.lookupPrefix(a);if(i==null)var s=[{namespace:a,prefix:null}]}return ky(this,t,n,e,s),t.join("")}function cG(n,e,t){var r=n.prefix||"",i=n.namespaceURI;if(!i||r==="xml"&&i===m2.XML||i===m2.XMLNS)return!1;for(var a=t.length;a--;){var s=t[a];if(s.prefix===r)return s.namespace!==i}return!0}function hP(n,e,t){n.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,oae),'"')}function ky(n,e,t,r,i){if(i||(i=[]),r)if(n=r(n),n){if(typeof n=="string"){e.push(n);return}}else return;switch(n.nodeType){case Lc:var a=n.attributes,s=a.length,g=n.firstChild,o=n.tagName;t=m2.isHTML(n.namespaceURI)||t;var l=o;if(!t&&!n.prefix&&n.namespaceURI){for(var u,c=0;c<a.length;c++)if(a.item(c).name==="xmlns"){u=a.item(c).value;break}if(!u)for(var d=i.length-1;d>=0;d--){var f=i[d];if(f.prefix===""&&f.namespace===n.namespaceURI){u=f.namespace;break}}if(u!==n.namespaceURI)for(var d=i.length-1;d>=0;d--){var f=i[d];if(f.namespace===n.namespaceURI){f.prefix&&(l=f.prefix+":"+o);break}}}e.push("<",l);for(var h=0;h<s;h++){var p=a.item(h);p.prefix=="xmlns"?i.push({prefix:p.localName,namespace:p.value}):p.nodeName=="xmlns"&&i.push({prefix:"",namespace:p.value})}for(var h=0;h<s;h++){var p=a.item(h);if(cG(p,t,i)){var m=p.prefix||"",v=p.namespaceURI;hP(e,m?"xmlns:"+m:"xmlns",v),i.push({prefix:m,namespace:v})}ky(p,e,t,r,i)}if(o===l&&cG(n,t,i)){var m=n.prefix||"",v=n.namespaceURI;hP(e,m?"xmlns:"+m:"xmlns",v),i.push({prefix:m,namespace:v})}if(g||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;g;)g.data?e.push(g.data):ky(g,e,t,r,i.slice()),g=g.nextSibling;else for(;g;)ky(g,e,t,r,i.slice()),g=g.nextSibling;e.push("</",l,">")}else e.push("/>");return;case nae:case Xf:for(var g=n.firstChild;g;)ky(g,e,t,r,i.slice()),g=g.nextSibling;return;case H1:return hP(e,n.name,n.value);case PM:return e.push(n.data.replace(/[<&>]/g,oae));case Zie:return e.push("<![CDATA[",n.data,"]]>");case tae:return e.push("<!--",n.data,"-->");case rae:var y=n.publicId,_=n.systemId;if(e.push("<!DOCTYPE ",n.name),y)e.push(" PUBLIC ",y),_&&_!="."&&e.push(" ",_),e.push(">");else if(_&&_!=".")e.push(" SYSTEM ",_,">");else{var b=n.internalSubset;b&&e.push(" [",b,"]"),e.push(">")}return;case eae:return e.push("<?",n.target," ",n.data,"?>");case Jie:return e.push("&",n.nodeName,";");default:e.push("??",n.nodeName)}}function mae(n,e,t){var r;switch(e.nodeType){case Lc:r=e.cloneNode(!1),r.ownerDocument=n;case Xf:break;case H1:t=!0;break}if(r||(r=e.cloneNode(!1)),r.ownerDocument=n,r.parentNode=null,t)for(var i=e.firstChild;i;)r.appendChild(mae(n,i,t)),i=i.nextSibling;return r}function e6(n,e,t){var r=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=e[i];typeof a!="object"&&a!=r[i]&&(r[i]=a)}switch(e.childNodes&&(r.childNodes=new Of),r.ownerDocument=n,r.nodeType){case Lc:var s=e.attributes,o=r.attributes=new RM,l=s.length;o._ownerElement=r;for(var u=0;u<l;u++)r.setAttributeNode(e6(n,s.item(u),!0));break;case H1:t=!0}if(t)for(var c=e.firstChild;c;)r.appendChild(e6(n,c,t)),c=c.nextSibling;return r}function vae(n,e,t){n[e]=t}try{if(Object.defineProperty){let n=function(e){switch(e.nodeType){case Lc:case Xf:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(n(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};var $St=n;Object.defineProperty(V1.prototype,"length",{get:function(){return dF(this),this.$$length}}),Object.defineProperty(Wi.prototype,"textContent",{get:function(){return n(this)},set:function(e){switch(this.nodeType){case Lc:case Xf:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),vae=function(e,t,r){e["$$"+t]=r}}}catch{}dm.DocumentType=X4;dm.DOMException=Va;dm.DOMImplementation=sae;dm.Element=hv;dm.Node=Wi;dm.NodeList=Of;dm.XMLSerializer=hae;var Q4={},gae={};(function(n){var e=fh.freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES})(gae);var _F={},g2=fh.NAMESPACE,t6=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,dG=new RegExp("[\\-\\.0-9"+t6.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),fG=new RegExp("^"+t6.source+dG.source+"*(?::"+t6.source+dG.source+"*)?$"),Nb=0,Ih=1,cg=2,Bb=3,dg=4,fg=5,Fb=6,zT=7;function $1(n,e){this.message=n,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,$1)}$1.prototype=new Error;$1.prototype.name=$1.name;function yae(){}yae.prototype={parse:function(n,e,t){var r=this.domBuilder;r.startDocument(),_ae(e,e={}),IHe(n,e,t,r,this.errorHandler),r.endDocument()}};function IHe(n,e,t,r,i){function a(k){if(k>65535){k-=65536;var H=55296+(k>>10),U=56320+(k&1023);return String.fromCharCode(H,U)}else return String.fromCharCode(k)}function s(k){var H=k.slice(1,-1);return Object.hasOwnProperty.call(t,H)?t[H]:H.charAt(0)==="#"?a(parseInt(H.substr(1).replace("x","0x"))):(i.error("entity not found:"+k),k)}function o(k){if(k>m){var H=n.substring(m,k).replace(/&#?\w+;/g,s);f&&l(m),r.characters(H,0,k-m),m=k}}function l(k,H){for(;k>=c&&(H=d.exec(n));)u=H.index,c=u+H[0].length,f.lineNumber++;f.columnNumber=k-u+1}for(var u=0,c=0,d=/.*(?:\r\n?|\n)|.*$/g,f=r.locator,h=[{currentNSMap:e}],p={},m=0;;){try{var v=n.indexOf("<",m);if(v<0){if(!n.substr(m).match(/^\s*$/)){var g=r.doc,y=g.createTextNode(n.substr(m));g.appendChild(y),r.currentElement=y}return}switch(v>m&&o(v),n.charAt(v+1)){case"/":var I=n.indexOf(">",v+3),_=n.substring(v+2,I).replace(/[ \t\n\r]+$/g,""),b=h.pop();I<0?(_=n.substring(v+2).replace(/[\s<].*/,""),i.error("end tag name: "+_+" is not complete:"+b.tagName),I=v+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),i.error("end tag name: "+_+" maybe not complete"),I=v+1+_.length);var x=b.localNSMap,w=b.tagName==_,A=w||b.tagName&&b.tagName.toLowerCase()==_.toLowerCase();if(A){if(r.endElement(b.uri,b.localName,_),x)for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&r.endPrefixMapping(T);w||i.fatalError("end tag name: "+_+" is not match the current start tagName:"+b.tagName)}else h.push(b);I++;break;case"?":f&&l(v),I=LHe(n,v,r);break;case"!":f&&l(v),I=kHe(n,v,r,i);break;default:f&&l(v);var C=new bae,E=h[h.length-1].currentNSMap,I=DHe(n,v,C,E,s,i),P=C.length;if(!C.closed&&RHe(n,I,C.tagName,p)&&(C.closed=!0,t.nbsp||i.warning("unclosed xml attribute")),f&&P){for(var L=hG(f,{}),N=0;N<P;N++){var F=C[N];l(F.offset),F.locator=hG(f,{})}r.locator=L,pG(C,r,E)&&h.push(C),r.locator=f}else pG(C,r,E)&&h.push(C);g2.isHTML(C.uri)&&!C.closed?I=PHe(n,I,C.tagName,s,r):I++}}catch(k){if(k instanceof $1)throw k;i.error("element parse error: "+k),I=-1}I>m?m=I:o(Math.max(v,m)+1)}}function hG(n,e){return e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber,e}function DHe(n,e,t,r,i,a){function s(f,h,p){t.attributeNames.hasOwnProperty(f)&&a.fatalError("Attribute "+f+" redefined"),t.addValue(f,h.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),p)}for(var o,l,u=++e,c=Nb;;){var d=n.charAt(u);switch(d){case"=":if(c===Ih)o=n.slice(e,u),c=Bb;else if(c===cg)c=Bb;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===Bb||c===Ih)if(c===Ih&&(a.warning('attribute value must after "="'),o=n.slice(e,u)),e=u+1,u=n.indexOf(d,e),u>0)l=n.slice(e,u),s(o,l,e-1),c=fg;else throw new Error("attribute value no end '"+d+"' match");else if(c==dg)l=n.slice(e,u),s(o,l,e),a.warning('attribute "'+o+'" missed start quot('+d+")!!"),e=u+1,c=fg;else throw new Error('attribute value must after "="');break;case"/":switch(c){case Nb:t.setTagName(n.slice(e,u));case fg:case Fb:case zT:c=zT,t.closed=!0;case dg:case Ih:break;case cg:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),c==Nb&&t.setTagName(n.slice(e,u)),u;case">":switch(c){case Nb:t.setTagName(n.slice(e,u));case fg:case Fb:case zT:break;case dg:case Ih:l=n.slice(e,u),l.slice(-1)==="/"&&(t.closed=!0,l=l.slice(0,-1));case cg:c===cg&&(l=o),c==dg?(a.warning('attribute "'+l+'" missed quot(")!'),s(o,l,e)):((!g2.isHTML(r[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),s(l,l,e));break;case Bb:throw new Error("attribute value missed!!")}return u;case"":d=" ";default:if(d<=" ")switch(c){case Nb:t.setTagName(n.slice(e,u)),c=Fb;break;case Ih:o=n.slice(e,u),c=cg;break;case dg:var l=n.slice(e,u);a.warning('attribute "'+l+'" missed quot(")!!'),s(o,l,e);case fg:c=Fb;break}else switch(c){case cg:t.tagName,(!g2.isHTML(r[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,e),e=u,c=Ih;break;case fg:a.warning('attribute space is required"'+o+'"!!');case Fb:c=Ih,e=u;break;case Bb:c=dg,e=u;break;case zT:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function pG(n,e,t){for(var r=n.tagName,i=null,d=n.length;d--;){var a=n[d],s=a.qName,o=a.value,f=s.indexOf(":");if(f>0)var l=a.prefix=s.slice(0,f),u=s.slice(f+1),c=l==="xmlns"&&u;else u=s,l=null,c=s==="xmlns"&&"";a.localName=u,c!==!1&&(i==null&&(i={},_ae(t,t={})),t[c]=i[c]=o,a.uri=g2.XMLNS,e.startPrefixMapping(c,o))}for(var d=n.length;d--;){a=n[d];var l=a.prefix;l&&(l==="xml"&&(a.uri=g2.XML),l!=="xmlns"&&(a.uri=t[l||""]))}var f=r.indexOf(":");f>0?(l=n.prefix=r.slice(0,f),u=n.localName=r.slice(f+1)):(l=null,u=n.localName=r);var h=n.uri=t[l||""];if(e.startElement(h,u,r,n),n.closed){if(e.endElement(h,u,r),i)for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&e.endPrefixMapping(l)}else return n.currentNSMap=t,n.localNSMap=i,!0}function PHe(n,e,t,r,i){if(/^(?:script|textarea)$/i.test(t)){var a=n.indexOf("</"+t+">",e),s=n.substring(e+1,a);if(/[&<]/.test(s))return/^script$/i.test(t)?(i.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,r),i.characters(s,0,s.length),a)}return e+1}function RHe(n,e,t,r){var i=r[t];return i==null&&(i=n.lastIndexOf("</"+t+">"),i<e&&(i=n.lastIndexOf("</"+t)),r[t]=i),i<e}function _ae(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function kHe(n,e,t,r){var i=n.charAt(e+2);switch(i){case"-":if(n.charAt(e+3)==="-"){var a=n.indexOf("-->",e+4);return a>e?(t.comment(n,e+4,a-e-4),a+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(e+3,6)=="CDATA["){var a=n.indexOf("]]>",e+9);return t.startCDATA(),t.characters(n,e+9,a-e-9),t.endCDATA(),a+3}var s=OHe(n,e),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var l=s[1][0],u=!1,c=!1;o>3&&(/^public$/i.test(s[2][0])?(u=s[3][0],c=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(c=s[3][0]));var d=s[o-1];return t.startDTD(l,u,c),t.endDTD(),d.index+d[0].length}}return-1}function LHe(n,e,t){var r=n.indexOf("?>",e);if(r){var i=n.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,t.processingInstruction(i[1],i[2]),r+2):-1}return-1}function bae(){this.attributeNames={}}bae.prototype={setTagName:function(n){if(!fG.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,e,t){if(!fG.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:e,offset:t}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function OHe(n,e){var t,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(n);t=i.exec(n);)if(r.push(t),t[1])return r}_F.XMLReader=yae;_F.ParseError=$1;var NHe=fh,BHe=dm,mG=gae,Sae=_F,FHe=BHe.DOMImplementation,vG=NHe.NAMESPACE,UHe=Sae.ParseError,zHe=Sae.XMLReader;function xae(n){return n.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function wae(n){this.options=n||{locator:{}}}wae.prototype.parseFromString=function(n,e){var t=this.options,r=new zHe,i=t.domBuilder||new Pw,a=t.errorHandler,s=t.locator,o=t.xmlns||{},l=/\/x?html?$/.test(e),u=l?mG.HTML_ENTITIES:mG.XML_ENTITIES;s&&i.setDocumentLocator(s),r.errorHandler=HHe(a,i,s),r.domBuilder=t.domBuilder||i,l&&(o[""]=vG.HTML),o.xml=o.xml||vG.XML;var c=t.normalizeLineEndings||xae;return n&&typeof n=="string"?r.parse(c(n),o,u):r.errorHandler.error("invalid doc source"),i.doc};function HHe(n,e,t){if(!n){if(e instanceof Pw)return e;n=e}var r={},i=n instanceof Function;t=t||{};function a(s){var o=n[s];!o&&i&&(o=n.length==2?function(l){n(s,l)}:n),r[s]=o&&function(l){o("[xmldom "+s+"]	"+l+n6(t))}||function(){}}return a("warning"),a("error"),a("fatalError"),r}function Pw(){this.cdata=!1}function hg(n,e){e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber}Pw.prototype={startDocument:function(){this.doc=new FHe().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,e,t,r){var i=this.doc,a=i.createElementNS(n,t||e),s=r.length;HT(this,a),this.currentElement=a,this.locator&&hg(this.locator,a);for(var o=0;o<s;o++){var n=r.getURI(o),l=r.getValue(o),t=r.getQName(o),u=i.createAttributeNS(n,t);this.locator&&hg(r.getLocator(o),u),u.value=u.nodeValue=l,a.setAttributeNode(u)}},endElement:function(n,e,t){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(n,e){},endPrefixMapping:function(n){},processingInstruction:function(n,e){var t=this.doc.createProcessingInstruction(n,e);this.locator&&hg(this.locator,t),HT(this,t)},ignorableWhitespace:function(n,e,t){},characters:function(n,e,t){if(n=gG.apply(this,arguments),n){if(this.cdata)var r=this.doc.createCDATASection(n);else var r=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(n)&&this.doc.appendChild(r),this.locator&&hg(this.locator,r)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,e,t){n=gG.apply(this,arguments);var r=this.doc.createComment(n);this.locator&&hg(this.locator,r),HT(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,e,t){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(n,e,t);this.locator&&hg(this.locator,i),HT(this,i),this.doc.doctype=i}},warning:function(n){console.warn("[xmldom warning]	"+n,n6(this.locator))},error:function(n){console.error("[xmldom error]	"+n,n6(this.locator))},fatalError:function(n){throw new UHe(n,this.locator)}};function n6(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function gG(n,e,t){return typeof n=="string"?n.substr(e,t):n.length>=e+t||e?new java.lang.String(n,e,t)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){Pw.prototype[n]=function(){return null}});function HT(n,e){n.currentElement?n.currentElement.appendChild(e):n.doc.appendChild(e)}Q4.__DOMHandler=Pw;Q4.normalizeLineEndings=xae;Q4.DOMParser=wae;var VHe=Q4.DOMParser;/*! @name mpd-parser @version 0.22.1 @license Apache-2.0 */var yG=function(e){return!!e&&typeof e=="object"},Ho=function n(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(i,a){return typeof a!="object"||Object.keys(a).forEach(function(s){Array.isArray(i[s])&&Array.isArray(a[s])?i[s]=i[s].concat(a[s]):yG(i[s])&&yG(a[s])?i[s]=n(i[s],a[s]):i[s]=a[s]}),i},{})},Tae=function(e){return Object.keys(e).map(function(t){return e[t]})},$He=function(e,t){for(var r=[],i=e;i<t;i++)r.push(i);return r},Z4=function(e){return e.reduce(function(t,r){return t.concat(r)},[])},Cae=function(e){if(!e.length)return[];for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t},GHe=function(e,t){return e.reduce(function(r,i,a){return i[t]&&r.push(a),r},[])},r6=function(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1},WHe=function(e,t){return Tae(e.reduce(function(r,i){return i.forEach(function(a){r[t(a)]=a}),r},{}))},G1={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},y2=function(e){var t=e.baseUrl,r=t===void 0?"":t,i=e.source,a=i===void 0?"":i,s=e.range,o=s===void 0?"":s,l=e.indexRange,u=l===void 0?"":l,c={uri:a,resolvedUri:K4(r||"",a)};if(o||u){var d=o||u,f=d.split("-"),h=gt.BigInt?gt.BigInt(f[0]):parseInt(f[0],10),p=gt.BigInt?gt.BigInt(f[1]):parseInt(f[1],10);h<Number.MAX_SAFE_INTEGER&&typeof h=="bigint"&&(h=Number(h)),p<Number.MAX_SAFE_INTEGER&&typeof p=="bigint"&&(p=Number(p));var m;typeof p=="bigint"||typeof h=="bigint"?m=gt.BigInt(p)-gt.BigInt(h)+gt.BigInt(1):m=p-h+1,typeof m=="bigint"&&m<Number.MAX_SAFE_INTEGER&&(m=Number(m)),c.byterange={length:m,offset:h}}return c},qHe=function(e){var t;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=gt.BigInt(e.offset)+gt.BigInt(e.length)-gt.BigInt(1):t=e.offset+e.length-1,e.offset+"-"+t},_G=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},jHe={static:function(e){var t=e.duration,r=e.timescale,i=r===void 0?1:r,a=e.sourceDuration,s=e.periodDuration,o=_G(e.endNumber),l=t/i;return typeof o=="number"?{start:0,end:o}:typeof s=="number"?{start:0,end:s/l}:{start:0,end:a/l}},dynamic:function(e){var t=e.NOW,r=e.clientOffset,i=e.availabilityStartTime,a=e.timescale,s=a===void 0?1:a,o=e.duration,l=e.periodStart,u=l===void 0?0:l,c=e.minimumUpdatePeriod,d=c===void 0?0:c,f=e.timeShiftBufferDepth,h=f===void 0?1/0:f,p=_G(e.endNumber),m=(t+r)/1e3,v=i+u,g=m+d,y=g-v,_=Math.ceil(y*s/o),b=Math.floor((m-v-h)*s/o),x=Math.floor((m-v)*s/o);return{start:Math.max(0,b),end:typeof p=="number"?p:Math.min(_,x)}}},KHe=function(e){return function(t){var r=e.duration,i=e.timescale,a=i===void 0?1:i,s=e.periodStart,o=e.startNumber,l=o===void 0?1:o;return{number:l+t,duration:r/a,timeline:s,time:t*r}}},bF=function(e){var t=e.type,r=e.duration,i=e.timescale,a=i===void 0?1:i,s=e.periodDuration,o=e.sourceDuration,l=jHe[t](e),u=l.start,c=l.end,d=$He(u,c).map(KHe(e));if(t==="static"){var f=d.length-1,h=typeof s=="number"?s:o;d[f].duration=h-r/a*f}return d},Aae=function(e){var t=e.baseUrl,r=e.initialization,i=r===void 0?{}:r,a=e.sourceDuration,s=e.indexRange,o=s===void 0?"":s,l=e.periodStart,u=e.presentationTime,c=e.number,d=c===void 0?0:c,f=e.duration;if(!t)throw new Error(G1.NO_BASE_URL);var h=y2({baseUrl:t,source:i.sourceURL,range:i.range}),p=y2({baseUrl:t,source:t,indexRange:o});if(p.map=h,f){var m=bF(e);m.length&&(p.duration=m[0].duration,p.timeline=m[0].timeline)}else a&&(p.duration=a,p.timeline=l);return p.presentationTime=u||l,p.number=d,[p]},SF=function(e,t,r){var i=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,u=t.timescale,c=t.references.filter(function(C){return C.referenceType!==1}),d=[],f=e.endList?"static":"dynamic",h=e.sidx.timeline,p=h,m=e.mediaSequence||0,v;typeof t.firstOffset=="bigint"?v=gt.BigInt(l)+t.firstOffset:v=l+t.firstOffset;for(var g=0;g<c.length;g++){var y=t.references[g],_=y.referencedSize,b=y.subsegmentDuration,x=void 0;typeof v=="bigint"?x=v+gt.BigInt(_)-gt.BigInt(1):x=v+_-1;var w=v+"-"+x,A={baseUrl:r,timescale:u,timeline:s,periodStart:h,presentationTime:p,number:m,duration:b,sourceDuration:a,indexRange:w,type:f},T=Aae(A)[0];i&&(T.map=i),d.push(T),typeof v=="bigint"?v+=gt.BigInt(_):v+=_,p+=b/u,m++}return e.segments=d,e},XHe=["AUDIO","SUBTITLES"],YHe=1/60,Eae=function(e){return WHe(e,function(t){var r=t.timeline;return r}).sort(function(t,r){return t.timeline>r.timeline?1:-1})},QHe=function(e,t){for(var r=0;r<e.length;r++)if(e[r].attributes.NAME===t)return e[r];return null},bG=function(e){var t=[];return pHe(e,XHe,function(r,i,a,s){t=t.concat(r.playlists||[])}),t},SG=function(e){var t=e.playlist,r=e.mediaSequence;t.mediaSequence=r,t.segments.forEach(function(i,a){i.number=t.mediaSequence+a})},ZHe=function(e){var t=e.oldPlaylists,r=e.newPlaylists,i=e.timelineStarts;r.forEach(function(a){a.discontinuitySequence=r6(i,function(c){var d=c.timeline;return d===a.timeline});var s=QHe(t,a.attributes.NAME);if(s&&!a.sidx){var o=a.segments[0],l=r6(s.segments,function(c){return Math.abs(c.presentationTime-o.presentationTime)<YHe});if(l===-1){SG({playlist:a,mediaSequence:s.mediaSequence+s.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),(!s.segments.length&&a.timeline>s.timeline||s.segments.length&&a.timeline>s.segments[s.segments.length-1].timeline)&&a.discontinuitySequence--;return}var u=s.segments[l];u.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),SG({playlist:a,mediaSequence:s.segments[l].number})}})},JHe=function(e){var t=e.oldManifest,r=e.newManifest,i=t.playlists.concat(bG(t)),a=r.playlists.concat(bG(r));return r.timelineStarts=Eae([t.timelineStarts,r.timelineStarts]),ZHe({oldPlaylists:i,newPlaylists:a,timelineStarts:r.timelineStarts}),r},J4=function(e){return e&&e.uri+"-"+qHe(e.byterange)},pP=function(e){var t=Tae(e.reduce(function(r,i){var a=i.attributes.id+(i.attributes.lang||"");if(!r[a])r[a]=i,r[a].attributes.timelineStarts=[];else{if(i.segments){var s;i.segments[0]&&(i.segments[0].discontinuity=!0),(s=r[a].segments).push.apply(s,i.segments)}i.attributes.contentProtection&&(r[a].attributes.contentProtection=i.attributes.contentProtection)}return r[a].attributes.timelineStarts.push({start:i.attributes.periodStart,timeline:i.attributes.periodStart}),r},{}));return t.map(function(r){return r.discontinuityStarts=GHe(r.segments||[],"discontinuity"),r})},xF=function(e,t){var r=J4(e.sidx),i=r&&t[r]&&t[r].sidx;return i&&SF(e,i,e.sidx.resolvedUri),e},eVe=function(e,t){if(t===void 0&&(t={}),!Object.keys(t).length)return e;for(var r in e)e[r]=xF(e[r],t);return e},tVe=function(e,t){var r,i=e.attributes,a=e.segments,s=e.sidx,o=e.mediaSequence,l=e.discontinuitySequence,u=e.discontinuityStarts,c={attributes:(r={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},r["PROGRAM-ID"]=1,r),uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuitySequence:l,discontinuityStarts:u,timelineStarts:i.timelineStarts,mediaSequence:o,segments:a};return i.contentProtection&&(c.contentProtection=i.contentProtection),s&&(c.sidx=s),t&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c},nVe=function(e){var t,r=e.attributes,i=e.segments,a=e.mediaSequence,s=e.discontinuityStarts,o=e.discontinuitySequence;typeof i>"u"&&(i=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);var l=(t={NAME:r.id,BANDWIDTH:r.bandwidth},t["PROGRAM-ID"]=1,t);return r.codecs&&(l.CODECS=r.codecs),{attributes:l,uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:s,discontinuitySequence:o,mediaSequence:a,segments:i}},rVe=function(e,t,r){t===void 0&&(t={}),r===void 0&&(r=!1);var i,a=e.reduce(function(o,l){var u=l.attributes.role&&l.attributes.role.value||"",c=l.attributes.lang||"",d=l.attributes.label||"main";if(c&&!l.attributes.label){var f=u?" ("+u+")":"";d=""+l.attributes.lang+f}o[d]||(o[d]={language:c,autoselect:!0,default:u==="main",playlists:[],uri:""});var h=xF(tVe(l,r),t);return o[d].playlists.push(h),typeof i>"u"&&u==="main"&&(i=l,i.default=!0),o},{});if(!i){var s=Object.keys(a)[0];a[s].default=!0}return a},iVe=function(e,t){return t===void 0&&(t={}),e.reduce(function(r,i){var a=i.attributes.lang||"text";return r[a]||(r[a]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),r[a].playlists.push(xF(nVe(i),t)),r},{})},aVe=function(e){return e.reduce(function(t,r){return r&&r.forEach(function(i){var a=i.channel,s=i.language;t[s]={autoselect:!1,default:!1,instreamId:a,language:s},i.hasOwnProperty("aspectRatio")&&(t[s].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(t[s].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(t[s]["3D"]=i["3D"])}),t},{})},sVe=function(e){var t,r=e.attributes,i=e.segments,a=e.sidx,s=e.discontinuityStarts,o={attributes:(t={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuityStarts:s,timelineStarts:r.timelineStarts,segments:i};return r.frameRate&&(o.attributes["FRAME-RATE"]=r.frameRate),r.contentProtection&&(o.contentProtection=r.contentProtection),a&&(o.sidx=a),o},oVe=function(e){var t=e.attributes;return t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video"},lVe=function(e){var t=e.attributes;return t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio"},uVe=function(e){var t=e.attributes;return t.mimeType==="text/vtt"||t.contentType==="text"},cVe=function(e,t){e.forEach(function(r){r.mediaSequence=0,r.discontinuitySequence=r6(t,function(i){var a=i.timeline;return a===r.timeline}),r.segments&&r.segments.forEach(function(i,a){i.number=a})})},xG=function(e){return e?Object.keys(e).reduce(function(t,r){var i=e[r];return t.concat(i.playlists)},[]):[]},dVe=function(e){var t,r=e.dashPlaylists,i=e.locations,a=e.sidxMapping,s=a===void 0?{}:a,o=e.previousManifest;if(!r.length)return{};var l=r[0].attributes,u=l.sourceDuration,c=l.type,d=l.suggestedPresentationDelay,f=l.minimumUpdatePeriod,h=pP(r.filter(oVe)).map(sVe),p=pP(r.filter(lVe)),m=pP(r.filter(uVe)),v=r.map(function(A){return A.attributes.captionServices}).filter(Boolean),g={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:u,playlists:eVe(h,s)};f>=0&&(g.minimumUpdatePeriod=f*1e3),i&&(g.locations=i),c==="dynamic"&&(g.suggestedPresentationDelay=d);var y=g.playlists.length===0,_=p.length?rVe(p,s,y):null,b=m.length?iVe(m,s):null,x=h.concat(xG(_),xG(b)),w=x.map(function(A){var T=A.timelineStarts;return T});return g.timelineStarts=Eae(w),cVe(x,g.timelineStarts),_&&(g.mediaGroups.AUDIO.audio=_),b&&(g.mediaGroups.SUBTITLES.subs=b),v.length&&(g.mediaGroups["CLOSED-CAPTIONS"].cc=aVe(v)),o?JHe({oldManifest:o,newManifest:g}):g},fVe=function(e,t,r){var i=e.NOW,a=e.clientOffset,s=e.availabilityStartTime,o=e.timescale,l=o===void 0?1:o,u=e.periodStart,c=u===void 0?0:u,d=e.minimumUpdatePeriod,f=d===void 0?0:d,h=(i+a)/1e3,p=s+c,m=h+f,v=m-p;return Math.ceil((v*l-t)/r)},Mae=function(e,t){for(var r=e.type,i=e.minimumUpdatePeriod,a=i===void 0?0:i,s=e.media,o=s===void 0?"":s,l=e.sourceDuration,u=e.timescale,c=u===void 0?1:u,d=e.startNumber,f=d===void 0?1:d,h=e.periodStart,p=[],m=-1,v=0;v<t.length;v++){var g=t[v],y=g.d,_=g.r||0,b=g.t||0;m<0&&(m=b),b&&b>m&&(m=b);var x=void 0;if(_<0){var w=v+1;w===t.length?r==="dynamic"&&a>0&&o.indexOf("$Number$")>0?x=fVe(e,m,y):x=(l*c-m)/y:x=(t[w].t-m)/y}else x=_+1;for(var A=f+p.length+x,T=f+p.length;T<A;)p.push({number:T,duration:y/c,time:m,timeline:h}),m+=y,T++}return p},hVe=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,pVe=function(e){return function(t,r,i,a){if(t==="$$")return"$";if(typeof e[r]>"u")return t;var s=""+e[r];return r==="RepresentationID"||(i?a=parseInt(a,10):a=1,s.length>=a)?s:""+new Array(a-s.length+1).join("0")+s}},wG=function(e,t){return e.replace(hVe,pVe(t))},mVe=function(e,t){return!e.duration&&!t?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?bF(e):Mae(e,t)},vVe=function(e,t){var r={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,a=i===void 0?{sourceURL:"",range:""}:i,s=y2({baseUrl:e.baseUrl,source:wG(a.sourceURL,r),range:a.range}),o=mVe(e,t);return o.map(function(l){r.Number=l.number,r.Time=l.time;var u=wG(e.media||"",r),c=e.timescale||1,d=e.presentationTimeOffset||0,f=e.periodStart+(l.time-d)/c,h={uri:u,timeline:l.timeline,duration:l.duration,resolvedUri:K4(e.baseUrl||"",u),map:s,number:l.number,presentationTime:f};return h})},gVe=function(e,t){var r=e.baseUrl,i=e.initialization,a=i===void 0?{}:i,s=y2({baseUrl:r,source:a.sourceURL,range:a.range}),o=y2({baseUrl:r,source:t.media,range:t.mediaRange});return o.map=s,o},yVe=function(e,t){var r=e.duration,i=e.segmentUrls,a=i===void 0?[]:i,s=e.periodStart;if(!r&&!t||r&&t)throw new Error(G1.SEGMENT_TIME_UNSPECIFIED);var o=a.map(function(c){return gVe(e,c)}),l;r&&(l=bF(e)),t&&(l=Mae(e,t));var u=l.map(function(c,d){if(o[d]){var f=o[d],h=e.timescale||1,p=e.presentationTimeOffset||0;return f.timeline=c.timeline,f.duration=c.duration,f.number=c.number,f.presentationTime=s+(c.time-p)/h,f}}).filter(function(c){return c});return u},_Ve=function(e){var t=e.attributes,r=e.segmentInfo,i,a;r.template?(a=vVe,i=Ho(t,r.template)):r.base?(a=Aae,i=Ho(t,r.base)):r.list&&(a=yVe,i=Ho(t,r.list));var s={attributes:t};if(!a)return s;var o=a(i,r.segmentTimeline);if(i.duration){var l=i,u=l.duration,c=l.timescale,d=c===void 0?1:c;i.duration=u/d}else o.length?i.duration=o.reduce(function(f,h){return Math.max(f,Math.ceil(h.duration))},0):i.duration=0;return s.attributes=i,s.segments=o,r.base&&i.indexRange&&(s.sidx=o[0],s.segments=[]),s},bVe=function(e){return e.map(_Ve)},za=function(e,t){return Cae(e.childNodes).filter(function(r){var i=r.tagName;return i===t})},wF=function(e){return e.textContent.trim()},SVe=function(e){return parseFloat(e.split("/").reduce(function(t,r){return t/r}))},pg=function(e){var t=31536e3,r=30*24*60*60,i=24*60*60,a=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,l=o.exec(e);if(!l)return 0;var u=l.slice(1),c=u[0],d=u[1],f=u[2],h=u[3],p=u[4],m=u[5];return parseFloat(c||0)*t+parseFloat(d||0)*r+parseFloat(f||0)*i+parseFloat(h||0)*a+parseFloat(p||0)*s+parseFloat(m||0)},xVe=function(e){var t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+="Z"),Date.parse(e)},TG={mediaPresentationDuration:function(e){return pg(e)},availabilityStartTime:function(e){return xVe(e)/1e3},minimumUpdatePeriod:function(e){return pg(e)},suggestedPresentationDelay:function(e){return pg(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return pg(e)},start:function(e){return pg(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return SVe(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?pg(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},fo=function(e){return e&&e.attributes?Cae(e.attributes).reduce(function(t,r){var i=TG[r.name]||TG.DEFAULT;return t[r.name]=i(r.value),t},{}):{}},wVe={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},eI=function(e,t){return t.length?Z4(e.map(function(r){return t.map(function(i){return K4(r,wF(i))})})):e},TF=function(e){var t=za(e,"SegmentTemplate")[0],r=za(e,"SegmentList")[0],i=r&&za(r,"SegmentURL").map(function(f){return Ho({tag:"SegmentURL"},fo(f))}),a=za(e,"SegmentBase")[0],s=r||t,o=s&&za(s,"SegmentTimeline")[0],l=r||a||t,u=l&&za(l,"Initialization")[0],c=t&&fo(t);c&&u?c.initialization=u&&fo(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var d={template:c,segmentTimeline:o&&za(o,"S").map(function(f){return fo(f)}),list:r&&Ho(fo(r),{segmentUrls:i,initialization:fo(u)}),base:a&&Ho(fo(a),{initialization:fo(u)})};return Object.keys(d).forEach(function(f){d[f]||delete d[f]}),d},TVe=function(e,t,r){return function(i){var a=za(i,"BaseURL"),s=eI(t,a),o=Ho(e,fo(i)),l=TF(i);return s.map(function(u){return{segmentInfo:Ho(r,l),attributes:Ho(o,{baseUrl:u})}})}},CVe=function(e){return e.reduce(function(t,r){var i=fo(r);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());var a=wVe[i.schemeIdUri];if(a){t[a]={attributes:i};var s=za(r,"cenc:pssh")[0];if(s){var o=wF(s);t[a].pssh=o&&$ie(o)}}return t},{})},AVe=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var t=typeof e.value!="string"?[]:e.value.split(";");return t.map(function(i){var a,s;if(s=i,/^CC\d=/.test(i)){var o=i.split("=");a=o[0],s=o[1]}else/^CC\d$/.test(i)&&(a=i);return{channel:a,language:s}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var r=typeof e.value!="string"?[]:e.value.split(";");return r.map(function(i){var a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){var s=i.split("="),o=s[0],l=s[1],u=l===void 0?"":l;a.channel=o,a.language=i,u.split(",").forEach(function(c){var d=c.split(":"),f=d[0],h=d[1];f==="lang"?a.language=h:f==="er"?a.easyReader=Number(h):f==="war"?a.aspectRatio=Number(h):f==="3D"&&(a["3D"]=Number(h))})}else a.language=i;return a.channel&&(a.channel="SERVICE"+a.channel),a})}},EVe=function(e,t,r){return function(i){var a=fo(i),s=eI(t,za(i,"BaseURL")),o=za(i,"Role")[0],l={role:fo(o)},u=Ho(e,a,l),c=za(i,"Accessibility")[0],d=AVe(fo(c));d&&(u=Ho(u,{captionServices:d}));var f=za(i,"Label")[0];if(f&&f.childNodes.length){var h=f.childNodes[0].nodeValue.trim();u=Ho(u,{label:h})}var p=CVe(za(i,"ContentProtection"));Object.keys(p).length&&(u=Ho(u,{contentProtection:p}));var m=TF(i),v=za(i,"Representation"),g=Ho(r,m);return Z4(v.map(TVe(u,s,g)))}},MVe=function(e,t){return function(r,i){var a=eI(t,za(r.node,"BaseURL")),s=Ho(e,{periodStart:r.attributes.start});typeof r.attributes.duration=="number"&&(s.periodDuration=r.attributes.duration);var o=za(r.node,"AdaptationSet"),l=TF(r.node);return Z4(o.map(EVe(s,a,l)))}},IVe=function(e){var t=e.attributes,r=e.priorPeriodAttributes,i=e.mpdType;return typeof t.start=="number"?t.start:r&&typeof r.start=="number"&&typeof r.duration=="number"?r.start+r.duration:!r&&i==="static"?0:null},DVe=function(e,t){t===void 0&&(t={});var r=t,i=r.manifestUri,a=i===void 0?"":i,s=r.NOW,o=s===void 0?Date.now():s,l=r.clientOffset,u=l===void 0?0:l,c=za(e,"Period");if(!c.length)throw new Error(G1.INVALID_NUMBER_OF_PERIOD);var d=za(e,"Location"),f=fo(e),h=eI([a],za(e,"BaseURL"));f.type=f.type||"static",f.sourceDuration=f.mediaPresentationDuration||0,f.NOW=o,f.clientOffset=u,d.length&&(f.locations=d.map(wF));var p=[];return c.forEach(function(m,v){var g=fo(m),y=p[v-1];g.start=IVe({attributes:g,priorPeriodAttributes:y?y.attributes:null,mpdType:f.type}),p.push({node:m,attributes:g})}),{locations:f.locations,representationInfo:Z4(p.map(MVe(f,h)))}},Iae=function(e){if(e==="")throw new Error(G1.DASH_EMPTY_MANIFEST);var t=new VHe,r,i;try{r=t.parseFromString(e,"application/xml"),i=r&&r.documentElement.tagName==="MPD"?r.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(G1.DASH_INVALID_XML);return i},PVe=function(e){var t=za(e,"UTCTiming")[0];if(!t)return null;var r=fo(t);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(G1.UNSUPPORTED_UTC_TIMING_SCHEME)}return r},RVe=function(e,t){t===void 0&&(t={});var r=DVe(Iae(e),t),i=bVe(r.representationInfo);return dVe({dashPlaylists:i,locations:r.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},kVe=function(e){return PVe(Iae(e))},Dae=Math.pow(2,32),LVe=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t;return e.getBigUint64?(t=e.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):e.getUint32(0)*Dae+e.getUint32(4)},OVe={getUint64:LVe,MAX_UINT32:Dae},CG=OVe.getUint64,NVe=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},r=12;t.version===0?(t.earliestPresentationTime=e.getUint32(r),t.firstOffset=e.getUint32(r+4),r+=8):(t.earliestPresentationTime=CG(n.subarray(r)),t.firstOffset=CG(n.subarray(r+8)),r+=16),r+=2;var i=e.getUint16(r);for(r+=2;i>0;r+=12,i--)t.references.push({referenceType:(n[r]&128)>>>7,referencedSize:e.getUint32(r)&2147483647,subsegmentDuration:e.getUint32(r+4),startsWithSap:!!(n[r+8]&128),sapType:(n[r+8]&112)>>>4,sapDeltaTime:e.getUint32(r+8)&268435455});return t},BVe=NVe;const FVe=Ls(BVe);var UVe=Tr([73,68,51]),zVe=function(e,t){t===void 0&&(t=0),e=Tr(e);var r=e[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],a=(r&16)>>4;return a?i+20:i+10},RS=function n(e,t){return t===void 0&&(t=0),e=Tr(e),e.length-t<10||!ya(e,UVe,{offset:t})?t:(t+=zVe(e,t),n(e,t))},AG=function(e){return typeof e=="string"?Kie(e):e},HVe=function(e){return Array.isArray(e)?e.map(function(t){return AG(t)}):[AG(e)]},VVe=function n(e,t,r){r===void 0&&(r=!1),t=HVe(t),e=Tr(e);var i=[];if(!t.length)return i;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(s===0)break;var l=a+s;if(l>e.length){if(r)break;l=e.length}var u=e.subarray(a+8,l);ya(o,t[0])&&(t.length===1?i.push(u):i.push.apply(i,n(u,t.slice(1),r))),a=l}return i},VT={EBML:Tr([26,69,223,163]),DocType:Tr([66,130]),Segment:Tr([24,83,128,103]),SegmentInfo:Tr([21,73,169,102]),Tracks:Tr([22,84,174,107]),Track:Tr([174]),TrackNumber:Tr([215]),DefaultDuration:Tr([35,227,131]),TrackEntry:Tr([174]),TrackType:Tr([131]),FlagDefault:Tr([136]),CodecID:Tr([134]),CodecPrivate:Tr([99,162]),VideoTrack:Tr([224]),AudioTrack:Tr([225]),Cluster:Tr([31,67,182,117]),Timestamp:Tr([231]),TimestampScale:Tr([42,215,177]),BlockGroup:Tr([160]),BlockDuration:Tr([155]),Block:Tr([161]),SimpleBlock:Tr([163])},i6=[128,64,32,16,8,4,2,1],$Ve=function(e){for(var t=1,r=0;r<i6.length&&!(e&i6[r]);r++)t++;return t},OM=function(e,t,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1);var a=$Ve(e[t]),s=e.subarray(t,t+a);return r&&(s=Array.prototype.slice.call(e,t,t+a),s[0]^=i6[a-1]),{length:a,value:dHe(s,{signed:i}),bytes:s}},EG=function n(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return n(t)}):typeof e=="number"?fHe(e):e},GVe=function(e){return Array.isArray(e)?e.map(function(t){return EG(t)}):[EG(e)]},WVe=function n(e,t,r){if(r>=t.length)return t.length;var i=OM(t,r,!1);if(ya(e.bytes,i.bytes))return r;var a=OM(t,r+i.length);return n(e,t,r+a.length+a.value+i.length)},MG=function n(e,t){t=GVe(t),e=Tr(e);var r=[];if(!t.length)return r;for(var i=0;i<e.length;){var a=OM(e,i,!1),s=OM(e,i+a.length),o=i+a.length+s.length;s.value===127&&(s.value=WVe(a,e,o),s.value!==e.length&&(s.value-=o));var l=o+s.value>e.length?e.length:o+s.value,u=e.subarray(o,l);ya(t[0],a.bytes)&&(t.length===1?r.push(u):r=r.concat(n(u,t.slice(1))));var c=a.length+s.length+u.length;i+=c}return r},qVe=Tr([0,0,0,1]),jVe=Tr([0,0,1]),KVe=Tr([0,0,3]),XVe=function(e){for(var t=[],r=1;r<e.length-2;)ya(e.subarray(r,r+3),KVe)&&(t.push(r+2),r++),r++;if(t.length===0)return e;var i=e.length-t.length,a=new Uint8Array(i),s=0;for(r=0;r<i;s++,r++)s===t[0]&&(s++,t.shift()),a[r]=e[s];return a},Pae=function(e,t,r,i){i===void 0&&(i=1/0),e=Tr(e),r=[].concat(r);for(var a=0,s,o=0;a<e.length&&(o<i||s);){var l=void 0;if(ya(e.subarray(a),qVe)?l=4:ya(e.subarray(a),jVe)&&(l=3),!l){a++;continue}if(o++,s)return XVe(e.subarray(s,a));var u=void 0;t==="h264"?u=e[a+l]&31:t==="h265"&&(u=e[a+l]>>1&63),r.indexOf(u)!==-1&&(s=a+l),a+=l+(t==="h264"?1:2)}return e.subarray(0,0)},YVe=function(e,t,r){return Pae(e,"h264",t,r)},QVe=function(e,t,r){return Pae(e,"h265",t,r)},Do={webm:Tr([119,101,98,109]),matroska:Tr([109,97,116,114,111,115,107,97]),flac:Tr([102,76,97,67]),ogg:Tr([79,103,103,83]),ac3:Tr([11,119]),riff:Tr([82,73,70,70]),avi:Tr([65,86,73]),wav:Tr([87,65,86,69]),"3gp":Tr([102,116,121,112,51,103]),mp4:Tr([102,116,121,112]),fmp4:Tr([115,116,121,112]),mov:Tr([102,116,121,112,113,116]),moov:Tr([109,111,111,118]),moof:Tr([109,111,111,102])},W1={aac:function(e){var t=RS(e);return ya(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=RS(e);return ya(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=MG(e,[VT.EBML,VT.DocType])[0];return ya(t,Do.webm)},mkv:function(e){var t=MG(e,[VT.EBML,VT.DocType])[0];return ya(t,Do.matroska)},mp4:function(e){if(W1["3gp"](e)||W1.mov(e))return!1;if(ya(e,Do.mp4,{offset:4})||ya(e,Do.fmp4,{offset:4})||ya(e,Do.moof,{offset:4})||ya(e,Do.moov,{offset:4}))return!0},mov:function(e){return ya(e,Do.mov,{offset:4})},"3gp":function(e){return ya(e,Do["3gp"],{offset:4})},ac3:function(e){var t=RS(e);return ya(e,Do.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=RS(e);return ya(e,Do.flac,{offset:t})},ogg:function(e){return ya(e,Do.ogg)},avi:function(e){return ya(e,Do.riff)&&ya(e,Do.avi,{offset:8})},wav:function(e){return ya(e,Do.riff)&&ya(e,Do.wav,{offset:8})},h264:function(e){return YVe(e,7,3).length},h265:function(e){return QVe(e,[32,33],3).length}},a6=Object.keys(W1).filter(function(n){return n!=="ts"&&n!=="h264"&&n!=="h265"}).concat(["ts","h264","h265"]);a6.forEach(function(n){var e=W1[n];W1[n]=function(t){return e(Tr(t))}});var ZVe=W1,CF=function(e){e=Tr(e);for(var t=0;t<a6.length;t++){var r=a6[t];if(ZVe[r](e))return r}return""},JVe=function(e){return VVe(e,["moof"]).length>0},AF=9e4,EF,MF,tI,IF,Rae,kae,Lae;EF=function(n){return n*AF};MF=function(n,e){return n*e};tI=function(n){return n/AF};IF=function(n,e){return n/e};Rae=function(n,e){return EF(IF(n,e))};kae=function(n,e){return MF(tI(n),e)};Lae=function(n,e,t){return tI(t?n:n-e)};var NM={ONE_SECOND_IN_TS:AF,secondsToVideoTs:EF,secondsToAudioTs:MF,videoTsToSeconds:tI,audioTsToSeconds:IF,audioTsToVideoTs:Rae,videoTsToAudioTs:kae,metadataTsToSeconds:Lae};function s6(n){return s6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s6(n)}function e$e(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function o6(n){var e=typeof Map=="function"?new Map:void 0;return o6=function(r){if(r===null||!e$e(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Hie(r,arguments,s6(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),z1(i,r)},o6(n)}/**
 * @license
 * Video.js 7.21.6 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var Oae="7.21.6",Ef={},Wp=function(e,t){return Ef[e]=Ef[e]||[],t&&(Ef[e]=Ef[e].concat(t)),Ef[e]},t$e=function(e,t){Wp(e,t)},Nae=function(e,t){var r=Wp(e).indexOf(t);return r<=-1?!1:(Ef[e]=Ef[e].slice(),Ef[e].splice(r,1),!0)},n$e=function(e,t){Wp(e,[].concat(t).map(function(r){var i=function a(){return Nae(e,a),r.apply(void 0,arguments)};return i}))},BM={prefixed:!0},vE=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],IG=vE[0],kS;for(var $T=0;$T<vE.length;$T++)if(vE[$T][1]in An){kS=vE[$T];break}if(kS){for(var GT=0;GT<kS.length;GT++)BM[IG[GT]]=kS[GT];BM.prefixed=kS[0]!==IG[0]}var cl=[],r$e=function(e,t){return function(r,i,a){var s=t.levels[i],o=new RegExp("^("+s+")$");if(r!=="log"&&a.unshift(r.toUpperCase()+":"),a.unshift(e+":"),cl){cl.push([].concat(a));var l=cl.length-1e3;cl.splice(0,l>0?l:0)}if(gt.console){var u=gt.console[r];!u&&r==="debug"&&(u=gt.console.info||gt.console.log),!(!u||!s||!o.test(r))&&u[Array.isArray(a)?"apply":"call"](gt.console,a)}}};function Bae(n){var e="info",t,r=function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];t("log",e,s)};return t=r$e(n,r),r.createLogger=function(i){return Bae(n+": "+i)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},r.level=function(i){if(typeof i=="string"){if(!r.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');e=i}return e},r.history=function(){return cl?[].concat(cl):[]},r.history.filter=function(i){return(cl||[]).filter(function(a){return new RegExp(".*"+i+".*").test(a[0])})},r.history.clear=function(){cl&&(cl.length=0)},r.history.disable=function(){cl!==null&&(cl.length=0,cl=null)},r.history.enable=function(){cl===null&&(cl=[])},r.error=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t("error",e,a)},r.warn=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t("warn",e,a)},r.debug=function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t("debug",e,a)},r}var Zr=Bae("VIDEOJS"),Fae=Zr.createLogger,i$e=Object.prototype.toString,Uae=function(e){return Qf(e)?Object.keys(e):[]};function a1(n,e){Uae(n).forEach(function(t){return e(n[t],t)})}function a$e(n,e,t){return t===void 0&&(t=0),Uae(n).reduce(function(r,i){return e(r,n[i],i)},t)}function Pa(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Object.assign?Qu.apply(void 0,[n].concat(t)):(t.forEach(function(i){i&&a1(i,function(a,s){n[s]=a})}),n)}function Qf(n){return!!n&&typeof n=="object"}function _2(n){return Qf(n)&&i$e.call(n)==="[object Object]"&&n.constructor===Object}function b2(n,e){if(!n||!e)return"";if(typeof gt.getComputedStyle=="function"){var t;try{t=gt.getComputedStyle(n)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var Is=gt.navigator&&gt.navigator.userAgent||"",DG=/AppleWebKit\/([\d.]+)/i.exec(Is),s$e=DG?parseFloat(DG.pop()):null,zae=/iPod/i.test(Is),o$e=function(){var n=Is.match(/OS (\d+)_/i);return n&&n[1]?n[1]:null}(),hh=/Android/i.test(Is),DF=function(){var n=Is.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!n)return null;var e=n[1]&&parseFloat(n[1]),t=n[2]&&parseFloat(n[2]);return e&&t?parseFloat(n[1]+"."+n[2]):e||null}(),Hae=hh&&DF<5&&s$e<537,Vae=/Firefox/i.test(Is),Rw=/Edg/i.test(Is),ph=!Rw&&(/Chrome/i.test(Is)||/CriOS/i.test(Is)),$ae=function(){var n=Is.match(/(Chrome|CriOS)\/(\d+)/);return n&&n[2]?parseFloat(n[2]):null}(),kw=function(){var n=/MSIE\s(\d+)\.\d/.exec(Is),e=n&&parseFloat(n[1]);return!e&&/Trident\/7.0/i.test(Is)&&/rv:11.0/.test(Is)&&(e=11),e}(),PF=/Safari/i.test(Is)&&!ph&&!hh&&!Rw,Gae=/Windows/i.test(Is),q1=!!(B_()&&("ontouchstart"in gt||gt.navigator.maxTouchPoints||gt.DocumentTouch&&gt.document instanceof gt.DocumentTouch)),RF=/iPad/i.test(Is)||PF&&q1&&!/iPhone/i.test(Is),kF=/iPhone/i.test(Is)&&!RF,Ko=kF||RF||zae,nI=(PF||Ko)&&!ph,l$e=Object.freeze({__proto__:null,IS_IPOD:zae,IOS_VERSION:o$e,IS_ANDROID:hh,ANDROID_VERSION:DF,IS_NATIVE_ANDROID:Hae,IS_FIREFOX:Vae,IS_EDGE:Rw,IS_CHROME:ph,CHROME_VERSION:$ae,IE_VERSION:kw,IS_SAFARI:PF,IS_WINDOWS:Gae,TOUCH_ENABLED:q1,IS_IPAD:RF,IS_IPHONE:kF,IS_IOS:Ko,IS_ANY_SAFARI:nI});function PG(n){return typeof n=="string"&&!!n.trim()}function Wae(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function u$e(n){return new RegExp("(^|\\s)"+n+"($|\\s)")}function B_(){return An===gt.document}function F_(n){return Qf(n)&&n.nodeType===1}function qae(){try{return gt.parent!==gt.self}catch{return!0}}function jae(n){return function(e,t){if(!PG(e))return An[n](null);PG(t)&&(t=An.querySelector(t));var r=F_(t)?t:An;return r[n]&&r[n](e)}}function wi(n,e,t,r){n===void 0&&(n="div"),e===void 0&&(e={}),t===void 0&&(t={});var i=An.createElement(n);return Object.getOwnPropertyNames(e).forEach(function(a){var s=e[a];a.indexOf("aria-")!==-1||a==="role"||a==="type"?(Zr.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+a+" to "+s+".")),i.setAttribute(a,s)):a==="textContent"?Pv(i,s):(i[a]!==s||a==="tabIndex")&&(i[a]=s)}),Object.getOwnPropertyNames(t).forEach(function(a){i.setAttribute(a,t[a])}),r&&OF(i,r),i}function Pv(n,e){return typeof n.textContent>"u"?n.innerText=e:n.textContent=e,n}function l6(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function K0(n,e){return Wae(e),n.classList?n.classList.contains(e):u$e(e).test(n.className)}function Nf(n,e){return n.classList?n.classList.add(e):K0(n,e)||(n.className=(n.className+" "+e).trim()),n}function Lw(n,e){return n?(n.classList?n.classList.remove(e):(Wae(e),n.className=n.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),n):(Zr.warn("removeClass was called with an element that doesn't exist"),null)}function Kae(n,e,t){var r=K0(n,e);if(typeof t=="function"&&(t=t(n,e)),typeof t!="boolean"&&(t=!r),t!==r)return t?Nf(n,e):Lw(n,e),n}function Xae(n,e){Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];r===null||typeof r>"u"||r===!1?n.removeAttribute(t):n.setAttribute(t,r===!0?"":r)})}function yf(n){var e={},t=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(n&&n.attributes&&n.attributes.length>0)for(var r=n.attributes,i=r.length-1;i>=0;i--){var a=r[i].name,s=r[i].value;(typeof n[a]=="boolean"||t.indexOf(","+a+",")!==-1)&&(s=s!==null),e[a]=s}return e}function Yae(n,e){return n.getAttribute(e)}function j1(n,e,t){n.setAttribute(e,t)}function rI(n,e){n.removeAttribute(e)}function Qae(){An.body.focus(),An.onselectstart=function(){return!1}}function Zae(){An.onselectstart=function(){return!0}}function K1(n){if(n&&n.getBoundingClientRect&&n.parentNode){var e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(function(r){e[r]!==void 0&&(t[r]=e[r])}),t.height||(t.height=parseFloat(b2(n,"height"))),t.width||(t.width=parseFloat(b2(n,"width"))),t}}function S2(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=n.offsetWidth,t=n.offsetHeight,r=0,i=0;n.offsetParent&&n!==An[BM.fullscreenElement];)r+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent;return{left:r,top:i,width:e,height:t}}function iI(n,e){var t={x:0,y:0};if(Ko)for(var r=n;r&&r.nodeName.toLowerCase()!=="html";){var i=b2(r,"transform");if(/^matrix/.test(i)){var a=i.slice(7,-1).split(/,\s/).map(Number);t.x+=a[4],t.y+=a[5]}else if(/^matrix3d/.test(i)){var s=i.slice(9,-1).split(/,\s/).map(Number);t.x+=s[12],t.y+=s[13]}r=r.parentNode}var o={},l=S2(e.target),u=S2(n),c=u.width,d=u.height,f=e.offsetY-(u.top-l.top),h=e.offsetX-(u.left-l.left);return e.changedTouches&&(h=e.changedTouches[0].pageX-u.left,f=e.changedTouches[0].pageY+u.top,Ko&&(h-=t.x,f-=t.y)),o.y=1-Math.max(0,Math.min(1,f/d)),o.x=Math.max(0,Math.min(1,h/c)),o}function Jae(n){return Qf(n)&&n.nodeType===3}function LF(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function ese(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(function(e){if(typeof e=="function"&&(e=e()),F_(e)||Jae(e))return e;if(typeof e=="string"&&/\S/.test(e))return An.createTextNode(e)}).filter(function(e){return e})}function OF(n,e){return ese(e).forEach(function(t){return n.appendChild(t)}),n}function tse(n,e){return OF(LF(n),e)}function x2(n){return n.button===void 0&&n.buttons===void 0||n.button===0&&n.buttons===void 0||n.type==="mouseup"&&n.button===0&&n.buttons===0?!0:!(n.button!==0||n.buttons!==1)}var qp=jae("querySelector"),nse=jae("querySelectorAll"),rse=Object.freeze({__proto__:null,isReal:B_,isEl:F_,isInFrame:qae,createEl:wi,textContent:Pv,prependTo:l6,hasClass:K0,addClass:Nf,removeClass:Lw,toggleClass:Kae,setAttributes:Xae,getAttributes:yf,getAttribute:Yae,setAttribute:j1,removeAttribute:rI,blockTextSelection:Qae,unblockTextSelection:Zae,getBoundingClientRect:K1,findPosition:S2,getPointerPosition:iI,isTextNode:Jae,emptyEl:LF,normalizeContent:ese,appendContent:OF,insertContent:tse,isSingleLeftClick:x2,$:qp,$$:nse}),ise=!1,u6,c$e=function(){if(u6.options.autoSetup!==!1){var e=Array.prototype.slice.call(An.getElementsByTagName("video")),t=Array.prototype.slice.call(An.getElementsByTagName("audio")),r=Array.prototype.slice.call(An.getElementsByTagName("video-js")),i=e.concat(t,r);if(i&&i.length>0)for(var a=0,s=i.length;a<s;a++){var o=i[a];if(o&&o.getAttribute){if(o.player===void 0){var l=o.getAttribute("data-setup");l!==null&&u6(o)}}else{c6(1);break}}else ise||c6(1)}};function c6(n,e){B_()&&(e&&(u6=e),gt.setTimeout(c$e,n))}function d6(){ise=!0,gt.removeEventListener("load",d6)}B_()&&(An.readyState==="complete"?d6():gt.addEventListener("load",d6));var ase=function(e){var t=An.createElement("style");return t.className=e,t},sse=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},d$e=3,f$e=d$e;function mh(){return f$e++}var ose;gt.WeakMap||(ose=function(){function n(){this.vdata="vdata"+Math.floor(gt.performance&&gt.performance.now()||Date.now()),this.data={}}var e=n.prototype;return e.set=function(r,i){var a=r[this.vdata]||mh();return r[this.vdata]||(r[this.vdata]=a),this.data[a]=i,this},e.get=function(r){var i=r[this.vdata];if(i)return this.data[i];Zr("We have no data for this element",r)},e.has=function(r){var i=r[this.vdata];return i in this.data},e.delete=function(r){var i=r[this.vdata];i&&(delete this.data[i],delete r[this.vdata])},n}());var Vo=gt.WeakMap?new WeakMap:new ose;function RG(n,e){if(Vo.has(n)){var t=Vo.get(n);t.handlers[e].length===0&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&Vo.delete(n)}}function NF(n,e,t,r){t.forEach(function(i){n(e,i,r)})}function aI(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){var r=n||gt.event;n={};for(var i in r)i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"&&i!=="path"&&(i==="returnValue"&&r.preventDefault||(n[i]=r[i]));if(n.target||(n.target=n.srcElement||An),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){r.preventDefault&&r.preventDefault(),n.returnValue=!1,r.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),n.cancelBubble=!0,r.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,n.clientX!==null&&n.clientX!==void 0){var a=An.documentElement,s=An.body;n.pageX=n.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),n.pageY=n.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}n.which=n.charCode||n.keyCode,n.button!==null&&n.button!==void 0&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}return n.fixed_=!0,n}var WT,h$e=function(){if(typeof WT!="boolean"){WT=!1;try{var e=Object.defineProperty({},"passive",{get:function(){WT=!0}});gt.addEventListener("test",null,e),gt.removeEventListener("test",null,e)}catch{}}return WT},p$e=["touchstart","touchmove"];function au(n,e,t){if(Array.isArray(e))return NF(au,n,e,t);Vo.has(n)||Vo.set(n,{});var r=Vo.get(n);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),t.guid||(t.guid=mh()),r.handlers[e].push(t),r.dispatcher||(r.disabled=!1,r.dispatcher=function(a,s){if(!r.disabled){a=aI(a);var o=r.handlers[a.type];if(o)for(var l=o.slice(0),u=0,c=l.length;u<c&&!a.isImmediatePropagationStopped();u++)try{l[u].call(n,a,s)}catch(d){Zr.error(d)}}}),r.handlers[e].length===1)if(n.addEventListener){var i=!1;h$e()&&p$e.indexOf(e)>-1&&(i={passive:!0}),n.addEventListener(e,r.dispatcher,i)}else n.attachEvent&&n.attachEvent("on"+e,r.dispatcher)}function wo(n,e,t){if(Vo.has(n)){var r=Vo.get(n);if(r.handlers){if(Array.isArray(e))return NF(wo,n,e,t);var i=function(u,c){r.handlers[c]=[],RG(u,c)};if(e===void 0){for(var a in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},a)&&i(n,a);return}var s=r.handlers[e];if(s){if(!t){i(n,e);return}if(t.guid)for(var o=0;o<s.length;o++)s[o].guid===t.guid&&s.splice(o--,1);RG(n,e)}}}}function U_(n,e,t){var r=Vo.has(n)?Vo.get(n):{},i=n.parentNode||n.ownerDocument;if(typeof e=="string"?e={type:e,target:n}:e.target||(e.target=n),e=aI(e),r.dispatcher&&r.dispatcher.call(n,e,t),i&&!e.isPropagationStopped()&&e.bubbles===!0)U_.call(null,i,e,t);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){Vo.has(e.target)||Vo.set(e.target,{});var a=Vo.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function sI(n,e,t){if(Array.isArray(e))return NF(sI,n,e,t);var r=function i(){wo(n,e,i),t.apply(this,arguments)};r.guid=t.guid=t.guid||mh(),au(n,e,r)}function lse(n,e,t){var r=function i(){wo(n,e,i),t.apply(this,arguments)};r.guid=t.guid=t.guid||mh(),au(n,e,r)}var m$e=Object.freeze({__proto__:null,fixEvent:aI,on:au,off:wo,trigger:U_,one:sI,any:lse}),Uc=30,ca=function(e,t,r){t.guid||(t.guid=mh());var i=t.bind(e);return i.guid=r?r+"_"+t.guid:t.guid,i},Zf=function(e,t){var r=gt.performance.now(),i=function(){var s=gt.performance.now();s-r>=t&&(e.apply(void 0,arguments),r=s)};return i},v$e=function(e,t,r,i){i===void 0&&(i=gt);var a,s=function(){i.clearTimeout(a),a=null},o=function(){var u=this,c=arguments,d=function(){a=null,d=null,r||e.apply(u,c)};!a&&r&&e.apply(u,c),i.clearTimeout(a),a=i.setTimeout(d,t)};return o.cancel=s,o},Rs=function(){};Rs.prototype.allowedEvents_={};Rs.prototype.on=function(n,e){var t=this.addEventListener;this.addEventListener=function(){},au(this,n,e),this.addEventListener=t};Rs.prototype.addEventListener=Rs.prototype.on;Rs.prototype.off=function(n,e){wo(this,n,e)};Rs.prototype.removeEventListener=Rs.prototype.off;Rs.prototype.one=function(n,e){var t=this.addEventListener;this.addEventListener=function(){},sI(this,n,e),this.addEventListener=t};Rs.prototype.any=function(n,e){var t=this.addEventListener;this.addEventListener=function(){},lse(this,n,e),this.addEventListener=t};Rs.prototype.trigger=function(n){var e=n.type||n;typeof n=="string"&&(n={type:e}),n=aI(n),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](n),U_(this,n)};Rs.prototype.dispatchEvent=Rs.prototype.trigger;var Ub;Rs.prototype.queueTrigger=function(n){var e=this;Ub||(Ub=new Map);var t=n.type||n,r=Ub.get(this);r||(r=new Map,Ub.set(this,r));var i=r.get(t);r.delete(t),gt.clearTimeout(i);var a=gt.setTimeout(function(){r.delete(t),r.size===0&&(r=null,Ub.delete(e)),e.trigger(n)},0);r.set(t,a)};var oI=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},Bf=function(e){return e instanceof Rs||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return typeof e[t]=="function"})},g$e=function(e,t){Bf(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},f6=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},FM=function(e,t,r){if(!e||!e.nodeName&&!Bf(e))throw new Error("Invalid target for "+oI(t)+"#"+r+"; must be a DOM node or evented object.")},use=function(e,t,r){if(!f6(e))throw new Error("Invalid event type for "+oI(t)+"#"+r+"; must be a non-empty string or array.")},cse=function(e,t,r){if(typeof e!="function")throw new Error("Invalid listener for "+oI(t)+"#"+r+"; must be a function.")},mP=function(e,t,r){var i=t.length<3||t[0]===e||t[0]===e.eventBusEl_,a,s,o;return i?(a=e.eventBusEl_,t.length>=3&&t.shift(),s=t[0],o=t[1]):(a=t[0],s=t[1],o=t[2]),FM(a,e,r),use(s,e,r),cse(o,e,r),o=ca(e,o),{isTargetingSelf:i,target:a,type:s,listener:o}},Am=function(e,t,r,i){FM(e,e,t),e.nodeName?m$e[t](e,r,i):e[t](r,i)},y$e={on:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=mP(this,r,"on"),s=a.isTargetingSelf,o=a.target,l=a.type,u=a.listener;if(Am(o,"on",l,u),!s){var c=function(){return e.off(o,l,u)};c.guid=u.guid;var d=function(){return e.off("dispose",c)};d.guid=u.guid,Am(this,"on","dispose",c),Am(o,"on","dispose",d)}},one:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=mP(this,r,"one"),s=a.isTargetingSelf,o=a.target,l=a.type,u=a.listener;if(s)Am(o,"one",l,u);else{var c=function d(){e.off(o,l,d);for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];u.apply(null,h)};c.guid=u.guid,Am(o,"one",l,c)}},any:function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=mP(this,r,"any"),s=a.isTargetingSelf,o=a.target,l=a.type,u=a.listener;if(s)Am(o,"any",l,u);else{var c=function d(){e.off(o,l,d);for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];u.apply(null,h)};c.guid=u.guid,Am(o,"any",l,c)}},off:function(e,t,r){if(!e||f6(e))wo(this.eventBusEl_,e,t);else{var i=e,a=t;FM(i,this,"off"),use(a,this,"off"),cse(r,this,"off"),r=ca(this,r),this.off("dispose",r),i.nodeName?(wo(i,a,r),wo(i,"dispose",r)):Bf(i)&&(i.off(a,r),i.off("dispose",r))}},trigger:function(e,t){FM(this.eventBusEl_,this,"trigger");var r=e&&typeof e!="string"?e.type:e;if(!f6(r)){var i="Invalid event type for "+oI(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||Zr).error(i);else throw new Error(i)}return U_(this.eventBusEl_,e,t)}};function BF(n,e){e===void 0&&(e={});var t=e,r=t.eventBusKey;if(r){if(!n[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');n.eventBusEl_=n[r]}else n.eventBusEl_=wi("span",{className:"vjs-event-bus"});return Pa(n,y$e),n.eventedCallbacks&&n.eventedCallbacks.forEach(function(i){i()}),n.on("dispose",function(){n.off(),[n,n.el_,n.eventBusEl_].forEach(function(i){i&&Vo.has(i)&&Vo.delete(i)}),gt.setTimeout(function(){n.eventBusEl_=null},0)}),n}var _$e={state:{},setState:function(e){var t=this;typeof e=="function"&&(e=e());var r;return a1(e,function(i,a){t.state[a]!==i&&(r=r||{},r[a]={from:t.state[a],to:i}),t.state[a]=i}),r&&Bf(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function dse(n,e){return Pa(n,_$e),n.state=Pa({},n.state,e),typeof n.handleStateChanged=="function"&&Bf(n)&&n.on("statechanged",n.handleStateChanged),n}var gE=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toLowerCase()})},Ha=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},b$e=function(e,t){return Ha(e)===Ha(t)};function ua(){for(var n={},e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.forEach(function(i){i&&a1(i,function(a,s){if(!_2(a)){n[s]=a;return}_2(n[s])||(n[s]={}),n[s]=ua(n[s],a)})}),n}var S$e=function(){function n(){this.map_={}}var e=n.prototype;return e.has=function(r){return r in this.map_},e.delete=function(r){var i=this.has(r);return delete this.map_[r],i},e.set=function(r,i){return this.map_[r]=i,this},e.forEach=function(r,i){for(var a in this.map_)r.call(i,this.map_[a],a,this)},n}(),x$e=gt.Map?gt.Map:S$e,w$e=function(){function n(){this.set_={}}var e=n.prototype;return e.has=function(r){return r in this.set_},e.delete=function(r){var i=this.has(r);return delete this.set_[r],i},e.add=function(r){return this.set_[r]=1,this},e.forEach=function(r,i){for(var a in this.set_)r.call(i,a,a,this)},n}(),vP=gt.Set?gt.Set:w$e,vn=function(){function n(t,r,i){var a=this;if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=ua({},this.options_),r=this.options_=ua(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var s=t&&t.id&&t.id()||"no_player";this.id_=s+"_component_"+mh()}this.name_=r.name||null,r.el?this.el_=r.el:r.createEl!==!1&&(this.el_=this.createEl()),r.className&&this.el_&&r.className.split(" ").forEach(function(o){return a.addClass(o)}),r.evented!==!1&&(BF(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),dse(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new vP,this.setIntervalIds_=new vP,this.rafIds_=new vP,this.namedRafs_=new x$e,this.clearingTimersOnDispose_=!1,r.initChildren!==!1&&this.initChildren(),this.ready(i),r.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=n.prototype;return e.dispose=function(r){if(r===void 0&&(r={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(r.restoreEl?this.el_.parentNode.replaceChild(r.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return!!this.isDisposed_},e.player=function(){return this.player_},e.options=function(r){return r?(this.options_=ua(this.options_,r),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(r,i,a){return wi(r,i,a)},e.localize=function(r,i,a){a===void 0&&(a=r);var s=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[s],u=s&&s.split("-")[0],c=o&&o[u],d=a;return l&&l[r]?d=l[r]:c&&c[r]&&(d=c[r]),i&&(d=d.replace(/\{(\d+)\}/g,function(f,h){var p=i[h-1],m=p;return typeof p>"u"&&(m=f),m})),d},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(r){return this.childIndex_[r]},e.getChild=function(r){if(r)return this.childNameIndex_[r]},e.getDescendant=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];i=i.reduce(function(l,u){return l.concat(u)},[]);for(var s=this,o=0;o<i.length;o++)if(s=s.getChild(i[o]),!s||!s.getChild)return;return s},e.addChild=function(r,i,a){i===void 0&&(i={}),a===void 0&&(a=this.children_.length);var s,o;if(typeof r=="string"){o=Ha(r);var l=i.componentClass||o;i.name=o;var u=n.getComponent(l);if(!u)throw new Error("Component "+l+" does not exist");if(typeof u!="function")return null;s=new u(this.player_||this,i)}else s=r;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(a,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),o=o||s.name&&Ha(s.name()),o&&(this.childNameIndex_[o]=s,this.childNameIndex_[gE(o)]=s),typeof s.el=="function"&&s.el()){var c=null;this.children_[a+1]&&(this.children_[a+1].el_?c=this.children_[a+1].el_:F_(this.children_[a+1])&&(c=this.children_[a+1])),this.contentEl().insertBefore(s.el(),c)}return s},e.removeChild=function(r){if(typeof r=="string"&&(r=this.getChild(r)),!(!r||!this.children_)){for(var i=!1,a=this.children_.length-1;a>=0;a--)if(this.children_[a]===r){i=!0,this.children_.splice(a,1);break}if(i){r.parentComponent_=null,this.childIndex_[r.id()]=null,this.childNameIndex_[Ha(r.name())]=null,this.childNameIndex_[gE(r.name())]=null;var s=r.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(r.el())}}},e.initChildren=function(){var r=this,i=this.options_.children;if(i){var a=this.options_,s=function(c){var d=c.name,f=c.opts;if(a[d]!==void 0&&(f=a[d]),f!==!1){f===!0&&(f={}),f.playerOptions=r.options_.playerOptions;var h=r.addChild(d,f);h&&(r[d]=h)}},o,l=n.getComponent("Tech");Array.isArray(i)?o=i:o=Object.keys(i),o.concat(Object.keys(this.options_).filter(function(u){return!o.some(function(c){return typeof c=="string"?u===c:u===c.name})})).map(function(u){var c,d;return typeof u=="string"?(c=u,d=i[c]||r.options_[c]||{}):(c=u.name,d=u),{name:c,opts:d}}).filter(function(u){var c=n.getComponent(u.opts.componentClass||Ha(u.name));return c&&!l.isTech(c)}).forEach(s)}},e.buildCSSClass=function(){return""},e.ready=function(r,i){if(i===void 0&&(i=!1),!!r){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(r);return}i?r.call(this):this.setTimeout(r,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var r=this.readyQueue_;this.readyQueue_=[],r&&r.length>0&&r.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)},e.$=function(r,i){return qp(r,i||this.contentEl())},e.$$=function(r,i){return nse(r,i||this.contentEl())},e.hasClass=function(r){return K0(this.el_,r)},e.addClass=function(r){Nf(this.el_,r)},e.removeClass=function(r){Lw(this.el_,r)},e.toggleClass=function(r,i){Kae(this.el_,r,i)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(r){return Yae(this.el_,r)},e.setAttribute=function(r,i){j1(this.el_,r,i)},e.removeAttribute=function(r){rI(this.el_,r)},e.width=function(r,i){return this.dimension("width",r,i)},e.height=function(r,i){return this.dimension("height",r,i)},e.dimensions=function(r,i){this.width(r,!0),this.height(i)},e.dimension=function(r,i,a){if(i!==void 0){(i===null||i!==i)&&(i=0),(""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1?this.el_.style[r]=i:i==="auto"?this.el_.style[r]="":this.el_.style[r]=i+"px",a||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[r],o=s.indexOf("px");return parseInt(o!==-1?s.slice(0,o):this.el_["offset"+Ha(r)],10)},e.currentDimension=function(r){var i=0;if(r!=="width"&&r!=="height")throw new Error("currentDimension only accepts width or height value");if(i=b2(this.el_,r),i=parseFloat(i),i===0||isNaN(i)){var a="offset"+Ha(r);i=this.el_[a]}return i},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(r){this.player_&&(Hr.isEventKey(r,"Tab")||r.stopPropagation(),this.player_.handleKeyDown(r))},e.handleKeyPress=function(r){this.handleKeyDown(r)},e.emitTapEvents=function(){var r=0,i=null,a=10,s=200,o;this.on("touchstart",function(u){u.touches.length===1&&(i={pageX:u.touches[0].pageX,pageY:u.touches[0].pageY},r=gt.performance.now(),o=!0)}),this.on("touchmove",function(u){if(u.touches.length>1)o=!1;else if(i){var c=u.touches[0].pageX-i.pageX,d=u.touches[0].pageY-i.pageY,f=Math.sqrt(c*c+d*d);f>a&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(u){if(i=null,o===!0){var c=gt.performance.now()-r;c<s&&(u.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var r=ca(this.player(),this.player().reportUserActivity),i;this.on("touchstart",function(){r(),this.clearInterval(i),i=this.setInterval(r,250)});var a=function(o){r(),this.clearInterval(i)};this.on("touchmove",r),this.on("touchend",a),this.on("touchcancel",a)}},e.setTimeout=function(r,i){var a=this,s;return r=ca(this,r),this.clearTimersOnDispose_(),s=gt.setTimeout(function(){a.setTimeoutIds_.has(s)&&a.setTimeoutIds_.delete(s),r()},i),this.setTimeoutIds_.add(s),s},e.clearTimeout=function(r){return this.setTimeoutIds_.has(r)&&(this.setTimeoutIds_.delete(r),gt.clearTimeout(r)),r},e.setInterval=function(r,i){r=ca(this,r),this.clearTimersOnDispose_();var a=gt.setInterval(r,i);return this.setIntervalIds_.add(a),a},e.clearInterval=function(r){return this.setIntervalIds_.has(r)&&(this.setIntervalIds_.delete(r),gt.clearInterval(r)),r},e.requestAnimationFrame=function(r){var i=this;if(!this.supportsRaf_)return this.setTimeout(r,1e3/60);this.clearTimersOnDispose_();var a;return r=ca(this,r),a=gt.requestAnimationFrame(function(){i.rafIds_.has(a)&&i.rafIds_.delete(a),r()}),this.rafIds_.add(a),a},e.requestNamedAnimationFrame=function(r,i){var a=this;if(!this.namedRafs_.has(r)){this.clearTimersOnDispose_(),i=ca(this,i);var s=this.requestAnimationFrame(function(){i(),a.namedRafs_.has(r)&&a.namedRafs_.delete(r)});return this.namedRafs_.set(r,s),r}},e.cancelNamedAnimationFrame=function(r){this.namedRafs_.has(r)&&(this.cancelAnimationFrame(this.namedRafs_.get(r)),this.namedRafs_.delete(r))},e.cancelAnimationFrame=function(r){return this.supportsRaf_?(this.rafIds_.has(r)&&(this.rafIds_.delete(r),gt.cancelAnimationFrame(r)),r):this.clearTimeout(r)},e.clearTimersOnDispose_=function(){var r=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(i){var a=i[0],s=i[1];r[a].forEach(function(o,l){return r[s](l)})}),r.clearingTimersOnDispose_=!1}))},n.registerComponent=function(r,i){if(typeof r!="string"||!r)throw new Error('Illegal component name, "'+r+'"; must be a non-empty string.');var a=n.getComponent("Tech"),s=a&&a.isTech(i),o=n===i||n.prototype.isPrototypeOf(i.prototype);if(s||!o){var l;throw s?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error('Illegal component, "'+r+'"; '+l+".")}r=Ha(r),n.components_||(n.components_={});var u=n.getComponent("Player");if(r==="Player"&&u&&u.players){var c=u.players,d=Object.keys(c);if(c&&d.length>0&&d.map(function(f){return c[f]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return n.components_[r]=i,n.components_[gE(r)]=i,i},n.getComponent=function(r){if(!(!r||!n.components_))return n.components_[r]},n}();vn.prototype.supportsRaf_=typeof gt.requestAnimationFrame=="function"&&typeof gt.cancelAnimationFrame=="function";vn.registerComponent("Component",vn);function T$e(n,e,t){if(typeof e!="number"||e<0||e>t)throw new Error("Failed to execute '"+n+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+t+").")}function kG(n,e,t,r){return T$e(n,r,t.length-1),t[r][e]}function gP(n){var e;return n===void 0||n.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:n.length,start:kG.bind(null,"start",0,n),end:kG.bind(null,"end",1,n)},gt.Symbol&&gt.Symbol.iterator&&(e[gt.Symbol.iterator]=function(){return(n||[]).values()}),e}function X0(n,e){return Array.isArray(n)?gP(n):n===void 0||e===void 0?gP():gP([[n,e]])}function fse(n,e){var t=0,r,i;if(!e)return 0;(!n||!n.length)&&(n=X0(0,0));for(var a=0;a<n.length;a++)r=n.start(a),i=n.end(a),i>e&&(i=e),t+=i-r;return t/e}function $o(n){if(n instanceof $o)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:Qf(n)&&(typeof n.code=="number"&&(this.code=n.code),Pa(this,n)),this.message||(this.message=$o.defaultMessages[this.code]||"")}$o.prototype.code=0;$o.prototype.message="";$o.prototype.status=null;$o.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];$o.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var mg=0;mg<$o.errorTypes.length;mg++)$o[$o.errorTypes[mg]]=mg,$o.prototype[$o.errorTypes[mg]]=mg;function rx(n){return n!=null&&typeof n.then=="function"}function md(n){rx(n)&&n.then(null,function(e){})}var h6=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(r,i,a){return e[i]&&(r[i]=e[i]),r},{cues:e.cues&&Array.prototype.map.call(e.cues,function(r){return{startTime:r.startTime,endTime:r.endTime,text:r.text,id:r.id}})});return t},C$e=function(e){var t=e.$$("track"),r=Array.prototype.map.call(t,function(a){return a.track}),i=Array.prototype.map.call(t,function(a){var s=h6(a.track);return a.src&&(s.src=a.src),s});return i.concat(Array.prototype.filter.call(e.textTracks(),function(a){return r.indexOf(a)===-1}).map(h6))},A$e=function(e,t){return e.forEach(function(r){var i=t.addRemoteTextTrack(r).track;!r.src&&r.cues&&r.cues.forEach(function(a){return i.addCue(a)})}),t.textTracks()},LG={textTracksToJson:C$e,jsonToTextTracks:A$e,trackToJson_:h6},yP="vjs-modal-dialog",z_=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.close_=function(s){return a.close(s)},a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=wi("div",{className:yP+"-content"},{role:"document"}),a.descEl_=wi("p",{className:yP+"-description vjs-control-text",id:a.el().getAttribute("aria-describedby")}),Pv(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return yP+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},t.open=function(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(i){return typeof i=="boolean"&&this[i?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(i){if(typeof i=="boolean"){var a=this.closeable_=!!i,s=this.getChild("closeButton");if(a&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!a&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(i){var a=this.contentEl(),s=a.parentNode,o=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(a),this.empty(),tse(a,i),this.trigger("modalfill"),o?s.insertBefore(a,o):s.appendChild(a);var l=this.getChild("closeButton");l&&s.appendChild(l.el_)},t.empty=function(){this.trigger("beforemodalempty"),LF(this.contentEl()),this.trigger("modalempty")},t.content=function(i){return typeof i<"u"&&(this.content_=i),this.content_},t.conditionalFocus_=function(){var i=An.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(i)||a===i)&&(this.previouslyActiveEl_=i,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(i){if(i.stopPropagation(),Hr.isEventKey(i,"Escape")&&this.closeable()){i.preventDefault(),this.close();return}if(Hr.isEventKey(i,"Tab")){for(var a=this.focusableEls_(),s=this.el_.querySelector(":focus"),o,l=0;l<a.length;l++)if(s===a[l]){o=l;break}An.activeElement===this.el_&&(o=0),i.shiftKey&&o===0?(a[a.length-1].focus(),i.preventDefault()):!i.shiftKey&&o===a.length-1&&(a[0].focus(),i.preventDefault())}},t.focusableEls_=function(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(a){return(a instanceof gt.HTMLAnchorElement||a instanceof gt.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof gt.HTMLInputElement||a instanceof gt.HTMLSelectElement||a instanceof gt.HTMLTextAreaElement||a instanceof gt.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof gt.HTMLIFrameElement||a instanceof gt.HTMLObjectElement||a instanceof gt.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable")})},e}(vn);z_.prototype.options_={pauseOnOpen:!0,temporary:!0};vn.registerComponent("ModalDialog",z_);var X1=function(n){In(e,n);function e(r){var i;r===void 0&&(r=[]),i=n.call(this)||this,i.tracks_=[],Object.defineProperty(Fr(i),"length",{get:function(){return this.tracks_.length}});for(var a=0;a<r.length;a++)i.addTrack(r[a]);return i}var t=e.prototype;return t.addTrack=function(i){var a=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),this.tracks_.indexOf(i)===-1&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){a.trigger({track:i,type:"labelchange",target:a})},Bf(i)&&i.addEventListener("labelchange",i.labelchange_)},t.removeTrack=function(i){for(var a,s=0,o=this.length;s<o;s++)if(this[s]===i){a=this[s],a.off&&a.off(),this.tracks_.splice(s,1);break}a&&this.trigger({track:a,type:"removetrack",target:this})},t.getTrackById=function(i){for(var a=null,s=0,o=this.length;s<o;s++){var l=this[s];if(l.id===i){a=l;break}}return a},e}(Rs);X1.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var E$e in X1.prototype.allowedEvents_)X1.prototype["on"+E$e]=null;var _P=function(e,t){for(var r=0;r<e.length;r++)!Object.keys(e[r]).length||t.id===e[r].id||(e[r].enabled=!1)},M$e=function(n){In(e,n);function e(r){var i;r===void 0&&(r=[]);for(var a=r.length-1;a>=0;a--)if(r[a].enabled){_P(r,r[a]);break}return i=n.call(this,r)||this,i.changing_=!1,i}var t=e.prototype;return t.addTrack=function(i){var a=this;i.enabled&&_P(this,i),n.prototype.addTrack.call(this,i),i.addEventListener&&(i.enabledChange_=function(){a.changing_||(a.changing_=!0,_P(a,i),a.changing_=!1,a.trigger("change"))},i.addEventListener("enabledchange",i.enabledChange_))},t.removeTrack=function(i){n.prototype.removeTrack.call(this,i),i.removeEventListener&&i.enabledChange_&&(i.removeEventListener("enabledchange",i.enabledChange_),i.enabledChange_=null)},e}(X1),bP=function(e,t){for(var r=0;r<e.length;r++)!Object.keys(e[r]).length||t.id===e[r].id||(e[r].selected=!1)},I$e=function(n){In(e,n);function e(r){var i;r===void 0&&(r=[]);for(var a=r.length-1;a>=0;a--)if(r[a].selected){bP(r,r[a]);break}return i=n.call(this,r)||this,i.changing_=!1,Object.defineProperty(Fr(i),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),i}var t=e.prototype;return t.addTrack=function(i){var a=this;i.selected&&bP(this,i),n.prototype.addTrack.call(this,i),i.addEventListener&&(i.selectedChange_=function(){a.changing_||(a.changing_=!0,bP(a,i),a.changing_=!1,a.trigger("change"))},i.addEventListener("selectedchange",i.selectedChange_))},t.removeTrack=function(i){n.prototype.removeTrack.call(this,i),i.removeEventListener&&i.selectedChange_&&(i.removeEventListener("selectedchange",i.selectedChange_),i.selectedChange_=null)},e}(X1),hse=function(n){In(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.addTrack=function(i){var a=this;n.prototype.addTrack.call(this,i),this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")}),i.addEventListener("modechange",this.queueChange_);var s=["metadata","chapters"];s.indexOf(i.kind)===-1&&i.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(i){n.prototype.removeTrack.call(this,i),i.removeEventListener&&(this.queueChange_&&i.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&i.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(X1),D$e=function(){function n(t){t===void 0&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var r=0,i=t.length;r<i;r++)this.addTrackElement_(t[r])}var e=n.prototype;return e.addTrackElement_=function(r){var i=this.trackElements_.length;""+i in this||Object.defineProperty(this,i,{get:function(){return this.trackElements_[i]}}),this.trackElements_.indexOf(r)===-1&&this.trackElements_.push(r)},e.getTrackElementByTrack_=function(r){for(var i,a=0,s=this.trackElements_.length;a<s;a++)if(r===this.trackElements_[a].track){i=this.trackElements_[a];break}return i},e.removeTrackElement_=function(r){for(var i=0,a=this.trackElements_.length;i<a;i++)if(r===this.trackElements_[i]){this.trackElements_[i].track&&typeof this.trackElements_[i].track.off=="function"&&this.trackElements_[i].track.off(),typeof this.trackElements_[i].off=="function"&&this.trackElements_[i].off(),this.trackElements_.splice(i,1);break}},n}(),OG=function(){function n(t){n.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=n.prototype;return e.setCues_=function(r){var i=this.length||0,a=0,s=r.length;this.cues_=r,this.length_=r.length;var o=function(u){""+u in this||Object.defineProperty(this,""+u,{get:function(){return this.cues_[u]}})};if(i<s)for(a=i;a<s;a++)o.call(this,a)},e.getCueById=function(r){for(var i=null,a=0,s=this.length;a<s;a++){var o=this[a];if(o.id===r){i=o;break}}return i},n}(),P$e={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},R$e={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},k$e={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},NG={disabled:"disabled",hidden:"hidden",showing:"showing"},FF=function(n){In(e,n);function e(t){var r;t===void 0&&(t={}),r=n.call(this)||this;var i={id:t.id||"vjs_track_"+mh(),kind:t.kind||"",language:t.language||""},a=t.label||"",s=function(u){Object.defineProperty(Fr(r),u,{get:function(){return i[u]},set:function(){}})};for(var o in i)s(o);return Object.defineProperty(Fr(r),"label",{get:function(){return a},set:function(u){u!==a&&(a=u,this.trigger("labelchange"))}}),r}return e}(Rs),UF=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],r=An.createElement("a");r.href=e;for(var i={},a=0;a<t.length;a++)i[t[a]]=r[t[a]];return i.protocol==="http:"&&(i.host=i.host.replace(/:80$/,"")),i.protocol==="https:"&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=gt.location.protocol),i.host||(i.host=gt.location.host),i},pse=function(e){if(!e.match(/^https?:\/\//)){var t=An.createElement("a");t.href=e,e=t.href}return e},zF=function(e){if(typeof e=="string"){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,r=t.exec(e);if(r)return r.pop().toLowerCase()}return""},lI=function(e,t){t===void 0&&(t=gt.location);var r=UF(e),i=r.protocol===":"?t.protocol:r.protocol,a=i+r.host!==t.protocol+t.host;return a},L$e=Object.freeze({__proto__:null,parseUrl:UF,getAbsoluteURL:pse,getFileExtension:zF,isCrossOrigin:lI}),BG=function(e,t){var r=new gt.WebVTT.Parser(gt,gt.vttjs,gt.WebVTT.StringDecoder()),i=[];r.oncue=function(a){t.addCue(a)},r.onparsingerror=function(a){i.push(a)},r.onflush=function(){t.trigger({type:"loadeddata",target:t})},r.parse(e),i.length>0&&(gt.console&&gt.console.groupCollapsed&&gt.console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(a){return Zr.error(a)}),gt.console&&gt.console.groupEnd&&gt.console.groupEnd()),r.flush()},FG=function(e,t){var r={uri:e},i=lI(e);i&&(r.cors=i);var a=t.tech_.crossOrigin()==="use-credentials";a&&(r.withCredentials=a),Nie(r,ca(this,function(s,o,l){if(s)return Zr.error(s,o);t.loaded_=!0,typeof gt.WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(u){if(u.type==="vttjserror"){Zr.error("vttjs failed to load, stopping trying to process "+t.src);return}return BG(l,t)}):BG(l,t)}))},Ow=function(n){In(e,n);function e(r){var i;if(r===void 0&&(r={}),!r.tech)throw new Error("A tech was not provided.");var a=ua(r,{kind:k$e[r.kind]||"subtitles",language:r.language||r.srclang||""}),s=NG[a.mode]||"disabled",o=a.default;(a.kind==="metadata"||a.kind==="chapters")&&(s="hidden"),i=n.call(this,a)||this,i.tech_=a.tech,i.cues_=[],i.activeCues_=[],i.preload_=i.tech_.preloadTextTracks!==!1;var l=new OG(i.cues_),u=new OG(i.activeCues_),c=!1;i.timeupdateHandler=ca(Fr(i),function(f){if(f===void 0&&(f={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){f.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),f.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var d=function(){i.stopTracking()};return i.tech_.one("dispose",d),s!=="disabled"&&i.startTracking(),Object.defineProperties(Fr(i),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return s},set:function(h){NG[h]&&s!==h&&(s=h,!this.preload_&&s!=="disabled"&&this.cues.length===0&&FG(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return u;for(var h=this.tech_.currentTime(),p=[],m=0,v=this.cues.length;m<v;m++){var g=this.cues[m];(g.startTime<=h&&g.endTime>=h||g.startTime===g.endTime&&g.startTime<=h&&g.startTime+.5>=h)&&p.push(g)}if(c=!1,p.length!==this.activeCues_.length)c=!0;else for(var y=0;y<p.length;y++)this.activeCues_.indexOf(p[y])===-1&&(c=!0);return this.activeCues_=p,u.setCues_(this.activeCues_),u},set:function(){}}}),a.src?(i.src=a.src,i.preload_||(i.loaded_=!0),(i.preload_||a.kind!=="subtitles"&&a.kind!=="captions")&&FG(i.src,Fr(i))):i.loaded_=!0,i}var t=e.prototype;return t.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},t.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},t.addCue=function(i){var a=i;if(a.constructor&&a.constructor.name!=="VTTCue"){a=new gt.vttjs.VTTCue(i.startTime,i.endTime,i.text);for(var s in i)s in a||(a[s]=i[s]);a.id=i.id,a.originalCue_=i}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},t.removeCue=function(i){for(var a=this.cues_.length;a--;){var s=this.cues_[a];if(s===i||s.originalCue_&&s.originalCue_===i){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}},e}(FF);Ow.prototype.allowedEvents_={cuechange:"cuechange"};var mse=function(n){In(e,n);function e(t){var r;t===void 0&&(t={});var i=ua(t,{kind:R$e[t.kind]||""});r=n.call(this,i)||this;var a=!1;return Object.defineProperty(Fr(r),"enabled",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("enabledchange"))}}),i.enabled&&(r.enabled=i.enabled),r.loaded_=!0,r}return e}(FF),vse=function(n){In(e,n);function e(t){var r;t===void 0&&(t={});var i=ua(t,{kind:P$e[t.kind]||""});r=n.call(this,i)||this;var a=!1;return Object.defineProperty(Fr(r),"selected",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("selectedchange"))}}),i.selected&&(r.selected=i.selected),r}return e}(FF),gse=0,O$e=1,yse=2,N$e=3,H_=function(n){In(e,n);function e(t){var r;t===void 0&&(t={}),r=n.call(this)||this;var i,a=new Ow(t);return r.kind=a.kind,r.src=a.src,r.srclang=a.language,r.label=a.label,r.default=a.default,Object.defineProperties(Fr(r),{readyState:{get:function(){return i}},track:{get:function(){return a}}}),i=gse,a.addEventListener("loadeddata",function(){i=yse,r.trigger({type:"load",target:Fr(r)})}),r}return e}(Rs);H_.prototype.allowedEvents_={load:"load"};H_.NONE=gse;H_.LOADING=O$e;H_.LOADED=yse;H_.ERROR=N$e;var zu={audio:{ListClass:M$e,TrackClass:mse,capitalName:"Audio"},video:{ListClass:I$e,TrackClass:vse,capitalName:"Video"},text:{ListClass:hse,TrackClass:Ow,capitalName:"Text"}};Object.keys(zu).forEach(function(n){zu[n].getterName=n+"Tracks",zu[n].privateName=n+"Tracks_"});var Y1={remoteText:{ListClass:hse,TrackClass:Ow,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:D$e,TrackClass:H_,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Fo=Qu({},zu,Y1);Y1.names=Object.keys(Y1);zu.names=Object.keys(zu);Fo.names=[].concat(Y1.names).concat(zu.names);function B$e(n,e,t,r,i){i===void 0&&(i={});var a=n.textTracks();i.kind=e,t&&(i.label=t),r&&(i.language=r),i.tech=n;var s=new Fo.text.TrackClass(i);return a.addTrack(s),s}var Qi=function(n){In(e,n);function e(r,i){var a;return r===void 0&&(r={}),i===void 0&&(i=function(){}),r.reportTouchActivity=!1,a=n.call(this,null,r,i)||this,a.onDurationChange_=function(s){return a.onDurationChange(s)},a.trackProgress_=function(s){return a.trackProgress(s)},a.trackCurrentTime_=function(s){return a.trackCurrentTime(s)},a.stopTrackingCurrentTime_=function(s){return a.stopTrackingCurrentTime(s)},a.disposeSourceHandler_=function(s){return a.disposeSourceHandler(s)},a.queuedHanders_=new Set,a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),Fo.names.forEach(function(s){var o=Fo[s];r&&r[o.getterName]&&(a[o.privateName]=r[o.getterName])}),a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){r["native"+s+"Tracks"]===!1&&(a["featuresNative"+s+"Tracks"]=!1)}),r.nativeCaptions===!1||r.nativeTextTracks===!1?a.featuresNativeTextTracks=!1:(r.nativeCaptions===!0||r.nativeTextTracks===!0)&&(a.featuresNativeTextTracks=!0),a.featuresNativeTextTracks||a.emulateTextTracks(),a.preloadTextTracks=r.preloadTextTracks!==!1,a.autoRemoteTextTracks_=new Fo.text.ListClass,a.initTrackListeners(),r.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}var t=e.prototype;return t.triggerSourceset=function(i){var a=this;this.isReady_||this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(i)},1)}),this.trigger({src:i,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},t.trackProgress=function(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ca(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,a===1&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(i){this.duration_=this.duration()},t.buffered=function(){return X0(0,0)},t.bufferedPercent=function(){return fse(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(zu.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),n.prototype.dispose.call(this)},t.clearTracks=function(i){var a=this;i=[].concat(i),i.forEach(function(s){for(var o=a[s+"Tracks"]()||[],l=o.length;l--;){var u=o[l];s==="text"&&a.removeRemoteTextTrack(u),o.removeTrack(u)}})},t.cleanupAutoTextTracks=function(){for(var i=this.autoRemoteTextTracks_||[],a=i.length;a--;){var s=i[a];this.removeRemoteTextTrack(s)}},t.reset=function(){},t.crossOrigin=function(){},t.setCrossOrigin=function(){},t.error=function(i){return i!==void 0&&(this.error_=new $o(i),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?X0(0,0):X0()},t.play=function(){},t.setScrubbing=function(){},t.scrubbing=function(){},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var i=this;zu.names.forEach(function(a){var s=zu[a],o=function(){i.trigger(a+"trackchange")},l=i[s.getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),i.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},t.addWebVttScript_=function(){var i=this;if(!gt.WebVTT)if(An.body.contains(this.el())){if(!this.options_["vtt.js"]&&_2(J$)&&Object.keys(J$).length>0){this.trigger("vttjsloaded");return}var a=An.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",a.onload=function(){i.trigger("vttjsloaded")},a.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){a.onload=null,a.onerror=null}),gt.WebVTT=!0,this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)},t.emulateTextTracks=function(){var i=this,a=this.textTracks(),s=this.remoteTextTracks(),o=function(f){return a.addTrack(f.track)},l=function(f){return a.removeTrack(f.track)};s.on("addtrack",o),s.on("removetrack",l),this.addWebVttScript_();var u=function(){return i.trigger("texttrackchange")},c=function(){u();for(var f=0;f<a.length;f++){var h=a[f];h.removeEventListener("cuechange",u),h.mode==="showing"&&h.addEventListener("cuechange",u)}};c(),a.addEventListener("change",c),a.addEventListener("addtrack",c),a.addEventListener("removetrack",c),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",l),a.removeEventListener("change",c),a.removeEventListener("addtrack",c),a.removeEventListener("removetrack",c);for(var d=0;d<a.length;d++){var f=a[d];f.removeEventListener("cuechange",u)}})},t.addTextTrack=function(i,a,s){if(!i)throw new Error("TextTrack kind is required but was not provided");return B$e(this,i,a,s)},t.createRemoteTextTrack=function(i){var a=ua(i,{tech:this});return new Y1.remoteTextEl.TrackClass(a)},t.addRemoteTextTrack=function(i,a){var s=this;i===void 0&&(i={});var o=this.createRemoteTextTrack(i);return a!==!0&&a!==!1&&(Zr.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),a!==!0&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},t.removeRemoteTextTrack=function(i){var a=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},t.getVideoPlaybackQuality=function(){return{}},t.requestPictureInPicture=function(){var i=this.options_.Promise||gt.Promise;if(i)return i.reject()},t.disablePictureInPicture=function(){return!0},t.setDisablePictureInPicture=function(){},t.requestVideoFrameCallback=function(i){var a=this,s=mh();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){a.queuedHanders_.has(s)&&(a.queuedHanders_.delete(s),i())})):this.requestNamedAnimationFrame(s,i),s},t.cancelVideoFrameCallback=function(i){this.queuedHanders_.has(i)?this.queuedHanders_.delete(i):this.cancelNamedAnimationFrame(i)},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(i,a){return e.canPlayType(i.type)},e.isTech=function(i){return i.prototype instanceof e||i instanceof e||i===e},e.registerTech=function(i,a){if(e.techs_||(e.techs_={}),!e.isTech(a))throw new Error("Tech "+i+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=Ha(i),e.techs_[i]=a,e.techs_[gE(i)]=a,i!=="Tech"&&e.defaultTechOrder_.push(i),a},e.getTech=function(i){if(i){if(e.techs_&&e.techs_[i])return e.techs_[i];if(i=Ha(i),gt&&gt.videojs&&gt.videojs[i])return Zr.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),gt.videojs[i]}},e}(vn);Fo.names.forEach(function(n){var e=Fo[n];Qi.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Qi.prototype.featuresVolumeControl=!0;Qi.prototype.featuresMuteControl=!0;Qi.prototype.featuresFullscreenResize=!1;Qi.prototype.featuresPlaybackRate=!1;Qi.prototype.featuresProgressEvents=!1;Qi.prototype.featuresSourceset=!1;Qi.prototype.featuresTimeupdateEvents=!1;Qi.prototype.featuresNativeTextTracks=!1;Qi.prototype.featuresVideoFrameCallback=!1;Qi.withSourceHandlers=function(n){n.registerSourceHandler=function(t,r){var i=n.sourceHandlers;i||(i=n.sourceHandlers=[]),r===void 0&&(r=i.length),i.splice(r,0,t)},n.canPlayType=function(t){for(var r=n.sourceHandlers||[],i,a=0;a<r.length;a++)if(i=r[a].canPlayType(t),i)return i;return""},n.selectSourceHandler=function(t,r){for(var i=n.sourceHandlers||[],a,s=0;s<i.length;s++)if(a=i[s].canHandleSource(t,r),a)return i[s];return null},n.canPlaySource=function(t,r){var i=n.selectSourceHandler(t,r);return i?i.canHandleSource(t,r):""};var e=["seekable","seeking","duration"];e.forEach(function(t){var r=this[t];typeof r=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){var r=n.selectSourceHandler(t,this.options_);r||(n.nativeSourceHandler?r=n.nativeSourceHandler:Zr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=r.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};vn.registerComponent("Tech",Qi);Qi.registerTech("Tech",Qi);Qi.defaultTechOrder_=[];var Y0={},p6={},UM={};function F$e(n,e){Y0[n]=Y0[n]||[],Y0[n].push(e)}function U$e(n,e,t){n.setTimeout(function(){return i0(e,Y0[e.type],t,n)},1)}function z$e(n,e){n.forEach(function(t){return t.setTech&&t.setTech(e)})}function H$e(n,e,t){return n.reduceRight(HF(t),e[t]())}function V$e(n,e,t,r){return e[t](n.reduce(HF(t),r))}function UG(n,e,t,r){r===void 0&&(r=null);var i="call"+Ha(t),a=n.reduce(HF(i),r),s=a===UM,o=s?null:e[t](a);return W$e(n,t,o,s),o}var $$e={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},G$e={setCurrentTime:1,setMuted:1,setVolume:1},zG={play:1,pause:1};function HF(n){return function(e,t){return e===UM?UM:t[n]?t[n](e):e}}function W$e(n,e,t,r){for(var i=n.length-1;i>=0;i--){var a=n[i];a[e]&&a[e](r,t)}}function q$e(n){p6[n.id()]=null}function j$e(n,e){var t=p6[n.id()],r=null;if(t==null)return r=e(n),p6[n.id()]=[[e,r]],r;for(var i=0;i<t.length;i++){var a=t[i],s=a[0],o=a[1];s===e&&(r=o)}return r===null&&(r=e(n),t.push([e,r])),r}function i0(n,e,t,r,i,a){n===void 0&&(n={}),e===void 0&&(e=[]),i===void 0&&(i=[]),a===void 0&&(a=!1);var s=e,o=s[0],l=s.slice(1);if(typeof o=="string")i0(n,Y0[o],t,r,i,a);else if(o){var u=j$e(r,o);if(!u.setSource)return i.push(u),i0(n,l,t,r,i,a);u.setSource(Pa({},n),function(c,d){if(c)return i0(n,l,t,r,i,a);i.push(u),i0(d,n.type===d.type?l:Y0[d.type],t,r,i,a)})}else l.length?i0(n,l,t,r,i,a):a?t(n,i):i0(n,Y0["*"],t,r,i,!0)}var K$e={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},zM=function(e){e===void 0&&(e="");var t=zF(e),r=K$e[t.toLowerCase()];return r||""},X$e=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var r=e.cache_.sources.filter(function(o){return o.src===t});if(r.length)return r[0].type;for(var i=e.$$("source"),a=0;a<i.length;a++){var s=i[a];if(s.type&&s.src&&s.src===t)return s.type}return zM(t)},Y$e=function n(e){if(Array.isArray(e)){var t=[];e.forEach(function(r){r=n(r),Array.isArray(r)?t=t.concat(r):Qf(r)&&t.push(r)}),e=t}else typeof e=="string"&&e.trim()?e=[HG({src:e})]:Qf(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[HG(e)]:e=[];return e};function HG(n){if(!n.type){var e=zM(n.src);e&&(n.type=e)}return n}var Q$e=function(n){In(e,n);function e(t,r,i){var a,s=ua({createEl:!1},r);if(a=n.call(this,t,s,i)||this,!r.playerOptions.sources||r.playerOptions.sources.length===0)for(var o=0,l=r.playerOptions.techOrder;o<l.length;o++){var u=Ha(l[o]),c=Qi.getTech(u);if(u||(c=vn.getComponent(u)),c&&c.isSupported()){t.loadTech_(u);break}}else t.src(r.playerOptions.sources);return a}return e}(vn);vn.registerComponent("MediaLoader",Q$e);var uI=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.options_.controlText&&a.controlText(a.options_.controlText),a.handleMouseOver_=function(s){return a.handleMouseOver(s)},a.handleMouseOut_=function(s){return a.handleMouseOut(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.emitTapEvents(),a.enable(),a}var t=e.prototype;return t.createEl=function(i,a,s){i===void 0&&(i="div"),a===void 0&&(a={}),s===void 0&&(s={}),a=Pa({className:this.buildCSSClass(),tabIndex:0},a),i==="button"&&Zr.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),s=Pa({role:"button"},s),this.tabIndex_=a.tabIndex;var o=wi(i,a,s);return o.appendChild(wi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.dispose=function(){this.controlTextEl_=null,n.prototype.dispose.call(this)},t.createControlTextEl=function(i){return this.controlTextEl_=wi("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},t.controlText=function(i,a){if(a===void 0&&(a=this.el()),i===void 0)return this.controlText_||"Need Text";var s=this.localize(i);this.controlText_=i,Pv(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&a.setAttribute("title",s)},t.buildCSSClass=function(){return"vjs-control vjs-button "+n.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},t.handleLanguagechange=function(){this.controlText(this.controlText_)},t.handleClick=function(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(i){Hr.isEventKey(i,"Space")||Hr.isEventKey(i,"Enter")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):n.prototype.handleKeyDown.call(this,i)},e}(vn);vn.registerComponent("ClickableComponent",uI);var Z$e=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.update(),a.update_=function(s){return a.update(s)},r.on("posterchange",a.update_),a}var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update_),n.prototype.dispose.call(this)},t.createEl=function(){var i=wi("div",{className:"vjs-poster",tabIndex:-1});return i},t.update=function(i){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},t.setSrc=function(i){var a="";i&&(a='url("'+i+'")'),this.el_.style.backgroundImage=a},t.handleClick=function(i){if(this.player_.controls()){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((kw||Rw)&&a)&&this.player_.tech(!0).focus(),this.player_.paused()?md(this.player_.play()):this.player_.pause()}},e}(uI);vn.registerComponent("PosterImage",Z$e);var du="#222",VG="#ccc",J$e={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function SP(n,e){var t;if(n.length===4)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(n.length===7)t=n.slice(1);else throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function xP(n,e,t){try{n.style[e]=t}catch{return}}var eGe=function(n){In(e,n);function e(r,i,a){var s;s=n.call(this,r,i,a)||this;var o=function(u){return s.updateDisplay(u)};return r.on("loadstart",function(l){return s.toggleDisplay(l)}),r.on("texttrackchange",o),r.on("loadedmetadata",function(l){return s.preselectTrack(l)}),r.ready(ca(Fr(s),function(){if(r.tech_&&r.tech_.featuresNativeTextTracks){this.hide();return}r.on("fullscreenchange",o),r.on("playerresize",o),gt.addEventListener("orientationchange",o),r.on("dispose",function(){return gt.removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()})),s}var t=e.prototype;return t.preselectTrack=function(){for(var i={captions:1,subtitles:1},a=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o,l,u,c=0;c<a.length;c++){var d=a[c];s&&s.enabled&&s.language&&s.language===d.language&&d.kind in i?d.kind===s.kind?u=d:u||(u=d):s&&!s.enabled?(u=null,o=null,l=null):d.default&&(d.kind==="descriptions"&&!o?o=d:d.kind in i&&!l&&(l=d))}u?u.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){typeof gt.WebVTT=="function"&&gt.WebVTT.processCues(gt,[],this.el_)},t.updateDisplay=function(){var i=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){for(var s=[],o=0;o<i.length;++o){var l=i[o];l.mode==="showing"&&s.push(l)}this.updateForTrack(s);return}for(var u=null,c=null,d=i.length;d--;){var f=i[d];f.mode==="showing"&&(f.kind==="descriptions"?u=f:c=f)}c?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):u&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(u))},t.updateDisplayState=function(i){for(var a=this.player_.textTrackSettings.getValues(),s=i.activeCues,o=s.length;o--;){var l=s[o];if(l){var u=l.displayState;if(a.color&&(u.firstChild.style.color=a.color),a.textOpacity&&xP(u.firstChild,"color",SP(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(u.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&xP(u.firstChild,"backgroundColor",SP(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?xP(u,"backgroundColor",SP(a.windowColor,a.windowOpacity)):u.style.backgroundColor=a.windowColor),a.edgeStyle&&(a.edgeStyle==="dropshadow"?u.firstChild.style.textShadow="2px 2px 3px "+du+", 2px 2px 4px "+du+", 2px 2px 5px "+du:a.edgeStyle==="raised"?u.firstChild.style.textShadow="1px 1px "+du+", 2px 2px "+du+", 3px 3px "+du:a.edgeStyle==="depressed"?u.firstChild.style.textShadow="1px 1px "+VG+", 0 1px "+VG+", -1px -1px "+du+", 0 -1px "+du:a.edgeStyle==="uniform"&&(u.firstChild.style.textShadow="0 0 4px "+du+", 0 0 4px "+du+", 0 0 4px "+du+", 0 0 4px "+du)),a.fontPercent&&a.fontPercent!==1){var c=gt.parseFloat(u.style.fontSize);u.style.fontSize=c*a.fontPercent+"px",u.style.height="auto",u.style.top="auto"}a.fontFamily&&a.fontFamily!=="default"&&(a.fontFamily==="small-caps"?u.firstChild.style.fontVariant="small-caps":u.firstChild.style.fontFamily=J$e[a.fontFamily])}}},t.updateForTrack=function(i){if(Array.isArray(i)||(i=[i]),!(typeof gt.WebVTT!="function"||i.every(function(h){return!h.activeCues}))){for(var a=[],s=0;s<i.length;++s)for(var o=i[s],l=0;l<o.activeCues.length;++l)a.push(o.activeCues[l]);gt.WebVTT.processCues(gt,a,this.el_);for(var u=0;u<i.length;++u){for(var c=i[u],d=0;d<c.activeCues.length;++d){var f=c.activeCues[d].displayState;Nf(f,"vjs-text-track-cue"),Nf(f,"vjs-text-track-cue-"+(c.language?c.language:u)),c.language&&j1(f,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}},e}(vn);vn.registerComponent("TextTrackDisplay",eGe);var tGe=function(n){In(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var i=this.player_.isAudio(),a=this.localize(i?"Audio Player":"Video Player"),s=wi("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),o=n.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o},e}(vn);vn.registerComponent("LoadingSpinner",tGe);var Oc=function(n){In(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(i,a,s){a===void 0&&(a={}),s===void 0&&(s={}),i="button",a=Pa({className:this.buildCSSClass()},a),s=Pa({type:"button"},s);var o=wi(i,a,s);return o.appendChild(wi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.addChild=function(i,a){a===void 0&&(a={});var s=this.constructor.name;return Zr.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),vn.prototype.addChild.call(this,i,a)},t.enable=function(){n.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.disable=function(){n.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.handleKeyDown=function(i){if(Hr.isEventKey(i,"Space")||Hr.isEventKey(i,"Enter")){i.stopPropagation();return}n.prototype.handleKeyDown.call(this,i)},e}(uI);vn.registerComponent("Button",Oc);var _se=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.mouseused_=!1,a.on("mousedown",function(s){return a.handleMouseDown(s)}),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(i){var a=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;md(a),this.player_.tech(!0)&&!((kw||Rw)&&s)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}var u=function(){return l.focus()};rx(a)?a.then(u,function(){}):this.setTimeout(u,1)},t.handleKeyDown=function(i){this.mouseused_=!1,n.prototype.handleKeyDown.call(this,i)},t.handleMouseDown=function(i){this.mouseused_=!0},e}(Oc);_se.prototype.controlText_="Play Video";vn.registerComponent("BigPlayButton",_se);var nGe=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.controlText(i&&i.controlText||a.localize("Close")),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(i){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(i){Hr.isEventKey(i,"Esc")?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):n.prototype.handleKeyDown.call(this,i)},e}(Oc);vn.registerComponent("CloseButton",nGe);var bse=function(n){In(e,n);function e(r,i){var a;return i===void 0&&(i={}),a=n.call(this,r,i)||this,i.replay=i.replay===void 0||i.replay,a.on(r,"play",function(s){return a.handlePlay(s)}),a.on(r,"pause",function(s){return a.handlePause(s)}),i.replay&&a.on(r,"ended",function(s){return a.handleEnded(s)}),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(i){this.player_.paused()?md(this.player_.play()):this.player_.pause()},t.handleSeeked=function(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},t.handlePlay=function(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(i){var a=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return a.handleSeeked(s)})},e}(Oc);bse.prototype.controlText_="Play";vn.registerComponent("PlayToggle",bse);var Sse=function(e,t){e=e<0?0:e;var r=Math.floor(e%60),i=Math.floor(e/60%60),a=Math.floor(e/3600),s=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(a=i=r="-"),a=a>0||o>0?a+":":"",i=((a||s>=10)&&i<10?"0"+i:i)+":",r=r<10?"0"+r:r,a+i+r},VF=Sse;function rGe(n){VF=n}function iGe(){VF=Sse}function Q1(n,e){return e===void 0&&(e=n),VF(n,e)}var V_=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.on(r,["timeupdate","ended"],function(s){return a.updateContent(s)}),a.updateTextNode_(),a}var t=e.prototype;return t.createEl=function(){var i=this.buildCSSClass(),a=n.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control"}),s=wi("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+" "},{role:"presentation"});return a.appendChild(s),this.contentEl_=wi("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"}),a.appendChild(this.contentEl_),a},t.dispose=function(){this.contentEl_=null,this.textNode_=null,n.prototype.dispose.call(this)},t.updateTextNode_=function(i){var a=this;i===void 0&&(i=0),i=Q1(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(a.contentEl_){var s=a.textNode_;s&&a.contentEl_.firstChild!==s&&(s=null,Zr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),a.textNode_=An.createTextNode(a.formattedTime_),a.textNode_&&(s?a.contentEl_.replaceChild(a.textNode_,s):a.contentEl_.appendChild(a.textNode_))}}))},t.updateContent=function(i){},e}(vn);V_.prototype.labelText_="Time";V_.prototype.controlText_="Time";vn.registerComponent("TimeDisplay",V_);var $F=function(n){In(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(i){var a;this.player_.ended()?a=this.player_.duration():a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)},e}(V_);$F.prototype.labelText_="Current Time";$F.prototype.controlText_="Current Time";vn.registerComponent("CurrentTimeDisplay",$F);var GF=function(n){In(e,n);function e(r,i){var a;a=n.call(this,r,i)||this;var s=function(l){return a.updateContent(l)};return a.on(r,"durationchange",s),a.on(r,"loadstart",s),a.on(r,"loadedmetadata",s),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(i){var a=this.player_.duration();this.updateTextNode_(a)},e}(V_);GF.prototype.labelText_="Duration";GF.prototype.controlText_="Duration";vn.registerComponent("DurationDisplay",GF);var aGe=function(n){In(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var i=n.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=n.prototype.createEl.call(this,"div"),s=n.prototype.createEl.call(this,"span",{textContent:"/"});return a.appendChild(s),i.appendChild(a),i},e}(vn);vn.registerComponent("TimeDivider",aGe);var WF=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.on(r,"durationchange",function(s){return a.updateContent(s)}),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var i=n.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&i.insertBefore(wi("span",{},{"aria-hidden":!0},"-"),this.contentEl_),i},t.updateContent=function(i){if(typeof this.player_.duration()=="number"){var a;this.player_.ended()?a=0:this.player_.remainingTimeDisplay?a=this.player_.remainingTimeDisplay():a=this.player_.remainingTime(),this.updateTextNode_(a)}},e}(V_);WF.prototype.labelText_="Remaining Time";WF.prototype.controlText_="Remaining Time";vn.registerComponent("RemainingTimeDisplay",WF);var sGe=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.updateShowing(),a.on(a.player(),"durationchange",function(s){return a.updateShowing(s)}),a}var t=e.prototype;return t.createEl=function(){var i=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=wi("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(wi("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+" "})),this.contentEl_.appendChild(An.createTextNode(this.localize("LIVE"))),i.appendChild(this.contentEl_),i},t.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},t.updateShowing=function(i){this.player().duration()===1/0?this.show():this.hide()},e}(vn);vn.registerComponent("LiveDisplay",sGe);var xse=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.updateLiveEdgeStatus(),a.player_.liveTracker&&(a.updateLiveEdgeStatusHandler_=function(s){return a.updateLiveEdgeStatus(s)},a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatusHandler_)),a}var t=e.prototype;return t.createEl=function(){var i=n.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=wi("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i},t.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,n.prototype.dispose.call(this)},e}(Oc);xse.prototype.controlText_="Seek to live, currently playing live";vn.registerComponent("SeekToLive",xse);var cI=function(e,t,r){return e=Number(e),Math.min(r,Math.max(t,isNaN(e)?t:e))},qF=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.handleMouseDown_=function(s){return a.handleMouseDown(s)},a.handleMouseUp_=function(s){return a.handleMouseUp(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleMouseMove_=function(s){return a.handleMouseMove(s)},a.update_=function(s){return a.update(s)},a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.enable(),a}var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(i,a,s){return a===void 0&&(a={}),s===void 0&&(s={}),a.className=a.className+" vjs-slider",a=Pa({tabIndex:0},a),s=Pa({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),n.prototype.createEl.call(this,i,a,s)},t.handleMouseDown=function(i){var a=this.bar.el_.ownerDocument;i.type==="mousedown"&&i.preventDefault(),i.type==="touchstart"&&!ph&&i.preventDefault(),Qae(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(i,!0)},t.handleMouseMove=function(i){},t.handleMouseUp=function(){var i=this.bar.el_.ownerDocument;Zae(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()},t.update=function(){var i=this;if(!(!this.el_||!this.bar)){var a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",function(){var s=i.vertical()?"height":"width";i.bar.el().style[s]=(a*100).toFixed(2)+"%"})),a}},t.getProgress=function(){return Number(cI(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(i){var a=iI(this.el_,i);return this.vertical()?a.y:a.x},t.handleKeyDown=function(i){Hr.isEventKey(i,"Left")||Hr.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepBack()):Hr.isEventKey(i,"Right")||Hr.isEventKey(i,"Up")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):n.prototype.handleKeyDown.call(this,i)},t.handleClick=function(i){i.stopPropagation(),i.preventDefault()},t.vertical=function(i){if(i===void 0)return this.vertical_||!1;this.vertical_=!!i,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(vn);vn.registerComponent("Slider",qF);var wP=function(e,t){return cI(e/t*100,0,100).toFixed(2)+"%"},oGe=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.partEls_=[],a.on(r,"progress",function(s){return a.update(s)}),a}var t=e.prototype;return t.createEl=function(){var i=n.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),a=wi("span",{className:"vjs-control-text"}),s=wi("span",{textContent:this.localize("Loaded")}),o=An.createTextNode(": ");return this.percentageEl_=wi("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),i.appendChild(a),a.appendChild(s),a.appendChild(o),a.appendChild(this.percentageEl_),i},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,n.prototype.dispose.call(this)},t.update=function(i){var a=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=a.player_.liveTracker,o=a.player_.buffered(),l=s&&s.isLive()?s.seekableEnd():a.player_.duration(),u=a.player_.bufferedEnd(),c=a.partEls_,d=wP(u,l);a.percent_!==d&&(a.el_.style.width=d,Pv(a.percentageEl_,d),a.percent_=d);for(var f=0;f<o.length;f++){var h=o.start(f),p=o.end(f),m=c[f];m||(m=a.el_.appendChild(wi()),c[f]=m),!(m.dataset.start===h&&m.dataset.end===p)&&(m.dataset.start=h,m.dataset.end=p,m.style.left=wP(h,u),m.style.width=wP(p-h,u))}for(var v=c.length;v>o.length;v--)a.el_.removeChild(c[v-1]);c.length=o.length})},e}(vn);vn.registerComponent("LoadProgressBar",oGe);var lGe=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.update=Zf(ca(Fr(a),a.update),Uc),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(i,a,s){var o=S2(this.el_),l=K1(this.player_.el()),u=i.width*a;if(!(!l||!o)){var c=i.left-l.left+u,d=i.width-u+(l.right-i.right),f=o.width/2;c<f?f+=f-c:d<f&&(f=d),f<0?f=0:f>o.width&&(f=o.width),f=Math.round(f),this.el_.style.right="-"+f+"px",this.write(s)}},t.write=function(i){Pv(this.el_,i)},t.updateTime=function(i,a,s,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var u,c=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var d=l.player_.liveTracker.liveWindow(),f=d-a*d;u=(f<1?"":"-")+Q1(f,d)}else u=Q1(s,c);l.update(i,a,u),o&&o()})},e}(vn);vn.registerComponent("TimeTooltip",lGe);var jF=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.update=Zf(ca(Fr(a),a.update),Uc),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(i,a){var s=this.getChild("timeTooltip");if(s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(i,a,o)}},e}(vn);jF.prototype.options_={children:[]};!Ko&&!hh&&jF.prototype.options_.children.push("timeTooltip");vn.registerComponent("PlayProgressBar",jF);var wse=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.update=Zf(ca(Fr(a),a.update),Uc),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(i,a){var s=this,o=a*this.player_.duration();this.getChild("timeTooltip").updateTime(i,a,o,function(){s.el_.style.left=i.width*a+"px"})},e}(vn);wse.prototype.options_={children:["timeTooltip"]};vn.registerComponent("MouseTimeDisplay",wse);var qT=5,$G=12,KF=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.setEventHandlers_(),a}var t=e.prototype;return t.setEventHandlers_=function(){var i=this;this.update_=ca(this,this.update),this.update=Zf(this.update_,Uc),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(a){return i.enableInterval_(a)},this.disableIntervalHandler_=function(a){return i.disableInterval_(a)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in An&&"visibilityState"in An&&this.on(An,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(i){An.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Uc))},t.disableInterval_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&i.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(i){var a=this;if(An.visibilityState!=="hidden"){var s=n.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=a.player_.ended()?a.player_.duration():a.getCurrentTime_(),l=a.player_.liveTracker,u=a.player_.duration();l&&l.isLive()&&(u=a.player_.liveTracker.liveCurrentTime()),a.percent_!==s&&(a.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),a.percent_=s),(a.currentTime_!==o||a.duration_!==u)&&(a.el_.setAttribute("aria-valuetext",a.localize("progress bar timing: currentTime={1} duration={2}",[Q1(o,u),Q1(u,u)],"{1} of {2}")),a.currentTime_=o,a.duration_=u),a.bar&&a.bar.update(K1(a.el()),a.getProgress())}),s}},t.userSeek_=function(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var i=this.getCurrentTime_(),a,s=this.player_.liveTracker;return s&&s.isLive()?(a=(i-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(a=1)):a=i/this.player_.duration(),a},t.handleMouseDown=function(i){x2(i)&&(i.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),n.prototype.handleMouseDown.call(this,i))},t.handleMouseMove=function(i,a){if(a===void 0&&(a=!1),!!x2(i)){!a&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var s,o=this.calculateDistance(i),l=this.player_.liveTracker;if(!l||!l.isLive())s=o*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(o>=.99){l.seekToLiveEdge();return}var u=l.seekableStart(),c=l.liveCurrentTime();if(s=u+o*l.liveWindow(),s>=c&&(s=c),s<=u&&(s=u+.1),s===1/0)return}this.userSeek_(s)}},t.enable=function(){n.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.show()},t.disable=function(){n.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");i&&i.hide()},t.handleMouseUp=function(i){n.prototype.handleMouseUp.call(this,i),i&&i.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?md(this.player_.play()):this.update_()},t.stepForward=function(){this.userSeek_(this.player_.currentTime()+qT)},t.stepBack=function(){this.userSeek_(this.player_.currentTime()-qT)},t.handleAction=function(i){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(i){var a=this.player_.liveTracker;if(Hr.isEventKey(i,"Space")||Hr.isEventKey(i,"Enter"))i.preventDefault(),i.stopPropagation(),this.handleAction(i);else if(Hr.isEventKey(i,"Home"))i.preventDefault(),i.stopPropagation(),this.userSeek_(0);else if(Hr.isEventKey(i,"End"))i.preventDefault(),i.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Hr(i))){i.preventDefault(),i.stopPropagation();var s=(Hr.codes[Hr(i)]-Hr.codes[0])*10/100;a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else Hr.isEventKey(i,"PgDn")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()-qT*$G)):Hr.isEventKey(i,"PgUp")?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()+qT*$G)):n.prototype.handleKeyDown.call(this,i)},t.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in An&&"visibilityState"in An&&this.off(An,"visibilitychange",this.toggleVisibility_),n.prototype.dispose.call(this)},e}(qF);KF.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!Ko&&!hh&&KF.prototype.options_.children.splice(1,0,"mouseTimeDisplay");vn.registerComponent("SeekBar",KF);var Tse=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.handleMouseMove=Zf(ca(Fr(a),a.handleMouseMove),Uc),a.throttledHandleMouseSeek=Zf(ca(Fr(a),a.handleMouseSeek),Uc),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.handleMouseDownHandler_=function(s){return a.handleMouseDown(s)},a.enable(),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(i){var a=this.getChild("seekBar");if(a){var s=a.getChild("playProgressBar"),o=a.getChild("mouseTimeDisplay");if(!(!s&&!o)){var l=a.el(),u=S2(l),c=iI(l,i).x;c=cI(c,0,1),o&&o.update(u,c),s&&s.update(u,a.getProgress())}}},t.handleMouseSeek=function(i){var a=this.getChild("seekBar");a&&a.handleMouseMove(i)},t.enabled=function(){return this.enabled_},t.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&md(this.player_.play())}},t.enable=function(){this.children().forEach(function(i){return i.enable&&i.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.removeListenersAddedOnMousedownAndTouchstart=function(){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},t.handleMouseDown=function(i){var a=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(i),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(i){var a=this.getChild("seekBar");a&&a.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()},e}(vn);Tse.prototype.options_={children:["seekBar"]};vn.registerComponent("ProgressControl",Tse);var Cse=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.on(r,["enterpictureinpicture","leavepictureinpicture"],function(s){return a.handlePictureInPictureChange(s)}),a.on(r,["disablepictureinpicturechanged","loadedmetadata"],function(s){return a.handlePictureInPictureEnabledChange(s)}),a.on(r,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var s=r.currentType().substring(0,5)==="audio";s||r.audioPosterMode()||r.audioOnlyMode()?(r.isInPictureInPicture()&&r.exitPictureInPicture(),a.hide()):a.show()}),a.disable(),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+n.prototype.buildCSSClass.call(this)},t.handlePictureInPictureEnabledChange=function(){An.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},t.handlePictureInPictureChange=function(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},t.handleClick=function(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Oc);Cse.prototype.controlText_="Picture-in-Picture";vn.registerComponent("PictureInPictureToggle",Cse);var Ase=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.on(r,"fullscreenchange",function(s){return a.handleFullscreenChange(s)}),An[r.fsApi_.fullscreenEnabled]===!1&&a.disable(),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Oc);Ase.prototype.controlText_="Fullscreen";vn.registerComponent("FullscreenToggle",Ase);var uGe=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},cGe=function(n){In(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var i=n.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return i.appendChild(n.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),i},e}(vn);vn.registerComponent("VolumeLevel",cGe);var dGe=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.update=Zf(ca(Fr(a),a.update),Uc),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},t.update=function(i,a,s,o){if(!s){var l=K1(this.el_),u=K1(this.player_.el()),c=i.width*a;if(!u||!l)return;var d=i.left-u.left+c,f=i.width-c+(u.right-i.right),h=l.width/2;d<h?h+=h-d:f<h&&(h=f),h<0?h=0:h>l.width&&(h=l.width),this.el_.style.right="-"+h+"px"}this.write(o+"%")},t.write=function(i){Pv(this.el_,i)},t.updateVolume=function(i,a,s,o,l){var u=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){u.update(i,a,s,o.toFixed(0)),l&&l()})},e}(vn);vn.registerComponent("VolumeLevelTooltip",dGe);var Ese=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.update=Zf(ca(Fr(a),a.update),Uc),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(i,a,s){var o=this,l=100*a;this.getChild("volumeLevelTooltip").updateVolume(i,a,s,l,function(){s?o.el_.style.bottom=i.height*a+"px":o.el_.style.left=i.width*a+"px"})},e}(vn);Ese.prototype.options_={children:["volumeLevelTooltip"]};vn.registerComponent("MouseVolumeLevelDisplay",Ese);var dI=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.on("slideractive",function(s){return a.updateLastVolume_(s)}),a.on(r,"volumechange",function(s){return a.updateARIAAttributes(s)}),r.ready(function(){return a.updateARIAAttributes()}),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(i){x2(i)&&n.prototype.handleMouseDown.call(this,i)},t.handleMouseMove=function(i){var a=this.getChild("mouseVolumeLevelDisplay");if(a){var s=this.el(),o=K1(s),l=this.vertical(),u=iI(s,i);u=l?u.y:u.x,u=cI(u,0,1),a.update(o,u,l)}x2(i)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(i){var a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},t.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},t.updateLastVolume_=function(){var i=this,a=this.player_.volume();this.one("sliderinactive",function(){i.player_.volume()===0&&i.player_.lastVolume_(a)})},e}(qF);dI.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Ko&&!hh&&dI.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");dI.prototype.playerEvent="volumechange";vn.registerComponent("VolumeBar",dI);var Mse=function(n){In(e,n);function e(r,i){var a;return i===void 0&&(i={}),i.vertical=i.vertical||!1,(typeof i.volumeBar>"u"||_2(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),a=n.call(this,r,i)||this,uGe(Fr(a),r),a.throttledHandleMouseMove=Zf(ca(Fr(a),a.handleMouseMove),Uc),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.on("mousedown",function(s){return a.handleMouseDown(s)}),a.on("touchstart",function(s){return a.handleMouseDown(s)}),a.on("mousemove",function(s){return a.handleMouseMove(s)}),a.on(a.volumeBar,["focus","slideractive"],function(){a.volumeBar.addClass("vjs-slider-active"),a.addClass("vjs-slider-active"),a.trigger("slideractive")}),a.on(a.volumeBar,["blur","sliderinactive"],function(){a.volumeBar.removeClass("vjs-slider-active"),a.removeClass("vjs-slider-active"),a.trigger("sliderinactive")}),a}var t=e.prototype;return t.createEl=function(){var i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})},t.handleMouseDown=function(i){var a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(i){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},t.handleMouseMove=function(i){this.volumeBar.handleMouseMove(i)},e}(vn);Mse.prototype.options_={children:["volumeBar"]};vn.registerComponent("VolumeControl",Mse);var fGe=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},Ise=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,fGe(Fr(a),r),a.on(r,["loadstart","volumechange"],function(s){return a.update(s)}),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(i){var a=this.player_.volume(),s=this.player_.lastVolume_();if(a===0){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=function(i){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var i=this.player_.volume(),a=3;Ko&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),i===0||this.player_.muted()?a=0:i<.33?a=1:i<.67&&(a=2);for(var s=0;s<4;s++)Lw(this.el_,"vjs-vol-"+s);Nf(this.el_,"vjs-vol-"+a)},t.updateControlText_=function(){var i=this.player_.muted()||this.player_.volume()===0,a=i?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)},e}(Oc);Ise.prototype.controlText_="Mute";vn.registerComponent("MuteToggle",Ise);var Dse=function(n){In(e,n);function e(r,i){var a;return i===void 0&&(i={}),typeof i.inline<"u"?i.inline=i.inline:i.inline=!0,(typeof i.volumeControl>"u"||_2(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),a=n.call(this,r,i)||this,a.handleKeyPressHandler_=function(s){return a.handleKeyPress(s)},a.on(r,["loadstart"],function(s){return a.volumePanelState_(s)}),a.on(a.muteToggle,"keyup",function(s){return a.handleKeyPress(s)}),a.on(a.volumeControl,"keyup",function(s){return a.handleVolumeControlKeyUp(s)}),a.on("keydown",function(s){return a.handleKeyPress(s)}),a.on("mouseover",function(s){return a.handleMouseOver(s)}),a.on("mouseout",function(s){return a.handleMouseOut(s)}),a.on(a.volumeControl,["slideractive"],a.sliderActive_),a.on(a.volumeControl,["sliderinactive"],a.sliderInactive_),a}var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})},t.dispose=function(){this.handleMouseOut(),n.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(i){Hr.isEventKey(i,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(i){this.addClass("vjs-hover"),au(An,"keyup",this.handleKeyPressHandler_)},t.handleMouseOut=function(i){this.removeClass("vjs-hover"),wo(An,"keyup",this.handleKeyPressHandler_)},t.handleKeyPress=function(i){Hr.isEventKey(i,"Esc")&&this.handleMouseOut()},e}(vn);Dse.prototype.options_={children:["muteToggle","volumeControl"]};vn.registerComponent("VolumePanel",Dse);var Pse=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,i&&(a.menuButton_=i.menuButton),a.focusedChild_=-1,a.on("keydown",function(s){return a.handleKeyDown(s)}),a.boundHandleBlur_=function(s){return a.handleBlur(s)},a.boundHandleTapClick_=function(s){return a.handleTapClick(s)},a}var t=e.prototype;return t.addEventListenerForItem=function(i){i instanceof vn&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(i){i instanceof vn&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(i){typeof i=="string"&&(i=this.getChild(i)),this.removeEventListenerForItem(i),n.prototype.removeChild.call(this,i)},t.addItem=function(i){var a=this.addChild(i);a&&this.addEventListenerForItem(a)},t.createEl=function(){var i=this.options_.contentElType||"ul";this.contentEl_=wi(i,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var a=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),au(a,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),a},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,n.prototype.dispose.call(this)},t.handleBlur=function(i){var a=i.relatedTarget||An.activeElement;if(!this.children().some(function(o){return o.el()===a})){var s=this.menuButton_;s&&s.buttonPressed_&&a!==s.el().firstChild&&s.unpressButton()}},t.handleTapClick=function(i){if(this.menuButton_){this.menuButton_.unpressButton();var a=this.children();if(!Array.isArray(a))return;var s=a.filter(function(o){return o.el()===i.target})[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},t.handleKeyDown=function(i){Hr.isEventKey(i,"Left")||Hr.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):(Hr.isEventKey(i,"Right")||Hr.isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},t.stepForward=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_+1),this.focus(i)},t.stepBack=function(){var i=0;this.focusedChild_!==void 0&&(i=this.focusedChild_-1),this.focus(i)},t.focus=function(i){i===void 0&&(i=0);var a=this.children().slice(),s=a.length&&a[0].hasClass("vjs-menu-title");s&&a.shift(),a.length>0&&(i<0?i=0:i>=a.length&&(i=a.length-1),this.focusedChild_=i,a[i].el_.focus())},e}(vn);vn.registerComponent("Menu",Pse);var XF=function(n){In(e,n);function e(r,i){var a;i===void 0&&(i={}),a=n.call(this,r,i)||this,a.menuButton_=new Oc(r,i),a.menuButton_.controlText(a.controlText_),a.menuButton_.el_.setAttribute("aria-haspopup","true");var s=Oc.prototype.buildCSSClass();a.menuButton_.el_.className=a.buildCSSClass()+" "+s,a.menuButton_.removeClass("vjs-control"),a.addChild(a.menuButton_),a.update(),a.enabled_=!0;var o=function(u){return a.handleClick(u)};return a.handleMenuKeyUp_=function(l){return a.handleMenuKeyUp(l)},a.on(a.menuButton_,"tap",o),a.on(a.menuButton_,"click",o),a.on(a.menuButton_,"keydown",function(l){return a.handleKeyDown(l)}),a.on(a.menuButton_,"mouseenter",function(){a.addClass("vjs-hover"),a.menu.show(),au(An,"keyup",a.handleMenuKeyUp_)}),a.on("mouseleave",function(l){return a.handleMouseLeave(l)}),a.on("keydown",function(l){return a.handleSubmenuKeyDown(l)}),a}var t=e.prototype;return t.update=function(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},t.createMenu=function(){var i=new Pse(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var a=wi("li",{className:"vjs-menu-title",textContent:Ha(this.options_.title),tabIndex:-1}),s=new vn(this.player_,{el:a});i.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)i.addItem(this.items[o]);return i},t.createItems=function(){},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var i="vjs-menu-button";this.options_.inline===!0?i+="-inline":i+="-popup";var a=Oc.prototype.buildCSSClass();return"vjs-menu-button "+i+" "+a+" "+n.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var i="vjs-menu-button";return this.options_.inline===!0?i+="-inline":i+="-popup","vjs-menu-button "+i+" "+n.prototype.buildCSSClass.call(this)},t.controlText=function(i,a){return a===void 0&&(a=this.menuButton_.el()),this.menuButton_.controlText(i,a)},t.dispose=function(){this.handleMouseLeave(),n.prototype.dispose.call(this)},t.handleClick=function(i){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(i){this.removeClass("vjs-hover"),wo(An,"keyup",this.handleMenuKeyUp_)},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(i){Hr.isEventKey(i,"Esc")||Hr.isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),Hr.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):(Hr.isEventKey(i,"Up")||Hr.isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(i){(Hr.isEventKey(i,"Esc")||Hr.isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(i){this.handleSubmenuKeyDown(i)},t.handleSubmenuKeyDown=function(i){(Hr.isEventKey(i,"Esc")||Hr.isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Hr.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ko&&qae())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(vn);vn.registerComponent("MenuButton",XF);var YF=function(n){In(e,n);function e(t,r){var i,a=r.tracks;if(i=n.call(this,t,r)||this,i.items.length<=1&&i.hide(),!a)return Fr(i);var s=ca(Fr(i),i.update);return a.addEventListener("removetrack",s),a.addEventListener("addtrack",s),a.addEventListener("labelchange",s),i.player_.on("ready",s),i.player_.on("dispose",function(){a.removeEventListener("removetrack",s),a.removeEventListener("addtrack",s),a.removeEventListener("labelchange",s)}),i}return e}(XF);vn.registerComponent("TrackButton",YF);var hGe=["Tab","Esc","Up","Down","Right","Left"],Nw=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.selectable=i.selectable,a.isSelected_=i.selected||!1,a.multiSelectable=i.multiSelectable,a.selected(a.isSelected_),a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem"),a}var t=e.prototype;return t.createEl=function(i,a,s){this.nonIconControl=!0;var o=n.prototype.createEl.call(this,"li",Pa({className:"vjs-menu-item",tabIndex:-1},a),s);return o.replaceChild(wi("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},t.handleKeyDown=function(i){hGe.some(function(a){return Hr.isEventKey(i,a)})||n.prototype.handleKeyDown.call(this,i)},t.handleClick=function(i){this.selected(!0)},t.selected=function(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(uI);vn.registerComponent("MenuItem",Nw);var Bw=function(n){In(e,n);function e(r,i){var a,s=i.track,o=r.textTracks();i.label=s.label||s.language||"Unknown",i.selected=s.mode==="showing",a=n.call(this,r,i)||this,a.track=s,a.kinds=(i.kinds||[i.kind||a.track.kind]).filter(Boolean);var l=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];a.handleTracksChange.apply(Fr(a),h)},u=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];a.handleSelectedLanguageChange.apply(Fr(a),h)};if(r.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",u),a.on("dispose",function(){r.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",u)}),o.onchange===void 0){var c;a.on(["tap","click"],function(){if(typeof gt.Event!="object")try{c=new gt.Event("change")}catch{}c||(c=An.createEvent("Event"),c.initEvent("change",!0,!0)),o.dispatchEvent(c)})}return a.handleTracksChange(),a}var t=e.prototype;return t.handleClick=function(i){var a=this.track,s=this.player_.textTracks();if(n.prototype.handleClick.call(this,i),!!s)for(var o=0;o<s.length;o++){var l=s[o];this.kinds.indexOf(l.kind)!==-1&&(l===a?l.mode!=="showing"&&(l.mode="showing"):l.mode!=="disabled"&&(l.mode="disabled"))}},t.handleTracksChange=function(i){var a=this.track.mode==="showing";a!==this.isSelected_&&this.selected(a)},t.handleSelectedLanguageChange=function(i){if(this.track.mode==="showing"){var a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,n.prototype.dispose.call(this)},e}(Nw);vn.registerComponent("TextTrackMenuItem",Bw);var Rse=function(n){In(e,n);function e(r,i){return i.track={player:r,kind:i.kind,kinds:i.kinds,default:!1,mode:"disabled"},i.kinds||(i.kinds=[i.kind]),i.label?i.track.label=i.label:i.track.label=i.kinds.join(" and ")+" off",i.selectable=!0,i.multiSelectable=!1,n.call(this,r,i)||this}var t=e.prototype;return t.handleTracksChange=function(i){for(var a=this.player().textTracks(),s=!0,o=0,l=a.length;o<l;o++){var u=a[o];if(this.options_.kinds.indexOf(u.kind)>-1&&u.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},t.handleSelectedLanguageChange=function(i){for(var a=this.player().textTracks(),s=!0,o=0,l=a.length;o<l;o++){var u=a[o];if(["captions","descriptions","subtitles"].indexOf(u.kind)>-1&&u.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Bw);vn.registerComponent("OffTextTrackMenuItem",Rse);var $_=function(n){In(e,n);function e(r,i){return i===void 0&&(i={}),i.tracks=r.textTracks(),n.call(this,r,i)||this}var t=e.prototype;return t.createItems=function(i,a){i===void 0&&(i=[]),a===void 0&&(a=Bw);var s;this.label_&&(s=this.label_+" off"),i.push(new Rse(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var u=o[l];if(this.kinds_.indexOf(u.kind)>-1){var c=new a(this.player_,{track:u,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass("vjs-"+u.kind+"-menu-item"),i.push(c)}}return i},e}(YF);vn.registerComponent("TextTrackButton",$_);var kse=function(n){In(e,n);function e(r,i){var a,s=i.track,o=i.cue,l=r.currentTime();return i.selectable=!0,i.multiSelectable=!1,i.label=o.text,i.selected=o.startTime<=l&&l<o.endTime,a=n.call(this,r,i)||this,a.track=s,a.cue=o,a}var t=e.prototype;return t.handleClick=function(i){n.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e}(Nw);vn.registerComponent("ChaptersTrackMenuItem",kse);var QF=function(n){In(e,n);function e(r,i,a){var s;return s=n.call(this,r,i,a)||this,s.selectCurrentItem_=function(){s.items.forEach(function(o){o.selected(s.track_.activeCues[0]===o.cue)})},s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildWrapperCSSClass.call(this)},t.update=function(i){if(!(i&&i.track&&i.track.kind!=="chapters")){var a=this.findChaptersTrack();a!==this.track_?(this.setTrack(a),n.prototype.update.call(this)):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&n.prototype.update.call(this)}},t.setTrack=function(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},t.findChaptersTrack=function(){for(var i=this.player_.textTracks()||[],a=i.length-1;a>=0;a--){var s=i[a];if(s.kind===this.kind_)return s}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ha(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),n.prototype.createMenu.call(this)},t.createItems=function(){var i=[];if(!this.track_)return i;var a=this.track_.cues;if(!a)return i;for(var s=0,o=a.length;s<o;s++){var l=a[s],u=new kse(this.player_,{track:this.track_,cue:l});i.push(u)}return i},e}($_);QF.prototype.kind_="chapters";QF.prototype.controlText_="Chapters";vn.registerComponent("ChaptersButton",QF);var ZF=function(n){In(e,n);function e(r,i,a){var s;s=n.call(this,r,i,a)||this;var o=r.textTracks(),l=ca(Fr(s),s.handleTracksChange);return o.addEventListener("change",l),s.on("dispose",function(){o.removeEventListener("change",l)}),s}var t=e.prototype;return t.handleTracksChange=function(i){for(var a=this.player().textTracks(),s=!1,o=0,l=a.length;o<l;o++){var u=a[o];if(u.kind!==this.kind_&&u.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+n.prototype.buildWrapperCSSClass.call(this)},e}($_);ZF.prototype.kind_="descriptions";ZF.prototype.controlText_="Descriptions";vn.registerComponent("DescriptionsButton",ZF);var JF=function(n){In(e,n);function e(r,i,a){return n.call(this,r,i,a)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildWrapperCSSClass.call(this)},e}($_);JF.prototype.kind_="subtitles";JF.prototype.controlText_="Subtitles";vn.registerComponent("SubtitlesButton",JF);var e7=function(n){In(e,n);function e(r,i){var a;return i.track={player:r,kind:i.kind,label:i.kind+" settings",selectable:!1,default:!1,mode:"disabled"},i.selectable=!1,i.name="CaptionSettingsMenuItem",a=n.call(this,r,i)||this,a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+i.kind+" settings dialog"),a}var t=e.prototype;return t.handleClick=function(i){this.player().getChild("textTrackSettings").open()},e}(Bw);vn.registerComponent("CaptionSettingsMenuItem",e7);var t7=function(n){In(e,n);function e(r,i,a){return n.call(this,r,i,a)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new e7(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,i)},e}($_);t7.prototype.kind_="captions";t7.prototype.controlText_="Captions";vn.registerComponent("CaptionsButton",t7);var Lse=function(n){In(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(i,a,s){var o=n.prototype.createEl.call(this,i,a,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(l.appendChild(wi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(wi("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e}(Bw);vn.registerComponent("SubsCapsMenuItem",Lse);var n7=function(n){In(e,n);function e(r,i){var a;return i===void 0&&(i={}),a=n.call(this,r,i)||this,a.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)>-1&&(a.label_="captions"),a.menuButton_.controlText(Ha(a.label_)),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var i=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(i.push(new e7(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i=n.prototype.createItems.call(this,i,Lse),i},e}($_);n7.prototype.kinds_=["captions","subtitles"];n7.prototype.controlText_="Subtitles";vn.registerComponent("SubsCapsButton",n7);var Ose=function(n){In(e,n);function e(r,i){var a,s=i.track,o=r.audioTracks();i.label=s.label||s.language||"Unknown",i.selected=s.enabled,a=n.call(this,r,i)||this,a.track=s,a.addClass("vjs-"+s.kind+"-menu-item");var l=function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];a.handleTracksChange.apply(Fr(a),d)};return o.addEventListener("change",l),a.on("dispose",function(){o.removeEventListener("change",l)}),a}var t=e.prototype;return t.createEl=function(i,a,s){var o=n.prototype.createEl.call(this,i,a,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(l.appendChild(wi("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(wi("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},t.handleClick=function(i){if(n.prototype.handleClick.call(this,i),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];o!==this.track&&(o.enabled=o===this.track)}},t.handleTracksChange=function(i){this.selected(this.track.enabled)},e}(Nw);vn.registerComponent("AudioTrackMenuItem",Ose);var Nse=function(n){In(e,n);function e(r,i){return i===void 0&&(i={}),i.tracks=r.audioTracks(),n.call(this,r,i)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(i){i===void 0&&(i=[]),this.hideThreshold_=1;for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];i.push(new Ose(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return i},e}(YF);Nse.prototype.controlText_="Audio Track";vn.registerComponent("AudioTrackButton",Nse);var r7=function(n){In(e,n);function e(r,i){var a,s=i.rate,o=parseFloat(s,10);return i.label=s,i.selected=o===r.playbackRate(),i.selectable=!0,i.multiSelectable=!1,a=n.call(this,r,i)||this,a.label=s,a.rate=o,a.on(r,"ratechange",function(l){return a.update(l)}),a}var t=e.prototype;return t.handleClick=function(i){n.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(i){this.selected(this.player().playbackRate()===this.rate)},e}(Nw);r7.prototype.contentElType="button";vn.registerComponent("PlaybackRateMenuItem",r7);var Bse=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.menuButton_.el_.setAttribute("aria-describedby",a.labelElId_),a.updateVisibility(),a.updateLabel(),a.on(r,"loadstart",function(s){return a.updateVisibility(s)}),a.on(r,"ratechange",function(s){return a.updateLabel(s)}),a.on(r,"playbackrateschange",function(s){return a.handlePlaybackRateschange(s)}),a}var t=e.prototype;return t.createEl=function(){var i=n.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=wi("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),i.appendChild(this.labelEl_),i},t.dispose=function(){this.labelEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){for(var i=this.playbackRates(),a=[],s=i.length-1;s>=0;s--)a.push(new r7(this.player(),{rate:i[s]+"x"}));return a},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(i){var a=this.player().playbackRate(),s=this.playbackRates(),o=s.indexOf(a),l=(o+1)%s.length;this.player().playbackRate(s[l])},t.handlePlaybackRateschange=function(i){this.update()},t.playbackRates=function(){var i=this.player();return i.playbackRates&&i.playbackRates()||[]},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.updateVisibility=function(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(XF);Bse.prototype.controlText_="Playback Rate";vn.registerComponent("PlaybackRateMenuButton",Bse);var Fse=function(n){In(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-spacer "+n.prototype.buildCSSClass.call(this)},t.createEl=function(i,a,s){return i===void 0&&(i="div"),a===void 0&&(a={}),s===void 0&&(s={}),a.className||(a.className=this.buildCSSClass()),n.prototype.createEl.call(this,i,a,s)},e}(vn);vn.registerComponent("Spacer",Fse);var pGe=function(n){In(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-custom-control-spacer "+n.prototype.buildCSSClass.call(this)},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:" "})},e}(Fse);vn.registerComponent("CustomControlSpacer",pGe);var HM=function(n){In(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(vn);HM.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in An&&HM.prototype.options_.children.splice(HM.prototype.options_.children.length-1,0,"pictureInPictureToggle");vn.registerComponent("ControlBar",HM);var Use=function(n){In(e,n);function e(r,i){var a;return a=n.call(this,r,i)||this,a.on(r,"error",function(s){return a.open(s)}),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},t.content=function(){var i=this.player().error();return i?this.localize(i.message):""},e}(z_);Use.prototype.options_=Qu({},z_.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});vn.registerComponent("ErrorDisplay",Use);var TP="vjs-text-track-settings",GG=["#000","Black"],WG=["#00F","Blue"],qG=["#0FF","Cyan"],jG=["#0F0","Green"],KG=["#F0F","Magenta"],XG=["#F00","Red"],YG=["#FFF","White"],QG=["#FF0","Yellow"],CP=["1","Opaque"],AP=["0.5","Semi-Transparent"],ZG=["0","Transparent"],m0={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[GG,YG,XG,jG,WG,QG,KG,qG]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[CP,AP,ZG]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[YG,GG,XG,jG,WG,QG,KG,qG]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[CP,AP]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ZG,AP,CP]}};m0.windowColor.options=m0.backgroundColor.options;function zse(n,e){if(e&&(n=e(n)),n&&n!=="none")return n}function mGe(n,e){var t=n.options[n.options.selectedIndex].value;return zse(t,e)}function vGe(n,e,t){if(e){for(var r=0;r<n.options.length;r++)if(zse(n.options[r].value,t)===e){n.selectedIndex=r;break}}}var gGe=function(n){In(e,n);function e(r,i){var a;return i.temporary=!1,a=n.call(this,r,i)||this,a.updateDisplay=a.updateDisplay.bind(Fr(a)),a.fill(),a.hasBeenOpened_=a.hasBeenFilled_=!0,a.endDialog=wi("p",{className:"vjs-control-text",textContent:a.localize("End of dialog window.")}),a.el().appendChild(a.endDialog),a.setDefaults(),i.persistTextTrackSettings===void 0&&(a.options_.persistTextTrackSettings=a.options_.playerOptions.persistTextTrackSettings),a.on(a.$(".vjs-done-button"),"click",function(){a.saveSettings(),a.close()}),a.on(a.$(".vjs-default-button"),"click",function(){a.setDefaults(),a.updateDisplay()}),a1(m0,function(s){a.on(a.$(s.selector),"change",a.updateDisplay)}),a.options_.persistTextTrackSettings&&a.restoreSettings(),a}var t=e.prototype;return t.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},t.createElSelect_=function(i,a,s){var o=this;a===void 0&&(a=""),s===void 0&&(s="label");var l=m0[i],u=l.id.replace("%s",this.id_),c=[a,u].join(" ").trim();return["<"+s+' id="'+u+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(l.label),"</"+s+">",'<select aria-labelledby="'+c+'">'].concat(l.options.map(function(d){var f=u+"-"+d[1].replace(/\W+/g,"");return['<option id="'+f+'" value="'+d[0]+'" ','aria-labelledby="'+c+" "+f+'">',o.localize(d[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return wi("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return wi("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var i=this.localize("restore all settings to the default values");return wi("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var i=this;return a$e(m0,function(a,s,o){var l=mGe(i.$(s.selector),s.parser);return l!==void 0&&(a[o]=l),a},{})},t.setValues=function(i){var a=this;a1(m0,function(s,o){vGe(a.$(s.selector),i[o],s.parser)})},t.setDefaults=function(){var i=this;a1(m0,function(a){var s=a.hasOwnProperty("default")?a.default:0;i.$(a.selector).selectedIndex=s})},t.restoreSettings=function(){var i;try{i=JSON.parse(gt.localStorage.getItem(TP))}catch(a){Zr.warn(a)}i&&this.setValues(i)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?gt.localStorage.setItem(TP,JSON.stringify(i)):gt.localStorage.removeItem(TP)}catch(a){Zr.warn(a)}}},t.updateDisplay=function(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,a=i&&i.subsCapsButton,s=i&&i.captionsButton;a?a.focus():s&&s.focus()},e}(z_);vn.registerComponent("TextTrackSettings",gGe);var yGe=function(n){In(e,n);function e(r,i){var a,s=i.ResizeObserver||gt.ResizeObserver;i.ResizeObserver===null&&(s=!1);var o=ua({createEl:!s,reportTouchActivity:!1},i);return a=n.call(this,r,o)||this,a.ResizeObserver=i.ResizeObserver||gt.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=v$e(function(){a.resizeHandler()},100,!1,Fr(a)),s?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(r.el())):(a.loadListener_=function(){if(!(!a.el_||!a.el_.contentWindow)){var l=a.debouncedHandler_,u=a.unloadListener_=function(){wo(this,"resize",l),wo(this,"unload",u),u=null};au(a.el_.contentWindow,"unload",u),au(a.el_.contentWindow,"resize",l)}},a.one("load",a.loadListener_)),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},t.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,n.prototype.dispose.call(this)},e}(vn);vn.registerComponent("ResizeManager",yGe);var _Ge={trackingThreshold:20,liveTolerance:15},bGe=function(n){In(e,n);function e(r,i){var a,s=ua(_Ge,i,{createEl:!1});return a=n.call(this,r,s)||this,a.handleVisibilityChange_=function(o){return a.handleVisibilityChange(o)},a.trackLiveHandler_=function(){return a.trackLive_()},a.handlePlay_=function(o){return a.handlePlay(o)},a.handleFirstTimeupdate_=function(o){return a.handleFirstTimeupdate(o)},a.handleSeeked_=function(o){return a.handleSeeked(o)},a.seekToLiveEdge_=function(o){return a.seekToLiveEdge(o)},a.reset_(),a.on(a.player_,"durationchange",function(o){return a.handleDurationchange(o)}),a.on(a.player_,"canplay",function(){return a.toggleTracking()}),kw&&"hidden"in An&&"visibilityState"in An&&a.on(An,"visibilitychange",a.handleVisibilityChange_),a}var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(An.hidden?this.stopTracking():this.startTracking())},t.trackLive_=function(){var i=this.player_.seekable();if(!(!i||!i.length)){var a=Number(gt.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),l=this.player_.currentTime(),u=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(u=!1),u!==this.behindLiveEdge_&&(this.behindLiveEdge_=u,this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.toggleTracking()},t.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},t.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Uc),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},t.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},t.handleSeeked=function(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},t.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},t.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},t.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},t.seekableEnd=function(){for(var i=this.player_.seekable(),a=[],s=i?i.length:0;s--;)a.push(i.end(s));return a.length?a.sort()[a.length-1]:1/0},t.seekableStart=function(){for(var i=this.player_.seekable(),a=[],s=i?i.length:0;s--;)a.push(i.start(s));return a.length?a.sort()[0]:0},t.liveWindow=function(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){var i=this.seekableEnd();return this.lastSeekEnd_!==-1&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return typeof this.trackingInterval_=="number"},t.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},t.dispose=function(){this.off(An,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),n.prototype.dispose.call(this)},e}(vn);vn.registerComponent("LiveTracker",bGe);var m6=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var r=e.$$("source"),i=[],a="";if(!r.length)return!1;for(var s=0;s<r.length;s++){var o=r[s].src;o&&i.indexOf(o)===-1&&i.push(o)}return i.length?(i.length===1&&(a=i[0]),e.triggerSourceset(a),!0):!1},SGe=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=An.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var r=An.createDocumentFragment();t.childNodes.length;)r.appendChild(t.childNodes[0]);return this.innerText="",gt.Element.prototype.appendChild.call(this,r),this.innerHTML}}),Hse=function(e,t){for(var r={},i=0;i<e.length&&(r=Object.getOwnPropertyDescriptor(e[i],t),!(r&&r.set&&r.get));i++);return r.enumerable=!0,r.configurable=!0,r},xGe=function(e){return Hse([e.el(),gt.HTMLMediaElement.prototype,gt.Element.prototype,SGe],"innerHTML")},JG=function(e){var t=e.el();if(!t.resetSourceWatch_){var r={},i=xGe(e),a=function(o){return function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=o.apply(t,u);return m6(e),d}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){t[s]&&(r[s]=t[s],t[s]=a(r[s]))}),Object.defineProperty(t,"innerHTML",ua(i,{set:a(i.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(r).forEach(function(s){t[s]=r[s]}),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)}},wGe=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?pse(gt.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return gt.Element.prototype.setAttribute.call(this,"src",e),e}}),TGe=function(e){return Hse([e.el(),gt.HTMLMediaElement.prototype,wGe],"src")},CGe=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var r=TGe(e),i=t.setAttribute,a=t.load;Object.defineProperty(t,"src",ua(r,{set:function(o){var l=r.set.call(t,o);return e.triggerSourceset(t.src),l}})),t.setAttribute=function(s,o){var l=i.call(t,s,o);return/src/i.test(s)&&e.triggerSourceset(t.src),l},t.load=function(){var s=a.call(t);return m6(e)||(e.triggerSourceset(""),JG(e)),s},t.currentSrc?e.triggerSourceset(t.currentSrc):m6(e)||JG(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=a,t.setAttribute=i,Object.defineProperty(t,"src",r),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},i7=function(e,t,r,i){i===void 0&&(i=!0);var a=function(l){return Object.defineProperty(e,t,{value:l,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var l=r();return a(l),l}};return i&&(s.set=a),Object.defineProperty(e,t,s)},Gn=function(n){In(e,n);function e(r,i){var a;a=n.call(this,r,i)||this;var s=r.source,o=!1;if(a.featuresVideoFrameCallback=a.featuresVideoFrameCallback&&a.el_.tagName==="VIDEO",s&&(a.el_.currentSrc!==s.src||r.tag&&r.tag.initNetworkState_===3)?a.setSource(s):a.handleLateInit_(a.el_),r.enableSourceset&&a.setupSourcesetHandling_(),a.isScrubbing_=!1,a.el_.hasChildNodes()){for(var l=a.el_.childNodes,u=l.length,c=[];u--;){var d=l[u],f=d.nodeName.toLowerCase();f==="track"&&(a.featuresNativeTextTracks?(a.remoteTextTrackEls().addTrackElement_(d),a.remoteTextTracks().addTrack(d.track),a.textTracks().addTrack(d.track),!o&&!a.el_.hasAttribute("crossorigin")&&lI(d.src)&&(o=!0)):c.push(d))}for(var h=0;h<c.length;h++)a.el_.removeChild(c[h])}return a.proxyNativeTracks_(),a.featuresNativeTextTracks&&o&&Zr.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),a.restoreMetadataTracksInIOSNativePlayer_(),(q1||kF||Hae)&&r.nativeControlsForTouch===!0&&a.setControls(!0),a.proxyWebkitFullscreen_(),a.triggerReady(),a}var t=e.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,n.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){CGe(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){var i=this.textTracks(),a,s=function(){a=[];for(var u=0;u<i.length;u++){var c=i[u];c.kind==="metadata"&&a.push({track:c,storedMode:c.mode})}};s(),i.addEventListener("change",s),this.on("dispose",function(){return i.removeEventListener("change",s)});var o=function l(){for(var u=0;u<a.length;u++){var c=a[u];c.track.mode==="disabled"&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}i.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",s),i.removeEventListener("change",o),i.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",s),i.addEventListener("change",s),i.removeEventListener("change",o)})},t.overrideNative_=function(i,a){var s=this;if(a===this["featuresNative"+i+"Tracks"]){var o=i.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){var u=s.el()[o+"Tracks"];u.removeEventListener(l,s[o+"TracksListeners_"][l])}),this["featuresNative"+i+"Tracks"]=!a,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},t.overrideNativeAudioTracks=function(i){this.overrideNative_("Audio",i)},t.overrideNativeVideoTracks=function(i){this.overrideNative_("Video",i)},t.proxyNativeTracksForType_=function(i){var a=this,s=zu[i],o=this.el()[s.getterName],l=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!o||!o.addEventListener)){var u={change:function(f){var h={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(h),i==="text"&&a[Y1.remoteText.getterName]().trigger(h)},addtrack:function(f){l.addTrack(f.track)},removetrack:function(f){l.removeTrack(f.track)}},c=function(){for(var f=[],h=0;h<l.length;h++){for(var p=!1,m=0;m<o.length;m++)if(o[m]===l[h]){p=!0;break}p||f.push(l[h])}for(;f.length;)l.removeTrack(f.shift())};this[s.getterName+"Listeners_"]=u,Object.keys(u).forEach(function(d){var f=u[d];o.addEventListener(d,f),a.on("dispose",function(h){return o.removeEventListener(d,f)})}),this.on("loadstart",c),this.on("dispose",function(d){return a.off("loadstart",c)})}},t.proxyNativeTracks_=function(){var i=this;zu.names.forEach(function(a){i.proxyNativeTracksForType_(a)})},t.createEl=function(){var i=this.options_.tag;if(!i||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(i){var a=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(a,i),e.disposeMediaElement(i),i=a}else{i=An.createElement("video");var s=this.options_.tag&&yf(this.options_.tag),o=ua({},s);(!q1||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,Xae(i,Pa(o,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&j1(i,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],u=0;u<l.length;u++){var c=l[u],d=this.options_[c];typeof d<"u"&&(d?j1(i,c,c):rI(i,c),i[c]=d)}return i},t.handleLateInit_=function(i){if(!(i.networkState===0||i.networkState===3)){if(i.readyState===0){var a=!1,s=function(){a=!0};this.on("loadstart",s);var o=function(){a||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),a||this.trigger("loadstart")});return}var l=["loadstart"];l.push("loadedmetadata"),i.readyState>=2&&l.push("loadeddata"),i.readyState>=3&&l.push("canplay"),i.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(u){this.trigger(u)},this)})}},t.setScrubbing=function(i){this.isScrubbing_=i},t.scrubbing=function(){return this.isScrubbing_},t.setCurrentTime=function(i){try{this.isScrubbing_&&this.el_.fastSeek&&nI?this.el_.fastSeek(i):this.el_.currentTime=i}catch(a){Zr(a,"Video is not ready. (Video.js)")}},t.duration=function(){var i=this;if(this.el_.duration===1/0&&hh&&ph&&this.el_.currentTime===0){var a=function s(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",s))};return this.on("timeupdate",a),NaN}return this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var a=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){i.off("webkitbeginfullscreen",s),i.off("webkitendfullscreen",a)})}},t.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var i=gt.navigator&&gt.navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},t.enterFullScreen=function(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)md(this.el_.play()),this.setTimeout(function(){i.pause();try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},t.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},t.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},t.requestVideoFrameCallback=function(i){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(i):n.prototype.requestVideoFrameCallback.call(this,i)},t.cancelVideoFrameCallback=function(i){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(i):n.prototype.cancelVideoFrameCallback.call(this,i)},t.src=function(i){if(i===void 0)return this.el_.src;this.setSrc(i)},t.reset=function(){e.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(i){this.el_.controls=!!i},t.addTextTrack=function(i,a,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(i,a,s):n.prototype.addTextTrack.call(this,i,a,s)},t.createRemoteTextTrack=function(i){if(!this.featuresNativeTextTracks)return n.prototype.createRemoteTextTrack.call(this,i);var a=An.createElement("track");return i.kind&&(a.kind=i.kind),i.label&&(a.label=i.label),(i.language||i.srclang)&&(a.srclang=i.language||i.srclang),i.default&&(a.default=i.default),i.id&&(a.id=i.id),i.src&&(a.src=i.src),a},t.addRemoteTextTrack=function(i,a){var s=n.prototype.addRemoteTextTrack.call(this,i,a);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},t.removeRemoteTextTrack=function(i){if(n.prototype.removeRemoteTextTrack.call(this,i),this.featuresNativeTextTracks)for(var a=this.$$("track"),s=a.length;s--;)(i===a[s]||i===a[s].track)&&this.el().removeChild(a[s])},t.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var i={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),gt.performance&&typeof gt.performance.now=="function"?i.creationTime=gt.performance.now():gt.performance&&gt.performance.timing&&typeof gt.performance.timing.navigationStart=="number"&&(i.creationTime=gt.Date.now()-gt.performance.timing.navigationStart),i},e}(Qi);i7(Gn,"TEST_VID",function(){if(B_()){var n=An.createElement("video"),e=An.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n}});Gn.isSupported=function(){try{Gn.TEST_VID.volume=.5}catch{return!1}return!!(Gn.TEST_VID&&Gn.TEST_VID.canPlayType)};Gn.canPlayType=function(n){return Gn.TEST_VID.canPlayType(n)};Gn.canPlaySource=function(n,e){return Gn.canPlayType(n.type)};Gn.canControlVolume=function(){try{var n=Gn.TEST_VID.volume;Gn.TEST_VID.volume=n/2+.1;var e=n!==Gn.TEST_VID.volume;return e&&Ko?(gt.setTimeout(function(){Gn&&Gn.prototype&&(Gn.prototype.featuresVolumeControl=n!==Gn.TEST_VID.volume)}),!1):e}catch{return!1}};Gn.canMuteVolume=function(){try{var n=Gn.TEST_VID.muted;return Gn.TEST_VID.muted=!n,Gn.TEST_VID.muted?j1(Gn.TEST_VID,"muted","muted"):rI(Gn.TEST_VID,"muted","muted"),n!==Gn.TEST_VID.muted}catch{return!1}};Gn.canControlPlaybackRate=function(){if(hh&&ph&&$ae<58)return!1;try{var n=Gn.TEST_VID.playbackRate;return Gn.TEST_VID.playbackRate=n/2+.1,n!==Gn.TEST_VID.playbackRate}catch{return!1}};Gn.canOverrideAttributes=function(){try{var n=function(){};Object.defineProperty(An.createElement("video"),"src",{get:n,set:n}),Object.defineProperty(An.createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(An.createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(An.createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0};Gn.supportsNativeTextTracks=function(){return nI||Ko&&ph};Gn.supportsNativeVideoTracks=function(){return!!(Gn.TEST_VID&&Gn.TEST_VID.videoTracks)};Gn.supportsNativeAudioTracks=function(){return!!(Gn.TEST_VID&&Gn.TEST_VID.audioTracks)};Gn.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(n){var e=n[0],t=n[1];i7(Gn.prototype,e,function(){return Gn[t]()},!0)});Gn.prototype.featuresVolumeControl=Gn.canControlVolume();Gn.prototype.movingMediaElementInDOM=!Ko;Gn.prototype.featuresFullscreenResize=!0;Gn.prototype.featuresProgressEvents=!0;Gn.prototype.featuresTimeupdateEvents=!0;Gn.prototype.featuresVideoFrameCallback=!!(Gn.TEST_VID&&Gn.TEST_VID.requestVideoFrameCallback);var VM;Gn.patchCanPlayType=function(){DF>=4&&!Vae&&!ph&&(VM=Gn.TEST_VID&&Gn.TEST_VID.constructor.prototype.canPlayType,Gn.TEST_VID.constructor.prototype.canPlayType=function(n){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return n&&e.test(n)?"maybe":VM.call(this,n)})};Gn.unpatchCanPlayType=function(){var n=Gn.TEST_VID.constructor.prototype.canPlayType;return VM&&(Gn.TEST_VID.constructor.prototype.canPlayType=VM),n};Gn.patchCanPlayType();Gn.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};Gn.resetMediaElement=function(n){if(n){for(var e=n.querySelectorAll("source"),t=e.length;t--;)n.removeChild(e[t]);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){Gn.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){Gn.prototype["set"+Ha(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){Gn.prototype[n]=function(){return this.el_[n]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){Gn.prototype["set"+Ha(n)]=function(e){this.el_[n]=e}});["pause","load","play"].forEach(function(n){Gn.prototype[n]=function(){return this.el_[n]()}});Qi.withSourceHandlers(Gn);Gn.nativeSourceHandler={};Gn.nativeSourceHandler.canPlayType=function(n){try{return Gn.TEST_VID.canPlayType(n)}catch{return""}};Gn.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return Gn.nativeSourceHandler.canPlayType(n.type);if(n.src){var t=zF(n.src);return Gn.nativeSourceHandler.canPlayType("video/"+t)}return""};Gn.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)};Gn.nativeSourceHandler.dispose=function(){};Gn.registerSourceHandler(Gn.nativeSourceHandler);Qi.registerTech("Html5",Gn);var Vse=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],EP={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},v6=["tiny","xsmall","small","medium","large","xlarge","huge"],yE={};v6.forEach(function(n){var e=n.charAt(0)==="x"?"x-"+n.substring(1):n;yE[n]="vjs-layout-"+e});var AGe={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Ja=function(n){In(e,n);function e(r,i,a){var s;if(r.id=r.id||i.id||"vjs_video_"+mh(),i=Pa(e.getTagSettings(r),i),i.initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if(typeof r.closest=="function"){var o=r.closest("[lang]");o&&o.getAttribute&&(i.language=o.getAttribute("lang"))}else for(var l=r;l&&l.nodeType===1;){if(yf(l).hasOwnProperty("lang")){i.language=l.getAttribute("lang");break}l=l.parentNode}if(s=n.call(this,null,i,a)||this,s.boundDocumentFullscreenChange_=function(f){return s.documentFullscreenChange_(f)},s.boundFullWindowOnEscKey_=function(f){return s.fullWindowOnEscKey(f)},s.boundUpdateStyleEl_=function(f){return s.updateStyleEl_(f)},s.boundApplyInitTime_=function(f){return s.applyInitTime_(f)},s.boundUpdateCurrentBreakpoint_=function(f){return s.updateCurrentBreakpoint_(f)},s.boundHandleTechClick_=function(f){return s.handleTechClick_(f)},s.boundHandleTechDoubleClick_=function(f){return s.handleTechDoubleClick_(f)},s.boundHandleTechTouchStart_=function(f){return s.handleTechTouchStart_(f)},s.boundHandleTechTouchMove_=function(f){return s.handleTechTouchMove_(f)},s.boundHandleTechTouchEnd_=function(f){return s.handleTechTouchEnd_(f)},s.boundHandleTechTap_=function(f){return s.handleTechTap_(f)},s.isFullscreen_=!1,s.log=Fae(s.id_),s.fsApi_=BM,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=r,s.tagAttributes=r&&yf(r),s.language(s.options_.language),i.languages){var u={};Object.getOwnPropertyNames(i.languages).forEach(function(f){u[f.toLowerCase()]=i.languages[f]}),s.languages_=u}else s.languages_=e.prototype.options_.languages;s.resetCache_(),s.poster_=i.poster||"",s.controls_=!!i.controls,r.controls=!1,r.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],r.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach(function(f){if(typeof s[f]!="function")throw new Error('plugin "'+f+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),BF(Fr(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(au(An,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var c=ua(s.options_);i.plugins&&Object.keys(i.plugins).forEach(function(f){s[f](i.plugins[f])}),i.debug&&s.debug(!0),s.options_.playerOptions=c,s.middleware_=[],s.playbackRates(i.playbackRates),s.initChildren(),s.isAudio(r.nodeName.toLowerCase()==="audio"),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),q1&&s.addClass("vjs-touch-enabled"),Ko||s.addClass("vjs-workinghover"),e.players[s.id_]=Fr(s);var d=Oae.split(".")[0];return s.addClass("vjs-v"+d),s.userActive(!0),s.reportUserActivity(),s.one("play",function(f){return s.listenForUserActivity_(f)}),s.on("stageclick",function(f){return s.handleStageClick_(f)}),s.on("keydown",function(f){return s.handleKeyDown(f)}),s.on("languagechange",function(f){return s.handleLanguagechange(f)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)}),s}var t=e.prototype;return t.dispose=function(){var i=this;this.trigger("dispose"),this.off("dispose"),wo(An,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),wo(An,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),q$e(this),Fo.names.forEach(function(a){var s=Fo[a],o=i[s.getterName]();o&&o.off&&o.off()}),n.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},t.createEl=function(){var i=this.tag,a,s=this.playerElIngest_=i.parentNode&&i.parentNode.hasAttribute&&i.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";s?a=this.el_=i.parentNode:o||(a=this.el_=n.prototype.createEl.call(this,"div"));var l=yf(i);if(o){for(a=this.el_=i,i=this.tag=An.createElement("video");a.children.length;)i.appendChild(a.firstChild);K0(a,"video-js")||Nf(a,"video-js"),a.appendChild(i),s=this.playerElIngest_=a,Object.keys(a).forEach(function(p){try{i[p]=a[p]}catch{}})}if(i.setAttribute("tabindex","-1"),l.tabindex="-1",(kw||ph&&Gae)&&(i.setAttribute("role","application"),l.role="application"),i.removeAttribute("width"),i.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(p){o&&p==="class"||a.setAttribute(p,l[p]),o&&i.setAttribute(p,l[p])}),i.playerId=i.id,i.id+="_html5_api",i.className="vjs-tech",i.player=a.player=this,this.addClass("vjs-paused"),gt.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=ase("vjs-styles-dimensions");var u=qp(".vjs-styles-defaults"),c=qp("head");c.insertBefore(this.styleEl_,u?u.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=i.getElementsByTagName("a"),f=0;f<d.length;f++){var h=d.item(f);Nf(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return i.initNetworkState_=i.networkState,i.parentNode&&!s&&i.parentNode.insertBefore(a,i),l6(i,a),this.children_.unshift(i),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a},t.crossOrigin=function(i){if(!i)return this.techGet_("crossOrigin");if(i!=="anonymous"&&i!=="use-credentials"){Zr.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"');return}this.techCall_("setCrossOrigin",i)},t.width=function(i){return this.dimension("width",i)},t.height=function(i){return this.dimension("height",i)},t.dimension=function(i,a){var s=i+"_";if(a===void 0)return this[s]||0;if(a===""||a==="auto"){this[s]=void 0,this.updateStyleEl_();return}var o=parseFloat(a);if(isNaN(o)){Zr.error('Improper value "'+a+'" supplied for for '+i);return}this[s]=o,this.updateStyleEl_()},t.fluid=function(i){var a=this;if(i===void 0)return!!this.fluid_;this.fluid_=!!i,Bf(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),g$e(this,function(){a.on(["playerreset","resize"],a.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(i){if(i===void 0)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(i){if(i===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){if(gt.VIDEOJS_NO_DYNAMIC_STYLE===!0){var i=typeof this.width_=="number"?this.width_:this.options_.width,a=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(i>=0&&(s.width=i),a>=0&&(s.height=a));return}var o,l,u,c;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?u=this.aspectRatio_:this.videoWidth()>0?u=this.videoWidth()+":"+this.videoHeight():u="16:9";var d=u.split(":"),f=d[1]/d[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/f:o=this.videoWidth()||300,this.height_!==void 0?l=this.height_:l=o*f,/^[^a-zA-Z]/.test(this.id())?c="dimensions-"+this.id():c=this.id()+"-dimensions",this.addClass(c),sse(this.styleEl_,`
      .`+c+` {
        width: `+o+`px;
        height: `+l+`px;
      }

      .`+c+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+f*100+`%;
      }
    `)},t.loadTech_=function(i,a){var s=this;this.tech_&&this.unloadTech_();var o=Ha(i),l=i.charAt(0).toLowerCase()+i.slice(1);o!=="Html5"&&this.tag&&(Qi.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var u=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(u=!1);var c={source:a,autoplay:u,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Fo.names.forEach(function(f){var h=Fo[f];c[h.getterName]=s[h.privateName]}),Pa(c,this.options_[o]),Pa(c,this.options_[l]),Pa(c,this.options_[i.toLowerCase()]),this.tag&&(c.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime);var d=Qi.getTech(i);if(!d)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new d(c),this.tech_.ready(ca(this,this.handleTechReady_),!0),LG.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Vse.forEach(function(f){s.on(s.tech_,f,function(h){return s["handleTech"+Ha(f)+"_"](h)})}),Object.keys(EP).forEach(function(f){s.on(s.tech_,f,function(h){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+EP[f]+"_"].bind(s),event:h});return}s["handleTech"+EP[f]+"_"](h)})}),this.on(this.tech_,"loadstart",function(f){return s.handleTechLoadStart_(f)}),this.on(this.tech_,"sourceset",function(f){return s.handleTechSourceset_(f)}),this.on(this.tech_,"waiting",function(f){return s.handleTechWaiting_(f)}),this.on(this.tech_,"ended",function(f){return s.handleTechEnded_(f)}),this.on(this.tech_,"seeking",function(f){return s.handleTechSeeking_(f)}),this.on(this.tech_,"play",function(f){return s.handleTechPlay_(f)}),this.on(this.tech_,"firstplay",function(f){return s.handleTechFirstPlay_(f)}),this.on(this.tech_,"pause",function(f){return s.handleTechPause_(f)}),this.on(this.tech_,"durationchange",function(f){return s.handleTechDurationChange_(f)}),this.on(this.tech_,"fullscreenchange",function(f,h){return s.handleTechFullscreenChange_(f,h)}),this.on(this.tech_,"fullscreenerror",function(f,h){return s.handleTechFullscreenError_(f,h)}),this.on(this.tech_,"enterpictureinpicture",function(f){return s.handleTechEnterPictureInPicture_(f)}),this.on(this.tech_,"leavepictureinpicture",function(f){return s.handleTechLeavePictureInPicture_(f)}),this.on(this.tech_,"error",function(f){return s.handleTechError_(f)}),this.on(this.tech_,"posterchange",function(f){return s.handleTechPosterChange_(f)}),this.on(this.tech_,"textdata",function(f){return s.handleTechTextData_(f)}),this.on(this.tech_,"ratechange",function(f){return s.handleTechRateChange_(f)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&l6(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var i=this;Fo.names.forEach(function(a){var s=Fo[a];i[s.privateName]=i[s.getterName]()}),this.textTracksJson_=LG.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(i){return i===void 0&&Zr.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},t.manualAutoplay_=function(i){var a=this;if(!(!this.tech_||typeof i!="string")){var s=function(){var u=a.muted();a.muted(!0);var c=function(){a.muted(u)};a.playTerminatedQueue_.push(c);var d=a.play();if(rx(d))return d.catch(function(f){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(f||""))})},o;if(i==="any"&&!this.muted()?(o=this.play(),rx(o)&&(o=o.catch(s))):i==="muted"&&!this.muted()?o=s():o=this.play(),!!rx(o))return o.then(function(){a.trigger({type:"autoplay-success",autoplay:i})}).catch(function(){a.trigger({type:"autoplay-failure",autoplay:i})})}},t.updateSourceCaches_=function(i){i===void 0&&(i="");var a=i,s="";typeof a!="string"&&(a=i.src,s=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!s&&(s=X$e(this,a)),this.cache_.source=ua({},i,{src:a,type:s});for(var o=this.cache_.sources.filter(function(h){return h.src&&h.src===a}),l=[],u=this.$$("source"),c=[],d=0;d<u.length;d++){var f=yf(u[d]);l.push(f),f.src&&f.src===a&&c.push(f.src)}c.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a},t.handleTechSourceset_=function(i){var a=this;if(!this.changingSrc_){var s=function(c){return a.updateSourceCaches_(c)},o=this.currentSource().src,l=i.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(s=function(){}),s(l),i.src||this.tech_.any(["sourceset","loadstart"],function(u){if(u.type!=="sourceset"){var c=a.techGet("currentSrc");a.lastSource_.tech=c,a.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},t.hasStarted=function(i){if(i===void 0)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(i){return i.callback(i.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var a=this.currentTime(),s=function o(){a!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",o))};this.on("timeupdate",s)},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(Zr.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(i){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,i):this.paused()?md(this.play()):this.pause())},t.handleTechDoubleClick_=function(i){if(this.controls_){var a=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(i.target)});a||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(i){i.cancelable&&i.preventDefault()},t.handleStageClick_=function(){this.reportUserActivity()},t.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.documentFullscreenChange_=function(i){var a=i.target.player;if(!(a&&a!==this)){var s=this.el(),o=An[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},t.handleTechFullscreenChange_=function(i,a){var s=this;a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))},t.handleTechFullscreenError_=function(i,a){this.trigger("fullscreenerror",a)},t.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},t.handleTechEnterPictureInPicture_=function(i){this.isInPictureInPicture(!0)},t.handleTechLeavePictureInPicture_=function(i){this.isInPictureInPicture(!1)},t.handleTechError_=function(){var i=this.tech_.error();this.error(i)},t.handleTechTextData_=function(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},t.getCache=function(){return this.cache_},t.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},t.techCall_=function(i,a){this.ready(function(){if(i in G$e)return V$e(this.middleware_,this.tech_,i,a);if(i in zG)return UG(this.middleware_,this.tech_,i,a);try{this.tech_&&this.tech_[i](a)}catch(s){throw Zr(s),s}},!0)},t.techGet_=function(i){if(!(!this.tech_||!this.tech_.isReady_)){if(i in $$e)return H$e(this.middleware_,this.tech_,i);if(i in zG)return UG(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(a){throw this.tech_[i]===void 0?(Zr("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",a),a):a.name==="TypeError"?(Zr("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",a),this.tech_.isReady_=!1,a):(Zr(a),a)}}},t.play=function(){var i=this,a=this.options_.Promise||gt.Promise;return a?new a(function(s){i.play_(s)}):this.play_()},t.play_=function(i){var a=this;i===void 0&&(i=md),this.playCallbacks_.push(i);var s=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),o=!!(nI||Ko);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=function(c){a.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&o&&this.load();return}var l=this.techGet_("play"),u=o&&this.hasClass("vjs-ended");u&&this.resetProgressBar_(),l===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(l)},t.runPlayTerminatedQueue_=function(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach(function(a){a()})},t.runPlayCallbacks_=function(i){var a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(s){s(i)})},t.pause=function(){this.techCall_("pause")},t.paused=function(){return this.techGet_("paused")!==!1},t.played=function(){return this.techGet_("played")||X0(0,0)},t.scrubbing=function(i){if(typeof i>"u")return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(i){if(typeof i<"u"){if(i<0&&(i=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",i),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},t.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},t.duration=function(i){if(i===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;i=parseFloat(i),i<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var i=this.techGet_("buffered");return(!i||!i.length)&&(i=X0(0,0)),i},t.bufferedPercent=function(){return fse(this.buffered(),this.duration())},t.bufferedEnd=function(){var i=this.buffered(),a=this.duration(),s=i.end(i.length-1);return s>a&&(s=a),s},t.volume=function(i){var a;if(i!==void 0){a=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=a,this.techCall_("setVolume",a),a>0&&this.lastVolume_(a);return}return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a},t.muted=function(i){if(i!==void 0){this.techCall_("setMuted",i);return}return this.techGet_("muted")||!1},t.defaultMuted=function(i){return i!==void 0?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(i){if(i!==void 0&&i!==0){this.cache_.lastVolume=i;return}return this.cache_.lastVolume},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(i){if(i!==void 0){var a=this.isFullscreen_;this.isFullscreen_=!!i,this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},t.requestFullscreen=function(i){var a=this.options_.Promise||gt.Promise;if(a){var s=this;return new a(function(o,l){function u(){s.off("fullscreenerror",d),s.off("fullscreenchange",c)}function c(){u(),o()}function d(h,p){u(),l(p)}s.one("fullscreenchange",c),s.one("fullscreenerror",d);var f=s.requestFullscreenHelper_(i);f&&(f.then(u,u),f.then(o,l))})}return this.requestFullscreenHelper_()},t.requestFullscreenHelper_=function(i){var a=this,s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},i!==void 0&&(s=i)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](s);return o&&o.then(function(){return a.isFullscreen(!0)},function(){return a.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},t.exitFullscreen=function(){var i=this.options_.Promise||gt.Promise;if(i){var a=this;return new i(function(s,o){function l(){a.off("fullscreenerror",c),a.off("fullscreenchange",u)}function u(){l(),s()}function c(f,h){l(),o(h)}a.one("fullscreenchange",u),a.one("fullscreenerror",c);var d=a.exitFullscreenHelper_();d&&(d.then(l,l),d.then(s,o))})}return this.exitFullscreenHelper_()},t.exitFullscreenHelper_=function(){var i=this;if(this.fsApi_.requestFullscreen){var a=An[this.fsApi_.exitFullscreen]();return a&&md(a.then(function(){return i.isFullscreen(!1)})),a}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},t.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=An.documentElement.style.overflow,au(An,"keydown",this.boundFullWindowOnEscKey_),An.documentElement.style.overflow="hidden",Nf(An.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(i){Hr.isEventKey(i,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},t.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,wo(An,"keydown",this.boundFullWindowOnEscKey_),An.documentElement.style.overflow=this.docOrigOverflow,Lw(An.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.disablePictureInPicture=function(i){if(i===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},t.isInPictureInPicture=function(i){if(i!==void 0){this.isInPictureInPicture_=!!i,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},t.requestPictureInPicture=function(){if("pictureInPictureEnabled"in An&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},t.exitPictureInPicture=function(){if("pictureInPictureEnabled"in An)return An.exitPictureInPicture()},t.handleKeyDown=function(i){var a=this.options_.userActions;if(!(!a||!a.hotkeys)){var s=function(l){var u=l.tagName.toLowerCase();if(l.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if(u==="input")return c.indexOf(l.type)===-1;var d=["textarea"];return d.indexOf(u)!==-1};s(this.el_.ownerDocument.activeElement)||(typeof a.hotkeys=="function"?a.hotkeys.call(this,i):this.handleHotkeys(i))}},t.handleHotkeys=function(i){var a=this.options_.userActions?this.options_.userActions.hotkeys:{},s=a.fullscreenKey,o=s===void 0?function(m){return Hr.isEventKey(m,"f")}:s,l=a.muteKey,u=l===void 0?function(m){return Hr.isEventKey(m,"m")}:l,c=a.playPauseKey,d=c===void 0?function(m){return Hr.isEventKey(m,"k")||Hr.isEventKey(m,"Space")}:c;if(o.call(this,i)){i.preventDefault(),i.stopPropagation();var f=vn.getComponent("FullscreenToggle");An[this.fsApi_.fullscreenEnabled]!==!1&&f.prototype.handleClick.call(this,i)}else if(u.call(this,i)){i.preventDefault(),i.stopPropagation();var h=vn.getComponent("MuteToggle");h.prototype.handleClick.call(this,i)}else if(d.call(this,i)){i.preventDefault(),i.stopPropagation();var p=vn.getComponent("PlayToggle");p.prototype.handleClick.call(this,i)}},t.canPlayType=function(i){for(var a,s=0,o=this.options_.techOrder;s<o.length;s++){var l=o[s],u=Qi.getTech(l);if(u||(u=vn.getComponent(l)),!u){Zr.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.');continue}if(u.isSupported()&&(a=u.canPlayType(i),a))return a}return""},t.selectSource=function(i){var a=this,s=this.options_.techOrder.map(function(d){return[d,Qi.getTech(d)]}).filter(function(d){var f=d[0],h=d[1];return h?h.isSupported():(Zr.error('The "'+f+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(f,h,p){var m;return f.some(function(v){return h.some(function(g){if(m=p(v,g),m)return!0})}),m},l,u=function(f){return function(h,p){return f(p,h)}},c=function(f,h){var p=f[0],m=f[1];if(m.canPlaySource(h,a.options_[p.toLowerCase()]))return{source:h,tech:p}};return this.options_.sourceOrder?l=o(i,s,u(c)):l=o(s,i,c),l||!1},t.handleSrc_=function(i,a){var s=this;if(typeof i>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=Y$e(i);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,a||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),U$e(this,o[0],function(c,d){s.middleware_=d,a||(s.cache_.sources=o),s.updateSourceCaches_(c);var f=s.src_(c);if(f){if(o.length>1)return s.handleSrc_(o.slice(1));s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),s.triggerReady();return}z$e(d,s.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){s.error(null),s.handleSrc_(o.slice(1),!0)},u=function(){s.off("error",l)};this.one("error",l),this.one("playing",u),this.resetRetryOnError_=function(){s.off("error",l),s.off("playing",u)}}},t.src=function(i){return this.handleSrc_(i,!1)},t.src_=function(i){var a=this,s=this.selectSource([i]);return s?b$e(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){a.changingSrc_=!1}),!1):!0},t.load=function(){this.techCall_("load")},t.reset=function(){var i=this,a=this.options_.Promise||gt.Promise;if(this.paused()||!a)this.doReset_();else{var s=this.play();md(s.then(function(){return i.doReset_()}))}},t.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Bf(this)&&this.trigger("playerreset")},t.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},t.resetProgressBar_=function(){this.currentTime(0);var i=this.controlBar||{},a=i.durationDisplay,s=i.remainingTimeDisplay;a&&a.updateContent(),s&&s.updateContent()},t.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},t.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},t.currentSources=function(){var i=this.currentSource(),a=[];return Object.keys(i).length!==0&&a.push(i),this.cache_.sources||a},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(i){if(i!==void 0){this.techCall_("setPreload",i),this.options_.preload=i;return}return this.techGet_("preload")},t.autoplay=function(i){if(i===void 0)return this.options_.autoplay||!1;var a;typeof i=="string"&&/(any|play|muted)/.test(i)||i===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_(typeof i=="string"?i:"play"),a=!1):i?this.options_.autoplay=!0:this.options_.autoplay=!1,a=typeof a>"u"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)},t.playsinline=function(i){return i!==void 0?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},t.loop=function(i){if(i!==void 0){this.techCall_("setLoop",i),this.options_.loop=i;return}return this.techGet_("loop")},t.poster=function(i){if(i===void 0)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.controls=function(i){if(i===void 0)return!!this.controls_;i=!!i,this.controls_!==i&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(i){if(i===void 0)return!!this.usingNativeControls_;i=!!i,this.usingNativeControls_!==i&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(i){var a=this;if(i===void 0)return this.error_||null;if(Wp("beforeerror").forEach(function(o){var l=o(a,i);if(!(Qf(l)&&!Array.isArray(l)||typeof l=="string"||typeof l=="number"||l===null)){a.log.error("please return a value that MediaError expects in beforeerror hooks");return}i=l}),this.options_.suppressNotSupportedError&&i&&i.code===4){var s=function(){this.error(i)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(i===null){this.error_=i,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new $o(i),this.addClass("vjs-error"),Zr.error("(CODE:"+this.error_.code+" "+$o.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Wp("error").forEach(function(o){return o(a,a.error_)})},t.reportUserActivity=function(i){this.userActivity_=!0},t.userActive=function(i){if(i===void 0)return this.userActive_;if(i=!!i,i!==this.userActive_){if(this.userActive_=i,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){var i,a,s,o=ca(this,this.reportUserActivity),l=function(p){(p.screenX!==a||p.screenY!==s)&&(a=p.screenX,s=p.screenY,o())},u=function(){o(),this.clearInterval(i),i=this.setInterval(o,250)},c=function(p){o(),this.clearInterval(i)};this.on("mousedown",u),this.on("mousemove",l),this.on("mouseup",c),this.on("mouseleave",c);var d=this.getChild("controlBar");d&&!Ko&&!hh&&(d.on("mouseenter",function(h){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),d.on("mouseleave",function(h){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var f;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(f);var h=this.options_.inactivityTimeout;h<=0||(f=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},h))}},250)},t.playbackRate=function(i){if(i!==void 0){this.techCall_("setPlaybackRate",i);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},t.defaultPlaybackRate=function(i){return i!==void 0?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(i){if(i!==void 0){this.isAudio_=!!i;return}return!!this.isAudio_},t.enableAudioOnlyUI_=function(){var i=this;this.addClass("vjs-audio-only-mode");var a=this.children(),s=this.getChild("ControlBar"),o=s&&s.currentHeight();a.forEach(function(l){l!==s&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),i.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},t.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(i){return i.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},t.audioOnlyMode=function(i){var a=this;if(typeof i!="boolean"||i===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=i;var s=this.options_.Promise||gt.Promise;if(s){if(i){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),s.all(o).then(function(){return a.enableAudioOnlyUI_()})}return s.resolve().then(function(){return a.disableAudioOnlyUI_()})}i?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},t.enablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.disablePosterModeUI_=function(){var i=this.tech_&&this.tech_;i.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.audioPosterMode=function(i){var a=this;if(typeof i!="boolean"||i===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=i;var s=this.options_.Promise||gt.Promise;if(s){if(i){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.disablePosterModeUI_()})}if(i){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},t.addTextTrack=function(i,a,s){if(this.tech_)return this.tech_.addTextTrack(i,a,s)},t.addRemoteTextTrack=function(i,a){if(this.tech_)return this.tech_.addRemoteTextTrack(i,a)},t.removeRemoteTextTrack=function(i){i===void 0&&(i={});var a=i,s=a.track;if(s||(s=i),this.tech_)return this.tech_.removeRemoteTextTrack(s)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(i){if(i===void 0)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),Bf(this)&&this.trigger("languagechange"))},t.languages=function(){return ua(e.prototype.options_.languages,this.languages_)},t.toJSON=function(){var i=ua(this.options_),a=i.tracks;i.tracks=[];for(var s=0;s<a.length;s++){var o=a[s];o=ua(o),o.player=void 0,i.tracks[s]=o}return i},t.createModal=function(i,a){var s=this;a=a||{},a.content=i||"";var o=new z_(this,a);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},t.updateCurrentBreakpoint_=function(){if(this.responsive())for(var i=this.currentBreakpoint(),a=this.currentWidth(),s=0;s<v6.length;s++){var o=v6[s],l=this.breakpoints_[o];if(a<=l){if(i===o)return;i&&this.removeClass(yE[i]),this.addClass(yE[o]),this.breakpoint_=o;break}}},t.removeCurrentBreakpoint_=function(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},t.breakpoints=function(i){return i===void 0?Pa(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Pa({},AGe,i),this.updateCurrentBreakpoint_(),Pa(this.breakpoints_))},t.responsive=function(i){if(i===void 0)return this.responsive_;i=!!i;var a=this.responsive_;if(i!==a)return this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return yE[this.breakpoint_]||""},t.loadMedia=function(i,a){var s=this;if(!(!i||typeof i!="object")){this.reset(),this.cache_.media=ua(i);var o=this.cache_.media,l=o.artwork,u=o.poster,c=o.src,d=o.textTracks;!l&&u&&(this.cache_.media.artwork=[{src:u,type:zM(u)}]),c&&this.src(c),u&&this.poster(u),Array.isArray(d)&&d.forEach(function(f){return s.addRemoteTextTrack(f,!1)}),this.ready(a)}},t.getMedia=function(){if(!this.cache_.media){var i=this.poster(),a=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}}),o={src:a,textTracks:s};return i&&(o.poster=i,o.artwork=[{src:o.poster,type:zM(o.poster)}]),o}return ua(this.cache_.media)},e.getTagSettings=function(i){var a={sources:[],tracks:[]},s=yf(i),o=s["data-setup"];if(K0(i,"vjs-fill")&&(s.fill=!0),K0(i,"vjs-fluid")&&(s.fluid=!0),o!==null){var l=aze(o||"{}"),u=l[0],c=l[1];u&&Zr.error(u),Pa(s,c)}if(Pa(a,s),i.hasChildNodes())for(var d=i.childNodes,f=0,h=d.length;f<h;f++){var p=d[f],m=p.nodeName.toLowerCase();m==="source"?a.sources.push(yf(p)):m==="track"&&a.tracks.push(yf(p))}return a},t.flexNotSupported_=function(){var i=An.createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},t.debug=function(i){if(i===void 0)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t.playbackRates=function(i){if(i===void 0)return this.cache_.playbackRates;Array.isArray(i)&&i.every(function(a){return typeof a=="number"})&&(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))},e}(vn);Fo.names.forEach(function(n){var e=Fo[n];Ja.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Ja.prototype.crossorigin=Ja.prototype.crossOrigin;Ja.players={};var zb=gt.navigator;Ja.prototype.options_={techOrder:Qi.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:zb&&(zb.languages&&zb.languages[0]||zb.userLanguage||zb.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(n){Ja.prototype[n]=function(){return this.techGet_(n)}});Vse.forEach(function(n){Ja.prototype["handleTech"+Ha(n)+"_"]=function(){return this.trigger(n)}});vn.registerComponent("Player",Ja);var $M="plugin",s1="activePlugins_",Ly={},GM=function(e){return Ly.hasOwnProperty(e)},_E=function(e){return GM(e)?Ly[e]:void 0},$se=function(e,t){e[s1]=e[s1]||{},e[s1][t]=!0},WM=function(e,t,r){var i=(r?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},EGe=function(e,t){var r=function(){WM(this,{name:e,plugin:t,instance:null},!0);var a=t.apply(this,arguments);return $se(this,e),WM(this,{name:e,plugin:t,instance:a}),a};return Object.keys(t).forEach(function(i){r[i]=t[i]}),r},eW=function(e,t){return t.prototype.name=e,function(){WM(this,{name:e,plugin:t,instance:null},!0);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=Hie(t,[this].concat(i));return this[e]=function(){return s},WM(this,s.getEventHash()),s}},Od=function(){function n(t){if(this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),BF(this),delete this.trigger,dse(this,this.constructor.defaultState),$se(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var e=n.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(r){return r===void 0&&(r={}),r.name=this.name,r.plugin=this.constructor,r.instance=this,r},e.trigger=function(r,i){return i===void 0&&(i={}),U_(this.eventBusEl_,r,this.getEventHash(i))},e.handleStateChanged=function(r){},e.dispose=function(){var r=this.name,i=this.player;this.trigger("dispose"),this.off(),i.off("dispose",this.dispose),i[s1][r]=!1,this.player=this.state=null,i[r]=eW(r,Ly[r])},n.isBasic=function(r){var i=typeof r=="string"?_E(r):r;return typeof i=="function"&&!n.prototype.isPrototypeOf(i.prototype)},n.registerPlugin=function(r,i){if(typeof r!="string")throw new Error('Illegal plugin name, "'+r+'", must be a string, was '+typeof r+".");if(GM(r))Zr.warn('A plugin named "'+r+'" already exists. You may want to avoid re-registering plugins!');else if(Ja.prototype.hasOwnProperty(r))throw new Error('Illegal plugin name, "'+r+'", cannot share a name with an existing player method!');if(typeof i!="function")throw new Error('Illegal plugin for "'+r+'", must be a function, was '+typeof i+".");return Ly[r]=i,r!==$M&&(n.isBasic(i)?Ja.prototype[r]=EGe(r,i):Ja.prototype[r]=eW(r,i)),i},n.deregisterPlugin=function(r){if(r===$M)throw new Error("Cannot de-register base plugin.");GM(r)&&(delete Ly[r],delete Ja.prototype[r])},n.getPlugins=function(r){r===void 0&&(r=Object.keys(Ly));var i;return r.forEach(function(a){var s=_E(a);s&&(i=i||{},i[a]=s)}),i},n.getPluginVersion=function(r){var i=_E(r);return i&&i.VERSION||""},n}();Od.getPlugin=_E;Od.BASE_PLUGIN_NAME=$M;Od.registerPlugin($M,Od);Ja.prototype.usingPlugin=function(n){return!!this[s1]&&this[s1][n]===!0};Ja.prototype.hasPlugin=function(n){return!!GM(n)};var tW=!1,MGe=function(e,t){t===void 0&&(t={}),tW||(Zr.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),tW=!0);var r=function(){e.apply(this,arguments)},i={};typeof t=="object"?(t.constructor!==Object.prototype.constructor&&(r=t.constructor),i=t):typeof t=="function"&&(r=t),jze(r,e),e&&(r.super_=e);for(var a in i)i.hasOwnProperty(a)&&(r.prototype[a]=i[a]);return r},Gse=function(e){return e.indexOf("#")===0?e.slice(1):e};function Lt(n,e,t){var r=Lt.getPlayer(n);if(r)return e&&Zr.warn('Player "'+n+'" is already initialised. Options will not be applied.'),t&&r.ready(t),r;var i=typeof n=="string"?qp("#"+Gse(n)):n;if(!F_(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i))&&Zr.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Wp("beforesetup").forEach(function(s){var o=s(i,ua(e));if(!Qf(o)||Array.isArray(o)){Zr.error("please return an object in beforesetup hooks");return}e=ua(e,o)});var a=vn.getComponent("Player");return r=new a(i,e,t),Wp("setup").forEach(function(s){return s(r)}),r}Lt.hooks_=Ef;Lt.hooks=Wp;Lt.hook=t$e;Lt.hookOnce=n$e;Lt.removeHook=Nae;if(gt.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&B_()){var jT=qp(".vjs-styles-defaults");if(!jT){jT=ase("vjs-styles-defaults");var MP=qp("head");MP&&MP.insertBefore(jT,MP.firstChild),sse(jT,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}c6(1,Lt);Lt.VERSION=Oae;Lt.options=Ja.prototype.options_;Lt.getPlayers=function(){return Ja.players};Lt.getPlayer=function(n){var e=Ja.players,t;if(typeof n=="string"){var r=Gse(n),i=e[r];if(i)return i;t=qp("#"+r)}else t=n;if(F_(t)){var a=t,s=a.player,o=a.playerId;if(s||e[o])return s||e[o]}};Lt.getAllPlayers=function(){return Object.keys(Ja.players).map(function(n){return Ja.players[n]}).filter(Boolean)};Lt.players=Ja.players;Lt.getComponent=vn.getComponent;Lt.registerComponent=function(n,e){Qi.isTech(e)&&Zr.warn("The "+n+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),vn.registerComponent.call(vn,n,e)};Lt.getTech=Qi.getTech;Lt.registerTech=Qi.registerTech;Lt.use=F$e;Object.defineProperty(Lt,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(Lt.middleware,"TERMINATOR",{value:UM,writeable:!1,enumerable:!0});Lt.browser=l$e;Lt.TOUCH_ENABLED=q1;Lt.extend=MGe;Lt.mergeOptions=ua;Lt.bind=ca;Lt.registerPlugin=Od.registerPlugin;Lt.deregisterPlugin=Od.deregisterPlugin;Lt.plugin=function(n,e){return Zr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Od.registerPlugin(n,e)};Lt.getPlugins=Od.getPlugins;Lt.getPlugin=Od.getPlugin;Lt.getPluginVersion=Od.getPluginVersion;Lt.addLanguage=function(n,e){var t;return n=(""+n).toLowerCase(),Lt.options.languages=ua(Lt.options.languages,(t={},t[n]=e,t)),Lt.options.languages[n]};Lt.log=Zr;Lt.createLogger=Fae;Lt.createTimeRange=Lt.createTimeRanges=X0;Lt.formatTime=Q1;Lt.setFormatTime=rGe;Lt.resetFormatTime=iGe;Lt.parseUrl=UF;Lt.isCrossOrigin=lI;Lt.EventTarget=Rs;Lt.on=au;Lt.one=sI;Lt.off=wo;Lt.trigger=U_;Lt.xhr=Nie;Lt.TextTrack=Ow;Lt.AudioTrack=mse;Lt.VideoTrack=vse;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(n){Lt[n]=function(){return Zr.warn("videojs."+n+"() is deprecated; use videojs.dom."+n+"() instead"),rse[n].apply(null,arguments)}});Lt.computedStyle=b2;Lt.dom=rse;Lt.url=L$e;Lt.defineLazyProperty=i7;Lt.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});/*! @name @videojs/http-streaming @version 2.16.3 @license Apache-2.0 */var wc=K4,qM=function(e,t,r){return e&&r&&r.responseURL&&t!==r.responseURL?r.responseURL:t},Gc=function(e){return Lt.log.debug?Lt.log.debug.bind(Lt,"VHS:",e+" >"):function(){}},jp=1/30,vd=jp*3,Wse=function(e,t){var r=[],i;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&r.push([e.start(i),e.end(i)]);return Lt.createTimeRanges(r)},Oy=function(e,t){return Wse(e,function(r,i){return r-vd<=t&&i+vd>=t})},KT=function(e,t){return Wse(e,function(r){return r-jp>=t})},IGe=function(e){if(e.length<2)return Lt.createTimeRanges();for(var t=[],r=1;r<e.length;r++){var i=e.end(r-1),a=e.start(r);t.push([i,a])}return Lt.createTimeRanges(t)},DGe=function(e,t){var r=null,i=null,a=0,s=[],o=[];if(!e||!e.length||!t||!t.length)return Lt.createTimeRange();for(var l=e.length;l--;)s.push({time:e.start(l),type:"start"}),s.push({time:e.end(l),type:"end"});for(l=t.length;l--;)s.push({time:t.start(l),type:"start"}),s.push({time:t.end(l),type:"end"});for(s.sort(function(u,c){return u.time-c.time}),l=0;l<s.length;l++)s[l].type==="start"?(a++,a===2&&(r=s[l].time)):s[l].type==="end"&&(a--,a===1&&(i=s[l].time)),r!==null&&i!==null&&(o.push([r,i]),r=null,i=null);return Lt.createTimeRanges(o)},qse=function(e){var t=[];if(!e||!e.length)return"";for(var r=0;r<e.length;r++)t.push(e.start(r)+" => "+e.end(r));return t.join(", ")},PGe=function(e,t,r){r===void 0&&(r=1);var i=e.length?e.end(e.length-1):0;return(i-t)/r},D0=function(e){for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t},RGe=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e.start(r)!==t.start(r)||e.end(r)!==t.end(r))return!0;return!1},nW=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},a7=function(e,t){var r=0;if(!e||!e.length)return r;for(var i=0;i<e.length;i++){var a=e.start(i),s=e.end(i);if(!(t>s)){if(t>a&&t<=s){r+=s-t;continue}r+=s-a}}return r},rW=Lt.createTimeRange,s7=function(e,t){if(!t.preload)return t.duration;var r=0;return(t.parts||[]).forEach(function(i){r+=i.duration}),(t.preloadHints||[]).forEach(function(i){i.type==="PART"&&(r+=e.partTargetDuration)}),r},g6=function(e){return(e.segments||[]).reduce(function(t,r,i){return r.parts?r.parts.forEach(function(a,s){t.push({duration:a.duration,segmentIndex:i,partIndex:s,part:a,segment:r})}):t.push({duration:r.duration,segmentIndex:i,partIndex:null,segment:r,part:null}),t},[])},jse=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},Kse=function(e){var t=e.preloadSegment;if(t){var r=t.parts,i=t.preloadHints,a=(i||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return a+=r&&r.length?r.length:0,a}},Xse=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var r=jse(t).length>0;return r&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:r&&t.partTargetDuration?t.partTargetDuration*3:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?t.targetDuration*3:0},kGe=function(e,t){var r=0,i=t-e.mediaSequence,a=e.segments[i];if(a){if(typeof a.start<"u")return{result:a.start,precise:!0};if(typeof a.end<"u")return{result:a.end-a.duration,precise:!0}}for(;i--;){if(a=e.segments[i],typeof a.end<"u")return{result:r+a.end,precise:!0};if(r+=s7(e,a),typeof a.start<"u")return{result:r+a.start,precise:!0}}return{result:r,precise:!1}},LGe=function(e,t){for(var r=0,i,a=t-e.mediaSequence;a<e.segments.length;a++){if(i=e.segments[a],typeof i.start<"u")return{result:i.start-r,precise:!0};if(r+=s7(e,i),typeof i.end<"u")return{result:i.end-r,precise:!0}}return{result:-1,precise:!1}},Yse=function(e,t,r){if(typeof t>"u"&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var i=kGe(e,t);if(i.precise)return i.result;var a=LGe(e,t);return a.precise?a.result:i.result+r},Qse=function(e,t,r){if(!e)return 0;if(typeof r!="number"&&(r=0),typeof t>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return gt.Infinity}return Yse(e,t,r)},ix=function(e){var t=e.defaultDuration,r=e.durationList,i=e.startIndex,a=e.endIndex,s=0;if(i>a){var o=[a,i];i=o[0],a=o[1]}if(i<0){for(var l=i;l<Math.min(0,a);l++)s+=t;i=0}for(var u=i;u<a;u++)s+=r[u].duration;return s},Zse=function(e,t,r,i){if(!e||!e.segments)return null;if(e.endList)return Qse(e);if(t===null)return null;t=t||0;var a=Yse(e,e.mediaSequence+e.segments.length,t);return r&&(i=typeof i=="number"?i:Xse(null,e),a-=i),Math.max(0,a)},OGe=function(e,t,r){var i=!0,a=t||0,s=Zse(e,t,i,r);return s===null?rW():rW(a,s)},NGe=function(e){for(var t=e.playlist,r=e.currentTime,i=e.startingSegmentIndex,a=e.startingPartIndex,s=e.startTime,o=e.experimentalExactManifestTimings,l=r-s,u=g6(t),c=0,d=0;d<u.length;d++){var f=u[d];if(i===f.segmentIndex&&!(typeof a=="number"&&typeof f.partIndex=="number"&&a!==f.partIndex)){c=d;break}}if(l<0){if(c>0)for(var h=c-1;h>=0;h--){var p=u[h];if(l+=p.duration,o){if(l<0)continue}else if(l+jp<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:s-ix({defaultDuration:t.targetDuration,durationList:u,startIndex:c,endIndex:h})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:r}}if(c<0){for(var m=c;m<0;m++)if(l-=t.targetDuration,l<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:r};c=0}for(var v=c;v<u.length;v++){var g=u[v];if(l-=g.duration,o){if(l>0)continue}else if(l-jp>=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:s+ix({defaultDuration:t.targetDuration,durationList:u,startIndex:c,endIndex:v})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:r}},Jse=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},o7=function(e){return e.excludeUntil&&e.excludeUntil===1/0},fI=function(e){var t=Jse(e);return!e.disabled&&!t},BGe=function(e){return e.disabled},FGe=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},eoe=function(e,t){return t.attributes&&t.attributes[e]},UGe=function(e,t,r,i){if(i===void 0&&(i=0),!eoe("BANDWIDTH",r))return NaN;var a=e*r.attributes.BANDWIDTH;return(a-i*8)/t},y6=function(e,t){if(e.playlists.length===1)return!0;var r=t.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(i){return fI(i)?(i.attributes.BANDWIDTH||0)<r:!1}).length===0},l7=function(e,t){return!e&&!t||!e&&t||e&&!t?!1:!!(e===t||e.id&&t.id&&e.id===t.id||e.resolvedUri&&t.resolvedUri&&e.resolvedUri===t.resolvedUri||e.uri&&t.uri&&e.uri===t.uri)},iW=function(e,t){var r=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var a in r){for(var s in r[a])if(i=t(r[a][s]),i)break;if(i)break}return!!i},Fw=function(e){if(!e||!e.playlists||!e.playlists.length){var t=iW(e,function(s){return s.playlists&&s.playlists.length||s.uri});return t}for(var r=function(o){var l=e.playlists[o],u=l.attributes&&l.attributes.CODECS;if(u&&u.split(",").every(function(d){return Wie(d)}))return"continue";var c=iW(e,function(d){return l7(l,d)});return c?"continue":{v:!1}},i=0;i<e.playlists.length;i++){var a=r(i);if(a!=="continue"&&typeof a=="object")return a.v}return!0},hl={liveEdgeDelay:Xse,duration:Qse,seekable:OGe,getMediaInfoForTime:NGe,isEnabled:fI,isDisabled:BGe,isBlacklisted:Jse,isIncompatible:o7,playlistEnd:Zse,isAes:FGe,hasAttribute:eoe,estimateSegmentRequestTime:UGe,isLowestEnabledRendition:y6,isAudioOnly:Fw,playlistMatch:l7,segmentDurationWithParts:s7},toe=Lt.log,u7=function(e,t){return e+"-"+t},zGe=function(e,t,r){return"placeholder-uri-"+e+"-"+t+"-"+r},HGe=function(e){var t=e.onwarn,r=e.oninfo,i=e.manifestString,a=e.customTagParsers,s=a===void 0?[]:a,o=e.customTagMappers,l=o===void 0?[]:o,u=e.experimentalLLHLS,c=new tHe;t&&c.on("warn",t),r&&c.on("info",r),s.forEach(function(m){return c.addParser(m)}),l.forEach(function(m){return c.addTagMapper(m)}),c.push(i),c.end();var d=c.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(m){d.hasOwnProperty(m)&&delete d[m]}),d.segments&&d.segments.forEach(function(m){["parts","preloadHints"].forEach(function(v){m.hasOwnProperty(v)&&delete m[v]})})),!d.targetDuration){var f=10;d.segments&&d.segments.length&&(f=d.segments.reduce(function(m,v){return Math.max(m,v.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+f),d.targetDuration=f}var h=jse(d);if(h.length&&!d.partTargetDuration){var p=h.reduce(function(m,v){return Math.max(m,v.duration)},0);t&&(t("manifest has no partTargetDuration defaulting to "+p),toe.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),d.partTargetDuration=p}return d},G_=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(r){if(e.mediaGroups[r])for(var i in e.mediaGroups[r])for(var a in e.mediaGroups[r][i]){var s=e.mediaGroups[r][i][a];t(s,r,i,a)}})},noe=function(e){var t=e.playlist,r=e.uri,i=e.id;t.id=i,t.playlistErrors_=0,r&&(t.uri=r),t.attributes=t.attributes||{}},VGe=function(e){for(var t=e.playlists.length;t--;){var r=e.playlists[t];noe({playlist:r,id:u7(t,r.uri)}),r.resolvedUri=wc(e.uri,r.uri),e.playlists[r.id]=r,e.playlists[r.uri]=r,r.attributes.BANDWIDTH||toe.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},$Ge=function(e){G_(e,function(t){t.uri&&(t.resolvedUri=wc(e.uri,t.uri))})},GGe=function(e,t){var r=u7(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:gt.location.href,resolvedUri:gt.location.href,playlists:[{uri:t,id:r,resolvedUri:t,attributes:{}}]};return i.playlists[r]=i.playlists[0],i.playlists[t]=i.playlists[0],i},roe=function(e,t,r){r===void 0&&(r=zGe),e.uri=t;for(var i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){var a="placeholder-uri-"+i;e.playlists[i].uri=a}var s=Fw(e);G_(e,function(o,l,u,c){if(!o.playlists||!o.playlists.length){if(s&&l==="AUDIO"&&!o.uri)for(var d=0;d<e.playlists.length;d++){var f=e.playlists[d];if(f.attributes&&f.attributes.AUDIO&&f.attributes.AUDIO===u)return}o.playlists=[Qu({},o)]}o.playlists.forEach(function(h,p){var m=r(l,u,c,h),v=u7(p,m);h.uri?h.resolvedUri=h.resolvedUri||wc(e.uri,h.uri):(h.uri=p===0?m:v,h.resolvedUri=h.uri),h.id=h.id||v,h.attributes=h.attributes||{},e.playlists[h.id]=h,e.playlists[h.uri]=h})}),VGe(e),$Ge(e)},jM=Lt.mergeOptions,WGe=Lt.EventTarget,qGe=function(e,t){if(t.endList||!t.serverControl)return e;var r={};if(t.serverControl.canBlockReload){var i=t.preloadSegment,a=t.mediaSequence+t.segments.length;if(i){var s=i.parts||[],o=Kse(t)-1;o>-1&&o!==s.length-1&&(r._HLS_part=o),(o>-1||s.length)&&a--}r._HLS_msn=a}if(t.serverControl&&t.serverControl.canSkipUntil&&(r._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){var l=new gt.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(u){r.hasOwnProperty(u)&&l.searchParams.set(u,r[u])}),e=l.toString()}return e},jGe=function(e,t){if(!e)return t;var r=jM(e,t);if(e.preloadHints&&!t.preloadHints&&delete r.preloadHints,e.parts&&!t.parts)delete r.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(r.parts[i]=jM(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(r.skipped=!1),e.preload&&!t.preload&&(r.preload=!1),r},KGe=function(e,t,r){var i=e.slice(),a=t.slice();r=r||0;for(var s=[],o,l=0;l<a.length;l++){var u=i[l+r],c=a[l];u?(o=u.map||o,s.push(jGe(u,c))):(o&&!c.map&&(c.map=o),s.push(c))}return s},ioe=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=wc(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=wc(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=wc(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=wc(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(r){r.resolvedUri||(r.resolvedUri=wc(t,r.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(r){r.resolvedUri||(r.resolvedUri=wc(t,r.uri))})},aoe=function(e){var t=e.segments||[],r=e.preloadSegment;if(r&&r.parts&&r.parts.length){if(r.preloadHints){for(var i=0;i<r.preloadHints.length;i++)if(r.preloadHints[i].type==="MAP")return t}r.duration=e.targetDuration,r.preload=!0,t.push(r)}return t},soe=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},_6=function(e,t,r){r===void 0&&(r=soe);var i=jM(e,{}),a=i.playlists[t.id];if(!a||r(a,t))return null;t.segments=aoe(t);var s=jM(a,t);if(s.preloadSegment&&!t.preloadSegment&&delete s.preloadSegment,a.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}s.segments=KGe(a.segments,t.segments,t.mediaSequence-a.mediaSequence)}s.segments.forEach(function(u){ioe(u,s.resolvedUri)});for(var l=0;l<i.playlists.length;l++)i.playlists[l].id===t.id&&(i.playlists[l]=s);return i.playlists[t.id]=s,i.playlists[t.uri]=s,G_(e,function(u,c,d,f){if(u.playlists)for(var h=0;h<u.playlists.length;h++)t.id===u.playlists[h].id&&(u.playlists[h]=s)}),i},b6=function(e,t){var r=e.segments||[],i=r[r.length-1],a=i&&i.parts&&i.parts[i.parts.length-1],s=a&&a.duration||i&&i.duration;return t&&s?s*1e3:(e.partTargetDuration||e.targetDuration||10)*500},Ny=function(n){In(e,n);function e(r,i,a){var s;if(a===void 0&&(a={}),s=n.call(this)||this,!r)throw new Error("A non-empty playlist URL or object is required");s.logger_=Gc("PlaylistLoader");var o=a,l=o.withCredentials,u=l===void 0?!1:l,c=o.handleManifestRedirects,d=c===void 0?!1:c;s.src=r,s.vhs_=i,s.withCredentials=u,s.handleManifestRedirects=d;var f=i.options_;return s.customTagParsers=f&&f.customTagParsers||[],s.customTagMappers=f&&f.customTagMappers||[],s.experimentalLLHLS=f&&f.experimentalLLHLS||!1,Lt.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(Fr(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var t=e.prototype;return t.handleMediaupdatetimeout_=function(){var i=this;if(this.state==="HAVE_METADATA"){var a=this.media(),s=wc(this.master.uri,a.uri);this.experimentalLLHLS&&(s=qGe(s,a)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,l){if(i.request){if(o)return i.playlistRequestError(i.request,i.media(),"HAVE_METADATA");i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})}})}},t.playlistRequestError=function(i,a,s){var o=a.uri,l=a.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[l],status:i.status,message:"HLS playlist request error at URL: "+o+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},t.parseManifest_=function(i){var a=this,s=i.url,o=i.manifestString;return HGe({onwarn:function(u){var c=u.message;return a.logger_("m3u8-parser warn for "+s+": "+c)},oninfo:function(u){var c=u.message;return a.logger_("m3u8-parser info for "+s+": "+c)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},t.haveMetadata=function(i){var a=i.playlistString,s=i.playlistObject,o=i.url,l=i.id;this.request=null,this.state="HAVE_METADATA";var u=s||this.parseManifest_({url:o,manifestString:a});u.lastRequest=Date.now(),noe({playlist:u,uri:o,id:l});var c=_6(this.master,u);this.targetDuration=u.partTargetDuration||u.targetDuration,this.pendingMedia_=null,c?(this.master=c,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(b6(this.media(),!!c)),this.trigger("loadedplaylist")},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),gt.clearTimeout(this.mediaUpdateTimeout),gt.clearTimeout(this.finalRenditionTimeout),this.off()},t.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},t.media=function(i,a){var s=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof i=="string"){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(gt.clearTimeout(this.finalRenditionTimeout),a){var o=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=gt.setTimeout(this.media.bind(this,i,!1),o);return}var l=this.state,u=!this.media_||i.id!==this.media_.id,c=this.master.playlists[i.id];if(c&&c.endList||i.endList&&i.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,u&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(b6(i,!0)),!!u){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(d,f){if(s.request){if(i.lastRequest=Date.now(),i.resolvedUri=qM(s.handleManifestRedirects,i.resolvedUri,f),d)return s.playlistRequestError(s.request,i,l);s.haveMetadata({playlistString:f.responseText,url:i.uri,id:i.id}),l==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},t.pause=function(){this.mediaUpdateTimeout&&(gt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},t.load=function(i){var a=this;this.mediaUpdateTimeout&&(gt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(i){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=gt.setTimeout(function(){a.mediaUpdateTimeout=null,a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},t.updateMediaUpdateTimeout_=function(i){var a=this;this.mediaUpdateTimeout&&(gt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=gt.setTimeout(function(){a.mediaUpdateTimeout=null,a.trigger("mediaupdatetimeout"),a.updateMediaUpdateTimeout_(i)},i))},t.start=function(){var i=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=gt.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){i.setupInitialPlaylist(i.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(a,s){if(i.request){if(i.request=null,a)return i.error={status:s.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:s.responseText,code:2},i.state==="HAVE_NOTHING"&&(i.started=!1),i.trigger("error");i.src=qM(i.handleManifestRedirects,i.src,s);var o=i.parseManifest_({manifestString:s.responseText,url:i.src});i.setupInitialPlaylist(o)}})},t.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},t.setupInitialPlaylist=function(i){if(this.state="HAVE_MASTER",i.playlists){this.master=i,roe(this.master,this.srcUri()),i.playlists.forEach(function(s){s.segments=aoe(s),s.segments.forEach(function(o){ioe(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var a=this.srcUri()||gt.location.href;this.master=GGe(i,a),this.haveMetadata({playlistObject:i,url:a,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(WGe),XGe=Lt.xhr,YGe=Lt.mergeOptions,S6=function(e,t,r,i){var a=e.responseType==="arraybuffer"?e.response:e.responseText;!t&&a&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=a.byteLength||a.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),r.headers&&(e.responseHeaders=r.headers),t&&t.code==="ETIMEDOUT"&&(e.timedout=!0),!t&&!e.aborted&&r.statusCode!==200&&r.statusCode!==206&&r.statusCode!==0&&(t=new Error("XHR Failed with a response of: "+(e&&(a||e.responseText)))),i(t,e)},ooe=function(){var e=function t(r,i){r=YGe({timeout:45e3},r);var a=t.beforeRequest||Lt.Vhs.xhr.beforeRequest;if(a&&typeof a=="function"){var s=a(r);s&&(r=s)}var o=Lt.Vhs.xhr.original===!0?XGe:Lt.Vhs.xhr,l=o(r,function(c,d){return S6(l,c,d,i)}),u=l.abort;return l.abort=function(){return l.aborted=!0,u.apply(l,arguments)},l.uri=r.uri,l.requestTime=Date.now(),l};return e.original=!0,e},QGe=function(e){var t,r=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=gt.BigInt(e.offset)+gt.BigInt(e.length)-gt.BigInt(1):t=e.offset+e.length-1,"bytes="+r+"-"+t},x6=function(e){var t={};return e.byterange&&(t.Range=QGe(e.byterange)),t},ZGe=function(e,t){return e.start(t)+"-"+e.end(t)},JGe=function(e,t){var r=e.toString(16);return"00".substring(0,2-r.length)+r+(t%2?" ":"")},eWe=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},loe=function(e){var t={};return Object.keys(e).forEach(function(r){var i=e[r];jie(i)?t[r]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[r]=i}),t},KM=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},uoe=function(e){return e.resolvedUri},coe=function(e){for(var t=Array.prototype.slice.call(e),r=16,i="",a,s,o=0;o<t.length/r;o++)a=t.slice(o*r,o*r+r).map(JGe).join(""),s=t.slice(o*r,o*r+r).map(eWe).join(""),i+=a+" "+s+`
`;return i},tWe=function(e){var t=e.bytes;return coe(t)},nWe=function(e){var t="",r;for(r=0;r<e.length;r++)t+=ZGe(e,r)+" ";return t},rWe=Object.freeze({__proto__:null,createTransferableMessage:loe,initSegmentId:KM,segmentKeyId:uoe,hexDump:coe,tagDump:tWe,textRanges:nWe}),doe=.25,iWe=function(e,t){if(!t.dateTimeObject)return null;var r=t.videoTimingInfo.transmuxerPrependedSeconds,i=t.videoTimingInfo.transmuxedPresentationStart,a=i+r,s=e-a;return new Date(t.dateTimeObject.getTime()+s*1e3)},aWe=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},sWe=function(e,t){var r;try{r=new Date(e)}catch{return null}if(!t||!t.segments||t.segments.length===0)return null;var i=t.segments[0];if(r<i.dateTimeObject)return null;for(var a=0;a<t.segments.length-1;a++){i=t.segments[a];var s=t.segments[a+1].dateTimeObject;if(r<s)break}var o=t.segments[t.segments.length-1],l=o.dateTimeObject,u=o.videoTimingInfo?aWe(o.videoTimingInfo):o.duration+o.duration*doe,c=new Date(l.getTime()+u*1e3);return r>c?null:(r>l&&(i=o),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:hl.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},oWe=function(e,t){if(!t||!t.segments||t.segments.length===0)return null;for(var r=0,i,a=0;a<t.segments.length&&(i=t.segments[a],r=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:r+i.duration,!(e<=r));a++);var s=t.segments[t.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>r){if(e>r+s.duration*doe)return null;i=s}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:r-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},lWe=function(e,t){var r,i;try{r=new Date(e),i=new Date(t)}catch{}var a=r.getTime(),s=i.getTime();return(s-a)/1e3},uWe=function(e){if(!e.segments||e.segments.length===0)return!1;for(var t=0;t<e.segments.length;t++){var r=e.segments[t];if(!r.dateTimeObject)return!1}return!0},cWe=function(e){var t=e.playlist,r=e.time,i=r===void 0?void 0:r,a=e.callback;if(!a)throw new Error("getProgramTime: callback must be provided");if(!t||i===void 0)return a({message:"getProgramTime: playlist and time must be provided"});var s=oWe(i,t);if(!s)return a({message:"valid programTime was not found"});if(s.type==="estimate")return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:i},l=iWe(i,s.segment);return l&&(o.programDateTime=l.toISOString()),a(null,o)},dWe=function n(e){var t=e.programTime,r=e.playlist,i=e.retryCount,a=i===void 0?2:i,s=e.seekTo,o=e.pauseAfterSeek,l=o===void 0?!0:o,u=e.tech,c=e.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!r||!s)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!uWe(r))return c({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var d=sWe(t,r);if(!d)return c({message:t+" was not found in the stream"});var f=d.segment,h=lWe(f.dateTimeObject,t);if(d.type==="estimate"){if(a===0)return c({message:t+" is not buffered yet. Try again"});s(d.estimatedStart+h),u.one("seeked",function(){n({programTime:t,playlist:r,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:u,callback:c})});return}var p=f.start+h,m=function(){return c(null,u.currentTime())};u.one("seeked",m),l&&u.pause(),s(p)},IP=function(e,t){if(e.readyState===4)return t()},fWe=function(e,t,r){var i=[],a,s=!1,o=function(f,h,p,m){return h.abort(),s=!0,r(f,h,p,m)},l=function(f,h){if(!s){if(f)return o(f,h,"",i);var p=h.responseText.substring(i&&i.byteLength||0,h.responseText.length);if(i=hHe(i,Kie(p,!0)),a=a||RS(i),i.length<10||a&&i.length<a+2)return IP(h,function(){return o(f,h,"",i)});var m=CF(i);return m==="ts"&&i.length<188?IP(h,function(){return o(f,h,"",i)}):!m&&i.length<376?IP(h,function(){return o(f,h,"",i)}):o(null,h,m,i)}},u={uri:e,beforeSend:function(f){f.overrideMimeType("text/plain; charset=x-user-defined"),f.addEventListener("progress",function(h){return h.total,h.loaded,S6(f,null,{statusCode:f.status},l)})}},c=t(u,function(d,f){return S6(c,d,f,l)});return c},hWe=Lt.EventTarget,foe=Lt.mergeOptions,aW=function(e,t){if(!soe(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var r=0;r<e.segments.length;r++){var i=e.segments[r],a=t.segments[r];if(i.uri!==a.uri)return!1;if(!(!i.byterange&&!a.byterange)){var s=i.byterange,o=a.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},pWe=function(e,t,r,i){var a=i.attributes.NAME||r;return"placeholder-uri-"+e+"-"+t+"-"+a},mWe=function(e){var t=e.masterXml,r=e.srcUrl,i=e.clientOffset,a=e.sidxMapping,s=e.previousManifest,o=RVe(t,{manifestUri:r,clientOffset:i,sidxMapping:a,previousManifest:s});return roe(o,r,pWe),o},vWe=function(e,t){G_(e,function(r,i,a,s){s in t.mediaGroups[i][a]||delete e.mediaGroups[i][a][s]})},gWe=function(e,t,r){for(var i=!0,a=foe(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),s=0;s<t.playlists.length;s++){var o=t.playlists[s];if(o.sidx){var l=J4(o.sidx);r&&r[l]&&r[l].sidx&&SF(o,r[l].sidx,o.sidx.resolvedUri)}var u=_6(a,o,aW);u&&(a=u,i=!1)}return G_(t,function(c,d,f,h){if(c.playlists&&c.playlists.length){var p=c.playlists[0].id,m=_6(a,c.playlists[0],aW);m&&(a=m,h in a.mediaGroups[d][f]||(a.mediaGroups[d][f][h]=c),a.mediaGroups[d][f][h].playlists[0]=a.playlists[p],i=!1)}}),vWe(a,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:a},yWe=function(e,t){var r=!e.map&&!t.map,i=r||!!(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return i&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},sW=function(e,t){var r={};for(var i in e){var a=e[i],s=a.sidx;if(s){var o=J4(s);if(!t[o])break;var l=t[o].sidxInfo;yWe(l,s)&&(r[o]=t[o])}}return r},_We=function(e,t){var r=sW(e.playlists,t),i=r;return G_(e,function(a,s,o,l){if(a.playlists&&a.playlists.length){var u=a.playlists;i=foe(i,sW(u,t))}}),i},w6=function(n){In(e,n);function e(r,i,a,s){var o;a===void 0&&(a={}),o=n.call(this)||this,o.masterPlaylistLoader_=s||Fr(o),s||(o.isMaster_=!0);var l=a,u=l.withCredentials,c=u===void 0?!1:u,d=l.handleManifestRedirects,f=d===void 0?!1:d;if(o.vhs_=i,o.withCredentials=c,o.handleManifestRedirects=f,!r)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=Gc("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=r,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=r,o}var t=e.prototype;return t.requestErrored_=function(i,a,s){if(!this.request)return!0;if(this.request=null,i)return this.error=typeof i=="object"&&!(i instanceof Error)?i:{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2},s&&(this.state=s),this.trigger("error"),!0},t.addSidxSegments_=function(i,a,s){var o=this,l=i.sidx&&J4(i.sidx);if(!i.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=gt.setTimeout(function(){return s(!1)},0);return}var u=qM(this.handleManifestRedirects,i.sidx.resolvedUri),c=function(f,h){if(!o.requestErrored_(f,h,a)){var p=o.masterPlaylistLoader_.sidxMapping_,m;try{m=FVe(Tr(h.response).subarray(8))}catch(v){o.requestErrored_(v,h,a);return}return p[l]={sidxInfo:i.sidx,sidx:m},SF(i,m,i.sidx.resolvedUri),s(!0)}};this.request=fWe(u,this.vhs_.xhr,function(d,f,h,p){if(d)return c(d,f);if(!h||h!=="mp4")return c({status:f.status,message:"Unsupported "+(h||"unknown")+" container type for sidx segment at URL: "+u,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},f);var m=i.sidx.byterange,v=m.offset,g=m.length;if(p.length>=g+v)return c(d,{response:p.subarray(v,v+g),status:f.status,uri:f.uri});o.request=o.vhs_.xhr({uri:u,responseType:"arraybuffer",headers:x6({byterange:i.sidx.byterange})},c)})},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},gt.clearTimeout(this.minimumUpdatePeriodTimeout_),gt.clearTimeout(this.mediaRequest_),gt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},t.hasPendingRequest=function(){return this.request||this.mediaRequest_},t.stopRequest=function(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},t.media=function(i){var a=this;if(!i)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof i=="string"){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var o=!this.media_||i.id!==this.media_.id;if(o&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList){this.state="HAVE_METADATA",this.media_=i,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,s,function(l){a.haveMetadata({startingState:s,playlist:i})}))},t.haveMetadata=function(i){var a=i.startingState,s=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),a==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},t.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),gt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(gt.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},t.load=function(i){var a=this;gt.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(i){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=gt.setTimeout(function(){return a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},t.start=function(){var i=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=gt.setTimeout(function(){return i.haveMaster_()},0);return}this.requestMaster_(function(a,s){i.haveMaster_(),!i.hasPendingRequest()&&!i.media_&&i.media(i.masterPlaylistLoader_.master.playlists[0])})},t.requestMaster_=function(i){var a=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(a.requestErrored_(s,o)){a.state==="HAVE_NOTHING"&&(a.started=!1);return}var l=o.responseText!==a.masterPlaylistLoader_.masterXml_;if(a.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?a.masterLoaded_=Date.parse(o.responseHeaders.date):a.masterLoaded_=Date.now(),a.masterPlaylistLoader_.srcUrl=qM(a.handleManifestRedirects,a.masterPlaylistLoader_.srcUrl,o),l){a.handleMaster_(),a.syncClientServerClock_(function(){return i(o,l)});return}return i(o,l)})},t.syncClientServerClock_=function(i){var a=this,s=kVe(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),i();this.request=this.vhs_.xhr({uri:wc(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,l){if(a.request){if(o)return a.masterPlaylistLoader_.clientOffset_=a.masterLoaded_-Date.now(),i();var u;s.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?u=a.masterLoaded_:u=Date.parse(l.responseHeaders.date):u=Date.parse(l.responseText),a.masterPlaylistLoader_.clientOffset_=u-Date.now(),i()}})},t.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},t.handleMaster_=function(){this.mediaRequest_=null;var i=this.masterPlaylistLoader_.master,a=mWe({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i});i&&(a=gWe(i,a,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=a||i;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!i||a&&a.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),!!a},t.updateMinimumUpdatePeriodTimeout_=function(){var i=this.masterPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(gt.clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);var a=i.master&&i.master.minimumUpdatePeriod;if(a===0&&(i.media()?a=i.media().targetDuration*1e3:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),typeof a!="number"||a<=0){a<0&&this.logger_("found invalid minimumUpdatePeriod of "+a+", not setting a timeout");return}this.createMUPTimeout_(a)},t.createMUPTimeout_=function(i){var a=this.masterPlaylistLoader_;a.minimumUpdatePeriodTimeout_=gt.setTimeout(function(){a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(i)},i)},t.refreshXml_=function(){var i=this;this.requestMaster_(function(a,s){s&&(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=_We(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,function(o){i.refreshMedia_(i.media().id)}))})},t.refreshMedia_=function(i){var a=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[i];if(o?this.media_=s[i]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function u(){a.media().endList||(a.mediaUpdateTimeout=gt.setTimeout(function(){a.trigger("mediaupdatetimeout"),u()},b6(a.media(),!!o)))};l()}this.trigger("loadedplaylist")},e}(hWe),Ts={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},bWe=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer},hoe=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},SWe=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}},poe=function(e){return function(){var t=SWe(e),r=hoe(new Worker(t));r.objURL=t;var i=r.terminate;return r.on=r.addEventListener,r.off=r.removeEventListener,r.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},r}},moe=function(e){return"var browserWorkerPolyFill = "+hoe.toString()+`;
browserWorkerPolyFill(self);
`+e},voe=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},xWe=moe(voe(function(){var n=function(){this.init=function(){var z={};this.on=function(K,j){z[K]||(z[K]=[]),z[K]=z[K].concat(j)},this.off=function(K,j){var Z;return z[K]?(Z=z[K].indexOf(j),z[K]=z[K].slice(),z[K].splice(Z,1),Z>-1):!1},this.trigger=function(K){var j,Z,fe,xe;if(j=z[K],!!j)if(arguments.length===2)for(fe=j.length,Z=0;Z<fe;++Z)j[Z].call(this,arguments[1]);else{for(xe=[],Z=arguments.length,Z=1;Z<arguments.length;++Z)xe.push(arguments[Z]);for(fe=j.length,Z=0;Z<fe;++Z)j[Z].apply(this,xe)}},this.dispose=function(){z={}}}};n.prototype.pipe=function(Re){return this.on("data",function(z){Re.push(z)}),this.on("done",function(z){Re.flush(z)}),this.on("partialdone",function(z){Re.partialFlush(z)}),this.on("endedtimeline",function(z){Re.endTimeline(z)}),this.on("reset",function(z){Re.reset(z)}),Re},n.prototype.push=function(Re){this.trigger("data",Re)},n.prototype.flush=function(Re){this.trigger("done",Re)},n.prototype.partialFlush=function(Re){this.trigger("partialdone",Re)},n.prototype.endTimeline=function(Re){this.trigger("endedtimeline",Re)},n.prototype.reset=function(Re){this.trigger("reset",Re)};var e=n,t=Math.pow(2,32),r=function(z){var K=new DataView(z.buffer,z.byteOffset,z.byteLength),j;return K.getBigUint64?(j=K.getBigUint64(0),j<Number.MAX_SAFE_INTEGER?Number(j):j):K.getUint32(0)*t+K.getUint32(4)},i={getUint64:r,MAX_UINT32:t},a=i.MAX_UINT32,s,o,l,u,c,d,f,h,p,m,v,g,y,_,b,x,w,A,T,C,E,I,P,L,N,F,k,H,U,B,$,ee,re,ne,ae,pe;(function(){var Re;if(P={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(Re in P)P.hasOwnProperty(Re)&&(P[Re]=[Re.charCodeAt(0),Re.charCodeAt(1),Re.charCodeAt(2),Re.charCodeAt(3)]);L=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),F=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),N=new Uint8Array([0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),H=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),U={video:k,audio:H},ee=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),$=new Uint8Array([0,0,0,0,0,0,0,0]),re=new Uint8Array([0,0,0,0,0,0,0,0]),ne=re,ae=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),pe=re,B=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(z){var K=[],j=0,Z,fe,xe;for(Z=1;Z<arguments.length;Z++)K.push(arguments[Z]);for(Z=K.length;Z--;)j+=K[Z].byteLength;for(fe=new Uint8Array(j+8),xe=new DataView(fe.buffer,fe.byteOffset,fe.byteLength),xe.setUint32(0,fe.byteLength),fe.set(z,4),Z=0,j=8;Z<K.length;Z++)fe.set(K[Z],j),j+=K[Z].byteLength;return fe},o=function(){return s(P.dinf,s(P.dref,ee))},l=function(z){return s(P.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,z.audioobjecttype<<3|z.samplingfrequencyindex>>>1,z.samplingfrequencyindex<<7|z.channelcount<<3,6,1,2]))},u=function(){return s(P.ftyp,L,N,L,F)},x=function(z){return s(P.hdlr,U[z])},c=function(z){return s(P.mdat,z)},b=function(z){var K=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,z.duration>>>24&255,z.duration>>>16&255,z.duration>>>8&255,z.duration&255,85,196,0,0]);return z.samplerate&&(K[12]=z.samplerate>>>24&255,K[13]=z.samplerate>>>16&255,K[14]=z.samplerate>>>8&255,K[15]=z.samplerate&255),s(P.mdhd,K)},_=function(z){return s(P.mdia,b(z),x(z.type),f(z))},d=function(z){return s(P.mfhd,new Uint8Array([0,0,0,0,(z&4278190080)>>24,(z&16711680)>>16,(z&65280)>>8,z&255]))},f=function(z){return s(P.minf,z.type==="video"?s(P.vmhd,B):s(P.smhd,$),o(),A(z))},h=function(z,K){for(var j=[],Z=K.length;Z--;)j[Z]=C(K[Z]);return s.apply(null,[P.moof,d(z)].concat(j))},p=function(z){for(var K=z.length,j=[];K--;)j[K]=g(z[K]);return s.apply(null,[P.moov,v(4294967295)].concat(j).concat(m(z)))},m=function(z){for(var K=z.length,j=[];K--;)j[K]=E(z[K]);return s.apply(null,[P.mvex].concat(j))},v=function(z){var K=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(z&4278190080)>>24,(z&16711680)>>16,(z&65280)>>8,z&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(P.mvhd,K)},w=function(z){var K=z.samples||[],j=new Uint8Array(4+K.length),Z,fe;for(fe=0;fe<K.length;fe++)Z=K[fe].flags,j[fe+4]=Z.dependsOn<<4|Z.isDependedOn<<2|Z.hasRedundancy;return s(P.sdtp,j)},A=function(z){return s(P.stbl,T(z),s(P.stts,pe),s(P.stsc,ne),s(P.stsz,ae),s(P.stco,re))},function(){var Re,z;T=function(j){return s(P.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),j.type==="video"?Re(j):z(j))},Re=function(j){var Z=j.sps||[],fe=j.pps||[],xe=[],Je=[],lt,xt;for(lt=0;lt<Z.length;lt++)xe.push((Z[lt].byteLength&65280)>>>8),xe.push(Z[lt].byteLength&255),xe=xe.concat(Array.prototype.slice.call(Z[lt]));for(lt=0;lt<fe.length;lt++)Je.push((fe[lt].byteLength&65280)>>>8),Je.push(fe[lt].byteLength&255),Je=Je.concat(Array.prototype.slice.call(fe[lt]));if(xt=[P.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(j.width&65280)>>8,j.width&255,(j.height&65280)>>8,j.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(P.avcC,new Uint8Array([1,j.profileIdc,j.profileCompatibility,j.levelIdc,255].concat([Z.length],xe,[fe.length],Je))),s(P.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],j.sarRatio){var _t=j.sarRatio[0],Pt=j.sarRatio[1];xt.push(s(P.pasp,new Uint8Array([(_t&4278190080)>>24,(_t&16711680)>>16,(_t&65280)>>8,_t&255,(Pt&4278190080)>>24,(Pt&16711680)>>16,(Pt&65280)>>8,Pt&255])))}return s.apply(null,xt)},z=function(j){return s(P.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(j.channelcount&65280)>>8,j.channelcount&255,(j.samplesize&65280)>>8,j.samplesize&255,0,0,0,0,(j.samplerate&65280)>>8,j.samplerate&255,0,0]),l(j))}}(),y=function(z){var K=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(z.id&4278190080)>>24,(z.id&16711680)>>16,(z.id&65280)>>8,z.id&255,0,0,0,0,(z.duration&4278190080)>>24,(z.duration&16711680)>>16,(z.duration&65280)>>8,z.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(z.width&65280)>>8,z.width&255,0,0,(z.height&65280)>>8,z.height&255,0,0]);return s(P.tkhd,K)},C=function(z){var K,j,Z,fe,xe,Je,lt;return K=s(P.tfhd,new Uint8Array([0,0,0,58,(z.id&4278190080)>>24,(z.id&16711680)>>16,(z.id&65280)>>8,z.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Je=Math.floor(z.baseMediaDecodeTime/a),lt=Math.floor(z.baseMediaDecodeTime%a),j=s(P.tfdt,new Uint8Array([1,0,0,0,Je>>>24&255,Je>>>16&255,Je>>>8&255,Je&255,lt>>>24&255,lt>>>16&255,lt>>>8&255,lt&255])),xe=32+20+8+16+8+8,z.type==="audio"?(Z=I(z,xe),s(P.traf,K,j,Z)):(fe=w(z),Z=I(z,fe.length+xe),s(P.traf,K,j,Z,fe))},g=function(z){return z.duration=z.duration||4294967295,s(P.trak,y(z),_(z))},E=function(z){var K=new Uint8Array([0,0,0,0,(z.id&4278190080)>>24,(z.id&16711680)>>16,(z.id&65280)>>8,z.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return z.type!=="video"&&(K[K.length-1]=0),s(P.trex,K)},function(){var Re,z,K;K=function(Z,fe){var xe=0,Je=0,lt=0,xt=0;return Z.length&&(Z[0].duration!==void 0&&(xe=1),Z[0].size!==void 0&&(Je=2),Z[0].flags!==void 0&&(lt=4),Z[0].compositionTimeOffset!==void 0&&(xt=8)),[0,0,xe|Je|lt|xt,1,(Z.length&4278190080)>>>24,(Z.length&16711680)>>>16,(Z.length&65280)>>>8,Z.length&255,(fe&4278190080)>>>24,(fe&16711680)>>>16,(fe&65280)>>>8,fe&255]},z=function(Z,fe){var xe,Je,lt,xt,_t,Pt;for(xt=Z.samples||[],fe+=8+12+16*xt.length,lt=K(xt,fe),Je=new Uint8Array(lt.length+xt.length*16),Je.set(lt),xe=lt.length,Pt=0;Pt<xt.length;Pt++)_t=xt[Pt],Je[xe++]=(_t.duration&4278190080)>>>24,Je[xe++]=(_t.duration&16711680)>>>16,Je[xe++]=(_t.duration&65280)>>>8,Je[xe++]=_t.duration&255,Je[xe++]=(_t.size&4278190080)>>>24,Je[xe++]=(_t.size&16711680)>>>16,Je[xe++]=(_t.size&65280)>>>8,Je[xe++]=_t.size&255,Je[xe++]=_t.flags.isLeading<<2|_t.flags.dependsOn,Je[xe++]=_t.flags.isDependedOn<<6|_t.flags.hasRedundancy<<4|_t.flags.paddingValue<<1|_t.flags.isNonSyncSample,Je[xe++]=_t.flags.degradationPriority&61440,Je[xe++]=_t.flags.degradationPriority&15,Je[xe++]=(_t.compositionTimeOffset&4278190080)>>>24,Je[xe++]=(_t.compositionTimeOffset&16711680)>>>16,Je[xe++]=(_t.compositionTimeOffset&65280)>>>8,Je[xe++]=_t.compositionTimeOffset&255;return s(P.trun,Je)},Re=function(Z,fe){var xe,Je,lt,xt,_t,Pt;for(xt=Z.samples||[],fe+=8+12+8*xt.length,lt=K(xt,fe),xe=new Uint8Array(lt.length+xt.length*8),xe.set(lt),Je=lt.length,Pt=0;Pt<xt.length;Pt++)_t=xt[Pt],xe[Je++]=(_t.duration&4278190080)>>>24,xe[Je++]=(_t.duration&16711680)>>>16,xe[Je++]=(_t.duration&65280)>>>8,xe[Je++]=_t.duration&255,xe[Je++]=(_t.size&4278190080)>>>24,xe[Je++]=(_t.size&16711680)>>>16,xe[Je++]=(_t.size&65280)>>>8,xe[Je++]=_t.size&255;return s(P.trun,xe)},I=function(Z,fe){return Z.type==="audio"?Re(Z,fe):z(Z,fe)}}();var de={ftyp:u,mdat:c,moof:h,moov:p,initSegment:function(z){var K=u(),j=p(z),Z;return Z=new Uint8Array(K.byteLength+j.byteLength),Z.set(K),Z.set(j,K.byteLength),Z}},me=function(z){var K,j,Z=[],fe=[];for(fe.byteLength=0,fe.nalCount=0,fe.duration=0,Z.byteLength=0,K=0;K<z.length;K++)j=z[K],j.nalUnitType==="access_unit_delimiter_rbsp"?(Z.length&&(Z.duration=j.dts-Z.dts,fe.byteLength+=Z.byteLength,fe.nalCount+=Z.length,fe.duration+=Z.duration,fe.push(Z)),Z=[j],Z.byteLength=j.data.byteLength,Z.pts=j.pts,Z.dts=j.dts):(j.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(Z.keyFrame=!0),Z.duration=j.dts-Z.dts,Z.byteLength+=j.data.byteLength,Z.push(j));return fe.length&&(!Z.duration||Z.duration<=0)&&(Z.duration=fe[fe.length-1].duration),fe.byteLength+=Z.byteLength,fe.nalCount+=Z.length,fe.duration+=Z.duration,fe.push(Z),fe},ke=function(z){var K,j,Z=[],fe=[];for(Z.byteLength=0,Z.nalCount=0,Z.duration=0,Z.pts=z[0].pts,Z.dts=z[0].dts,fe.byteLength=0,fe.nalCount=0,fe.duration=0,fe.pts=z[0].pts,fe.dts=z[0].dts,K=0;K<z.length;K++)j=z[K],j.keyFrame?(Z.length&&(fe.push(Z),fe.byteLength+=Z.byteLength,fe.nalCount+=Z.nalCount,fe.duration+=Z.duration),Z=[j],Z.nalCount=j.length,Z.byteLength=j.byteLength,Z.pts=j.pts,Z.dts=j.dts,Z.duration=j.duration):(Z.duration+=j.duration,Z.nalCount+=j.length,Z.byteLength+=j.byteLength,Z.push(j));return fe.length&&Z.duration<=0&&(Z.duration=fe[fe.length-1].duration),fe.byteLength+=Z.byteLength,fe.nalCount+=Z.nalCount,fe.duration+=Z.duration,fe.push(Z),fe},Be=function(z){var K;return!z[0][0].keyFrame&&z.length>1&&(K=z.shift(),z.byteLength-=K.byteLength,z.nalCount-=K.nalCount,z[0][0].dts=K.dts,z[0][0].pts=K.pts,z[0][0].duration+=K.duration),z},Xe=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Ye=function(z,K){var j=Xe();return j.dataOffset=K,j.compositionTimeOffset=z.pts-z.dts,j.duration=z.duration,j.size=4*z.length,j.size+=z.byteLength,z.keyFrame&&(j.flags.dependsOn=2,j.flags.isNonSyncSample=0),j},Y=function(z,K){var j,Z,fe,xe,Je,lt=K||0,xt=[];for(j=0;j<z.length;j++)for(xe=z[j],Z=0;Z<xe.length;Z++)Je=xe[Z],fe=Ye(Je,lt),lt+=fe.size,xt.push(fe);return xt},he=function(z){var K,j,Z,fe,xe,Je,lt=0,xt=z.byteLength,_t=z.nalCount,Pt=xt+4*_t,Xt=new Uint8Array(Pt),Mn=new DataView(Xt.buffer);for(K=0;K<z.length;K++)for(fe=z[K],j=0;j<fe.length;j++)for(xe=fe[j],Z=0;Z<xe.length;Z++)Je=xe[Z],Mn.setUint32(lt,Je.data.byteLength),lt+=4,Xt.set(Je.data,lt),lt+=Je.data.byteLength;return Xt},le=function(z,K){var j,Z=K||0,fe=[];return j=Ye(z,Z),fe.push(j),fe},Ke=function(z){var K,j,Z=0,fe=z.byteLength,xe=z.length,Je=fe+4*xe,lt=new Uint8Array(Je),xt=new DataView(lt.buffer);for(K=0;K<z.length;K++)j=z[K],xt.setUint32(Z,j.data.byteLength),Z+=4,lt.set(j.data,Z),Z+=j.data.byteLength;return lt},Ue={groupNalsIntoFrames:me,groupFramesIntoGops:ke,extendFirstKeyFrame:Be,generateSampleTable:Y,concatenateNalData:he,generateSampleTableForFrame:le,concatenateNalDataForFrame:Ke},Ze=[33,16,5,32,164,27],je=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],He=function(z){for(var K=[];z--;)K.push(0);return K},ut=function(z){return Object.keys(z).reduce(function(K,j){return K[j]=new Uint8Array(z[j].reduce(function(Z,fe){return Z.concat(fe)},[])),K},{})},ge,q=function(){if(!ge){var z={96e3:[Ze,[227,64],He(154),[56]],88200:[Ze,[231],He(170),[56]],64e3:[Ze,[248,192],He(240),[56]],48e3:[Ze,[255,192],He(268),[55,148,128],He(54),[112]],44100:[Ze,[255,192],He(268),[55,163,128],He(84),[112]],32e3:[Ze,[255,192],He(268),[55,234],He(226),[112]],24e3:[Ze,[255,192],He(268),[55,255,128],He(268),[111,112],He(126),[224]],16e3:[Ze,[255,192],He(268),[55,255,128],He(268),[111,255],He(269),[223,108],He(195),[1,192]],12e3:[je,He(268),[3,127,248],He(268),[6,255,240],He(268),[13,255,224],He(268),[27,253,128],He(259),[56]],11025:[je,He(268),[3,127,248],He(268),[6,255,240],He(268),[13,255,224],He(268),[27,255,192],He(268),[55,175,128],He(108),[112]],8e3:[je,He(268),[3,121,16],He(47),[7]]};ge=ut(z)}return ge},te=9e4,ye,Ve,et,At,It,De,Tt;ye=function(z){return z*te},Ve=function(z,K){return z*K},et=function(z){return z/te},At=function(z,K){return z/K},It=function(z,K){return ye(At(z,K))},De=function(z,K){return Ve(et(z),K)},Tt=function(z,K,j){return et(j?z:z-K)};var ot={ONE_SECOND_IN_TS:te,secondsToVideoTs:ye,secondsToAudioTs:Ve,videoTsToSeconds:et,audioTsToSeconds:At,audioTsToVideoTs:It,videoTsToAudioTs:De,metadataTsToSeconds:Tt},G=function(z){var K,j,Z=0;for(K=0;K<z.length;K++)j=z[K],Z+=j.data.byteLength;return Z},_e=function(z,K,j,Z){var fe,xe=0,Je=0,lt=0,xt=0,_t,Pt,Xt;if(K.length&&(fe=ot.audioTsToVideoTs(z.baseMediaDecodeTime,z.samplerate),xe=Math.ceil(ot.ONE_SECOND_IN_TS/(z.samplerate/1024)),j&&Z&&(Je=fe-Math.max(j,Z),lt=Math.floor(Je/xe),xt=lt*xe),!(lt<1||xt>ot.ONE_SECOND_IN_TS/2))){for(_t=q()[z.samplerate],_t||(_t=K[0].data),Pt=0;Pt<lt;Pt++)Xt=K[0],K.splice(0,0,{data:_t,dts:Xt.dts-xe,pts:Xt.pts-xe});return z.baseMediaDecodeTime-=Math.floor(ot.videoTsToAudioTs(xt,z.samplerate)),xt}},ve=function(z,K,j){return K.minSegmentDts>=j?z:(K.minSegmentDts=1/0,z.filter(function(Z){return Z.dts>=j?(K.minSegmentDts=Math.min(K.minSegmentDts,Z.dts),K.minSegmentPts=K.minSegmentDts,!0):!1}))},Le=function(z){var K,j,Z=[];for(K=0;K<z.length;K++)j=z[K],Z.push({size:j.data.byteLength,duration:1024});return Z},we=function(z){var K,j,Z=0,fe=new Uint8Array(G(z));for(K=0;K<z.length;K++)j=z[K],fe.set(j.data,Z),Z+=j.data.byteLength;return fe},Ie={prefixWithSilence:_e,trimAdtsFramesByEarliestDts:ve,generateSampleTable:Le,concatenateFrameData:we},wt=ot.ONE_SECOND_IN_TS,Pe=function(z,K){typeof K.pts=="number"&&(z.timelineStartInfo.pts===void 0&&(z.timelineStartInfo.pts=K.pts),z.minSegmentPts===void 0?z.minSegmentPts=K.pts:z.minSegmentPts=Math.min(z.minSegmentPts,K.pts),z.maxSegmentPts===void 0?z.maxSegmentPts=K.pts:z.maxSegmentPts=Math.max(z.maxSegmentPts,K.pts)),typeof K.dts=="number"&&(z.timelineStartInfo.dts===void 0&&(z.timelineStartInfo.dts=K.dts),z.minSegmentDts===void 0?z.minSegmentDts=K.dts:z.minSegmentDts=Math.min(z.minSegmentDts,K.dts),z.maxSegmentDts===void 0?z.maxSegmentDts=K.dts:z.maxSegmentDts=Math.max(z.maxSegmentDts,K.dts))},Rt=function(z){delete z.minSegmentDts,delete z.maxSegmentDts,delete z.minSegmentPts,delete z.maxSegmentPts},dt=function(z,K){var j,Z,fe=z.minSegmentDts;return K||(fe-=z.timelineStartInfo.dts),j=z.timelineStartInfo.baseMediaDecodeTime,j+=fe,j=Math.max(0,j),z.type==="audio"&&(Z=z.samplerate/wt,j*=Z,j=Math.floor(j)),j},Mt={clearDtsInfo:Rt,calculateTrackBaseMediaDecodeTime:dt,collectDtsInfo:Pe},Wt=4,zt=128,Sn=function(z){for(var K=0,j={payloadType:-1,payloadSize:0},Z=0,fe=0;K<z.byteLength&&z[K]!==zt;){for(;z[K]===255;)Z+=255,K++;for(Z+=z[K++];z[K]===255;)fe+=255,K++;if(fe+=z[K++],!j.payload&&Z===Wt){var xe=String.fromCharCode(z[K+3],z[K+4],z[K+5],z[K+6]);if(xe==="GA94"){j.payloadType=Z,j.payloadSize=fe,j.payload=z.subarray(K,K+fe);break}else j.payload=void 0}K+=fe,Z=0,fe=0}return j},On=function(z){return z.payload[0]!==181||(z.payload[1]<<8|z.payload[2])!==49||String.fromCharCode(z.payload[3],z.payload[4],z.payload[5],z.payload[6])!=="GA94"||z.payload[7]!==3?null:z.payload.subarray(8,z.payload.length-1)},Er=function(z,K){var j=[],Z,fe,xe,Je;if(!(K[0]&64))return j;for(fe=K[0]&31,Z=0;Z<fe;Z++)xe=Z*3,Je={type:K[xe+2]&3,pts:z},K[xe+2]&4&&(Je.ccData=K[xe+3]<<8|K[xe+4],j.push(Je));return j},Qn=function(z){for(var K=z.byteLength,j=[],Z=1,fe,xe;Z<K-2;)z[Z]===0&&z[Z+1]===0&&z[Z+2]===3?(j.push(Z+2),Z+=2):Z++;if(j.length===0)return z;fe=K-j.length,xe=new Uint8Array(fe);var Je=0;for(Z=0;Z<fe;Je++,Z++)Je===j[0]&&(Je++,j.shift()),xe[Z]=z[Je];return xe},Xr={parseSei:Sn,parseUserData:On,parseCaptionPackets:Er,discardEmulationPreventionBytes:Qn,USER_DATA_REGISTERED_ITU_T_T35:Wt},Yn=function Re(z){z=z||{},Re.prototype.init.call(this),this.parse708captions_=typeof z.parse708captions=="boolean"?z.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new gn(0,0),new gn(0,1),new gn(1,0),new gn(1,1)],this.parse708captions_&&(this.cc708Stream_=new Et({captionServices:z.captionServices})),this.reset(),this.ccStreams_.forEach(function(K){K.on("data",this.trigger.bind(this,"data")),K.on("partialdone",this.trigger.bind(this,"partialdone")),K.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Yn.prototype=new e,Yn.prototype.push=function(Re){var z,K,j;if(Re.nalUnitType==="sei_rbsp"&&(z=Xr.parseSei(Re.escapedRBSP),!!z.payload&&z.payloadType===Xr.USER_DATA_REGISTERED_ITU_T_T35&&(K=Xr.parseUserData(z),!!K))){if(Re.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(Re.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}j=Xr.parseCaptionPackets(Re.pts,K),this.captionPackets_=this.captionPackets_.concat(j),this.latestDts_!==Re.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=Re.dts}},Yn.prototype.flushCCStreams=function(Re){this.ccStreams_.forEach(function(z){return Re==="flush"?z.flush():z.partialFlush()},this)},Yn.prototype.flushStream=function(Re){if(!this.captionPackets_.length){this.flushCCStreams(Re);return}this.captionPackets_.forEach(function(z,K){z.presortIndex=K}),this.captionPackets_.sort(function(z,K){return z.pts===K.pts?z.presortIndex-K.presortIndex:z.pts-K.pts}),this.captionPackets_.forEach(function(z){z.type<2?this.dispatchCea608Packet(z):this.dispatchCea708Packet(z)},this),this.captionPackets_.length=0,this.flushCCStreams(Re)},Yn.prototype.flush=function(){return this.flushStream("flush")},Yn.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Yn.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(Re){Re.reset()})},Yn.prototype.dispatchCea608Packet=function(Re){this.setsTextOrXDSActive(Re)?this.activeCea608Channel_[Re.type]=null:this.setsChannel1Active(Re)?this.activeCea608Channel_[Re.type]=0:this.setsChannel2Active(Re)&&(this.activeCea608Channel_[Re.type]=1),this.activeCea608Channel_[Re.type]!==null&&this.ccStreams_[(Re.type<<1)+this.activeCea608Channel_[Re.type]].push(Re)},Yn.prototype.setsChannel1Active=function(Re){return(Re.ccData&30720)===4096},Yn.prototype.setsChannel2Active=function(Re){return(Re.ccData&30720)===6144},Yn.prototype.setsTextOrXDSActive=function(Re){return(Re.ccData&28928)===256||(Re.ccData&30974)===4138||(Re.ccData&30974)===6186},Yn.prototype.dispatchCea708Packet=function(Re){this.parse708captions_&&this.cc708Stream_.push(Re)};var Q={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ue=function(z){var K=Q[z]||z;return z&4096&&z===K?"":String.fromCharCode(K)},Zt=function(z){return 32<=z&&z<=127||160<=z&&z<=255},Ee=function(z){this.windowNum=z,this.reset()};Ee.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ee.prototype.getText=function(){return this.rows.join(`
`)},Ee.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ee.prototype.newLine=function(Re){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(Re),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ee.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Ee.prototype.addText=function(Re){this.rows[this.rowIdx]+=Re},Ee.prototype.backspace=function(){if(!this.isEmpty()){var Re=this.rows[this.rowIdx];this.rows[this.rowIdx]=Re.substr(0,Re.length-1)}};var ce=function(z,K,j){this.serviceNum=z,this.text="",this.currentWindow=new Ee(-1),this.windows=[],this.stream=j,typeof K=="string"&&this.createTextDecoder(K)};ce.prototype.init=function(Re,z){this.startPts=Re;for(var K=0;K<8;K++)this.windows[K]=new Ee(K),typeof z=="function"&&(this.windows[K].beforeRowOverflow=z)},ce.prototype.setCurrentWindow=function(Re){this.currentWindow=this.windows[Re]},ce.prototype.createTextDecoder=function(Re){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(Re)}catch(z){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+Re+" encoding. "+z})}};var Et=function Re(z){z=z||{},Re.prototype.init.call(this);var K=this,j=z.captionServices||{},Z={},fe;Object.keys(j).forEach(function(xe){fe=j[xe],/^SERVICE/.test(xe)&&(Z[xe]=fe.encoding)}),this.serviceEncodings=Z,this.current708Packet=null,this.services={},this.push=function(xe){xe.type===3?(K.new708Packet(),K.add708Bytes(xe)):(K.current708Packet===null&&K.new708Packet(),K.add708Bytes(xe))}};Et.prototype=new e,Et.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Et.prototype.add708Bytes=function(Re){var z=Re.ccData,K=z>>>8,j=z&255;this.current708Packet.ptsVals.push(Re.pts),this.current708Packet.data.push(K),this.current708Packet.data.push(j)},Et.prototype.push708Packet=function(){var Re=this.current708Packet,z=Re.data,K=null,j=null,Z=0,fe=z[Z++];for(Re.seq=fe>>6,Re.sizeCode=fe&63;Z<z.length;Z++)fe=z[Z++],K=fe>>5,j=fe&31,K===7&&j>0&&(fe=z[Z++],K=fe),this.pushServiceBlock(K,Z,j),j>0&&(Z+=j-1)},Et.prototype.pushServiceBlock=function(Re,z,K){var j,Z=z,fe=this.current708Packet.data,xe=this.services[Re];for(xe||(xe=this.initService(Re,Z));Z<z+K&&Z<fe.length;Z++)j=fe[Z],Zt(j)?Z=this.handleText(Z,xe):j===24?Z=this.multiByteCharacter(Z,xe):j===16?Z=this.extendedCommands(Z,xe):128<=j&&j<=135?Z=this.setCurrentWindow(Z,xe):152<=j&&j<=159?Z=this.defineWindow(Z,xe):j===136?Z=this.clearWindows(Z,xe):j===140?Z=this.deleteWindows(Z,xe):j===137?Z=this.displayWindows(Z,xe):j===138?Z=this.hideWindows(Z,xe):j===139?Z=this.toggleWindows(Z,xe):j===151?Z=this.setWindowAttributes(Z,xe):j===144?Z=this.setPenAttributes(Z,xe):j===145?Z=this.setPenColor(Z,xe):j===146?Z=this.setPenLocation(Z,xe):j===143?xe=this.reset(Z,xe):j===8?xe.currentWindow.backspace():j===12?xe.currentWindow.clearText():j===13?xe.currentWindow.pendingNewLine=!0:j===14?xe.currentWindow.clearText():j===141&&Z++},Et.prototype.extendedCommands=function(Re,z){var K=this.current708Packet.data,j=K[++Re];return Zt(j)&&(Re=this.handleText(Re,z,{isExtended:!0})),Re},Et.prototype.getPts=function(Re){return this.current708Packet.ptsVals[Math.floor(Re/2)]},Et.prototype.initService=function(Re,z){var j="SERVICE"+Re,K=this,j,Z;return j in this.serviceEncodings&&(Z=this.serviceEncodings[j]),this.services[Re]=new ce(Re,Z,K),this.services[Re].init(this.getPts(z),function(fe){K.flushDisplayed(fe,K.services[Re])}),this.services[Re]},Et.prototype.handleText=function(Re,z,K){var j=K&&K.isExtended,Z=K&&K.isMultiByte,fe=this.current708Packet.data,xe=j?4096:0,Je=fe[Re],lt=fe[Re+1],xt=z.currentWindow,_t,Pt;return z.textDecoder_&&!j?(Z?(Pt=[Je,lt],Re++):Pt=[Je],_t=z.textDecoder_.decode(new Uint8Array(Pt))):_t=ue(xe|Je),xt.pendingNewLine&&!xt.isEmpty()&&xt.newLine(this.getPts(Re)),xt.pendingNewLine=!1,xt.addText(_t),Re},Et.prototype.multiByteCharacter=function(Re,z){var K=this.current708Packet.data,j=K[Re+1],Z=K[Re+2];return Zt(j)&&Zt(Z)&&(Re=this.handleText(++Re,z,{isMultiByte:!0})),Re},Et.prototype.setCurrentWindow=function(Re,z){var K=this.current708Packet.data,j=K[Re],Z=j&7;return z.setCurrentWindow(Z),Re},Et.prototype.defineWindow=function(Re,z){var K=this.current708Packet.data,j=K[Re],Z=j&7;z.setCurrentWindow(Z);var fe=z.currentWindow;return j=K[++Re],fe.visible=(j&32)>>5,fe.rowLock=(j&16)>>4,fe.columnLock=(j&8)>>3,fe.priority=j&7,j=K[++Re],fe.relativePositioning=(j&128)>>7,fe.anchorVertical=j&127,j=K[++Re],fe.anchorHorizontal=j,j=K[++Re],fe.anchorPoint=(j&240)>>4,fe.rowCount=j&15,j=K[++Re],fe.columnCount=j&63,j=K[++Re],fe.windowStyle=(j&56)>>3,fe.penStyle=j&7,fe.virtualRowCount=fe.rowCount+1,Re},Et.prototype.setWindowAttributes=function(Re,z){var K=this.current708Packet.data,j=K[Re],Z=z.currentWindow.winAttr;return j=K[++Re],Z.fillOpacity=(j&192)>>6,Z.fillRed=(j&48)>>4,Z.fillGreen=(j&12)>>2,Z.fillBlue=j&3,j=K[++Re],Z.borderType=(j&192)>>6,Z.borderRed=(j&48)>>4,Z.borderGreen=(j&12)>>2,Z.borderBlue=j&3,j=K[++Re],Z.borderType+=(j&128)>>5,Z.wordWrap=(j&64)>>6,Z.printDirection=(j&48)>>4,Z.scrollDirection=(j&12)>>2,Z.justify=j&3,j=K[++Re],Z.effectSpeed=(j&240)>>4,Z.effectDirection=(j&12)>>2,Z.displayEffect=j&3,Re},Et.prototype.flushDisplayed=function(Re,z){for(var K=[],j=0;j<8;j++)z.windows[j].visible&&!z.windows[j].isEmpty()&&K.push(z.windows[j].getText());z.endPts=Re,z.text=K.join(`

`),this.pushCaption(z),z.startPts=Re},Et.prototype.pushCaption=function(Re){Re.text!==""&&(this.trigger("data",{startPts:Re.startPts,endPts:Re.endPts,text:Re.text,stream:"cc708_"+Re.serviceNum}),Re.text="",Re.startPts=Re.endPts)},Et.prototype.displayWindows=function(Re,z){var K=this.current708Packet.data,j=K[++Re],Z=this.getPts(Re);this.flushDisplayed(Z,z);for(var fe=0;fe<8;fe++)j&1<<fe&&(z.windows[fe].visible=1);return Re},Et.prototype.hideWindows=function(Re,z){var K=this.current708Packet.data,j=K[++Re],Z=this.getPts(Re);this.flushDisplayed(Z,z);for(var fe=0;fe<8;fe++)j&1<<fe&&(z.windows[fe].visible=0);return Re},Et.prototype.toggleWindows=function(Re,z){var K=this.current708Packet.data,j=K[++Re],Z=this.getPts(Re);this.flushDisplayed(Z,z);for(var fe=0;fe<8;fe++)j&1<<fe&&(z.windows[fe].visible^=1);return Re},Et.prototype.clearWindows=function(Re,z){var K=this.current708Packet.data,j=K[++Re],Z=this.getPts(Re);this.flushDisplayed(Z,z);for(var fe=0;fe<8;fe++)j&1<<fe&&z.windows[fe].clearText();return Re},Et.prototype.deleteWindows=function(Re,z){var K=this.current708Packet.data,j=K[++Re],Z=this.getPts(Re);this.flushDisplayed(Z,z);for(var fe=0;fe<8;fe++)j&1<<fe&&z.windows[fe].reset();return Re},Et.prototype.setPenAttributes=function(Re,z){var K=this.current708Packet.data,j=K[Re],Z=z.currentWindow.penAttr;return j=K[++Re],Z.textTag=(j&240)>>4,Z.offset=(j&12)>>2,Z.penSize=j&3,j=K[++Re],Z.italics=(j&128)>>7,Z.underline=(j&64)>>6,Z.edgeType=(j&56)>>3,Z.fontStyle=j&7,Re},Et.prototype.setPenColor=function(Re,z){var K=this.current708Packet.data,j=K[Re],Z=z.currentWindow.penColor;return j=K[++Re],Z.fgOpacity=(j&192)>>6,Z.fgRed=(j&48)>>4,Z.fgGreen=(j&12)>>2,Z.fgBlue=j&3,j=K[++Re],Z.bgOpacity=(j&192)>>6,Z.bgRed=(j&48)>>4,Z.bgGreen=(j&12)>>2,Z.bgBlue=j&3,j=K[++Re],Z.edgeRed=(j&48)>>4,Z.edgeGreen=(j&12)>>2,Z.edgeBlue=j&3,Re},Et.prototype.setPenLocation=function(Re,z){var K=this.current708Packet.data,j=K[Re],Z=z.currentWindow.penLoc;return z.currentWindow.pendingNewLine=!0,j=K[++Re],Z.row=j&15,j=K[++Re],Z.column=j&63,Re},Et.prototype.reset=function(Re,z){var K=this.getPts(Re);return this.flushDisplayed(K,z),this.initService(z.serviceNum,Re)};var Ct={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ht=function(z){return z===null?"":(z=Ct[z]||z,String.fromCharCode(z))},ct=14,Ot=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],rn=function(){for(var z=[],K=ct+1;K--;)z.push("");return z},gn=function Re(z,K){Re.prototype.init.call(this),this.field_=z||0,this.dataChannel_=K||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(j){var Z,fe,xe,Je,lt;if(Z=j.ccData&32639,Z===this.lastControlCode_){this.lastControlCode_=null;return}if((Z&61440)===4096?this.lastControlCode_=Z:Z!==this.PADDING_&&(this.lastControlCode_=null),xe=Z>>>8,Je=Z&255,Z!==this.PADDING_)if(Z===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(Z===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(j.pts),this.flushDisplayed(j.pts),fe=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=fe,this.startPts_=j.pts;else if(Z===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(j.pts);else if(Z===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(j.pts);else if(Z===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(j.pts);else if(Z===this.CARRIAGE_RETURN_)this.clearFormatting(j.pts),this.flushDisplayed(j.pts),this.shiftRowsUp_(),this.startPts_=j.pts;else if(Z===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(Z===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(j.pts),this.displayed_=rn();else if(Z===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=rn();else if(Z===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(j.pts),this.displayed_=rn()),this.mode_="paintOn",this.startPts_=j.pts;else if(this.isSpecialCharacter(xe,Je))xe=(xe&3)<<8,lt=Ht(xe|Je),this[this.mode_](j.pts,lt),this.column_++;else if(this.isExtCharacter(xe,Je))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),xe=(xe&3)<<8,lt=Ht(xe|Je),this[this.mode_](j.pts,lt),this.column_++;else if(this.isMidRowCode(xe,Je))this.clearFormatting(j.pts),this[this.mode_](j.pts," "),this.column_++,(Je&14)===14&&this.addFormatting(j.pts,["i"]),(Je&1)===1&&this.addFormatting(j.pts,["u"]);else if(this.isOffsetControlCode(xe,Je))this.column_+=Je&3;else if(this.isPAC(xe,Je)){var xt=Ot.indexOf(Z&7968);this.mode_==="rollUp"&&(xt-this.rollUpRows_+1<0&&(xt=this.rollUpRows_-1),this.setRollUp(j.pts,xt)),xt!==this.row_&&(this.clearFormatting(j.pts),this.row_=xt),Je&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(j.pts,["u"]),(Z&16)===16&&(this.column_=((Z&14)>>1)*4),this.isColorPAC(Je)&&(Je&14)===14&&this.addFormatting(j.pts,["i"])}else this.isNormalChar(xe)&&(Je===0&&(Je=null),lt=Ht(xe),lt+=Ht(Je),this[this.mode_](j.pts,lt),this.column_+=lt.length)}};gn.prototype=new e,gn.prototype.flushDisplayed=function(Re){var z=this.displayed_.map(function(K,j){try{return K.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+j+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");z.length&&this.trigger("data",{startPts:this.startPts_,endPts:Re,text:z,stream:this.name_})},gn.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=rn(),this.nonDisplayed_=rn(),this.lastControlCode_=null,this.column_=0,this.row_=ct,this.rollUpRows_=2,this.formatting_=[]},gn.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},gn.prototype.isSpecialCharacter=function(Re,z){return Re===this.EXT_&&z>=48&&z<=63},gn.prototype.isExtCharacter=function(Re,z){return(Re===this.EXT_+1||Re===this.EXT_+2)&&z>=32&&z<=63},gn.prototype.isMidRowCode=function(Re,z){return Re===this.EXT_&&z>=32&&z<=47},gn.prototype.isOffsetControlCode=function(Re,z){return Re===this.OFFSET_&&z>=33&&z<=35},gn.prototype.isPAC=function(Re,z){return Re>=this.BASE_&&Re<this.BASE_+8&&z>=64&&z<=127},gn.prototype.isColorPAC=function(Re){return Re>=64&&Re<=79||Re>=96&&Re<=127},gn.prototype.isNormalChar=function(Re){return Re>=32&&Re<=127},gn.prototype.setRollUp=function(Re,z){if(this.mode_!=="rollUp"&&(this.row_=ct,this.mode_="rollUp",this.flushDisplayed(Re),this.nonDisplayed_=rn(),this.displayed_=rn()),z!==void 0&&z!==this.row_)for(var K=0;K<this.rollUpRows_;K++)this.displayed_[z-K]=this.displayed_[this.row_-K],this.displayed_[this.row_-K]="";z===void 0&&(z=this.row_),this.topRow_=z-this.rollUpRows_+1},gn.prototype.addFormatting=function(Re,z){this.formatting_=this.formatting_.concat(z);var K=z.reduce(function(j,Z){return j+"<"+Z+">"},"");this[this.mode_](Re,K)},gn.prototype.clearFormatting=function(Re){if(this.formatting_.length){var z=this.formatting_.reverse().reduce(function(K,j){return K+"</"+j+">"},"");this.formatting_=[],this[this.mode_](Re,z)}},gn.prototype.popOn=function(Re,z){var K=this.nonDisplayed_[this.row_];K+=z,this.nonDisplayed_[this.row_]=K},gn.prototype.rollUp=function(Re,z){var K=this.displayed_[this.row_];K+=z,this.displayed_[this.row_]=K},gn.prototype.shiftRowsUp_=function(){var Re;for(Re=0;Re<this.topRow_;Re++)this.displayed_[Re]="";for(Re=this.row_+1;Re<ct+1;Re++)this.displayed_[Re]="";for(Re=this.topRow_;Re<this.row_;Re++)this.displayed_[Re]=this.displayed_[Re+1];this.displayed_[this.row_]=""},gn.prototype.paintOn=function(Re,z){var K=this.displayed_[this.row_];K+=z,this.displayed_[this.row_]=K};var Zn={CaptionStream:Yn,Cea608Stream:gn,Cea708Stream:Et},rt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},fr=8589934592,mt=4294967296,Fe="shared",Dt=function(z,K){var j=1;for(z>K&&(j=-1);Math.abs(K-z)>mt;)z+=j*fr;return z},Qe=function Re(z){var K,j;Re.prototype.init.call(this),this.type_=z||Fe,this.push=function(Z){this.type_!==Fe&&Z.type!==this.type_||(j===void 0&&(j=Z.dts),Z.dts=Dt(Z.dts,j),Z.pts=Dt(Z.pts,j),K=Z.dts,this.trigger("data",Z))},this.flush=function(){j=K,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){j=void 0,K=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Qe.prototype=new e;var yt={TimestampRolloverStream:Qe,handleRollover:Dt},ht=function(z,K,j){var Z,fe="";for(Z=K;Z<j;Z++)fe+="%"+("00"+z[Z].toString(16)).slice(-2);return fe},Nt=function(z,K,j){return decodeURIComponent(ht(z,K,j))},yn=function(z,K,j){return unescape(ht(z,K,j))},un=function(z){return z[0]<<21|z[1]<<14|z[2]<<7|z[3]},Dn={TXXX:function(z){var K;if(z.data[0]===3){for(K=1;K<z.data.length;K++)if(z.data[K]===0){z.description=Nt(z.data,1,K),z.value=Nt(z.data,K+1,z.data.length).replace(/\0*$/,"");break}z.data=z.value}},WXXX:function(z){var K;if(z.data[0]===3){for(K=1;K<z.data.length;K++)if(z.data[K]===0){z.description=Nt(z.data,1,K),z.url=Nt(z.data,K+1,z.data.length);break}}},PRIV:function(z){var K;for(K=0;K<z.data.length;K++)if(z.data[K]===0){z.owner=yn(z.data,0,K);break}z.privateData=z.data.subarray(K+1),z.data=z.privateData}},nr;nr=function(z){var K={descriptor:z&&z.descriptor},j=0,Z=[],fe=0,xe;if(nr.prototype.init.call(this),this.dispatchType=rt.METADATA_STREAM_TYPE.toString(16),K.descriptor)for(xe=0;xe<K.descriptor.length;xe++)this.dispatchType+=("00"+K.descriptor[xe].toString(16)).slice(-2);this.push=function(Je){var lt,xt,_t,Pt,Xt,Mn;if(Je.type==="timed-metadata"){if(Je.dataAlignmentIndicator&&(fe=0,Z.length=0),Z.length===0&&(Je.data.length<10||Je.data[0]!=="I".charCodeAt(0)||Je.data[1]!=="D".charCodeAt(0)||Je.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(Z.push(Je),fe+=Je.data.byteLength,Z.length===1&&(j=un(Je.data.subarray(6,10)),j+=10),!(fe<j)){for(lt={data:new Uint8Array(j),frames:[],pts:Z[0].pts,dts:Z[0].dts},Xt=0;Xt<j;)lt.data.set(Z[0].data.subarray(0,j-Xt),Xt),Xt+=Z[0].data.byteLength,fe-=Z[0].data.byteLength,Z.shift();xt=10,lt.data[5]&64&&(xt+=4,xt+=un(lt.data.subarray(10,14)),j-=un(lt.data.subarray(16,20)));do{if(_t=un(lt.data.subarray(xt+4,xt+8)),_t<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(Mn=String.fromCharCode(lt.data[xt],lt.data[xt+1],lt.data[xt+2],lt.data[xt+3]),Pt={id:Mn,data:lt.data.subarray(xt+10,xt+_t+10)},Pt.key=Pt.id,Dn[Pt.id]&&(Dn[Pt.id](Pt),Pt.owner==="com.apple.streaming.transportStreamTimestamp")){var Ln=Pt.data,wn=(Ln[3]&1)<<30|Ln[4]<<22|Ln[5]<<14|Ln[6]<<6|Ln[7]>>>2;wn*=4,wn+=Ln[7]&3,Pt.timeStamp=wn,lt.pts===void 0&&lt.dts===void 0&&(lt.pts=Pt.timeStamp,lt.dts=Pt.timeStamp),this.trigger("timestamp",Pt)}lt.frames.push(Pt),xt+=10,xt+=_t}while(xt<j);this.trigger("data",lt)}}}},nr.prototype=new e;var bn=nr,Hn=yt.TimestampRolloverStream,Fn,yr,Yr,Mr=188,Br=71;Fn=function(){var z=new Uint8Array(Mr),K=0;Fn.prototype.init.call(this),this.push=function(j){var Z=0,fe=Mr,xe;for(K?(xe=new Uint8Array(j.byteLength+K),xe.set(z.subarray(0,K)),xe.set(j,K),K=0):xe=j;fe<xe.byteLength;){if(xe[Z]===Br&&xe[fe]===Br){this.trigger("data",xe.subarray(Z,fe)),Z+=Mr,fe+=Mr;continue}Z++,fe++}Z<xe.byteLength&&(z.set(xe.subarray(Z),0),K=xe.byteLength-Z)},this.flush=function(){K===Mr&&z[0]===Br&&(this.trigger("data",z),K=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){K=0,this.trigger("reset")}},Fn.prototype=new e,yr=function(){var z,K,j,Z;yr.prototype.init.call(this),Z=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,z=function(xe,Je){var lt=0;Je.payloadUnitStartIndicator&&(lt+=xe[lt]+1),Je.type==="pat"?K(xe.subarray(lt),Je):j(xe.subarray(lt),Je)},K=function(xe,Je){Je.section_number=xe[7],Je.last_section_number=xe[8],Z.pmtPid=(xe[10]&31)<<8|xe[11],Je.pmtPid=Z.pmtPid},j=function(xe,Je){var lt,xt,_t,Pt;if(xe[5]&1){for(Z.programMapTable={video:null,audio:null,"timed-metadata":{}},lt=(xe[1]&15)<<8|xe[2],xt=3+lt-4,_t=(xe[10]&15)<<8|xe[11],Pt=12+_t;Pt<xt;){var Xt=xe[Pt],Mn=(xe[Pt+1]&31)<<8|xe[Pt+2];Xt===rt.H264_STREAM_TYPE&&Z.programMapTable.video===null?Z.programMapTable.video=Mn:Xt===rt.ADTS_STREAM_TYPE&&Z.programMapTable.audio===null?Z.programMapTable.audio=Mn:Xt===rt.METADATA_STREAM_TYPE&&(Z.programMapTable["timed-metadata"][Mn]=Xt),Pt+=((xe[Pt+3]&15)<<8|xe[Pt+4])+5}Je.programMapTable=Z.programMapTable}},this.push=function(fe){var xe={},Je=4;if(xe.payloadUnitStartIndicator=!!(fe[1]&64),xe.pid=fe[1]&31,xe.pid<<=8,xe.pid|=fe[2],(fe[3]&48)>>>4>1&&(Je+=fe[Je]+1),xe.pid===0)xe.type="pat",z(fe.subarray(Je),xe),this.trigger("data",xe);else if(xe.pid===this.pmtPid)for(xe.type="pmt",z(fe.subarray(Je),xe),this.trigger("data",xe);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([fe,Je,xe]):this.processPes_(fe,Je,xe)},this.processPes_=function(fe,xe,Je){Je.pid===this.programMapTable.video?Je.streamType=rt.H264_STREAM_TYPE:Je.pid===this.programMapTable.audio?Je.streamType=rt.ADTS_STREAM_TYPE:Je.streamType=this.programMapTable["timed-metadata"][Je.pid],Je.type="pes",Je.data=fe.subarray(xe),this.trigger("data",Je)}},yr.prototype=new e,yr.STREAM_TYPES={h264:27,adts:15},Yr=function(){var z=this,K=!1,j={data:[],size:0},Z={data:[],size:0},fe={data:[],size:0},xe,Je=function(_t,Pt){var Xt,Mn=_t[0]<<16|_t[1]<<8|_t[2];Pt.data=new Uint8Array,Mn===1&&(Pt.packetLength=6+(_t[4]<<8|_t[5]),Pt.dataAlignmentIndicator=(_t[6]&4)!==0,Xt=_t[7],Xt&192&&(Pt.pts=(_t[9]&14)<<27|(_t[10]&255)<<20|(_t[11]&254)<<12|(_t[12]&255)<<5|(_t[13]&254)>>>3,Pt.pts*=4,Pt.pts+=(_t[13]&6)>>>1,Pt.dts=Pt.pts,Xt&64&&(Pt.dts=(_t[14]&14)<<27|(_t[15]&255)<<20|(_t[16]&254)<<12|(_t[17]&255)<<5|(_t[18]&254)>>>3,Pt.dts*=4,Pt.dts+=(_t[18]&6)>>>1)),Pt.data=_t.subarray(9+_t[8]))},lt=function(_t,Pt,Xt){var Mn=new Uint8Array(_t.size),Ln={type:Pt},wn=0,xr=0,ma=!1,Ss;if(!(!_t.data.length||_t.size<9)){for(Ln.trackId=_t.data[0].pid,wn=0;wn<_t.data.length;wn++)Ss=_t.data[wn],Mn.set(Ss.data,xr),xr+=Ss.data.byteLength;Je(Mn,Ln),ma=Pt==="video"||Ln.packetLength<=_t.size,(Xt||ma)&&(_t.size=0,_t.data.length=0),ma&&z.trigger("data",Ln)}};Yr.prototype.init.call(this),this.push=function(xt){({pat:function(){},pes:function(){var Pt,Xt;switch(xt.streamType){case rt.H264_STREAM_TYPE:Pt=j,Xt="video";break;case rt.ADTS_STREAM_TYPE:Pt=Z,Xt="audio";break;case rt.METADATA_STREAM_TYPE:Pt=fe,Xt="timed-metadata";break;default:return}xt.payloadUnitStartIndicator&&lt(Pt,Xt,!0),Pt.data.push(xt),Pt.size+=xt.data.byteLength},pmt:function(){var Pt={type:"metadata",tracks:[]};xe=xt.programMapTable,xe.video!==null&&Pt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+xe.video,codec:"avc",type:"video"}),xe.audio!==null&&Pt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+xe.audio,codec:"adts",type:"audio"}),K=!0,z.trigger("data",Pt)}})[xt.type]()},this.reset=function(){j.size=0,j.data.length=0,Z.size=0,Z.data.length=0,this.trigger("reset")},this.flushStreams_=function(){lt(j,"video"),lt(Z,"audio"),lt(fe,"timed-metadata")},this.flush=function(){if(!K&&xe){var xt={type:"metadata",tracks:[]};xe.video!==null&&xt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+xe.video,codec:"avc",type:"video"}),xe.audio!==null&&xt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+xe.audio,codec:"adts",type:"audio"}),z.trigger("data",xt)}K=!1,this.flushStreams_(),this.trigger("done")}},Yr.prototype=new e;var ar={PAT_PID:0,MP2T_PACKET_LENGTH:Mr,TransportPacketStream:Fn,TransportParseStream:yr,ElementaryStream:Yr,TimestampRolloverStream:Hn,CaptionStream:Zn.CaptionStream,Cea608Stream:Zn.Cea608Stream,Cea708Stream:Zn.Cea708Stream,MetadataStream:bn};for(var Pi in rt)rt.hasOwnProperty(Pi)&&(ar[Pi]=rt[Pi]);var zr=ar,Ns=ot.ONE_SECOND_IN_TS,ns,Pr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ns=function(z){var K,j=0;ns.prototype.init.call(this),this.skipWarn_=function(Z,fe){this.trigger("log",{level:"warn",message:"adts skiping bytes "+Z+" to "+fe+" in frame "+j+" outside syncword"})},this.push=function(Z){var fe=0,xe,Je,lt,xt,_t;if(z||(j=0),Z.type==="audio"){K&&K.length?(lt=K,K=new Uint8Array(lt.byteLength+Z.data.byteLength),K.set(lt),K.set(Z.data,lt.byteLength)):K=Z.data;for(var Pt;fe+7<K.length;){if(K[fe]!==255||(K[fe+1]&246)!==240){typeof Pt!="number"&&(Pt=fe),fe++;continue}if(typeof Pt=="number"&&(this.skipWarn_(Pt,fe),Pt=null),Je=(~K[fe+1]&1)*2,xe=(K[fe+3]&3)<<11|K[fe+4]<<3|(K[fe+5]&224)>>5,xt=((K[fe+6]&3)+1)*1024,_t=xt*Ns/Pr[(K[fe+2]&60)>>>2],K.byteLength-fe<xe)break;this.trigger("data",{pts:Z.pts+j*_t,dts:Z.dts+j*_t,sampleCount:xt,audioobjecttype:(K[fe+2]>>>6&3)+1,channelcount:(K[fe+2]&1)<<2|(K[fe+3]&192)>>>6,samplerate:Pr[(K[fe+2]&60)>>>2],samplingfrequencyindex:(K[fe+2]&60)>>>2,samplesize:16,data:K.subarray(fe+7+Je,fe+xe)}),j++,fe+=xe}typeof Pt=="number"&&(this.skipWarn_(Pt,fe),Pt=null),K=K.subarray(fe)}},this.flush=function(){j=0,this.trigger("done")},this.reset=function(){K=void 0,this.trigger("reset")},this.endTimeline=function(){K=void 0,this.trigger("endedtimeline")}},ns.prototype=new e;var nl=ns,Ri;Ri=function(z){var K=z.byteLength,j=0,Z=0;this.length=function(){return 8*K},this.bitsAvailable=function(){return 8*K+Z},this.loadWord=function(){var fe=z.byteLength-K,xe=new Uint8Array(4),Je=Math.min(4,K);if(Je===0)throw new Error("no bytes available");xe.set(z.subarray(fe,fe+Je)),j=new DataView(xe.buffer).getUint32(0),Z=Je*8,K-=Je},this.skipBits=function(fe){var xe;Z>fe?(j<<=fe,Z-=fe):(fe-=Z,xe=Math.floor(fe/8),fe-=xe*8,K-=xe,this.loadWord(),j<<=fe,Z-=fe)},this.readBits=function(fe){var xe=Math.min(Z,fe),Je=j>>>32-xe;return Z-=xe,Z>0?j<<=xe:K>0&&this.loadWord(),xe=fe-xe,xe>0?Je<<xe|this.readBits(xe):Je},this.skipLeadingZeros=function(){var fe;for(fe=0;fe<Z;++fe)if(j&2147483648>>>fe)return j<<=fe,Z-=fe,fe;return this.loadWord(),fe+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var fe=this.skipLeadingZeros();return this.readBits(fe+1)-1},this.readExpGolomb=function(){var fe=this.readUnsignedExpGolomb();return 1&fe?1+fe>>>1:-1*(fe>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var rs=Ri,Ea,Yi,Ji;Yi=function(){var z=0,K,j;Yi.prototype.init.call(this),this.push=function(Z){var fe;j?(fe=new Uint8Array(j.byteLength+Z.data.byteLength),fe.set(j),fe.set(Z.data,j.byteLength),j=fe):j=Z.data;for(var xe=j.byteLength;z<xe-3;z++)if(j[z+2]===1){K=z+5;break}for(;K<xe;)switch(j[K]){case 0:if(j[K-1]!==0){K+=2;break}else if(j[K-2]!==0){K++;break}z+3!==K-2&&this.trigger("data",j.subarray(z+3,K-2));do K++;while(j[K]!==1&&K<xe);z=K-2,K+=3;break;case 1:if(j[K-1]!==0||j[K-2]!==0){K+=3;break}this.trigger("data",j.subarray(z+3,K-2)),z=K-2,K+=3;break;default:K+=3;break}j=j.subarray(z),K-=z,z=0},this.reset=function(){j=null,z=0,this.trigger("reset")},this.flush=function(){j&&j.byteLength>3&&this.trigger("data",j.subarray(z+3)),j=null,z=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Yi.prototype=new e,Ji={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ea=function(){var z=new Yi,K,j,Z,fe,xe,Je,lt;Ea.prototype.init.call(this),K=this,this.push=function(xt){xt.type==="video"&&(j=xt.trackId,Z=xt.pts,fe=xt.dts,z.push(xt))},z.on("data",function(xt){var _t={trackId:j,pts:Z,dts:fe,data:xt,nalUnitTypeCode:xt[0]&31};switch(_t.nalUnitTypeCode){case 5:_t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:_t.nalUnitType="sei_rbsp",_t.escapedRBSP=xe(xt.subarray(1));break;case 7:_t.nalUnitType="seq_parameter_set_rbsp",_t.escapedRBSP=xe(xt.subarray(1)),_t.config=Je(_t.escapedRBSP);break;case 8:_t.nalUnitType="pic_parameter_set_rbsp";break;case 9:_t.nalUnitType="access_unit_delimiter_rbsp";break}K.trigger("data",_t)}),z.on("done",function(){K.trigger("done")}),z.on("partialdone",function(){K.trigger("partialdone")}),z.on("reset",function(){K.trigger("reset")}),z.on("endedtimeline",function(){K.trigger("endedtimeline")}),this.flush=function(){z.flush()},this.partialFlush=function(){z.partialFlush()},this.reset=function(){z.reset()},this.endTimeline=function(){z.endTimeline()},lt=function(_t,Pt){var Xt=8,Mn=8,Ln,wn;for(Ln=0;Ln<_t;Ln++)Mn!==0&&(wn=Pt.readExpGolomb(),Mn=(Xt+wn+256)%256),Xt=Mn===0?Xt:Mn},xe=function(_t){for(var Pt=_t.byteLength,Xt=[],Mn=1,Ln,wn;Mn<Pt-2;)_t[Mn]===0&&_t[Mn+1]===0&&_t[Mn+2]===3?(Xt.push(Mn+2),Mn+=2):Mn++;if(Xt.length===0)return _t;Ln=Pt-Xt.length,wn=new Uint8Array(Ln);var xr=0;for(Mn=0;Mn<Ln;xr++,Mn++)xr===Xt[0]&&(xr++,Xt.shift()),wn[Mn]=_t[xr];return wn},Je=function(_t){var Pt=0,Xt=0,Mn=0,Ln=0,wn,xr,ma,Ss,ac,_m,Tb,Pl,Cb,wh,sc,sa=[1,1],Rl,Xd;if(wn=new rs(_t),xr=wn.readUnsignedByte(),Ss=wn.readUnsignedByte(),ma=wn.readUnsignedByte(),wn.skipUnsignedExpGolomb(),Ji[xr]&&(ac=wn.readUnsignedExpGolomb(),ac===3&&wn.skipBits(1),wn.skipUnsignedExpGolomb(),wn.skipUnsignedExpGolomb(),wn.skipBits(1),wn.readBoolean()))for(sc=ac!==3?8:12,Xd=0;Xd<sc;Xd++)wn.readBoolean()&&(Xd<6?lt(16,wn):lt(64,wn));if(wn.skipUnsignedExpGolomb(),_m=wn.readUnsignedExpGolomb(),_m===0)wn.readUnsignedExpGolomb();else if(_m===1)for(wn.skipBits(1),wn.skipExpGolomb(),wn.skipExpGolomb(),Tb=wn.readUnsignedExpGolomb(),Xd=0;Xd<Tb;Xd++)wn.skipExpGolomb();if(wn.skipUnsignedExpGolomb(),wn.skipBits(1),Pl=wn.readUnsignedExpGolomb(),Cb=wn.readUnsignedExpGolomb(),wh=wn.readBits(1),wh===0&&wn.skipBits(1),wn.skipBits(1),wn.readBoolean()&&(Pt=wn.readUnsignedExpGolomb(),Xt=wn.readUnsignedExpGolomb(),Mn=wn.readUnsignedExpGolomb(),Ln=wn.readUnsignedExpGolomb()),wn.readBoolean()&&wn.readBoolean()){switch(Rl=wn.readUnsignedByte(),Rl){case 1:sa=[1,1];break;case 2:sa=[12,11];break;case 3:sa=[10,11];break;case 4:sa=[16,11];break;case 5:sa=[40,33];break;case 6:sa=[24,11];break;case 7:sa=[20,11];break;case 8:sa=[32,11];break;case 9:sa=[80,33];break;case 10:sa=[18,11];break;case 11:sa=[15,11];break;case 12:sa=[64,33];break;case 13:sa=[160,99];break;case 14:sa=[4,3];break;case 15:sa=[3,2];break;case 16:sa=[2,1];break;case 255:{sa=[wn.readUnsignedByte()<<8|wn.readUnsignedByte(),wn.readUnsignedByte()<<8|wn.readUnsignedByte()];break}}sa&&sa[0]/sa[1]}return{profileIdc:xr,levelIdc:ma,profileCompatibility:Ss,width:(Pl+1)*16-Pt*2-Xt*2,height:(2-wh)*(Cb+1)*16-Mn*2-Ln*2,sarRatio:sa}}},Ea.prototype=new e;var aa={H264Stream:Ea,NalByteStream:Yi},Eo=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],zv=function(z,K){var j=z[K+6]<<21|z[K+7]<<14|z[K+8]<<7|z[K+9],Z=z[K+5],fe=(Z&16)>>4;return j=j>=0?j:0,fe?j+20:j+10},Sr=function Re(z,K){return z.length-K<10||z[K]!=="I".charCodeAt(0)||z[K+1]!=="D".charCodeAt(0)||z[K+2]!=="3".charCodeAt(0)?K:(K+=zv(z,K),Re(z,K))},Kd=function(z){var K=Sr(z,0);return z.length>=K+2&&(z[K]&255)===255&&(z[K+1]&240)===240&&(z[K+1]&22)===16},Me=function(z){return z[0]<<21|z[1]<<14|z[2]<<7|z[3]},Ae=function(z,K,j){var Z,fe="";for(Z=K;Z<j;Z++)fe+="%"+("00"+z[Z].toString(16)).slice(-2);return fe},We=function(z,K,j){return unescape(Ae(z,K,j))},ze=function(z,K){var j=(z[K+5]&224)>>5,Z=z[K+4]<<3,fe=z[K+3]&6144;return fe|Z|j},qe=function(z,K){return z[K]==="I".charCodeAt(0)&&z[K+1]==="D".charCodeAt(0)&&z[K+2]==="3".charCodeAt(0)?"timed-metadata":z[K]&!0&&(z[K+1]&240)===240?"audio":null},qt=function(z){for(var K=0;K+5<z.length;){if(z[K]!==255||(z[K+1]&246)!==240){K++;continue}return Eo[(z[K+2]&60)>>>2]}return null},Qt=function(z){var K,j,Z,fe;K=10,z[5]&64&&(K+=4,K+=Me(z.subarray(10,14)));do{if(j=Me(z.subarray(K+4,K+8)),j<1)return null;if(fe=String.fromCharCode(z[K],z[K+1],z[K+2],z[K+3]),fe==="PRIV"){Z=z.subarray(K+10,K+j+10);for(var xe=0;xe<Z.byteLength;xe++)if(Z[xe]===0){var Je=We(Z,0,xe);if(Je==="com.apple.streaming.transportStreamTimestamp"){var lt=Z.subarray(xe+1),xt=(lt[3]&1)<<30|lt[4]<<22|lt[5]<<14|lt[6]<<6|lt[7]>>>2;return xt*=4,xt+=lt[7]&3,xt}break}}K+=10,K+=j}while(K<z.byteLength);return null},qn={isLikelyAacData:Kd,parseId3TagSize:zv,parseAdtsSize:ze,parseType:qe,parseSampleRate:qt,parseAacTimestamp:Qt},vt;vt=function(){var z=new Uint8Array,K=0;vt.prototype.init.call(this),this.setTimestamp=function(j){K=j},this.push=function(j){var Z=0,fe=0,xe,Je,lt,xt;for(z.length?(xt=z.length,z=new Uint8Array(j.byteLength+xt),z.set(z.subarray(0,xt)),z.set(j,xt)):z=j;z.length-fe>=3;){if(z[fe]==="I".charCodeAt(0)&&z[fe+1]==="D".charCodeAt(0)&&z[fe+2]==="3".charCodeAt(0)){if(z.length-fe<10||(Z=qn.parseId3TagSize(z,fe),fe+Z>z.length))break;Je={type:"timed-metadata",data:z.subarray(fe,fe+Z)},this.trigger("data",Je),fe+=Z;continue}else if((z[fe]&255)===255&&(z[fe+1]&240)===240){if(z.length-fe<7||(Z=qn.parseAdtsSize(z,fe),fe+Z>z.length))break;lt={type:"audio",data:z.subarray(fe,fe+Z),pts:K,dts:K},this.trigger("data",lt),fe+=Z;continue}fe++}xe=z.length-fe,xe>0?z=z.subarray(fe):z=new Uint8Array},this.reset=function(){z=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){z=new Uint8Array,this.trigger("endedtimeline")}},vt.prototype=new e;var Cn=vt,rr=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],pn=rr,vr=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Jn=vr,_r=aa.H264Stream,dr=qn.isLikelyAacData,Li=ot.ONE_SECOND_IN_TS,mn,Or,qr,ii,ea=function(z,K){K.stream=z,this.trigger("log",K)},nc=function(z,K){for(var j=Object.keys(K),Z=0;Z<j.length;Z++){var fe=j[Z];fe==="headOfPipeline"||!K[fe].on||K[fe].on("log",ea.bind(z,fe))}},Hv=function(z,K){var j;if(z.length!==K.length)return!1;for(j=0;j<z.length;j++)if(z[j]!==K[j])return!1;return!0},_h=function(z,K,j,Z,fe,xe){var Je=j-K,lt=Z-K,xt=fe-j;return{start:{dts:z,pts:z+Je},end:{dts:z+lt,pts:z+xt},prependedContentDuration:xe,baseMediaDecodeTime:z}};Or=function(z,K){var j=[],Z,fe=0,xe=0,Je=1/0;K=K||{},Z=K.firstSequenceNumber||0,Or.prototype.init.call(this),this.push=function(lt){Mt.collectDtsInfo(z,lt),z&&pn.forEach(function(xt){z[xt]=lt[xt]}),j.push(lt)},this.setEarliestDts=function(lt){fe=lt},this.setVideoBaseMediaDecodeTime=function(lt){Je=lt},this.setAudioAppendStart=function(lt){xe=lt},this.flush=function(){var lt,xt,_t,Pt,Xt,Mn,Ln;if(j.length===0){this.trigger("done","AudioSegmentStream");return}lt=Ie.trimAdtsFramesByEarliestDts(j,z,fe),z.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(z,K.keepOriginalTimestamps),Ln=Ie.prefixWithSilence(z,lt,xe,Je),z.samples=Ie.generateSampleTable(lt),_t=de.mdat(Ie.concatenateFrameData(lt)),j=[],xt=de.moof(Z,[z]),Pt=new Uint8Array(xt.byteLength+_t.byteLength),Z++,Pt.set(xt),Pt.set(_t,xt.byteLength),Mt.clearDtsInfo(z),Xt=Math.ceil(Li*1024/z.samplerate),lt.length&&(Mn=lt.length*Xt,this.trigger("segmentTimingInfo",_h(ot.audioTsToVideoTs(z.baseMediaDecodeTime,z.samplerate),lt[0].dts,lt[0].pts,lt[0].dts+Mn,lt[0].pts+Mn,Ln||0)),this.trigger("timingInfo",{start:lt[0].pts,end:lt[0].pts+Mn})),this.trigger("data",{track:z,boxes:Pt}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Mt.clearDtsInfo(z),j=[],this.trigger("reset")}},Or.prototype=new e,mn=function(z,K){var j,Z=[],fe=[],xe,Je;K=K||{},j=K.firstSequenceNumber||0,mn.prototype.init.call(this),delete z.minPTS,this.gopCache_=[],this.push=function(lt){Mt.collectDtsInfo(z,lt),lt.nalUnitType==="seq_parameter_set_rbsp"&&!xe&&(xe=lt.config,z.sps=[lt.data],Jn.forEach(function(xt){z[xt]=xe[xt]},this)),lt.nalUnitType==="pic_parameter_set_rbsp"&&!Je&&(Je=lt.data,z.pps=[lt.data]),Z.push(lt)},this.flush=function(){for(var lt,xt,_t,Pt,Xt,Mn,Ln=0,wn,xr;Z.length&&Z[0].nalUnitType!=="access_unit_delimiter_rbsp";)Z.shift();if(Z.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(lt=Ue.groupNalsIntoFrames(Z),_t=Ue.groupFramesIntoGops(lt),_t[0][0].keyFrame||(xt=this.getGopForFusion_(Z[0],z),xt?(Ln=xt.duration,_t.unshift(xt),_t.byteLength+=xt.byteLength,_t.nalCount+=xt.nalCount,_t.pts=xt.pts,_t.dts=xt.dts,_t.duration+=xt.duration):_t=Ue.extendFirstKeyFrame(_t)),fe.length){var ma;if(K.alignGopsAtEnd?ma=this.alignGopsAtEnd_(_t):ma=this.alignGopsAtStart_(_t),!ma){this.gopCache_.unshift({gop:_t.pop(),pps:z.pps,sps:z.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),Z=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Mt.clearDtsInfo(z),_t=ma}Mt.collectDtsInfo(z,_t),z.samples=Ue.generateSampleTable(_t),Xt=de.mdat(Ue.concatenateNalData(_t)),z.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(z,K.keepOriginalTimestamps),this.trigger("processedGopsInfo",_t.map(function(Ss){return{pts:Ss.pts,dts:Ss.dts,byteLength:Ss.byteLength}})),wn=_t[0],xr=_t[_t.length-1],this.trigger("segmentTimingInfo",_h(z.baseMediaDecodeTime,wn.dts,wn.pts,xr.dts+xr.duration,xr.pts+xr.duration,Ln)),this.trigger("timingInfo",{start:_t[0].pts,end:_t[_t.length-1].pts+_t[_t.length-1].duration}),this.gopCache_.unshift({gop:_t.pop(),pps:z.pps,sps:z.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),Z=[],this.trigger("baseMediaDecodeTime",z.baseMediaDecodeTime),this.trigger("timelineStartInfo",z.timelineStartInfo),Pt=de.moof(j,[z]),Mn=new Uint8Array(Pt.byteLength+Xt.byteLength),j++,Mn.set(Pt),Mn.set(Xt,Pt.byteLength),this.trigger("data",{track:z,boxes:Mn}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),Z=[],this.gopCache_.length=0,fe.length=0,this.trigger("reset")},this.resetStream_=function(){Mt.clearDtsInfo(z),xe=void 0,Je=void 0},this.getGopForFusion_=function(lt){var xt=45e3,_t=1e4,Pt=1/0,Xt,Mn,Ln,wn,xr;for(xr=0;xr<this.gopCache_.length;xr++)wn=this.gopCache_[xr],Ln=wn.gop,!(!(z.pps&&Hv(z.pps[0],wn.pps[0]))||!(z.sps&&Hv(z.sps[0],wn.sps[0])))&&(Ln.dts<z.timelineStartInfo.dts||(Xt=lt.dts-Ln.dts-Ln.duration,Xt>=-_t&&Xt<=xt&&(!Mn||Pt>Xt)&&(Mn=wn,Pt=Xt)));return Mn?Mn.gop:null},this.alignGopsAtStart_=function(lt){var xt,_t,Pt,Xt,Mn,Ln,wn,xr;for(Mn=lt.byteLength,Ln=lt.nalCount,wn=lt.duration,xt=_t=0;xt<fe.length&&_t<lt.length&&(Pt=fe[xt],Xt=lt[_t],Pt.pts!==Xt.pts);){if(Xt.pts>Pt.pts){xt++;continue}_t++,Mn-=Xt.byteLength,Ln-=Xt.nalCount,wn-=Xt.duration}return _t===0?lt:_t===lt.length?null:(xr=lt.slice(_t),xr.byteLength=Mn,xr.duration=wn,xr.nalCount=Ln,xr.pts=xr[0].pts,xr.dts=xr[0].dts,xr)},this.alignGopsAtEnd_=function(lt){var xt,_t,Pt,Xt,Mn,Ln;for(xt=fe.length-1,_t=lt.length-1,Mn=null,Ln=!1;xt>=0&&_t>=0;){if(Pt=fe[xt],Xt=lt[_t],Pt.pts===Xt.pts){Ln=!0;break}if(Pt.pts>Xt.pts){xt--;continue}xt===fe.length-1&&(Mn=_t),_t--}if(!Ln&&Mn===null)return null;var wn;if(Ln?wn=_t:wn=Mn,wn===0)return lt;var xr=lt.slice(wn),ma=xr.reduce(function(Ss,ac){return Ss.byteLength+=ac.byteLength,Ss.duration+=ac.duration,Ss.nalCount+=ac.nalCount,Ss},{byteLength:0,duration:0,nalCount:0});return xr.byteLength=ma.byteLength,xr.duration=ma.duration,xr.nalCount=ma.nalCount,xr.pts=xr[0].pts,xr.dts=xr[0].dts,xr},this.alignGopsWith=function(lt){fe=lt}},mn.prototype=new e,ii=function(z,K){this.numberOfTracks=0,this.metadataStream=K,z=z||{},typeof z.remux<"u"?this.remuxTracks=!!z.remux:this.remuxTracks=!0,typeof z.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=z.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ii.prototype.init.call(this),this.push=function(j){if(j.text)return this.pendingCaptions.push(j);if(j.frames)return this.pendingMetadata.push(j);this.pendingTracks.push(j.track),this.pendingBytes+=j.boxes.byteLength,j.track.type==="video"&&(this.videoTrack=j.track,this.pendingBoxes.push(j.boxes)),j.track.type==="audio"&&(this.audioTrack=j.track,this.pendingBoxes.unshift(j.boxes))}},ii.prototype=new e,ii.prototype.flush=function(Re){var z=0,K={captions:[],captionStreams:{},metadata:[],info:{}},j,Z,fe,xe=0,Je;if(this.pendingTracks.length<this.numberOfTracks){if(Re!=="VideoSegmentStream"&&Re!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(xe=this.videoTrack.timelineStartInfo.pts,Jn.forEach(function(lt){K.info[lt]=this.videoTrack[lt]},this)):this.audioTrack&&(xe=this.audioTrack.timelineStartInfo.pts,pn.forEach(function(lt){K.info[lt]=this.audioTrack[lt]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?K.type=this.pendingTracks[0].type:K.type="combined",this.emittedTracks+=this.pendingTracks.length,fe=de.initSegment(this.pendingTracks),K.initSegment=new Uint8Array(fe.byteLength),K.initSegment.set(fe),K.data=new Uint8Array(this.pendingBytes),Je=0;Je<this.pendingBoxes.length;Je++)K.data.set(this.pendingBoxes[Je],z),z+=this.pendingBoxes[Je].byteLength;for(Je=0;Je<this.pendingCaptions.length;Je++)j=this.pendingCaptions[Je],j.startTime=ot.metadataTsToSeconds(j.startPts,xe,this.keepOriginalTimestamps),j.endTime=ot.metadataTsToSeconds(j.endPts,xe,this.keepOriginalTimestamps),K.captionStreams[j.stream]=!0,K.captions.push(j);for(Je=0;Je<this.pendingMetadata.length;Je++)Z=this.pendingMetadata[Je],Z.cueTime=ot.metadataTsToSeconds(Z.pts,xe,this.keepOriginalTimestamps),K.metadata.push(Z);for(K.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",K),Je=0;Je<K.captions.length;Je++)j=K.captions[Je],this.trigger("caption",j);for(Je=0;Je<K.metadata.length;Je++)Z=K.metadata[Je],this.trigger("id3Frame",Z)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ii.prototype.setRemux=function(Re){this.remuxTracks=Re},qr=function(z){var K=this,j=!0,Z,fe;qr.prototype.init.call(this),z=z||{},this.baseMediaDecodeTime=z.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var xe={};this.transmuxPipeline_=xe,xe.type="aac",xe.metadataStream=new zr.MetadataStream,xe.aacStream=new Cn,xe.audioTimestampRolloverStream=new zr.TimestampRolloverStream("audio"),xe.timedMetadataTimestampRolloverStream=new zr.TimestampRolloverStream("timed-metadata"),xe.adtsStream=new nl,xe.coalesceStream=new ii(z,xe.metadataStream),xe.headOfPipeline=xe.aacStream,xe.aacStream.pipe(xe.audioTimestampRolloverStream).pipe(xe.adtsStream),xe.aacStream.pipe(xe.timedMetadataTimestampRolloverStream).pipe(xe.metadataStream).pipe(xe.coalesceStream),xe.metadataStream.on("timestamp",function(Je){xe.aacStream.setTimestamp(Je.timeStamp)}),xe.aacStream.on("data",function(Je){Je.type!=="timed-metadata"&&Je.type!=="audio"||xe.audioSegmentStream||(fe=fe||{timelineStartInfo:{baseMediaDecodeTime:K.baseMediaDecodeTime},codec:"adts",type:"audio"},xe.coalesceStream.numberOfTracks++,xe.audioSegmentStream=new Or(fe,z),xe.audioSegmentStream.on("log",K.getLogTrigger_("audioSegmentStream")),xe.audioSegmentStream.on("timingInfo",K.trigger.bind(K,"audioTimingInfo")),xe.adtsStream.pipe(xe.audioSegmentStream).pipe(xe.coalesceStream),K.trigger("trackinfo",{hasAudio:!!fe,hasVideo:!!Z}))}),xe.coalesceStream.on("data",this.trigger.bind(this,"data")),xe.coalesceStream.on("done",this.trigger.bind(this,"done")),nc(this,xe)},this.setupTsPipeline=function(){var xe={};this.transmuxPipeline_=xe,xe.type="ts",xe.metadataStream=new zr.MetadataStream,xe.packetStream=new zr.TransportPacketStream,xe.parseStream=new zr.TransportParseStream,xe.elementaryStream=new zr.ElementaryStream,xe.timestampRolloverStream=new zr.TimestampRolloverStream,xe.adtsStream=new nl,xe.h264Stream=new _r,xe.captionStream=new zr.CaptionStream(z),xe.coalesceStream=new ii(z,xe.metadataStream),xe.headOfPipeline=xe.packetStream,xe.packetStream.pipe(xe.parseStream).pipe(xe.elementaryStream).pipe(xe.timestampRolloverStream),xe.timestampRolloverStream.pipe(xe.h264Stream),xe.timestampRolloverStream.pipe(xe.adtsStream),xe.timestampRolloverStream.pipe(xe.metadataStream).pipe(xe.coalesceStream),xe.h264Stream.pipe(xe.captionStream).pipe(xe.coalesceStream),xe.elementaryStream.on("data",function(Je){var lt;if(Je.type==="metadata"){for(lt=Je.tracks.length;lt--;)!Z&&Je.tracks[lt].type==="video"?(Z=Je.tracks[lt],Z.timelineStartInfo.baseMediaDecodeTime=K.baseMediaDecodeTime):!fe&&Je.tracks[lt].type==="audio"&&(fe=Je.tracks[lt],fe.timelineStartInfo.baseMediaDecodeTime=K.baseMediaDecodeTime);Z&&!xe.videoSegmentStream&&(xe.coalesceStream.numberOfTracks++,xe.videoSegmentStream=new mn(Z,z),xe.videoSegmentStream.on("log",K.getLogTrigger_("videoSegmentStream")),xe.videoSegmentStream.on("timelineStartInfo",function(xt){fe&&!z.keepOriginalTimestamps&&(fe.timelineStartInfo=xt,xe.audioSegmentStream.setEarliestDts(xt.dts-K.baseMediaDecodeTime))}),xe.videoSegmentStream.on("processedGopsInfo",K.trigger.bind(K,"gopInfo")),xe.videoSegmentStream.on("segmentTimingInfo",K.trigger.bind(K,"videoSegmentTimingInfo")),xe.videoSegmentStream.on("baseMediaDecodeTime",function(xt){fe&&xe.audioSegmentStream.setVideoBaseMediaDecodeTime(xt)}),xe.videoSegmentStream.on("timingInfo",K.trigger.bind(K,"videoTimingInfo")),xe.h264Stream.pipe(xe.videoSegmentStream).pipe(xe.coalesceStream)),fe&&!xe.audioSegmentStream&&(xe.coalesceStream.numberOfTracks++,xe.audioSegmentStream=new Or(fe,z),xe.audioSegmentStream.on("log",K.getLogTrigger_("audioSegmentStream")),xe.audioSegmentStream.on("timingInfo",K.trigger.bind(K,"audioTimingInfo")),xe.audioSegmentStream.on("segmentTimingInfo",K.trigger.bind(K,"audioSegmentTimingInfo")),xe.adtsStream.pipe(xe.audioSegmentStream).pipe(xe.coalesceStream)),K.trigger("trackinfo",{hasAudio:!!fe,hasVideo:!!Z})}}),xe.coalesceStream.on("data",this.trigger.bind(this,"data")),xe.coalesceStream.on("id3Frame",function(Je){Je.dispatchType=xe.metadataStream.dispatchType,K.trigger("id3Frame",Je)}),xe.coalesceStream.on("caption",this.trigger.bind(this,"caption")),xe.coalesceStream.on("done",this.trigger.bind(this,"done")),nc(this,xe)},this.setBaseMediaDecodeTime=function(xe){var Je=this.transmuxPipeline_;z.keepOriginalTimestamps||(this.baseMediaDecodeTime=xe),fe&&(fe.timelineStartInfo.dts=void 0,fe.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(fe),Je.audioTimestampRolloverStream&&Je.audioTimestampRolloverStream.discontinuity()),Z&&(Je.videoSegmentStream&&(Je.videoSegmentStream.gopCache_=[]),Z.timelineStartInfo.dts=void 0,Z.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(Z),Je.captionStream.reset()),Je.timestampRolloverStream&&Je.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(xe){fe&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(xe)},this.setRemux=function(xe){var Je=this.transmuxPipeline_;z.remux=xe,Je&&Je.coalesceStream&&Je.coalesceStream.setRemux(xe)},this.alignGopsWith=function(xe){Z&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(xe)},this.getLogTrigger_=function(xe){var Je=this;return function(lt){lt.stream=xe,Je.trigger("log",lt)}},this.push=function(xe){if(j){var Je=dr(xe);Je&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!Je&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),j=!1}this.transmuxPipeline_.headOfPipeline.push(xe)},this.flush=function(){j=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},qr.prototype=new e;var VI={Transmuxer:qr,VideoSegmentStream:mn,AudioSegmentStream:Or,AUDIO_PROPERTIES:pn,VIDEO_PROPERTIES:Jn,generateSegmentTimingInfo:_h},is=function(z){return z>>>0},Zw=function(z){return("00"+z.toString(16)).slice(-2)},mm={toUnsigned:is,toHexString:Zw},$I=function(z){var K="";return K+=String.fromCharCode(z[0]),K+=String.fromCharCode(z[1]),K+=String.fromCharCode(z[2]),K+=String.fromCharCode(z[3]),K},rc=$I,vm=mm.toUnsigned,yi=function Re(z,K){var j=[],Z,fe,xe,Je,lt;if(!K.length)return null;for(Z=0;Z<z.byteLength;)fe=vm(z[Z]<<24|z[Z+1]<<16|z[Z+2]<<8|z[Z+3]),xe=rc(z.subarray(Z+4,Z+8)),Je=fe>1?Z+fe:z.byteLength,xe===K[0]&&(K.length===1?j.push(z.subarray(Z+8,Je)):(lt=Re(z.subarray(Z+8,Je),K.slice(1)),lt.length&&(j=j.concat(lt)))),Z=Je;return j},Oi=yi,vb=mm.toUnsigned,Jw=i.getUint64,rl=function(z){var K={version:z[0],flags:new Uint8Array(z.subarray(1,4))};return K.version===1?K.baseMediaDecodeTime=Jw(z.subarray(4)):K.baseMediaDecodeTime=vb(z[4]<<24|z[5]<<16|z[6]<<8|z[7]),K},bh=rl,GI=function(z){return{isLeading:(z[0]&12)>>>2,dependsOn:z[0]&3,isDependedOn:(z[1]&192)>>>6,hasRedundancy:(z[1]&48)>>>4,paddingValue:(z[1]&14)>>>1,isNonSyncSample:z[1]&1,degradationPriority:z[2]<<8|z[3]}},xn=GI,il=function(z){var K={version:z[0],flags:new Uint8Array(z.subarray(1,4)),samples:[]},j=new DataView(z.buffer,z.byteOffset,z.byteLength),Z=K.flags[2]&1,fe=K.flags[2]&4,xe=K.flags[1]&1,Je=K.flags[1]&2,lt=K.flags[1]&4,xt=K.flags[1]&8,_t=j.getUint32(4),Pt=8,Xt;for(Z&&(K.dataOffset=j.getInt32(Pt),Pt+=4),fe&&_t&&(Xt={flags:xn(z.subarray(Pt,Pt+4))},Pt+=4,xe&&(Xt.duration=j.getUint32(Pt),Pt+=4),Je&&(Xt.size=j.getUint32(Pt),Pt+=4),xt&&(K.version===1?Xt.compositionTimeOffset=j.getInt32(Pt):Xt.compositionTimeOffset=j.getUint32(Pt),Pt+=4),K.samples.push(Xt),_t--);_t--;)Xt={},xe&&(Xt.duration=j.getUint32(Pt),Pt+=4),Je&&(Xt.size=j.getUint32(Pt),Pt+=4),lt&&(Xt.flags=xn(z.subarray(Pt,Pt+4)),Pt+=4),xt&&(K.version===1?Xt.compositionTimeOffset=j.getInt32(Pt):Xt.compositionTimeOffset=j.getUint32(Pt),Pt+=4),K.samples.push(Xt);return K},Vv=il,gb=function(z){var K=new DataView(z.buffer,z.byteOffset,z.byteLength),j={version:z[0],flags:new Uint8Array(z.subarray(1,4)),trackId:K.getUint32(4)},Z=j.flags[2]&1,fe=j.flags[2]&2,xe=j.flags[2]&8,Je=j.flags[2]&16,lt=j.flags[2]&32,xt=j.flags[0]&65536,_t=j.flags[0]&131072,Pt;return Pt=8,Z&&(Pt+=4,j.baseDataOffset=K.getUint32(12),Pt+=4),fe&&(j.sampleDescriptionIndex=K.getUint32(Pt),Pt+=4),xe&&(j.defaultSampleDuration=K.getUint32(Pt),Pt+=4),Je&&(j.defaultSampleSize=K.getUint32(Pt),Pt+=4),lt&&(j.defaultSampleFlags=K.getUint32(Pt)),xt&&(j.durationIsEmpty=!0),!Z&&_t&&(j.baseDataOffsetIsMoof=!0),j},to=gb,ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ci;typeof window<"u"?Ci=window:typeof ic<"u"?Ci=ic:typeof self<"u"?Ci=self:Ci={};var Sh=Ci,eT=Xr.discardEmulationPreventionBytes,tT=Zn.CaptionStream,WI=function(z,K){for(var j=z,Z=0;Z<K.length;Z++){var fe=K[Z];if(j<fe.size)return fe;j-=fe.size}return null},qI=function(z,K,j){var Z=new DataView(z.buffer,z.byteOffset,z.byteLength),fe={logs:[],seiNals:[]},xe,Je,lt,xt;for(Je=0;Je+4<z.length;Je+=lt)if(lt=Z.getUint32(Je),Je+=4,!(lt<=0))switch(z[Je]&31){case 6:var _t=z.subarray(Je+1,Je+1+lt),Pt=WI(Je,K);if(xe={nalUnitType:"sei_rbsp",size:lt,data:_t,escapedRBSP:eT(_t),trackId:j},Pt)xe.pts=Pt.pts,xe.dts=Pt.dts,xt=Pt;else if(xt)xe.pts=xt.pts,xe.dts=xt.dts;else{fe.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Je+" for trackId "+j+". See mux.js#223."});break}fe.seiNals.push(xe);break}return fe},jI=function(z,K,j){var Z=K,fe=j.defaultSampleDuration||0,xe=j.defaultSampleSize||0,Je=j.trackId,lt=[];return z.forEach(function(xt){var _t=Vv(xt),Pt=_t.samples;Pt.forEach(function(Xt){Xt.duration===void 0&&(Xt.duration=fe),Xt.size===void 0&&(Xt.size=xe),Xt.trackId=Je,Xt.dts=Z,Xt.compositionTimeOffset===void 0&&(Xt.compositionTimeOffset=0),typeof Z=="bigint"?(Xt.pts=Z+Sh.BigInt(Xt.compositionTimeOffset),Z+=Sh.BigInt(Xt.duration)):(Xt.pts=Z+Xt.compositionTimeOffset,Z+=Xt.duration)}),lt=lt.concat(Pt)}),lt},KI=function(z,K){var j=Oi(z,["moof","traf"]),Z=Oi(z,["mdat"]),fe={},xe=[];return Z.forEach(function(Je,lt){var xt=j[lt];xe.push({mdat:Je,traf:xt})}),xe.forEach(function(Je){var lt=Je.mdat,xt=Je.traf,_t=Oi(xt,["tfhd"]),Pt=to(_t[0]),Xt=Pt.trackId,Mn=Oi(xt,["tfdt"]),Ln=Mn.length>0?bh(Mn[0]).baseMediaDecodeTime:0,wn=Oi(xt,["trun"]),xr,ma;K===Xt&&wn.length>0&&(xr=jI(wn,Ln,Pt),ma=qI(lt,xr,Xt),fe[Xt]||(fe[Xt]={seiNals:[],logs:[]}),fe[Xt].seiNals=fe[Xt].seiNals.concat(ma.seiNals),fe[Xt].logs=fe[Xt].logs.concat(ma.logs))}),fe},XI=function(z,K,j){var Z;if(K===null)return null;Z=KI(z,K);var fe=Z[K]||{};return{seiNals:fe.seiNals,logs:fe.logs,timescale:j}},YI=function(){var z=!1,K,j,Z,fe,xe,Je;this.isInitialized=function(){return z},this.init=function(lt){K=new tT,z=!0,Je=lt?lt.isPartial:!1,K.on("data",function(xt){xt.startTime=xt.startPts/fe,xt.endTime=xt.endPts/fe,xe.captions.push(xt),xe.captionStreams[xt.stream]=!0}),K.on("log",function(xt){xe.logs.push(xt)})},this.isNewInit=function(lt,xt){return lt&&lt.length===0||xt&&typeof xt=="object"&&Object.keys(xt).length===0?!1:Z!==lt[0]||fe!==xt[Z]},this.parse=function(lt,xt,_t){var Pt;if(this.isInitialized()){if(!xt||!_t)return null;if(this.isNewInit(xt,_t))Z=xt[0],fe=_t[Z];else if(Z===null||!fe)return j.push(lt),null}else return null;for(;j.length>0;){var Xt=j.shift();this.parse(Xt,xt,_t)}return Pt=XI(lt,Z,fe),Pt&&Pt.logs&&(xe.logs=xe.logs.concat(Pt.logs)),Pt===null||!Pt.seiNals?xe.logs.length?{logs:xe.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Pt.seiNals),this.flushStream(),xe)},this.pushNals=function(lt){if(!this.isInitialized()||!lt||lt.length===0)return null;lt.forEach(function(xt){K.push(xt)})},this.flushStream=function(){if(!this.isInitialized())return null;Je?K.partialFlush():K.flush()},this.clearParsedCaptions=function(){xe.captions=[],xe.captionStreams={},xe.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;K.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){j=[],Z=null,fe=null,xe?this.clearParsedCaptions():xe={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},QI=YI,$v=mm.toUnsigned,Mo=mm.toHexString,Gr=i.getUint64,Gv,gm,Wv,yb,nT,xh;Gv=function(z){var K={},j=Oi(z,["moov","trak"]);return j.reduce(function(Z,fe){var xe,Je,lt,xt,_t;return xe=Oi(fe,["tkhd"])[0],!xe||(Je=xe[0],lt=Je===0?12:20,xt=$v(xe[lt]<<24|xe[lt+1]<<16|xe[lt+2]<<8|xe[lt+3]),_t=Oi(fe,["mdia","mdhd"])[0],!_t)?null:(Je=_t[0],lt=Je===0?12:20,Z[xt]=$v(_t[lt]<<24|_t[lt+1]<<16|_t[lt+2]<<8|_t[lt+3]),Z)},K)},gm=function(z,K){var j;j=Oi(K,["moof","traf"]);var Z=j.reduce(function(fe,xe){var Je=Oi(xe,["tfhd"])[0],lt=$v(Je[4]<<24|Je[5]<<16|Je[6]<<8|Je[7]),xt=z[lt]||9e4,_t=Oi(xe,["tfdt"])[0],Pt=new DataView(_t.buffer,_t.byteOffset,_t.byteLength),Xt;_t[0]===1?Xt=Gr(_t.subarray(4,12)):Xt=Pt.getUint32(4);var Mn;return typeof Xt=="bigint"?Mn=Xt/Sh.BigInt(xt):typeof Xt=="number"&&!isNaN(Xt)&&(Mn=Xt/xt),Mn<Number.MAX_SAFE_INTEGER&&(Mn=Number(Mn)),Mn<fe&&(fe=Mn),fe},1/0);return typeof Z=="bigint"||isFinite(Z)?Z:0},Wv=function(z,K){var j=Oi(K,["moof","traf"]),Z=0,fe=0,xe;if(j&&j.length){var Je=Oi(j[0],["tfhd"])[0],lt=Oi(j[0],["trun"])[0],xt=Oi(j[0],["tfdt"])[0];if(Je){var _t=to(Je);xe=_t.trackId}if(xt){var Pt=bh(xt);Z=Pt.baseMediaDecodeTime}if(lt){var Xt=Vv(lt);Xt.samples&&Xt.samples.length&&(fe=Xt.samples[0].compositionTimeOffset||0)}}var Mn=z[xe]||9e4;typeof Z=="bigint"&&(fe=Sh.BigInt(fe),Mn=Sh.BigInt(Mn));var Ln=(Z+fe)/Mn;return typeof Ln=="bigint"&&Ln<Number.MAX_SAFE_INTEGER&&(Ln=Number(Ln)),Ln},yb=function(z){var K=Oi(z,["moov","trak"]),j=[];return K.forEach(function(Z){var fe=Oi(Z,["mdia","hdlr"]),xe=Oi(Z,["tkhd"]);fe.forEach(function(Je,lt){var xt=rc(Je.subarray(8,12)),_t=xe[lt],Pt,Xt,Mn;xt==="vide"&&(Pt=new DataView(_t.buffer,_t.byteOffset,_t.byteLength),Xt=Pt.getUint8(0),Mn=Xt===0?Pt.getUint32(12):Pt.getUint32(20),j.push(Mn))})}),j},xh=function(z){var K=z[0],j=K===0?12:20;return $v(z[j]<<24|z[j+1]<<16|z[j+2]<<8|z[j+3])},nT=function(z){var K=Oi(z,["moov","trak"]),j=[];return K.forEach(function(Z){var fe={},xe=Oi(Z,["tkhd"])[0],Je,lt;xe&&(Je=new DataView(xe.buffer,xe.byteOffset,xe.byteLength),lt=Je.getUint8(0),fe.id=lt===0?Je.getUint32(12):Je.getUint32(20));var xt=Oi(Z,["mdia","hdlr"])[0];if(xt){var _t=rc(xt.subarray(8,12));_t==="vide"?fe.type="video":_t==="soun"?fe.type="audio":fe.type=_t}var Pt=Oi(Z,["mdia","minf","stbl","stsd"])[0];if(Pt){var Xt=Pt.subarray(8);fe.codec=rc(Xt.subarray(4,8));var Mn=Oi(Xt,[fe.codec])[0],Ln,wn;Mn&&(/^[asm]vc[1-9]$/i.test(fe.codec)?(Ln=Mn.subarray(78),wn=rc(Ln.subarray(4,8)),wn==="avcC"&&Ln.length>11?(fe.codec+=".",fe.codec+=Mo(Ln[9]),fe.codec+=Mo(Ln[10]),fe.codec+=Mo(Ln[11])):fe.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(fe.codec)?(Ln=Mn.subarray(28),wn=rc(Ln.subarray(4,8)),wn==="esds"&&Ln.length>20&&Ln[19]!==0?(fe.codec+="."+Mo(Ln[19]),fe.codec+="."+Mo(Ln[20]>>>2&63).replace(/^0/,"")):fe.codec="mp4a.40.2"):fe.codec=fe.codec.toLowerCase())}var xr=Oi(Z,["mdia","mdhd"])[0];xr&&(fe.timescale=xh(xr)),j.push(fe)}),j};var rT={findBox:Oi,parseType:rc,timescale:Gv,startTime:gm,compositionStartTime:Wv,videoTrackIds:yb,tracks:nT,getTimescaleFromMediaHeader:xh},_b=function(z){var K=z[1]&31;return K<<=8,K|=z[2],K},ym=function(z){return!!(z[1]&64)},qv=function(z){var K=0;return(z[3]&48)>>>4>1&&(K+=z[4]+1),K},ZI=function(z,K){var j=_b(z);return j===0?"pat":j===K?"pmt":K?"pes":null},JI=function(z){var K=ym(z),j=4+qv(z);return K&&(j+=z[j]+1),(z[j+10]&31)<<8|z[j+11]},iT=function(z){var K={},j=ym(z),Z=4+qv(z);if(j&&(Z+=z[Z]+1),!!(z[Z+5]&1)){var fe,xe,Je;fe=(z[Z+1]&15)<<8|z[Z+2],xe=3+fe-4,Je=(z[Z+10]&15)<<8|z[Z+11];for(var lt=12+Je;lt<xe;){var xt=Z+lt;K[(z[xt+1]&31)<<8|z[xt+2]]=z[xt],lt+=((z[xt+3]&15)<<8|z[xt+4])+5}return K}},aT=function(z,K){var j=_b(z),Z=K[j];switch(Z){case rt.H264_STREAM_TYPE:return"video";case rt.ADTS_STREAM_TYPE:return"audio";case rt.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},bb=function(z){var K=ym(z);if(!K)return null;var j=4+qv(z);if(j>=z.byteLength)return null;var Z=null,fe;return fe=z[j+7],fe&192&&(Z={},Z.pts=(z[j+9]&14)<<27|(z[j+10]&255)<<20|(z[j+11]&254)<<12|(z[j+12]&255)<<5|(z[j+13]&254)>>>3,Z.pts*=4,Z.pts+=(z[j+13]&6)>>>1,Z.dts=Z.pts,fe&64&&(Z.dts=(z[j+14]&14)<<27|(z[j+15]&255)<<20|(z[j+16]&254)<<12|(z[j+17]&255)<<5|(z[j+18]&254)>>>3,Z.dts*=4,Z.dts+=(z[j+18]&6)>>>1)),Z},jv=function(z){switch(z){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},eD=function(z){for(var K=4+qv(z),j=z.subarray(K),Z=0,fe=0,xe=!1,Je;fe<j.byteLength-3;fe++)if(j[fe+2]===1){Z=fe+5;break}for(;Z<j.byteLength;)switch(j[Z]){case 0:if(j[Z-1]!==0){Z+=2;break}else if(j[Z-2]!==0){Z++;break}fe+3!==Z-2&&(Je=jv(j[fe+3]&31),Je==="slice_layer_without_partitioning_rbsp_idr"&&(xe=!0));do Z++;while(j[Z]!==1&&Z<j.length);fe=Z-2,Z+=3;break;case 1:if(j[Z-1]!==0||j[Z-2]!==0){Z+=3;break}Je=jv(j[fe+3]&31),Je==="slice_layer_without_partitioning_rbsp_idr"&&(xe=!0),fe=Z-2,Z+=3;break;default:Z+=3;break}return j=j.subarray(fe),Z-=fe,fe=0,j&&j.byteLength>3&&(Je=jv(j[fe+3]&31),Je==="slice_layer_without_partitioning_rbsp_idr"&&(xe=!0)),xe},sT={parseType:ZI,parsePat:JI,parsePmt:iT,parsePayloadUnitStartIndicator:ym,parsePesType:aT,parsePesTime:bb,videoPacketContainsKeyFrame:eD},lu=yt.handleRollover,Ai={};Ai.ts=sT,Ai.aac=qn;var Kc=ot.ONE_SECOND_IN_TS,Bs=188,uu=71,oT=function(z,K){for(var j=0,Z=Bs,fe,xe;Z<z.byteLength;){if(z[j]===uu&&z[Z]===uu){switch(fe=z.subarray(j,Z),xe=Ai.ts.parseType(fe,K.pid),xe){case"pat":K.pid=Ai.ts.parsePat(fe);break;case"pmt":var Je=Ai.ts.parsePmt(fe);K.table=K.table||{},Object.keys(Je).forEach(function(lt){K.table[lt]=Je[lt]});break}j+=Bs,Z+=Bs;continue}j++,Z++}},Kv=function(z,K,j){for(var Z=0,fe=Bs,xe,Je,lt,xt,_t,Pt=!1;fe<=z.byteLength;){if(z[Z]===uu&&(z[fe]===uu||fe===z.byteLength)){switch(xe=z.subarray(Z,fe),Je=Ai.ts.parseType(xe,K.pid),Je){case"pes":lt=Ai.ts.parsePesType(xe,K.table),xt=Ai.ts.parsePayloadUnitStartIndicator(xe),lt==="audio"&&xt&&(_t=Ai.ts.parsePesTime(xe),_t&&(_t.type="audio",j.audio.push(_t),Pt=!0));break}if(Pt)break;Z+=Bs,fe+=Bs;continue}Z++,fe++}for(fe=z.byteLength,Z=fe-Bs,Pt=!1;Z>=0;){if(z[Z]===uu&&(z[fe]===uu||fe===z.byteLength)){switch(xe=z.subarray(Z,fe),Je=Ai.ts.parseType(xe,K.pid),Je){case"pes":lt=Ai.ts.parsePesType(xe,K.table),xt=Ai.ts.parsePayloadUnitStartIndicator(xe),lt==="audio"&&xt&&(_t=Ai.ts.parsePesTime(xe),_t&&(_t.type="audio",j.audio.push(_t),Pt=!0));break}if(Pt)break;Z-=Bs,fe-=Bs;continue}Z--,fe--}},Sb=function(z,K,j){for(var Z=0,fe=Bs,xe,Je,lt,xt,_t,Pt,Xt,Mn,Ln=!1,wn={data:[],size:0};fe<z.byteLength;){if(z[Z]===uu&&z[fe]===uu){switch(xe=z.subarray(Z,fe),Je=Ai.ts.parseType(xe,K.pid),Je){case"pes":if(lt=Ai.ts.parsePesType(xe,K.table),xt=Ai.ts.parsePayloadUnitStartIndicator(xe),lt==="video"&&(xt&&!Ln&&(_t=Ai.ts.parsePesTime(xe),_t&&(_t.type="video",j.video.push(_t),Ln=!0)),!j.firstKeyFrame)){if(xt&&wn.size!==0){for(Pt=new Uint8Array(wn.size),Xt=0;wn.data.length;)Mn=wn.data.shift(),Pt.set(Mn,Xt),Xt+=Mn.byteLength;if(Ai.ts.videoPacketContainsKeyFrame(Pt)){var xr=Ai.ts.parsePesTime(Pt);xr?(j.firstKeyFrame=xr,j.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}wn.size=0}wn.data.push(xe),wn.size+=xe.byteLength}break}if(Ln&&j.firstKeyFrame)break;Z+=Bs,fe+=Bs;continue}Z++,fe++}for(fe=z.byteLength,Z=fe-Bs,Ln=!1;Z>=0;){if(z[Z]===uu&&z[fe]===uu){switch(xe=z.subarray(Z,fe),Je=Ai.ts.parseType(xe,K.pid),Je){case"pes":lt=Ai.ts.parsePesType(xe,K.table),xt=Ai.ts.parsePayloadUnitStartIndicator(xe),lt==="video"&&xt&&(_t=Ai.ts.parsePesTime(xe),_t&&(_t.type="video",j.video.push(_t),Ln=!0));break}if(Ln)break;Z-=Bs,fe-=Bs;continue}Z--,fe--}},xb=function(z,K){if(z.audio&&z.audio.length){var j=K;(typeof j>"u"||isNaN(j))&&(j=z.audio[0].dts),z.audio.forEach(function(xe){xe.dts=lu(xe.dts,j),xe.pts=lu(xe.pts,j),xe.dtsTime=xe.dts/Kc,xe.ptsTime=xe.pts/Kc})}if(z.video&&z.video.length){var Z=K;if((typeof Z>"u"||isNaN(Z))&&(Z=z.video[0].dts),z.video.forEach(function(xe){xe.dts=lu(xe.dts,Z),xe.pts=lu(xe.pts,Z),xe.dtsTime=xe.dts/Kc,xe.ptsTime=xe.pts/Kc}),z.firstKeyFrame){var fe=z.firstKeyFrame;fe.dts=lu(fe.dts,Z),fe.pts=lu(fe.pts,Z),fe.dtsTime=fe.dts/Kc,fe.ptsTime=fe.pts/Kc}}},Xv=function(z){for(var K=!1,j=0,Z=null,fe=null,xe=0,Je=0,lt;z.length-Je>=3;){var xt=Ai.aac.parseType(z,Je);switch(xt){case"timed-metadata":if(z.length-Je<10){K=!0;break}if(xe=Ai.aac.parseId3TagSize(z,Je),xe>z.length){K=!0;break}fe===null&&(lt=z.subarray(Je,Je+xe),fe=Ai.aac.parseAacTimestamp(lt)),Je+=xe;break;case"audio":if(z.length-Je<7){K=!0;break}if(xe=Ai.aac.parseAdtsSize(z,Je),xe>z.length){K=!0;break}Z===null&&(lt=z.subarray(Je,Je+xe),Z=Ai.aac.parseSampleRate(lt)),j++,Je+=xe;break;default:Je++;break}if(K)return null}if(Z===null||fe===null)return null;var _t=Kc/Z,Pt={audio:[{type:"audio",dts:fe,pts:fe},{type:"audio",dts:fe+j*1024*_t,pts:fe+j*1024*_t}]};return Pt},tD=function(z){var K={pid:null,table:null},j={};oT(z,K);for(var Z in K.table)if(K.table.hasOwnProperty(Z)){var fe=K.table[Z];switch(fe){case rt.H264_STREAM_TYPE:j.video=[],Sb(z,K,j),j.video.length===0&&delete j.video;break;case rt.ADTS_STREAM_TYPE:j.audio=[],Kv(z,K,j),j.audio.length===0&&delete j.audio;break}}return j},nD=function(z,K){var j=Ai.aac.isLikelyAacData(z),Z;return j?Z=Xv(z):Z=tD(z),!Z||!Z.audio&&!Z.video?null:(xb(Z,K),Z)},lT={inspect:nD,parseAudioPes_:Kv},wb=function(z,K){K.on("data",function(j){var Z=j.initSegment;j.initSegment={data:Z.buffer,byteOffset:Z.byteOffset,byteLength:Z.byteLength};var fe=j.data;j.data=fe.buffer,z.postMessage({action:"data",segment:j,byteOffset:fe.byteOffset,byteLength:fe.byteLength},[j.data])}),K.on("done",function(j){z.postMessage({action:"done"})}),K.on("gopInfo",function(j){z.postMessage({action:"gopInfo",gopInfo:j})}),K.on("videoSegmentTimingInfo",function(j){var Z={start:{decode:ot.videoTsToSeconds(j.start.dts),presentation:ot.videoTsToSeconds(j.start.pts)},end:{decode:ot.videoTsToSeconds(j.end.dts),presentation:ot.videoTsToSeconds(j.end.pts)},baseMediaDecodeTime:ot.videoTsToSeconds(j.baseMediaDecodeTime)};j.prependedContentDuration&&(Z.prependedContentDuration=ot.videoTsToSeconds(j.prependedContentDuration)),z.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:Z})}),K.on("audioSegmentTimingInfo",function(j){var Z={start:{decode:ot.videoTsToSeconds(j.start.dts),presentation:ot.videoTsToSeconds(j.start.pts)},end:{decode:ot.videoTsToSeconds(j.end.dts),presentation:ot.videoTsToSeconds(j.end.pts)},baseMediaDecodeTime:ot.videoTsToSeconds(j.baseMediaDecodeTime)};j.prependedContentDuration&&(Z.prependedContentDuration=ot.videoTsToSeconds(j.prependedContentDuration)),z.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:Z})}),K.on("id3Frame",function(j){z.postMessage({action:"id3Frame",id3Frame:j})}),K.on("caption",function(j){z.postMessage({action:"caption",caption:j})}),K.on("trackinfo",function(j){z.postMessage({action:"trackinfo",trackInfo:j})}),K.on("audioTimingInfo",function(j){z.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ot.videoTsToSeconds(j.start),end:ot.videoTsToSeconds(j.end)}})}),K.on("videoTimingInfo",function(j){z.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ot.videoTsToSeconds(j.start),end:ot.videoTsToSeconds(j.end)}})}),K.on("log",function(j){z.postMessage({action:"log",log:j})})},Yv=function(){function Re(K,j){this.options=j||{},this.self=K,this.init()}var z=Re.prototype;return z.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new VI.Transmuxer(this.options),wb(this.self,this.transmuxer)},z.pushMp4Captions=function(j){this.captionParser||(this.captionParser=new QI,this.captionParser.init());var Z=new Uint8Array(j.data,j.byteOffset,j.byteLength),fe=this.captionParser.parse(Z,j.trackIds,j.timescales);this.self.postMessage({action:"mp4Captions",captions:fe&&fe.captions||[],logs:fe&&fe.logs||[],data:Z.buffer},[Z.buffer])},z.probeMp4StartTime=function(j){var Z=j.timescales,fe=j.data,xe=rT.startTime(Z,fe);this.self.postMessage({action:"probeMp4StartTime",startTime:xe,data:fe},[fe.buffer])},z.probeMp4Tracks=function(j){var Z=j.data,fe=rT.tracks(Z);this.self.postMessage({action:"probeMp4Tracks",tracks:fe,data:Z},[Z.buffer])},z.probeTs=function(j){var Z=j.data,fe=j.baseStartTime,xe=typeof fe=="number"&&!isNaN(fe)?fe*ot.ONE_SECOND_IN_TS:void 0,Je=lT.inspect(Z,xe),lt=null;Je&&(lt={hasVideo:Je.video&&Je.video.length===2||!1,hasAudio:Je.audio&&Je.audio.length===2||!1},lt.hasVideo&&(lt.videoStart=Je.video[0].ptsTime),lt.hasAudio&&(lt.audioStart=Je.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:lt,data:Z},[Z.buffer])},z.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},z.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},z.push=function(j){var Z=new Uint8Array(j.data,j.byteOffset,j.byteLength);this.transmuxer.push(Z)},z.reset=function(){this.transmuxer.reset()},z.setTimestampOffset=function(j){var Z=j.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ot.secondsToVideoTs(Z)))},z.setAudioAppendStart=function(j){this.transmuxer.setAudioAppendStart(Math.ceil(ot.secondsToVideoTs(j.appendStart)))},z.setRemux=function(j){this.transmuxer.setRemux(j.remux)},z.flush=function(j){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},z.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},z.alignGopsWith=function(j){this.transmuxer.alignGopsWith(j.gopsToAlignWith.slice())},Re}();self.onmessage=function(Re){if(Re.data.action==="init"&&Re.data.options){this.messageHandlers=new Yv(self,Re.data.options);return}this.messageHandlers||(this.messageHandlers=new Yv(self)),Re.data&&Re.data.action&&Re.data.action!=="init"&&this.messageHandlers[Re.data.action]&&this.messageHandlers[Re.data.action](Re.data)}})),wWe=poe(xWe),TWe=function(e,t,r){var i=e.data.segment,a=i.type,s=i.initSegment,o=i.captions,l=i.captionStreams,u=i.metadata,c=i.videoFrameDtsTime,d=i.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:l,metadata:u});var f=e.data.segment.boxes||{data:e.data.segment.data},h={type:a,data:new Uint8Array(f.data,f.data.byteOffset,f.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof c<"u"&&(h.videoFrameDtsTime=c),typeof d<"u"&&(h.videoFramePtsTime=d),r(h)},CWe=function(e){var t=e.transmuxedData,r=e.callback;t.buffer=[],r(t)},AWe=function(e,t){t.gopInfo=e.data.gopInfo},goe=function(e){var t=e.transmuxer,r=e.bytes,i=e.audioAppendStart,a=e.gopsToAlignWith,s=e.remux,o=e.onData,l=e.onTrackInfo,u=e.onAudioTimingInfo,c=e.onVideoTimingInfo,d=e.onVideoSegmentTimingInfo,f=e.onAudioSegmentTimingInfo,h=e.onId3,p=e.onCaptions,m=e.onDone,v=e.onEndedTimeline,g=e.onTransmuxerLog,y=e.isEndOfTimeline,_={buffer:[]},b=y,x=function(C){t.currentTransmux===e&&(C.data.action==="data"&&TWe(C,_,o),C.data.action==="trackinfo"&&l(C.data.trackInfo),C.data.action==="gopInfo"&&AWe(C,_),C.data.action==="audioTimingInfo"&&u(C.data.audioTimingInfo),C.data.action==="videoTimingInfo"&&c(C.data.videoTimingInfo),C.data.action==="videoSegmentTimingInfo"&&d(C.data.videoSegmentTimingInfo),C.data.action==="audioSegmentTimingInfo"&&f(C.data.audioSegmentTimingInfo),C.data.action==="id3Frame"&&h([C.data.id3Frame],C.data.id3Frame.dispatchType),C.data.action==="caption"&&p(C.data.caption),C.data.action==="endedtimeline"&&(b=!1,v()),C.data.action==="log"&&g(C.data.log),C.data.type==="transmuxed"&&(b||(t.onmessage=null,CWe({transmuxedData:_,callback:m}),yoe(t))))};if(t.onmessage=x,i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(a)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof s<"u"&&t.postMessage({action:"setRemux",remux:s}),r.byteLength){var w=r instanceof ArrayBuffer?r:r.buffer,A=r instanceof ArrayBuffer?0:r.byteOffset;t.postMessage({action:"push",data:w,byteOffset:A,byteLength:r.byteLength},[w])}y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},yoe=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():goe(e.currentTransmux))},oW=function(e,t){e.postMessage({action:t}),yoe(e)},_oe=function(e,t){if(!t.currentTransmux){t.currentTransmux=e,oW(t,e);return}t.transmuxQueue.push(oW.bind(null,t,e))},EWe=function(e){_oe("reset",e)},MWe=function(e){_oe("endTimeline",e)},boe=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,goe(e);return}e.transmuxer.transmuxQueue.push(e)},IWe=function(e){var t=new wWe;t.currentTransmux=null,t.transmuxQueue=[];var r=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,r.call(t)},t.postMessage({action:"init",options:e}),t},DP={reset:EWe,endTimeline:MWe,transmux:boe,createTransmuxer:IWe},XM=function(e){var t=e.transmuxer,r=e.endAction||e.action,i=e.callback,a=Qu({},e,{endAction:null,transmuxer:null,callback:null}),s=function u(c){c.data.action===r&&(t.removeEventListener("message",u),c.data.data&&(c.data.data=new Uint8Array(c.data.data,e.byteOffset||0,e.byteLength||c.data.data.byteLength),e.data&&(e.data=c.data.data)),i(c.data))};if(t.addEventListener("message",s),e.data){var o=e.data instanceof ArrayBuffer;a.byteOffset=o?0:e.data.byteOffset,a.byteLength=e.data.byteLength;var l=[o?e.data:e.data.buffer];t.postMessage(a,l)}else t.postMessage(a)},gd={FAILURE:2,TIMEOUT:-101,ABORTED:-102},T6=function(e){e.forEach(function(t){t.abort()})},DWe=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},PWe=function(e){var t=e.target,r=Date.now()-t.requestTime,i={bandwidth:1/0,bytesReceived:0,roundTripTime:r||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},c7=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:gd.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:gd.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:gd.FAILURE,xhr:t}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:gd.FAILURE,xhr:t}:null},lW=function(e,t,r){return function(i,a){var s=a.response,o=c7(i,a);if(o)return r(o,e);if(s.byteLength!==16)return r({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:gd.FAILURE,xhr:a},e);for(var l=new DataView(s),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),c=0;c<t.length;c++)t[c].bytes=u;return r(null,e)}},Soe=function(e,t){var r=CF(e.map.bytes);if(r!=="mp4"){var i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(r||"unknown")+" container for initialization segment at URL: "+i,code:gd.FAILURE})}XM({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(s){var o=s.tracks,l=s.data;return e.map.bytes=l,o.forEach(function(u){e.map.tracks=e.map.tracks||{},!e.map.tracks[u.type]&&(e.map.tracks[u.type]=u,typeof u.id=="number"&&u.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[u.id]=u.timescale))}),t(null)}})},RWe=function(e){var t=e.segment,r=e.finishProcessingFn;return function(i,a){var s=c7(i,a);if(s)return r(s,t);var o=new Uint8Array(a.response);if(t.map.key)return t.map.encryptedBytes=o,r(null,t);t.map.bytes=o,Soe(t,function(l){if(l)return l.xhr=a,l.status=a.status,r(l,t);r(null,t)})}},kWe=function(e){var t=e.segment,r=e.finishProcessingFn,i=e.responseType;return function(a,s){var o=c7(a,s);if(o)return r(o,t);var l=i==="arraybuffer"||!s.responseText?s.response:bWe(s.responseText.substring(t.lastReachedChar||0));return t.stats=DWe(s),t.key?t.encryptedBytes=new Uint8Array(l):t.bytes=new Uint8Array(l),r(null,t)}},LWe=function(e){var t=e.segment,r=e.bytes,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,d=e.endedTimelineFn,f=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,m=t.map&&t.map.tracks||{},v=!!(m.audio&&m.video),g=a.bind(null,t,"audio","start"),y=a.bind(null,t,"audio","end"),_=a.bind(null,t,"video","start"),b=a.bind(null,t,"video","end"),x=function(){return boe({bytes:r,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:v,onData:function(T){T.type=T.type==="combined"?"video":T.type,f(t,T)},onTrackInfo:function(T){i&&(v&&(T.isMuxed=!0),i(t,T))},onAudioTimingInfo:function(T){g&&typeof T.start<"u"&&(g(T.start),g=null),y&&typeof T.end<"u"&&y(T.end)},onVideoTimingInfo:function(T){_&&typeof T.start<"u"&&(_(T.start),_=null),b&&typeof T.end<"u"&&b(T.end)},onVideoSegmentTimingInfo:function(T){s(T)},onAudioSegmentTimingInfo:function(T){o(T)},onId3:function(T,C){l(t,T,C)},onCaptions:function(T){u(t,[T])},isEndOfTimeline:c,onEndedTimeline:function(){d()},onTransmuxerLog:p,onDone:function(T){h&&(T.type=T.type==="combined"?"video":T.type,h(null,t,T))}})};XM({action:"probeTs",transmuxer:t.transmuxer,data:r,baseStartTime:t.baseStartTime,callback:function(A){t.bytes=r=A.data;var T=A.result;T&&(i(t,{hasAudio:T.hasAudio,hasVideo:T.hasVideo,isMuxed:v}),i=null,T.hasAudio&&!v&&g(T.audioStart),T.hasVideo&&_(T.videoStart),g=null,_=null),x()}})},xoe=function(e){var t=e.segment,r=e.bytes,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,d=e.endedTimelineFn,f=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,m=new Uint8Array(r);if(JVe(m)){t.isFmp4=!0;var v=t.map.tracks,g={isFmp4:!0,hasVideo:!!v.video,hasAudio:!!v.audio};v.audio&&v.audio.codec&&v.audio.codec!=="enca"&&(g.audioCodec=v.audio.codec),v.video&&v.video.codec&&v.video.codec!=="encv"&&(g.videoCodec=v.video.codec),v.video&&v.audio&&(g.isMuxed=!0),i(t,g);var y=function(b){f(t,{data:m,type:g.hasAudio&&!g.isMuxed?"audio":"video"}),b&&b.length&&u(t,b),h(null,t,{})};XM({action:"probeMp4StartTime",timescales:t.map.timescales,data:m,transmuxer:t.transmuxer,callback:function(b){var x=b.data,w=b.startTime;if(r=x.buffer,t.bytes=m=x,g.hasAudio&&!g.isMuxed&&a(t,"audio","start",w),g.hasVideo&&a(t,"video","start",w),!v.video||!x.byteLength||!t.transmuxer){y();return}XM({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:m,timescales:t.map.timescales,trackIds:[v.video.id],callback:function(T){r=T.data.buffer,t.bytes=m=T.data,T.logs.forEach(function(C){p(Lt.mergeOptions(C,{stream:"mp4CaptionParser"}))}),y(T.captions)}})}});return}if(!t.transmuxer){h(null,t,{});return}if(typeof t.container>"u"&&(t.container=CF(m)),t.container!=="ts"&&t.container!=="aac"){i(t,{hasAudio:!1,hasVideo:!1}),h(null,t,{});return}LWe({segment:t,bytes:r,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:d,dataFn:f,doneFn:h,onTransmuxerLog:p})},woe=function(e,t){var r=e.id,i=e.key,a=e.encryptedBytes,s=e.decryptionWorker,o=function u(c){if(c.data.source===r){s.removeEventListener("message",u);var d=c.data.decrypted;t(new Uint8Array(d.bytes,d.byteOffset,d.byteLength))}};s.addEventListener("message",o);var l;i.bytes.slice?l=i.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(i.bytes)),s.postMessage(loe({source:r,encrypted:a,key:l,iv:i.iv}),[a.buffer,l.buffer])},OWe=function(e){var t=e.decryptionWorker,r=e.segment,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,d=e.endedTimelineFn,f=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog;woe({id:r.requestId,key:r.key,encryptedBytes:r.encryptedBytes,decryptionWorker:t},function(m){r.bytes=m,xoe({segment:r,bytes:r.bytes,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:d,dataFn:f,doneFn:h,onTransmuxerLog:p})})},NWe=function(e){var t=e.activeXhrs,r=e.decryptionWorker,i=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,d=e.endedTimelineFn,f=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,m=0,v=!1;return function(g,y){if(!v){if(g)return v=!0,T6(t),h(g,y);if(m+=1,m===t.length){var _=function(){if(y.encryptedBytes)return OWe({decryptionWorker:r,segment:y,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:d,dataFn:f,doneFn:h,onTransmuxerLog:p});xoe({segment:y,bytes:y.bytes,trackInfoFn:i,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:d,dataFn:f,doneFn:h,onTransmuxerLog:p})};if(y.endOfAllRequests=Date.now(),y.map&&y.map.encryptedBytes&&!y.map.bytes)return woe({decryptionWorker:r,id:y.requestId+"-init",encryptedBytes:y.map.encryptedBytes,key:y.map.key},function(b){y.map.bytes=b,Soe(y,function(x){if(x)return T6(t),h(x,y);_()})});_()}}}},BWe=function(e){var t=e.loadendState,r=e.abortFn;return function(i){var a=i.target;a.aborted&&r&&!t.calledAbortFn&&(r(),t.calledAbortFn=!0)}},FWe=function(e){var t=e.segment,r=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(i){var a=i.target;if(!a.aborted)return t.stats=Lt.mergeOptions(t.stats,PWe(i)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),r(i,t)}},UWe=function(e){var t=e.xhr,r=e.xhrOptions,i=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,l=e.trackInfoFn,u=e.timingInfoFn,c=e.videoSegmentTimingInfoFn,d=e.audioSegmentTimingInfoFn,f=e.id3Fn,h=e.captionsFn,p=e.isEndOfTimeline,m=e.endedTimelineFn,v=e.dataFn,g=e.doneFn,y=e.onTransmuxerLog,_=[],b=NWe({activeXhrs:_,decryptionWorker:i,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:m,dataFn:v,doneFn:g,onTransmuxerLog:y});if(a.key&&!a.key.bytes){var x=[a.key];a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&x.push(a.map.key);var w=Lt.mergeOptions(r,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),A=lW(a,x,b),T=t(w,A);_.push(T)}if(a.map&&!a.map.bytes){var C=a.map.key&&(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri);if(C){var E=Lt.mergeOptions(r,{uri:a.map.key.resolvedUri,responseType:"arraybuffer"}),I=lW(a,[a.map.key],b),P=t(E,I);_.push(P)}var L=Lt.mergeOptions(r,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:x6(a.map)}),N=RWe({segment:a,finishProcessingFn:b}),F=t(L,N);_.push(F)}var k=Lt.mergeOptions(r,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:x6(a)}),H=kWe({segment:a,finishProcessingFn:b,responseType:k.responseType}),U=t(k,H);U.addEventListener("progress",FWe({segment:a,progressFn:o,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:m,dataFn:v})),_.push(U);var B={};return _.forEach(function($){$.addEventListener("loadend",BWe({loadendState:B,abortFn:s}))}),function(){return T6(_)}},zWe=Gc("CodecUtils"),HWe=function(e){var t=e.attributes||{};if(t.CODECS)return rd(t.CODECS)},Toe=function(e,t){var r=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&r.AUDIO&&e.mediaGroups.AUDIO[r.AUDIO]},VWe=function(e,t){if(!Toe(e,t))return!0;var r=t.attributes||{},i=e.mediaGroups.AUDIO[r.AUDIO];for(var a in i)if(!i[a].uri&&!i[a].playlists)return!0;return!1},YM=function(e){var t={};return e.forEach(function(r){var i=r.mediaType,a=r.type,s=r.details;t[i]=t[i]||[],t[i].push(Gie(""+a+s))}),Object.keys(t).forEach(function(r){if(t[r].length>1){zWe("multiple "+r+" codecs found as attributes: "+t[r].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),t[r]=null;return}t[r]=t[r][0]}),t},uW=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},ax=function(e,t){var r=t.attributes||{},i=YM(HWe(t)||[]);if(Toe(e,t)&&!i.audio&&!VWe(e,t)){var a=YM(rHe(e,r.AUDIO)||[]);a.audio&&(i.audio=a.audio)}return i},XT=Gc("PlaylistSelector"),cW=function(e){if(!(!e||!e.playlist)){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},QM=function(e,t){if(!e)return"";var r=gt.getComputedStyle(e);return r?r[t]:""},o1=function(e,t){var r=e.slice();e.sort(function(i,a){var s=t(i,a);return s===0?r.indexOf(i)-r.indexOf(a):s})},d7=function(e,t){var r,i;return e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||gt.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),i=i||gt.Number.MAX_VALUE,r-i},$We=function(e,t){var r,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||gt.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),i=i||gt.Number.MAX_VALUE,r===i&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:r-i},Coe=function(e,t,r,i,a,s){if(e){var o={bandwidth:t,width:r,height:i,limitRenditionByPlayerDimensions:a},l=e.playlists;hl.isAudioOnly(e)&&(l=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var u=l.map(function(E){var I,P=E.attributes&&E.attributes.RESOLUTION&&E.attributes.RESOLUTION.width,L=E.attributes&&E.attributes.RESOLUTION&&E.attributes.RESOLUTION.height;return I=E.attributes&&E.attributes.BANDWIDTH,I=I||gt.Number.MAX_VALUE,{bandwidth:I,width:P,height:L,playlist:E}});o1(u,function(E,I){return E.bandwidth-I.bandwidth}),u=u.filter(function(E){return!hl.isIncompatible(E.playlist)});var c=u.filter(function(E){return hl.isEnabled(E.playlist)});c.length||(c=u.filter(function(E){return!hl.isDisabled(E.playlist)}));var d=c.filter(function(E){return E.bandwidth*Ts.BANDWIDTH_VARIANCE<t}),f=d[d.length-1],h=d.filter(function(E){return E.bandwidth===f.bandwidth})[0];if(a===!1){var p=h||c[0]||u[0];if(p&&p.playlist){var m="sortedPlaylistReps";return h&&(m="bandwidthBestRep"),c[0]&&(m="enabledPlaylistReps"),XT("choosing "+cW(p)+" using "+m+" with options",o),p.playlist}return XT("could not choose a playlist with options",o),null}var v=d.filter(function(E){return E.width&&E.height});o1(v,function(E,I){return E.width-I.width});var g=v.filter(function(E){return E.width===r&&E.height===i});f=g[g.length-1];var y=g.filter(function(E){return E.bandwidth===f.bandwidth})[0],_,b,x;y||(_=v.filter(function(E){return E.width>r||E.height>i}),b=_.filter(function(E){return E.width===_[0].width&&E.height===_[0].height}),f=b[b.length-1],x=b.filter(function(E){return E.bandwidth===f.bandwidth})[0]);var w;if(s.experimentalLeastPixelDiffSelector){var A=v.map(function(E){return E.pixelDiff=Math.abs(E.width-r)+Math.abs(E.height-i),E});o1(A,function(E,I){return E.pixelDiff===I.pixelDiff?I.bandwidth-E.bandwidth:E.pixelDiff-I.pixelDiff}),w=A[0]}var T=w||x||y||h||c[0]||u[0];if(T&&T.playlist){var C="sortedPlaylistReps";return w?C="leastPixelDiffRep":x?C="resolutionPlusOneRep":y?C="resolutionBestRep":h?C="bandwidthBestRep":c[0]&&(C="enabledPlaylistReps"),XT("choosing "+cW(T)+" using "+C+" with options",o),T.playlist}return XT("could not choose a playlist with options",o),null}},dW=function(){var e=this.useDevicePixelRatio&&gt.devicePixelRatio||1;return Coe(this.playlists.master,this.systemBandwidth,parseInt(QM(this.tech_.el(),"width"),10)*e,parseInt(QM(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},GWe=function(e){var t=-1,r=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&gt.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,r=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==r&&(t=e*this.systemBandwidth+(1-e)*t,r=this.systemBandwidth),Coe(this.playlists.master,t,parseInt(QM(this.tech_.el(),"width"),10)*i,parseInt(QM(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},WWe=function(e){var t=e.master,r=e.currentTime,i=e.bandwidth,a=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,l=e.currentTimeline,u=e.syncController,c=t.playlists.filter(function(m){return!hl.isIncompatible(m)}),d=c.filter(hl.isEnabled);d.length||(d=c.filter(function(m){return!hl.isDisabled(m)}));var f=d.filter(hl.hasAttribute.bind(null,"BANDWIDTH")),h=f.map(function(m){var v=u.getSyncPoint(m,a,l,r),g=v?1:2,y=hl.estimateSegmentRequestTime(s,i,m),_=y*g-o;return{playlist:m,rebufferingImpact:_}}),p=h.filter(function(m){return m.rebufferingImpact<=0});return o1(p,function(m,v){return d7(v.playlist,m.playlist)}),p.length?p[0]:(o1(h,function(m,v){return m.rebufferingImpact-v.rebufferingImpact}),h[0]||null)},qWe=function(){var e=this,t=this.playlists.master.playlists.filter(hl.isEnabled);o1(t,function(i,a){return d7(i,a)});var r=t.filter(function(i){return!!ax(e.playlists.master,i).video});return r[0]||null},jWe=function(e){var t=0,r;return e.bytes&&(r=new Uint8Array(e.bytes),e.segments.forEach(function(i){r.set(i,t),t+=i.byteLength})),r},KWe=function(e,t,r){if(!e[r]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var i=r;/^cc708_/.test(r)&&(i="SERVICE"+r.split("_")[1]);var a=t.textTracks().getTrackById(i);if(a)e[r]=a;else{var s=t.options_.vhs&&t.options_.vhs.captionServices||{},o=r,l=r,u=!1,c=s[i];c&&(o=c.label,l=c.language,u=c.default),e[r]=t.addRemoteTextTrack({kind:"captions",id:i,default:u,label:o,language:l},!1).track}}},XWe=function(e){var t=e.inbandTextTracks,r=e.captionArray,i=e.timestampOffset;if(r){var a=gt.WebKitDataCue||gt.VTTCue;r.forEach(function(s){var o=s.stream;t[o].addCue(new a(s.startTime+i,s.endTime+i,s.text))})}},YWe=function(e){Object.defineProperties(e.frame,{id:{get:function(){return Lt.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Lt.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Lt.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},QWe=function(e){var t=e.inbandTextTracks,r=e.metadataArray,i=e.timestampOffset,a=e.videoDuration;if(r){var s=gt.WebKitDataCue||gt.VTTCue,o=t.metadataTrack_;if(o&&(r.forEach(function(h){var p=h.cueTime+i;typeof p!="number"||gt.isNaN(p)||p<0||!(p<1/0)||h.frames.forEach(function(m){var v=new s(p,p,m.value||m.url||m.data||"");v.frame=m,v.value=m,YWe(v),o.addCue(v)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,u=[],c=0;c<l.length;c++)l[c]&&u.push(l[c]);var d=u.reduce(function(h,p){var m=h[p.startTime]||[];return m.push(p),h[p.startTime]=m,h},{}),f=Object.keys(d).sort(function(h,p){return Number(h)-Number(p)});f.forEach(function(h,p){var m=d[h],v=Number(f[p+1])||a;m.forEach(function(g){g.endTime=v})})}}},ZWe=function(e,t,r){e.metadataTrack_||(e.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},LS=function(e,t,r){var i,a;if(r&&r.cues)for(i=r.cues.length;i--;)a=r.cues[i],a.startTime>=e&&a.endTime<=t&&r.removeCue(a)},JWe=function(e){var t=e.cues;if(t)for(var r=0;r<t.length;r++){for(var i=[],a=0,s=0;s<t.length;s++)t[r].startTime===t[s].startTime&&t[r].endTime===t[s].endTime&&t[r].text===t[s].text&&(a++,a>1&&i.push(t[s]));i.length&&i.forEach(function(o){return e.removeCue(o)})}},eqe=function(e,t,r){if(typeof t>"u"||t===null||!e.length)return[];var i=Math.ceil((t-r+3)*NM.ONE_SECOND_IN_TS),a;for(a=0;a<e.length&&!(e[a].pts>i);a++);return e.slice(a)},tqe=function(e,t,r){if(!t.length)return e;if(r)return t.slice();var i=t[0].pts,a=0;for(a;a<e.length&&!(e[a].pts>=i);a++);return e.slice(0,a).concat(t)},nqe=function(e,t,r,i){for(var a=Math.ceil((t-i)*NM.ONE_SECOND_IN_TS),s=Math.ceil((r-i)*NM.ONE_SECOND_IN_TS),o=e.slice(),l=e.length;l--&&!(e[l].pts<=s););if(l===-1)return o;for(var u=l+1;u--&&!(e[u].pts<=a););return u=Math.max(u,0),o.splice(u,l-u+1),o},rqe=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var r=Object.keys(e).sort(),i=Object.keys(t).sort();if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++){var s=r[a];if(s!==i[a]||e[s]!==t[s])return!1}return!0},Aoe=22,iqe=function(e,t,r){t=t||[];for(var i=[],a=0,s=0;s<t.length;s++){var o=t[s];if(e===o.timeline&&(i.push(s),a+=o.duration,a>r))return s}return i.length===0?0:i[i.length-1]},Hb=1,aqe=500,fW=function(e){return typeof e=="number"&&isFinite(e)},YT=1/60,sqe=function(e,t,r){return e!=="main"||!t||!r?null:!r.hasAudio&&!r.hasVideo?"Neither audio nor video found in segment.":t.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},oqe=function(e,t,r){var i=t-Ts.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));var a=t-r;return Math.min(a,i)},vg=function(e){var t=e.startOfSegment,r=e.duration,i=e.segment,a=e.part,s=e.playlist,o=s.mediaSequence,l=s.id,u=s.segments,c=u===void 0?[]:u,d=e.mediaIndex,f=e.partIndex,h=e.timeline,p=c.length-1,m="mediaIndex/partIndex increment";e.getMediaInfoForTime?m="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(m="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(m+=" with independent "+e.independent);var v=typeof f=="number",g=e.segment.uri?"segment":"pre-segment",y=v?Kse({preloadSegment:i})-1:0;return g+" ["+(o+d)+"/"+(o+p)+"]"+(v?" part ["+f+"/"+y+"]":"")+(" segment start/end ["+i.start+" => "+i.end+"]")+(v?" part start/end ["+a.start+" => "+a.end+"]":"")+(" startOfSegment ["+t+"]")+(" duration ["+r+"]")+(" timeline ["+h+"]")+(" selected by ["+m+"]")+(" playlist ["+l+"]")},hW=function(e){return e+"TimingInfo"},lqe=function(e){var t=e.segmentTimeline,r=e.currentTimeline,i=e.startOfSegment,a=e.buffered,s=e.overrideCheck;return!s&&t===r?null:t<r?i:a.length?a.end(a.length-1):i},pW=function(e){var t=e.timelineChangeController,r=e.currentTimeline,i=e.segmentTimeline,a=e.loaderType,s=e.audioDisabled;if(r===i)return!1;if(a==="audio"){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==i}if(a==="main"&&s){var l=t.pendingTimelineChange({type:"audio"});return!(l&&l.to===i)}return!1},uqe=function(e){var t=0;return["video","audio"].forEach(function(r){var i=e[r+"TimingInfo"];if(i){var a=i.start,s=i.end,o;typeof a=="bigint"||typeof s=="bigint"?o=gt.BigInt(s)-gt.BigInt(a):typeof a=="number"&&typeof s=="number"&&(o=s-a),typeof o<"u"&&o>t&&(t=o)}}),typeof t=="bigint"&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},mW=function(e){var t=e.segmentDuration,r=e.maxDuration;return t?Math.round(t)>r+jp:!1},cqe=function(e,t){if(t!=="hls")return null;var r=uqe({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!r)return null;var i=e.playlist.targetDuration,a=mW({segmentDuration:r,maxDuration:i*2}),s=mW({segmentDuration:r,maxDuration:i}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+r+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+i+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return a||s?{severity:a?"warn":"info",message:o}:null},C6=function(n){In(e,n);function e(r,i){var a;if(a=n.call(this)||this,!r)throw new TypeError("Initialization settings are required");if(typeof r.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");return a.bandwidth=r.bandwidth,a.throughput={rate:0,count:0},a.roundTrip=NaN,a.resetStats_(),a.mediaIndex=null,a.partIndex=null,a.hasPlayed_=r.hasPlayed,a.currentTime_=r.currentTime,a.seekable_=r.seekable,a.seeking_=r.seeking,a.duration_=r.duration,a.mediaSource_=r.mediaSource,a.vhs_=r.vhs,a.loaderType_=r.loaderType,a.currentMediaInfo_=void 0,a.startingMediaInfo_=void 0,a.segmentMetadataTrack_=r.segmentMetadataTrack,a.goalBufferLength_=r.goalBufferLength,a.sourceType_=r.sourceType,a.sourceUpdater_=r.sourceUpdater,a.inbandTextTracks_=r.inbandTextTracks,a.state_="INIT",a.timelineChangeController_=r.timelineChangeController,a.shouldSaveSegmentTimingInfo_=!0,a.parse708captions_=r.parse708captions,a.useDtsForTimestampOffset_=r.useDtsForTimestampOffset,a.captionServices_=r.captionServices,a.experimentalExactManifestTimings=r.experimentalExactManifestTimings,a.checkBufferTimeout_=null,a.error_=void 0,a.currentTimeline_=-1,a.pendingSegment_=null,a.xhrOptions_=null,a.pendingSegments_=[],a.audioDisabled_=!1,a.isPendingTimestampOffset_=!1,a.gopBuffer_=[],a.timeMapping_=0,a.safeAppend_=Lt.browser.IE_VERSION>=11,a.appendInitSegment_={audio:!0,video:!0},a.playlistOfLastInitSegment_={audio:null,video:null},a.callQueue_=[],a.loadQueue_=[],a.metadataQueue_={id3:[],caption:[]},a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=null,a.activeInitSegmentId_=null,a.initSegments_={},a.cacheEncryptionKeys_=r.cacheEncryptionKeys,a.keyCache_={},a.decrypter_=r.decrypter,a.syncController_=r.syncController,a.syncPoint_={segmentIndex:0,time:0},a.transmuxer_=a.createTransmuxer_(),a.triggerSyncInfoUpdate_=function(){return a.trigger("syncinfoupdate")},a.syncController_.on("syncinfoupdate",a.triggerSyncInfoUpdate_),a.mediaSource_.addEventListener("sourceopen",function(){a.isEndOfStream_()||(a.ended_=!1)}),a.fetchAtBuffer_=!1,a.logger_=Gc("SegmentLoader["+a.loaderType_+"]"),Object.defineProperty(Fr(a),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),a.sourceUpdater_.on("ready",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="main"&&a.timelineChangeController_.on("pendingtimelinechange",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="audio"&&a.timelineChangeController_.on("timelinechange",function(){a.hasEnoughInfoToLoad_()&&a.processLoadQueue_(),a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a}var t=e.prototype;return t.createTransmuxer_=function(){return DP.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},t.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},t.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&gt.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},t.setAudio=function(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},t.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},t.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,gt.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},t.checkForAbort_=function(i){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==i},t.error=function(i){return typeof i<"u"&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},t.endOfStream=function(){this.ended_=!0,this.transmuxer_&&DP.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},t.buffered_=function(){var i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return Lt.createTimeRanges();if(this.loaderType_==="main"){var a=i.hasAudio,s=i.hasVideo,o=i.isMuxed;if(s&&a&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},t.initSegmentForMap=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=KM(i),o=this.initSegments_[s];return a&&!o&&i.bytes&&(this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),o||i},t.segmentKey=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=uoe(i),o=this.keyCache_[s];this.cacheEncryptionKeys_&&a&&!o&&i.bytes&&(this.keyCache_[s]=o={resolvedUri:i.resolvedUri,bytes:i.bytes});var l={resolvedUri:(o||i).resolvedUri};return o&&(l.bytes=o.bytes),l},t.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},t.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.playlist=function(i,a){if(a===void 0&&(a={}),!!i){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=a,this.state==="INIT"&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(i));var l=null;if(s&&(s.id?l=s.id:s.uri&&(l=s.uri)),this.logger_("playlist update ["+l+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==i.uri){this.mediaIndex!==null&&(i.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var u=i.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+u+"]"),this.mediaIndex!==null)if(this.mediaIndex-=u,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){var d=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=d}}o&&(o.mediaIndex-=u,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=i.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,i)}},t.pause=function(){this.checkBufferTimeout_&&(gt.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.paused=function(){return this.checkBufferTimeout_===null},t.resetEverything=function(i){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},t.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.resyncLoader=function(){this.transmuxer_&&DP.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},t.remove=function(i,a,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),a===1/0&&(a=this.duration_()),a<=i){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,u=function(){l--,l===0&&s()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(i,a,u)),(o||this.loaderType_==="main")&&(this.gopBuffer_=nqe(this.gopBuffer_,i,a,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(i,a,u));for(var c in this.inbandTextTracks_)LS(i,a,this.inbandTextTracks_[c]);LS(i,a,this.segmentMetadataTrack_),u()},t.monitorBuffer_=function(){this.checkBufferTimeout_&&gt.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=gt.setTimeout(this.monitorBufferTick_.bind(this),1)},t.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&gt.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=gt.setTimeout(this.monitorBufferTick_.bind(this),aqe)},t.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var i=this.chooseNextRequest_();i&&(typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i))}},t.isEndOfStream_=function(i,a,s){if(i===void 0&&(i=this.mediaIndex),a===void 0&&(a=this.playlist_),s===void 0&&(s=this.partIndex),!a||!this.mediaSource_)return!1;var o=typeof i=="number"&&a.segments[i],l=i+1===a.segments.length,u=!o||!o.parts||s+1===o.parts.length;return a.endList&&this.mediaSource_.readyState==="open"&&l&&u},t.chooseNextRequest_=function(){var i=this.buffered_(),a=nW(i)||0,s=a7(i,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,l=s>=this.goalBufferLength_(),u=this.playlist_.segments;if(!u.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(c.isSyncRequest)c.mediaIndex=iqe(this.currentTimeline_,u,a);else if(this.mediaIndex!==null){var d=u[this.mediaIndex],f=typeof this.partIndex=="number"?this.partIndex:-1;c.startOfSegment=d.end?d.end:a,d.parts&&d.parts[f+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=f+1):c.mediaIndex=this.mediaIndex+1}else{var h=hl.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),p=h.segmentIndex,m=h.startTime,v=h.partIndex;c.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+a:"currentTime "+this.currentTime_(),c.mediaIndex=p,c.startOfSegment=m,c.partIndex=v}var g=u[c.mediaIndex],y=g&&typeof c.partIndex=="number"&&g.parts&&g.parts[c.partIndex];if(!g||typeof c.partIndex=="number"&&!y)return null;if(typeof c.partIndex!="number"&&g.parts&&(c.partIndex=0,y=g.parts[0]),!s&&y&&!y.independent)if(c.partIndex===0){var _=u[c.mediaIndex-1],b=_.parts&&_.parts.length&&_.parts[_.parts.length-1];b&&b.independent&&(c.mediaIndex-=1,c.partIndex=_.parts.length-1,c.independent="previous segment")}else g.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");var x=this.mediaSource_&&this.mediaSource_.readyState==="ended";return c.mediaIndex>=u.length-1&&x&&!this.seeking_()?null:this.generateSegmentInfo_(c)},t.generateSegmentInfo_=function(i){var a=i.independent,s=i.playlist,o=i.mediaIndex,l=i.startOfSegment,u=i.isSyncRequest,c=i.partIndex,d=i.forceTimestampOffset,f=i.getMediaInfoForTime,h=s.segments[o],p=typeof c=="number"&&h.parts[c],m={requestId:"segment-loader-"+Math.random(),uri:p&&p.resolvedUri||h.resolvedUri,mediaIndex:o,partIndex:p?c:null,isSyncRequest:u,startOfSegment:l,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:h.timeline,duration:p&&p.duration||h.duration,segment:h,part:p,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:f,independent:a},v=typeof d<"u"?d:this.isPendingTimestampOffset_;m.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:h.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:v});var g=nW(this.sourceUpdater_.audioBuffered());return typeof g=="number"&&(m.audioAppendStart=g-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(m.gopsToAlignWith=eqe(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),m},t.timestampOffsetForSegment_=function(i){return lqe(i)},t.earlyAbortWhenNeeded_=function(i){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var a=this.currentTime_(),s=i.bandwidth,o=this.pendingSegment_.duration,l=hl.estimateSegmentRequestTime(o,s,this.playlist_,i.bytesReceived),u=PGe(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(!(l<=u)){var c=WWe({master:this.vhs_.playlists.master,currentTime:a,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:u,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(c){var d=l-u,f=d-c.rebufferingImpact,h=.5;u<=jp&&(h=1),!(!c.playlist||c.playlist.uri===this.playlist_.uri||f<h)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*Ts.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},t.handleAbort_=function(i){this.logger_("Aborting "+vg(i)),this.mediaRequestsAborted+=1},t.handleProgress_=function(i,a){this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)&&this.trigger("progress")},t.handleTrackInfo_=function(i,a){this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)&&(this.checkForIllegalMediaSwitch(a)||(a=a||{},rqe(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),!this.checkForAbort_(i.requestId)&&(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},t.handleTimingInfo_=function(i,a,s,o){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var l=this.pendingSegment_,u=hW(a);l[u]=l[u]||{},l[u][s]=o,this.logger_("timinginfo: "+a+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},t.handleCaptions_=function(i,a){var s=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(a.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,a));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),u={};a.forEach(function(c){u[c.stream]=u[c.stream]||{startTime:1/0,captions:[],endTime:0};var d=u[c.stream];d.startTime=Math.min(d.startTime,c.startTime+l),d.endTime=Math.max(d.endTime,c.endTime+l),d.captions.push(c)}),Object.keys(u).forEach(function(c){var d=u[c],f=d.startTime,h=d.endTime,p=d.captions,m=s.inbandTextTracks_;s.logger_("adding cues from "+f+" -> "+h+" for "+c),KWe(m,s.vhs_.tech_,c),LS(f,h,m[c]),XWe({captionArray:p,inbandTextTracks:m,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},t.handleId3_=function(i,a,s){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,a,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();ZWe(this.inbandTextTracks_,s,this.vhs_.tech_),QWe({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:l,videoDuration:this.duration_()})}},t.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(i){return i()}),this.metadataQueue_.caption.forEach(function(i){return i()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},t.processCallQueue_=function(){var i=this.callQueue_;this.callQueue_=[],i.forEach(function(a){return a()})},t.processLoadQueue_=function(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach(function(a){return a()})},t.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var i=this.pendingSegment_;return i?this.getCurrentMediaInfo_()?!pW({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},t.getCurrentMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),i&&i.trackInfo||this.currentMediaInfo_},t.getMediaInfo_=function(i){return i===void 0&&(i=this.pendingSegment_),this.getCurrentMediaInfo_(i)||this.startingMediaInfo_},t.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},t.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var i=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!i||!a)return!1;var s=a.hasAudio,o=a.hasVideo,l=a.isMuxed;return!(o&&!i.videoTimingInfo||s&&!this.audioDisabled_&&!l&&!i.audioTimingInfo||pW({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.handleData_=function(i,a){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,i,a));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),s.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),s.isFmp4=i.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[hW(a.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,u;l&&(u=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:u,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,a.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var c=this.chooseNextRequest_();if(c.mediaIndex!==s.mediaIndex||c.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,a)}}},t.updateAppendInitSegmentStatus=function(i,a){this.loaderType_==="main"&&typeof i.timestampOffset=="number"&&!i.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==i.playlist&&(this.appendInitSegment_[a]=!0)},t.getInitSegmentAndUpdateState_=function(i){var a=i.type,s=i.initSegment,o=i.map,l=i.playlist;if(o){var u=KM(o);if(this.activeInitSegmentId_===u)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=u}return s&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=l,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,s):null},t.handleQuotaExceededError_=function(i,a){var s=this,o=i.segmentInfo,l=i.type,u=i.bytes,c=this.sourceUpdater_.audioBuffered(),d=this.sourceUpdater_.videoBuffered();c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+D0(c).join(", ")),d.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+D0(d).join(", "));var f=c.length?c.start(0):0,h=c.length?c.end(c.length-1):0,p=d.length?d.start(0):0,m=d.length?d.end(d.length-1):0;if(h-f<=Hb&&m-p<=Hb){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+u.byteLength+", ")+("audio buffer: "+D0(c).join(", ")+", ")+("video buffer: "+D0(d).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:u}));var v=this.currentTime_(),g=v-Hb;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+g),this.remove(0,g,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+Hb+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=gt.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},Hb*1e3)},!0)},t.handleAppendError_=function(i,a){var s=i.segmentInfo,o=i.type,l=i.bytes;if(a){if(a.code===Aoe){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error(o+" append of "+l.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},t.appendToSourceBuffer_=function(i){var a=i.segmentInfo,s=i.type,o=i.initSegment,l=i.data,u=i.bytes;if(!u){var c=[l],d=l.byteLength;o&&(c.unshift(o),d+=o.byteLength),u=jWe({bytes:d,segments:c})}this.sourceUpdater_.appendBuffer({segmentInfo:a,type:s,bytes:u},this.handleAppendError_.bind(this,{segmentInfo:a,type:s,bytes:u}))},t.handleSegmentTimingInfo_=function(i,a,s){if(!(!this.pendingSegment_||a!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=i+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[l].transmuxedPresentationStart=s.start.presentation,o[l].transmuxedDecodeStart=s.start.decode,o[l].transmuxedPresentationEnd=s.end.presentation,o[l].transmuxedDecodeEnd=s.end.decode,o[l].baseMediaDecodeTime=s.baseMediaDecodeTime}},t.appendData_=function(i,a){var s=a.type,o=a.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:s,initSegment:a.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:s,initSegment:l,data:o})}},t.loadSegment_=function(i){var a=this;if(this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),typeof i.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=Qu({},i,{forceTimestampOffset:!0});Qu(i,a.generateSegmentInfo_(s)),a.isPendingTimestampOffset_=!1,a.updateTransmuxerAndRequestSegment_(i)});return}this.updateTransmuxerAndRequestSegment_(i)},t.updateTransmuxerAndRequestSegment_=function(i){var a=this;this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var s=this.createSimplifiedSegmentObj_(i),o=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex),l=this.mediaIndex!==null,u=i.timeline!==this.currentTimeline_&&i.timeline>0,c=o||l&&u;this.logger_("Requesting "+vg(i)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=UWe({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:function(){a.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(f){var h=f.message,p=f.level,m=f.stream;a.logger_(vg(i)+" logged from transmuxer stream "+m+" as a "+p+": "+h)}})},t.trimBackBuffer_=function(i){var a=oqe(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)},t.createSimplifiedSegmentObj_=function(i){var a=i.segment,s=i.part,o={resolvedUri:s?s.resolvedUri:a.resolvedUri,byterange:s?s.byterange:a.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part},l=i.playlist.segments[i.mediaIndex-1];if(l&&l.timeline===a.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),a.key){var u=a.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);o.key=this.segmentKey(a.key),o.key.iv=u}return a.map&&(o.map=this.initSegmentForMap(a.map)),o},t.saveTransferStats_=function(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},t.saveBandwidthRelatedStats_=function(i,a){if(this.pendingSegment_.byteLength=a.bytesReceived,i<YT){this.logger_("Ignoring segment's bandwidth because its duration of "+i+(" is less than the min to record "+YT));return}this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime},t.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},t.segmentRequestFinished_=function(i,a,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,a,s));return}if(this.saveTransferStats_(a.stats),!!this.pendingSegment_&&a.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",i.code===gd.ABORTED)return;if(this.pause(),i.code===gd.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(i),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,a.stats),o.endOfAllRequests=a.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=tqe(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},t.setTimeMapping_=function(i){var a=this.syncController_.mappingForTimeline(i);a!==null&&(this.timeMapping_=a)},t.updateMediaSecondsLoaded_=function(i){typeof i.start=="number"&&typeof i.end=="number"?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration},t.shouldUpdateTransmuxerTimestampOffset_=function(i){return i===null?!1:this.loaderType_==="main"&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset()},t.trueSegmentStart_=function(i){var a=i.currentStart,s=i.playlist,o=i.mediaIndex,l=i.firstVideoFrameTimeForData,u=i.currentVideoTimestampOffset,c=i.useVideoTimingInfo,d=i.videoTimingInfo,f=i.audioTimingInfo;if(typeof a<"u")return a;if(!c)return f.start;var h=s.segments[o-1];return o===0||!h||typeof h.start>"u"||h.end!==l+u?l:d.start},t.waitForAppendsToComplete_=function(i){var a=this.getCurrentMediaInfo_(i);if(!a){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=a.hasAudio,o=a.hasVideo,l=a.isMuxed,u=this.loaderType_==="main"&&o,c=!this.audioDisabled_&&s&&!l;if(i.waitingOnAppends=0,!i.hasAppendedData_){!i.timingInfo&&typeof i.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),this.checkAppendsDone_(i);return}u&&i.waitingOnAppends++,c&&i.waitingOnAppends++,u&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},t.checkAppendsDone_=function(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,i.waitingOnAppends===0&&this.handleAppendsDone_())},t.checkForIllegalMediaSwitch=function(i){var a=sqe(this.loaderType_,this.getCurrentMediaInfo_(),i);return a?(this.error({message:a,blacklistDuration:1/0}),this.trigger("error"),!0):!1},t.updateSourceBufferTimestampOffset_=function(i){if(!(i.timestampOffset===null||typeof i.timingInfo.start!="number"||i.changedTimestampOffset||this.loaderType_!=="main")){var a=!1;i.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i.segment.videoTimingInfo,audioTimingInfo:i.segment.audioTimingInfo,timingInfo:i.timingInfo}),i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),a=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}},t.getSegmentStartTimeForTimestampOffsetCalculation_=function(i){var a=i.videoTimingInfo,s=i.audioTimingInfo,o=i.timingInfo;return this.useDtsForTimestampOffset_?a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},t.updateTimingInfoEnd_=function(i){i.timingInfo=i.timingInfo||{};var a=this.getMediaInfo_(),s=this.loaderType_==="main"&&a&&a.hasVideo,o=s&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;o&&(i.timingInfo.end=typeof o.end=="number"?o.end:o.start+i.duration)},t.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});var a=cqe(i,this.sourceType_);if(a&&(a.severity==="warn"?Lt.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",i.isSyncRequest&&(this.trigger("syncinfoupdate"),!i.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+vg(i));return}this.logger_("Appended "+vg(i)),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var s=i.segment,o=i.part,l=s.end&&this.currentTime_()-s.end>i.playlist.targetDuration*3,u=o&&o.end&&this.currentTime_()-o.end>i.playlist.partTargetDuration*3;if(l||u){this.logger_("bad "+(l?"segment":"part")+" "+vg(i)),this.resetEverything();return}var c=this.mediaIndex!==null;c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},t.recordThroughput_=function(i){if(i.duration<YT){this.logger_("Ignoring segment's throughput because its duration of "+i.duration+(" is less than the min to record "+YT));return}var a=this.throughput.rate,s=Date.now()-i.endOfAllRequests+1,o=Math.floor(i.byteLength/s*8*1e3);this.throughput.rate+=(o-a)/++this.throughput.count},t.addSegmentMetadataCue_=function(i){if(this.segmentMetadataTrack_){var a=i.segment,s=a.start,o=a.end;if(!(!fW(s)||!fW(o))){LS(s,o,this.segmentMetadataTrack_);var l=gt.WebKitDataCue||gt.VTTCue,u={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:s,end:o},c=JSON.stringify(u),d=new l(s,o,c);d.value=u,this.segmentMetadataTrack_.addCue(d)}}},e}(Lt.EventTarget);function Mf(){}var Eoe=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},dqe=["video","audio"],A6=function(e,t){var r=t[e+"Buffer"];return r&&r.updating||t.queuePending[e]},fqe=function(e,t){for(var r=0;r<t.length;r++){var i=t[r];if(i.type==="mediaSource")return null;if(i.type===e)return r}return null},f7=function n(e,t){if(t.queue.length!==0){var r=0,i=t.queue[r];if(i.type==="mediaSource"){!t.updating()&&t.mediaSource.readyState!=="closed"&&(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),n("audio",t),n("video",t));return}if(e!=="mediaSource"&&!(!t.ready()||t.mediaSource.readyState==="closed"||A6(e,t))){if(i.type!==e){if(r=fqe(e,t.queue),r===null)return;i=t.queue[r]}if(t.queue.splice(r,1),t.queuePending[e]=i,i.action(e,t),!i.doneFn){t.queuePending[e]=null,n(e,t);return}}}},Moe=function(e,t){var r=t[e+"Buffer"],i=Eoe(e);r&&(r.removeEventListener("updateend",t["on"+i+"UpdateEnd_"]),r.removeEventListener("error",t["on"+i+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},sd=function(e,t){return e&&t&&Array.prototype.indexOf.call(e.sourceBuffers,t)!==-1},Nl={appendBuffer:function(e,t,r){return function(i,a){var s=a[i+"Buffer"];if(sd(a.mediaSource,s)){a.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{s.appendBuffer(e)}catch(o){a.logger_("Error with code "+o.code+" "+(o.code===Aoe?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+t.mediaIndex+" to "+i+"Buffer")),a.queuePending[i]=null,r(o)}}}},remove:function(e,t){return function(r,i){var a=i[r+"Buffer"];if(sd(i.mediaSource,a)){i.logger_("Removing "+e+" to "+t+" from "+r+"Buffer");try{a.remove(e,t)}catch{i.logger_("Remove "+e+" to "+t+" from "+r+"Buffer failed")}}}},timestampOffset:function(e){return function(t,r){var i=r[t+"Buffer"];sd(r.mediaSource,i)&&(r.logger_("Setting "+t+"timestampOffset to "+e),i.timestampOffset=e)}},callback:function(e){return function(t,r){e()}},endOfStream:function(e){return function(t){if(t.mediaSource.readyState==="open"){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(r){Lt.log.warn("Failed to call media source endOfStream",r)}}}},duration:function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(r){Lt.log.warn("Failed to set media source duration",r)}}},abort:function(){return function(e,t){if(t.mediaSource.readyState==="open"){var r=t[e+"Buffer"];if(sd(t.mediaSource,r)){t.logger_("calling abort on "+e+"Buffer");try{r.abort()}catch(i){Lt.log.warn("Failed to abort on "+e+"Buffer",i)}}}}},addSourceBuffer:function(e,t){return function(r){var i=Eoe(e),a=p2(t);r.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var s=r.mediaSource.addSourceBuffer(a);s.addEventListener("updateend",r["on"+i+"UpdateEnd_"]),s.addEventListener("error",r["on"+i+"Error_"]),r.codecs[e]=t,r[e+"Buffer"]=s}},removeSourceBuffer:function(e){return function(t){var r=t[e+"Buffer"];if(Moe(e,t),!!sd(t.mediaSource,r)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(r)}catch(i){Lt.log.warn("Failed to removeSourceBuffer "+e+"Buffer",i)}}}},changeType:function(e){return function(t,r){var i=r[t+"Buffer"],a=p2(e);if(sd(r.mediaSource,i)&&r.codecs[t]!==e){r.logger_("changing "+t+"Buffer codec from "+r.codecs[t]+" to "+e);try{i.changeType(a),r.codecs[t]=e}catch(s){Lt.log.warn("Failed to changeType on "+t+"Buffer",s)}}}}},Bl=function(e){var t=e.type,r=e.sourceUpdater,i=e.action,a=e.doneFn,s=e.name;r.queue.push({type:t,action:i,doneFn:a,name:s}),f7(t,r)},vW=function(e,t){return function(r){if(t.queuePending[e]){var i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t[e+"Error_"])}f7(e,t)}},Ioe=function(n){In(e,n);function e(r){var i;return i=n.call(this)||this,i.mediaSource=r,i.sourceopenListener_=function(){return f7("mediaSource",Fr(i))},i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_),i.logger_=Gc("SourceUpdater"),i.audioTimestampOffset_=0,i.videoTimestampOffset_=0,i.queue=[],i.queuePending={audio:null,video:null},i.delayedAudioAppendQueue_=[],i.videoAppendQueued_=!1,i.codecs={},i.onVideoUpdateEnd_=vW("video",Fr(i)),i.onAudioUpdateEnd_=vW("audio",Fr(i)),i.onVideoError_=function(a){i.videoError_=a},i.onAudioError_=function(a){i.audioError_=a},i.createdSourceBuffers_=!1,i.initializedEme_=!1,i.triggeredReady_=!1,i}var t=e.prototype;return t.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},t.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},t.hasInitializedAnyEme=function(){return this.initializedEme_},t.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},t.createSourceBuffers=function(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},t.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},t.addSourceBuffer=function(i,a){Bl({type:"mediaSource",sourceUpdater:this,action:Nl.addSourceBuffer(i,a),name:"addSourceBuffer"})},t.abort=function(i){Bl({type:i,sourceUpdater:this,action:Nl.abort(i),name:"abort"})},t.removeSourceBuffer=function(i){if(!this.canRemoveSourceBuffer()){Lt.log.error("removeSourceBuffer is not supported!");return}Bl({type:"mediaSource",sourceUpdater:this,action:Nl.removeSourceBuffer(i),name:"removeSourceBuffer"})},t.canRemoveSourceBuffer=function(){return!Lt.browser.IE_VERSION&&!Lt.browser.IS_FIREFOX&&gt.MediaSource&&gt.MediaSource.prototype&&typeof gt.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return gt.SourceBuffer&&gt.SourceBuffer.prototype&&typeof gt.SourceBuffer.prototype.changeType=="function"},t.canChangeType=function(){return this.constructor.canChangeType()},t.changeType=function(i,a){if(!this.canChangeType()){Lt.log.error("changeType is not supported!");return}Bl({type:i,sourceUpdater:this,action:Nl.changeType(a),name:"changeType"})},t.addOrChangeSourceBuffers=function(i){var a=this;if(!i||typeof i!="object"||Object.keys(i).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(s){var o=i[s];if(!a.hasCreatedSourceBuffers())return a.addSourceBuffer(s,o);a.canChangeType()&&a.changeType(s,o)})},t.appendBuffer=function(i,a){var s=this,o=i.segmentInfo,l=i.type,u=i.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([i,a]),this.logger_("delayed audio append of "+u.length+" until video append");return}var c=a;if(Bl({type:l,sourceUpdater:this,action:Nl.appendBuffer(u,o||{mediaIndex:-1},c),doneFn:a,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var d=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+d.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,d.forEach(function(f){s.appendBuffer.apply(s,f)})}},t.audioBuffered=function(){return sd(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Lt.createTimeRange()},t.videoBuffered=function(){return sd(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Lt.createTimeRange()},t.buffered=function(){var i=sd(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=sd(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!i?this.audioBuffered():i&&!a?this.videoBuffered():DGe(this.audioBuffered(),this.videoBuffered())},t.setDuration=function(i,a){a===void 0&&(a=Mf),Bl({type:"mediaSource",sourceUpdater:this,action:Nl.duration(i),name:"duration",doneFn:a})},t.endOfStream=function(i,a){i===void 0&&(i=null),a===void 0&&(a=Mf),typeof i!="string"&&(i=void 0),Bl({type:"mediaSource",sourceUpdater:this,action:Nl.endOfStream(i),name:"endOfStream",doneFn:a})},t.removeAudio=function(i,a,s){if(s===void 0&&(s=Mf),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}Bl({type:"audio",sourceUpdater:this,action:Nl.remove(i,a),doneFn:s,name:"remove"})},t.removeVideo=function(i,a,s){if(s===void 0&&(s=Mf),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}Bl({type:"video",sourceUpdater:this,action:Nl.remove(i,a),doneFn:s,name:"remove"})},t.updating=function(){return!!(A6("audio",this)||A6("video",this))},t.audioTimestampOffset=function(i){return typeof i<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(Bl({type:"audio",sourceUpdater:this,action:Nl.timestampOffset(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},t.videoTimestampOffset=function(i){return typeof i<"u"&&this.videoBuffer&&this.videoTimestampOffset!==i&&(Bl({type:"video",sourceUpdater:this,action:Nl.timestampOffset(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},t.audioQueueCallback=function(i){this.audioBuffer&&Bl({type:"audio",sourceUpdater:this,action:Nl.callback(i),name:"callback"})},t.videoQueueCallback=function(i){this.videoBuffer&&Bl({type:"video",sourceUpdater:this,action:Nl.callback(i),name:"callback"})},t.dispose=function(){var i=this;this.trigger("dispose"),dqe.forEach(function(a){i.abort(a),i.canRemoveSourceBuffer()?i.removeSourceBuffer(a):i[a+"QueueCallback"](function(){return Moe(a,i)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(Lt.EventTarget),gW=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},yW=new Uint8Array(`

`.split("").map(function(n){return n.charCodeAt(0)})),hqe=function(n){In(e,n);function e(){return n.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return e}(o6(Error)),pqe=function(n){In(e,n);function e(r,i){var a;return i===void 0&&(i={}),a=n.call(this,r,i)||this,a.mediaSource_=null,a.subtitlesTrack_=null,a.loaderType_="subtitle",a.featuresNativeTextTracks_=r.featuresNativeTextTracks,a.loadVttJs=r.loadVttJs,a.shouldSaveSegmentTimingInfo_=!1,a}var t=e.prototype;return t.createTransmuxer_=function(){return null},t.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Lt.createTimeRanges();var i=this.subtitlesTrack_.cues,a=i[0].startTime,s=i[i.length-1].startTime;return Lt.createTimeRanges([[a,s]])},t.initSegmentForMap=function(i,a){if(a===void 0&&(a=!1),!i)return null;var s=KM(i),o=this.initSegments_[s];if(a&&!o&&i.bytes){var l=yW.byteLength+i.bytes.byteLength,u=new Uint8Array(l);u.set(i.bytes),u.set(yW,i.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:u}}return o||i},t.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.track=function(i){return typeof i>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=i,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},t.remove=function(i,a){LS(i,a,this.subtitlesTrack_)},t.fillBuffer_=function(){var i=this,a=this.chooseNextRequest_();if(a){if(this.syncController_.timestampOffsetForTimeline(a.timeline)===null){var s=function(){i.state="READY",i.paused()||i.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(a)}},t.timestampOffsetForSegment_=function(){return null},t.chooseNextRequest_=function(){return this.skipEmptySegments_(n.prototype.chooseNextRequest_.call(this))},t.skipEmptySegments_=function(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i},t.stopForError=function(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},t.segmentRequestFinished_=function(i,a,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(i){i.code===gd.TIMEOUT&&this.handleTimeout_(),i.code===gd.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(i);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");var u=l.segment;if(u.map&&(u.map.bytes=a.map.bytes),l.bytes=a.bytes,typeof gt.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(i,a,s)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}u.requested=!0;try{this.parseVTTCues_(l)}catch(c){this.stopForError({message:c.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=u.duration,l.cues.forEach(function(c){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new gt.VTTCue(c.startTime,c.endTime,c.text):c)}),JWe(this.subtitlesTrack_),this.handleAppendsDone_()},t.handleData_=function(){},t.updateTimingInfoEnd_=function(){},t.parseVTTCues_=function(i){var a,s=!1;if(typeof gt.WebVTT!="function")throw new hqe;typeof gt.TextDecoder=="function"?a=new gt.TextDecoder("utf8"):(a=gt.WebVTT.StringDecoder(),s=!0);var o=new gt.WebVTT.Parser(gt,gt.vttjs,a);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=i.cues.push.bind(i.cues),o.ontimestampmap=function(c){i.timestampmap=c},o.onparsingerror=function(c){Lt.log.warn("Error encountered when parsing cues: "+c.message)},i.segment.map){var l=i.segment.map.bytes;s&&(l=gW(l)),o.parse(l)}var u=i.bytes;s&&(u=gW(u)),o.parse(u),o.flush()},t.updateTimeMapping_=function(i,a,s){var o=i.segment;if(a){if(!i.cues.length){o.empty=!0;return}var l=i.timestampmap,u=l.MPEGTS/NM.ONE_SECOND_IN_TS-l.LOCAL+a.mapping;if(i.cues.forEach(function(f){f.startTime+=u,f.endTime+=u}),!s.syncInfo){var c=i.cues[0].startTime,d=i.cues[i.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+i.mediaIndex,time:Math.min(c,d-o.duration)}}}},e}(C6),mqe=function(e,t){for(var r=e.cues,i=0;i<r.length;i++){var a=r[i];if(t>=a.adStartTime&&t<=a.adEndTime)return a}return null},vqe=function(e,t,r){if(r===void 0&&(r=0),!!e.segments)for(var i=r,a,s=0;s<e.segments.length;s++){var o=e.segments[s];if(a||(a=mqe(t,i+o.duration/2)),a){if("cueIn"in o){a.endTime=i,a.adEndTime=i,i+=o.duration,a=null;continue}if(i<a.endTime){i+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&(a=new gt.VTTCue(i,i+o.duration,o.cueOut),a.adStartTime=i,a.adEndTime=i+parseFloat(o.cueOut),t.addCue(a)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),u=l[0],c=l[1];a=new gt.VTTCue(i,i+o.duration,""),a.adStartTime=i-u,a.adEndTime=a.adStartTime+c,t.addCue(a)}i+=o.duration}},gqe=86400,_W=[{name:"VOD",run:function(e,t,r,i,a){if(r!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(e,t,r,i,a){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var s=null,o=null,l=g6(t);a=a||0;for(var u=0;u<l.length;u++){var c=t.endList||a===0?u:l.length-(u+1),d=l[c],f=d.segment,h=e.timelineToDatetimeMappings[f.timeline];if(!(!h||!f.dateTimeObject)){var p=f.dateTimeObject.getTime()/1e3,m=p+h;if(f.parts&&typeof d.partIndex=="number")for(var v=0;v<d.partIndex;v++)m+=f.parts[v].duration;var g=Math.abs(a-m);if(o!==null&&(g===0||o<g))break;o=g,s={time:m,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}}return s}},{name:"Segment",run:function(e,t,r,i,a){var s=null,o=null;a=a||0;for(var l=g6(t),u=0;u<l.length;u++){var c=t.endList||a===0?u:l.length-(u+1),d=l[c],f=d.segment,h=d.part&&d.part.start||f&&f.start;if(f.timeline===i&&typeof h<"u"){var p=Math.abs(a-h);if(o!==null&&o<p)break;(!s||o===null||o>=p)&&(o=p,s={time:h,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return s}},{name:"Discontinuity",run:function(e,t,r,i,a){var s=null;if(a=a||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,l=0;l<t.discontinuityStarts.length;l++){var u=t.discontinuityStarts[l],c=t.discontinuitySequence+l+1,d=e.discontinuities[c];if(d){var f=Math.abs(a-d.time);if(o!==null&&o<f)break;(!s||o===null||o>=f)&&(o=f,s={time:d.time,segmentIndex:u,partIndex:null})}}return s}},{name:"Playlist",run:function(e,t,r,i,a){if(t.syncInfo){var s={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null};return s}return null}}],yqe=function(n){In(e,n);function e(r){var i;return i=n.call(this)||this,i.timelines=[],i.discontinuities=[],i.timelineToDatetimeMappings={},i.logger_=Gc("SyncController"),i}var t=e.prototype;return t.getSyncPoint=function(i,a,s,o){var l=this.runStrategies_(i,a,s,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},t.getExpiredTime=function(i,a){if(!i||!i.segments)return null;var s=this.runStrategies_(i,a,i.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+ix({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:o.segmentIndex,endIndex:0}))},t.runStrategies_=function(i,a,s,o){for(var l=[],u=0;u<_W.length;u++){var c=_W[u],d=c.run(this,i,a,s,o);d&&(d.strategy=c.name,l.push({strategy:c.name,syncPoint:d}))}return l},t.selectSyncPoint_=function(i,a){for(var s=i[0].syncPoint,o=Math.abs(i[0].syncPoint[a.key]-a.value),l=i[0].strategy,u=1;u<i.length;u++){var c=Math.abs(i[u].syncPoint[a.key]-a.value);c<o&&(o=c,s=i[u].syncPoint,l=i[u].strategy)}return this.logger_("syncPoint for ["+a.key+": "+a.value+"] chosen with strategy"+(" ["+l+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},t.saveExpiredSegmentInfo=function(i,a){var s=a.mediaSequence-i.mediaSequence;if(s>gqe){Lt.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var l=i.segments[o];if(l&&typeof l.start<"u"){a.syncInfo={mediaSequence:i.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+a.syncInfo.time+","+(" mediaSequence: "+a.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},t.setDateTimeMappingForStart=function(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var a=i.segments[0],s=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-s}},t.saveSegmentTimingInfo=function(i){var a=i.segmentInfo,s=i.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(a,a.timingInfo,s),l=a.segment;o&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:l.start}));var u=l.dateTimeObject;l.discontinuity&&s&&u&&(this.timelineToDatetimeMappings[l.timeline]=-(u.getTime()/1e3))},t.timestampOffsetForTimeline=function(i){return typeof this.timelines[i]>"u"?null:this.timelines[i].time},t.mappingForTimeline=function(i){return typeof this.timelines[i]>"u"?null:this.timelines[i].mapping},t.calculateSegmentTimeMapping_=function(i,a,s){var o=i.segment,l=i.part,u=this.timelines[i.timeline],c,d;if(typeof i.timestampOffset=="number")u={time:i.startOfSegment,mapping:i.startOfSegment-a.start},s&&(this.timelines[i.timeline]=u,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": "+("[time: "+u.time+"] [mapping: "+u.mapping+"]"))),c=i.startOfSegment,d=a.end+u.mapping;else if(u)c=a.start+u.mapping,d=a.end+u.mapping;else return!1;return l&&(l.start=c,l.end=d),(!o.start||c<o.start)&&(o.start=c),o.end=d,!0},t.saveDiscontinuitySyncInfo_=function(i){var a=i.playlist,s=i.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(var o=0;o<a.discontinuityStarts.length;o++){var l=a.discontinuityStarts[o],u=a.discontinuitySequence+o+1,c=l-i.mediaIndex,d=Math.abs(c);if(!this.discontinuities[u]||this.discontinuities[u].accuracy>d){var f=void 0;c<0?f=s.start-ix({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex,endIndex:l}):f=s.end+ix({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex+1,endIndex:l}),this.discontinuities[u]={time:f,accuracy:d}}}},t.dispose=function(){this.trigger("dispose"),this.off()},e}(Lt.EventTarget),_qe=function(n){In(e,n);function e(){var r;return r=n.call(this)||this,r.pendingTimelineChanges_={},r.lastTimelineChanges_={},r}var t=e.prototype;return t.clearPendingTimelineChange=function(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},t.pendingTimelineChange=function(i){var a=i.type,s=i.from,o=i.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[a]={type:a,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]},t.lastTimelineChange=function(i){var a=i.type,s=i.from,o=i.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[a]={type:a,from:s,to:o},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange")),this.lastTimelineChanges_[a]},t.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(Lt.EventTarget),bqe=moe(voe(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e(b,x,w){return w={path:x,exports:{},require:function(T,C){return t(T,C??w.path)}},b(w,w.exports),w.exports}function t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var r=e(function(b){function x(A,T){for(var C=0;C<T.length;C++){var E=T[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(A,E.key,E)}}function w(A,T,C){return T&&x(A.prototype,T),C&&x(A,C),A}b.exports=w,b.exports.default=b.exports,b.exports.__esModule=!0}),i=e(function(b){function x(w,A){return b.exports=x=Object.setPrototypeOf||function(C,E){return C.__proto__=E,C},b.exports.default=b.exports,b.exports.__esModule=!0,x(w,A)}b.exports=x,b.exports.default=b.exports,b.exports.__esModule=!0}),a=e(function(b){function x(w,A){w.prototype=Object.create(A.prototype),w.prototype.constructor=w,i(w,A)}b.exports=x,b.exports.default=b.exports,b.exports.__esModule=!0}),s=function(){function b(){this.listeners={}}var x=b.prototype;return x.on=function(A,T){this.listeners[A]||(this.listeners[A]=[]),this.listeners[A].push(T)},x.off=function(A,T){if(!this.listeners[A])return!1;var C=this.listeners[A].indexOf(T);return this.listeners[A]=this.listeners[A].slice(0),this.listeners[A].splice(C,1),C>-1},x.trigger=function(A){var T=this.listeners[A];if(T)if(arguments.length===2)for(var C=T.length,E=0;E<C;++E)T[E].call(this,arguments[1]);else for(var I=Array.prototype.slice.call(arguments,1),P=T.length,L=0;L<P;++L)T[L].apply(this,I)},x.dispose=function(){this.listeners={}},x.pipe=function(A){this.on("data",function(T){A.push(T)})},b}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function o(b){return b.subarray(0,b.byteLength-b[b.byteLength-1])}/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */var l=function(){var x=[[[],[],[],[],[]],[[],[],[],[],[]]],w=x[0],A=x[1],T=w[4],C=A[4],E,I,P,L=[],N=[],F,k,H,U,B,$;for(E=0;E<256;E++)N[(L[E]=E<<1^(E>>7)*283)^E]=E;for(I=P=0;!T[I];I^=F||1,P=N[P]||1)for(U=P^P<<1^P<<2^P<<3^P<<4,U=U>>8^U&255^99,T[I]=U,C[U]=I,H=L[k=L[F=L[I]]],$=H*16843009^k*65537^F*257^I*16843008,B=L[U]*257^U*16843008,E=0;E<4;E++)w[E][I]=B=B<<24^B>>>8,A[E][U]=$=$<<24^$>>>8;for(E=0;E<5;E++)w[E]=w[E].slice(0),A[E]=A[E].slice(0);return x},u=null,c=function(){function b(w){u||(u=l()),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var A,T,C,E=this._tables[0][4],I=this._tables[1],P=w.length,L=1;if(P!==4&&P!==6&&P!==8)throw new Error("Invalid aes key size");var N=w.slice(0),F=[];for(this._key=[N,F],A=P;A<4*P+28;A++)C=N[A-1],(A%P===0||P===8&&A%P===4)&&(C=E[C>>>24]<<24^E[C>>16&255]<<16^E[C>>8&255]<<8^E[C&255],A%P===0&&(C=C<<8^C>>>24^L<<24,L=L<<1^(L>>7)*283)),N[A]=N[A-P]^C;for(T=0;A;T++,A--)C=N[T&3?A:A-4],A<=4||T<4?F[T]=C:F[T]=I[0][E[C>>>24]]^I[1][E[C>>16&255]]^I[2][E[C>>8&255]]^I[3][E[C&255]]}var x=b.prototype;return x.decrypt=function(A,T,C,E,I,P){var L=this._key[1],N=A^L[0],F=E^L[1],k=C^L[2],H=T^L[3],U,B,$,ee=L.length/4-2,re,ne=4,ae=this._tables[1],pe=ae[0],de=ae[1],me=ae[2],ke=ae[3],Be=ae[4];for(re=0;re<ee;re++)U=pe[N>>>24]^de[F>>16&255]^me[k>>8&255]^ke[H&255]^L[ne],B=pe[F>>>24]^de[k>>16&255]^me[H>>8&255]^ke[N&255]^L[ne+1],$=pe[k>>>24]^de[H>>16&255]^me[N>>8&255]^ke[F&255]^L[ne+2],H=pe[H>>>24]^de[N>>16&255]^me[F>>8&255]^ke[k&255]^L[ne+3],ne+=4,N=U,F=B,k=$;for(re=0;re<4;re++)I[(3&-re)+P]=Be[N>>>24]<<24^Be[F>>16&255]<<16^Be[k>>8&255]<<8^Be[H&255]^L[ne++],U=N,N=F,F=k,k=H,H=U},b}(),d=function(b){a(x,b);function x(){var A;return A=b.call(this,s)||this,A.jobs=[],A.delay=1,A.timeout_=null,A}var w=x.prototype;return w.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},w.push=function(T){this.jobs.push(T),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},x}(s),f=function(x){return x<<24|(x&65280)<<8|(x&16711680)>>8|x>>>24},h=function(x,w,A){var T=new Int32Array(x.buffer,x.byteOffset,x.byteLength>>2),C=new c(Array.prototype.slice.call(w)),E=new Uint8Array(x.byteLength),I=new Int32Array(E.buffer),P,L,N,F,k,H,U,B,$;for(P=A[0],L=A[1],N=A[2],F=A[3],$=0;$<T.length;$+=4)k=f(T[$]),H=f(T[$+1]),U=f(T[$+2]),B=f(T[$+3]),C.decrypt(k,H,U,B,I,$),I[$]=f(I[$]^P),I[$+1]=f(I[$+1]^L),I[$+2]=f(I[$+2]^N),I[$+3]=f(I[$+3]^F),P=k,L=H,N=U,F=B;return E},p=function(){function b(w,A,T,C){var E=b.STEP,I=new Int32Array(w.buffer),P=new Uint8Array(w.byteLength),L=0;for(this.asyncStream_=new d,this.asyncStream_.push(this.decryptChunk_(I.subarray(L,L+E),A,T,P)),L=E;L<I.length;L+=E)T=new Uint32Array([f(I[L-4]),f(I[L-3]),f(I[L-2]),f(I[L-1])]),this.asyncStream_.push(this.decryptChunk_(I.subarray(L,L+E),A,T,P));this.asyncStream_.push(function(){C(null,o(P))})}var x=b.prototype;return x.decryptChunk_=function(A,T,C,E){return function(){var I=h(A,T,C);E.set(I,A.byteOffset)}},r(b,null,[{key:"STEP",get:function(){return 32e3}}]),b}(),m;typeof window<"u"?m=window:typeof n<"u"?m=n:typeof self<"u"?m=self:m={};var v=m,g=function(x){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(x):x&&x.buffer instanceof ArrayBuffer},y=v.BigInt||Number;y("0x1"),y("0x100"),y("0x10000"),y("0x1000000"),y("0x100000000"),y("0x10000000000"),y("0x1000000000000"),y("0x100000000000000"),y("0x10000000000000000");var _=function(x){var w={};return Object.keys(x).forEach(function(A){var T=x[A];g(T)?w[A]={bytes:T.buffer,byteOffset:T.byteOffset,byteLength:T.byteLength}:w[A]=T}),w};self.onmessage=function(b){var x=b.data,w=new Uint8Array(x.encrypted.bytes,x.encrypted.byteOffset,x.encrypted.byteLength),A=new Uint32Array(x.key.bytes,x.key.byteOffset,x.key.byteLength/4),T=new Uint32Array(x.iv.bytes,x.iv.byteOffset,x.iv.byteLength/4);new p(w,A,T,function(C,E){self.postMessage(_({source:x.source,decrypted:E}),[E.buffer])})}})),Sqe=poe(bqe),xqe=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},ZM=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},E6=function(e,t){t.activePlaylistLoader=e,e.load()},wqe=function(e,t){return function(){var r=t.segmentLoaders,i=r[e],a=r.main,s=t.mediaTypes[e],o=s.activeTrack(),l=s.getActiveGroup(),u=s.activePlaylistLoader,c=s.lastGroup_;if(!(l&&c&&l.id===c.id)&&(s.lastGroup_=l,s.lastTrack_=o,ZM(i,s),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){u&&a.resetEverything();return}i.resyncLoader(),E6(l.playlistLoader,s)}}},Tqe=function(e,t){return function(){var r=t.segmentLoaders[e],i=t.mediaTypes[e];i.lastGroup_=null,r.abort(),r.pause()}},Cqe=function(e,t){return function(){var r=t.masterPlaylistLoader,i=t.segmentLoaders,a=i[e],s=i.main,o=t.mediaTypes[e],l=o.activeTrack(),u=o.getActiveGroup(),c=o.activePlaylistLoader,d=o.lastTrack_;if(!(d&&l&&d.id===l.id)&&(o.lastGroup_=u,o.lastTrack_=l,ZM(a,o),!!u)){if(u.isMasterPlaylist){if(!l||!d||l.id===d.id)return;var f=t.vhs.masterPlaylistController_,h=f.selectPlaylist();if(f.media()===h)return;o.logger_("track change. Switching master audio from "+d.id+" to "+l.id),r.pause(),s.resetEverything(),f.fastQualityChange_(h);return}if(e==="AUDIO"){if(!u.playlistLoader){s.setAudio(!0),s.resetEverything();return}a.setAudio(!0),s.setAudio(!1)}if(c===u.playlistLoader){E6(u.playlistLoader,o);return}a.track&&a.track(l),a.resetEverything(),E6(u.playlistLoader,o)}}},JM={AUDIO:function(e,t){return function(){var r=t.segmentLoaders[e],i=t.mediaTypes[e],a=t.blacklistCurrentPlaylist;ZM(r,i);var s=i.activeTrack(),o=i.activeGroup(),l=(o.filter(function(d){return d.default})[0]||o[0]).id,u=i.tracks[l];if(s===u){a({message:"Problem encountered loading the default audio track."});return}Lt.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var c in i.tracks)i.tracks[c].enabled=i.tracks[c]===u;i.onTrackChanged()}},SUBTITLES:function(e,t){return function(){var r=t.segmentLoaders[e],i=t.mediaTypes[e];Lt.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),ZM(r,i);var a=i.activeTrack();a&&(a.mode="disabled"),i.onTrackChanged()}}},bW={AUDIO:function(e,t,r){if(t){var i=r.tech,a=r.requestOptions,s=r.segmentLoaders[e];t.on("loadedmetadata",function(){var o=t.media();s.playlist(o,a),(!i.paused()||o.endList&&i.preload()!=="none")&&s.load()}),t.on("loadedplaylist",function(){s.playlist(t.media(),a),i.paused()||s.load()}),t.on("error",JM[e](e,r))}},SUBTITLES:function(e,t,r){var i=r.tech,a=r.requestOptions,s=r.segmentLoaders[e],o=r.mediaTypes[e];t.on("loadedmetadata",function(){var l=t.media();s.playlist(l,a),s.track(o.activeTrack()),(!i.paused()||l.endList&&i.preload()!=="none")&&s.load()}),t.on("loadedplaylist",function(){s.playlist(t.media(),a),i.paused()||s.load()}),t.on("error",JM[e](e,r))}},Aqe={AUDIO:function(e,t){var r=t.vhs,i=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=l.logger_,f=t.masterPlaylistLoader,h=Fw(f.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},h&&(o[e].main.default.playlists=f.master.playlists));for(var p in o[e]){u[p]||(u[p]=[]);for(var m in o[e][p]){var v=o[e][p][m],g=void 0;if(h?(d("AUDIO group '"+p+"' label '"+m+"' is a master playlist"),v.isMasterPlaylist=!0,g=null):i==="vhs-json"&&v.playlists?g=new Ny(v.playlists[0],r,s):v.resolvedUri?g=new Ny(v.resolvedUri,r,s):v.playlists&&i==="dash"?g=new w6(v.playlists[0],r,s,f):g=null,v=Lt.mergeOptions({id:m,playlistLoader:g},v),bW[e](e,v.playlistLoader,t),u[p].push(v),typeof c[m]>"u"){var y=new Lt.AudioTrack({id:m,kind:xqe(v),enabled:!1,language:v.language,default:v.default,label:m});c[m]=y}}}a.on("error",JM[e](e,t))},SUBTITLES:function(e,t){var r=t.tech,i=t.vhs,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,u=t.mediaTypes[e],c=u.groups,d=u.tracks,f=t.masterPlaylistLoader;for(var h in l[e]){c[h]||(c[h]=[]);for(var p in l[e][h])if(!l[e][h][p].forced){var m=l[e][h][p],v=void 0;if(a==="hls")v=new Ny(m.resolvedUri,i,o);else if(a==="dash"){var g=m.playlists.filter(function(_){return _.excludeUntil!==1/0});if(!g.length)return;v=new w6(m.playlists[0],i,o,f)}else a==="vhs-json"&&(v=new Ny(m.playlists?m.playlists[0]:m.resolvedUri,i,o));if(m=Lt.mergeOptions({id:p,playlistLoader:v},m),bW[e](e,m.playlistLoader,t),c[h].push(m),typeof d[p]>"u"){var y=r.addRemoteTextTrack({id:p,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:p},!1).track;d[p]=y}}}s.on("error",JM[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var r=t.tech,i=t.master.mediaGroups,a=t.mediaTypes[e],s=a.groups,o=a.tracks;for(var l in i[e]){s[l]||(s[l]=[]);for(var u in i[e][l]){var c=i[e][l][u];if(/^(?:CC|SERVICE)/.test(c.instreamId)){var d=r.options_.vhs&&r.options_.vhs.captionServices||{},f={label:u,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(d[f.instreamId]&&(f=Lt.mergeOptions(f,d[f.instreamId])),f.default===void 0&&delete f.default,s[l].push(Lt.mergeOptions({id:u},c)),typeof o[u]>"u"){var h=r.addRemoteTextTrack({id:f.instreamId,kind:"captions",default:f.default,language:f.language,label:f.label},!1).track;o[u]=h}}}}}},Eqe=function n(e,t){for(var r=0;r<e.length;r++)if(l7(t,e[r])||e[r].playlists&&n(e[r].playlists,t))return!0;return!1},Mqe=function(e,t){return function(r){var i=t.masterPlaylistLoader,a=t.mediaTypes[e].groups,s=i.media();if(!s)return null;var o=null;s.attributes[e]&&(o=a[s.attributes[e]]);var l=Object.keys(a);if(!o)if(e==="AUDIO"&&l.length>1&&Fw(t.master))for(var u=0;u<l.length;u++){var c=a[l[u]];if(Eqe(c,s)){o=c;break}}else a.main?o=a.main:l.length===1&&(o=a[l[0]]);return typeof r>"u"?o:r===null||!o?null:o.filter(function(d){return d.id===r.id})[0]||null}},Iqe={AUDIO:function(e,t){return function(){var r=t.mediaTypes[e].tracks;for(var i in r)if(r[i].enabled)return r[i];return null}},SUBTITLES:function(e,t){return function(){var r=t.mediaTypes[e].tracks;for(var i in r)if(r[i].mode==="showing"||r[i].mode==="hidden")return r[i];return null}}},Dqe=function(e,t){var r=t.mediaTypes;return function(){var i=r[e].activeTrack();return i?r[e].activeGroup(i):null}},Pqe=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(p){Aqe[p](p,e)});var t=e.mediaTypes,r=e.masterPlaylistLoader,i=e.tech,a=e.vhs,s=e.segmentLoaders,o=s.AUDIO,l=s.main;["AUDIO","SUBTITLES"].forEach(function(p){t[p].activeGroup=Mqe(p,e),t[p].activeTrack=Iqe[p](p,e),t[p].onGroupChanged=wqe(p,e),t[p].onGroupChanging=Tqe(p,e),t[p].onTrackChanged=Cqe(p,e),t[p].getActiveGroup=Dqe(p,e)});var u=t.AUDIO.activeGroup();if(u){var c=(u.filter(function(p){return p.default})[0]||u[0]).id;t.AUDIO.tracks[c].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();var d=t.AUDIO.getActiveGroup();d.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(p){return t[p].onGroupChanged()})}),r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(p){return t[p].onGroupChanging()})});var f=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};i.audioTracks().addEventListener("change",f),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),a.on("dispose",function(){i.audioTracks().removeEventListener("change",f),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(var h in t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[h])},Rqe=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Mf,activeTrack:Mf,getActiveGroup:Mf,onGroupChanged:Mf,onTrackChanged:Mf,lastTrack_:null,logger_:Gc("MediaGroups["+t+"]")}}),e},kqe=60*2,Zd,Lqe=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Oqe=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Nqe=function(e){var t=e.currentPlaylist,r=e.buffered,i=e.currentTime,a=e.nextPlaylist,s=e.bufferLowWaterLine,o=e.bufferHighWaterLine,l=e.duration,u=e.experimentalBufferBasedABR,c=e.log;if(!a)return Lt.log.warn("We received no playlist to switch to. Please check your stream."),!1;var d="allowing switch "+(t&&t.id||"null")+" -> "+a.id;if(!t)return c(d+" as current playlist is not set"),!0;if(a.id===t.id)return!1;var f=!!Oy(r,i).length;if(!t.endList)return!f&&typeof t.partTargetDuration=="number"?(c("not "+d+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(c(d+" as current playlist is live"),!0);var h=a7(r,i),p=u?Ts.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ts.MAX_BUFFER_LOW_WATER_LINE;if(l<p)return c(d+" as duration < max low water line ("+l+" < "+p+")"),!0;var m=a.attributes.BANDWIDTH,v=t.attributes.BANDWIDTH;if(m<v&&(!u||h<o)){var g=d+" as next bandwidth < current bandwidth ("+m+" < "+v+")";return u&&(g+=" and forwardBuffer < bufferHighWaterLine ("+h+" < "+o+")"),c(g),!0}if((!u||m>v)&&h>=s){var y=d+" as forwardBuffer >= bufferLowWaterLine ("+h+" >= "+s+")";return u&&(y+=" and next bandwidth > current bandwidth ("+m+" > "+v+")"),c(y),!0}return c("not "+d+" as no switching criteria met"),!1},Bqe=function(n){In(e,n);function e(r){var i;i=n.call(this)||this;var a=r.src,s=r.handleManifestRedirects,o=r.withCredentials,l=r.tech,u=r.bandwidth,c=r.externVhs,d=r.useCueTags,f=r.blacklistDuration,h=r.enableLowInitialPlaylist,p=r.sourceType,m=r.cacheEncryptionKeys,v=r.experimentalBufferBasedABR,g=r.experimentalLeastPixelDiffSelector,y=r.captionServices;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");var _=r.maxPlaylistRetries;(_===null||typeof _>"u")&&(_=1/0),Zd=c,i.experimentalBufferBasedABR=!!v,i.experimentalLeastPixelDiffSelector=!!g,i.withCredentials=o,i.tech_=l,i.vhs_=l.vhs,i.sourceType_=p,i.useCueTags_=d,i.blacklistDuration=f,i.maxPlaylistRetries=_,i.enableLowInitialPlaylist=h,i.useCueTags_&&(i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues"),i.cueTagsTrack_.inBandMetadataTrackDispatchType=""),i.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:_,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=Rqe(),i.mediaSource=new gt.MediaSource,i.handleDurationChange_=i.handleDurationChange_.bind(Fr(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(Fr(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(Fr(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=Lt.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new yqe(r),i.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new Sqe,i.sourceUpdater_=new Ioe(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new _qe;var b={vhs:i.vhs_,parse708captions:r.parse708captions,useDtsForTimestampOffset:r.useDtsForTimestampOffset,captionServices:y,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:u,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:m,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_,experimentalExactManifestTimings:r.experimentalExactManifestTimings};i.masterPlaylistLoader_=i.sourceType_==="dash"?new w6(a,i.vhs_,i.requestOptions_):new Ny(a,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new C6(Lt.mergeOptions(b,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),r),i.audioSegmentLoader_=new C6(Lt.mergeOptions(b,{loaderType:"audio"}),r),i.subtitleSegmentLoader_=new pqe(Lt.mergeOptions(b,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(A,T){function C(){l.off("vttjserror",E),A()}function E(){l.off("vttjsloaded",C),T()}l.one("vttjsloaded",C),l.one("vttjserror",E),l.addWebVttScript_()})}}),r),i.setupSegmentLoaderListeners_(),i.experimentalBufferBasedABR&&(i.masterPlaylistLoader_.one("loadedplaylist",function(){return i.startABRTimer_()}),i.tech_.on("pause",function(){return i.stopABRTimer_()}),i.tech_.on("play",function(){return i.startABRTimer_()})),Lqe.forEach(function(w){i[w+"_"]=Oqe.bind(Fr(i),w)}),i.logger_=Gc("MPC"),i.triggeredFmp4Usage=!1,i.tech_.preload()==="none"?(i.loadOnPlay_=function(){i.loadOnPlay_=null,i.masterPlaylistLoader_.load()},i.tech_.one("play",i.loadOnPlay_)):i.masterPlaylistLoader_.load(),i.timeToLoadedData__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var x=i.tech_.preload()==="none"?"play":"loadstart";return i.tech_.one(x,function(){var w=Date.now();i.tech_.one("loadeddata",function(){i.timeToLoadedData__=Date.now()-w,i.mainAppendsToLoadedData__=i.mainSegmentLoader_.mediaAppends,i.audioAppendsToLoadedData__=i.audioSegmentLoader_.mediaAppends})}),i}var t=e.prototype;return t.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},t.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},t.appendsToLoadedData_=function(){var i=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return i===-1||a===-1?-1:i+a},t.timeToLoadedData_=function(){return this.timeToLoadedData__},t.checkABR_=function(i){i===void 0&&(i="abr");var a=this.selectPlaylist();a&&this.shouldSwitchToMedia_(a)&&this.switchMedia_(a,i)},t.switchMedia_=function(i,a,s){var o=this.media(),l=o&&(o.id||o.uri),u=i.id||i.uri;l&&l!==u&&(this.logger_("switch media "+l+" -> "+u+" from "+a),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+a})),this.masterPlaylistLoader_.media(i,s)},t.startABRTimer_=function(){var i=this;this.stopABRTimer_(),this.abrTimer_=gt.setInterval(function(){return i.checkABR_()},250)},t.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(gt.clearInterval(this.abrTimer_),this.abrTimer_=null)},t.getAudioTrackPlaylists_=function(){var i=this.master(),a=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return a;var s=i.mediaGroups.AUDIO,o=Object.keys(s),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var u=s.main||o.length&&s[o[0]];for(var c in u)if(u[c].default){l={label:c};break}}if(!l)return a;var d=[];for(var f in s)if(s[f][l.label]){var h=s[f][l.label];if(h.playlists&&h.playlists.length)d.push.apply(d,h.playlists);else if(h.uri)d.push(h);else if(i.playlists.length)for(var p=0;p<i.playlists.length;p++){var m=i.playlists[p];m.attributes&&m.attributes.AUDIO&&m.attributes.AUDIO===f&&d.push(m)}}return d.length?d:a},t.setupMasterPlaylistLoaderListeners_=function(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var a=i.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;y6(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=s,a.endList&&i.tech_.preload()!=="none"&&(i.mainSegmentLoader_.playlist(a,i.requestOptions_),i.mainSegmentLoader_.load()),Pqe({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),a),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var a=i.masterPlaylistLoader_.media();if(!a){i.excludeUnsupportedVariants_();var s;if(i.enableLowInitialPlaylist&&(s=i.selectInitialPlaylist()),s||(s=i.selectPlaylist()),!s||!i.shouldSwitchToMedia_(s))return;i.initialMedia_=s,i.switchMedia_(i.initialMedia_,"initial");var o=i.sourceType_==="vhs-json"&&i.initialMedia_.segments;if(!o)return;a=i.initialMedia_}i.handleUpdatedMediaPlaylist(a)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var a=i.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;y6(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=s,i.masterPlaylistLoader_.load(),i.mainSegmentLoader_.playlist(a,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var a=i.masterPlaylistLoader_.media();if(a.lastExcludeReason_!=="playlist-unchanged"){var s=i.stuckAtPlaylistEnd_(a);s&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.handleUpdatedMediaPlaylist=function(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},t.triggerPresenceUsage_=function(i,a){var s=i.mediaGroups||{},o=!0,l=Object.keys(s.AUDIO);for(var u in s.AUDIO)for(var c in s.AUDIO[u]){var d=s.AUDIO[u][c];d.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Zd.Playlist.isAes(a)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(s.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},t.shouldSwitchToMedia_=function(i){var a=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),u=this.tech_.buffered();return Nqe({buffered:u,currentTime:s,currentPlaylist:a,nextPlaylist:i,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},t.setupSegmentLoaderListeners_=function(){var i=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){i.checkABR_("bandwidthupdate"),i.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){i.experimentalBufferBasedABR&&i.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){i.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){i.logger_("main segment loader ended"),i.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},kqe))});var a=function(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var o=i.getCodecsOrExclude_();o&&i.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()})},t.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.smoothQualityChange_=function(i){i===void 0&&(i=this.selectPlaylist()),this.fastQualityChange_(i)},t.fastQualityChange_=function(i){var a=this;if(i===void 0&&(i=this.selectPlaylist()),i===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(i,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){Lt.browser.IE_VERSION||Lt.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())})},t.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0))return this.tech_.setCurrentTime(i.end(i.length-1))}},t.setupFirstPlay=function(){var i=this,a=this.masterPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList){var s=this.seekable();if(!s.length)return!1;if(Lt.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){i.trigger("firstplay"),i.tech_.setCurrentTime(s.end(0)),i.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},t.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();typeof i<"u"&&typeof i.then=="function"&&i.then(null,function(a){})}this.trigger("sourceopen")},t.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(!(!i||!i.length)){var a=this.duration();i[i.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}}},t.handleDurationChange_=function(){this.tech_.trigger("durationchange")},t.onEndOfStream=function(){var i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var a=this.mainSegmentLoader_.getCurrentMediaInfo_();!a||a.hasVideo?i=i&&this.audioSegmentLoader_.ended_:i=this.audioSegmentLoader_.ended_}i&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},t.stuckAtPlaylistEnd_=function(i){var a=this.seekable();if(!a.length)return!1;var s=this.syncController_.getExpiredTime(i,this.duration());if(s===null)return!1;var o=Zd.Playlist.playlistEnd(i,s),l=this.tech_.currentTime(),u=this.tech_.buffered();if(!u.length)return o-l<=vd;var c=u.end(u.length-1);return c-l<=vd&&o-c<=vd},t.blacklistCurrentPlaylist=function(i,a){i===void 0&&(i={});var s=i.playlist||this.masterPlaylistLoader_.media();if(a=a||i.blacklistDuration||this.blacklistDuration,!s){this.error=i,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(fI),u=l.length===1&&l[0]===s;if(o.length===1&&a!==1/0)return Lt.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(u);if(u){var c=!1;o.forEach(function(g){if(g!==s){var y=g.excludeUntil;typeof y<"u"&&y!==1/0&&(c=!0,delete g.excludeUntil)}}),c&&(Lt.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var d;s.playlistErrors_>this.maxPlaylistRetries?d=1/0:d=Date.now()+a*1e3,s.excludeUntil=d,i.reason&&(s.lastExcludeReason_=i.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var f=this.selectPlaylist();if(!f){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var h=i.internal?this.logger_:Lt.log.warn,p=i.message?" "+i.message:"";h((i.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(p+" Switching to playlist "+f.id+".")),f.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),f.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var m=f.targetDuration/2*1e3||5*1e3,v=typeof f.lastRequest=="number"&&Date.now()-f.lastRequest<=m;return this.switchMedia_(f,"exclude",u||v)},t.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},t.delegateLoaders_=function(i,a){var s=this,o=[],l=i==="all";(l||i==="main")&&o.push(this.masterPlaylistLoader_);var u=[];(l||i==="audio")&&u.push("AUDIO"),(l||i==="subtitle")&&(u.push("CLOSED-CAPTIONS"),u.push("SUBTITLES")),u.forEach(function(c){var d=s.mediaTypes_[c]&&s.mediaTypes_[c].activePlaylistLoader;d&&o.push(d)}),["main","audio","subtitle"].forEach(function(c){var d=s[c+"SegmentLoader_"];d&&(i===c||i==="all")&&o.push(d)}),o.forEach(function(c){return a.forEach(function(d){typeof c[d]=="function"&&c[d]()})})},t.setCurrentTime=function(i){var a=Oy(this.tech_.buffered(),i);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(a&&a.length)return i;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},t.duration=function(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:Zd.Playlist.duration(i):1/0:0},t.seekable=function(){return this.seekable_},t.onSyncInfoUpdate_=function(){var i;if(this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(a){var s=this.syncController_.getExpiredTime(a,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,l=Zd.Playlist.seekable(a,s,Zd.Playlist.liveEdgeDelay(o,a));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(a,this.duration()),s===null||(i=Zd.Playlist.seekable(a,s,Zd.Playlist.liveEdgeDelay(o,a)),i.length===0)))){var u,c;this.seekable_&&this.seekable_.length&&(u=this.seekable_.end(0),c=this.seekable_.start(0)),i?i.start(0)>l.end(0)||l.start(0)>i.end(0)?this.seekable_=l:this.seekable_=Lt.createTimeRanges([[i.start(0)>l.start(0)?i.start(0):l.start(0),i.end(0)<l.end(0)?i.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===u&&this.seekable_.start(0)===c)&&(this.logger_("seekable updated ["+qse(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},t.updateDuration=function(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,i),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(i){var a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));return}var s=this.tech_.buffered(),o=Zd.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},t.dispose=function(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(a){var s=i.mediaTypes_[a].groups;for(var o in s)s[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},t.master=function(){return this.masterPlaylistLoader_.master},t.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.areMediaTypesKnown_=function(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=i?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!a||!s)},t.getCodecsOrExclude_=function(){var i=this,a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();a.video=a.main;var o=ax(this.master(),s),l={},u=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(a.main.hasVideo&&(l.video=o.video||a.main.videoCodec||aHe),a.main.isMuxed&&(l.video+=","+(o.audio||a.main.audioCodec||rG)),(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||u)&&(l.audio=o.audio||a.main.audioCodec||a.audio.audioCodec||rG,a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4),!l.audio&&!l.video){this.blacklistCurrentPlaylist({playlist:s,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var c=function(g,y){return g?mE(y):fP(y)},d={},f;if(["video","audio"].forEach(function(v){if(l.hasOwnProperty(v)&&!c(a[v].isFmp4,l[v])){var g=a[v].isFmp4?"browser":"muxer";d[g]=d[g]||[],d[g].push(l[v]),v==="audio"&&(f=g)}}),u&&f&&s.attributes.AUDIO){var h=s.attributes.AUDIO;this.master().playlists.forEach(function(v){var g=v.attributes&&v.attributes.AUDIO;g===h&&v!==s&&(v.excludeUntil=1/0)}),this.logger_("excluding audio group "+h+" as "+f+' does not support codec(s): "'+l.audio+'"')}if(Object.keys(d).length){var p=Object.keys(d).reduce(function(v,g){return v&&(v+=", "),v+=g+' does not support codec(s): "'+d[g].join(",")+'"',v},"")+".";this.blacklistCurrentPlaylist({playlist:s,internal:!0,message:p,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var m=[];if(["video","audio"].forEach(function(v){var g=(rd(i.sourceUpdater_.codecs[v]||"")[0]||{}).type,y=(rd(l[v]||"")[0]||{}).type;g&&y&&g.toLowerCase()!==y.toLowerCase()&&m.push('"'+i.sourceUpdater_.codecs[v]+'" -> "'+l[v]+'"')}),m.length){this.blacklistCurrentPlaylist({playlist:s,message:"Codec switching not supported: "+m.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return l},t.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(i){this.sourceUpdater_.createSourceBuffers(i);var a=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}}},t.excludeUnsupportedVariants_=function(){var i=this,a=this.master().playlists,s=[];Object.keys(a).forEach(function(o){var l=a[o];if(s.indexOf(l.id)===-1){s.push(l.id);var u=ax(i.master,l),c=[];u.audio&&!fP(u.audio)&&!mE(u.audio)&&c.push("audio codec "+u.audio),u.video&&!fP(u.video)&&!mE(u.video)&&c.push("video codec "+u.video),u.text&&u.text==="stpp.ttml.im1t"&&c.push("text codec "+u.text),c.length&&(l.excludeUntil=1/0,i.logger_("excluding "+l.id+" for unsupported: "+c.join(", ")))}})},t.excludeIncompatibleVariants_=function(i){var a=this,s=[],o=this.master().playlists,l=YM(rd(i)),u=uW(l),c=l.video&&rd(l.video)[0]||null,d=l.audio&&rd(l.audio)[0]||null;Object.keys(o).forEach(function(f){var h=o[f];if(!(s.indexOf(h.id)!==-1||h.excludeUntil===1/0)){s.push(h.id);var p=[],m=ax(a.masterPlaylistLoader_.master,h),v=uW(m);if(!(!m.audio&&!m.video)){if(v!==u&&p.push('codec count "'+v+'" !== "'+u+'"'),!a.sourceUpdater_.canChangeType()){var g=m.video&&rd(m.video)[0]||null,y=m.audio&&rd(m.audio)[0]||null;g&&c&&g.type.toLowerCase()!==c.type.toLowerCase()&&p.push('video codec "'+g.type+'" !== "'+c.type+'"'),y&&d&&y.type.toLowerCase()!==d.type.toLowerCase()&&p.push('audio codec "'+y.type+'" !== "'+d.type+'"')}p.length&&(h.excludeUntil=1/0,a.logger_("blacklisting "+h.id+": "+p.join(" && ")))}}})},t.updateAdCues_=function(i){var a=0,s=this.seekable();s.length&&(a=s.start(0)),vqe(i,this.cueTagsTrack_,a)},t.goalBufferLength=function(){var i=this.tech_.currentTime(),a=Ts.GOAL_BUFFER_LENGTH,s=Ts.GOAL_BUFFER_LENGTH_RATE,o=Math.max(a,Ts.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+i*s,o)},t.bufferLowWaterLine=function(){var i=this.tech_.currentTime(),a=Ts.BUFFER_LOW_WATER_LINE,s=Ts.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(a,Ts.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(a,Ts.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+i*s,this.experimentalBufferBasedABR?l:o)},t.bufferHighWaterLine=function(){return Ts.BUFFER_HIGH_WATER_LINE},e}(Lt.EventTarget),Fqe=function(e,t,r){return function(i){var a=e.master.playlists[t],s=o7(a),o=fI(a);return typeof i>"u"?o:(i?delete a.disabled:a.disabled=!0,i!==o&&!s&&(r(),i?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),i)}},Uqe=function(e,t,r){var i=e.masterPlaylistController_,a=e.options_.smoothQualityChange,s=a?"smooth":"fast",o=i[s+"QualityChange_"].bind(i);if(t.attributes){var l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=ax(i.master(),t),this.playlist=t,this.id=r,this.enabled=Fqe(e.playlists,t.id,o)},zqe=function(e){e.representations=function(){var t=e.masterPlaylistController_.master(),r=Fw(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return r?r.filter(function(i){return!o7(i)}).map(function(i,a){return new Uqe(e,i,i.id)}):[]}},SW=["seeking","seeked","pause","playing","error"],Hqe=function(){function n(t){var r=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Gc("PlaybackWatcher"),this.logger_("initialize");var i=function(){return r.monitorCurrentTime_()},a=function(){return r.monitorCurrentTime_()},s=function(){return r.techWaiting_()},o=function(){return r.cancelTimer_()},l=this.masterPlaylistController_,u=["main","subtitle","audio"],c={};u.forEach(function(f){c[f]={reset:function(){return r.resetSegmentDownloads_(f)},updateend:function(){return r.checkSegmentDownloads_(f)}},l[f+"SegmentLoader_"].on("appendsdone",c[f].updateend),l[f+"SegmentLoader_"].on("playlistupdate",c[f].reset),r.tech_.on(["seeked","seeking"],c[f].reset)});var d=function(h){["main","audio"].forEach(function(p){l[p+"SegmentLoader_"][h]("appended",r.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){r.fixesBadSeeks_()&&(r.consecutiveUpdates=0,r.lastRecordedTime=r.tech_.currentTime(),d("off"))},this.clearSeekingAppendCheck_=function(){return d("off")},this.watchForBadSeeking_=function(){r.clearSeekingAppendCheck_(),d("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(SW,o),this.tech_.on("canplay",a),this.tech_.one("play",i),this.dispose=function(){r.clearSeekingAppendCheck_(),r.logger_("dispose"),r.tech_.off("waiting",s),r.tech_.off(SW,o),r.tech_.off("canplay",a),r.tech_.off("play",i),r.tech_.off("seeking",r.watchForBadSeeking_),r.tech_.off("seeked",r.clearSeekingAppendCheck_),u.forEach(function(f){l[f+"SegmentLoader_"].off("appendsdone",c[f].updateend),l[f+"SegmentLoader_"].off("playlistupdate",c[f].reset),r.tech_.off(["seeked","seeking"],c[f].reset)}),r.checkCurrentTimeTimeout_&&gt.clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}var e=n.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&gt.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=gt.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(r){var i=this.masterPlaylistController_[r+"SegmentLoader_"];this[r+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+r+" loader"),this[r+"StalledDownloads_"]=0,this[r+"Buffered_"]=i.buffered_()},e.checkSegmentDownloads_=function(r){var i=this.masterPlaylistController_,a=i[r+"SegmentLoader_"],s=a.buffered_(),o=RGe(this[r+"Buffered_"],s);if(this[r+"Buffered_"]=s,o){this.resetSegmentDownloads_(r);return}this[r+"StalledDownloads_"]++,this.logger_("found #"+this[r+"StalledDownloads_"]+" "+r+" appends that did not increase buffer (possible stalled download)",{playlistId:a.playlist_&&a.playlist_.id,buffered:D0(s)}),!(this[r+"StalledDownloads_"]<10)&&(this.logger_(r+" loader stalled download exclusion"),this.resetSegmentDownloads_(r),this.tech_.trigger({type:"usage",name:"vhs-"+r+"-download-exclusion"}),r!=="subtitle"&&i.blacklistCurrentPlaylist({message:"Excessive "+r+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var r=this.tech_.currentTime(),i=this.tech_.buffered();if(this.lastRecordedTime===r&&(!i.length||r+vd>=i.end(i.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&r===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):r===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=r)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var r=this.tech_.seeking();if(!r)return!1;var i=this.seekable(),a=this.tech_.currentTime(),s=this.afterSeekableWindow_(i,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var l=i.end(i.length-1);o=l}if(this.beforeSeekableWindow_(i,a)){var u=i.start(0);o=u+(u===i.end(0)?0:vd)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+a+" with "+("seekable range "+qse(i)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var c=this.masterPlaylistController_.sourceUpdater_,d=this.tech_.buffered(),f=c.audioBuffer?c.audioBuffered():null,h=c.videoBuffer?c.videoBuffered():null,p=this.media(),m=p.partTargetDuration?p.partTargetDuration:(p.targetDuration-jp)*2,v=[f,h],g=0;g<v.length;g++)if(v[g]){var y=a7(v[g],a);if(y<m)return!1}var _=KT(d,a);return _.length===0?!1:(o=_.start(0)+vd,this.logger_("Buffered region starts ("+_.start(0)+") "+(" just beyond seek point ("+a+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var r=this.tech_.currentTime(),i=this.tech_.buffered(),a=Oy(i,r);if(a.length&&r+3<=a.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(r),this.logger_("Stopped at "+r+" while inside a buffered region "+("["+a.start(0)+" -> "+a.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var r=this.seekable(),i=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(r,i)){var a=r.end(r.length-1);return this.logger_("Fell out of live window at time "+i+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:i});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var u=KT(o,i);if(u.length>0){var c=u.start(0)-i;return this.logger_("Stopped at "+i+", setting timer for "+c+", seeking "+("to "+u.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),c*1e3,i),!0}return!1},e.afterSeekableWindow_=function(r,i,a,s){if(s===void 0&&(s=!1),!r.length)return!1;var o=r.end(r.length-1)+vd,l=!a.endList;return l&&s&&(o=r.end(r.length-1)+a.targetDuration*3),i>o},e.beforeSeekableWindow_=function(r,i){return!!(r.length&&r.start(0)>0&&i<r.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(r){var i=r.videoBuffered,a=r.audioBuffered,s=r.currentTime;if(i){var o;if(i.length&&a.length){var l=Oy(i,s-3),u=Oy(i,s),c=Oy(a,s);c.length&&!u.length&&l.length&&(o={start:l.end(0),end:c.end(0)})}else{var d=KT(i,s);d.length||(o=this.gapFromVideoUnderflow_(i,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},e.skipTheGap_=function(r){var i=this.tech_.buffered(),a=this.tech_.currentTime(),s=KT(i,a);this.cancelTimer_(),!(s.length===0||a!==r)&&(this.logger_("skipTheGap_:","currentTime:",a,"scheduled currentTime:",r,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+jp),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(r,i){for(var a=IGe(r),s=0;s<a.length;s++){var o=a.start(s),l=a.end(s);if(i-o<4&&i-o>2)return{start:o,end:l}}return null},n}(),Vqe={errorInterval:30,getSource:function(e){var t=this.tech({IWillNotUseThisInPlugins:!0}),r=t.currentSource_||this.currentSource();return e(r)}},$qe=function n(e,t){var r=0,i=0,a=Lt.mergeOptions(Vqe,t);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){i&&e.currentTime(i)},o=function(f){f!=null&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(f),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},l=function(){if(Date.now()-r<a.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!="function"){Lt.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return r=Date.now(),a.getSource.call(e,o)},u=function d(){e.off("loadedmetadata",s),e.off("error",l),e.off("dispose",d)},c=function(f){u(),n(e,f)};e.on("error",l),e.on("dispose",u),e.reloadSourceOnError=c},Gqe=function(e){$qe(this,e)},Doe="2.16.3",Wqe="6.0.1",qqe="0.22.1",jqe="4.8.0",Kqe="3.1.3",Ws={PlaylistLoader:Ny,Playlist:hl,utils:rWe,STANDARD_PLAYLIST_SELECTOR:dW,INITIAL_PLAYLIST_SELECTOR:qWe,lastBandwidthSelector:dW,movingAverageBandwidthSelector:GWe,comparePlaylistBandwidth:d7,comparePlaylistResolution:$We,xhr:ooe()};Object.keys(Ts).forEach(function(n){Object.defineProperty(Ws,n,{get:function(){return Lt.log.warn("using Vhs."+n+" is UNSAFE be sure you know what you are doing"),Ts[n]},set:function(t){if(Lt.log.warn("using Vhs."+n+" is UNSAFE be sure you know what you are doing"),typeof t!="number"||t<0){Lt.log.warn("value of Vhs."+n+" must be greater than or equal to 0");return}Ts[n]=t}})});var Poe="videojs-vhs",Roe=function(e,t){for(var r=t.media(),i=-1,a=0;a<e.length;a++)if(e[a].id===r.id){i=a;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},Xqe=function(e,t){t.representations().forEach(function(r){e.addQualityLevel(r)}),Roe(e,t.playlists)};Ws.canPlaySource=function(){return Lt.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Yqe=function(e,t,r){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=YM(rd(t.attributes.CODECS))),r&&r.attributes&&r.attributes.CODECS&&(i.audio=r.attributes.CODECS);var a=p2(i.video),s=p2(i.audio),o={};for(var l in e)o[l]={},s&&(o[l].audioContentType=s),a&&(o[l].videoContentType=a),t.contentProtection&&t.contentProtection[l]&&t.contentProtection[l].pssh&&(o[l].pssh=t.contentProtection[l].pssh),typeof e[l]=="string"&&(o[l].url=e[l]);return Lt.mergeOptions(e,o)},Qqe=function(e,t){return e.reduce(function(r,i){if(!i.contentProtection)return r;var a=t.reduce(function(s,o){var l=i.contentProtection[o];return l&&l.pssh&&(s[o]={pssh:l.pssh}),s},{});return Object.keys(a).length&&r.push(a),r},[])},Zqe=function(e){var t=e.player,r=e.sourceKeySystems,i=e.audioMedia,a=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var s=i?a.concat([i]):a,o=Qqe(s,Object.keys(r)),l=[],u=[];return o.forEach(function(c){u.push(new Promise(function(d,f){t.tech_.one("keysessioncreated",d)})),l.push(new Promise(function(d,f){t.eme.initializeMediaKeys({keySystems:c},function(h){if(h){f(h);return}d()})}))}),Promise.race([Promise.all(l),Promise.race(u)])},Jqe=function(e){var t=e.player,r=e.sourceKeySystems,i=e.media,a=e.audioMedia,s=Yqe(r,i,a);return s?(t.currentSource().keySystems=s,s&&!t.eme?(Lt.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},koe=function(){if(!gt.localStorage)return null;var e=gt.localStorage.getItem(Poe);if(!e)return null;try{return JSON.parse(e)}catch{return null}},eje=function(e){if(!gt.localStorage)return!1;var t=koe();t=t?Lt.mergeOptions(t,e):e;try{gt.localStorage.setItem(Poe,JSON.stringify(t))}catch{return!1}return t},tje=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};Ws.supportsNativeHls=function(){if(!An||!An.createElement)return!1;var n=An.createElement("video");if(!Lt.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(t){return/maybe|probably/i.test(n.canPlayType(t))})}();Ws.supportsNativeDash=function(){return!An||!An.createElement||!Lt.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(An.createElement("video").canPlayType("application/dash+xml"))}();Ws.supportsTypeNatively=function(n){return n==="hls"?Ws.supportsNativeHls:n==="dash"?Ws.supportsNativeDash:!1};Ws.isSupported=function(){return Lt.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var nje=Lt.getComponent("Component"),h7=function(n){In(e,n);function e(r,i,a){var s;if(s=n.call(this,i,Lt.mergeOptions(a.hls,a.vhs))||this,a.hls&&Object.keys(a.hls).length&&Lt.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof a.initialBandwidth=="number"&&(s.options_.bandwidth=a.initialBandwidth),s.logger_=Gc("VhsHandler"),i.options_&&i.options_.playerId){var o=Lt(i.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return Lt.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"hls-player-access"}),Fr(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return Lt.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),i.trigger({type:"usage",name:"vhs-player-access"}),Fr(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return Lt.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Fr(s)},configurable:!0}),s.player_=o}if(s.tech_=i,s.source_=r,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&i.overrideNativeAudioTracks&&i.overrideNativeVideoTracks)i.overrideNativeAudioTracks(!0),i.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(i.featuresNativeVideoTracks||i.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(An,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var u=An.fullscreenElement||An.webkitFullscreenElement||An.mozFullScreenElement||An.msFullscreenElement;u&&u.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var t=e.prototype;return t.setOptions_=function(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var a=koe();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Ts.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ts.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof i.source_[s]<"u"&&(i.options_[s]=i.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},t.src=function(i,a){var s=this;if(i){this.setOptions_(),this.options_.src=tje(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ws,this.options_.sourceType=qie(a),this.options_.seekTo=function(u){s.tech_.setCurrentTime(u)},this.options_.smoothQualityChange&&Lt.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Bqe(this.options_);var o=Lt.mergeOptions({liveRangeSafeTimeDelta:vd},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Hqe(o),this.masterPlaylistController_.on("error",function(){var u=Lt.players[s.tech_.options_.playerId],c=s.masterPlaylistController_.error;typeof c=="object"&&!c.code?c.code=3:typeof c=="string"&&(c={message:c,code:3}),u.error(c)});var l=this.options_.experimentalBufferBasedABR?Ws.movingAverageBandwidthSelector(.55):Ws.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Ws.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(c){this.masterPlaylistController_.selectPlaylist=c.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=c,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var c=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,d=gt.navigator.connection||gt.navigator.mozConnection||gt.navigator.webkitConnection,f=1e7;if(this.options_.useNetworkInformationApi&&d){var h=d.downlink*1e3*1e3;h>=f&&c>=f?c=Math.max(c,h):c=h}return c},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=c,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var c=1/(this.bandwidth||1),d;this.throughput>0?d=1/this.throughput:d=0;var f=Math.floor(1/(c+d));return f},set:function(){Lt.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return D0(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return D0(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&eje({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){zqe(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=gt.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},t.createKeySessions_=function(){var i=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Zqe({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){i.logger_("error while creating EME key session",s),i.player_.error({message:"Failed to initialize media keys for EME",code:3})})},t.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},t.setupEme_=function(){var i=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=Jqe({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=i.masterPlaylistController_.master();if(!(!l||!l.playlists)){var u=[];if(l.playlists.forEach(function(d){d&&d.attributes&&d.attributes.RESOLUTION&&d.attributes.RESOLUTION.height>=720&&(!d.excludeUntil||d.excludeUntil<1/0)&&(d.excludeUntil=1/0,u.push(d))}),u.length){var c;(c=Lt.log).warn.apply(c,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(u)),i.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),Lt.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},t.setupQualityLevels_=function(){var i=this,a=Lt.players[this.tech_.options_.playerId];!a||!a.qualityLevels||this.qualityLevels_||(this.qualityLevels_=a.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Xqe(i.qualityLevels_,i)}),this.playlists.on("mediachange",function(){Roe(i.qualityLevels_,i.playlists)}))},e.version=function(){return{"@videojs/http-streaming":Doe,"mux.js":Wqe,"mpd-parser":qqe,"m3u8-parser":jqe,"aes-decrypter":Kqe}},t.version=function(){return this.constructor.version()},t.canChangeType=function(){return Ioe.canChangeType()},t.play=function(){this.masterPlaylistController_.play()},t.setCurrentTime=function(i){this.masterPlaylistController_.setCurrentTime(i)},t.duration=function(){return this.masterPlaylistController_.duration()},t.seekable=function(){return this.masterPlaylistController_.seekable()},t.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&gt.URL.revokeObjectURL&&(gt.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),n.prototype.dispose.call(this)},t.convertToProgramTime=function(i,a){return cWe({playlist:this.masterPlaylistController_.media(),time:i,callback:a})},t.seekToProgramTime=function(i,a,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),dWe({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})},e}(nje),w2={name:"videojs-http-streaming",VERSION:Doe,canHandleSource:function(e,t){t===void 0&&(t={});var r=Lt.mergeOptions(Lt.options,t);return w2.canPlayType(e.type,r)},handleSource:function(e,t,r){r===void 0&&(r={});var i=Lt.mergeOptions(Lt.options,r);return t.vhs=new h7(e,t,i),Lt.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Lt.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=ooe(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var r=qie(e);if(!r)return"";var i=w2.getOverrideNative(t),a=Ws.supportsTypeNatively(r),s=!a||i;return s?"maybe":""},getOverrideNative:function(e){e===void 0&&(e={});var t=e,r=t.vhs,i=r===void 0?{}:r,a=t.hls,s=a===void 0?{}:a,o=!(Lt.browser.IS_ANY_SAFARI||Lt.browser.IS_IOS),l=i.overrideNative,u=l===void 0?o:l,c=s.overrideNative,d=c===void 0?!1:c;return d||u}},rje=function(){return mE("avc1.4d400d,mp4a.40.2")};rje()&&Lt.getTech("Html5").registerSourceHandler(w2,0);Lt.VhsHandler=h7;Object.defineProperty(Lt,"HlsHandler",{get:function(){return Lt.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),h7},configurable:!0});Lt.VhsSourceHandler=w2;Object.defineProperty(Lt,"HlsSourceHandler",{get:function(){return Lt.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),w2},configurable:!0});Lt.Vhs=Ws;Object.defineProperty(Lt,"Hls",{get:function(){return Lt.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Ws},configurable:!0});Lt.use||(Lt.registerComponent("Hls",Ws),Lt.registerComponent("Vhs",Ws));Lt.options.vhs=Lt.options.vhs||{};Lt.options.hls=Lt.options.hls||{};if(!Lt.getPlugin||!Lt.getPlugin("reloadSourceOnError")){var ije=Lt.registerPlugin||Lt.plugin;ije("reloadSourceOnError",Gqe)}function PP(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}var aje={src:{type:String,onChange:function(n,e){return n.src(e)}},width:{type:Number,onChange:function(n,e){return n.width(e)},onEvent:function(n,e){n.on(["playerresize","resize"],function(){return e(n.width())})}},height:{type:Number,onChange:function(n,e){return n.height(e)},onEvent:function(n,e){n.on(["playerresize","resize"],function(){return e(n.height())})}},preload:{type:String,onChange:function(n,e){return n.preload(e)}},loop:{type:Boolean,onChange:function(n,e){return n.loop(e)}},muted:{type:Boolean,onChange:function(n,e){return n.muted(e)},onEvent:function(n,e){return n.on("volumechange",function(){return e(n.muted())})}},poster:{type:String,onChange:function(n,e){return n.poster(e)},onEvent:function(n,e){return n.on("posterchange",function(){return e(n.poster())})}},controls:{type:Boolean,onChange:function(n,e){return n.controls(e)},onEvent:function(n,e){n.on("controlsenabled",function(){return e(!0)}),n.on("controlsdisabled",function(){return e(!1)})}},autoplay:{type:[Boolean,String],onChange:function(n,e){return n.autoplay(e)}},crossorigin:{type:String,onChange:function(n,e){return n.crossOrigin(e)}},crossOrigin:{type:String,onChange:function(n,e){return n.crossOrigin(e)}},playsinline:{type:Boolean,onChange:function(n,e){return n.playsinline(e)}},playsInline:{type:Boolean,onChange:function(n,e){return n.playsinline(e)}}},sje={id:{type:String},sources:{type:Array,onChange:function(n,e){return n.src(e)}},tracks:{type:Array,onChange:function(n,e){for(var t=n.remoteTextTracks(),r=(t==null?void 0:t.length)||0;r--;)n.removeRemoteTextTrack(t[r]);n.ready(function(){e.forEach(function(i){return n.addRemoteTextTrack(i,!1)})})}},textTrackSettings:{type:Object,onChange:function(n,e){return n.textTrackSettings.options(e)}},language:{type:String,onChange:function(n,e){return n.language(e)},onEvent:function(n,e){return n.on("languagechange",function(){return e(n.language())})}},languages:{type:Object},playbackRates:{type:Array,onChange:function(n,e){return n.playbackRates(e??[])},onEvent:function(n,e){n.on("playbackrateschange",function(){return e(n.playbackRates())})}},audioOnlyMode:{type:Boolean,onChange:function(n,e){return n.audioOnlyMode(e)}},audioPosterMode:{type:Boolean,onChange:function(n,e){return n.audioPosterMode(e)}},responsive:{type:Boolean,onChange:function(n,e){return n.responsive(e)}},breakpoints:{type:Object,onChange:function(n,e){return n.breakpoints(e)}},fluid:{type:Boolean,onChange:function(n,e){return n.fluid(e)}},fill:{type:Boolean,onChange:function(n,e){return n.fill(e)}},aspectRatio:{type:String,onChange:function(n,e){return n.aspectRatio(e)}},fullscreen:{type:Object},liveui:{type:Boolean},liveTracker:{type:Object},disablePictureInPicture:{type:Boolean,onChange:function(n,e){return n.disablePictureInPicture(e)}},notSupportedMessage:{type:String},normalizeAutoplay:{type:Boolean},noUITitleAttributes:{type:Boolean},preferFullWindow:{type:Boolean},suppressNotSupportedError:{type:Boolean},techCanOverridePoster:{type:Boolean},reportTouchActivity:{type:Boolean},techOrder:{type:Array},inactivityTimeout:{type:Number},userActions:{type:Object},plugins:{type:Object},restoreEl:{type:[Boolean,Object]},"vtt.js":{type:String}},oje={children:{type:[Array,Object]},controlBar:{type:Object,onChange:function(n,e){return n.controlBar.options(e)}}},lje={html5:{type:Object}},uje={volume:{type:Number,onChange:function(n,e){return n.volume(e)},onEvent:function(n,e){return n.on("volumechange",function(){return e(n.volume())})}},playbackRate:{type:Number,onChange:function(n,e){n.playbackRate(e),n.defaultPlaybackRate(e)},onEvent:function(n,e){n.on("ratechange",function(){e(n.playbackRate())})}},options:{type:Object}},T2=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},aje),sje),oje),lje),uje),p7=Object.keys(T2),Loe=Object.assign(Object.assign(Object.assign(Object.assign({},{loadstart:"onLoadStart",suspend:"onSuspend",abort:"onAbort",error:"onError",emptied:"onEmptied",stalled:"onStalled",loadedmetadata:"onLoadedMetadata",loadeddata:"onLoadedData",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",playing:"onPlaying",waiting:"onWaiting",seeking:"onSeeking",seeked:"onSeeked",ended:"onEnded",durationchange:"onDurationChange",timeupdate:"onTimeUpdate",progress:"onProgress",play:"onPlay",pause:"onpause",ratechange:"onRateChange",resize:"onResize",volumechange:"onVolumeChange"}),{posterchange:"onPosterChange",languagechange:"onLanguageChange",fullscreenchange:"onFullscreenChange",playbackrateschange:"onPlaybackRatesChange",controlsdisabled:"onControlsDisabled",controlsenabled:"onControlsEnabled",enterFullWindow:"onEnterFullWindow",exitFullWindow:"onExitFullWindow",enterpictureinpicture:"onEnterPictureInPicture",leavepictureinpicture:"onLeavePictureInPicture",sourceset:"onSourceSet",texttrackchange:"onTextTrackChange",textdata:"onTextData",useractive:"onUserActive",userinactive:"onUserInactive",usingcustomcontrols:"onUsingCustomControls",usingnativecontrols:"onUsingNativeControls",dispose:"onDispose"}),{beforepluginsetup:"onBeforePluginSetup",pluginsetup:"onPluginSetup"}),{componentresize:"onComponentResize",playerresize:"onPlayerResize",ready:"onReady",tap:"onTap"}),Ooe=Object.keys(Loe);Object.values(Loe);var RP=function(n){var e,t=n==null?void 0:n.trim().replace(/\s+/g," ");return t&&(e=t.split(" "))!==null&&e!==void 0?e:[]},kP={src:{getter:function(n){return n.src()}},currentSrc:{getter:function(n){return n.currentSrc()}},currentSource:{getter:function(n){return n.currentSource()}},width:{events:["resize","playerresize"],getter:function(n){return n.width()}},height:{events:["resize","playerresize"],getter:function(n){return n.height()}},currentWidth:{events:["resize","playerresize"],getter:function(n){return n.currentWidth()}},currentHeight:{events:["resize","playerresize"],getter:function(n){return n.currentHeight()}},videoWidth:{events:["resize","playerresize"],getter:function(n){return n.videoWidth()}},videoHeight:{events:["resize","playerresize"],getter:function(n){return n.videoHeight()}},controls:{events:["controlsdisabled","controlsenabled"],getter:function(n){return n.controls()}},volume:{events:["volumechange"],getter:function(n){return n.volume()}},muted:{events:["volumechange"],getter:function(n){return n.muted()}},poster:{events:["posterchange"],getter:function(n){return n.poster()}},seeking:{events:["seeking"],getter:function(n){return n.seeking()}},paused:{events:["pause","play","playing"],getter:function(n){return n.paused()}},ended:{events:["ended","play"],getter:function(n){return n.ended()}},currentTime:{events:["timeupdate"],getter:function(n){return n.currentTime()}},duration:{events:["durationchange"],getter:function(n){return n.duration()}},playbackRate:{events:["ratechange"],getter:function(n){return n.playbackRate()}},playbackRates:{events:["playbackrateschange"],getter:function(n){return n.playbackRates()}},isFullscreen:{events:["fullscreenchange"],getter:function(n){return n.isFullscreen()}},isInPictureInPicture:{events:["enterpictureinpicture","leavepictureinpicture"],getter:function(n){return n.isInPictureInPicture()}},isLive:{getter:function(n){var e;return(e=n.liveTracker)===null||e===void 0?void 0:e.isLive()}},language:{events:["languagechange"],getter:function(n){return n.language()}},userActive:{events:["useractive","userinactive"],getter:function(n){return n.userActive()}},readyState:{events:["loadeddata"],getter:function(n){return n.readyState()}},networkState:{events:["loadeddata","error"],getter:function(n){return n.networkState()}},error:{events:["loadeddata","error"],getter:function(n){return n.error()}},buffered:{events:["progress"],getter:function(n){return n.buffered()}},bufferedPercent:{events:["progress"],getter:function(n){return n.bufferedPercent()}},played:{events:["timeupdate"],getter:function(n){return n.played()}},seekable:{events:["progress","seeked"],getter:function(n){return n.seekable()}},audioTracks:{getter:function(n){var e;return(e=n.audioTracks)===null||e===void 0?void 0:e.call(n)}},videoTracks:{getter:function(n){var e;return(e=n.videoTracks)===null||e===void 0?void 0:e.call(n)}},textTracks:{getter:function(n){var e;return(e=n.textTracks)===null||e===void 0?void 0:e.call(n)}}},Noe=p7.filter(function(n){return!!T2[n].onEvent}),Boe=function(n){return"update:"+n},cje=Ooe.concat(Noe.map(Boe)),dje=p7.reduce(function(n,e){var t,r=T2[e],i=Array.isArray(r.type)?r.type:[r.type],a=Object.assign({},r);return i.includes(Boolean)&&(a.default=void 0),Object.assign(Object.assign({},n),((t={})[e]=a,t))},{}),fje=Ne({name:"VueVideoPlayer",props:Object.assign(Object.assign({},dje),{class:[String,Object,Array]}),emits:cje.concat(["mounted"],["unmounted"]),setup:function(n,e){var t=ri(n),r=t.class,i=PP(t,["class"]),a=jr(!1),s=jr(null),o=jr(null),l=V(function(){return o.value?o.value.player:null}),u=ie(null),c=V(function(){return u.value?Cv(u.value):null});return zn(function(){var d,f=function(h){var p,m=h.props,v=h.element,g=h.className,y=h.onEvent,_=m.options;_===void 0&&(_={});var b=PP(m,["options"]),x={};Object.keys(b).forEach(function(L){var N=b[L];N!==void 0&&(x[L]=N)});var w=Object.assign(Object.assign({},x),_),A=w.volume,T=w.playbackRate,C=PP(w,["volume","playbackRate"]),E=Object.assign(Object.assign({},C),{playsinline:(p=C.playsinline)!==null&&p!==void 0?p:C.playsInline}),I=Lt(v,E,function(){var L=this;Ooe.forEach(function(N){L.on(N,function(F){y(N,F)})}),C.src&&!C.sources&&this.src(C.src),A&&Number.isFinite(A)&&this.volume(A),T&&Number.isFinite(T)&&(this.defaultPlaybackRate(T),setTimeout(function(){L.playbackRate(T)},0))});g&&RP(g).map(function(L){return I.addClass(L)});var P=function(L){var N;(N=I.options)===null||N===void 0||N.call(I,L??{})};return{player:I,dispose:function(){return I.dispose()},updateClassNames:function(L,N){RP(L).map(function(F){return I.removeClass(F)}),RP(N).map(function(F){return I.addClass(F)})},updateOptions:P,updatePropOption:function(L,N){var F,k,H;P(((F={})[L]=N,F)),(H=(k=T2[L])===null||k===void 0?void 0:k.onChange)===null||H===void 0||H.call(k,I,N)}}}({element:s.value,props:i,onEvent:e.emit});d={player:f.player,onEvent:e.emit},Noe.forEach(function(h){var p,m;(m=(p=T2[h])===null||p===void 0?void 0:p.onEvent)===null||m===void 0||m.call(p,d.player,function(v){d.onEvent(Boe(h),v)})}),St(function(){return n.class},function(h,p){var m=J(p),v=J(h);f.updateClassNames(m,v)},{immediate:!0}),St(function(){return n.options},function(h){return f.updateOptions(h??{})},{deep:!0}),p7.filter(function(h){return h!=="options"}).forEach(function(h){St(function(){return n[h]},function(p){return f.updatePropOption(h,p)},{deep:!0})}),function(h,p){var m=Object.keys(kP),v=m.reduce(function(y,_){var b;return Object.assign(Object.assign({},y),((b={})[_]=kP[_].getter(h),b))},{playing:!1,waiting:!1}),g=function(y,_){v[y]=_,p.onUpdate(y,_,Object.assign({},v))};h.on(["pause","ended"],function(){g("playing",!1)}),h.on(["play","playing"],function(){g("playing",!0)}),h.on("waiting",function(){g("waiting",!0);var y=h.currentTime(),_=function(){y!==h.currentTime()&&(g("waiting",!1),h.off("timeupdate",_))};h.on("timeupdate",_)}),m.forEach(function(y){var _,b=kP[y];h.on(["loadstart","loadedmetadata"].concat((_=b.events)!==null&&_!==void 0?_:[]),function(){g(y,b.getter(h))})}),p.onInit(Object.assign({},v))}(f.player,{onInit:function(h){u.value=h},onUpdate:function(h,p){u.value&&(u.value[h]=p)}}),o.value=f,a.value=!0,e.emit("mounted",{video:s.value,player:l.value,state:c.value})}),Wr(function(){o.value&&(o.value.dispose(),o.value=null,u.value=null,e.emit("unmounted"))}),function(){var d,f;return an("div",{"data-vjs-player":"",class:J(r)},[an("video",{class:["video-js","v-video-player"],ref:s}),a.value&&((f=(d=e.slots).default)===null||f===void 0?void 0:f.call(d,{video:s.value,player:l.value,state:c.value}))])}}}),hje=fje;const pje=Ne({components:{VideoPlayer:hje}}),mje=n=>(x_("data-v-8bdd6744"),n=n(),w_(),n),vje=mje(()=>Ce("h1",{class:"section-title"},"Explainer Video",-1));function gje(n,e,t,r,i,a){const s=Kt("el-divider"),o=Kt("el-row"),l=Kt("video-player"),u=Kt("el-container"),c=Kt("el-col");return W(),Se("div",null,[be(s),be(o,{justify:"center"},{default:Oe(()=>[vje]),_:1}),be(o,{justify:"center"},{default:Oe(()=>[be(c,{xs:24,sm:20,md:16,lg:12,xl:10},{default:Oe(()=>[be(u,{class:"video-container"},{default:Oe(()=>[be(l,{src:"./video/UCCS_bg_enhance.mp4",controls:"",fluid:"true",muted:"true",volume:.5})]),_:1})]),_:1})]),_:1})])}const yje=$c(pje,[["render",gje],["__scopeId","data-v-8bdd6744"]]),_je={data(){return{sliderValue:0,inputImageRootPath:"./image_slider/UCCS/input/",outputImageRootPath:"./image_slider/UCCS/output/",inputImagePath:"",outputImagePath:"",inputLoading:!0,outputLoading:!0,minValue:0,maxValue:9}},beforeMount(){this.loadImage(this.sliderValue,this.inputImageRootPath,"input"),this.loadImage(this.sliderValue,this.outputImageRootPath,"output")},methods:{handleChange(n){this.loadImage(n,this.inputImageRootPath,"input"),this.loadImage(n,this.outputImageRootPath,"output")},loadImage(n,e,t){t=="input"?this.inputLoading=!0:this.outputLoading=!0;const r=`${e}${n}.png`,i=new Image;i.src=r,i.onload=()=>{t=="input"?(this.inputImagePath=r,this.inputLoading=!1):(this.outputImagePath=r,this.outputLoading=!1)}}}},bje=n=>(x_("data-v-8d95805e"),n=n(),w_(),n),Sje=bje(()=>Ce("h1",{class:"section-title"},"Qualitative Results",-1)),xje={class:"demo-image"},wje={class:"block"},Tje={class:"demonstration"},Cje={class:"demo-image"},Aje={class:"block"},Eje={class:"demonstration"};function Mje(n,e,t,r,i,a){const s=Kt("el-divider"),o=Kt("el-row"),l=Kt("el-skeleton-item"),u=Kt("el-image"),c=Kt("el-skeleton"),d=Kt("el-col"),f=Kt("el-slider");return W(),Se("div",null,[be(s),be(o,{justify:"center"},{default:Oe(()=>[Sje]),_:1}),be(o,{justify:"center"},{default:Oe(()=>[be(d,null,{default:Oe(()=>[be(o,{justify:"center",gutter:20},{default:Oe(()=>[be(d,{xs:12,sm:10,md:8,lg:6,xl:6},{default:Oe(()=>[Ce("div",xje,[Ce("div",wje,[be(c,{style:{width:"100%"},loading:i.inputLoading,animated:"",throttle:1e3},{template:Oe(()=>[be(l,{variant:"image",style:{width:"100%",height:"100%"}})]),default:Oe(()=>[be(u,{src:i.inputImagePath,fit:"scale-down"},null,8,["src"])]),_:1},8,["loading"]),Ce("span",Tje,"input: "+Ft(i.inputImagePath),1)])])]),_:1}),be(d,{xs:12,sm:10,md:8,lg:6,xl:6},{default:Oe(()=>[Ce("div",Cje,[Ce("div",Aje,[be(c,{style:{width:"100%"},loading:i.outputLoading,animated:"",throttle:1e3},{template:Oe(()=>[be(l,{variant:"image",style:{width:"100%",height:"100%"}})]),default:Oe(()=>[be(u,{src:i.outputImagePath,fit:"scale-down"},null,8,["src"])]),_:1},8,["loading"]),Ce("span",Eje,"output: "+Ft(i.outputImagePath),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),be(o,{justify:"center"},{default:Oe(()=>[be(d,{span:12},{default:Oe(()=>[be(f,{modelValue:i.sliderValue,"onUpdate:modelValue":e[0]||(e[0]=h=>i.sliderValue=h),min:i.minValue,max:i.maxValue,onInput:a.handleChange},null,8,["modelValue","min","max","onInput"])]),_:1})]),_:1})])}const Ije=$c(_je,[["render",Mje],["__scopeId","data-v-8d95805e"]]),Dje=["innerHTML"],Pje=["id"],Rje=["alt","src"],kje=["alt","src"],Lje=["innerHTML"],QT=Ne({__name:"VueCompareImage",props:{aspectRatio:{default:"wider"},handle:{type:[String,Number,Boolean]},handleSize:{default:40},hover:{type:Boolean,default:!1},slideOnClick:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!1},keyboardStep:{default:.01},leftImage:{},leftImageAlt:{},leftImageCss:{},leftImageLabel:{},onSliderPositionChange:{type:Function,default:()=>{}},rightImage:{},rightImageAlt:{},rightImageCss:{},rightImageLabel:{},skeleton:{type:[String,Number,Boolean]},sliderLineColor:{default:"#ffffff"},sliderLineWidth:{default:2},sliderPositionPercentage:{default:.5},vertical:{type:Boolean,default:!1}},emits:["slideStart","slideEnd","isSliding"],setup(n,{emit:e}){const t=n,{aspectRatio:r,leftImage:i,leftImageAlt:a,leftImageLabel:s,leftImageCss:o,rightImage:l,rightImageAlt:u,rightImageLabel:c,rightImageCss:d,hover:f,handle:h,handleSize:p,sliderLineWidth:m,sliderPositionPercentage:v,skeleton:g,sliderLineColor:y,vertical:_,onSliderPositionChange:b,slideOnClick:x,keyboard:w,keyboardStep:A}=ja(t),T=Math.random().toString(36).substr(2,9),C=!_.value,E=ie(),I=ie(null),P=ie(null),L=ie(v.value),N=ie(0),F=ie(0),k=ie(!1),H=ie(!1),U=ie(!1),B=V(()=>k.value&&H.value),$=V(()=>L.value),ee=V(()=>1-L.value),re=V(()=>({display:B.value?"flex":"none",height:`${F.value}px`})),ne=V(()=>({clipPath:C?`inset(0px 0px 0px ${N.value*$.value}px)`:`inset(${F.value*$.value}px 0px 0px 0px)`,...d})),ae=V(()=>({clipPath:C?`inset(0px ${N.value*ee.value}px 0px 0px)`:`inset(0px 0px ${F.value*ee.value}px 0px)`,...o})),pe=V(()=>({cursor:!f.value&&C?"ew-resize !important":!f.value&&!C?"ns-resize !important":void 0,flexDirection:C?"column":"row",height:C?"100%":`${p.value}px`,left:C?`${N.value*L.value-p.value/2}px`:"0",top:C?"0":`${F.value*L.value-p.value/2}px`,width:C?`${p.value}px`:"100%"})),de=V(()=>({background:y.value,height:C?"100%":`${m.value}px`,width:C?`${m.value}px`:"100%"})),me=V(()=>({border:`${m.value}px solid ${y.value}`,height:`${p.value}px`,width:`${p.value}px`,transform:C?"none":"rotate(90deg)"})),ke=V(()=>({border:`inset ${p.value*.15}px rgba(0,0,0,0)`,borderRight:`${p.value*.15}px solid ${y.value}`,marginLeft:`-${p.value*.25}px`,marginRight:`${p.value*.25}px`})),Be=V(()=>({border:`inset ${p.value*.15}px rgba(0,0,0,0)`,borderLeft:`${p.value*.15}px solid ${y.value}`,marginRight:`-${p.value*.25}px`})),Xe=V(()=>({left:C?"5%":"50%",opacity:U.value?0:1,top:C?"50%":"3%",transform:C?"translate(0,-50%)":"translate(-50%, 0)"})),Ye=V(()=>({opacity:U.value?0:1,left:C?"unset":"50%",right:C?"5%":"unset",top:C?"50%":"unset",bottom:C?"unset":"3%",transform:C?"translate(0,-50%)":"translate(-50%, 0)"})),Y=V(()=>({clip:C?`rect(auto, ${N.value*L.value}px, auto, auto)`:`rect(auto, auto, ${F.value*L.value}px, auto)`})),he=V(()=>({clipPath:C?`inset(0px 0px 0px ${N.value*$.value}px)`:`inset(${F.value*$.value}px 0px 0px 0px)`}));function le(te){const ye=te,Ve=ye.touches?ye.touches[0].pageX:ye.pageX,et=ye.touches?ye.touches[0].pageY:ye.pageY,At=Ve-window.pageXOffset,It=et-window.pageYOffset,De=I.value.getBoundingClientRect();let Tt=C?At-De.left:It-De.top;const ot=0+m.value/2,G=C?N.value-m.value/2:F.value-m.value/2;Tt<ot&&(Tt=ot),Tt>G&&(Tt=G),L.value=C?Tt/N.value:Tt/F.value,b.value&&b.value(C?Tt/N.value:Tt/F.value)}function Ke(te){U.value=!0,e("slideStart",L.value),e("isSliding",U.value),C&&"touches"in te||te.preventDefault(),x.value&&le(te),window.addEventListener("mousemove",le),window.addEventListener("touchmove",le),window.addEventListener("mouseup",Ue),window.addEventListener("touchend",Ue)}function Ue(){U.value=!1,e("slideEnd",L.value),e("isSliding",U.value),window.removeEventListener("mousemove",le),window.removeEventListener("touchmove",le),window.removeEventListener("mouseup",Ue),window.removeEventListener("touchend",Ue)}function Ze(){w.value&&window.addEventListener("keydown",ge)}function je(){w.value&&window.removeEventListener("keydown",ge)}function He(){w.value&&window.addEventListener("keydown",ge)}function ut(te){E.value&&!E.value.contains(te.target)&&(E.value.blur(),window.removeEventListener("keydown",ge))}function ge(te){te.key==="ArrowDown"&&!C?(te.preventDefault(),L.value+A.value>1?L.value=1:L.value+=A.value):te.key==="ArrowUp"&&!C||te.key==="ArrowLeft"&&C?(te.preventDefault(),L.value-A.value<0?L.value=0:L.value-=A.value):te.key==="ArrowRight"&&C&&(te.preventDefault(),L.value+A.value>1?L.value=1:L.value+=A.value)}function q(){var Ve;const te=tr();(Ve=te==null?void 0:te.proxy)==null||Ve.$forceUpdate();const ye=E.value;t.hover?(ye==null||ye.addEventListener("mousemove",Ke),ye==null||ye.addEventListener("mouseleave",Ue)):(ye==null||ye.removeEventListener("mousemove",Ke),ye==null||ye.removeEventListener("mouseleave",Ue),ye==null||ye.addEventListener("mouseup",Ue),ye==null||ye.addEventListener("touchend",Ue))}return zn(()=>{const te=E.value,ye=new ResizeObserver(([Ve])=>{const et=Ve.target.getBoundingClientRect().width;N.value=et});return ye.observe(te),()=>ye.disconnect()}),zn(()=>{const te=E.value;t.hover&&(te==null||te.addEventListener("mousemove",Ke),te==null||te.addEventListener("mouseleave",Ue)),window.addEventListener("click",ut)}),Wr(()=>{const te=E.value;te==null||te.removeEventListener("mousemove",Ke),te==null||te.removeEventListener("mouseleave",Ue),window.removeEventListener("keydown",ge),window.removeEventListener("click",ut),window.removeEventListener("mousemove",le),window.removeEventListener("touchmove",le),window.removeEventListener("mouseup",Ue),window.removeEventListener("touchend",Ue)}),St(P,()=>{var te;k.value=!1,(te=P.value)!=null&&te.complete&&(k.value=!0)}),St(I,()=>{var te;H.value=!1,(te=I.value)!=null&&te.complete&&(H.value=!0)}),St(f,()=>{q()}),St([()=>N.value,()=>k.value,()=>H.value],()=>{const te=P.value.naturalHeight/P.value.naturalWidth,ye=I.value.naturalHeight/I.value.naturalWidth,Ve=r.value==="taller"?Math.max(te,ye):Math.min(te,ye),et=N.value*Ve;F.value=et}),(te,ye)=>S(g)&&!B.value?(W(),Se("div",{key:0,"data-testid":"skeleton",style:Jt(re.value),innerHTML:S(g)},null,12,Dje)):(W(),Se("div",{key:1,id:S(T),ref_key:"containerRef",ref:E,class:"vci--container",tabindex:"0","data-testid":"vci-container",style:Jt(re.value),onClick:He,onTouchstart:Ke,onTouchend:Ue,onFocusin:Ze,onFocusout:je,onMousedown:Ke,onMouseup:Ue},[Ce("img",{ref_key:"rightImageRef",ref:I,class:"vci--right-image",alt:S(u),"data-testid":"right-image",src:S(l),style:Jt(ne.value),onLoad:ye[0]||(ye[0]=Ve=>H.value=!0)},null,44,Rje),Ce("img",{ref_key:"leftImageRef",ref:P,class:"vci--left-image",alt:S(a),"data-testid":"left-image",src:S(i),style:Jt(ae.value),onLoad:ye[1]||(ye[1]=Ve=>k.value=!0)},null,44,kje),Ce("div",{class:"vci--slider",style:Jt(pe.value)},[Ce("div",{class:"vci--slider-line",style:Jt(de.value)},null,4),S(h)?(W(),Se("div",{key:0,class:"vci--custom-handle",innerHTML:S(h)},null,8,Lje)):(W(),Se("div",{key:1,class:"vci--default-handle",style:Jt(me.value)},[Ce("div",{class:"vci--left-arrow",style:Jt(ke.value)},null,4),Ce("div",{class:"vci--right-arrow",style:Jt(Be.value)},null,4)],4)),Ce("div",{class:"vci--slider-line",style:Jt(de.value)},null,4)],4),S(s)?(W(),Se("div",{key:0,class:"vci--left-label-container",style:Jt(Y.value)},[Ce("div",{class:"vci--left-label","data-testid":"left-image-label",style:Jt(Xe.value)},Ft(S(s)),5)],4)):st("",!0),S(c)?(W(),Se("div",{key:1,class:"vci--right-label-container",style:Jt(he.value)},[Ce("div",{class:"vci--right-label","data-testid":"right-image-label",style:Jt(Ye.value)},Ft(S(c)),5)],4)):st("",!0)],44,Pje))}}),Oje=Ce("h1",{class:"section-title"},"Image Inner Comparison",-1),Nje="./image_inner/1_gt.jpg",Bje="./image_inner/1_input.png",Fje="./image_inner/2_gt.png",Uje="./image_inner/2_input.png",zje="./image_inner/3_gt.jpg",Hje="./image_inner/3_input.png",Vje="./image_inner/4_gt.jpg",$je="./image_inner/4_input.png",Gje=Ne({__name:"ImageSliderInner",setup(n){return(e,t)=>{const r=Kt("el-divider"),i=Kt("el-row"),a=Kt("el-col");return W(),Se("div",null,[be(r),be(i,{justify:"center"},{default:Oe(()=>[Oje]),_:1}),be(i,{justify:"center"},{default:Oe(()=>[be(a,{xs:12,sm:10,md:8,lg:6,xl:6},{default:Oe(()=>[be(i,{style:{"margin-top":"20px"}},{default:Oe(()=>[be(S(QT),{"left-image":Nje,"right-image":Bje,hover:!0})]),_:1})]),_:1}),be(a,{xs:12,sm:10,md:8,lg:6,xl:6},{default:Oe(()=>[be(i,{style:{"margin-top":"20px"}},{default:Oe(()=>[be(S(QT),{"left-image":Fje,"right-image":Uje,hover:!0})]),_:1})]),_:1})]),_:1}),be(i,{justify:"center"},{default:Oe(()=>[be(a,{xs:12,sm:10,md:8,lg:6,xl:6},{default:Oe(()=>[be(i,{style:{"margin-top":"20px"}},{default:Oe(()=>[be(S(QT),{"left-image":zje,"right-image":Hje,hover:!0})]),_:1})]),_:1}),be(a,{xs:12,sm:10,md:8,lg:6,xl:6},{default:Oe(()=>[be(i,{style:{"margin-top":"20px"}},{default:Oe(()=>[be(S(QT),{"left-image":Vje,"right-image":$je,hover:!0})]),_:1})]),_:1})]),_:1})])}}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var M6=function(n,e){return M6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},M6(n,e)};function Dr(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M6(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Wje=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),qje=function(){function n(){this.browser=new Wje,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),a0=new qje;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(a0.wxa=!0,a0.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?a0.worker=!0:typeof navigator>"u"?(a0.node=!0,a0.svgSupported=!0):jje(navigator.userAgent,a0);function jje(n,e){var t=e.browser,r=n.match(/Firefox\/([\d.]+)/),i=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),a=n.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(n);r&&(t.firefox=!0,t.version=r[1]),i&&(t.ie=!0,t.version=i[1]),a&&(t.edge=!0,t.version=a[1],t.newEdge=+a[1].split(".")[0]>18),s&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var o=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in o||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}const oi=a0;var m7=12,Kje="sans-serif",pv=m7+"px "+Kje,Xje=20,Yje=100,Qje="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Zje(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var r=String.fromCharCode(t+32),i=(n.charCodeAt(t)-Xje)/Yje;e[r]=i}return e}var Jje=Zje(Qje),W_={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,e;return function(t,r){if(!n){var i=W_.createCanvas();n=i&&i.getContext("2d")}if(n)return e!==r&&(e=n.font=r||pv),n.measureText(t);t=t||"",r=r||pv;var a=/(\d+)px/.exec(r),s=a&&+a[1]||m7,o=0;if(r.indexOf("mono")>=0)o=s*t.length;else for(var l=0;l<t.length;l++){var u=Jje[t[l]];o+=u==null?s:u*s}return{width:o}}}(),loadImage:function(n,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=n,r}},Foe=Kp(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),Uoe=Kp(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),Uw=Object.prototype.toString,hI=Array.prototype,eKe=hI.forEach,tKe=hI.filter,v7=hI.slice,nKe=hI.map,xW=(function(){}).constructor,ZT=xW?xW.prototype:null,g7="__proto__",rKe=2311;function zoe(){return rKe++}function y7(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function Mi(n){if(n==null||typeof n!="object")return n;var e=n,t=Uw.call(n);if(t==="[object Array]"){if(!ox(n)){e=[];for(var r=0,i=n.length;r<i;r++)e[r]=Mi(n[r])}}else if(Uoe[t]){if(!ox(n)){var a=n.constructor;if(a.from)e=a.from(n);else{e=new a(n.length);for(var r=0,i=n.length;r<i;r++)e[r]=n[r]}}}else if(!Foe[t]&&!ox(n)&&!e3(n)){e={};for(var s in n)n.hasOwnProperty(s)&&s!==g7&&(e[s]=Mi(n[s]))}return e}function Ta(n,e,t){if(!Ur(e)||!Ur(n))return t?Mi(e):n;for(var r in e)if(e.hasOwnProperty(r)&&r!==g7){var i=n[r],a=e[r];Ur(a)&&Ur(i)&&!br(a)&&!br(i)&&!e3(a)&&!e3(i)&&!wW(a)&&!wW(i)&&!ox(a)&&!ox(i)?Ta(i,a,t):(t||!(r in n))&&(n[r]=Mi(e[r]))}return n}function kn(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==g7&&(n[t]=e[t]);return n}function Aa(n,e,t){for(var r=Ga(e),i=0;i<r.length;i++){var a=r[i];(t?e[a]!=null:n[a]==null)&&(n[a]=e[a])}return n}function da(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t}return-1}function iKe(n,e){var t=n.prototype;function r(){}r.prototype=e.prototype,n.prototype=new r;for(var i in t)t.hasOwnProperty(i)&&(n.prototype[i]=t[i]);n.prototype.constructor=n,n.superClass=e}function vh(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(t?e[a]!=null:n[a]==null)&&(n[a]=e[a])}else Aa(n,e,t)}function El(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function Bt(n,e,t){if(n&&e)if(n.forEach&&n.forEach===eKe)n.forEach(e,t);else if(n.length===+n.length)for(var r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);else for(var a in n)n.hasOwnProperty(a)&&e.call(t,n[a],a,n)}function Ti(n,e,t){if(!n)return[];if(!e)return _7(n);if(n.map&&n.map===nKe)return n.map(e,t);for(var r=[],i=0,a=n.length;i<a;i++)r.push(e.call(t,n[i],i,n));return r}function Kp(n,e,t,r){if(n&&e){for(var i=0,a=n.length;i<a;i++)t=e.call(r,t,n[i],i,n);return t}}function Au(n,e,t){if(!n)return[];if(!e)return _7(n);if(n.filter&&n.filter===tKe)return n.filter(e,t);for(var r=[],i=0,a=n.length;i<a;i++)e.call(t,n[i],i,n)&&r.push(n[i]);return r}function Ga(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function aKe(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return n.apply(e,t.concat(v7.call(arguments)))}}var fa=ZT&&Gi(ZT.bind)?ZT.call.bind(ZT.bind):aKe;function fs(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat(v7.call(arguments)))}}function br(n){return Array.isArray?Array.isArray(n):Uw.call(n)==="[object Array]"}function Gi(n){return typeof n=="function"}function Lr(n){return typeof n=="string"}function I6(n){return Uw.call(n)==="[object String]"}function Wa(n){return typeof n=="number"}function Ur(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function wW(n){return!!Foe[Uw.call(n)]}function su(n){return!!Uoe[Uw.call(n)]}function e3(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function pI(n){return n.colorStops!=null}function sKe(n){return n.image!=null}function oKe(n){return n!==n}function C2(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,r=n.length;t<r;t++)if(n[t]!=null)return n[t]}function bi(n,e){return n??e}function sx(n,e,t){return n??e??t}function _7(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return v7.apply(n,e)}function Hoe(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function Jf(n,e){if(!n)throw new Error(e)}function yd(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Voe="__ec_primitive__";function D6(n){n[Voe]=!0}function ox(n){return n[Voe]}var lKe=function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return Ga(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},n}(),$oe=typeof Map=="function";function uKe(){return $oe?new Map:new lKe}var cKe=function(){function n(e){var t=br(e);this.data=uKe();var r=this;e instanceof n?e.each(i):e&&Bt(e,i);function i(a,s){t?r.set(a,s):r.set(s,a)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(r,i){e.call(t,r,i)})},n.prototype.keys=function(){var e=this.data.keys();return $oe?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n}();function Si(n){return new cKe(n)}function dKe(n,e){for(var t=new n.constructor(n.length+e.length),r=0;r<n.length;r++)t[r]=n[r];for(var i=n.length,r=0;r<e.length;r++)t[r+i]=e[r];return t}function mI(n,e){var t;if(Object.create)t=Object.create(n);else{var r=function(){};r.prototype=n,t=new r}return e&&kn(t,e),t}function Goe(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function Z1(n,e){return n.hasOwnProperty(e)}function bl(){}var fKe=180/Math.PI;function q_(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function hKe(n){return[n[0],n[1]]}function TW(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function pKe(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function mKe(n){return Math.sqrt(vKe(n))}function vKe(n){return n[0]*n[0]+n[1]*n[1]}function LP(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function gKe(n,e){var t=mKe(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function P6(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var R6=P6;function yKe(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var l1=yKe;function OP(n,e,t,r){return n[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n}function Md(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5],n}function By(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function Fy(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var gg=function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n}(),_Ke=function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new gg(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,i=e.offsetY,a=r-this._x,s=i-this._y;this._x=r,this._y=i,t.drift(a,s,e),this.handler.dispatchToElement(new gg(t,e),"drag",e.event);var o=this.handler.findHover(r,i,t).target,l=this._dropTarget;this._dropTarget=o,t!==o&&(l&&o!==l&&this.handler.dispatchToElement(new gg(l,e),"dragleave",e.event),o&&o!==l&&this.handler.dispatchToElement(new gg(o,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new gg(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new gg(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n}();const bKe=_Ke;var SKe=function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof t=="function"&&(i=r,r=t,t=null),!r||!e)return this;var s=this._$eventProcessor;t!=null&&s&&s.normalizeQuery&&(t=s.normalizeQuery(t)),a[e]||(a[e]=[]);for(var o=0;o<a[e].length;o++)if(a[e][o].h===r)return this;var l={h:r,query:t,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},u=a[e].length-1,c=a[e][u];return c&&c.callAtLast?a[e].splice(u,0,l):a[e].push(l),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var i=[],a=0,s=r[e].length;a<s;a++)r[e][a].h!==t&&i.push(r[e][a]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},n.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var s=t.length,o=i.length,l=0;l<o;l++){var u=i[l];if(!(a&&a.filter&&u.query!=null&&!a.filter(e,u.query)))switch(s){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,t[0]);break;case 2:u.h.call(u.ctx,t[0],t[1]);break;default:u.h.apply(u.ctx,t);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var s=t.length,o=t[s-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(s){case 0:c.h.call(o);break;case 1:c.h.call(o,t[0]);break;case 2:c.h.call(o,t[0],t[1]);break;default:c.h.apply(o,t.slice(1,s-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n}();const Gd=SKe;var xKe=Math.log(2);function k6(n,e,t,r,i,a){var s=r+"-"+i,o=n.length;if(a.hasOwnProperty(s))return a[s];if(e===1){var l=Math.round(Math.log((1<<o)-1&~i)/xKe);return n[t][l]}for(var u=r|1<<t,c=t+1;r&1<<c;)c++;for(var d=0,f=0,h=0;f<o;f++){var p=1<<f;p&i||(d+=(h%2?-1:1)*n[t][f]*k6(n,e-1,c,u,i|p,a),h++)}return a[s]=d,d}function CW(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],r={},i=k6(t,8,0,0,0,r);if(i!==0){for(var a=[],s=0;s<8;s++)for(var o=0;o<8;o++)a[o]==null&&(a[o]=0),a[o]+=((s+o)%2?-1:1)*k6(t,7,s===0?1:0,1<<s,1<<o,r)/i*e[s];return function(l,u,c){var d=u*a[6]+c*a[7]+1;l[0]=(u*a[0]+c*a[1]+a[2])/d,l[1]=(u*a[3]+c*a[4]+a[5])/d}}}var AW="___zrEVENTSAVED",NP=[];function wKe(n,e,t,r,i){return L6(NP,e,r,i,!0)&&L6(n,t,NP[0],NP[1])}function L6(n,e,t,r,i){if(e.getBoundingClientRect&&oi.domSupported&&!Woe(e)){var a=e[AW]||(e[AW]={}),s=TKe(e,a),o=CKe(s,a,i);if(o)return o(n,t,r),!0}return!1}function TKe(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var s=document.createElement("div"),o=s.style,l=a%2,u=(a>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[u]+":0",r[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),n.appendChild(s),t.push(s)}return t}function CKe(n,e,t){for(var r=t?"invTrans":"trans",i=e[r],a=e.srcCoords,s=[],o=[],l=!0,u=0;u<4;u++){var c=n[u].getBoundingClientRect(),d=2*u,f=c.left,h=c.top;s.push(f,h),l=l&&a&&f===a[d]&&h===a[d+1],o.push(n[u].offsetLeft,n[u].offsetTop)}return l&&i?i:(e.srcCoords=s,e[r]=t?CW(o,s):CW(s,o))}function Woe(n){return n.nodeName.toUpperCase()==="CANVAS"}var AKe=/([&<>"'])/g,EKe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Eu(n){return n==null?"":(n+"").replace(AKe,function(e,t){return EKe[t]})}var MKe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,BP=[],IKe=oi.browser.firefox&&+oi.browser.version.split(".")[0]<39;function O6(n,e,t,r){return t=t||{},r?EW(n,e,t):IKe&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):EW(n,e,t),t}function EW(n,e,t){if(oi.domSupported&&n.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(Woe(n)){var a=n.getBoundingClientRect();t.zrX=r-a.left,t.zrY=i-a.top;return}else if(L6(BP,n,r,i)){t.zrX=BP[0],t.zrY=BP[1];return}}t.zrX=t.zrY=0}function b7(n){return n||window.event}function bu(n,e,t){if(e=b7(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var s=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];s&&O6(n,s,e,t)}else{O6(n,e,e,t);var a=DKe(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var o=e.button;return e.which==null&&o!==void 0&&MKe.test(e.type)&&(e.which=o&1?1:o&2?3:o&4?2:0),e}function DKe(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,r=n.deltaY;if(t==null||r==null)return e;var i=Math.abs(r!==0?r:t),a=r>0?-1:r<0?1:t>0?-1:1;return 3*i*a}function PKe(n,e,t,r){n.addEventListener(e,t,r)}function RKe(n,e,t,r){n.removeEventListener(e,t,r)}var qoe=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0},kKe=function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,r){var i=e.touches;if(i){for(var a={points:[],touches:[],target:t,event:e},s=0,o=i.length;s<o;s++){var l=i[s],u=O6(r,l,{});a.points.push([u.zrX,u.zrY]),a.touches.push(l)}this._track.push(a)}},n.prototype._recognize=function(e){for(var t in FP)if(FP.hasOwnProperty(t)){var r=FP[t](this._track,e);if(r)return r}},n}();function MW(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function LKe(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var FP={pinch:function(n,e){var t=n.length;if(t){var r=(n[t-1]||{}).points,i=(n[t-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=MW(r)/MW(i);!isFinite(a)&&(a=1),e.pinchScale=a;var s=LKe(r);return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:n[0].target,event:e}}}}};function A2(){return[1,0,0,1,0,0]}function S7(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function OKe(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function u1(n,e,t){var r=e[0]*t[0]+e[2]*t[1],i=e[1]*t[0]+e[3]*t[1],a=e[0]*t[2]+e[2]*t[3],s=e[1]*t[2]+e[3]*t[3],o=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=r,n[1]=i,n[2]=a,n[3]=s,n[4]=o,n[5]=l,n}function N6(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function x7(n,e,t){var r=e[0],i=e[2],a=e[4],s=e[1],o=e[3],l=e[5],u=Math.sin(t),c=Math.cos(t);return n[0]=r*c+s*u,n[1]=-r*u+s*c,n[2]=i*c+o*u,n[3]=-i*u+c*o,n[4]=c*a+u*l,n[5]=c*l-u*a,n}function NKe(n,e,t){var r=t[0],i=t[1];return n[0]=e[0]*r,n[1]=e[1]*i,n[2]=e[2]*r,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*i,n}function joe(n,e){var t=e[0],r=e[2],i=e[4],a=e[1],s=e[3],o=e[5],l=t*s-a*r;return l?(l=1/l,n[0]=s*l,n[1]=-a*l,n[2]=-r*l,n[3]=t*l,n[4]=(r*o-s*i)*l,n[5]=(a*i-t*o)*l,n):null}var BKe=function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,r){e.x=t,e.y=r},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},n.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},n.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},n.scaleAndAdd=function(e,t,r,i){e.x=t.x+r.x*i,e.y=t.y+r.y*i},n.lerp=function(e,t,r,i){var a=1-i;e.x=a*t.x+i*r.x,e.y=a*t.y+i*r.y},n}();const Vr=BKe;var JT=Math.min,eC=Math.max,Em=new Vr,Mm=new Vr,Im=new Vr,Dm=new Vr,Vb=new Vr,$b=new Vr,FKe=function(){function n(e,t,r,i){r<0&&(e=e+r,r=-r),i<0&&(t=t+i,i=-i),this.x=e,this.y=t,this.width=r,this.height=i}return n.prototype.union=function(e){var t=JT(e.x,this.x),r=JT(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=eC(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=eC(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,i=e.height/t.height,a=A2();return N6(a,a,[-t.x,-t.y]),NKe(a,a,[r,i]),N6(a,a,[e.x,e.y]),a},n.prototype.intersect=function(e,t){if(!e)return!1;e instanceof n||(e=n.create(e));var r=this,i=r.x,a=r.x+r.width,s=r.y,o=r.y+r.height,l=e.x,u=e.x+e.width,c=e.y,d=e.y+e.height,f=!(a<l||u<i||o<c||d<s);if(t){var h=1/0,p=0,m=Math.abs(a-l),v=Math.abs(u-i),g=Math.abs(o-c),y=Math.abs(d-s),_=Math.min(m,v),b=Math.min(g,y);a<l||u<i?_>p&&(p=_,m<v?Vr.set($b,-m,0):Vr.set($b,v,0)):_<h&&(h=_,m<v?Vr.set(Vb,m,0):Vr.set(Vb,-v,0)),o<c||d<s?b>p&&(p=b,g<y?Vr.set($b,0,-g):Vr.set($b,0,y)):_<h&&(h=_,g<y?Vr.set(Vb,0,g):Vr.set(Vb,0,-y))}return t&&Vr.copy(t,f?Vb:$b),f},n.prototype.contain=function(e,t){var r=this;return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},n.applyTransform=function(e,t,r){if(!r){e!==t&&n.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],s=r[4],o=r[5];e.x=t.x*i+s,e.y=t.y*a+o,e.width=t.width*i,e.height=t.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}Em.x=Im.x=t.x,Em.y=Dm.y=t.y,Mm.x=Dm.x=t.x+t.width,Mm.y=Im.y=t.y+t.height,Em.transform(r),Dm.transform(r),Mm.transform(r),Im.transform(r),e.x=JT(Em.x,Mm.x,Im.x,Dm.x),e.y=JT(Em.y,Mm.y,Im.y,Dm.y);var l=eC(Em.x,Mm.x,Im.x,Dm.x),u=eC(Em.y,Mm.y,Im.y,Dm.y);e.width=l-e.x,e.height=u-e.y},n}();const Zi=FKe;var Koe="silent";function UKe(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:zKe}}function zKe(){qoe(this.event)}var HKe=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(Gd),Gb=function(){function n(e,t){this.x=e,this.y=t}return n}(),VKe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],UP=new Zi(0,0,0,0),Xoe=function(n){Dr(e,n);function e(t,r,i,a,s){var o=n.call(this)||this;return o._hovered=new Gb(0,0),o.storage=t,o.painter=r,o.painterRoot=a,o._pointerSize=s,i=i||new HKe,o.proxy=null,o.setHandlerProxy(i),o._draggingMgr=new bKe(o),o}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(Bt(VKe,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,i=t.zrY,a=Yoe(this,r,i),s=this._hovered,o=s.target;o&&!o.__zr&&(s=this.findHover(s.x,s.y),o=s.target);var l=this._hovered=a?new Gb(r,i):this.findHover(r,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),o&&u!==o&&this.dispatchToElement(s,"mouseout",t),this.dispatchToElement(l,"mousemove",t),u&&u!==o&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new Gb(0,0)},e.prototype.dispatch=function(t,r){var i=this[t];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,i){t=t||{};var a=t.target;if(!(a&&a.silent)){for(var s="on"+r,o=UKe(r,t,i);a&&(a[s]&&(o.cancelBubble=!!a[s].call(a,o)),a.trigger(r,o),a=a.__hostTarget?a.__hostTarget:a.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(r,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[s]=="function"&&l[s].call(l,o),l.trigger&&l.trigger(r,o)}))}},e.prototype.findHover=function(t,r,i){var a=this.storage.getDisplayList(),s=new Gb(t,r);if(IW(a,s,t,r,i),this._pointerSize&&!s.target){for(var o=[],l=this._pointerSize,u=l/2,c=new Zi(t-u,r-u,l,l),d=a.length-1;d>=0;d--){var f=a[d];f!==i&&!f.ignore&&!f.ignoreCoarsePointer&&(!f.parent||!f.parent.ignoreCoarsePointer)&&(UP.copy(f.getBoundingRect()),f.transform&&UP.applyTransform(f.transform),UP.intersect(c)&&o.push(f))}if(o.length)for(var h=4,p=Math.PI/12,m=Math.PI*2,v=0;v<u;v+=h)for(var g=0;g<m;g+=p){var y=t+v*Math.cos(g),_=r+v*Math.sin(g);if(IW(o,s,y,_,i),s.target)return s}}return s},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new kKe);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var s=a.type;t.gestureEvent=s;var o=new Gb;o.target=a.target,this.dispatchToElement(o,s,a.event)}},e}(Gd);Bt(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){Xoe.prototype[n]=function(e){var t=e.zrX,r=e.zrY,i=Yoe(this,t,r),a,s;if((n!=="mouseup"||!i)&&(a=this.findHover(t,r),s=a.target),n==="mousedown")this._downEl=s,this._downPoint=[e.zrX,e.zrY],this._upEl=s;else if(n==="mouseup")this._upEl=s;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||R6(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,n,e)}});function $Ke(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var r=n,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var s=r.getClipPath();if(s&&!s.contain(e,t))return!1;r.silent&&(i=!0)}var o=r.__hostTarget;r=o||r.parent}return i?Koe:!0}return!1}function IW(n,e,t,r,i){for(var a=n.length-1;a>=0;a--){var s=n[a],o=void 0;if(s!==i&&!s.ignore&&(o=$Ke(s,t,r))&&(!e.topTarget&&(e.topTarget=s),o!==Koe)){e.target=s;break}}}function Yoe(n,e,t){var r=n.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}const GKe=Xoe;var Qoe=32,Wb=7;function WKe(n){for(var e=0;n>=Qoe;)e|=n&1,n>>=1;return n+e}function DW(n,e,t,r){var i=e+1;if(i===t)return 1;if(r(n[i++],n[e])<0){for(;i<t&&r(n[i],n[i-1])<0;)i++;qKe(n,e,i)}else for(;i<t&&r(n[i],n[i-1])>=0;)i++;return i-e}function qKe(n,e,t){for(t--;e<t;){var r=n[e];n[e++]=n[t],n[t--]=r}}function PW(n,e,t,r,i){for(r===e&&r++;r<t;r++){for(var a=n[r],s=e,o=r,l;s<o;)l=s+o>>>1,i(a,n[l])<0?o=l:s=l+1;var u=r-s;switch(u){case 3:n[s+3]=n[s+2];case 2:n[s+2]=n[s+1];case 1:n[s+1]=n[s];break;default:for(;u>0;)n[s+u]=n[s+u-1],u--}n[s]=a}}function zP(n,e,t,r,i,a){var s=0,o=0,l=1;if(a(n,e[t+i])>0){for(o=r-i;l<o&&a(n,e[t+i+l])>0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),s+=i,l+=i}else{for(o=i+1;l<o&&a(n,e[t+i-l])<=0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var u=s;s=i-l,l=i-u}for(s++;s<l;){var c=s+(l-s>>>1);a(n,e[t+c])>0?s=c+1:l=c}return l}function HP(n,e,t,r,i,a){var s=0,o=0,l=1;if(a(n,e[t+i])<0){for(o=i+1;l<o&&a(n,e[t+i-l])<0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var u=s;s=i-l,l=i-u}else{for(o=r-i;l<o&&a(n,e[t+i+l])>=0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),s+=i,l+=i}for(s++;s<l;){var c=s+(l-s>>>1);a(n,e[t+c])<0?l=c:s=c+1}return l}function jKe(n,e){var t=Wb,r,i,a=0;n.length;var s=[];r=[],i=[];function o(h,p){r[a]=h,i[a]=p,a+=1}function l(){for(;a>1;){var h=a-2;if(h>=1&&i[h-1]<=i[h]+i[h+1]||h>=2&&i[h-2]<=i[h]+i[h-1])i[h-1]<i[h+1]&&h--;else if(i[h]>i[h+1])break;c(h)}}function u(){for(;a>1;){var h=a-2;h>0&&i[h-1]<i[h+1]&&h--,c(h)}}function c(h){var p=r[h],m=i[h],v=r[h+1],g=i[h+1];i[h]=m+g,h===a-3&&(r[h+1]=r[h+2],i[h+1]=i[h+2]),a--;var y=HP(n[v],n,p,m,0,e);p+=y,m-=y,m!==0&&(g=zP(n[p+m-1],n,v,g,g-1,e),g!==0&&(m<=g?d(p,m,v,g):f(p,m,v,g)))}function d(h,p,m,v){var g=0;for(g=0;g<p;g++)s[g]=n[h+g];var y=0,_=m,b=h;if(n[b++]=n[_++],--v===0){for(g=0;g<p;g++)n[b+g]=s[y+g];return}if(p===1){for(g=0;g<v;g++)n[b+g]=n[_+g];n[b+v]=s[y];return}for(var x=t,w,A,T;;){w=0,A=0,T=!1;do if(e(n[_],s[y])<0){if(n[b++]=n[_++],A++,w=0,--v===0){T=!0;break}}else if(n[b++]=s[y++],w++,A=0,--p===1){T=!0;break}while((w|A)<x);if(T)break;do{if(w=HP(n[_],s,y,p,0,e),w!==0){for(g=0;g<w;g++)n[b+g]=s[y+g];if(b+=w,y+=w,p-=w,p<=1){T=!0;break}}if(n[b++]=n[_++],--v===0){T=!0;break}if(A=zP(s[y],n,_,v,0,e),A!==0){for(g=0;g<A;g++)n[b+g]=n[_+g];if(b+=A,_+=A,v-=A,v===0){T=!0;break}}if(n[b++]=s[y++],--p===1){T=!0;break}x--}while(w>=Wb||A>=Wb);if(T)break;x<0&&(x=0),x+=2}if(t=x,t<1&&(t=1),p===1){for(g=0;g<v;g++)n[b+g]=n[_+g];n[b+v]=s[y]}else{if(p===0)throw new Error;for(g=0;g<p;g++)n[b+g]=s[y+g]}}function f(h,p,m,v){var g=0;for(g=0;g<v;g++)s[g]=n[m+g];var y=h+p-1,_=v-1,b=m+v-1,x=0,w=0;if(n[b--]=n[y--],--p===0){for(x=b-(v-1),g=0;g<v;g++)n[x+g]=s[g];return}if(v===1){for(b-=p,y-=p,w=b+1,x=y+1,g=p-1;g>=0;g--)n[w+g]=n[x+g];n[b]=s[_];return}for(var A=t;;){var T=0,C=0,E=!1;do if(e(s[_],n[y])<0){if(n[b--]=n[y--],T++,C=0,--p===0){E=!0;break}}else if(n[b--]=s[_--],C++,T=0,--v===1){E=!0;break}while((T|C)<A);if(E)break;do{if(T=p-HP(s[_],n,h,p,p-1,e),T!==0){for(b-=T,y-=T,p-=T,w=b+1,x=y+1,g=T-1;g>=0;g--)n[w+g]=n[x+g];if(p===0){E=!0;break}}if(n[b--]=s[_--],--v===1){E=!0;break}if(C=v-zP(n[y],s,0,v,v-1,e),C!==0){for(b-=C,_-=C,v-=C,w=b+1,x=_+1,g=0;g<C;g++)n[w+g]=s[x+g];if(v<=1){E=!0;break}}if(n[b--]=n[y--],--p===0){E=!0;break}A--}while(T>=Wb||C>=Wb);if(E)break;A<0&&(A=0),A+=2}if(t=A,t<1&&(t=1),v===1){for(b-=p,y-=p,w=b+1,x=y+1,g=p-1;g>=0;g--)n[w+g]=n[x+g];n[b]=s[_]}else{if(v===0)throw new Error;for(x=b-(v-1),g=0;g<v;g++)n[x+g]=s[g]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:o}}function bE(n,e,t,r){t||(t=0),r||(r=n.length);var i=r-t;if(!(i<2)){var a=0;if(i<Qoe){a=DW(n,t,r,e),PW(n,t,r,t+a,e);return}var s=jKe(n,e),o=WKe(i);do{if(a=DW(n,t,r,e),a<o){var l=i;l>o&&(l=o),PW(n,t,t+l,t+a,e),a=l}s.pushRun(t,a),s.mergeRuns(),i-=a,t+=a}while(i!==0);s.forceMergeRuns()}}var Kl=1,OS=2,Sy=4,RW=!1;function VP(){RW||(RW=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function kW(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var KKe=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=kW}return n.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,i=0,a=t.length;i<a;i++)this._updateAndAddDisplayable(t[i],null,e);r.length=this._displayListLen,bE(r,kW)},n.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath();if(e.ignoreClip)t=null;else if(i){t?t=t.slice():t=[];for(var a=i,s=e;a;)a.parent=s,a.updateTransform(),t.push(a),s=a,a=a.getClipPath()}if(e.childrenRef){for(var o=e.childrenRef(),l=0;l<o.length;l++){var u=o[l];e.__dirty&&(u.__dirty|=Kl),this._updateAndAddDisplayable(u,t,r)}e.__dirty=0}else{var c=e;t&&t.length?c.__clipPaths=t:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(VP(),c.z=0),isNaN(c.z2)&&(VP(),c.z2=0),isNaN(c.zlevel)&&(VP(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var d=e.getDecalElement&&e.getDecalElement();d&&this._updateAndAddDisplayable(d,t,r);var f=e.getTextGuideLine();f&&this._updateAndAddDisplayable(f,t,r);var h=e.getTextContent();h&&this._updateAndAddDisplayable(h,t,r)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var i=da(this._roots,e);i>=0&&this._roots.splice(i,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}();const XKe=KKe;var Zoe;Zoe=oi.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};const B6=Zoe;var SE={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)))},elasticOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/r)+1)},elasticInOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-SE.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?SE.bounceIn(n*2)*.5:SE.bounceOut(n*2-1)*.5+.5}};const Joe=SE;var tC=Math.pow,Tp=Math.sqrt,t3=1e-8,ele=1e-4,LW=Tp(3),nC=1/3,dd=q_(),Mu=q_(),c1=q_();function pp(n){return n>-t3&&n<t3}function tle(n){return n>t3||n<-t3}function Vs(n,e,t,r,i){var a=1-i;return a*a*(a*n+3*i*e)+i*i*(i*r+3*a*t)}function OW(n,e,t,r,i){var a=1-i;return 3*(((e-n)*a+2*(t-e)*i)*a+(r-t)*i*i)}function nle(n,e,t,r,i,a){var s=r+3*(e-t)-n,o=3*(t-e*2+n),l=3*(e-n),u=n-i,c=o*o-3*s*l,d=o*l-9*s*u,f=l*l-3*o*u,h=0;if(pp(c)&&pp(d))if(pp(o))a[0]=0;else{var p=-l/o;p>=0&&p<=1&&(a[h++]=p)}else{var m=d*d-4*c*f;if(pp(m)){var v=d/c,p=-o/s+v,g=-v/2;p>=0&&p<=1&&(a[h++]=p),g>=0&&g<=1&&(a[h++]=g)}else if(m>0){var y=Tp(m),_=c*o+1.5*s*(-d+y),b=c*o+1.5*s*(-d-y);_<0?_=-tC(-_,nC):_=tC(_,nC),b<0?b=-tC(-b,nC):b=tC(b,nC);var p=(-o-(_+b))/(3*s);p>=0&&p<=1&&(a[h++]=p)}else{var x=(2*c*o-3*s*d)/(2*Tp(c*c*c)),w=Math.acos(x)/3,A=Tp(c),T=Math.cos(w),p=(-o-2*A*T)/(3*s),g=(-o+A*(T+LW*Math.sin(w)))/(3*s),C=(-o+A*(T-LW*Math.sin(w)))/(3*s);p>=0&&p<=1&&(a[h++]=p),g>=0&&g<=1&&(a[h++]=g),C>=0&&C<=1&&(a[h++]=C)}}return h}function rle(n,e,t,r,i){var a=6*t-12*e+6*n,s=9*e+3*r-3*n-9*t,o=3*e-3*n,l=0;if(pp(s)){if(tle(a)){var u=-o/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*s*o;if(pp(c))i[0]=-a/(2*s);else if(c>0){var d=Tp(c),u=(-a+d)/(2*s),f=(-a-d)/(2*s);u>=0&&u<=1&&(i[l++]=u),f>=0&&f<=1&&(i[l++]=f)}}return l}function n3(n,e,t,r,i,a){var s=(e-n)*i+n,o=(t-e)*i+e,l=(r-t)*i+t,u=(o-s)*i+s,c=(l-o)*i+o,d=(c-u)*i+u;a[0]=n,a[1]=s,a[2]=u,a[3]=d,a[4]=d,a[5]=c,a[6]=l,a[7]=r}function YKe(n,e,t,r,i,a,s,o,l,u,c){var d,f=.005,h=1/0,p,m,v,g;dd[0]=l,dd[1]=u;for(var y=0;y<1;y+=.05)Mu[0]=Vs(n,t,i,s,y),Mu[1]=Vs(e,r,a,o,y),v=l1(dd,Mu),v<h&&(d=y,h=v);h=1/0;for(var _=0;_<32&&!(f<ele);_++)p=d-f,m=d+f,Mu[0]=Vs(n,t,i,s,p),Mu[1]=Vs(e,r,a,o,p),v=l1(Mu,dd),p>=0&&v<h?(d=p,h=v):(c1[0]=Vs(n,t,i,s,m),c1[1]=Vs(e,r,a,o,m),g=l1(c1,dd),m<=1&&g<h?(d=m,h=g):f*=.5);return c&&(c[0]=Vs(n,t,i,s,d),c[1]=Vs(e,r,a,o,d)),Tp(h)}function QKe(n,e,t,r,i,a,s,o,l){for(var u=n,c=e,d=0,f=1/l,h=1;h<=l;h++){var p=h*f,m=Vs(n,t,i,s,p),v=Vs(e,r,a,o,p),g=m-u,y=v-c;d+=Math.sqrt(g*g+y*y),u=m,c=v}return d}function ho(n,e,t,r){var i=1-r;return i*(i*n+2*r*e)+r*r*t}function NW(n,e,t,r){return 2*((1-r)*(e-n)+r*(t-e))}function ZKe(n,e,t,r,i){var a=n-2*e+t,s=2*(e-n),o=n-r,l=0;if(pp(a)){if(tle(s)){var u=-o/s;u>=0&&u<=1&&(i[l++]=u)}}else{var c=s*s-4*a*o;if(pp(c)){var u=-s/(2*a);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var d=Tp(c),u=(-s+d)/(2*a),f=(-s-d)/(2*a);u>=0&&u<=1&&(i[l++]=u),f>=0&&f<=1&&(i[l++]=f)}}return l}function ile(n,e,t){var r=n+t-2*e;return r===0?.5:(n-e)/r}function r3(n,e,t,r,i){var a=(e-n)*r+n,s=(t-e)*r+e,o=(s-a)*r+a;i[0]=n,i[1]=a,i[2]=o,i[3]=o,i[4]=s,i[5]=t}function JKe(n,e,t,r,i,a,s,o,l){var u,c=.005,d=1/0;dd[0]=s,dd[1]=o;for(var f=0;f<1;f+=.05){Mu[0]=ho(n,t,i,f),Mu[1]=ho(e,r,a,f);var h=l1(dd,Mu);h<d&&(u=f,d=h)}d=1/0;for(var p=0;p<32&&!(c<ele);p++){var m=u-c,v=u+c;Mu[0]=ho(n,t,i,m),Mu[1]=ho(e,r,a,m);var h=l1(Mu,dd);if(m>=0&&h<d)u=m,d=h;else{c1[0]=ho(n,t,i,v),c1[1]=ho(e,r,a,v);var g=l1(c1,dd);v<=1&&g<d?(u=v,d=g):c*=.5}}return l&&(l[0]=ho(n,t,i,u),l[1]=ho(e,r,a,u)),Tp(d)}function eXe(n,e,t,r,i,a,s){for(var o=n,l=e,u=0,c=1/s,d=1;d<=s;d++){var f=d*c,h=ho(n,t,i,f),p=ho(e,r,a,f),m=h-o,v=p-l;u+=Math.sqrt(m*m+v*v),o=h,l=p}return u}var tXe=/cubic-bezier\(([0-9,\.e ]+)\)/;function ale(n){var e=n&&tXe.exec(n);if(e){var t=e[1].split(","),r=+yd(t[0]),i=+yd(t[1]),a=+yd(t[2]),s=+yd(t[3]);if(isNaN(r+i+a+s))return;var o=[];return function(l){return l<=0?0:l>=1?1:nle(0,r,a,1,l,o)&&Vs(0,i,s,1,o[0])}}}var nXe=function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||bl,this.ondestroy=e.ondestroy||bl,this.onrestart=e.onrestart||bl,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,i=e-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var s=this.easingFunc,o=s?s(a):a;if(this.onframe(o),a===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Gi(e)?e:Joe[e]||ale(e)},n}();const rXe=nXe;var sle=function(){function n(e){this.value=e}return n}(),iXe=function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new sle(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),aXe=function(){function n(e){this._list=new iXe,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var r=this._list,i=this._map,a=null;if(i[e]==null){var s=r.len(),o=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var l=r.head;r.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}o?o.value=t:o=new sle(t),o.key=e,r.insertEntry(o),i[e]=o}return a},n.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}();const zw=aXe;var BW={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function lx(n){return n=Math.round(n),n<0?0:n>255?255:n}function FW(n){return n<0?0:n>1?1:n}function $P(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?lx(parseFloat(e)/100*255):lx(parseInt(e,10))}function ux(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?FW(parseFloat(e)/100):FW(parseFloat(e))}function GP(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function yu(n,e,t,r,i){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function F6(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var ole=new zw(20),rC=null;function yg(n,e){rC&&F6(rC,e),rC=ole.put(n,rC||e.slice())}function Q0(n,e){if(n){e=e||[];var t=ole.get(n);if(t)return F6(e,t);n=n+"";var r=n.replace(/ /g,"").toLowerCase();if(r in BW)return F6(e,BW[r]),yg(n,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){yu(e,0,0,0,1);return}return yu(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),yg(n,e),e}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){yu(e,0,0,0,1);return}return yu(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),yg(n,e),e}return}var s=r.indexOf("("),o=r.indexOf(")");if(s!==-1&&o+1===i){var l=r.substr(0,s),u=r.substr(s+1,o-(s+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?yu(e,+u[0],+u[1],+u[2],1):yu(e,0,0,0,1);c=ux(u.pop());case"rgb":if(u.length>=3)return yu(e,$P(u[0]),$P(u[1]),$P(u[2]),u.length===3?c:ux(u[3])),yg(n,e),e;yu(e,0,0,0,1);return;case"hsla":if(u.length!==4){yu(e,0,0,0,1);return}return u[3]=ux(u[3]),UW(u,e),yg(n,e),e;case"hsl":if(u.length!==3){yu(e,0,0,0,1);return}return UW(u,e),yg(n,e),e;default:return}}yu(e,0,0,0,1)}}function UW(n,e){var t=(parseFloat(n[0])%360+360)%360/360,r=ux(n[1]),i=ux(n[2]),a=i<=.5?i*(r+1):i+r-i*r,s=i*2-a;return e=e||[],yu(e,lx(GP(s,a,t+1/3)*255),lx(GP(s,a,t)*255),lx(GP(s,a,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function zW(n,e){var t=Q0(n);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return w7(t,t.length===4?"rgba":"rgb")}}function w7(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function i3(n,e){var t=Q0(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}function sXe(n){return n.type==="linear"}function oXe(n){return n.type==="radial"}(function(){return oi.hasGlobalWindow&&Gi(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}})();var U6=Array.prototype.slice;function _f(n,e,t){return(e-n)*t+n}function WP(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=_f(e[a],t[a],r);return n}function lXe(n,e,t,r){for(var i=e.length,a=i&&e[0].length,s=0;s<i;s++){n[s]||(n[s]=[]);for(var o=0;o<a;o++)n[s][o]=_f(e[s][o],t[s][o],r)}return n}function iC(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=e[a]+t[a]*r;return n}function HW(n,e,t,r){for(var i=e.length,a=i&&e[0].length,s=0;s<i;s++){n[s]||(n[s]=[]);for(var o=0;o<a;o++)n[s][o]=e[s][o]+t[s][o]*r}return n}function uXe(n,e){for(var t=n.length,r=e.length,i=t>r?e:n,a=Math.min(t,r),s=i[a-1]||{color:[0,0,0,0],offset:0},o=a;o<Math.max(t,r);o++)i.push({offset:s.offset,color:s.color.slice()})}function cXe(n,e,t){var r=n,i=e;if(!(!r.push||!i.push)){var a=r.length,s=i.length;if(a!==s){var o=a>s;if(o)r.length=s;else for(var l=a;l<s;l++)r.push(t===1?i[l]:U6.call(i[l]))}for(var u=r[0]&&r[0].length,l=0;l<r.length;l++)if(t===1)isNaN(r[l])&&(r[l]=i[l]);else for(var c=0;c<u;c++)isNaN(r[l][c])&&(r[l][c]=i[l][c])}}function xE(n){if(El(n)){var e=n.length;if(El(n[0])){for(var t=[],r=0;r<e;r++)t.push(U6.call(n[r]));return t}return U6.call(n)}return n}function wE(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function dXe(n){return El(n&&n[0])?2:1}var aC=0,TE=1,lle=2,NS=3,z6=4,H6=5,VW=6;function $W(n){return n===z6||n===H6}function sC(n){return n===TE||n===lle}var qb=[0,0,0,0],fXe=function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var i=this.keyframes,a=i.length,s=!1,o=VW,l=t;if(El(t)){var u=dXe(t);o=u,(u===1&&!Wa(t[0])||u===2&&!Wa(t[0][0]))&&(s=!0)}else if(Wa(t)&&!oKe(t))o=aC;else if(Lr(t))if(!isNaN(+t))o=aC;else{var c=Q0(t);c&&(l=c,o=NS)}else if(pI(t)){var d=kn({},l);d.colorStops=Ti(t.colorStops,function(h){return{offset:h.offset,color:Q0(h.color)}}),sXe(t)?o=z6:oXe(t)&&(o=H6),l=d}a===0?this.valType=o:(o!==this.valType||o===VW)&&(s=!0),this.discrete=this.discrete||s;var f={time:e,value:l,rawValue:t,percent:0};return r&&(f.easing=r,f.easingFunc=Gi(r)?r:Joe[r]||ale(r)),i.push(f),f},n.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(m,v){return m.time-v.time});for(var i=this.valType,a=r.length,s=r[a-1],o=this.discrete,l=sC(i),u=$W(i),c=0;c<a;c++){var d=r[c],f=d.value,h=s.value;d.percent=d.time/e,o||(l&&c!==a-1?cXe(f,h,i):u&&uXe(f.colorStops,h.colorStops))}if(!o&&i!==H6&&t&&this.needsAnimate()&&t.needsAnimate()&&i===t.valType&&!t._finished){this._additiveTrack=t;for(var p=r[0].value,c=0;c<a;c++)i===aC?r[c].additiveValue=r[c].value-p:i===NS?r[c].additiveValue=iC([],r[c].value,p,-1):sC(i)&&(r[c].additiveValue=i===TE?iC([],r[c].value,p,-1):HW([],r[c].value,p,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,s=this.keyframes,o=s.length,l=this.propName,u=a===NS,c,d=this._lastFr,f=Math.min,h,p;if(o===1)h=p=s[0];else{if(t<0)c=0;else if(t<this._lastFrP){var m=f(d+1,o-1);for(c=m;c>=0&&!(s[c].percent<=t);c--);c=f(c,o-2)}else{for(c=d;c<o&&!(s[c].percent>t);c++);c=f(c-1,o-2)}p=s[c+1],h=s[c]}if(h&&p){this._lastFr=c,this._lastFrP=t;var v=p.percent-h.percent,g=v===0?1:f((t-h.percent)/v,1);p.easingFunc&&(g=p.easingFunc(g));var y=r?this._additiveValue:u?qb:e[l];if((sC(a)||u)&&!y&&(y=this._additiveValue=[]),this.discrete)e[l]=g<1?h.rawValue:p.rawValue;else if(sC(a))a===TE?WP(y,h[i],p[i],g):lXe(y,h[i],p[i],g);else if($W(a)){var _=h[i],b=p[i],x=a===z6;e[l]={type:x?"linear":"radial",x:_f(_.x,b.x,g),y:_f(_.y,b.y,g),colorStops:Ti(_.colorStops,function(A,T){var C=b.colorStops[T];return{offset:_f(A.offset,C.offset,g),color:wE(WP([],A.color,C.color,g))}}),global:b.global},x?(e[l].x2=_f(_.x2,b.x2,g),e[l].y2=_f(_.y2,b.y2,g)):e[l].r=_f(_.r,b.r,g)}else if(u)WP(y,h[i],p[i],g),r||(e[l]=wE(y));else{var w=_f(h[i],p[i],g);r?this._additiveValue=w:e[l]=w}r&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,i=this._additiveValue;t===aC?e[r]=e[r]+i:t===NS?(Q0(e[r],qb),iC(qb,qb,i,1),e[r]=wE(qb)):t===TE?iC(e[r],e[r],i,1):t===lle&&HW(e[r],e[r],i,1)},n}(),hXe=function(){function n(e,t,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&i){y7("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,Ga(t),r)},n.prototype.whenWithKeys=function(e,t,r,i){for(var a=this._tracks,s=0;s<r.length;s++){var o=r[s],l=a[o];if(!l){l=a[o]=new fXe(o);var u=void 0,c=this._getAdditiveTrack(o);if(c){var d=c.keyframes,f=d[d.length-1];u=f&&f.value,c.valType===NS&&u&&(u=wE(u))}else u=this._target[o];if(u==null)continue;e>0&&l.addKeyframe(0,xE(u),i),this._trackKeys.push(o)}l.addKeyframe(e,xE(t[o]),i)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(e);a&&(t=a)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var s=this._trackKeys[a],o=this._tracks[s],l=this._getAdditiveTrack(s),u=o.keyframes,c=u.length;if(o.prepare(i,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var d=u[c-1];d&&(t._target[o.propName]=d.rawValue),o.setFinished()}else r.push(o)}if(r.length||this._force){var f=new rXe({life:i,loop:this._loop,delay:this._delay||0,onframe:function(h){t._started=2;var p=t._additiveAnimators;if(p){for(var m=!1,v=0;v<p.length;v++)if(p[v]._clip){m=!0;break}m||(t._additiveAnimators=null)}for(var v=0;v<r.length;v++)r[v].step(t._target,h);var g=t._onframeCbs;if(g)for(var v=0;v<g.length;v++)g[v](t._target,h)},ondestroy:function(){t._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),e&&f.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return Ti(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var s=r[e[a]];s&&!s.isFinished()&&(t?s.step(this._target,1):this._started===1&&s.step(this._target,0),s.setFinished())}for(var o=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},n.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var i=0;i<t.length;i++){var a=t[i],s=this._tracks[a];if(!(!s||s.isFinished())){var o=s.keyframes,l=o[r?0:o.length-1];l&&(e[a]=xE(l.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||Ga(e);for(var r=0;r<t.length;r++){var i=t[r],a=this._tracks[i];if(a){var s=a.keyframes;if(s.length>1){var o=s.pop();a.addKeyframe(o.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},n}();const T7=hXe;function Uy(){return new Date().getTime()}var pXe=function(n){Dr(e,n);function e(t){var r=n.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,i=t.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=Uy()-this._pausedTime,i=r-this._time,a=this._head;a;){var s=a.next,o=a.step(r,i);o&&(a.ondestroy(),this.removeClip(a)),a=s}this._time=r,t||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(B6(r),!t._paused&&t.update())}B6(r)},e.prototype.start=function(){this._running||(this._time=Uy(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=Uy(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=Uy()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var i=new T7(t,r.loop);return this.addAnimator(i),i},e}(Gd);const mXe=pXe;var vXe=300,qP=oi.domSupported,jP=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=Ti(n,function(i){var a=i.replace("mouse","pointer");return t.hasOwnProperty(a)?a:i});return{mouse:n,touch:e,pointer:r}}(),GW={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},WW=!1;function V6(n){var e=n.pointerType;return e==="pen"||e==="touch"}function gXe(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function KP(n){n&&(n.zrByTouch=!0)}function yXe(n,e){return bu(n.dom,new _Xe(n,e),!0)}function ule(n,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return r}var _Xe=function(){function n(e,t){this.stopPropagation=bl,this.stopImmediatePropagation=bl,this.preventDefault=bl,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n}(),bc={mousedown:function(n){n=bu(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=bu(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=bu(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=bu(this.dom,n);var e=n.toElement||n.relatedTarget;ule(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){WW=!0,n=bu(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){WW||(n=bu(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=bu(this.dom,n),KP(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),bc.mousemove.call(this,n),bc.mousedown.call(this,n)},touchmove:function(n){n=bu(this.dom,n),KP(n),this.handler.processGesture(n,"change"),bc.mousemove.call(this,n)},touchend:function(n){n=bu(this.dom,n),KP(n),this.handler.processGesture(n,"end"),bc.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<vXe&&bc.click.call(this,n)},pointerdown:function(n){bc.mousedown.call(this,n)},pointermove:function(n){V6(n)||bc.mousemove.call(this,n)},pointerup:function(n){bc.mouseup.call(this,n)},pointerout:function(n){V6(n)||bc.mouseout.call(this,n)}};Bt(["click","dblclick","contextmenu"],function(n){bc[n]=function(e){e=bu(this.dom,e),this.trigger(n,e)}});var $6={pointermove:function(n){V6(n)||$6.mousemove.call(this,n)},pointerup:function(n){$6.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function bXe(n,e){var t=e.domHandlers;oi.pointerEventsSupported?Bt(jP.pointer,function(r){CE(e,r,function(i){t[r].call(n,i)})}):(oi.touchEventsSupported&&Bt(jP.touch,function(r){CE(e,r,function(i){t[r].call(n,i),gXe(e)})}),Bt(jP.mouse,function(r){CE(e,r,function(i){i=b7(i),e.touching||t[r].call(n,i)})}))}function SXe(n,e){oi.pointerEventsSupported?Bt(GW.pointer,t):oi.touchEventsSupported||Bt(GW.mouse,t);function t(r){function i(a){a=b7(a),ule(n,a.target)||(a=yXe(n,a),e.domHandlers[r].call(n,a))}CE(e,r,i,{capture:!0})}}function CE(n,e,t,r){n.mounted[e]=t,n.listenerOpts[e]=r,PKe(n.domTarget,e,t,r)}function XP(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&RKe(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var qW=function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n}(),xXe=function(n){Dr(e,n);function e(t,r){var i=n.call(this)||this;return i.__pointerCapturing=!1,i.dom=t,i.painterRoot=r,i._localHandlerScope=new qW(t,bc),qP&&(i._globalHandlerScope=new qW(document,$6)),bXe(i,i._localHandlerScope),i}return e.prototype.dispose=function(){XP(this._localHandlerScope),qP&&XP(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,qP&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?SXe(this,r):XP(r)}},e}(Gd);const wXe=xXe;var cle=1;oi.hasGlobalWindow&&(cle=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var a3=cle,G6=.4,W6="#333",q6="#ccc",TXe="#eee",jW=S7,KW=5e-5;function Pm(n){return n>KW||n<-KW}var Rm=[],_g=[],YP=A2(),QP=Math.abs,CXe=function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return Pm(this.rotation)||Pm(this.x)||Pm(this.y)||Pm(this.scaleX-1)||Pm(this.scaleY-1)||Pm(this.skewX)||Pm(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&(jW(r),this.invTransform=null);return}r=r||A2(),t?this.getLocalTransform(r):jW(r),e&&(t?u1(r,e,r):OKe(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(Rm);var r=Rm[0]<0?-1:1,i=Rm[1]<0?-1:1,a=((Rm[0]-r)*t+r)/Rm[0]||0,s=((Rm[1]-i)*t+i)/Rm[1]||0;e[0]*=a,e[1]*=a,e[2]*=s,e[3]*=s}this.invTransform=this.invTransform||A2(),joe(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),t=Math.sqrt(t),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(u1(_g,e.invTransform,t),t=_g);var r=this.originX,i=this.originY;(r||i)&&(YP[4]=r,YP[5]=i,u1(_g,t,YP),_g[4]-=r,_g[5]-=i,t=_g),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&Md(r,r,i),r},n.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&Md(r,r,i),r},n.prototype.getLineScale=function(){var e=this.transform;return e&&QP(e[0]-1)>1e-10&&QP(e[3]-1)>1e-10?Math.sqrt(QP(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){AXe(this,e)},n.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,i=e.originY||0,a=e.scaleX,s=e.scaleY,o=e.anchorX,l=e.anchorY,u=e.rotation||0,c=e.x,d=e.y,f=e.skewX?Math.tan(e.skewX):0,h=e.skewY?Math.tan(-e.skewY):0;if(r||i||o||l){var p=r+o,m=i+l;t[4]=-p*a-f*m*s,t[5]=-m*s-h*p*a}else t[4]=t[5]=0;return t[0]=a,t[3]=s,t[1]=h*a,t[2]=f*s,u&&x7(t,t,u),t[4]+=r+c,t[5]+=i+d,t},n.initDefaultProps=function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),n}(),E2=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function AXe(n,e){for(var t=0;t<E2.length;t++){var r=E2[t];n[r]=e[r]}}const C7=CXe;var XW={};function eu(n,e){e=e||pv;var t=XW[e];t||(t=XW[e]=new zw(500));var r=t.get(n);return r==null&&(r=W_.measureText(n,e).width,t.put(n,r)),r}function YW(n,e,t,r){var i=eu(n,e),a=A7(e),s=BS(0,i,t),o=xy(0,a,r),l=new Zi(s,o,i,a);return l}function dle(n,e,t,r){var i=((n||"")+"").split(`
`),a=i.length;if(a===1)return YW(i[0],e,t,r);for(var s=new Zi(0,0,0,0),o=0;o<i.length;o++){var l=YW(i[o],e,t,r);o===0?s.copy(l):s.union(l)}return s}function BS(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function xy(n,e,t){return t==="middle"?n-=e/2:t==="bottom"&&(n-=e),n}function A7(n){return eu("国",n)}function J1(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function fle(n,e,t){var r=e.position||"inside",i=e.distance!=null?e.distance:5,a=t.height,s=t.width,o=a/2,l=t.x,u=t.y,c="left",d="top";if(r instanceof Array)l+=J1(r[0],t.width),u+=J1(r[1],t.height),c=null,d=null;else switch(r){case"left":l-=i,u+=o,c="right",d="middle";break;case"right":l+=i+s,u+=o,d="middle";break;case"top":l+=s/2,u-=i,c="center",d="bottom";break;case"bottom":l+=s/2,u+=a+i,c="center";break;case"inside":l+=s/2,u+=o,c="center",d="middle";break;case"insideLeft":l+=i,u+=o,d="middle";break;case"insideRight":l+=s-i,u+=o,c="right",d="middle";break;case"insideTop":l+=s/2,u+=i,c="center";break;case"insideBottom":l+=s/2,u+=a-i,c="center",d="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=s-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=a-i,d="bottom";break;case"insideBottomRight":l+=s-i,u+=a-i,c="right",d="bottom";break}return n=n||{},n.x=l,n.y=u,n.align=c,n.verticalAlign=d,n}var ZP="__zr_normal__",JP=E2.concat(["ignore"]),EXe=Kp(E2,function(n,e){return n[e]=!0,n},{ignore:!1}),bg={},MXe=new Zi(0,0,0,0),E7=function(){function n(e){this.id=zoe(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=t.innerTransformable,s=void 0,o=void 0,l=!1;a.parent=i?this:null;var u=!1;if(a.copyTransform(t),r.position!=null){var c=MXe;r.layoutRect?c.copy(r.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(bg,r,c):fle(bg,r,c),a.x=bg.x,a.y=bg.y,s=bg.align,o=bg.verticalAlign;var d=r.origin;if(d&&r.rotation!=null){var f=void 0,h=void 0;d==="center"?(f=c.width*.5,h=c.height*.5):(f=J1(d[0],c.width),h=J1(d[1],c.height)),u=!0,a.originX=-a.x+f+(i?0:c.x),a.originY=-a.y+h+(i?0:c.y)}}r.rotation!=null&&(a.rotation=r.rotation);var p=r.offset;p&&(a.x+=p[0],a.y+=p[1],u||(a.originX=-p[0],a.originY=-p[1]));var m=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,y=void 0,_=void 0;m&&this.canBeInsideText()?(g=r.insideFill,y=r.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(y==null||y==="auto")&&(y=this.getInsideTextStroke(g),_=!0)):(g=r.outsideFill,y=r.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(y==null||y==="auto")&&(y=this.getOutsideStroke(g),_=!0)),g=g||"#000",(g!==v.fill||y!==v.stroke||_!==v.autoStroke||s!==v.align||o!==v.verticalAlign)&&(l=!0,v.fill=g,v.stroke=y,v.autoStroke=_,v.align=s,v.verticalAlign=o,t.setDefaultTextStyle(v)),t.__dirty|=Kl,l&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?q6:W6},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&Q0(t);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),s=0;s<3;s++)r[s]=r[s]*i+(a?0:255)*(1-i);return r[3]=1,w7(r,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},kn(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(Ur(e))for(var r=e,i=Ga(r),a=0;a<i.length;a++){var s=i[a];this.attrKV(s,e[s])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==ZP)){var s=i.targetName,o=s?t[s]:t;i.saveTo(o)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,JP)},n.prototype._savePrimaryToNormal=function(e,t,r){for(var i=0;i<r.length;i++){var a=r[i];e[a]!=null&&!(a in t)&&(t[a]=this[a])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState(ZP,!1,e)},n.prototype.useState=function(e,t,r,i){var a=e===ZP,s=this.hasState();if(!(!s&&a)){var o=this.currentStates,l=this.stateTransition;if(!(da(o,e)>=0&&(t||o.length===1))){var u;if(this.stateProxy&&!a&&(u=this.stateProxy(e)),u||(u=this.states&&this.states[e]),!u&&!a){y7("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,u,this._normalState,t,!r&&!this.__inHover&&l&&l.duration>0,l);var d=this._textContent,f=this._textGuide;return d&&d.useState(e,t,r,c),f&&f.useState(e,t,r,c),a?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Kl),u}}},n.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,s=e.length,o=s===a.length;if(o){for(var l=0;l<s;l++)if(e[l]!==a[l]){o=!1;break}}if(o)return;for(var l=0;l<s;l++){var u=e[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,e)),c||(c=this.states[u]),c&&i.push(c)}var d=i[s-1],f=!!(d&&d.hoverLayer||r);f&&this._toggleHoverLayerFlag(!0);var h=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(h),this._applyStateObj(e.join(","),h,this._normalState,!1,!t&&!this.__inHover&&p&&p.duration>0,p);var m=this._textContent,v=this._textGuide;m&&m.useStates(e,t,f),v&&v.useStates(e,t,f),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Kl)}},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=da(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},n.prototype.replaceState=function(e,t,r){var i=this.currentStates.slice(),a=da(i,e),s=da(i,t)>=0;a>=0?s?i.splice(a,1):i[a]=t:r&&!s&&i.push(t),this.useStates(i)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},r,i=0;i<e.length;i++){var a=e[i];kn(t,a),a.textConfig&&(r=r||{},kn(r,a.textConfig))}return r&&(t.textConfig=r),t},n.prototype._applyStateObj=function(e,t,r,i,a,s){var o=!(t&&i);t&&t.textConfig?(this.textConfig=kn({},i?this.textConfig:r.textConfig),kn(this.textConfig,t.textConfig)):o&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},u=!1,c=0;c<JP.length;c++){var d=JP[c],f=a&&EXe[d];t&&t[d]!=null?f?(u=!0,l[d]=t[d]):this[d]=t[d]:o&&r[d]!=null&&(f?(u=!0,l[d]=r[d]):this[d]=r[d])}if(!a)for(var c=0;c<this.animators.length;c++){var h=this.animators[c],p=h.targetName;h.getLoop()||h.__changeFinalValue(p?(t||r)[p]:t||r)}u&&this._transitionState(e,l,s)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new C7,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),kn(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=Kl;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,r){var i=e?this[e]:this,a=new T7(i,t,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},n.prototype.addAnimator=function(e,t){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(t)}).done(function(){var a=i.animators,s=da(a,e);s>=0&&a.splice(s,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var r=this.animators,i=r.length,a=[],s=0;s<i;s++){var o=r[s];!e||e===o.scope?o.stop(t):a.push(o)}return this.animators=a,this},n.prototype.animateTo=function(e,t,r){eR(this,e,t,r)},n.prototype.animateFrom=function(e,t,r){eR(this,e,t,r,!0)},n.prototype._transitionState=function(e,t,r,i){for(var a=eR(this,t,r,i),s=0;s<a.length;s++)a[s].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Kl;function t(r,i,a,s){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];o(this,l)}return this[i]},set:function(l){this[a]=l[0],this[s]=l[1],this[i]=l,o(this,l)}});function o(l,u){Object.defineProperty(u,0,{get:function(){return l[a]},set:function(c){l[a]=c}}),Object.defineProperty(u,1,{get:function(){return l[s]},set:function(c){l[s]=c}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),n}();vh(E7,Gd);vh(E7,C7);function eR(n,e,t,r,i){t=t||{};var a=[];hle(n,"",n,e,t,r,a,i);var s=a.length,o=!1,l=t.done,u=t.aborted,c=function(){o=!0,s--,s<=0&&(o?l&&l():u&&u())},d=function(){s--,s<=0&&(o?l&&l():u&&u())};s||l&&l(),a.length>0&&t.during&&a[0].during(function(p,m){t.during(m)});for(var f=0;f<a.length;f++){var h=a[f];c&&h.done(c),d&&h.aborted(d),t.force&&h.duration(t.duration),h.start(t.easing)}return a}function tR(n,e,t){for(var r=0;r<t;r++)n[r]=e[r]}function IXe(n){return El(n[0])}function DXe(n,e,t){if(El(e[t]))if(El(n[t])||(n[t]=[]),su(e[t])){var r=e[t].length;n[t].length!==r&&(n[t]=new e[t].constructor(r),tR(n[t],e[t],r))}else{var i=e[t],a=n[t],s=i.length;if(IXe(i))for(var o=i[0].length,l=0;l<s;l++)a[l]?tR(a[l],i[l],o):a[l]=Array.prototype.slice.call(i[l]);else tR(a,i,s);a.length=i.length}else n[t]=e[t]}function PXe(n,e){return n===e||El(n)&&El(e)&&RXe(n,e)}function RXe(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function hle(n,e,t,r,i,a,s,o){for(var l=Ga(r),u=i.duration,c=i.delay,d=i.additive,f=i.setToFinal,h=!Ur(a),p=n.animators,m=[],v=0;v<l.length;v++){var g=l[v],y=r[g];if(y!=null&&t[g]!=null&&(h||a[g]))if(Ur(y)&&!El(y)&&!pI(y)){if(e){o||(t[g]=y,n.updateDuringAnimation(e));continue}hle(n,g,t[g],y,i,a&&a[g],s,o)}else m.push(g);else o||(t[g]=y,n.updateDuringAnimation(e),m.push(g))}var _=m.length;if(!d&&_)for(var b=0;b<p.length;b++){var x=p[b];if(x.targetName===e){var w=x.stopTracks(m);if(w){var A=da(p,x);p.splice(A,1)}}}if(i.force||(m=Au(m,function(I){return!PXe(r[I],t[I])}),_=m.length),_>0||i.force&&!s.length){var T=void 0,C=void 0,E=void 0;if(o){C={},f&&(T={});for(var b=0;b<_;b++){var g=m[b];C[g]=t[g],f?T[g]=r[g]:t[g]=r[g]}}else if(f){E={};for(var b=0;b<_;b++){var g=m[b];E[g]=xE(t[g]),DXe(t,r,g)}}var x=new T7(t,!1,!1,d?Au(p,function(P){return P.targetName===e}):null);x.targetName=e,i.scope&&(x.scope=i.scope),f&&T&&x.whenWithKeys(0,T,m),E&&x.whenWithKeys(0,E,m),x.whenWithKeys(u??500,o?C:r,m).delay(c||0),n.addAnimator(x,e),s.push(x)}}const ple=E7;var mle=function(n){Dr(e,n);function e(t){var r=n.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===t)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var i=da(this._children,t);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(t,r){var i=this._children,a=i[r];if(t&&t!==this&&t.parent!==this&&t!==a){i[r]=t,a.parent=null;var s=this.__zr;s&&a.removeSelfFromZr(s),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,i=this._children,a=da(i,t);return a<0?this:(i.splice(a,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,i=0;i<t.length;i++){var a=t[i];r&&a.removeSelfFromZr(r),a.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var i=this._children,a=0;a<i.length;a++){var s=i[a];t.call(r,s,a)}return this},e.prototype.traverse=function(t,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],s=t.call(r,a);a.isGroup&&!s&&a.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new Zi(0,0,0,0),i=t||this._children,a=[],s=null,o=0;o<i.length;o++){var l=i[o];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(a);c?(Zi.applyTransform(r,u,c),s=s||r.clone(),s.union(r)):(s=s||u.clone(),s.union(u))}}return s||r},e}(ple);mle.prototype.type="group";const Nd=mle;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var AE={},vle={};function kXe(n){delete vle[n]}function LXe(n){if(!n)return!1;if(typeof n=="string")return i3(n,1)<G6;if(n.colorStops){for(var e=n.colorStops,t=0,r=e.length,i=0;i<r;i++)t+=i3(e[i].color,1);return t/=r,t<G6}return!1}var OXe=function(){function n(e,t,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var a=new XKe,s=r.renderer||"canvas";AE[s]||(s=Ga(AE)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var o=new AE[s](t,a,r,e),l=r.ssr||o.ssrOnly;this.storage=a,this.painter=o;var u=!oi.node&&!oi.worker&&!l?new wXe(o.getViewportRoot(),o.root):null,c=r.useCoarsePointer,d=c==null||c==="auto"?oi.touchEventsSupported:!!c,f=44,h;d&&(h=bi(r.pointerSize,f)),this.handler=new GKe(a,o,u,o.root,h),this.animation=new mXe({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(e){e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh()},n.prototype.setBackgroundColor=function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=LXe(e)},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},n.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},n.prototype.flush=function(){this._flush(!1)},n.prototype._flush=function(e){var t,r=Uy();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var i=Uy();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},n.prototype.resize=function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},n.prototype.clearAnimation=function(){this.animation.clear()},n.prototype.getWidth=function(){return this.painter.getWidth()},n.prototype.getHeight=function(){return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){return this.handler.findHover(e,t)},n.prototype.on=function(e,t,r){return this.handler.on(e,t,r),this},n.prototype.off=function(e,t){this.handler.off(e,t)},n.prototype.trigger=function(e,t){this.handler.trigger(e,t)},n.prototype.clear=function(){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Nd&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},n.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,kXe(this.id)},n}();function QW(n,e){var t=new OXe(zoe(),n,e);return vle[t.id]=t,t}function NXe(n,e){AE[n]=e}var ZW=1e-4,gle=20;function BXe(n){return n.replace(/^\s+|\s+$/g,"")}function FXe(n,e,t,r){var i=e[0],a=e[1],s=t[0],o=t[1],l=a-i,u=o-s;if(l===0)return u===0?s:(s+o)/2;if(r)if(l>0){if(n<=i)return s;if(n>=a)return o}else{if(n>=i)return s;if(n<=a)return o}else{if(n===i)return s;if(n===a)return o}return(n-i)/l*u+s}function us(n,e){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return Lr(n)?BXe(n).match(/%$/)?parseFloat(n)/100*e:parseFloat(n):n==null?NaN:+n}function UXe(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),gle),n=(+n).toFixed(e),t?n:+n}function JW(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return zXe(n)}function zXe(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,i=t>0?t:e.length,a=e.indexOf("."),s=a<0?0:i-1-a;return Math.max(0,s-r)}function HXe(n,e){var t=Kp(n,function(h,p){return h+(isNaN(p)?0:p)},0);if(t===0)return[];for(var r=Math.pow(10,e),i=Ti(n,function(h){return(isNaN(h)?0:h)/t*r*100}),a=r*100,s=Ti(i,function(h){return Math.floor(h)}),o=Kp(s,function(h,p){return h+p},0),l=Ti(i,function(h,p){return h-s[p]});o<a;){for(var u=Number.NEGATIVE_INFINITY,c=null,d=0,f=l.length;d<f;++d)l[d]>u&&(u=l[d],c=d);++s[c],l[c]=0,++o}return Ti(s,function(h){return h/r})}function VXe(n,e){var t=Math.max(JW(n),JW(e)),r=n+e;return t>gle?r:UXe(r,t)}function yle(n){var e=Math.PI*2;return(n%e+e)%e}function s3(n){return n>-ZW&&n<ZW}var $Xe=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function vI(n){if(n instanceof Date)return n;if(Lr(n)){var e=$Xe.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function o3(n){var e=parseFloat(n);return e==n&&(e!==0||!Lr(n)||n.indexOf("x")<=0)?e:NaN}function GXe(n){return!isNaN(o3(n))}function _le(){return Math.round(Math.random()*9)}function ble(n,e){return e===0?n:ble(e,n%e)}function eq(n,e){return n==null?e:e==null?n:n*e/ble(n,e)}function fl(n){throw new Error(n)}var Sle="series\0",WXe="\0_ec_\0";function Xo(n){return n instanceof Array?n:n==null?[]:[n]}function j6(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var r=0,i=t.length;r<i;r++){var a=t[r];!n.emphasis[e].hasOwnProperty(a)&&n[e].hasOwnProperty(a)&&(n.emphasis[e][a]=n[e][a])}}}var tq=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function gI(n){return Ur(n)&&!br(n)&&!(n instanceof Date)?n.value:n}function qXe(n){return Ur(n)&&!(n instanceof Array)}function jXe(n,e,t){var r=t==="normalMerge",i=t==="replaceMerge",a=t==="replaceAll";n=n||[],e=(e||[]).slice();var s=Si();Bt(e,function(l,u){if(!Ur(l)){e[u]=null;return}});var o=KXe(n,s,t);return(r||i)&&XXe(o,n,s,e),r&&YXe(o,e),r||i?QXe(o,e,i):a&&ZXe(o,e),JXe(o),o}function KXe(n,e,t){var r=[];if(t==="replaceAll")return r;for(var i=0;i<n.length;i++){var a=n[i];a&&a.id!=null&&e.set(a.id,i),r.push({existing:t==="replaceMerge"||M2(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function XXe(n,e,t,r){Bt(r,function(i,a){if(!(!i||i.id==null)){var s=cx(i.id),o=t.get(s);if(o!=null){var l=n[o];Jf(!l.newOption,'Duplicated option on id "'+s+'".'),l.newOption=i,l.existing=e[o],r[a]=null}}})}function YXe(n,e){Bt(e,function(t,r){if(!(!t||t.name==null))for(var i=0;i<n.length;i++){var a=n[i].existing;if(!n[i].newOption&&a&&(a.id==null||t.id==null)&&!M2(t)&&!M2(a)&&xle("name",a,t)){n[i].newOption=t,e[r]=null;return}}})}function QXe(n,e,t){Bt(e,function(r){if(r){for(var i,a=0;(i=n[a])&&(i.newOption||M2(i.existing)||i.existing&&r.id!=null&&!xle("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=t):n.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),a++}})}function ZXe(n,e){Bt(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function JXe(n){var e=Si();Bt(n,function(t){var r=t.existing;r&&e.set(r.id,t)}),Bt(n,function(t){var r=t.newOption;Jf(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),Bt(n,function(t,r){var i=t.existing,a=t.newOption,s=t.keyInfo;if(Ur(a)){if(s.name=a.name!=null?cx(a.name):i?i.name:Sle+r,i)s.id=cx(i.id);else if(a.id!=null)s.id=cx(a.id);else{var o=0;do s.id="\0"+s.name+"\0"+o++;while(e.get(s.id))}e.set(s.id,t)}})}function xle(n,e,t){var r=Id(e[n],null),i=Id(t[n],null);return r!=null&&i!=null&&r===i}function cx(n){return Id(n,"")}function Id(n,e){return n==null?e:Lr(n)?n:Wa(n)||I6(n)?n+"":e}function M7(n){var e=n.name;return!!(e&&e.indexOf(Sle))}function M2(n){return n&&n.id!=null&&cx(n.id).indexOf(WXe)===0}function eYe(n,e,t){Bt(n,function(r){var i=r.newOption;Ur(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=tYe(e,i,r.existing,t))})}function tYe(n,e,t,r){var i=e.type?e.type:t?t.subType:r.determineSubType(n,e);return i}function Hw(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return br(e.dataIndex)?Ti(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return br(e.name)?Ti(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function Os(){var n="__ec_inner_"+nYe++;return function(e){return e[n]||(e[n]={})}}var nYe=_le();function nR(n,e,t){var r=I7(e,t),i=r.mainTypeSpecified,a=r.queryOptionMap,s=r.others,o=s,l=t?t.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(u,c){var d=Vw(n,c,u,{useDefault:l===c,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});o[c+"Models"]=d.models,o[c+"Model"]=d.models[0]}),o}function I7(n,e){var t;if(Lr(n)){var r={};r[n+"Index"]=0,t=r}else t=n;var i=Si(),a={},s=!1;return Bt(t,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=o;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],d=(u[2]||"").toLowerCase();if(!(!c||!d||e&&e.includeMainTypes&&da(e.includeMainTypes,c)<0)){s=s||!!c;var f=i.get(c)||i.set(c,{});f[d]=o}}),{mainTypeSpecified:s,queryOptionMap:i,others:a}}var D7={useDefault:!0,enableAll:!1,enableNone:!1};function Vw(n,e,t,r){r=r||D7;var i=t.index,a=t.id,s=t.name,o={models:null,specified:i!=null||a!=null||s!=null};if(!o.specified){var l=void 0;return o.models=r.useDefault&&(l=n.getComponent(e))?[l]:[],o}return i==="none"||i===!1?(Jf(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(i==="all"&&(Jf(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=s=null),o.models=n.queryComponents({mainType:e,index:i,id:a,name:s}),o)}function wle(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function rYe(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function iYe(n){return n==="auto"?oi.domSupported?"html":"richText":n||"html"}var aYe=".",km="___EC__COMPONENT__CONTAINER___",Tle="___EC__EXTENDED_CLASS___";function _d(n){var e={main:"",sub:""};if(n){var t=n.split(aYe);e.main=t[0]||"",e.sub=t[1]||""}return e}function sYe(n){Jf(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function oYe(n){return!!(n&&n[Tle])}function P7(n,e){n.$constructor=n,n.extend=function(t){var r=this,i;return lYe(r)?i=function(a){Dr(s,a);function s(){return a.apply(this,arguments)||this}return s}(r):(i=function(){(t.$constructor||r).apply(this,arguments)},iKe(i,this)),kn(i.prototype,t),i[Tle]=!0,i.extend=this.extend,i.superCall=dYe,i.superApply=fYe,i.superClass=r,i}}function lYe(n){return Gi(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function Cle(n,e){n.extend=e.extend}var uYe=Math.round(Math.random()*10);function cYe(n){var e=["__\0is_clz",uYe++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function dYe(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(n,t)}function fYe(n,e,t){return this.superClass.prototype[e].apply(n,t)}function R7(n){var e={};n.registerClass=function(r){var i=r.type||r.prototype.type;if(i){sYe(i),r.prototype.type=i;var a=_d(i);if(!a.sub)e[a.main]=r;else if(a.sub!==km){var s=t(a);s[a.sub]=r}}return r},n.getClass=function(r,i,a){var s=e[r];if(s&&s[km]&&(s=i?s[i]:null),a&&!s)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return s},n.getClassesByMainType=function(r){var i=_d(r),a=[],s=e[i.main];return s&&s[km]?Bt(s,function(o,l){l!==km&&a.push(o)}):a.push(s),a},n.hasClass=function(r){var i=_d(r);return!!e[i.main]},n.getAllClassMainTypes=function(){var r=[];return Bt(e,function(i,a){r.push(a)}),r},n.hasSubTypes=function(r){var i=_d(r),a=e[i.main];return a&&a[km]};function t(r){var i=e[r.main];return(!i||!i[km])&&(i=e[r.main]={},i[km]=!0),i}}function I2(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(r,i,a){for(var s={},o=0;o<n.length;o++){var l=n[o][1];if(!(i&&da(i,l)>=0||a&&da(a,l)<0)){var u=r.getShallow(l,e);u!=null&&(s[n[o][0]]=u)}}return s}}var hYe=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],pYe=I2(hYe),mYe=function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return pYe(this,e,t)},n}(),K6=new zw(50);function vYe(n){if(typeof n=="string"){var e=K6.get(n);return e&&e.image}else return n}function Ale(n,e,t,r,i){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var a=K6.get(n),s={hostEl:t,cb:r,cbPayload:i};return a?(e=a.image,!yI(e)&&a.pending.push(s)):(e=W_.loadImage(n,nq,nq),e.__zrImageSrc=n,K6.put(n,e.__cachedImgObj={image:e,pending:[s]})),e}else return n;else return e}function nq(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function yI(n){return n&&n.width&&n.height}var rR=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function gYe(n,e,t,r,i){if(!e)return"";var a=(n+"").split(`
`);i=Ele(e,t,r,i);for(var s=0,o=a.length;s<o;s++)a[s]=Mle(a[s],i);return a.join(`
`)}function Ele(n,e,t,r){r=r||{};var i=kn({},r);i.font=e,t=bi(t,"..."),i.maxIterations=bi(r.maxIterations,2);var a=i.minChar=bi(r.minChar,0);i.cnCharWidth=eu("国",e);var s=i.ascCharWidth=eu("a",e);i.placeholder=bi(r.placeholder,"");for(var o=n=Math.max(0,n-1),l=0;l<a&&o>=s;l++)o-=s;var u=eu(t,e);return u>o&&(t="",u=0),o=n-u,i.ellipsis=t,i.ellipsisWidth=u,i.contentWidth=o,i.containerWidth=n,i}function Mle(n,e){var t=e.containerWidth,r=e.font,i=e.contentWidth;if(!t)return"";var a=eu(n,r);if(a<=t)return n;for(var s=0;;s++){if(a<=i||s>=e.maxIterations){n+=e.ellipsis;break}var o=s===0?yYe(n,i,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(n.length*i/a):0;n=n.substr(0,o),a=eu(n,r)}return n===""&&(n=e.placeholder),n}function yYe(n,e,t,r){for(var i=0,a=0,s=n.length;a<s&&i<e;a++){var o=n.charCodeAt(a);i+=0<=o&&o<=127?t:r}return a}function _Ye(n,e){n!=null&&(n+="");var t=e.overflow,r=e.padding,i=e.font,a=t==="truncate",s=A7(i),o=bi(e.lineHeight,s),l=!!e.backgroundColor,u=e.lineOverflow==="truncate",c=e.width,d;c!=null&&(t==="break"||t==="breakAll")?d=n?Ile(n,e.font,c,t==="breakAll",0).lines:[]:d=n?n.split(`
`):[];var f=d.length*o,h=bi(e.height,f);if(f>h&&u){var p=Math.floor(h/o);d=d.slice(0,p)}if(n&&a&&c!=null)for(var m=Ele(c,i,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),v=0;v<d.length;v++)d[v]=Mle(d[v],m);for(var g=h,y=0,v=0;v<d.length;v++)y=Math.max(eu(d[v],i),y);c==null&&(c=y);var _=y;return r&&(g+=r[0]+r[2],_+=r[1]+r[3],c+=r[1]+r[3]),l&&(_=c),{lines:d,height:h,outerWidth:_,outerHeight:g,lineHeight:o,calculatedLineHeight:s,contentWidth:y,contentHeight:f,width:c}}var bYe=function(){function n(){}return n}(),rq=function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n}(),SYe=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return n}();function xYe(n,e){var t=new SYe;if(n!=null&&(n+=""),!n)return t;for(var r=e.width,i=e.height,a=e.overflow,s=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,o=rR.lastIndex=0,l;(l=rR.exec(n))!=null;){var u=l.index;u>o&&iR(t,n.substring(o,u),e,s),iR(t,l[2],e,s,l[1]),o=rR.lastIndex}o<n.length&&iR(t,n.substring(o,n.length),e,s);var c=[],d=0,f=0,h=e.padding,p=a==="truncate",m=e.lineOverflow==="truncate";function v(U,B,$){U.width=B,U.lineHeight=$,d+=$,f=Math.max(f,B)}e:for(var g=0;g<t.lines.length;g++){for(var y=t.lines[g],_=0,b=0,x=0;x<y.tokens.length;x++){var w=y.tokens[x],A=w.styleName&&e.rich[w.styleName]||{},T=w.textPadding=A.padding,C=T?T[1]+T[3]:0,E=w.font=A.font||e.font;w.contentHeight=A7(E);var I=bi(A.height,w.contentHeight);if(w.innerHeight=I,T&&(I+=T[0]+T[2]),w.height=I,w.lineHeight=sx(A.lineHeight,e.lineHeight,I),w.align=A&&A.align||e.align,w.verticalAlign=A&&A.verticalAlign||"middle",m&&i!=null&&d+w.lineHeight>i){x>0?(y.tokens=y.tokens.slice(0,x),v(y,b,_),t.lines=t.lines.slice(0,g+1)):t.lines=t.lines.slice(0,g);break e}var P=A.width,L=P==null||P==="auto";if(typeof P=="string"&&P.charAt(P.length-1)==="%")w.percentWidth=P,c.push(w),w.contentWidth=eu(w.text,E);else{if(L){var N=A.backgroundColor,F=N&&N.image;F&&(F=vYe(F),yI(F)&&(w.width=Math.max(w.width,F.width*I/F.height)))}var k=p&&r!=null?r-b:null;k!=null&&k<w.width?!L||k<C?(w.text="",w.width=w.contentWidth=0):(w.text=gYe(w.text,k-C,E,e.ellipsis,{minChar:e.truncateMinChar}),w.width=w.contentWidth=eu(w.text,E)):w.contentWidth=eu(w.text,E)}w.width+=C,b+=w.width,A&&(_=Math.max(_,w.lineHeight))}v(y,b,_)}t.outerWidth=t.width=bi(r,f),t.outerHeight=t.height=bi(i,d),t.contentHeight=d,t.contentWidth=f,h&&(t.outerWidth+=h[1]+h[3],t.outerHeight+=h[0]+h[2]);for(var g=0;g<c.length;g++){var w=c[g],H=w.percentWidth;w.width=parseInt(H,10)/100*t.width}return t}function iR(n,e,t,r,i){var a=e==="",s=i&&t.rich[i]||{},o=n.lines,l=s.font||t.font,u=!1,c,d;if(r){var f=s.padding,h=f?f[1]+f[3]:0;if(s.width!=null&&s.width!=="auto"){var p=J1(s.width,r.width)+h;o.length>0&&p+r.accumWidth>r.width&&(c=e.split(`
`),u=!0),r.accumWidth=p}else{var m=Ile(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=m.accumWidth+h,d=m.linesWidths,c=m.lines}}else c=e.split(`
`);for(var v=0;v<c.length;v++){var g=c[v],y=new bYe;if(y.styleName=i,y.text=g,y.isLineHolder=!g&&!a,typeof s.width=="number"?y.width=s.width:y.width=d?d[v]:eu(g,l),!v&&!u){var _=(o[o.length-1]||(o[0]=new rq)).tokens,b=_.length;b===1&&_[0].isLineHolder?_[0]=y:(g||!b||a)&&_.push(y)}else o.push(new rq([y]))}}function wYe(n){var e=n.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var TYe=Kp(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function CYe(n){return wYe(n)?!!TYe[n]:!0}function Ile(n,e,t,r,i){for(var a=[],s=[],o="",l="",u=0,c=0,d=0;d<n.length;d++){var f=n.charAt(d);if(f===`
`){l&&(o+=l,c+=u),a.push(o),s.push(c),o="",l="",u=0,c=0;continue}var h=eu(f,e),p=r?!1:!CYe(f);if(a.length?c+h>t:i+c+h>t){c?(o||l)&&(p?(o||(o=l,l="",u=0,c=u),a.push(o),s.push(c-u),l+=f,u+=h,o="",c=u):(l&&(o+=l,l="",u=0),a.push(o),s.push(c),o=f,c=h)):p?(a.push(l),s.push(u),l=f,u=h):(a.push(f),s.push(h));continue}c+=h,p?(l+=f,u+=h):(l&&(o+=l,l="",u=0),o+=f)}return!a.length&&!o&&(o=n,l="",u=0),l&&(o+=l),o&&(a.push(o),s.push(c)),a.length===1&&(c+=i),{accumWidth:c,lines:a,linesWidths:s}}var X6="__zr_style_"+Math.round(Math.random()*10),Z0={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},_I={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Z0[X6]=!0;var iq=["z","z2","invisible"],AYe=["invisible"],EYe=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var r=Ga(t),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(t[a]):n.prototype.attrKV.call(this,a,t[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,i,a){var s=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&MYe(this,t,r)||s&&!s[0]&&!s[3])return!1;if(i&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,s=a.shadowBlur||0,o=a.shadowOffsetX||0,l=a.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Zi(0,0,0,0)),r?Zi.applyTransform(t,i,r):t.copy(i),(s||o||l)&&(t.width+=s*2+Math.abs(o),t.height+=s*2+Math.abs(l),t.x=Math.min(t.x,t.x+o-s),t.y=Math.min(t.y,t.y+l-s));var u=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-u),t.y=Math.floor(t.y-u),t.width=Math.ceil(t.width+1+u*2),t.height=Math.ceil(t.height+1+u*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Zi(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?n.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:kn(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=OS,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&OS)},e.prototype.styleUpdated=function(){this.__dirty&=~OS},e.prototype.createStyle=function(t){return mI(Z0,t)},e.prototype.useStyle=function(t){t[X6]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[X6]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,iq)},e.prototype._applyStateObj=function(t,r,i,a,s,o){n.prototype._applyStateObj.call(this,t,r,i,a,s,o);var l=!(r&&a),u;if(r&&r.style?s?a?u=r.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,r.style)):(u=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(u,r.style)):l&&(u=i.style),u)if(s){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var d=Ga(c),f=0;f<d.length;f++){var h=d[f];h in u&&(u[h]=u[h],this.style[h]=c[h])}for(var p=Ga(u),f=0;f<p.length;f++){var h=p[f];this.style[h]=this.style[h]}this._transitionState(t,{style:u},o,this.getAnimationStyleProps())}else this.useStyle(u);for(var m=this.__inHover?AYe:iq,f=0;f<m.length;f++){var h=m[f];r&&r[h]!=null?this[h]=r[h]:l&&i[h]!=null&&(this[h]=i[h])}},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var s=t[a];s.style&&(i=i||{},this._mergeStyle(i,s.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(t,r){return kn(t,r),t},e.prototype.getAnimationStyleProps=function(){return _I},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=Kl|OS}(),e}(ple),aR=new Zi(0,0,0,0),sR=new Zi(0,0,0,0);function MYe(n,e,t){return aR.copy(n.getBoundingRect()),n.transform&&aR.applyTransform(n.transform),sR.width=e,sR.height=t,!aR.intersect(sR)}const $w=EYe;var Iu=Math.min,Du=Math.max,oR=Math.sin,lR=Math.cos,Lm=Math.PI*2,oC=q_(),lC=q_(),uC=q_();function aq(n,e,t,r,i,a){i[0]=Iu(n,t),i[1]=Iu(e,r),a[0]=Du(n,t),a[1]=Du(e,r)}var sq=[],oq=[];function IYe(n,e,t,r,i,a,s,o,l,u){var c=rle,d=Vs,f=c(n,t,i,s,sq);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var h=0;h<f;h++){var p=d(n,t,i,s,sq[h]);l[0]=Iu(p,l[0]),u[0]=Du(p,u[0])}f=c(e,r,a,o,oq);for(var h=0;h<f;h++){var m=d(e,r,a,o,oq[h]);l[1]=Iu(m,l[1]),u[1]=Du(m,u[1])}l[0]=Iu(n,l[0]),u[0]=Du(n,u[0]),l[0]=Iu(s,l[0]),u[0]=Du(s,u[0]),l[1]=Iu(e,l[1]),u[1]=Du(e,u[1]),l[1]=Iu(o,l[1]),u[1]=Du(o,u[1])}function DYe(n,e,t,r,i,a,s,o){var l=ile,u=ho,c=Du(Iu(l(n,t,i),1),0),d=Du(Iu(l(e,r,a),1),0),f=u(n,t,i,c),h=u(e,r,a,d);s[0]=Iu(n,i,f),s[1]=Iu(e,a,h),o[0]=Du(n,i,f),o[1]=Du(e,a,h)}function PYe(n,e,t,r,i,a,s,o,l){var u=By,c=Fy,d=Math.abs(i-a);if(d%Lm<1e-4&&d>1e-4){o[0]=n-t,o[1]=e-r,l[0]=n+t,l[1]=e+r;return}if(oC[0]=lR(i)*t+n,oC[1]=oR(i)*r+e,lC[0]=lR(a)*t+n,lC[1]=oR(a)*r+e,u(o,oC,lC),c(l,oC,lC),i=i%Lm,i<0&&(i=i+Lm),a=a%Lm,a<0&&(a=a+Lm),i>a&&!s?a+=Lm:i<a&&s&&(i+=Lm),s){var f=a;a=i,i=f}for(var h=0;h<a;h+=Math.PI/2)h>i&&(uC[0]=lR(h)*t+n,uC[1]=oR(h)*r+e,u(o,uC,o),c(l,uC,l))}var Bi={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Om=[],Nm=[],Zc=[],Dh=[],Jc=[],ed=[],uR=Math.min,cR=Math.max,Bm=Math.cos,Fm=Math.sin,Jd=Math.abs,Y6=Math.PI,ip=Y6*2,dR=typeof Float32Array<"u",jb=[];function fR(n){var e=Math.round(n/Y6*1e8)/1e8;return e%2*Y6}function RYe(n,e){var t=fR(n[0]);t<0&&(t+=ip);var r=t-n[0],i=n[1];i+=r,!e&&i-t>=ip?i=t+ip:e&&t-i>=ip?i=t-ip:!e&&t>i?i=t+(ip-fR(t-i)):e&&t<i&&(i=t-(ip-fR(i-t))),n[0]=t,n[1]=i}var kYe=function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=Jd(r/a3/e)||0,this._uy=Jd(r/a3/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(Bi.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var r=Jd(e-this._xi),i=Jd(t-this._yi),a=r>this._ux||i>this._uy;if(this.addData(Bi.L,e,t),this._ctx&&a&&this._ctx.lineTo(e,t),a)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var s=r*r+i*i;s>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=s)}return this},n.prototype.bezierCurveTo=function(e,t,r,i,a,s){return this._drawPendingPt(),this.addData(Bi.C,e,t,r,i,a,s),this._ctx&&this._ctx.bezierCurveTo(e,t,r,i,a,s),this._xi=a,this._yi=s,this},n.prototype.quadraticCurveTo=function(e,t,r,i){return this._drawPendingPt(),this.addData(Bi.Q,e,t,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,i),this._xi=r,this._yi=i,this},n.prototype.arc=function(e,t,r,i,a,s){this._drawPendingPt(),jb[0]=i,jb[1]=a,RYe(jb,s),i=jb[0],a=jb[1];var o=a-i;return this.addData(Bi.A,e,t,r,r,i,o,0,s?0:1),this._ctx&&this._ctx.arc(e,t,r,i,a,s),this._xi=Bm(a)*r+e,this._yi=Fm(a)*r+t,this},n.prototype.arcTo=function(e,t,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,i,a),this},n.prototype.rect=function(e,t,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,i),this.addData(Bi.R,e,t,r,i),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(Bi.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&dR&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t},n.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,r=0,i=this._len,a=0;a<t;a++)r+=e[a].len();dR&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<t;a++)for(var s=e[a].data,o=0;o<s.length;o++)this.data[i++]=s[o];this._len=i},n.prototype.addData=function(e,t,r,i,a,s,o,l,u){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var d=0;d<arguments.length;d++)c[this._len++]=arguments[d]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,dR&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){Zc[0]=Zc[1]=Jc[0]=Jc[1]=Number.MAX_VALUE,Dh[0]=Dh[1]=ed[0]=ed[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,i=0,a=0,s;for(s=0;s<this._len;){var o=e[s++],l=s===1;switch(l&&(t=e[s],r=e[s+1],i=t,a=r),o){case Bi.M:t=i=e[s++],r=a=e[s++],Jc[0]=i,Jc[1]=a,ed[0]=i,ed[1]=a;break;case Bi.L:aq(t,r,e[s],e[s+1],Jc,ed),t=e[s++],r=e[s++];break;case Bi.C:IYe(t,r,e[s++],e[s++],e[s++],e[s++],e[s],e[s+1],Jc,ed),t=e[s++],r=e[s++];break;case Bi.Q:DYe(t,r,e[s++],e[s++],e[s],e[s+1],Jc,ed),t=e[s++],r=e[s++];break;case Bi.A:var u=e[s++],c=e[s++],d=e[s++],f=e[s++],h=e[s++],p=e[s++]+h;s+=1;var m=!e[s++];l&&(i=Bm(h)*d+u,a=Fm(h)*f+c),PYe(u,c,d,f,h,p,m,Jc,ed),t=Bm(p)*d+u,r=Fm(p)*f+c;break;case Bi.R:i=t=e[s++],a=r=e[s++];var v=e[s++],g=e[s++];aq(i,a,i+v,a+g,Jc,ed);break;case Bi.Z:t=i,r=a;break}By(Zc,Zc,Jc),Fy(Dh,Dh,ed)}return s===0&&(Zc[0]=Zc[1]=Dh[0]=Dh[1]=0),new Zi(Zc[0],Zc[1],Dh[0]-Zc[0],Dh[1]-Zc[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,i=this._uy,a=0,s=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,d=0,f=0;f<t;){var h=e[f++],p=f===1;p&&(a=e[f],s=e[f+1],o=a,l=s);var m=-1;switch(h){case Bi.M:a=o=e[f++],s=l=e[f++];break;case Bi.L:{var v=e[f++],g=e[f++],y=v-a,_=g-s;(Jd(y)>r||Jd(_)>i||f===t-1)&&(m=Math.sqrt(y*y+_*_),a=v,s=g);break}case Bi.C:{var b=e[f++],x=e[f++],v=e[f++],g=e[f++],w=e[f++],A=e[f++];m=QKe(a,s,b,x,v,g,w,A,10),a=w,s=A;break}case Bi.Q:{var b=e[f++],x=e[f++],v=e[f++],g=e[f++];m=eXe(a,s,b,x,v,g,10),a=v,s=g;break}case Bi.A:var T=e[f++],C=e[f++],E=e[f++],I=e[f++],P=e[f++],L=e[f++],N=L+P;f+=1,e[f++],p&&(o=Bm(P)*E+T,l=Fm(P)*I+C),m=cR(E,I)*uR(ip,Math.abs(L)),a=Bm(N)*E+T,s=Fm(N)*I+C;break;case Bi.R:{o=a=e[f++],l=s=e[f++];var F=e[f++],k=e[f++];m=F*2+k*2;break}case Bi.Z:{var y=o-a,_=l-s;m=Math.sqrt(y*y+_*_),a=o,s=l;break}}m>=0&&(u[d++]=m,c+=m)}return this._pathLen=c,c},n.prototype.rebuildPath=function(e,t){var r=this.data,i=this._ux,a=this._uy,s=this._len,o,l,u,c,d,f,h=t<1,p,m,v=0,g=0,y,_=0,b,x;if(!(h&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,m=this._pathLen,y=t*m,!y)))e:for(var w=0;w<s;){var A=r[w++],T=w===1;switch(T&&(u=r[w],c=r[w+1],o=u,l=c),A!==Bi.L&&_>0&&(e.lineTo(b,x),_=0),A){case Bi.M:o=u=r[w++],l=c=r[w++],e.moveTo(u,c);break;case Bi.L:{d=r[w++],f=r[w++];var C=Jd(d-u),E=Jd(f-c);if(C>i||E>a){if(h){var I=p[g++];if(v+I>y){var P=(y-v)/I;e.lineTo(u*(1-P)+d*P,c*(1-P)+f*P);break e}v+=I}e.lineTo(d,f),u=d,c=f,_=0}else{var L=C*C+E*E;L>_&&(b=d,x=f,_=L)}break}case Bi.C:{var N=r[w++],F=r[w++],k=r[w++],H=r[w++],U=r[w++],B=r[w++];if(h){var I=p[g++];if(v+I>y){var P=(y-v)/I;n3(u,N,k,U,P,Om),n3(c,F,H,B,P,Nm),e.bezierCurveTo(Om[1],Nm[1],Om[2],Nm[2],Om[3],Nm[3]);break e}v+=I}e.bezierCurveTo(N,F,k,H,U,B),u=U,c=B;break}case Bi.Q:{var N=r[w++],F=r[w++],k=r[w++],H=r[w++];if(h){var I=p[g++];if(v+I>y){var P=(y-v)/I;r3(u,N,k,P,Om),r3(c,F,H,P,Nm),e.quadraticCurveTo(Om[1],Nm[1],Om[2],Nm[2]);break e}v+=I}e.quadraticCurveTo(N,F,k,H),u=k,c=H;break}case Bi.A:var $=r[w++],ee=r[w++],re=r[w++],ne=r[w++],ae=r[w++],pe=r[w++],de=r[w++],me=!r[w++],ke=re>ne?re:ne,Be=Jd(re-ne)>.001,Xe=ae+pe,Ye=!1;if(h){var I=p[g++];v+I>y&&(Xe=ae+pe*(y-v)/I,Ye=!0),v+=I}if(Be&&e.ellipse?e.ellipse($,ee,re,ne,de,ae,Xe,me):e.arc($,ee,ke,ae,Xe,me),Ye)break e;T&&(o=Bm(ae)*re+$,l=Fm(ae)*ne+ee),u=Bm(Xe)*re+$,c=Fm(Xe)*ne+ee;break;case Bi.R:o=u=r[w],l=c=r[w+1],d=r[w++],f=r[w++];var Y=r[w++],he=r[w++];if(h){var I=p[g++];if(v+I>y){var le=y-v;e.moveTo(d,f),e.lineTo(d+uR(le,Y),f),le-=Y,le>0&&e.lineTo(d+Y,f+uR(le,he)),le-=he,le>0&&e.lineTo(d+cR(Y-le,0),f+he),le-=Y,le>0&&e.lineTo(d,f+cR(he-le,0));break e}v+=I}e.rect(d,f,Y,he);break;case Bi.Z:if(h){var I=p[g++];if(v+I>y){var P=(y-v)/I;e.lineTo(u*(1-P)+o*P,c*(1-P)+l*P);break e}v+=I}e.closePath(),u=o,c=l}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.CMD=Bi,n.initDefaultProps=function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),n}();const mv=kYe;function Sg(n,e,t,r,i,a,s){if(i===0)return!1;var o=i,l=0,u=n;if(s>e+o&&s>r+o||s<e-o&&s<r-o||a>n+o&&a>t+o||a<n-o&&a<t-o)return!1;if(n!==t)l=(e-r)/(n-t),u=(n*r-t*e)/(n-t);else return Math.abs(a-n)<=o/2;var c=l*a-s+u,d=c*c/(l*l+1);return d<=o/2*o/2}function LYe(n,e,t,r,i,a,s,o,l,u,c){if(l===0)return!1;var d=l;if(c>e+d&&c>r+d&&c>a+d&&c>o+d||c<e-d&&c<r-d&&c<a-d&&c<o-d||u>n+d&&u>t+d&&u>i+d&&u>s+d||u<n-d&&u<t-d&&u<i-d&&u<s-d)return!1;var f=YKe(n,e,t,r,i,a,s,o,u,c,null);return f<=d/2}function OYe(n,e,t,r,i,a,s,o,l){if(s===0)return!1;var u=s;if(l>e+u&&l>r+u&&l>a+u||l<e-u&&l<r-u&&l<a-u||o>n+u&&o>t+u&&o>i+u||o<n-u&&o<t-u&&o<i-u)return!1;var c=JKe(n,e,t,r,i,a,o,l,null);return c<=u/2}var lq=Math.PI*2;function cC(n){return n%=lq,n<0&&(n+=lq),n}var Kb=Math.PI*2;function NYe(n,e,t,r,i,a,s,o,l){if(s===0)return!1;var u=s;o-=n,l-=e;var c=Math.sqrt(o*o+l*l);if(c-u>t||c+u<t)return!1;if(Math.abs(r-i)%Kb<1e-4)return!0;if(a){var d=r;r=cC(i),i=cC(d)}else r=cC(r),i=cC(i);r>i&&(i+=Kb);var f=Math.atan2(l,o);return f<0&&(f+=Kb),f>=r&&f<=i||f+Kb>=r&&f+Kb<=i}function Um(n,e,t,r,i,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var s=(a-e)/(r-e),o=r<e?1:-1;(s===1||s===0)&&(o=r<e?.5:-.5);var l=s*(t-n)+n;return l===i?1/0:l>i?o:0}var Ph=mv.CMD,zm=Math.PI*2,BYe=1e-4;function FYe(n,e){return Math.abs(n-e)<BYe}var No=[-1,-1,-1],wu=[-1,-1];function UYe(){var n=wu[0];wu[0]=wu[1],wu[1]=n}function zYe(n,e,t,r,i,a,s,o,l,u){if(u>e&&u>r&&u>a&&u>o||u<e&&u<r&&u<a&&u<o)return 0;var c=nle(e,r,a,o,u,No);if(c===0)return 0;for(var d=0,f=-1,h=void 0,p=void 0,m=0;m<c;m++){var v=No[m],g=v===0||v===1?.5:1,y=Vs(n,t,i,s,v);y<l||(f<0&&(f=rle(e,r,a,o,wu),wu[1]<wu[0]&&f>1&&UYe(),h=Vs(e,r,a,o,wu[0]),f>1&&(p=Vs(e,r,a,o,wu[1]))),f===2?v<wu[0]?d+=h<e?g:-g:v<wu[1]?d+=p<h?g:-g:d+=o<p?g:-g:v<wu[0]?d+=h<e?g:-g:d+=o<h?g:-g)}return d}function HYe(n,e,t,r,i,a,s,o){if(o>e&&o>r&&o>a||o<e&&o<r&&o<a)return 0;var l=ZKe(e,r,a,o,No);if(l===0)return 0;var u=ile(e,r,a);if(u>=0&&u<=1){for(var c=0,d=ho(e,r,a,u),f=0;f<l;f++){var h=No[f]===0||No[f]===1?.5:1,p=ho(n,t,i,No[f]);p<s||(No[f]<u?c+=d<e?h:-h:c+=a<d?h:-h)}return c}else{var h=No[0]===0||No[0]===1?.5:1,p=ho(n,t,i,No[0]);return p<s?0:a<e?h:-h}}function VYe(n,e,t,r,i,a,s,o){if(o-=e,o>t||o<-t)return 0;var l=Math.sqrt(t*t-o*o);No[0]=-l,No[1]=l;var u=Math.abs(r-i);if(u<1e-4)return 0;if(u>=zm-1e-4){r=0,i=zm;var c=a?1:-1;return s>=No[0]+n&&s<=No[1]+n?c:0}if(r>i){var d=r;r=i,i=d}r<0&&(r+=zm,i+=zm);for(var f=0,h=0;h<2;h++){var p=No[h];if(p+n>s){var m=Math.atan2(o,p),c=a?1:-1;m<0&&(m=zm+m),(m>=r&&m<=i||m+zm>=r&&m+zm<=i)&&(m>Math.PI/2&&m<Math.PI*1.5&&(c=-c),f+=c)}}return f}function Dle(n,e,t,r,i){for(var a=n.data,s=n.len(),o=0,l=0,u=0,c=0,d=0,f,h,p=0;p<s;){var m=a[p++],v=p===1;switch(m===Ph.M&&p>1&&(t||(o+=Um(l,u,c,d,r,i))),v&&(l=a[p],u=a[p+1],c=l,d=u),m){case Ph.M:c=a[p++],d=a[p++],l=c,u=d;break;case Ph.L:if(t){if(Sg(l,u,a[p],a[p+1],e,r,i))return!0}else o+=Um(l,u,a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Ph.C:if(t){if(LYe(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else o+=zYe(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Ph.Q:if(t){if(OYe(l,u,a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else o+=HYe(l,u,a[p++],a[p++],a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Ph.A:var g=a[p++],y=a[p++],_=a[p++],b=a[p++],x=a[p++],w=a[p++];p+=1;var A=!!(1-a[p++]);f=Math.cos(x)*_+g,h=Math.sin(x)*b+y,v?(c=f,d=h):o+=Um(l,u,f,h,r,i);var T=(r-g)*b/_+g;if(t){if(NYe(g,y,b,x,x+w,A,e,T,i))return!0}else o+=VYe(g,y,b,x,x+w,A,T,i);l=Math.cos(x+w)*_+g,u=Math.sin(x+w)*b+y;break;case Ph.R:c=l=a[p++],d=u=a[p++];var C=a[p++],E=a[p++];if(f=c+C,h=d+E,t){if(Sg(c,d,f,d,e,r,i)||Sg(f,d,f,h,e,r,i)||Sg(f,h,c,h,e,r,i)||Sg(c,h,c,d,e,r,i))return!0}else o+=Um(f,d,f,h,r,i),o+=Um(c,h,c,d,r,i);break;case Ph.Z:if(t){if(Sg(l,u,c,d,e,r,i))return!0}else o+=Um(l,u,c,d,r,i);l=c,u=d;break}}return!t&&!FYe(u,d)&&(o+=Um(l,u,c,d,r,i)||0),o!==0}function $Ye(n,e,t){return Dle(n,0,!1,e,t)}function GYe(n,e,t,r){return Dle(n,e,!0,t,r)}var Ple=Aa({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Z0),WYe={style:Aa({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},_I.style)},hR=E2.concat(["invisible","culling","z","z2","zlevel","parent"]),qYe=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){t.buildPath(l,t.shape)}),i.silent=!0;var a=i.style;for(var s in r)a[s]!==r[s]&&(a[s]=r[s]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var o=0;o<hR.length;++o)i[hR[o]]=this[hR[o]];i.__dirty|=Kl}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=Ga(t);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var s=r[a],o=t[s];s==="style"?this.style?kn(this.style,o):this.useStyle(o):s==="shape"?kn(this.shape,o):n.prototype.attrKV.call(this,s,o)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(Lr(t)){var r=i3(t,0);return r>.5?W6:r>.2?TXe:q6}else if(t)return q6}return W6},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(Lr(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),s=i3(t,0)<G6;if(a===s)return r}},e.prototype.buildPath=function(t,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~Sy},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new mv(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,i=!t;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var s=this.path;(a||this.__dirty&Sy)&&(s.beginPath(),this.buildPath(s,this.shape,!1),this.pathUpdated()),t=s.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||i){o.copy(t);var l=r.strokeNoScale?this.getLineScale():1,u=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c??4)}l>1e-10&&(o.width+=u/l,o.height+=u/l,o.x-=u/l/2,o.y-=u/l/2)}return o}return t},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect(),s=this.style;if(t=i[0],r=i[1],a.contain(t,r)){var o=this.path;if(this.hasStroke()){var l=s.lineWidth,u=s.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),GYe(o,l/u,t,r)))return!0}if(this.hasFill())return $Ye(o,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Sy,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):n.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var i=this.shape;return i||(i=this.shape={}),typeof t=="string"?i[t]=r:kn(i,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Sy)},e.prototype.createStyle=function(t){return mI(Ple,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=kn({},this.shape))},e.prototype._applyStateObj=function(t,r,i,a,s,o){n.prototype._applyStateObj.call(this,t,r,i,a,s,o);var l=!(r&&a),u;if(r&&r.shape?s?a?u=r.shape:(u=kn({},i.shape),kn(u,r.shape)):(u=kn({},a?this.shape:i.shape),kn(u,r.shape)):l&&(u=i.shape),u)if(s){this.shape=kn({},this.shape);for(var c={},d=Ga(u),f=0;f<d.length;f++){var h=d[f];typeof u[h]=="object"?this.shape[h]=u[h]:c[h]=u[h]}this._transitionState(t,{shape:c},o)}else this.shape=u,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var s=t[a];s.shape&&(i=i||{},this._mergeStyle(i,s.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return WYe},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=function(a){Dr(s,a);function s(o){var l=a.call(this,o)||this;return t.init&&t.init.call(l,o),l}return s.prototype.getDefaultStyle=function(){return Mi(t.style)},s.prototype.getDefaultShape=function(){return Mi(t.shape)},s}(e);for(var i in t)typeof t[i]=="function"&&(r.prototype[i]=t[i]);return r},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=Kl|OS|Sy}(),e}($w);const pa=qYe;var jYe=Aa({strokeFirst:!0,font:pv,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Ple),Rle=function(n){Dr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return r!=null&&r!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return mI(jYe,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var r=t.text;r!=null?r+="":r="";var i=dle(r,t.font,t.textAlign,t.textBaseline);if(i.x+=t.x||0,i.y+=t.y||0,this.hasStroke()){var a=t.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}($w);Rle.prototype.type="tspan";const Q6=Rle;var KYe=Aa({x:0,y:0},Z0),XYe={style:Aa({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},_I.style)};function YYe(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var kle=function(n){Dr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return mI(KYe,t)},e.prototype._getSize=function(t){var r=this.style,i=r[t];if(i!=null)return i;var a=YYe(r.image)?r.image:this.__image;if(!a)return 0;var s=t==="width"?"height":"width",o=r[s];return o==null?a[t]:a[t]/a[s]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return XYe},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Zi(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}($w);kle.prototype.type="image";const j_=kle;function QYe(n,e){var t=e.x,r=e.y,i=e.width,a=e.height,s=e.r,o,l,u,c;i<0&&(t=t+i,i=-i),a<0&&(r=r+a,a=-a),typeof s=="number"?o=l=u=c=s:s instanceof Array?s.length===1?o=l=u=c=s[0]:s.length===2?(o=u=s[0],l=c=s[1]):s.length===3?(o=s[0],l=c=s[1],u=s[2]):(o=s[0],l=s[1],u=s[2],c=s[3]):o=l=u=c=0;var d;o+l>i&&(d=o+l,o*=i/d,l*=i/d),u+c>i&&(d=u+c,u*=i/d,c*=i/d),l+u>a&&(d=l+u,l*=a/d,u*=a/d),o+c>a&&(d=o+c,o*=a/d,c*=a/d),n.moveTo(t+o,r),n.lineTo(t+i-l,r),l!==0&&n.arc(t+i-l,r+l,l,-Math.PI/2,0),n.lineTo(t+i,r+a-u),u!==0&&n.arc(t+i-u,r+a-u,u,0,Math.PI/2),n.lineTo(t+c,r+a),c!==0&&n.arc(t+c,r+a-c,c,Math.PI/2,Math.PI),n.lineTo(t,r+o),o!==0&&n.arc(t+o,r+o,o,Math.PI,Math.PI*1.5)}var zy=Math.round;function Lle(n,e,t){if(e){var r=e.x1,i=e.x2,a=e.y1,s=e.y2;n.x1=r,n.x2=i,n.y1=a,n.y2=s;var o=t&&t.lineWidth;return o&&(zy(r*2)===zy(i*2)&&(n.x1=n.x2=P0(r,o,!0)),zy(a*2)===zy(s*2)&&(n.y1=n.y2=P0(a,o,!0))),n}}function Ole(n,e,t){if(e){var r=e.x,i=e.y,a=e.width,s=e.height;n.x=r,n.y=i,n.width=a,n.height=s;var o=t&&t.lineWidth;return o&&(n.x=P0(r,o,!0),n.y=P0(i,o,!0),n.width=Math.max(P0(r+a,o,!1)-n.x,a===0?0:1),n.height=Math.max(P0(i+s,o,!1)-n.y,s===0?0:1)),n}}function P0(n,e,t){if(!e)return n;var r=zy(n*2);return(r+zy(e))%2===0?r/2:(r+(t?1:-1))/2}var ZYe=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),JYe={},Nle=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new ZYe},e.prototype.buildPath=function(t,r){var i,a,s,o;if(this.subPixelOptimize){var l=Ole(JYe,r,this.style);i=l.x,a=l.y,s=l.width,o=l.height,l.r=r.r,r=l}else i=r.x,a=r.y,s=r.width,o=r.height;r.r?QYe(t,r):t.rect(i,a,s,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(pa);Nle.prototype.type="rect";const Sl=Nle;var uq={fill:"#000"},cq=2,eQe={style:Aa({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},_I.style)},Ble=function(n){Dr(e,n);function e(t){var r=n.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=uq,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,aQe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Zi(0,0,0,0),r=this._children,i=[],a=null,s=0;s<r.length;s++){var o=r[s],l=o.getBoundingRect(),u=o.getLocalTransform(i);u?(t.copy(l),t.applyTransform(u),a=a||t.clone(),a.union(t)):(a=a||l.clone(),a.union(l))}this._rect=a||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||uq},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var i=r.rich,a=t.rich||i&&{};return kn(t,r),i&&a?(this._mergeRich(a,i),t.rich=a):a&&(t.rich=a),t},e.prototype._mergeRich=function(t,r){for(var i=Ga(r),a=0;a<i.length;a++){var s=i[a];t[s]=t[s]||{},kn(t[s],r[s])}},e.prototype.getAnimationStyleProps=function(){return eQe},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||pv,i=t.padding,a=gq(t),s=_Ye(a,t),o=pR(t),l=!!t.backgroundColor,u=s.outerHeight,c=s.outerWidth,d=s.contentWidth,f=s.lines,h=s.lineHeight,p=this._defaultStyle,m=t.x||0,v=t.y||0,g=t.align||p.align||"left",y=t.verticalAlign||p.verticalAlign||"top",_=m,b=xy(v,s.contentHeight,y);if(o||i){var x=BS(m,c,g),w=xy(v,u,y);o&&this._renderBackground(t,t,x,w,c,u)}b+=h/2,i&&(_=vq(m,g,i),y==="top"?b+=i[0]:y==="bottom"&&(b-=i[2]));for(var A=0,T=!1,C=mq("fill"in t?t.fill:(T=!0,p.fill)),E=pq("stroke"in t?t.stroke:!l&&(!p.autoStroke||T)?(A=cq,p.stroke):null),I=t.textShadowBlur>0,P=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),L=s.calculatedLineHeight,N=0;N<f.length;N++){var F=this._getOrCreateChild(Q6),k=F.createStyle();F.useStyle(k),k.text=f[N],k.x=_,k.y=b,g&&(k.textAlign=g),k.textBaseline="middle",k.opacity=t.opacity,k.strokeFirst=!0,I&&(k.shadowBlur=t.textShadowBlur||0,k.shadowColor=t.textShadowColor||"transparent",k.shadowOffsetX=t.textShadowOffsetX||0,k.shadowOffsetY=t.textShadowOffsetY||0),k.stroke=E,k.fill=C,E&&(k.lineWidth=t.lineWidth||A,k.lineDash=t.lineDash,k.lineDashOffset=t.lineDashOffset||0),k.font=r,fq(k,t),b+=h,P&&F.setBoundingRect(new Zi(BS(k.x,t.width,k.textAlign),xy(k.y,L,k.textBaseline),d,L))}},e.prototype._updateRichTexts=function(){var t=this.style,r=gq(t),i=xYe(r,t),a=i.width,s=i.outerWidth,o=i.outerHeight,l=t.padding,u=t.x||0,c=t.y||0,d=this._defaultStyle,f=t.align||d.align,h=t.verticalAlign||d.verticalAlign,p=BS(u,s,f),m=xy(c,o,h),v=p,g=m;l&&(v+=l[3],g+=l[0]);var y=v+a;pR(t)&&this._renderBackground(t,t,p,m,s,o);for(var _=!!t.backgroundColor,b=0;b<i.lines.length;b++){for(var x=i.lines[b],w=x.tokens,A=w.length,T=x.lineHeight,C=x.width,E=0,I=v,P=y,L=A-1,N=void 0;E<A&&(N=w[E],!N.align||N.align==="left");)this._placeToken(N,t,T,g,I,"left",_),C-=N.width,I+=N.width,E++;for(;L>=0&&(N=w[L],N.align==="right");)this._placeToken(N,t,T,g,P,"right",_),C-=N.width,P-=N.width,L--;for(I+=(a-(I-v)-(y-P)-C)/2;E<=L;)N=w[E],this._placeToken(N,t,T,g,I+N.width/2,"center",_),I+=N.width,E++;g+=T}},e.prototype._placeToken=function(t,r,i,a,s,o,l){var u=r.rich[t.styleName]||{};u.text=t.text;var c=t.verticalAlign,d=a+i/2;c==="top"?d=a+t.height/2:c==="bottom"&&(d=a+i-t.height/2);var f=!t.isLineHolder&&pR(u);f&&this._renderBackground(u,r,o==="right"?s-t.width:o==="center"?s-t.width/2:s,d-t.height/2,t.width,t.height);var h=!!u.backgroundColor,p=t.textPadding;p&&(s=vq(s,o,p),d-=t.height/2-p[0]-t.innerHeight/2);var m=this._getOrCreateChild(Q6),v=m.createStyle();m.useStyle(v);var g=this._defaultStyle,y=!1,_=0,b=mq("fill"in u?u.fill:"fill"in r?r.fill:(y=!0,g.fill)),x=pq("stroke"in u?u.stroke:"stroke"in r?r.stroke:!h&&!l&&(!g.autoStroke||y)?(_=cq,g.stroke):null),w=u.textShadowBlur>0||r.textShadowBlur>0;v.text=t.text,v.x=s,v.y=d,w&&(v.shadowBlur=u.textShadowBlur||r.textShadowBlur||0,v.shadowColor=u.textShadowColor||r.textShadowColor||"transparent",v.shadowOffsetX=u.textShadowOffsetX||r.textShadowOffsetX||0,v.shadowOffsetY=u.textShadowOffsetY||r.textShadowOffsetY||0),v.textAlign=o,v.textBaseline="middle",v.font=t.font||pv,v.opacity=sx(u.opacity,r.opacity,1),fq(v,u),x&&(v.lineWidth=sx(u.lineWidth,r.lineWidth,_),v.lineDash=bi(u.lineDash,r.lineDash),v.lineDashOffset=r.lineDashOffset||0,v.stroke=x),b&&(v.fill=b);var A=t.contentWidth,T=t.contentHeight;m.setBoundingRect(new Zi(BS(v.x,A,v.textAlign),xy(v.y,T,v.textBaseline),A,T))},e.prototype._renderBackground=function(t,r,i,a,s,o){var l=t.backgroundColor,u=t.borderWidth,c=t.borderColor,d=l&&l.image,f=l&&!d,h=t.borderRadius,p=this,m,v;if(f||t.lineHeight||u&&c){m=this._getOrCreateChild(Sl),m.useStyle(m.createStyle()),m.style.fill=null;var g=m.shape;g.x=i,g.y=a,g.width=s,g.height=o,g.r=h,m.dirtyShape()}if(f){var y=m.style;y.fill=l||null,y.fillOpacity=bi(t.fillOpacity,1)}else if(d){v=this._getOrCreateChild(j_),v.onload=function(){p.dirtyStyle()};var _=v.style;_.image=l.image,_.x=i,_.y=a,_.width=s,_.height=o}if(u&&c){var y=m.style;y.lineWidth=u,y.stroke=c,y.strokeOpacity=bi(t.strokeOpacity,1),y.lineDash=t.borderDash,y.lineDashOffset=t.borderDashOffset||0,m.strokeContainThreshold=0,m.hasFill()&&m.hasStroke()&&(y.strokeFirst=!0,y.lineWidth*=2)}var b=(m||v).style;b.shadowBlur=t.shadowBlur||0,b.shadowColor=t.shadowColor||"transparent",b.shadowOffsetX=t.shadowOffsetX||0,b.shadowOffsetY=t.shadowOffsetY||0,b.opacity=sx(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return iQe(t)&&(r=[t.fontStyle,t.fontWeight,rQe(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&yd(r)||t.textFont||t.font},e}($w),tQe={left:!0,right:1,center:1},nQe={top:1,bottom:1,middle:1},dq=["fontStyle","fontWeight","fontSize","fontFamily"];function rQe(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?m7+"px":n+"px"}function fq(n,e){for(var t=0;t<dq.length;t++){var r=dq[t],i=e[r];i!=null&&(n[r]=i)}}function iQe(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function aQe(n){return hq(n),Bt(n.rich,hq),n}function hq(n){if(n){n.font=Ble.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||tQe[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||nQe[t]?t:"top";var r=n.padding;r&&(n.padding=Hoe(n.padding))}}function pq(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function mq(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function vq(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function gq(n){var e=n.text;return e!=null&&(e+=""),e}function pR(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}const Jo=Ble;var Ra=Os(),sQe=function(n,e,t,r){if(r){var i=Ra(r);i.dataIndex=t,i.dataType=e,i.seriesIndex=n,r.type==="group"&&r.traverse(function(a){var s=Ra(a);s.seriesIndex=n,s.dataIndex=t,s.dataType=e})}},yq=1,_q={},Fle=Os(),k7=Os(),Ule=0,L7=1,O7=2,Bd=["emphasis","blur","select"],l3=["normal","emphasis","blur","select"],oQe=10,lQe=9,J0="highlight",EE="downplay",dx="select",ME="unselect",fx="toggleSelect";function xg(n){return n!=null&&n!=="none"}var bq=new zw(100);function Sq(n){if(Lr(n)){var e=bq.get(n);return e||(e=zW(n,-.1),bq.put(n,e)),e}else if(pI(n)){var t=kn({},n);return t.colorStops=Ti(n.colorStops,function(r){return{offset:r.offset,color:zW(r.color,-.1)}}),t}return n}function bI(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function zle(n){bI(n,"emphasis",O7)}function Hle(n){n.hoverState===O7&&bI(n,"normal",Ule)}function N7(n){bI(n,"blur",L7)}function Vle(n){n.hoverState===L7&&bI(n,"normal",Ule)}function uQe(n){n.selected=!0}function cQe(n){n.selected=!1}function xq(n,e,t){e(n,t)}function gh(n,e,t){xq(n,e,t),n.isGroup&&n.traverse(function(r){xq(r,e,t)})}function dQe(n,e,t,r){for(var i=n.style,a={},s=0;s<e.length;s++){var o=e[s],l=i[o];a[o]=l??(r&&r[o])}for(var s=0;s<n.animators.length;s++){var u=n.animators[s];u.__fromStateTransition&&u.__fromStateTransition.indexOf(t)<0&&u.targetName==="style"&&u.saveTo(a,e)}return a}function fQe(n,e,t,r){var i=t&&da(t,"select")>=0,a=!1;if(n instanceof pa){var s=Fle(n),o=i&&s.selectFill||s.normalFill,l=i&&s.selectStroke||s.normalStroke;if(xg(o)||xg(l)){r=r||{};var u=r.style||{};u.fill==="inherit"?(a=!0,r=kn({},r),u=kn({},u),u.fill=o):!xg(u.fill)&&xg(o)?(a=!0,r=kn({},r),u=kn({},u),u.fill=Sq(o)):!xg(u.stroke)&&xg(l)&&(a||(r=kn({},r),u=kn({},u)),u.stroke=Sq(l)),r.style=u}}if(r&&r.z2==null){a||(r=kn({},r));var c=n.z2EmphasisLift;r.z2=n.z2+(c??oQe)}return r}function hQe(n,e,t){if(t&&t.z2==null){t=kn({},t);var r=n.z2SelectLift;t.z2=n.z2+(r??lQe)}return t}function pQe(n,e,t){var r=da(n.currentStates,e)>=0,i=n.style.opacity,a=r?null:dQe(n,["opacity"],e,{opacity:1});t=t||{};var s=t.style||{};return s.opacity==null&&(t=kn({},t),s=kn({opacity:r?i:a.opacity*.1},s),t.style=s),t}function mR(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return fQe(this,n,e,t);if(n==="blur")return pQe(this,n,t);if(n==="select")return hQe(this,n,t)}return t}function mQe(n){n.stateProxy=mR;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=mR),t&&(t.stateProxy=mR)}function wq(n,e){!qle(n,e)&&!n.__highByOuter&&gh(n,zle)}function Tq(n,e){!qle(n,e)&&!n.__highByOuter&&gh(n,Hle)}function Z6(n,e){n.__highByOuter|=1<<(e||0),gh(n,zle)}function J6(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&gh(n,Hle)}function vQe(n){gh(n,N7)}function $le(n){gh(n,Vle)}function Gle(n){gh(n,uQe)}function Wle(n){gh(n,cQe)}function qle(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function jle(n){var e=n.getModel(),t=[],r=[];e.eachComponent(function(i,a){var s=k7(a),o=i==="series",l=o?n.getViewOfSeriesModel(a):n.getViewOfComponentModel(a);!o&&r.push(l),s.isBlured&&(l.group.traverse(function(u){Vle(u)}),o&&t.push(a)),s.isBlured=!1}),Bt(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(t,!1,e)})}function eO(n,e,t,r){var i=r.getModel();t=t||"coordinateSystem";function a(u,c){for(var d=0;d<c.length;d++){var f=u.getItemGraphicEl(c[d]);f&&$le(f)}}if(n!=null&&!(!e||e==="none")){var s=i.getSeriesByIndex(n),o=s.coordinateSystem;o&&o.master&&(o=o.master);var l=[];i.eachSeries(function(u){var c=s===u,d=u.coordinateSystem;d&&d.master&&(d=d.master);var f=d&&o?d===o:c;if(!(t==="series"&&!c||t==="coordinateSystem"&&!f||e==="series"&&c)){var h=r.getViewOfSeriesModel(u);if(h.group.traverse(function(v){v.__highByOuter&&c&&e==="self"||N7(v)}),El(e))a(u.getData(),e);else if(Ur(e))for(var p=Ga(e),m=0;m<p.length;m++)a(u.getData(p[m]),e[p[m]]);l.push(u),k7(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var d=r.getViewOfComponentModel(c);d&&d.toggleBlurSeries&&d.toggleBlurSeries(l,!0,i)}})}}function tO(n,e,t){if(!(n==null||e==null)){var r=t.getModel().getComponent(n,e);if(r){k7(r).isBlured=!0;var i=t.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){N7(a)})}}}function gQe(n,e,t){var r=n.seriesIndex,i=n.getData(e.dataType);if(i){var a=Hw(i,e);a=(br(a)?a[0]:a)||0;var s=i.getItemGraphicEl(a);if(!s)for(var o=i.count(),l=0;!s&&l<o;)s=i.getItemGraphicEl(l++);if(s){var u=Ra(s);eO(r,u.focus,u.blurScope,t)}else{var c=n.get(["emphasis","focus"]),d=n.get(["emphasis","blurScope"]);c!=null&&eO(r,c,d,t)}}}function B7(n,e,t,r){var i={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return i;var a=r.getModel().getComponent(n,e);if(!a)return i;var s=r.getViewOfComponentModel(a);if(!s||!s.findHighDownDispatchers)return i;for(var o=s.findHighDownDispatchers(t),l,u=0;u<o.length;u++)if(Ra(o[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function yQe(n,e,t){var r=Ra(n),i=B7(r.componentMainType,r.componentIndex,r.componentHighDownName,t),a=i.dispatchers,s=i.focusSelf;a?(s&&tO(r.componentMainType,r.componentIndex,t),Bt(a,function(o){return wq(o,e)})):(eO(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&tO(r.componentMainType,r.componentIndex,t),wq(n,e))}function _Qe(n,e,t){jle(t);var r=Ra(n),i=B7(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;i?Bt(i,function(a){return Tq(a,e)}):Tq(n,e)}function bQe(n,e,t){if(iO(e)){var r=e.dataType,i=n.getData(r),a=Hw(i,e);br(a)||(a=[a]),n[e.type===fx?"toggleSelect":e.type===dx?"select":"unselect"](a,r)}}function Cq(n){var e=n.getAllData();Bt(e,function(t){var r=t.data,i=t.type;r.eachItemGraphicEl(function(a,s){n.isSelected(s,i)?Gle(a):Wle(a)})})}function SQe(n){var e=[];return n.eachSeries(function(t){var r=t.getAllData();Bt(r,function(i){i.data;var a=i.type,s=t.getSelectedDataIndices();if(s.length>0){var o={dataIndex:s,seriesIndex:t.seriesIndex};a!=null&&(o.dataType=a),e.push(o)}})}),e}function nO(n,e,t){Kle(n,!0),gh(n,mQe),TQe(n,e,t)}function xQe(n){Kle(n,!1)}function wQe(n,e,t,r){r?xQe(n):nO(n,e,t)}function TQe(n,e,t){var r=Ra(n);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var Aq=["emphasis","blur","select"],CQe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function AQe(n,e,t,r){t=t||"itemStyle";for(var i=0;i<Aq.length;i++){var a=Aq[i],s=e.getModel([a,t]),o=n.ensureState(a);o.style=r?r(s):s[CQe[t]]()}}function Kle(n,e){var t=e===!1,r=n;n.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function rO(n){return!!(n&&n.__highDownDispatcher)}function EQe(n){var e=_q[n];return e==null&&yq<=32&&(e=_q[n]=yq++),e}function iO(n){var e=n.type;return e===dx||e===ME||e===fx}function Eq(n){var e=n.type;return e===J0||e===EE}function MQe(n){var e=Fle(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var wg=mv.CMD,IQe=[[],[],[]],Mq=Math.sqrt,DQe=Math.atan2;function PQe(n,e){if(e){var t=n.data,r=n.len(),i,a,s,o,l,u,c=wg.M,d=wg.C,f=wg.L,h=wg.R,p=wg.A,m=wg.Q;for(s=0,o=0;s<r;){switch(i=t[s++],o=s,a=0,i){case c:a=1;break;case f:a=1;break;case d:a=3;break;case m:a=2;break;case p:var v=e[4],g=e[5],y=Mq(e[0]*e[0]+e[1]*e[1]),_=Mq(e[2]*e[2]+e[3]*e[3]),b=DQe(-e[1]/_,e[0]/y);t[s]*=y,t[s++]+=v,t[s]*=_,t[s++]+=g,t[s++]*=y,t[s++]*=_,t[s++]+=b,t[s++]+=b,s+=2,o=s;break;case h:u[0]=t[s++],u[1]=t[s++],Md(u,u,e),t[o++]=u[0],t[o++]=u[1],u[0]+=t[s++],u[1]+=t[s++],Md(u,u,e),t[o++]=u[0],t[o++]=u[1]}for(l=0;l<a;l++){var x=IQe[l];x[0]=t[s++],x[1]=t[s++],Md(x,x,e),t[o++]=x[0],t[o++]=x[1]}}n.increaseVersion()}}var vR=Math.sqrt,dC=Math.sin,fC=Math.cos,Xb=Math.PI;function Iq(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function aO(n,e){return(n[0]*e[0]+n[1]*e[1])/(Iq(n)*Iq(e))}function Dq(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(aO(n,e))}function Pq(n,e,t,r,i,a,s,o,l,u,c){var d=l*(Xb/180),f=fC(d)*(n-t)/2+dC(d)*(e-r)/2,h=-1*dC(d)*(n-t)/2+fC(d)*(e-r)/2,p=f*f/(s*s)+h*h/(o*o);p>1&&(s*=vR(p),o*=vR(p));var m=(i===a?-1:1)*vR((s*s*(o*o)-s*s*(h*h)-o*o*(f*f))/(s*s*(h*h)+o*o*(f*f)))||0,v=m*s*h/o,g=m*-o*f/s,y=(n+t)/2+fC(d)*v-dC(d)*g,_=(e+r)/2+dC(d)*v+fC(d)*g,b=Dq([1,0],[(f-v)/s,(h-g)/o]),x=[(f-v)/s,(h-g)/o],w=[(-1*f-v)/s,(-1*h-g)/o],A=Dq(x,w);if(aO(x,w)<=-1&&(A=Xb),aO(x,w)>=1&&(A=0),A<0){var T=Math.round(A/Xb*1e6)/1e6;A=Xb*2+T%2*Xb}c.addData(u,y,_,s,o,b,A,d,a)}var RQe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,kQe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function LQe(n){var e=new mv;if(!n)return e;var t=0,r=0,i=t,a=r,s,o=mv.CMD,l=n.match(RQe);if(!l)return e;for(var u=0;u<l.length;u++){for(var c=l[u],d=c.charAt(0),f=void 0,h=c.match(kQe)||[],p=h.length,m=0;m<p;m++)h[m]=parseFloat(h[m]);for(var v=0;v<p;){var g=void 0,y=void 0,_=void 0,b=void 0,x=void 0,w=void 0,A=void 0,T=t,C=r,E=void 0,I=void 0;switch(d){case"l":t+=h[v++],r+=h[v++],f=o.L,e.addData(f,t,r);break;case"L":t=h[v++],r=h[v++],f=o.L,e.addData(f,t,r);break;case"m":t+=h[v++],r+=h[v++],f=o.M,e.addData(f,t,r),i=t,a=r,d="l";break;case"M":t=h[v++],r=h[v++],f=o.M,e.addData(f,t,r),i=t,a=r,d="L";break;case"h":t+=h[v++],f=o.L,e.addData(f,t,r);break;case"H":t=h[v++],f=o.L,e.addData(f,t,r);break;case"v":r+=h[v++],f=o.L,e.addData(f,t,r);break;case"V":r=h[v++],f=o.L,e.addData(f,t,r);break;case"C":f=o.C,e.addData(f,h[v++],h[v++],h[v++],h[v++],h[v++],h[v++]),t=h[v-2],r=h[v-1];break;case"c":f=o.C,e.addData(f,h[v++]+t,h[v++]+r,h[v++]+t,h[v++]+r,h[v++]+t,h[v++]+r),t+=h[v-2],r+=h[v-1];break;case"S":g=t,y=r,E=e.len(),I=e.data,s===o.C&&(g+=t-I[E-4],y+=r-I[E-3]),f=o.C,T=h[v++],C=h[v++],t=h[v++],r=h[v++],e.addData(f,g,y,T,C,t,r);break;case"s":g=t,y=r,E=e.len(),I=e.data,s===o.C&&(g+=t-I[E-4],y+=r-I[E-3]),f=o.C,T=t+h[v++],C=r+h[v++],t+=h[v++],r+=h[v++],e.addData(f,g,y,T,C,t,r);break;case"Q":T=h[v++],C=h[v++],t=h[v++],r=h[v++],f=o.Q,e.addData(f,T,C,t,r);break;case"q":T=h[v++]+t,C=h[v++]+r,t+=h[v++],r+=h[v++],f=o.Q,e.addData(f,T,C,t,r);break;case"T":g=t,y=r,E=e.len(),I=e.data,s===o.Q&&(g+=t-I[E-4],y+=r-I[E-3]),t=h[v++],r=h[v++],f=o.Q,e.addData(f,g,y,t,r);break;case"t":g=t,y=r,E=e.len(),I=e.data,s===o.Q&&(g+=t-I[E-4],y+=r-I[E-3]),t+=h[v++],r+=h[v++],f=o.Q,e.addData(f,g,y,t,r);break;case"A":_=h[v++],b=h[v++],x=h[v++],w=h[v++],A=h[v++],T=t,C=r,t=h[v++],r=h[v++],f=o.A,Pq(T,C,t,r,w,A,_,b,x,f,e);break;case"a":_=h[v++],b=h[v++],x=h[v++],w=h[v++],A=h[v++],T=t,C=r,t+=h[v++],r+=h[v++],f=o.A,Pq(T,C,t,r,w,A,_,b,x,f,e);break}}(d==="z"||d==="Z")&&(f=o.Z,e.addData(f),t=i,r=a),s=f}return e.toStatic(),e}var Xle=function(n){Dr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(pa);function Yle(n){return n.setData!=null}function Qle(n,e){var t=LQe(n),r=kn({},e);return r.buildPath=function(i){if(Yle(i)){i.setData(t.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;t.rebuildPath(a,1)}},r.applyTransform=function(i){PQe(t,i),this.dirtyShape()},r}function OQe(n,e){return new Xle(Qle(n,e))}function NQe(n,e){var t=Qle(n,e),r=function(i){Dr(a,i);function a(s){var o=i.call(this,s)||this;return o.applyTransform=t.applyTransform,o.buildPath=t.buildPath,o}return a}(Xle);return r}function BQe(n,e){for(var t=[],r=n.length,i=0;i<r;i++){var a=n[i];t.push(a.getUpdatedPathProxy(!0))}var s=new pa(e);return s.createPathProxy(),s.buildPath=function(o){if(Yle(o)){o.appendPath(t);var l=o.getContext();l&&o.rebuildPath(l,1)}},s}var FQe=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),Zle=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new FQe},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e}(pa);Zle.prototype.type="circle";const F7=Zle;var UQe=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),Jle=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new UQe},e.prototype.buildPath=function(t,r){var i=.5522848,a=r.cx,s=r.cy,o=r.rx,l=r.ry,u=o*i,c=l*i;t.moveTo(a-o,s),t.bezierCurveTo(a-o,s-c,a-u,s-l,a,s-l),t.bezierCurveTo(a+u,s-l,a+o,s-c,a+o,s),t.bezierCurveTo(a+o,s+c,a+u,s+l,a,s+l),t.bezierCurveTo(a-u,s+l,a-o,s+c,a-o,s),t.closePath()},e}(pa);Jle.prototype.type="ellipse";const eue=Jle;var tue=Math.PI,gR=tue*2,Hm=Math.sin,Tg=Math.cos,zQe=Math.acos,no=Math.atan2,Rq=Math.abs,hx=Math.sqrt,FS=Math.max,td=Math.min,_c=1e-4;function HQe(n,e,t,r,i,a,s,o){var l=t-n,u=r-e,c=s-i,d=o-a,f=d*l-c*u;if(!(f*f<_c))return f=(c*(e-a)-d*(n-i))/f,[n+f*l,e+f*u]}function hC(n,e,t,r,i,a,s){var o=n-t,l=e-r,u=(s?a:-a)/hx(o*o+l*l),c=u*l,d=-u*o,f=n+c,h=e+d,p=t+c,m=r+d,v=(f+p)/2,g=(h+m)/2,y=p-f,_=m-h,b=y*y+_*_,x=i-a,w=f*m-p*h,A=(_<0?-1:1)*hx(FS(0,x*x*b-w*w)),T=(w*_-y*A)/b,C=(-w*y-_*A)/b,E=(w*_+y*A)/b,I=(-w*y+_*A)/b,P=T-v,L=C-g,N=E-v,F=I-g;return P*P+L*L>N*N+F*F&&(T=E,C=I),{cx:T,cy:C,x0:-c,y0:-d,x1:T*(i/x-1),y1:C*(i/x-1)}}function VQe(n){var e;if(br(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function $Qe(n,e){var t,r=FS(e.r,0),i=FS(e.r0||0,0),a=r>0,s=i>0;if(!(!a&&!s)){if(a||(r=i,i=0),i>r){var o=r;r=i,i=o}var l=e.startAngle,u=e.endAngle;if(!(isNaN(l)||isNaN(u))){var c=e.cx,d=e.cy,f=!!e.clockwise,h=Rq(u-l),p=h>gR&&h%gR;if(p>_c&&(h=p),!(r>_c))n.moveTo(c,d);else if(h>gR-_c)n.moveTo(c+r*Tg(l),d+r*Hm(l)),n.arc(c,d,r,l,u,!f),i>_c&&(n.moveTo(c+i*Tg(u),d+i*Hm(u)),n.arc(c,d,i,u,l,f));else{var m=void 0,v=void 0,g=void 0,y=void 0,_=void 0,b=void 0,x=void 0,w=void 0,A=void 0,T=void 0,C=void 0,E=void 0,I=void 0,P=void 0,L=void 0,N=void 0,F=r*Tg(l),k=r*Hm(l),H=i*Tg(u),U=i*Hm(u),B=h>_c;if(B){var $=e.cornerRadius;$&&(t=VQe($),m=t[0],v=t[1],g=t[2],y=t[3]);var ee=Rq(r-i)/2;if(_=td(ee,g),b=td(ee,y),x=td(ee,m),w=td(ee,v),C=A=FS(_,b),E=T=FS(x,w),(A>_c||T>_c)&&(I=r*Tg(u),P=r*Hm(u),L=i*Tg(l),N=i*Hm(l),h<tue)){var re=HQe(F,k,L,N,I,P,H,U);if(re){var ne=F-re[0],ae=k-re[1],pe=I-re[0],de=P-re[1],me=1/Hm(zQe((ne*pe+ae*de)/(hx(ne*ne+ae*ae)*hx(pe*pe+de*de)))/2),ke=hx(re[0]*re[0]+re[1]*re[1]);C=td(A,(r-ke)/(me+1)),E=td(T,(i-ke)/(me-1))}}}if(!B)n.moveTo(c+F,d+k);else if(C>_c){var Be=td(g,C),Xe=td(y,C),Ye=hC(L,N,F,k,r,Be,f),Y=hC(I,P,H,U,r,Xe,f);n.moveTo(c+Ye.cx+Ye.x0,d+Ye.cy+Ye.y0),C<A&&Be===Xe?n.arc(c+Ye.cx,d+Ye.cy,C,no(Ye.y0,Ye.x0),no(Y.y0,Y.x0),!f):(Be>0&&n.arc(c+Ye.cx,d+Ye.cy,Be,no(Ye.y0,Ye.x0),no(Ye.y1,Ye.x1),!f),n.arc(c,d,r,no(Ye.cy+Ye.y1,Ye.cx+Ye.x1),no(Y.cy+Y.y1,Y.cx+Y.x1),!f),Xe>0&&n.arc(c+Y.cx,d+Y.cy,Xe,no(Y.y1,Y.x1),no(Y.y0,Y.x0),!f))}else n.moveTo(c+F,d+k),n.arc(c,d,r,l,u,!f);if(!(i>_c)||!B)n.lineTo(c+H,d+U);else if(E>_c){var Be=td(m,E),Xe=td(v,E),Ye=hC(H,U,I,P,i,-Xe,f),Y=hC(F,k,L,N,i,-Be,f);n.lineTo(c+Ye.cx+Ye.x0,d+Ye.cy+Ye.y0),E<T&&Be===Xe?n.arc(c+Ye.cx,d+Ye.cy,E,no(Ye.y0,Ye.x0),no(Y.y0,Y.x0),!f):(Xe>0&&n.arc(c+Ye.cx,d+Ye.cy,Xe,no(Ye.y0,Ye.x0),no(Ye.y1,Ye.x1),!f),n.arc(c,d,i,no(Ye.cy+Ye.y1,Ye.cx+Ye.x1),no(Y.cy+Y.y1,Y.cx+Y.x1),f),Be>0&&n.arc(c+Y.cx,d+Y.cy,Be,no(Y.y1,Y.x1),no(Y.y0,Y.x0),!f))}else n.lineTo(c+H,d+U),n.arc(c,d,i,u,l,f)}n.closePath()}}}var GQe=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),nue=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new GQe},e.prototype.buildPath=function(t,r){$Qe(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(pa);nue.prototype.type="sector";const SI=nue;var WQe=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),rue=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new WQe},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,s=Math.PI*2;t.moveTo(i+r.r,a),t.arc(i,a,r.r,0,s,!1),t.moveTo(i+r.r0,a),t.arc(i,a,r.r0,0,s,!0)},e}(pa);rue.prototype.type="ring";const iue=rue;function qQe(n,e,t,r){var i=[],a=[],s=[],o=[],l,u,c,d;if(r){c=[1/0,1/0],d=[-1/0,-1/0];for(var f=0,h=n.length;f<h;f++)By(c,c,n[f]),Fy(d,d,n[f]);By(c,c,r[0]),Fy(d,d,r[1])}for(var f=0,h=n.length;f<h;f++){var p=n[f];if(t)l=n[f?f-1:h-1],u=n[(f+1)%h];else if(f===0||f===h-1){i.push(hKe(n[f]));continue}else l=n[f-1],u=n[f+1];pKe(a,u,l),LP(a,a,e);var m=P6(p,l),v=P6(p,u),g=m+v;g!==0&&(m/=g,v/=g),LP(s,a,-m),LP(o,a,v);var y=TW([],p,s),_=TW([],p,o);r&&(Fy(y,y,c),By(y,y,d),Fy(_,_,c),By(_,_,d)),i.push(y),i.push(_)}return t&&i.push(i.shift()),i}function aue(n,e,t){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var a=qQe(i,r,t,e.smoothConstraint);n.moveTo(i[0][0],i[0][1]);for(var s=i.length,o=0;o<(t?s:s-1);o++){var l=a[o*2],u=a[o*2+1],c=i[(o+1)%s];n.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{n.moveTo(i[0][0],i[0][1]);for(var o=1,d=i.length;o<d;o++)n.lineTo(i[o][0],i[o][1])}t&&n.closePath()}}var jQe=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),sue=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new jQe},e.prototype.buildPath=function(t,r){aue(t,r,!0)},e}(pa);sue.prototype.type="polygon";const oue=sue;var KQe=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),lue=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new KQe},e.prototype.buildPath=function(t,r){aue(t,r,!1)},e}(pa);lue.prototype.type="polyline";const xI=lue;var XQe={},YQe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),uue=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new YQe},e.prototype.buildPath=function(t,r){var i,a,s,o;if(this.subPixelOptimize){var l=Lle(XQe,r,this.style);i=l.x1,a=l.y1,s=l.x2,o=l.y2}else i=r.x1,a=r.y1,s=r.x2,o=r.y2;var u=r.percent;u!==0&&(t.moveTo(i,a),u<1&&(s=i*(1-u)+s*u,o=a*(1-u)+o*u),t.lineTo(s,o))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e}(pa);uue.prototype.type="line";const Gw=uue;var sl=[],QQe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function kq(n,e,t){var r=n.cpx2,i=n.cpy2;return r!=null||i!=null?[(t?OW:Vs)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?OW:Vs)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?NW:ho)(n.x1,n.cpx1,n.x2,e),(t?NW:ho)(n.y1,n.cpy1,n.y2,e)]}var cue=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new QQe},e.prototype.buildPath=function(t,r){var i=r.x1,a=r.y1,s=r.x2,o=r.y2,l=r.cpx1,u=r.cpy1,c=r.cpx2,d=r.cpy2,f=r.percent;f!==0&&(t.moveTo(i,a),c==null||d==null?(f<1&&(r3(i,l,s,f,sl),l=sl[1],s=sl[2],r3(a,u,o,f,sl),u=sl[1],o=sl[2]),t.quadraticCurveTo(l,u,s,o)):(f<1&&(n3(i,l,c,s,f,sl),l=sl[1],c=sl[2],s=sl[3],n3(a,u,d,o,f,sl),u=sl[1],d=sl[2],o=sl[3]),t.bezierCurveTo(l,u,c,d,s,o)))},e.prototype.pointAt=function(t){return kq(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=kq(this.shape,t,!0);return gKe(r,r)},e}(pa);cue.prototype.type="bezier-curve";const due=cue;var ZQe=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),fue=function(n){Dr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new ZQe},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,s=Math.max(r.r,0),o=r.startAngle,l=r.endAngle,u=r.clockwise,c=Math.cos(o),d=Math.sin(o);t.moveTo(c*s+i,d*s+a),t.arc(i,a,s,o,l,!u)},e}(pa);fue.prototype.type="arc";const U7=fue;var JQe=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),i=0;i<t.length;i++)r=r||t[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(r[0],r[1],t[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(t,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),pa.prototype.getBoundingRect.call(this)},e}(pa);const eZe=JQe;var tZe=function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n}();const hue=tZe;var nZe=function(n){Dr(e,n);function e(t,r,i,a,s,o){var l=n.call(this,s)||this;return l.x=t??0,l.y=r??0,l.x2=i??1,l.y2=a??0,l.type="linear",l.global=o||!1,l}return e}(hue);const rZe=nZe;var iZe=function(n){Dr(e,n);function e(t,r,i,a,s){var o=n.call(this,a)||this;return o.x=t??.5,o.y=r??.5,o.r=i??.5,o.type="radial",o.global=s||!1,o}return e}(hue);const aZe=iZe;var Vm=[0,0],$m=[0,0],pC=new Vr,mC=new Vr,sZe=function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new Vr;for(var r=0;r<2;r++)this._axes[r]=new Vr;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var r=this._corners,i=this._axes,a=e.x,s=e.y,o=a+e.width,l=s+e.height;if(r[0].set(a,s),r[1].set(o,s),r[2].set(o,l),r[3].set(a,l),t)for(var u=0;u<4;u++)r[u].transform(t);Vr.sub(i[0],r[1],r[0]),Vr.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(r[0])},n.prototype.intersect=function(e,t){var r=!0,i=!t;return pC.set(1/0,1/0),mC.set(0,0),!this._intersectCheckOneSide(this,e,pC,mC,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(e,this,pC,mC,i,-1)&&(r=!1,i)||i||Vr.copy(t,r?pC:mC),r},n.prototype._intersectCheckOneSide=function(e,t,r,i,a,s){for(var o=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,Vm),this._getProjMinMaxOnAxis(l,t._corners,$m),Vm[1]<$m[0]||Vm[0]>$m[1]){if(o=!1,a)return o;var c=Math.abs($m[0]-Vm[1]),d=Math.abs(Vm[0]-$m[1]);Math.min(c,d)>i.len()&&(c<d?Vr.scale(i,u,-c*s):Vr.scale(i,u,d*s))}else if(r){var c=Math.abs($m[0]-Vm[1]),d=Math.abs(Vm[0]-$m[1]);Math.min(c,d)<r.len()&&(c<d?Vr.scale(r,u,c*s):Vr.scale(r,u,-d*s))}}return o},n.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var i=this._axes[e],a=this._origin,s=t[0].dot(i)+a[e],o=s,l=s,u=1;u<t.length;u++){var c=t[u].dot(i)+a[e];o=Math.min(c,o),l=Math.max(c,l)}r[0]=o,r[1]=l},n}();const u3=sZe;var oZe=[],lZe=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Zi(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(oZe)),t.union(a)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var s=0;s<this._displayables.length;s++){var o=this._displayables[s];if(o.contain(t,r))return!0}return!1},e}($w);const uZe=lZe;var cZe=Os();function dZe(n,e,t,r,i){var a;if(e&&e.ecModel){var s=e.ecModel.getUpdatePayload();a=s&&s.animation}var o=e&&e.isAnimationEnabled(),l=n==="update";if(o){var u=void 0,c=void 0,d=void 0;r?(u=bi(r.duration,200),c=bi(r.easing,"cubicOut"),d=0):(u=e.getShallow(l?"animationDurationUpdate":"animationDuration"),c=e.getShallow(l?"animationEasingUpdate":"animationEasing"),d=e.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(u=a.duration),a.easing!=null&&(c=a.easing),a.delay!=null&&(d=a.delay)),Gi(d)&&(d=d(t,i)),Gi(u)&&(u=u(t));var f={duration:u||0,delay:d,easing:c};return f}else return null}function z7(n,e,t,r,i,a,s){var o=!1,l;Gi(i)?(s=a,a=i,i=null):Ur(i)&&(a=i.cb,s=i.during,o=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=n==="leave";u||e.stopAnimation("leave");var c=dZe(n,r,i,u?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(c&&c.duration>0){var d=c.duration,f=c.delay,h=c.easing,p={duration:d,delay:f||0,easing:h,done:a,force:!!a||!!s,setToFinal:!u,scope:n,during:s};o?e.animateFrom(t,p):e.animateTo(t,p)}else e.stopAnimation(),!o&&e.attr(t),s&&s(1),a&&a()}function e_(n,e,t,r,i,a){z7("update",n,e,t,r,i,a)}function IE(n,e,t,r,i,a){z7("enter",n,e,t,r,i,a)}function px(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function pue(n,e,t,r,i,a){px(n)||z7("leave",n,e,t,r,i,a)}function Lq(n,e,t,r){n.removeTextContent(),n.removeTextGuideLine(),pue(n,{style:{opacity:0}},e,t,r)}function mue(n,e,t){function r(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(i){i.isGroup||Lq(i,e,t,r)}):Lq(n,e,t,r)}function fZe(n){cZe(n).oldStyle=n.style}var c3=Math.max,d3=Math.min,sO={};function hZe(n){return pa.extend(n)}var pZe=NQe;function mZe(n,e){return pZe(n,e)}function Wc(n,e){sO[n]=e}function vZe(n){if(sO.hasOwnProperty(n))return sO[n]}function H7(n,e,t,r){var i=OQe(n,e);return t&&(r==="center"&&(t=gue(t,i.getBoundingRect())),yue(i,t)),i}function vue(n,e,t){var r=new j_({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(t==="center"){var a={width:i.width,height:i.height};r.setStyle(gue(e,a))}}});return r}function gue(n,e){var t=e.width/e.height,r=n.height*t,i;r<=n.width?i=n.height:(r=n.width,i=r/t);var a=n.x+n.width/2,s=n.y+n.height/2;return{x:a-r/2,y:s-i/2,width:r,height:i}}var gZe=BQe;function yue(n,e){if(n.applyTransform){var t=n.getBoundingRect(),r=t.calculateTransform(e);n.applyTransform(r)}}function V7(n,e){return Lle(n,n,{lineWidth:e}),n}function yZe(n){return Ole(n.shape,n.shape,n.style),n}var _Ze=P0;function bZe(n,e){for(var t=S7([]);n&&n!==e;)u1(t,n.getLocalTransform(),t),n=n.parent;return t}function $7(n,e,t){return e&&!El(e)&&(e=C7.getLocalTransform(e)),t&&(e=joe([],e)),Md([],n,e)}function SZe(n,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),a=[n==="left"?-r:n==="right"?r:0,n==="top"?-i:n==="bottom"?i:0];return a=$7(a,e,t),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function Oq(n){return!n.isGroup}function xZe(n){return n.shape!=null}function wZe(n,e,t){if(!n||!e)return;function r(s){var o={};return s.traverse(function(l){Oq(l)&&l.anid&&(o[l.anid]=l)}),o}function i(s){var o={x:s.x,y:s.y,rotation:s.rotation};return xZe(s)&&(o.shape=kn({},s.shape)),o}var a=r(n);e.traverse(function(s){if(Oq(s)&&s.anid){var o=a[s.anid];if(o){var l=i(s);s.attr(i(o)),e_(s,l,t,Ra(s).dataIndex)}}})}function TZe(n,e){return Ti(n,function(t){var r=t[0];r=c3(r,e.x),r=d3(r,e.x+e.width);var i=t[1];return i=c3(i,e.y),i=d3(i,e.y+e.height),[r,i]})}function CZe(n,e){var t=c3(n.x,e.x),r=d3(n.x+n.width,e.x+e.width),i=c3(n.y,e.y),a=d3(n.y+n.height,e.y+e.height);if(r>=t&&a>=i)return{x:t,y:i,width:r-t,height:a-i}}function G7(n,e,t){var r=kn({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(i.image=n.slice(8),Aa(i,t),new j_(r)):H7(n.replace("path://",""),r,t,"center")}function AZe(n,e,t,r,i){for(var a=0,s=i[i.length-1];a<i.length;a++){var o=i[a];if(_ue(n,e,t,r,o[0],o[1],s[0],s[1]))return!0;s=o}}function _ue(n,e,t,r,i,a,s,o){var l=t-n,u=r-e,c=s-i,d=o-a,f=yR(c,d,l,u);if(EZe(f))return!1;var h=n-i,p=e-a,m=yR(h,p,l,u)/f;if(m<0||m>1)return!1;var v=yR(h,p,c,d)/f;return!(v<0||v>1)}function yR(n,e,t,r){return n*r-t*e}function EZe(n){return n<=1e-6&&n>=-1e-6}function W7(n){var e=n.itemTooltipOption,t=n.componentModel,r=n.itemName,i=Lr(e)?{formatter:e}:e,a=t.mainType,s=t.componentIndex,o={componentType:a,name:r,$vars:["name"]};o[a+"Index"]=s;var l=n.formatterParamsExtra;l&&Bt(Ga(l),function(c){Z1(o,c)||(o[c]=l[c],o.$vars.push(c))});var u=Ra(n.el);u.componentMainType=a,u.componentIndex=s,u.tooltipConfig={name:r,option:Aa({content:r,formatterParams:o},i)}}function Nq(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function bue(n,e){if(n)if(br(n))for(var t=0;t<n.length;t++)Nq(n[t],e);else Nq(n,e)}Wc("circle",F7);Wc("ellipse",eue);Wc("sector",SI);Wc("ring",iue);Wc("polygon",oue);Wc("polyline",xI);Wc("rect",Sl);Wc("line",Gw);Wc("bezierCurve",due);Wc("arc",U7);const MZe=Object.freeze(Object.defineProperty({__proto__:null,Arc:U7,BezierCurve:due,BoundingRect:Zi,Circle:F7,CompoundPath:eZe,Ellipse:eue,Group:Nd,Image:j_,IncrementalDisplayable:uZe,Line:Gw,LinearGradient:rZe,OrientedBoundingRect:u3,Path:pa,Point:Vr,Polygon:oue,Polyline:xI,RadialGradient:aZe,Rect:Sl,Ring:iue,Sector:SI,Text:Jo,applyTransform:$7,clipPointsByRect:TZe,clipRectByRect:CZe,createIcon:G7,extendPath:mZe,extendShape:hZe,getShapeClass:vZe,getTransform:bZe,groupTransition:wZe,initProps:IE,isElementRemoved:px,lineLineIntersect:_ue,linePolygonIntersect:AZe,makeImage:vue,makePath:H7,mergePath:gZe,registerShape:Wc,removeElement:pue,removeElementWithFadeOut:mue,resizePath:yue,setTooltipConfig:W7,subPixelOptimize:_Ze,subPixelOptimizeLine:V7,subPixelOptimizeRect:yZe,transformDirection:SZe,traverseElements:bue,updateProps:e_},Symbol.toStringTag,{value:"Module"}));var wI={};function IZe(n,e){for(var t=0;t<Bd.length;t++){var r=Bd[t],i=e[r],a=n.ensureState(r);a.style=a.style||{},a.style.text=i}var s=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(s,!0)}function Bq(n,e,t){var r=n.labelFetcher,i=n.labelDataIndex,a=n.labelDimIndex,s=e.normal,o;r&&(o=r.getFormattedLabel(i,"normal",null,a,s&&s.get("formatter"),t!=null?{interpolatedValue:t}:null)),o==null&&(o=Gi(n.defaultText)?n.defaultText(i,n,t):n.defaultText);for(var l={normal:o},u=0;u<Bd.length;u++){var c=Bd[u],d=e[c];l[c]=bi(r?r.getFormattedLabel(i,c,null,a,d&&d.get("formatter")):null,o)}return l}function Sue(n,e,t,r){t=t||wI;for(var i=n instanceof Jo,a=!1,s=0;s<l3.length;s++){var o=e[l3[s]];if(o&&o.getShallow("show")){a=!0;break}}var l=i?n:n.getTextContent();if(a){i||(l||(l=new Jo,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var u=Bq(t,e),c=e.normal,d=!!c.getShallow("show"),f=Xp(c,r&&r.normal,t,!1,!i);f.text=u.normal,i||n.setTextConfig(Fq(c,t,!1));for(var s=0;s<Bd.length;s++){var h=Bd[s],o=e[h];if(o){var p=l.ensureState(h),m=!!bi(o.getShallow("show"),d);if(m!==d&&(p.ignore=!m),p.style=Xp(o,r&&r[h],t,!0,!i),p.style.text=u[h],!i){var v=n.ensureState(h);v.textConfig=Fq(o,t,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(f.x=l.style.x),l.style.y!=null&&(f.y=l.style.y),l.ignore=!d,l.useStyle(f),l.dirty(),t.enableTextSetter&&(LZe(l).setLabelText=function(g){var y=Bq(t,e,g);IZe(l,y)})}else l&&(l.ignore=!0);n.dirty()}function DZe(n,e){e=e||"label";for(var t={normal:n.getModel(e)},r=0;r<Bd.length;r++){var i=Bd[r];t[i]=n.getModel([i,e])}return t}function Xp(n,e,t,r,i){var a={};return PZe(a,n,t,r,i),e&&kn(a,e),a}function Fq(n,e,t){e=e||{};var r={},i,a=n.getShallow("rotate"),s=bi(n.getShallow("distance"),t?null:5),o=n.getShallow("offset");return i=n.getShallow("position")||(t?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),o!=null&&(r.offset=o),a!=null&&(a*=Math.PI/180,r.rotation=a),s!=null&&(r.distance=s),r.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",r}function PZe(n,e,t,r,i){t=t||wI;var a=e.ecModel,s=a&&a.option.textStyle,o=RZe(e),l;if(o){l={};for(var u in o)if(o.hasOwnProperty(u)){var c=e.getModel(["rich",u]);Vq(l[u]={},c,s,t,r,i,!1,!0)}}l&&(n.rich=l);var d=e.get("overflow");d&&(n.overflow=d);var f=e.get("minMargin");f!=null&&(n.margin=f),Vq(n,e,s,t,r,i,!0,!1)}function RZe(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||wI).rich;if(t){e=e||{};for(var r=Ga(t),i=0;i<r.length;i++){var a=r[i];e[a]=1}}n=n.parentModel}return e}var Uq=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],zq=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],Hq=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Vq(n,e,t,r,i,a,s,o){t=!i&&t||wI;var l=r&&r.inheritColor,u=e.getShallow("color"),c=e.getShallow("textBorderColor"),d=bi(e.getShallow("opacity"),t.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),a||(u=u||t.color,c=c||t.textBorderColor),u!=null&&(n.fill=u),c!=null&&(n.stroke=c);var f=bi(e.getShallow("textBorderWidth"),t.textBorderWidth);f!=null&&(n.lineWidth=f);var h=bi(e.getShallow("textBorderType"),t.textBorderType);h!=null&&(n.lineDash=h);var p=bi(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);p!=null&&(n.lineDashOffset=p),!i&&d==null&&!o&&(d=r&&r.defaultOpacity),d!=null&&(n.opacity=d),!i&&!a&&n.fill==null&&r.inheritColor&&(n.fill=r.inheritColor);for(var m=0;m<Uq.length;m++){var v=Uq[m],g=bi(e.getShallow(v),t[v]);g!=null&&(n[v]=g)}for(var m=0;m<zq.length;m++){var v=zq[m],g=e.getShallow(v);g!=null&&(n[v]=g)}if(n.verticalAlign==null){var y=e.getShallow("baseline");y!=null&&(n.verticalAlign=y)}if(!s||!r.disableBox){for(var m=0;m<Hq.length;m++){var v=Hq[m],g=e.getShallow(v);g!=null&&(n[v]=g)}var _=e.getShallow("borderType");_!=null&&(n.borderDash=_),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function kZe(n,e){var t=e&&e.getModel("textStyle");return yd([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var LZe=Os(),OZe=["textStyle","color"],_R=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],bR=new Jo,NZe=function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(OZe):null)},n.prototype.getFont=function(){return kZe({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<_R.length;r++)t[_R[r]]=this.getShallow(_R[r]);return bR.useStyle(t),bR.update(),bR.getBoundingRect()},n}();const BZe=NZe;var xue=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],FZe=I2(xue),UZe=function(){function n(){}return n.prototype.getLineStyle=function(e){return FZe(this,e)},n}(),wue=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],zZe=I2(wue),HZe=function(){function n(){}return n.prototype.getItemStyle=function(e,t){return zZe(this,e,t)},n}(),Rv=function(){function n(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return n.prototype.init=function(e,t,r){},n.prototype.mergeOption=function(e,t){Ta(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var r=this.option,i=r==null?r:r[e];if(i==null&&!t){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},n.prototype.getModel=function(e,t){var r=e!=null,i=r?this.parsePath(e):null,a=r?this._doGet(i):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new n(a,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(Mi(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!oi.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},n}();P7(Rv);cYe(Rv);vh(Rv,UZe);vh(Rv,HZe);vh(Rv,mYe);vh(Rv,BZe);const bo=Rv;var VZe=Math.round(Math.random()*10);function TI(n){return[n||"",VZe++].join("_")}function $Ze(n){var e={};n.registerSubTypeDefaulter=function(t,r){var i=_d(t);e[i.main]=r},n.determineSubType=function(t,r){var i=r.type;if(!i){var a=_d(t).main;n.hasSubTypes(t)&&e[a]&&(i=e[a](r))}return i}}function GZe(n,e){n.topologicalTravel=function(a,s,o,l){if(!a.length)return;var u=t(s),c=u.graph,d=u.noEntryList,f={};for(Bt(a,function(y){f[y]=!0});d.length;){var h=d.pop(),p=c[h],m=!!f[h];m&&(o.call(l,h,p.originalDeps.slice()),delete f[h]),Bt(p.successor,m?g:v)}Bt(f,function(){var y="";throw new Error(y)});function v(y){c[y].entryCount--,c[y].entryCount===0&&d.push(y)}function g(y){f[y]=!0,v(y)}};function t(a){var s={},o=[];return Bt(a,function(l){var u=r(s,l),c=u.originalDeps=e(l),d=i(c,a);u.entryCount=d.length,u.entryCount===0&&o.push(l),Bt(d,function(f){da(u.predecessor,f)<0&&u.predecessor.push(f);var h=r(s,f);da(h.successor,f)<0&&h.successor.push(l)})}),{graph:s,noEntryList:o}}function r(a,s){return a[s]||(a[s]={predecessor:[],successor:[]}),a[s]}function i(a,s){var o=[];return Bt(a,function(l){da(s,l)>=0&&o.push(l)}),o}}function WZe(n,e){return Ta(Ta({},n,!0),e,!0)}const qZe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},jZe={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var f3="ZH",q7="EN",D2=q7,DE={},j7={},Tue=oi.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return n.indexOf(f3)>-1?f3:D2}():D2;function Cue(n,e){n=n.toUpperCase(),j7[n]=new bo(e),DE[n]=e}function KZe(n){if(Lr(n)){var e=DE[n.toUpperCase()]||{};return n===f3||n===q7?Mi(e):Ta(Mi(e),Mi(DE[D2]),!1)}else return Ta(Mi(n),Mi(DE[D2]),!1)}function XZe(n){return j7[n]}function YZe(){return j7[D2]}Cue(q7,qZe);Cue(f3,jZe);function Rh(n,e){return n+="","0000".substr(0,e-n.length)+n}function Aue(n,e,t,r){var i=vI(n),a=i[QZe(t)](),s=i[ZZe(t)]()+1,o=Math.floor((s-1)/3)+1,l=i[JZe(t)](),u=i["get"+(t?"UTC":"")+"Day"](),c=i[eJe(t)](),d=(c-1)%12+1,f=i[tJe(t)](),h=i[nJe(t)](),p=i[rJe(t)](),m=r instanceof bo?r:XZe(r||Tue)||YZe(),v=m.getModel("time"),g=v.get("month"),y=v.get("monthAbbr"),_=v.get("dayOfWeek"),b=v.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,Rh(a%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,g[s-1]).replace(/{MMM}/g,y[s-1]).replace(/{MM}/g,Rh(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,Rh(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,_[u]).replace(/{ee}/g,b[u]).replace(/{e}/g,u+"").replace(/{HH}/g,Rh(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,Rh(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,Rh(f,2)).replace(/{m}/g,f+"").replace(/{ss}/g,Rh(h,2)).replace(/{s}/g,h+"").replace(/{SSS}/g,Rh(p,3)).replace(/{S}/g,p+"")}function QZe(n){return n?"getUTCFullYear":"getFullYear"}function ZZe(n){return n?"getUTCMonth":"getMonth"}function JZe(n){return n?"getUTCDate":"getDate"}function eJe(n){return n?"getUTCHours":"getHours"}function tJe(n){return n?"getUTCMinutes":"getMinutes"}function nJe(n){return n?"getUTCSeconds":"getSeconds"}function rJe(n){return n?"getUTCMilliseconds":"getMilliseconds"}function iJe(n){if(!GXe(n))return Lr(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function Eue(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var CI=Hoe;function oO(n,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&yd(c)?c:"-"}function a(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var s=e==="time",o=n instanceof Date;if(s||o){var l=s?vI(n):n;if(isNaN(+l)){if(o)return"-"}else return Aue(l,r,t)}if(e==="ordinal")return I6(n)?i(n):Wa(n)&&a(n)?n+"":"-";var u=o3(n);return a(u)?iJe(u):I6(n)?i(n):typeof n=="boolean"?n+"":"-"}var $q=["a","b","c","d","e","f","g"],SR=function(n,e){return"{"+n+(e??"")+"}"};function Mue(n,e,t){br(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var s=$q[a];n=n.replace(SR(s),SR(s,0))}for(var o=0;o<r;o++)for(var l=0;l<i.length;l++){var u=e[o][i[l]];n=n.replace(SR($q[l],o),t?Eu(u):u)}return n}function aJe(n,e){var t=Lr(n)?{color:n,extraCssText:e}:n||{},r=t.color,i=t.type;e=t.extraCssText;var a=t.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Eu(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Eu(r)+";"+(e||"")+'"></span>';var s=t.markerId||"markerX";return{renderMode:a,content:"{"+s+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function P2(n,e){return e=e||"transparent",Lr(n)?n:Ur(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function Gq(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var PE=Bt,sJe=["left","right","top","bottom","width","height"],vC=[["width","left","right"],["height","top","bottom"]];function K7(n,e,t,r,i){var a=0,s=0;r==null&&(r=1/0),i==null&&(i=1/0);var o=0;e.eachChild(function(l,u){var c=l.getBoundingRect(),d=e.childAt(u+1),f=d&&d.getBoundingRect(),h,p;if(n==="horizontal"){var m=c.width+(f?-f.x+c.x:0);h=a+m,h>r||l.newline?(a=0,h=m,s+=o+t,o=c.height):o=Math.max(o,c.height)}else{var v=c.height+(f?-f.y+c.y:0);p=s+v,p>i||l.newline?(a+=o+t,s=0,p=v,o=c.width):o=Math.max(o,c.width)}l.newline||(l.x=a,l.y=s,l.markRedraw(),n==="horizontal"?a=h+t:s=p+t)})}var mx=K7;fs(K7,"vertical");fs(K7,"horizontal");function R2(n,e,t){t=CI(t||0);var r=e.width,i=e.height,a=us(n.left,r),s=us(n.top,i),o=us(n.right,r),l=us(n.bottom,i),u=us(n.width,r),c=us(n.height,i),d=t[2]+t[0],f=t[1]+t[3],h=n.aspect;switch(isNaN(u)&&(u=r-o-f-a),isNaN(c)&&(c=i-l-d-s),h!=null&&(isNaN(u)&&isNaN(c)&&(h>r/i?u=r*.8:c=i*.8),isNaN(u)&&(u=h*c),isNaN(c)&&(c=u/h)),isNaN(a)&&(a=r-o-u-f),isNaN(s)&&(s=i-l-c-d),n.left||n.right){case"center":a=r/2-u/2-t[3];break;case"right":a=r-u-f;break}switch(n.top||n.bottom){case"middle":case"center":s=i/2-c/2-t[0];break;case"bottom":s=i-c-d;break}a=a||0,s=s||0,isNaN(u)&&(u=r-f-a-(o||0)),isNaN(c)&&(c=i-d-s-(l||0));var p=new Zi(a+t[3],s+t[0],u,c);return p.margin=t,p}function h3(n){var e=n.layoutMode||n.constructor.layoutMode;return Ur(e)?e:e?{type:e}:null}function k2(n,e,t){var r=t&&t.ignoreSize;!br(r)&&(r=[r,r]);var i=s(vC[0],0),a=s(vC[1],1);u(vC[0],n,i),u(vC[1],n,a);function s(c,d){var f={},h=0,p={},m=0,v=2;if(PE(c,function(_){p[_]=n[_]}),PE(c,function(_){o(e,_)&&(f[_]=p[_]=e[_]),l(f,_)&&h++,l(p,_)&&m++}),r[d])return l(e,c[1])?p[c[2]]=null:l(e,c[2])&&(p[c[1]]=null),p;if(m===v||!h)return p;if(h>=v)return f;for(var g=0;g<c.length;g++){var y=c[g];if(!o(f,y)&&o(n,y)){f[y]=n[y];break}}return f}function o(c,d){return c.hasOwnProperty(d)}function l(c,d){return c[d]!=null&&c[d]!=="auto"}function u(c,d,f){PE(c,function(h){d[h]=f[h]})}}function X7(n){return oJe({},n)}function oJe(n,e){return e&&n&&PE(sJe,function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}var lJe=Os(),K_=function(n){Dr(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.uid=TI("ec_cpt_model"),a}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=h3(this),a=i?X7(t):{},s=r.getTheme();Ta(t,s.get(this.mainType)),Ta(t,this.getDefaultOption()),i&&k2(t,a,i)},e.prototype.mergeOption=function(t,r){Ta(this.option,t,!0);var i=h3(this);i&&k2(this.option,t,i)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!oYe(t))return t.defaultOption;var r=lJe(this);if(!r.defaultOption){for(var i=[],a=t;a;){var s=a.prototype.defaultOption;s&&i.push(s),a=a.superClass}for(var o={},l=i.length-1;l>=0;l--)o=Ta(o,i[l],!0);r.defaultOption=o}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var i=t+"Index",a=t+"Id";return Vw(this.ecModel,t,{index:this.get(i,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(bo);Cle(K_,bo);R7(K_);$Ze(K_);GZe(K_,uJe);function uJe(n){var e=[];return Bt(K_.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=Ti(e,function(t){return _d(t).main}),n!=="dataset"&&da(e,"dataset")<=0&&e.unshift("dataset"),e}const Da=K_;var Iue="";typeof navigator<"u"&&(Iue=navigator.platform||"");var Cg="rgba(0, 0, 0, 0.2)";const cJe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Cg,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Cg,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Cg,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Cg,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Cg,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Cg,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Iue.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var Due=Si(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Wd="original",Ml="arrayRows",qc="objectRows",qd="keyedColumns",Cp="typedArray",Pue="unknown",Ff="column",X_="row",Us={Must:1,Might:2,Not:3},dJe=Os();function fJe(n){dJe(n).datasetMap=Si()}function hJe(n,e,t){var r={},i=Rue(n);if(!i)return r;var a=e.sourceFormat,s=e.dimensionsDefine,o;(a===qc||a===qd)&&Bt(s,function(c,d){(Ur(c)?c.name:c)==="name"&&(o=d)});var l=function(){for(var c={},d={},f=[],h=0,p=Math.min(5,t);h<p;h++){var m=Lue(e.data,a,e.seriesLayoutBy,s,e.startIndex,h);f.push(m);var v=m===Us.Not;if(v&&c.v==null&&h!==o&&(c.v=h),(c.n==null||c.n===c.v||!v&&f[c.n]===Us.Not)&&(c.n=h),g(c)&&f[c.n]!==Us.Not)return c;v||(m===Us.Might&&d.v==null&&h!==o&&(d.v=h),(d.n==null||d.n===d.v)&&(d.n=h))}function g(y){return y.v!=null&&y.n!=null}return g(c)?c:g(d)?d:null}();if(l){r.value=[l.v];var u=o??l.n;r.itemName=[u],r.seriesName=[u]}return r}function Rue(n){var e=n.get("data",!0);if(!e)return Vw(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},D7).models[0]}function pJe(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:Vw(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},D7).models}function kue(n,e){return Lue(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function Lue(n,e,t,r,i,a){var s,o=5;if(su(n))return Us.Not;var l,u;if(r){var c=r[a];Ur(c)?(l=c.name,u=c.type):Lr(c)&&(l=c)}if(u!=null)return u==="ordinal"?Us.Must:Us.Not;if(e===Ml){var d=n;if(t===X_){for(var f=d[a],h=0;h<(f||[]).length&&h<o;h++)if((s=b(f[i+h]))!=null)return s}else for(var h=0;h<d.length&&h<o;h++){var p=d[i+h];if(p&&(s=b(p[a]))!=null)return s}}else if(e===qc){var m=n;if(!l)return Us.Not;for(var h=0;h<m.length&&h<o;h++){var v=m[h];if(v&&(s=b(v[l]))!=null)return s}}else if(e===qd){var g=n;if(!l)return Us.Not;var f=g[l];if(!f||su(f))return Us.Not;for(var h=0;h<f.length&&h<o;h++)if((s=b(f[h]))!=null)return s}else if(e===Wd)for(var y=n,h=0;h<y.length&&h<o;h++){var v=y[h],_=gI(v);if(!br(_))return Us.Not;if((s=b(_[a]))!=null)return s}function b(x){var w=Lr(x);if(x!=null&&isFinite(x)&&x!=="")return w?Us.Might:Us.Not;if(w&&x!=="-")return Us.Must}return Us.Not}var mJe=Si();function vJe(n,e,t){var r=mJe.get(e);if(!r)return t;var i=r(n);return i?t.concat(i):t}var Wq=Os();Os();var Y7=function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,r){var i=Xo(this.get("color",!0)),a=this.get("colorLayer",!0);return yJe(this,Wq,i,a,e,t,r)},n.prototype.clearColorPalette=function(){_Je(this,Wq)},n}();function gJe(n,e){for(var t=n.length,r=0;r<t;r++)if(n[r].length>e)return n[r];return n[t-1]}function yJe(n,e,t,r,i,a,s){a=a||n;var o=e(a),l=o.paletteIdx||0,u=o.paletteNameMap=o.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=s==null||!r?t:gJe(r,s);if(c=c||t,!(!c||!c.length)){var d=c[l];return i&&(u[i]=d),o.paletteIdx=(l+1)%c.length,d}}function _Je(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var gC,Yb,qq,jq="\0_ec_inner",bJe=1,Oue=function(n){Dr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,r,i,a,s,o){a=a||{},this.option=null,this._theme=new bo(a),this._locale=new bo(s),this._optionManager=o},e.prototype.setOption=function(t,r,i){var a=Yq(r);this._optionManager.setOption(t,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(t,r){return this._resetOption(t,Yq(r))},e.prototype._resetOption=function(t,r){var i=!1,a=this._optionManager;if(!t||t==="recreate"){var s=a.mountOption(t==="recreate");!this.option||t==="recreate"?qq(this,s):(this.restoreData(),this._mergeOption(s,r)),i=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var o=a.getTimelineOption(this);o&&(i=!0,this._mergeOption(o,r))}if(!t||t==="recreate"||t==="media"){var l=a.getMediaOption(this);l.length&&Bt(l,function(u){i=!0,this._mergeOption(u,r)},this)}return i},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var i=this.option,a=this._componentsMap,s=this._componentsCount,o=[],l=Si(),u=r&&r.replaceMergeMainTypeMap;fJe(this),Bt(t,function(d,f){d!=null&&(Da.hasClass(f)?f&&(o.push(f),l.set(f,!0)):i[f]=i[f]==null?Mi(d):Ta(i[f],d,!0))}),u&&u.each(function(d,f){Da.hasClass(f)&&!l.get(f)&&(o.push(f),l.set(f,!0))}),Da.topologicalTravel(o,Da.getAllClassMainTypes(),c,this);function c(d){var f=vJe(this,d,Xo(t[d])),h=a.get(d),p=h?u&&u.get(d)?"replaceMerge":"normalMerge":"replaceAll",m=jXe(h,f,p);eYe(m,d,Da),i[d]=null,a.set(d,null),s.set(d,0);var v=[],g=[],y=0,_;Bt(m,function(b,x){var w=b.existing,A=b.newOption;if(!A)w&&(w.mergeOption({},this),w.optionUpdated({},!1));else{var T=d==="series",C=Da.getClass(d,b.keyInfo.subType,!T);if(!C)return;if(d==="tooltip"){if(_)return;_=!0}if(w&&w.constructor===C)w.name=b.keyInfo.name,w.mergeOption(A,this),w.optionUpdated(A,!1);else{var E=kn({componentIndex:x},b.keyInfo);w=new C(A,this,this,E),kn(w,E),b.brandNew&&(w.__requireNewView=!0),w.init(A,this,this),w.optionUpdated(null,!0)}}w?(v.push(w.option),g.push(w),y++):(v.push(void 0),g.push(void 0))},this),i[d]=v,a.set(d,g),s.set(d,y),d==="series"&&gC(this)}this._seriesIndices||gC(this)},e.prototype.getOption=function(){var t=Mi(this.option);return Bt(t,function(r,i){if(Da.hasClass(i)){for(var a=Xo(r),s=a.length,o=!1,l=s-1;l>=0;l--)a[l]&&!M2(a[l])?o=!0:(a[l]=null,!o&&s--);a.length=s,t[i]=a}}),delete t[jq],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var i=this._componentsMap.get(t);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var s=0;s<i.length;s++)if(i[s])return i[s]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var i=t.index,a=t.id,s=t.name,o=this._componentsMap.get(r);if(!o||!o.length)return[];var l;return i!=null?(l=[],Bt(Xo(i),function(u){o[u]&&l.push(o[u])})):a!=null?l=Kq("id",a,o):s!=null?l=Kq("name",s,o):l=Au(o,function(u){return!!u}),Xq(l,t)},e.prototype.findComponents=function(t){var r=t.query,i=t.mainType,a=o(r),s=a?this.queryComponents(a):Au(this._componentsMap.get(i),function(u){return!!u});return l(Xq(s,t));function o(u){var c=i+"Index",d=i+"Id",f=i+"Name";return u&&(u[c]!=null||u[d]!=null||u[f]!=null)?{mainType:i,index:u[c],id:u[d],name:u[f]}:null}function l(u){return t.filter?Au(u,t.filter):u}},e.prototype.eachComponent=function(t,r,i){var a=this._componentsMap;if(Gi(t)){var s=r,o=t;a.each(function(d,f){for(var h=0;d&&h<d.length;h++){var p=d[h];p&&o.call(s,f,p,p.componentIndex)}})}else for(var l=Lr(t)?a.get(t):Ur(t)?this.findComponents(t):null,u=0;l&&u<l.length;u++){var c=l[u];c&&r.call(i,c,c.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=Id(t,null);return Au(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return Au(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return Au(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){Yb(this),Bt(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];t.call(r,a,i)},this)},e.prototype.eachRawSeries=function(t,r){Bt(this._componentsMap.get("series"),function(i){i&&t.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,i){Yb(this),Bt(this._seriesIndices,function(a){var s=this._componentsMap.get("series")[a];s.subType===t&&r.call(i,s,a)},this)},e.prototype.eachRawSeriesByType=function(t,r,i){return Bt(this.getSeriesByType(t),r,i)},e.prototype.isSeriesFiltered=function(t){return Yb(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){Yb(this);var i=[];Bt(this._seriesIndices,function(a){var s=this._componentsMap.get("series")[a];t.call(r,s,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=Si(i)},e.prototype.restoreData=function(t){gC(this);var r=this._componentsMap,i=[];r.each(function(a,s){Da.hasClass(s)&&i.push(s)}),Da.topologicalTravel(i,Da.getAllClassMainTypes(),function(a){Bt(r.get(a),function(s){s&&(a!=="series"||!SJe(s,t))&&s.restoreData()})})},e.internalField=function(){gC=function(t){var r=t._seriesIndices=[];Bt(t._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),t._seriesIndicesMap=Si(r)},Yb=function(t){},qq=function(t,r){t.option={},t.option[jq]=bJe,t._componentsMap=Si({series:[]}),t._componentsCount=Si();var i=r.aria;Ur(i)&&i.enabled==null&&(i.enabled=!0),xJe(r,t._theme.option),Ta(r,cJe,!1),t._mergeOption(r,null)}}(),e}(bo);function SJe(n,e){if(e){var t=e.seriesIndex,r=e.seriesId,i=e.seriesName;return t!=null&&n.componentIndex!==t||r!=null&&n.id!==r||i!=null&&n.name!==i}}function xJe(n,e){var t=n.color&&!n.colorLayer;Bt(e,function(r,i){i==="colorLayer"&&t||Da.hasClass(i)||(typeof r=="object"?n[i]=n[i]?Ta(n[i],r,!1):Mi(r):n[i]==null&&(n[i]=r))})}function Kq(n,e,t){if(br(e)){var r=Si();return Bt(e,function(a){if(a!=null){var s=Id(a,null);s!=null&&r.set(a,!0)}}),Au(t,function(a){return a&&r.get(a[n])})}else{var i=Id(e,null);return Au(t,function(a){return a&&i!=null&&a[n]===i})}}function Xq(n,e){return e.hasOwnProperty("subType")?Au(n,function(t){return t&&t.subType===e.subType}):n}function Yq(n){var e=Si();return n&&Bt(Xo(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}vh(Oue,Y7);const Nue=Oue;var wJe=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],TJe=function(){function n(e){Bt(wJe,function(t){this[t]=fa(e[t],e)},this)}return n}();const Bue=TJe;var xR={},CJe=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(e,t){var r=[];Bt(xR,function(i,a){var s=i.create(e,t);r=r.concat(s||[])}),this._coordinateSystems=r},n.prototype.update=function(e,t){Bt(this._coordinateSystems,function(r){r.update&&r.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(e,t){xR[e]=t},n.get=function(e){return xR[e]},n}();const Fue=CJe;var AJe=/^(min|max)?(.+)$/,EJe=function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,r){e&&(Bt(Xo(e.series),function(s){s&&s.data&&su(s.data)&&D6(s.data)}),Bt(Xo(e.dataset),function(s){s&&s.source&&su(s.source)&&D6(s.source)})),e=Mi(e);var i=this._optionBackup,a=MJe(e,t,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Mi(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(t=Mi(r[i.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,s=[],o=[];if(!i.length&&!a)return o;for(var l=0,u=i.length;l<u;l++)IJe(i[l].query,t,r)&&s.push(l);return!s.length&&a&&(s=[-1]),s.length&&!PJe(s,this._currentMediaIndices)&&(o=Ti(s,function(c){return Mi(c===-1?a.option:i[c].option)})),this._currentMediaIndices=s,o},n}();function MJe(n,e,t){var r=[],i,a,s=n.baseOption,o=n.timeline,l=n.options,u=n.media,c=!!n.media,d=!!(l||o||s&&s.timeline);s?(a=s,a.timeline||(a.timeline=o)):((d||c)&&(n.options=n.media=null),a=n),c&&br(u)&&Bt(u,function(h){h&&h.option&&(h.query?r.push(h):i||(i=h))}),f(a),Bt(l,function(h){return f(h)}),Bt(r,function(h){return f(h.option)});function f(h){Bt(e,function(p){p(h,t)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function IJe(n,e,t){var r={width:e,height:t,aspectratio:e/t},i=!0;return Bt(n,function(a,s){var o=s.match(AJe);if(!(!o||!o[1]||!o[2])){var l=o[1],u=o[2].toLowerCase();DJe(r[u],a,l)||(i=!1)}}),i}function DJe(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function PJe(n,e){return n.join(",")===e.join(",")}const RJe=EJe;var cc=Bt,L2=Ur,Qq=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function wR(n){var e=n&&n.itemStyle;if(e)for(var t=0,r=Qq.length;t<r;t++){var i=Qq[t],a=e.normal,s=e.emphasis;a&&a[i]&&(n[i]=n[i]||{},n[i].normal?Ta(n[i].normal,a[i]):n[i].normal=a[i],a[i]=null),s&&s[i]&&(n[i]=n[i]||{},n[i].emphasis?Ta(n[i].emphasis,s[i]):n[i].emphasis=s[i],s[i]=null)}}function po(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var r=n[e].normal,i=n[e].emphasis;r&&(t?(n[e].normal=n[e].emphasis=null,Aa(n[e],r)):n[e]=r),i&&(n.emphasis=n.emphasis||{},n.emphasis[e]=i,i.focus&&(n.emphasis.focus=i.focus),i.blurScope&&(n.emphasis.blurScope=i.blurScope))}}function US(n){po(n,"itemStyle"),po(n,"lineStyle"),po(n,"areaStyle"),po(n,"label"),po(n,"labelLine"),po(n,"upperLabel"),po(n,"edgeLabel")}function Fa(n,e){var t=L2(n)&&n[e],r=L2(t)&&t.textStyle;if(r)for(var i=0,a=tq.length;i<a;i++){var s=tq[i];r.hasOwnProperty(s)&&(t[s]=r[s])}}function Su(n){n&&(US(n),Fa(n,"label"),n.emphasis&&Fa(n.emphasis,"label"))}function kJe(n){if(L2(n)){wR(n),US(n),Fa(n,"label"),Fa(n,"upperLabel"),Fa(n,"edgeLabel"),n.emphasis&&(Fa(n.emphasis,"label"),Fa(n.emphasis,"upperLabel"),Fa(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(wR(e),Su(e));var t=n.markLine;t&&(wR(t),Su(t));var r=n.markArea;r&&Su(r);var i=n.data;if(n.type==="graph"){i=i||n.nodes;var a=n.links||n.edges;if(a&&!su(a))for(var s=0;s<a.length;s++)Su(a[s]);Bt(n.categories,function(u){US(u)})}if(i&&!su(i))for(var s=0;s<i.length;s++)Su(i[s]);if(e=n.markPoint,e&&e.data)for(var o=e.data,s=0;s<o.length;s++)Su(o[s]);if(t=n.markLine,t&&t.data)for(var l=t.data,s=0;s<l.length;s++)br(l[s])?(Su(l[s][0]),Su(l[s][1])):Su(l[s]);n.type==="gauge"?(Fa(n,"axisLabel"),Fa(n,"title"),Fa(n,"detail")):n.type==="treemap"?(po(n.breadcrumb,"itemStyle"),Bt(n.levels,function(u){US(u)})):n.type==="tree"&&US(n.leaves)}}function ef(n){return br(n)?n:n?[n]:[]}function Zq(n){return(br(n)?n[0]:n)||{}}function LJe(n,e){cc(ef(n.series),function(r){L2(r)&&kJe(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),cc(t,function(r){cc(ef(n[r]),function(i){i&&(Fa(i,"axisLabel"),Fa(i.axisPointer,"label"))})}),cc(ef(n.parallel),function(r){var i=r&&r.parallelAxisDefault;Fa(i,"axisLabel"),Fa(i&&i.axisPointer,"label")}),cc(ef(n.calendar),function(r){po(r,"itemStyle"),Fa(r,"dayLabel"),Fa(r,"monthLabel"),Fa(r,"yearLabel")}),cc(ef(n.radar),function(r){Fa(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),cc(ef(n.geo),function(r){L2(r)&&(Su(r),cc(ef(r.regions),function(i){Su(i)}))}),cc(ef(n.timeline),function(r){Su(r),po(r,"label"),po(r,"itemStyle"),po(r,"controlStyle",!0);var i=r.data;br(i)&&Bt(i,function(a){Ur(a)&&(po(a,"label"),po(a,"itemStyle"))})}),cc(ef(n.toolbox),function(r){po(r,"iconStyle"),cc(r.feature,function(i){po(i,"iconStyle")})}),Fa(Zq(n.axisPointer),"label"),Fa(Zq(n.tooltip).axisPointer,"label")}function OJe(n,e){for(var t=e.split(","),r=n,i=0;i<t.length&&(r=r&&r[t[i]],r!=null);i++);return r}function NJe(n,e,t,r){for(var i=e.split(","),a=n,s,o=0;o<i.length-1;o++)s=i[o],a[s]==null&&(a[s]={}),a=a[s];(r||a[i[o]]==null)&&(a[i[o]]=t)}function Jq(n){n&&Bt(BJe,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var BJe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],FJe=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],TR=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Qb(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<TR.length;t++){var r=TR[t][1],i=TR[t][0];e[r]!=null&&(e[i]=e[r])}}function ej(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function tj(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function UJe(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function Uue(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&Uue(n[t].children,e)}function zue(n,e){LJe(n,e),n.series=Xo(n.series),Bt(n.series,function(t){if(Ur(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),ej(t.label);var i=t.data;if(i&&!su(i))for(var a=0;a<i.length;a++)ej(i[a]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var s=OJe(t,"pointer.color");s!=null&&NJe(t,"itemStyle.color",s)}else if(r==="bar"){Qb(t),Qb(t.backgroundStyle),Qb(t.emphasis);var i=t.data;if(i&&!su(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(Qb(i[a]),Qb(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),tj(t),Uue(t.data,tj)}else r==="graph"||r==="sankey"?UJe(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Aa(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),Jq(t)}}),n.dataRange&&(n.visualMap=n.dataRange),Bt(FJe,function(t){var r=n[t];r&&(br(r)||(r=[r]),Bt(r,function(i){Jq(i)}))})}function zJe(n){var e=Si();n.eachSeries(function(t){var r=t.get("stack");if(r){var i=e.get(r)||e.set(r,[]),a=t.getData(),s={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:t};if(!s.stackedDimension||!(s.isStackedByIndex||s.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(s)}}),e.each(HJe)}function HJe(n){Bt(n,function(e,t){var r=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],s=e.data,o=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";s.modify(a,function(u,c,d){var f=s.get(e.stackedDimension,d);if(isNaN(f))return i;var h,p;o?p=s.getRawIndex(d):h=s.get(e.stackedByDimension,d);for(var m=NaN,v=t-1;v>=0;v--){var g=n[v];if(o||(p=g.data.rawIndexOf(g.stackedByDimension,h)),p>=0){var y=g.data.getByRawIndex(g.stackResultDimension,p);if(l==="all"||l==="positive"&&y>0||l==="negative"&&y<0||l==="samesign"&&f>=0&&y>0||l==="samesign"&&f<=0&&y<0){f=VXe(f,y),m=y;break}}}return r[0]=f,r[1]=m,r})})}var AI=function(){function n(e){this.data=e.data||(e.sourceFormat===qd?{}:[]),this.sourceFormat=e.sourceFormat||Pue,this.seriesLayoutBy=e.seriesLayoutBy||Ff,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var i=t[r];i.type==null&&kue(this,r)===Us.Must&&(i.type="ordinal")}}return n}();function Q7(n){return n instanceof AI}function lO(n,e,t){t=t||Vue(n);var r=e.seriesLayoutBy,i=$Je(n,t,r,e.sourceHeader,e.dimensions),a=new AI({data:n,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Mi(e)});return a}function Hue(n){return new AI({data:n,sourceFormat:su(n)?Cp:Wd})}function VJe(n){return new AI({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:Mi(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function Vue(n){var e=Pue;if(su(n))e=Cp;else if(br(n)){n.length===0&&(e=Ml);for(var t=0,r=n.length;t<r;t++){var i=n[t];if(i!=null){if(br(i)){e=Ml;break}else if(Ur(i)){e=qc;break}}}}else if(Ur(n)){for(var a in n)if(Z1(n,a)&&El(n[a])){e=qd;break}}return e}function $Je(n,e,t,r,i){var a,s;if(!n)return{dimensionsDefine:nj(i),startIndex:s,dimensionsDetectedCount:a};if(e===Ml){var o=n;r==="auto"||r==null?rj(function(u){u!=null&&u!=="-"&&(Lr(u)?s==null&&(s=1):s=0)},t,o,10):s=Wa(r)?r:r?1:0,!i&&s===1&&(i=[],rj(function(u,c){i[c]=u!=null?u+"":""},t,o,1/0)),a=i?i.length:t===X_?o.length:o[0]?o[0].length:null}else if(e===qc)i||(i=GJe(n));else if(e===qd)i||(i=[],Bt(n,function(u,c){i.push(c)}));else if(e===Wd){var l=gI(n[0]);a=br(l)&&l.length||1}return{startIndex:s,dimensionsDefine:nj(i),dimensionsDetectedCount:a}}function GJe(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t)return Ga(t)}function nj(n){if(n){var e=Si();return Ti(n,function(t,r){t=Ur(t)?t:{name:t};var i={name:t.name,displayName:t.displayName,type:t.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function rj(n,e,t,r){if(e===X_)for(var i=0;i<t.length&&i<r;i++)n(t[i]?t[i][0]:null,i);else for(var a=t[0]||[],i=0;i<a.length&&i<r;i++)n(a[i],i)}function $ue(n){var e=n.sourceFormat;return e===qc||e===qd}var Gm,Wm,qm,ij,aj,Gue=function(){function n(e,t){var r=Q7(e)?e:Hue(e);this._source=r;var i=this._data=r.data;r.sourceFormat===Cp&&(this._offset=0,this._dimSize=t,this._data=i),aj(this,i,r)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=function(){var e=n.prototype;e.pure=!1,e.persistent=!0}(),n.internalField=function(){var e;aj=function(s,o,l){var u=l.sourceFormat,c=l.seriesLayoutBy,d=l.startIndex,f=l.dimensionsDefine,h=ij[Z7(u,c)];if(kn(s,h),u===Cp)s.getItem=t,s.count=i,s.fillStorage=r;else{var p=Wue(u,c);s.getItem=fa(p,null,o,d,f);var m=que(u,c);s.count=fa(m,null,o,d,f)}};var t=function(s,o){s=s-this._offset,o=o||[];for(var l=this._data,u=this._dimSize,c=u*s,d=0;d<u;d++)o[d]=l[c+d];return o},r=function(s,o,l,u){for(var c=this._data,d=this._dimSize,f=0;f<d;f++){for(var h=u[f],p=h[0]==null?1/0:h[0],m=h[1]==null?-1/0:h[1],v=o-s,g=l[f],y=0;y<v;y++){var _=c[y*d+f];g[s+y]=_,_<p&&(p=_),_>m&&(m=_)}h[0]=p,h[1]=m}},i=function(){return this._data?this._data.length/this._dimSize:0};ij=(e={},e[Ml+"_"+Ff]={pure:!0,appendData:a},e[Ml+"_"+X_]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[qc]={pure:!0,appendData:a},e[qd]={pure:!0,appendData:function(s){var o=this._data;Bt(s,function(l,u){for(var c=o[u]||(o[u]=[]),d=0;d<(l||[]).length;d++)c.push(l[d])})}},e[Wd]={appendData:a},e[Cp]={persistent:!1,pure:!0,appendData:function(s){this._data=s},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(s){for(var o=0;o<s.length;o++)this._data.push(s[o])}}(),n}(),sj=function(n,e,t,r){return n[r]},WJe=(Gm={},Gm[Ml+"_"+Ff]=function(n,e,t,r){return n[r+e]},Gm[Ml+"_"+X_]=function(n,e,t,r,i){r+=e;for(var a=i||[],s=n,o=0;o<s.length;o++){var l=s[o];a[o]=l?l[r]:null}return a},Gm[qc]=sj,Gm[qd]=function(n,e,t,r,i){for(var a=i||[],s=0;s<t.length;s++){var o=t[s].name,l=n[o];a[s]=l?l[r]:null}return a},Gm[Wd]=sj,Gm);function Wue(n,e){var t=WJe[Z7(n,e)];return t}var oj=function(n,e,t){return n.length},qJe=(Wm={},Wm[Ml+"_"+Ff]=function(n,e,t){return Math.max(0,n.length-e)},Wm[Ml+"_"+X_]=function(n,e,t){var r=n[0];return r?Math.max(0,r.length-e):0},Wm[qc]=oj,Wm[qd]=function(n,e,t){var r=t[0].name,i=n[r];return i?i.length:0},Wm[Wd]=oj,Wm);function que(n,e){var t=qJe[Z7(n,e)];return t}var CR=function(n,e,t){return n[e]},jJe=(qm={},qm[Ml]=CR,qm[qc]=function(n,e,t){return n[t]},qm[qd]=CR,qm[Wd]=function(n,e,t){var r=gI(n);return r instanceof Array?r[e]:r},qm[Cp]=CR,qm);function jue(n){var e=jJe[n];return e}function Z7(n,e){return n===Ml?n+"_"+e:n}function p3(n,e,t){if(n){var r=n.getRawDataItem(e);if(r!=null){var i=n.getStore(),a=i.getSource().sourceFormat;if(t!=null){var s=n.getDimensionIndex(t),o=i.getDimensionProperty(s);return jue(a)(r,s,o)}else{var l=r;return a===Wd&&(l=gI(r)),l}}}}var KJe=/\{@(.+?)\}/g,XJe=function(){function n(){}return n.prototype.getDataParams=function(e,t){var r=this.getData(t),i=this.getRawValue(e,t),a=r.getRawIndex(e),s=r.getName(e),o=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),u=l&&l[r.getItemVisual(e,"drawType")||"fill"],c=l&&l.stroke,d=this.mainType,f=d==="series",h=r.userOutput&&r.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:s,dataIndex:a,data:o,dataType:t,value:i,color:u,borderColor:c,dimensionNames:h?h.fullDimensions:null,encode:h?h.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,r,i,a,s){t=t||"normal";var o=this.getData(r),l=this.getDataParams(e,r);if(s&&(l.value=s.interpolatedValue),i!=null&&br(l.value)&&(l.value=l.value[i]),!a){var u=o.getItemModel(e);a=u.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(Gi(a))return l.status=t,l.dimensionIndex=i,a(l);if(Lr(a)){var c=Mue(a,l);return c.replace(KJe,function(d,f){var h=f.length,p=f;p.charAt(0)==="["&&p.charAt(h-1)==="]"&&(p=+p.slice(1,h-1));var m=p3(o,e,p);if(s&&br(s.interpolatedValue)){var v=o.getDimensionIndex(p);v>=0&&(m=s.interpolatedValue[v])}return m!=null?m+"":""})}},n.prototype.getRawValue=function(e,t){return p3(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,r){},n}();function lj(n){var e,t;return Ur(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function vx(n){return new YJe(n)}var YJe=function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var i=this.context;i.data=i.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var s=c(this._modBy),o=this._modDataCount||0,l=c(e&&e.modBy),u=e&&e.modDataCount||0;(s!==l||o!==u)&&(a="reset");function c(y){return!(y>=1)&&(y=1),y}var d;(this._dirty||a==="reset")&&(this._dirty=!1,d=this._doReset(r)),this._modBy=l,this._modDataCount=u;var f=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,p=Math.min(f!=null?this._dueIndex+f:1/0,this._dueEnd);if(!r&&(d||h<p)){var m=this._progress;if(br(m))for(var v=0;v<m.length;v++)this._doProgress(m[v],h,p,l,u);else this._doProgress(m,h,p,l,u)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,r,i,a){uj.reset(t,r,i,a),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:uj.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),br(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n}(),uj=function(){var n,e,t,r,i,a={reset:function(l,u,c,d){e=l,n=u,t=c,r=d,i=Math.ceil(r/t),a.next=t>1&&r>0?o:s}};return a;function s(){return e<n?e++:null}function o(){var l=e%i*t+Math.ceil(e/i),u=e>=n?null:l<r?l:e;return e++,u}}();function RE(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!Wa(n)&&n!=null&&n!=="-"&&(n=+vI(n)),n==null||n===""?NaN:+n)}Si({number:function(n){return parseFloat(n)},time:function(n){return+vI(n)},trim:function(n){return Lr(n)?yd(n):n}});var QJe=function(){function n(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var r=Wa(e)?e:o3(e),i=Wa(t)?t:o3(t),a=isNaN(r),s=isNaN(i);if(a&&(r=this._incomparable),s&&(i=this._incomparable),a&&s){var o=Lr(e),l=Lr(t);o&&(r=l?e:0),l&&(i=o?t:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},n}(),ZJe=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return RE(e,t)},n}();function JJe(n,e){var t=new ZJe,r=n.data,i=t.sourceFormat=n.sourceFormat,a=n.startIndex,s="";n.seriesLayoutBy!==Ff&&fl(s);var o=[],l={},u=n.dimensionsDefine;if(u)Bt(u,function(m,v){var g=m.name,y={index:v,name:g,displayName:m.displayName};if(o.push(y),g!=null){var _="";Z1(l,g)&&fl(_),l[g]=y}});else for(var c=0;c<n.dimensionsDetectedCount;c++)o.push({index:c});var d=Wue(i,Ff);e.__isBuiltIn&&(t.getRawDataItem=function(m){return d(r,a,o,m)},t.getRawData=fa(eet,null,n)),t.cloneRawData=fa(tet,null,n);var f=que(i,Ff);t.count=fa(f,null,r,a,o);var h=jue(i);t.retrieveValue=function(m,v){var g=d(r,a,o,m);return p(g,v)};var p=t.retrieveValueFromItem=function(m,v){if(m!=null){var g=o[v];if(g)return h(m,v,g.name)}};return t.getDimensionInfo=fa(net,null,o,l),t.cloneAllDimensionInfo=fa(ret,null,o),t}function eet(n){var e=n.sourceFormat;if(!J7(e)){var t="";fl(t)}return n.data}function tet(n){var e=n.sourceFormat,t=n.data;if(!J7(e)){var r="";fl(r)}if(e===Ml){for(var i=[],a=0,s=t.length;a<s;a++)i.push(t[a].slice());return i}else if(e===qc){for(var i=[],a=0,s=t.length;a<s;a++)i.push(kn({},t[a]));return i}}function net(n,e,t){if(t!=null){if(Wa(t)||!isNaN(t)&&!Z1(e,t))return n[t];if(Z1(e,t))return e[t]}}function ret(n){return Mi(n)}var Kue=Si();function iet(n){n=Mi(n);var e=n.type,t="";e||fl(t);var r=e.split(":");r.length!==2&&fl(t);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),n.__isBuiltIn=i,Kue.set(e,n)}function aet(n,e,t){var r=Xo(n),i=r.length,a="";i||fl(a);for(var s=0,o=i;s<o;s++){var l=r[s];e=set(l,e),s!==o-1&&(e.length=Math.max(e.length,1))}return e}function set(n,e,t,r){var i="";e.length||fl(i),Ur(n)||fl(i);var a=n.type,s=Kue.get(a);s||fl(i);var o=Ti(e,function(u){return JJe(u,s)}),l=Xo(s.transform({upstream:o[0],upstreamList:o,config:Mi(n.config)}));return Ti(l,function(u,c){var d="";Ur(u)||fl(d),u.data||fl(d);var f=Vue(u.data);J7(f)||fl(d);var h,p=e[0];if(p&&c===0&&!u.dimensions){var m=p.startIndex;m&&(u.data=p.data.slice(0,m).concat(u.data)),h={seriesLayoutBy:Ff,sourceHeader:m,dimensions:p.metaRawOption.dimensions}}else h={seriesLayoutBy:Ff,sourceHeader:0,dimensions:u.dimensions};return lO(u.data,h,null)})}function J7(n){return n===Ml||n===qc}var EI="undefined",oet=typeof Uint32Array===EI?Array:Uint32Array,uet=typeof Uint16Array===EI?Array:Uint16Array,Xue=typeof Int32Array===EI?Array:Int32Array,cj=typeof Float64Array===EI?Array:Float64Array,Yue={float:cj,int:Xue,ordinal:Array,number:Array,time:cj},AR;function Zb(n){return n>65535?oet:uet}function Ag(){return[1/0,-1/0]}function cet(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function dj(n,e,t,r,i){var a=Yue[t||"float"];if(i){var s=n[e],o=s&&s.length;if(o!==r){for(var l=new a(r),u=0;u<o;u++)l[u]=s[u];n[e]=l}}else n[e]=new a(r)}var uO=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Si()}return n.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=AR[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],$ue(i),this._dimensions=Ti(t,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(e);if(a!=null){if(i[a].type===t)return a}else a=i.length;return i[a]={type:t},r.set(e,a),this._chunks[a]=new Yue[t||"float"](this._rawCount),this._rawExtent[a]=Ag(),a},n.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,s=i.ordinalOffset||0,o=r.length;s===0&&(a[e]=Ag());for(var l=a[e],u=s;u<o;u++){var c=r[u]=t.parseAndCollect(r[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=t,i.ordinalOffset=o,i.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var i=t.count();return t.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},n.prototype.appendValues=function(e,t){for(var r=this._chunks,i=this._dimensions,a=i.length,s=this._rawExtent,o=this.count(),l=o+Math.max(e.length,t||0),u=0;u<a;u++){var c=i[u];dj(r,u,c.type,l,!0)}for(var d=[],f=o;f<l;f++)for(var h=f-o,p=0;p<a;p++){var c=i[p],m=AR.arrayRows.call(this,e[h]||d,c.property,h,p);r[p][f]=m;var v=s[p];m<v[0]&&(v[0]=m),m>v[1]&&(v[1]=m)}return this._rawCount=this._count=l,{start:o,end:l}},n.prototype._initDataFromProvider=function(e,t,r){for(var i=this._provider,a=this._chunks,s=this._dimensions,o=s.length,l=this._rawExtent,u=Ti(s,function(y){return y.property}),c=0;c<o;c++){var d=s[c];l[c]||(l[c]=Ag()),dj(a,c,d.type,t,r)}if(i.fillStorage)i.fillStorage(e,t,a,l);else for(var f=[],h=e;h<t;h++){f=i.getItem(h,f);for(var p=0;p<o;p++){var m=a[p],v=this._dimValueGetter(f,u[p],h,p);m[h]=v;var g=l[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var r=[],i=[];if(t==null){t=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,s=i.length;a<s;a++)r.push(this.get(i[a],t));return r},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var i=0,a=this.count();i<a;i++){var s=this.get(e,i);isNaN(s)||(r+=s)}return r},n.prototype.getMedian=function(e){var t=[];this.each([e],function(a){isNaN(a)||t.push(a)});var r=t.sort(function(a,s){return a-s}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,a=this._count-1;i<=a;){var s=(i+a)/2|0;if(t[s]<e)i=s+1;else if(t[s]>e)a=s-1;else return s}return-1},n.prototype.indicesOfNearest=function(e,t,r){var i=this._chunks,a=i[e],s=[];if(!a)return s;r==null&&(r=1/0);for(var o=1/0,l=-1,u=0,c=0,d=this.count();c<d;c++){var f=this.getRawIndex(c),h=t-a[f],p=Math.abs(h);p<=r&&((p<o||p===o&&h>=0&&l<0)&&(o=p,l=h,u=0),h===l&&(s[u++]=c))}return s.length=u,s},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,i=this._count;if(r===Array){e=new r(i);for(var a=0;a<i;a++)e[a]=t[a]}else e=new r(t.buffer,0,i)}else{var r=Zb(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=Zb(r._rawCount),s=new a(i),o=[],l=e.length,u=0,c=e[0],d=r._chunks,f=0;f<i;f++){var h=void 0,p=r.getRawIndex(f);if(l===0)h=t(f);else if(l===1){var m=d[c][p];h=t(m,f)}else{for(var v=0;v<l;v++)o[v]=d[e[v]][p];o[v]=f,h=t.apply(null,o)}h&&(s[u++]=p)}return u<i&&(r._indices=s),r._count=u,r._extent=[],r._updateGetRawIdx(),r},n.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var i=Ga(e),a=i.length;if(!a)return this;var s=t.count(),o=Zb(t._rawCount),l=new o(s),u=0,c=i[0],d=e[c][0],f=e[c][1],h=t._chunks,p=!1;if(!t._indices){var m=0;if(a===1){for(var v=h[i[0]],g=0;g<r;g++){var y=v[g];(y>=d&&y<=f||isNaN(y))&&(l[u++]=m),m++}p=!0}else if(a===2){for(var v=h[i[0]],_=h[i[1]],b=e[i[1]][0],x=e[i[1]][1],g=0;g<r;g++){var y=v[g],w=_[g];(y>=d&&y<=f||isNaN(y))&&(w>=b&&w<=x||isNaN(w))&&(l[u++]=m),m++}p=!0}}if(!p)if(a===1)for(var g=0;g<s;g++){var A=t.getRawIndex(g),y=h[i[0]][A];(y>=d&&y<=f||isNaN(y))&&(l[u++]=A)}else for(var g=0;g<s;g++){for(var T=!0,A=t.getRawIndex(g),C=0;C<a;C++){var E=i[C],y=h[E][A];(y<e[E][0]||y>e[E][1])&&(T=!1)}T&&(l[u++]=t.getRawIndex(g))}return u<s&&(t._indices=l),t._count=u,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,r){for(var i=e._chunks,a=[],s=t.length,o=e.count(),l=[],u=e._rawExtent,c=0;c<t.length;c++)u[t[c]]=Ag();for(var d=0;d<o;d++){for(var f=e.getRawIndex(d),h=0;h<s;h++)l[h]=i[t[h]][f];l[s]=d;var p=r&&r.apply(null,l);if(p!=null){typeof p!="object"&&(a[0]=p,p=a);for(var c=0;c<p.length;c++){var m=t[c],v=p[c],g=u[m],y=i[m];y&&(y[f]=v),v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}}}},n.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),i=r._chunks,a=i[e],s=this.count(),o=0,l=Math.floor(1/t),u=this.getRawIndex(0),c,d,f,h=new(Zb(this._rawCount))(Math.min((Math.ceil(s/l)+2)*2,s));h[o++]=u;for(var p=1;p<s-1;p+=l){for(var m=Math.min(p+l,s-1),v=Math.min(p+l*2,s),g=(v+m)/2,y=0,_=m;_<v;_++){var b=this.getRawIndex(_),x=a[b];isNaN(x)||(y+=x)}y/=v-m;var w=p,A=Math.min(p+l,s),T=p-1,C=a[u];c=-1,f=w;for(var E=-1,I=0,_=w;_<A;_++){var b=this.getRawIndex(_),x=a[b];if(isNaN(x)){I++,E<0&&(E=b);continue}d=Math.abs((T-g)*(x-C)-(T-_)*(y-C)),d>c&&(c=d,f=b)}I>0&&I<A-w&&(h[o++]=Math.min(E,f),f=Math.max(E,f)),h[o++]=f,u=f}return h[o++]=this.getRawIndex(s-1),r._count=o,r._indices=h,r.getRawIndex=this._getRawIdx,r},n.prototype.downSample=function(e,t,r,i){for(var a=this.clone([e],!0),s=a._chunks,o=[],l=Math.floor(1/t),u=s[e],c=this.count(),d=a._rawExtent[e]=Ag(),f=new(Zb(this._rawCount))(Math.ceil(c/l)),h=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,o.length=l);for(var m=0;m<l;m++){var v=this.getRawIndex(p+m);o[m]=u[v]}var g=r(o),y=this.getRawIndex(Math.min(p+i(o,g)||0,c-1));u[y]=g,g<d[0]&&(d[0]=g),g>d[1]&&(d[1]=g),f[h++]=y}return a._count=h,a._indices=f,a._updateGetRawIdx(),a},n.prototype.each=function(e,t){if(this._count)for(var r=e.length,i=this._chunks,a=0,s=this.count();a<s;a++){var o=this.getRawIndex(a);switch(r){case 0:t(a);break;case 1:t(i[e[0]][o],a);break;case 2:t(i[e[0]][o],i[e[1]][o],a);break;default:for(var l=0,u=[];l<r;l++)u[l]=i[e[l]][o];u[l]=a,t.apply(null,u)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],r=Ag();if(!t)return r;var i=this.count(),a=!this._indices,s;if(a)return this._rawExtent[e].slice();if(s=this._extent[e],s)return s.slice();s=r;for(var o=s[0],l=s[1],u=0;u<i;u++){var c=this.getRawIndex(u),d=t[c];d<o&&(o=d),d>l&&(l=d)}return s=[o,l],this._extent[e]=s,s},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][t]);return r},n.prototype.clone=function(e,t){var r=new n,i=this._chunks,a=e&&Kp(e,function(o,l){return o[l]=!0,o},{});if(a)for(var s=0;s<i.length;s++)r._chunks[s]=a[s]?cet(i[s]):i[s];else r._chunks=i;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Mi(this._extent),e._rawExtent=Mi(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var i=0;i<r;i++)t[i]=this._indices[i]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function e(t,r,i,a){return RE(t[a],this._dimensions[a])}AR={arrayRows:e,objectRows:function(t,r,i,a){return RE(t[r],this._dimensions[a])},keyedColumns:e,original:function(t,r,i,a){var s=t&&(t.value==null?t:t.value);return RE(s instanceof Array?s[a]:s,this._dimensions[a])},typedArray:function(t,r,i,a){return t[a]}}}(),n}(),det=function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,i,a;if(yC(e)){var s=e,o=void 0,l=void 0,u=void 0;if(r){var c=t[0];c.prepareSource(),u=c.getSource(),o=u.data,l=u.sourceFormat,a=[c._getVersionSign()]}else o=s.get("data",!0),l=su(o)?Cp:Wd,a=[];var d=this._getSourceMetaRawOption()||{},f=u&&u.metaRawOption||{},h=bi(d.seriesLayoutBy,f.seriesLayoutBy)||null,p=bi(d.sourceHeader,f.sourceHeader),m=bi(d.dimensions,f.dimensions),v=h!==f.seriesLayoutBy||!!p!=!!f.sourceHeader||m;i=v?[lO(o,{seriesLayoutBy:h,sourceHeader:p,dimensions:m},l)]:[]}else{var g=e;if(r){var y=this._applyTransform(t);i=y.sourceList,a=y.upstreamSignList}else{var _=g.get("source",!0);i=[lO(_,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},n.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),i=t.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&fj(a)}var s,o=[],l=[];return Bt(e,function(u){u.prepareSource();var c=u.getSource(i||0),d="";i!=null&&!c&&fj(d),o.push(c),l.push(u._getVersionSign())}),r?s=aet(r,o,{datasetIndex:t.componentIndex}):i!=null&&(s=[VJe(o[0])]),{sourceList:s,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,r){var i=0,a=this._storeList,s=a[i];s||(s=a[i]={});var o=s[r];if(!o){var l=this._getUpstreamSourceManagers()[0];yC(this._sourceHost)&&l?o=l._innerGetDataStore(e,t,r):(o=new uO,o.initData(new Gue(t,e.length),e)),s[r]=o}return o},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(yC(e)){var t=Rue(e);return t?[t.getSourceManager()]:[]}else return Ti(pJe(e),function(r){return r.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,i;if(yC(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;t=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:i}},n}();function yC(n){return n.mainType==="series"}function fj(n){throw new Error(n)}var Que="line-height:1";function Zue(n,e){var t=n.color||"#6e7079",r=n.fontSize||12,i=n.fontWeight||"400",a=n.color||"#464646",s=n.fontSize||14,o=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+Eu(r+"")+"px;color:"+Eu(t)+";font-weight:"+Eu(i+""),valueStyle:"font-size:"+Eu(s+"")+"px;color:"+Eu(a)+";font-weight:"+Eu(o+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:i},valueStyle:{fontSize:s,fill:a,fontWeight:o}}}var fet=[0,10,20,30],het=["",`
`,`

`,`


`];function O2(n,e){return e.type=n,e}function cO(n){return n.type==="section"}function Jue(n){return cO(n)?pet:met}function ece(n){if(cO(n)){var e=0,t=n.blocks.length,r=t>1||t>0&&!n.noHeader;return Bt(n.blocks,function(i){var a=ece(i);a>=e&&(e=a+ +(r&&(!a||cO(i)&&!i.noHeader)))}),e}return 0}function pet(n,e,t,r){var i=e.noHeader,a=vet(ece(e)),s=[],o=e.blocks||[];Jf(!o||br(o)),o=o||[];var l=n.orderMode;if(e.sortBlocks&&l){o=o.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(Z1(u,l)){var c=new QJe(u[l],null);o.sort(function(p,m){return c.evaluate(p.sortParam,m.sortParam)})}else l==="seriesDesc"&&o.reverse()}Bt(o,function(p,m){var v=e.valueFormatter,g=Jue(p)(v?kn(kn({},n),{valueFormatter:v}):n,p,m>0?a.html:0,r);g!=null&&s.push(g)});var d=n.renderMode==="richText"?s.join(a.richText):dO(s.join(""),i?t:a.html);if(i)return d;var f=oO(e.header,"ordinal",n.useUTC),h=Zue(r,n.renderMode).nameStyle;return n.renderMode==="richText"?tce(n,f,h)+a.richText+d:dO('<div style="'+h+";"+Que+';">'+Eu(f)+"</div>"+d,t)}function met(n,e,t,r){var i=n.renderMode,a=e.noName,s=e.noValue,o=!e.markerType,l=e.name,u=n.useUTC,c=e.valueFormatter||n.valueFormatter||function(b){return b=br(b)?b:[b],Ti(b,function(x,w){return oO(x,br(h)?h[w]:h,u)})};if(!(a&&s)){var d=o?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",i),f=a?"":oO(l,"ordinal",u),h=e.valueType,p=s?[]:c(e.value),m=!o||!a,v=!o&&a,g=Zue(r,i),y=g.nameStyle,_=g.valueStyle;return i==="richText"?(o?"":d)+(a?"":tce(n,f,y))+(s?"":_et(n,p,m,v,_)):dO((o?"":d)+(a?"":get(f,!o,y))+(s?"":yet(p,m,v,_)),t)}}function hj(n,e,t,r,i,a){if(n){var s=Jue(n),o={useUTC:i,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:n.valueFormatter};return s(o,n,0,a)}}function vet(n){return{html:fet[n],richText:het[n]}}function dO(n,e){var t='<div style="clear:both"></div>',r="margin: "+e+"px 0 0";return'<div style="'+r+";"+Que+';">'+n+t+"</div>"}function get(n,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+Eu(n)+"</span>"}function yet(n,e,t,r){var i=t?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return n=br(n)?n:[n],'<span style="'+a+";"+r+'">'+Ti(n,function(s){return Eu(s)}).join("&nbsp;&nbsp;")+"</span>"}function tce(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function _et(n,e,t,r,i){var a=[i],s=r?10:20;return t&&a.push({padding:[0,0,0,s],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(br(e)?e.join("  "):e,a)}function bet(n,e){var t=n.getData().getItemVisual(e,"style"),r=t[n.visualDrawType];return P2(r)}function nce(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var ER=function(){function n(){this.richTextStyles={},this._nextStyleNameId=_le()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,r){var i=r==="richText"?this._generateStyleName():null,a=aJe({color:t,type:e,renderMode:r,markerId:i});return Lr(a)?a:(this.richTextStyles[i]=a.style,a.content)},n.prototype.wrapRichTextStyle=function(e,t){var r={};br(t)?Bt(t,function(a){return kn(r,a)}):kn(r,t);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},n}();function xet(n){var e=n.series,t=n.dataIndex,r=n.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),s=a.length,o=e.getRawValue(t),l=br(o),u=bet(e,t),c,d,f,h;if(s>1||l&&!s){var p=wet(o,e,t,a,u);c=p.inlineValues,d=p.inlineValueTypes,f=p.blocks,h=p.inlineValues[0]}else if(s){var m=i.getDimensionInfo(a[0]);h=c=p3(i,t,a[0]),d=m.type}else h=c=l?o[0]:o;var v=M7(e),g=v&&e.name||"",y=i.getName(t),_=r?g:y;return O2("section",{header:g,noHeader:r||!v,sortParam:h,blocks:[O2("nameValue",{markerType:"item",markerColor:u,name:_,noName:!yd(_),value:c,valueType:d})].concat(f||[])})}function wet(n,e,t,r,i){var a=e.getData(),s=Kp(n,function(d,f,h){var p=a.getDimensionInfo(h);return d=d||p&&p.tooltip!==!1&&p.displayName!=null},!1),o=[],l=[],u=[];r.length?Bt(r,function(d){c(p3(a,t,d),d)}):Bt(n,c);function c(d,f){var h=a.getDimensionInfo(f);!h||h.otherDims.tooltip===!1||(s?u.push(O2("nameValue",{markerType:"subItem",markerColor:i,name:h.displayName,value:d,valueType:h.type})):(o.push(d),l.push(h.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:u}}var kh=Os();function _C(n,e){return n.getName(e)||n.getId(e)}var Tet="__universalTransitionEnabled",MI=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,i){this.seriesIndex=this.componentIndex,this.dataTask=vx({count:Aet,reset:Eet}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,i);var a=kh(this).sourceManager=new det(this);a.prepareSource();var s=this.getInitialData(t,i);mj(s,this),this.dataTask.context.data=s,kh(this).dataBeforeProcessed=s,pj(this),this._initSelectedMapFromData(s)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=h3(this),a=i?X7(t):{},s=this.subType;Da.hasClass(s)&&(s+="Series"),Ta(t,r.getTheme().get(this.subType)),Ta(t,this.getDefaultOption()),j6(t,"label",["show"]),this.fillDataTextStyle(t.data),i&&k2(t,a,i)},e.prototype.mergeOption=function(t,r){t=Ta(this.option,t,!0),this.fillDataTextStyle(t.data);var i=h3(this);i&&k2(this.option,t,i);var a=kh(this).sourceManager;a.dirty(),a.prepareSource();var s=this.getInitialData(t,r);mj(s,this),this.dataTask.dirty(),this.dataTask.context.data=s,kh(this).dataBeforeProcessed=s,pj(this),this._initSelectedMapFromData(s)},e.prototype.fillDataTextStyle=function(t){if(t&&!su(t))for(var r=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&j6(t[i],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=fO(this);if(r){var i=r.context.data;return t==null?i:i.getLinkedData(t)}else return kh(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=fO(this);if(r){var i=r.context;i.outputData=t,r!==this.dataTask&&(i.data=t)}kh(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return Si(t)},e.prototype.getSourceManager=function(){return kh(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return kh(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,r,i){return xet({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(oi.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,i){var a=this.ecModel,s=Y7.prototype.getColorFromPalette.call(this,t,r,i);return s||(s=a.getColorFromPalette(t,r,i)),s},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,s=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<t.length;o++){var l=t[o],u=_C(s,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},e.prototype.toggleSelect=function(t,r){for(var i=[],a=0;a<t.length;a++)i[0]=t[a],this.isSelected(t[a],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=Ga(t),i=[],a=0;a<r.length;a++){var s=t[r[a]];s>=0&&i.push(s)}return i},e.prototype.isSelected=function(t,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[_C(a,t)])&&!a.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[Tet])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var i,a,s=this.option,o=s.selectedMode,l=r.length;if(!(!o||!l)){if(o==="series")s.selectedMap="all";else if(o==="multiple"){Ur(s.selectedMap)||(s.selectedMap={});for(var u=s.selectedMap,c=0;c<l;c++){var d=r[c],f=_C(t,d);u[f]=!0,this._selectedDataIndicesMap[f]=t.getRawIndex(d)}}else if(o==="single"||o===!0){var h=r[l-1],f=_C(t,h);s.selectedMap=(i={},i[f]=!0,i),this._selectedDataIndicesMap=(a={},a[f]=t.getRawIndex(h),a)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(i){var a=t.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return Da.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(Da);vh(MI,XJe);vh(MI,Y7);Cle(MI,Da);function pj(n){var e=n.name;M7(n)||(n.name=Cet(n)||e)}function Cet(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return Bt(t,function(i){var a=e.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function Aet(n){return n.model.getRawData().count()}function Eet(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),Met}function Met(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function mj(n,e){Bt(dKe(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,fs(Iet,e))})}function Iet(n,e){var t=fO(n);return t&&t.setOutputEnd((e||this).count()),e}function fO(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var r=t.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(n.uid))}return r}}const N2=MI;var e9=function(){function n(){this.group=new Nd,this.uid=TI("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){},n.prototype.updateLayout=function(e,t,r,i){},n.prototype.updateVisual=function(e,t,r,i){},n.prototype.toggleBlurSeries=function(e,t,r){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n}();P7(e9);R7(e9);const Yp=e9;function Det(){var n=Os();return function(e){var t=n(e),r=e.pipelineContext,i=!!t.large,a=!!t.progressiveRender,s=t.large=!!(r&&r.large),o=t.progressiveRender=!!(r&&r.progressiveRender);return(i!==s||a!==o)&&"reset"}}var rce=Os(),Pet=Det(),t9=function(){function n(){this.group=new Nd,this.uid=TI("viewChart"),this.renderTask=vx({plan:Ret,reset:ket}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.highlight=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&gj(a,i,"emphasis")},n.prototype.downplay=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&gj(a,i,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateLayout=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateVisual=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.eachRendered=function(e){bue(this.group,e)},n.markUpdateMethod=function(e,t){rce(e).updateMethod=t},n.protoInitialize=function(){var e=n.prototype;e.type="chart"}(),n}();function vj(n,e,t){n&&rO(n)&&(e==="emphasis"?Z6:J6)(n,t)}function gj(n,e,t){var r=Hw(n,e),i=e&&e.highlightKey!=null?EQe(e.highlightKey):null;r!=null?Bt(Xo(r),function(a){vj(n.getItemGraphicEl(a),t,i)}):n.eachItemGraphicEl(function(a){vj(a,t,i)})}P7(t9);R7(t9);function Ret(n){return Pet(n.model)}function ket(n){var e=n.model,t=n.ecModel,r=n.api,i=n.payload,a=e.pipelineContext.progressiveRender,s=n.view,o=i&&rce(i).updateMethod,l=a?"incrementalPrepareRender":o&&s[o]?o:"render";return l!=="render"&&s[l](e,t,r,i),Let[l]}var Let={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};const d1=t9;var m3="\0__throttleOriginMethod",yj="\0__throttleRate",_j="\0__throttleType";function n9(n,e,t){var r,i=0,a=0,s=null,o,l,u,c;e=e||0;function d(){a=new Date().getTime(),s=null,n.apply(l,u||[])}var f=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];r=new Date().getTime(),l=this,u=h;var m=c||e,v=c||t;c=null,o=r-(v?i:a)-m,clearTimeout(s),v?s=setTimeout(d,m):o>=0?d():s=setTimeout(d,-o),i=r};return f.clear=function(){s&&(clearTimeout(s),s=null)},f.debounceNextCall=function(h){c=h},f}function ice(n,e,t,r){var i=n[e];if(i){var a=i[m3]||i,s=i[_j],o=i[yj];if(o!==t||s!==r){if(t==null||!r)return n[e]=a;i=n[e]=n9(a,t,r==="debounce"),i[m3]=a,i[_j]=r,i[yj]=t}return i}}function hO(n,e){var t=n[e];t&&t[m3]&&(t.clear&&t.clear(),n[e]=t[m3])}var bj=Os(),Sj={itemStyle:I2(wue,!0),lineStyle:I2(xue,!0)},Oet={lineStyle:"stroke",itemStyle:"fill"};function ace(n,e){var t=n.visualStyleMapper||Sj[e];return t||(console.warn("Unknown style type '"+e+"'."),Sj.itemStyle)}function sce(n,e){var t=n.visualDrawType||Oet[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var Net={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=n.getModel(r),a=ace(n,r),s=a(i),o=i.getShallow("decal");o&&(t.setVisual("decal",o),o.dirty=!0);var l=sce(n,r),u=s[l],c=Gi(u)?u:null,d=s.fill==="auto"||s.stroke==="auto";if(!s[l]||c||d){var f=n.getColorFromPalette(n.name,null,e.getSeriesCount());s[l]||(s[l]=f,t.setVisual("colorFromPalette",!0)),s.fill=s.fill==="auto"||Gi(s.fill)?f:s.fill,s.stroke=s.stroke==="auto"||Gi(s.stroke)?f:s.stroke}if(t.setVisual("style",s),t.setVisual("drawType",l),!e.isSeriesFiltered(n)&&c)return t.setVisual("colorFromPalette",!1),{dataEach:function(h,p){var m=n.getDataParams(p),v=kn({},s);v[l]=c(m),h.setItemVisual(p,"style",v)}}}},Jb=new bo,Bet={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=ace(n,r),a=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(s,o){var l=s.getRawDataItem(o);if(l&&l[r]){Jb.option=l[r];var u=i(Jb),c=s.ensureUniqueItemVisual(o,"style");kn(c,u),Jb.option.decal&&(s.setItemVisual(o,"decal",Jb.option.decal),Jb.option.decal.dirty=!0),a in u&&s.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},Fet={performRawSeries:!0,overallReset:function(n){var e=Si();n.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+r,a=e.get(i);a||(a={},e.set(i,a)),bj(t).scope=a}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var r=t.getRawData(),i={},a=t.getData(),s=bj(t).scope,o=t.visualStyleAccessPath||"itemStyle",l=sce(t,o);a.each(function(u){var c=a.getRawIndex(u);i[c]=u}),r.each(function(u){var c=i[u],d=a.getItemVisual(c,"colorFromPalette");if(d){var f=a.ensureUniqueItemVisual(c,"style"),h=r.getName(u)||u+"",p=r.count();f[l]=t.getColorFromPalette(h,s,p)}})}})}},bC=Math.PI;function Uet(n,e){e=e||{},Aa(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new Nd,r=new Sl({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var i=new Jo({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new Sl({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(a);var s;return e.showSpinner&&(s=new U7({shape:{startAngle:-bC/2,endAngle:-bC/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),s.animateShape(!0).when(1e3,{endAngle:bC*3/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:bC*3/2}).delay(300).start("circularInOut"),t.add(s)),t.resize=function(){var o=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,u=(n.getWidth()-l*2-(e.showSpinner&&o?10:0)-o)/2-(e.showSpinner&&o?0:5+o/2)+(e.showSpinner?0:o/2)+(o?0:l),c=n.getHeight()/2;e.showSpinner&&s.setShape({cx:u,cy:c}),a.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var zet=function(){function n(e,t,r,i){this._stageTaskMap=Si(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,a=!t&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,s=a?r.step:null,o=i&&i.modDataCount,l=o!=null?Math.ceil(o/s):null;return{step:s,modBy:l,modDataCount:o}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),s=r.progressiveEnabled&&t.incrementalPrepareRender&&a>=r.threshold,o=e.get("large")&&a>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:s,modDataCount:l,large:o}},n.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=Si();e.eachSeries(function(i){var a=i.getProgressive(),s=i.uid;r.set(s,{id:s,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),t._pipe(i,i.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;Bt(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),s="";Jf(!(i.reset&&i.overallReset),s),i.reset&&this._createSeriesStageTask(i,a,t,r),i.overallReset&&this._createOverallStageTask(i,a,t,r)},this)},n.prototype.prepareView=function(e,t,r,i){var a=e.renderTask,s=a.context;s.model=t,s.ecModel=r,s.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(t,a)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},n.prototype._performStageTasks=function(e,t,r,i){i=i||{};var a=!1,s=this;Bt(e,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=s._stageTaskMap.get(l.uid),d=c.seriesTaskMap,f=c.overallTask;if(f){var h,p=f.agentStubMap;p.each(function(v){o(i,v)&&(v.dirty(),h=!0)}),h&&f.dirty(),s.updatePayload(f,r);var m=s.getPerformArgs(f,i.block);p.each(function(v){v.perform(m)}),f.perform(m)&&(a=!0)}else d&&d.each(function(v,g){o(i,v)&&v.dirty();var y=s.getPerformArgs(v,i.block);y.skip=!l.performRawSeries&&t.isSeriesFiltered(v.context.model),s.updatePayload(v,r),v.perform(y)&&(a=!0)})}});function o(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=a||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,r,i){var a=this,s=t.seriesTaskMap,o=t.seriesTaskMap=Si(),l=e.seriesType,u=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(c):l?r.eachRawSeriesByType(l,c):u&&u(r,i).each(c);function c(d){var f=d.uid,h=o.set(f,s&&s.get(f)||vx({plan:Wet,reset:qet,count:Ket}));h.context={model:d,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(d,h)}},n.prototype._createOverallStageTask=function(e,t,r,i){var a=this,s=t.overallTask=t.overallTask||vx({reset:Het});s.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:a};var o=s.agentStubMap,l=s.agentStubMap=Si(),u=e.seriesType,c=e.getTargetSeries,d=!0,f=!1,h="";Jf(!e.createOnAllSeries,h),u?r.eachRawSeriesByType(u,p):c?c(r,i).each(p):(d=!1,Bt(r.getSeries(),p));function p(m){var v=m.uid,g=l.set(v,o&&o.get(v)||(f=!0,vx({reset:Vet,onDirty:Get})));g.context={model:m,overallProgress:d},g.agent=s,g.__block=d,a._pipe(m,g)}f&&s.dirty()},n.prototype._pipe=function(e,t){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=t),i.tail&&i.tail.pipe(t),i.tail=t,t.__idxInPipeline=i.count++,t.__pipeline=i},n.wrapStageHandler=function(e,t){return Gi(e)&&(e={overallReset:e,seriesType:Xet(e)}),e.uid=TI("stageHandler"),t&&(e.visualType=t),e},n}();function Het(n){n.overallReset(n.ecModel,n.api,n.payload)}function Vet(n){return n.overallProgress&&$et}function $et(){this.agent.dirty(),this.getDownstream().dirty()}function Get(){this.agent&&this.agent.dirty()}function Wet(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function qet(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=Xo(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?Ti(e,function(t,r){return oce(r)}):jet}var jet=oce(0);function oce(n){return function(e,t){var r=t.data,i=t.resetDefines[n];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function Ket(n){return n.data.count()}function Xet(n){v3=null;try{n(B2,lce)}catch{}return v3}var B2={},lce={},v3;uce(B2,Nue);uce(lce,Bue);B2.eachSeriesByType=B2.eachRawSeriesByType=function(n){v3=n};B2.eachComponent=function(n){n.mainType==="series"&&n.subType&&(v3=n.subType)};function uce(n,e){for(var t in e.prototype)n[t]=bl}const cce=zet;var xj=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Yet={color:xj,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],xj]};var ko="#B9B8CE",wj="#100C2A",SC=function(){return{axisLine:{lineStyle:{color:ko}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},Tj=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],dce={darkMode:!0,color:Tj,backgroundColor:wj,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ko}},textStyle:{color:ko},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ko}},dataZoom:{borderColor:"#71708A",textStyle:{color:ko},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ko}},timeline:{lineStyle:{color:ko},label:{color:ko},controlStyle:{color:ko,borderColor:ko}},calendar:{itemStyle:{color:wj},dayLabel:{color:ko},monthLabel:{color:ko},yearLabel:{color:ko}},timeAxis:SC(),logAxis:SC(),valueAxis:SC(),categoryAxis:SC(),line:{symbol:"circle"},graph:{color:Tj},gauge:{title:{color:ko},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ko},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};dce.categoryAxis.splitLine.show=!1;const Qet=dce;var Zet=function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},r={},i={};if(Lr(e)){var a=_d(e);t.mainType=a.main||null,t.subType=a.sub||null}else{var s=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};Bt(e,function(l,u){for(var c=!1,d=0;d<s.length;d++){var f=s[d],h=u.lastIndexOf(f);if(h>0&&h===u.length-f.length){var p=u.slice(0,h);p!=="data"&&(t.mainType=p,t[f.toLowerCase()]=l,c=!0)}}o.hasOwnProperty(u)&&(r[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:t,dataQuery:r,otherQuery:i}},n.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,s=r.model,o=r.view;if(!s||!o)return!0;var l=t.cptQuery,u=t.dataQuery;return c(l,s,"mainType")&&c(l,s,"subType")&&c(l,s,"index","componentIndex")&&c(l,s,"name")&&c(l,s,"id")&&c(u,a,"name")&&c(u,a,"dataIndex")&&c(u,a,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,t.otherQuery,i,a));function c(d,f,h,p){return d[h]==null||f[p||h]===d[h]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),pO=["symbol","symbolSize","symbolRotate","symbolOffset"],Cj=pO.concat(["symbolKeepAspect"]),Jet={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var r={},i={},a=!1,s=0;s<pO.length;s++){var o=pO[s],l=n.get(o);Gi(l)?(a=!0,i[o]=l):r[o]=l}if(r.symbol=r.symbol||n.defaultSymbol,t.setVisual(kn({legendIcon:n.legendIcon||r.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},r)),e.isSeriesFiltered(n))return;var u=Ga(i);function c(d,f){for(var h=n.getRawValue(f),p=n.getDataParams(f),m=0;m<u.length;m++){var v=u[m];d.setItemVisual(f,v,i[v](h,p))}}return{dataEach:a?c:null}}},ett={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function r(i,a){for(var s=i.getItemModel(a),o=0;o<Cj.length;o++){var l=Cj[o],u=s.getShallow(l,!0);u!=null&&i.setItemVisual(a,l,u)}}return{dataEach:t.hasItemOption?r:null}}};function ttt(n,e,t){switch(t){case"color":var r=n.getItemVisual(e,"style");return r[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function ntt(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function rtt(n,e){function t(r,i){var a=[];return r.eachComponent({mainType:"series",subType:n,query:i},function(s){a.push(s.seriesIndex)}),a}Bt([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(r){e(r[0],function(i,a,s){i=kn({},i),s.dispatchAction(kn(i,{type:r[1],seriesIndex:t(a,i)}))})})}function Eg(n,e,t,r,i){var a=n+e;t.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(s){for(var o=s.seriesIndex,l=s.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===o){var d=s.getData(),f=Hw(d,i.fromActionPayload);t.trigger(a,{type:a,seriesId:s.id,name:br(f)?d.getName(f[0]):d.getName(f),selected:Lr(l)?l:kn({},l)})}})}function itt(n,e,t){n.on("selectchanged",function(r){var i=t.getModel();r.isFromClick?(Eg("map","selectchanged",e,i,r),Eg("pie","selectchanged",e,i,r)):r.fromAction==="select"?(Eg("map","selected",e,i,r),Eg("pie","selected",e,i,r)):r.fromAction==="unselect"&&(Eg("map","unselected",e,i,r),Eg("pie","unselected",e,i,r))})}function zS(n,e,t){for(var r;n&&!(e(n)&&(r=n,t));)n=n.__hostTarget||n.parent;return r}var att=Math.round(Math.random()*9),stt=typeof Object.defineProperty=="function",ott=function(){function n(){this._id="__ec_inner_"+att++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var r=this._guard(e);return stt?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n}();const ltt=ott;var utt=pa.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r+a),n.lineTo(t-i,r+a),n.closePath()}}),ctt=pa.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r),n.lineTo(t,r+a),n.lineTo(t-i,r),n.closePath()}}),dtt=pa.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),s=i/2,o=s*s/(a-s),l=r-a+s+o,u=Math.asin(o/s),c=Math.cos(u)*s,d=Math.sin(u),f=Math.cos(u),h=s*.6,p=s*.7;n.moveTo(t-c,l+o),n.arc(t,l,s,Math.PI-u,Math.PI*2+u),n.bezierCurveTo(t+c-d*h,l+o+f*h,t,r-p,t,r),n.bezierCurveTo(t,r-p,t-c+d*h,l+o+f*h,t-c,l+o),n.closePath()}}),ftt=pa.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,r=e.width,i=e.x,a=e.y,s=r/3*2;n.moveTo(i,a),n.lineTo(i+s,a+t),n.lineTo(i,a+t/4*3),n.lineTo(i-s,a+t),n.lineTo(i,a),n.closePath()}}),htt={line:Gw,rect:Sl,roundRect:Sl,square:Sl,circle:F7,diamond:ctt,pin:dtt,arrow:ftt,triangle:utt},ptt={line:function(n,e,t,r,i){i.x1=n,i.y1=e+r/2,i.x2=n+t,i.y2=e+r/2},rect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r},roundRect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r,i.r=Math.min(t,r)/4},square:function(n,e,t,r,i){var a=Math.min(t,r);i.x=n,i.y=e,i.width=a,i.height=a},circle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.r=Math.min(t,r)/2},diamond:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r},pin:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},arrow:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},triangle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r}},mO={};Bt(htt,function(n,e){mO[e]=new n});var mtt=pa.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var r=fle(n,e,t),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(n,e,t){var r=e.symbolType;if(r!=="none"){var i=mO[r];i||(r="rect",i=mO[r]),ptt[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(n,i.shape,t)}}});function vtt(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function r9(n,e,t,r,i,a,s){var o=n.indexOf("empty")===0;o&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=vue(n.slice(8),new Zi(e,t,r,i),s?"center":"cover"):n.indexOf("path://")===0?l=H7(n.slice(7),{},new Zi(e,t,r,i),s?"center":"cover"):l=new mtt({shape:{symbolType:n,x:e,y:t,width:r,height:i}}),l.__isEmptyBrush=o,l.setColor=vtt,a&&l.setColor(a),l}function gtt(n,e){if(n!=null)return br(n)||(n=[n,n]),[us(n[0],e[0])||0,us(bi(n[1],n[0]),e[1])||0]}function R0(n){return isFinite(n)}function ytt(n,e,t){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,s=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,i=i*t.width+t.x,a=a*t.height+t.y,s=s*t.height+t.y),r=R0(r)?r:0,i=R0(i)?i:1,a=R0(a)?a:0,s=R0(s)?s:0;var o=n.createLinearGradient(r,a,i,s);return o}function _tt(n,e,t){var r=t.width,i=t.height,a=Math.min(r,i),s=e.x==null?.5:e.x,o=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(s=s*r+t.x,o=o*i+t.y,l=l*a),s=R0(s)?s:.5,o=R0(o)?o:.5,l=l>=0&&R0(l)?l:.5;var u=n.createRadialGradient(s,o,0,s,o,l);return u}function vO(n,e,t){for(var r=e.type==="radial"?_tt(n,e,t):ytt(n,e,t),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function btt(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function xC(n){return parseInt(n,10)}function wC(n,e,t){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],s=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var o=document.defaultView.getComputedStyle(n);return(n[i]||xC(o[r])||xC(n.style[r]))-(xC(o[a])||0)-(xC(o[s])||0)|0}function Stt(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:Wa(n)?[n]:br(n)?n:null}function fce(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&Stt(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var i=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;i&&i!==1&&(t=Ti(t,function(a){return a/i}),r/=i)}return[t,r]}var xtt=new mv(!0);function g3(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function Aj(n){return typeof n=="string"&&n!=="none"}function y3(n){var e=n.fill;return e!=null&&e!=="none"}function Ej(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function Mj(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function gO(n,e,t){var r=Ale(e.image,e.__image,t);if(yI(r)){var i=n.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*fKe),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function wtt(n,e,t,r){var i,a=g3(t),s=y3(t),o=t.strokePercent,l=o<1,u=!e.path;(!e.silent||l)&&u&&e.createPathProxy();var c=e.path||xtt,d=e.__dirty;if(!r){var f=t.fill,h=t.stroke,p=s&&!!f.colorStops,m=a&&!!h.colorStops,v=s&&!!f.image,g=a&&!!h.image,y=void 0,_=void 0,b=void 0,x=void 0,w=void 0;(p||m)&&(w=e.getBoundingRect()),p&&(y=d?vO(n,f,w):e.__canvasFillGradient,e.__canvasFillGradient=y),m&&(_=d?vO(n,h,w):e.__canvasStrokeGradient,e.__canvasStrokeGradient=_),v&&(b=d||!e.__canvasFillPattern?gO(n,f,e):e.__canvasFillPattern,e.__canvasFillPattern=b),g&&(x=d||!e.__canvasStrokePattern?gO(n,h,e):e.__canvasStrokePattern,e.__canvasStrokePattern=b),p?n.fillStyle=y:v&&(b?n.fillStyle=b:s=!1),m?n.strokeStyle=_:g&&(x?n.strokeStyle=x:a=!1)}var A=e.getGlobalScale();c.setScale(A[0],A[1],e.segmentIgnoreThreshold);var T,C;n.setLineDash&&t.lineDash&&(i=fce(e),T=i[0],C=i[1]);var E=!0;(u||d&Sy)&&(c.setDPR(n.dpr),l?c.setContext(null):(c.setContext(n),E=!1),c.reset(),e.buildPath(c,e.shape,r),c.toStatic(),e.pathUpdated()),E&&c.rebuildPath(n,l?o:1),T&&(n.setLineDash(T),n.lineDashOffset=C),r||(t.strokeFirst?(a&&Mj(n,t),s&&Ej(n,t)):(s&&Ej(n,t),a&&Mj(n,t))),T&&n.setLineDash([])}function Ttt(n,e,t){var r=e.__image=Ale(t.image,e.__image,e,e.onload);if(!(!r||!yI(r))){var i=t.x||0,a=t.y||0,s=e.getWidth(),o=e.getHeight(),l=r.width/r.height;if(s==null&&o!=null?s=o*l:o==null&&s!=null?o=s/l:s==null&&o==null&&(s=r.width,o=r.height),t.sWidth&&t.sHeight){var u=t.sx||0,c=t.sy||0;n.drawImage(r,u,c,t.sWidth,t.sHeight,i,a,s,o)}else if(t.sx&&t.sy){var u=t.sx,c=t.sy,d=s-u,f=o-c;n.drawImage(r,u,c,d,f,i,a,s,o)}else n.drawImage(r,i,a,s,o)}}function Ctt(n,e,t){var r,i=t.text;if(i!=null&&(i+=""),i){n.font=t.font||pv,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var a=void 0,s=void 0;n.setLineDash&&t.lineDash&&(r=fce(e),a=r[0],s=r[1]),a&&(n.setLineDash(a),n.lineDashOffset=s),t.strokeFirst?(g3(t)&&n.strokeText(i,t.x,t.y),y3(t)&&n.fillText(i,t.x,t.y)):(y3(t)&&n.fillText(i,t.x,t.y),g3(t)&&n.strokeText(i,t.x,t.y)),a&&n.setLineDash([])}}var Ij=["shadowBlur","shadowOffsetX","shadowOffsetY"],Dj=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function hce(n,e,t,r,i){var a=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){pl(n,i),a=!0;var s=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(s)?Z0.opacity:s}(r||e.blend!==t.blend)&&(a||(pl(n,i),a=!0),n.globalCompositeOperation=e.blend||Z0.blend);for(var o=0;o<Ij.length;o++){var l=Ij[o];(r||e[l]!==t[l])&&(a||(pl(n,i),a=!0),n[l]=n.dpr*(e[l]||0))}return(r||e.shadowColor!==t.shadowColor)&&(a||(pl(n,i),a=!0),n.shadowColor=e.shadowColor||Z0.shadowColor),a}function Pj(n,e,t,r,i){var a=F2(e,i.inHover),s=r?null:t&&F2(t,i.inHover)||{};if(a===s)return!1;var o=hce(n,a,s,r,i);if((r||a.fill!==s.fill)&&(o||(pl(n,i),o=!0),Aj(a.fill)&&(n.fillStyle=a.fill)),(r||a.stroke!==s.stroke)&&(o||(pl(n,i),o=!0),Aj(a.stroke)&&(n.strokeStyle=a.stroke)),(r||a.opacity!==s.opacity)&&(o||(pl(n,i),o=!0),n.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var l=a.lineWidth,u=l/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==u&&(o||(pl(n,i),o=!0),n.lineWidth=u)}for(var c=0;c<Dj.length;c++){var d=Dj[c],f=d[0];(r||a[f]!==s[f])&&(o||(pl(n,i),o=!0),n[f]=a[f]||d[1])}return o}function Att(n,e,t,r,i){return hce(n,F2(e,i.inHover),t&&F2(t,i.inHover),r,i)}function pce(n,e){var t=e.transform,r=n.dpr||1;t?n.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):n.setTransform(r,0,0,r,0,0)}function Ett(n,e,t){for(var r=!1,i=0;i<n.length;i++){var a=n[i];r=r||a.isZeroArea(),pce(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}t.allClipped=r}function Mtt(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var Rj=1,kj=2,Lj=3,Oj=4;function Itt(n){var e=y3(n),t=g3(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function pl(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function F2(n,e){return e&&n.__hoverStyle||n.style}function mce(n,e){k0(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function k0(n,e,t,r){var i=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~Kl,e.__isRendered=!1;return}var a=e.__clipPaths,s=t.prevElClipPaths,o=!1,l=!1;if((!s||btt(a,s))&&(s&&s.length&&(pl(n,t),n.restore(),l=o=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),a&&a.length&&(pl(n,t),n.save(),Ett(a,n,t),o=!0),t.prevElClipPaths=a),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var u=t.prevEl;u||(l=o=!0);var c=e instanceof pa&&e.autoBatch&&Itt(e.style);o||Mtt(i,u.transform)?(pl(n,t),pce(n,e)):c||pl(n,t);var d=F2(e,t.inHover);e instanceof pa?(t.lastDrawType!==Rj&&(l=!0,t.lastDrawType=Rj),Pj(n,e,u,l,t),(!c||!t.batchFill&&!t.batchStroke)&&n.beginPath(),wtt(n,e,d,c),c&&(t.batchFill=d.fill||"",t.batchStroke=d.stroke||"")):e instanceof Q6?(t.lastDrawType!==Lj&&(l=!0,t.lastDrawType=Lj),Pj(n,e,u,l,t),Ctt(n,e,d)):e instanceof j_?(t.lastDrawType!==kj&&(l=!0,t.lastDrawType=kj),Att(n,e,u,l,t),Ttt(n,e,d)):e.getTemporalDisplayables&&(t.lastDrawType!==Oj&&(l=!0,t.lastDrawType=Oj),Dtt(n,e,t)),c&&r&&pl(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function Dtt(n,e,t){var r=e.getDisplayables(),i=e.getTemporalDisplayables();n.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},s,o;for(s=e.getCursor(),o=r.length;s<o;s++){var l=r[s];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),k0(n,l,a,s===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),k0(n,l,a,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var MR=new ltt,Nj=new zw(100),Bj=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function yO(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";n.dirty&&MR.delete(n);var a=MR.get(n);if(a)return a;var s=Aa(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});s.backgroundColor==="none"&&(s.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=s.rotation,o.scaleX=o.scaleY=i?1:1/t,MR.set(n,o),n.dirty=!1,o;function l(u){for(var c=[t],d=!0,f=0;f<Bj.length;++f){var h=s[Bj[f]];if(h!=null&&!br(h)&&!Lr(h)&&!Wa(h)&&typeof h!="boolean"){d=!1;break}c.push(h)}var p;if(d){p=c.join(",")+(i?"-svg":"");var m=Nj.get(p);m&&(i?u.svgElement=m:u.image=m)}var v=gce(s.dashArrayX),g=Ptt(s.dashArrayY),y=vce(s.symbol),_=Rtt(v),b=yce(g),x=!i&&W_.createCanvas(),w=i&&{tag:"g",attrs:{},key:"dcl",children:[]},A=C(),T;x&&(x.width=A.width*t,x.height=A.height*t,T=x.getContext("2d")),E(),d&&Nj.put(p,x||w),u.image=x,u.svgElement=w,u.svgWidth=A.width,u.svgHeight=A.height;function C(){for(var I=1,P=0,L=_.length;P<L;++P)I=eq(I,_[P]);for(var N=1,P=0,L=y.length;P<L;++P)N=eq(N,y[P].length);I*=N;var F=b*_.length*y.length;return{width:Math.max(1,Math.min(I,s.maxTileWidth)),height:Math.max(1,Math.min(F,s.maxTileHeight))}}function E(){T&&(T.clearRect(0,0,x.width,x.height),s.backgroundColor&&(T.fillStyle=s.backgroundColor,T.fillRect(0,0,x.width,x.height)));for(var I=0,P=0;P<g.length;++P)I+=g[P];if(I<=0)return;for(var L=-b,N=0,F=0,k=0;L<A.height;){if(N%2===0){for(var H=F/2%y.length,U=0,B=0,$=0;U<A.width*2;){for(var ee=0,P=0;P<v[k].length;++P)ee+=v[k][P];if(ee<=0)break;if(B%2===0){var re=(1-s.symbolSize)*.5,ne=U+v[k][B]*re,ae=L+g[N]*re,pe=v[k][B]*s.symbolSize,de=g[N]*s.symbolSize,me=$/2%y[H].length;ke(ne,ae,pe,de,y[H][me])}U+=v[k][B],++$,++B,B===v[k].length&&(B=0)}++k,k===v.length&&(k=0)}L+=g[N],++F,++N,N===g.length&&(N=0)}function ke(Be,Xe,Ye,Y,he){var le=i?1:t,Ke=r9(he,Be*le,Xe*le,Ye*le,Y*le,s.color,s.symbolKeepAspect);if(i){var Ue=r.painter.renderOneToVNode(Ke);Ue&&w.children.push(Ue)}else mce(T,Ke)}}}}function vce(n){if(!n||n.length===0)return[["rect"]];if(Lr(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!Lr(n[t])){e=!1;break}if(e)return vce([n]);for(var r=[],t=0;t<n.length;++t)Lr(n[t])?r.push([n[t]]):r.push(n[t]);return r}function gce(n){if(!n||n.length===0)return[[0,0]];if(Wa(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,r=0;r<n.length;++r)if(!Wa(n[r])){t=!1;break}if(t)return gce([n]);for(var i=[],r=0;r<n.length;++r)if(Wa(n[r])){var e=Math.ceil(n[r]);i.push([e,e])}else{var e=Ti(n[r],function(o){return Math.ceil(o)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function Ptt(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(Wa(n)){var e=Math.ceil(n);return[e,e]}var t=Ti(n,function(r){return Math.ceil(r)});return n.length%2?t.concat(t):t}function Rtt(n){return Ti(n,function(e){return yce(e)})}function yce(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function ktt(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(s){var o=r.getItemVisual(s,"decal");if(o){var l=r.ensureUniqueItemVisual(s,"style");l.decal=yO(o,e)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=yO(i,e)}}})}var Ltt=new Gd;const Sc=Ltt;var _ce={};function Ott(n,e){_ce[n]=e}function Ntt(n){return _ce[n]}var Btt=1,Ftt=800,Utt=900,ztt=1e3,Htt=2e3,Vtt=5e3,bce=1e3,$tt=1100,i9=2e3,Sce=3e3,Gtt=4e3,II=4500,Wtt=4600,qtt=5e3,jtt=6e3,xce=7e3,Ktt={PROCESSOR:{FILTER:ztt,SERIES_FILTER:Ftt,STATISTIC:Vtt},VISUAL:{LAYOUT:bce,PROGRESSIVE_LAYOUT:$tt,GLOBAL:i9,CHART:Sce,POST_CHART_LAYOUT:Wtt,COMPONENT:Gtt,BRUSH:qtt,CHART_ITEM:II,ARIA:jtt,DECAL:xce}},ro="__flagInMainProcess",ol="__pendingUpdate",IR="__needsUpdateStatus",Fj=/^[a-zA-Z0-9_]+$/,DR="__connectUpdateStatus",Uj=0,Xtt=1,Ytt=2;function wce(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return Cce(this,n,e)}}function Tce(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Cce(this,n,e)}}function Cce(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),Gd.prototype[e].apply(n,t)}var Ace=function(n){Dr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Gd),Ece=Ace.prototype;Ece.on=Tce("on");Ece.off=Tce("off");var Mg,PR,TC,Lh,RR,kR,LR,eS,tS,zj,Hj,OR,Vj,CC,$j,Mce,fu,Gj,Ice=function(n){Dr(e,n);function e(t,r,i){var a=n.call(this,new Zet)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},Lr(r)&&(r=Dce[r]),a._dom=t;var s="canvas",o="auto",l=!1,u=a._zr=QW(t,{renderer:i.renderer||s,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:bi(i.useDirtyRect,l),useCoarsePointer:bi(i.useCoarsePointer,o),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=n9(fa(u.flush,u),17),r=Mi(r),r&&zue(r,!0),a._theme=r,a._locale=KZe(i.locale||Tue),a._coordSysMgr=new Fue;var c=a._api=$j(a);function d(f,h){return f.__prio-h.__prio}return bE(b3,d),bE(_O,d),a._scheduler=new cce(a,c,_O,b3),a._messageCenter=new Ace,a._initEvents(),a.resize=fa(a.resize,a),u.animation.on("frame",a._onframe,a),zj(u,a),Hj(u,a),D6(a),a}return e.prototype._onframe=function(){if(!this._disposed){Gj(this);var t=this._scheduler;if(this[ol]){var r=this[ol].silent;this[ro]=!0;try{Mg(this),Lh.update.call(this,null,this[ol].updateParams)}catch(l){throw this[ro]=!1,this[ol]=null,l}this._zr.flush(),this[ro]=!1,this[ol]=null,eS.call(this,r),tS.call(this,r)}else if(t.unfinished){var i=Btt,a=this._model,s=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(a),t.performDataProcessorTasks(a),kR(this,a),t.performVisualTasks(a),CC(this,this._model,s,"remain",{}),i-=+new Date-o}while(i>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,i){if(!this[ro]){if(this._disposed){this.id;return}var a,s,o;if(Ur(r)&&(i=r.lazyUpdate,a=r.silent,s=r.replaceMerge,o=r.transition,r=r.notMerge),this[ro]=!0,!this._model||r){var l=new RJe(this._api),u=this._theme,c=this._model=new Nue;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(t,{replaceMerge:s},bO);var d={seriesTransition:o,optionChanged:!0};if(i)this[ol]={silent:a,updateParams:d},this[ro]=!1,this.getZr().wakeUp();else{try{Mg(this),Lh.update.call(this,null,d)}catch(f){throw this[ol]=null,this[ro]=!1,f}this._ssr||this._zr.flush(),this[ol]=null,this[ro]=!1,eS.call(this,a),tS.call(this,a)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||oi.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(oi.svgSupported){var t=this._zr,r=t.storage.getDisplayList();return Bt(r,function(i){i.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,i=this._model,a=[],s=this;Bt(r,function(l){i.eachComponent({mainType:l},function(u){var c=s._componentsMap[u.__viewId];c.group.ignore||(a.push(c),c.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Bt(a,function(l){l.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",i=this.group,a=Math.min,s=Math.max,o=1/0;if(Wj[i]){var l=o,u=o,c=-o,d=-o,f=[],h=t&&t.pixelRatio||this.getDevicePixelRatio();Bt(yx,function(_,b){if(_.group===i){var x=r?_.getZr().painter.getSvgDom().innerHTML:_.renderToCanvas(Mi(t)),w=_.getDom().getBoundingClientRect();l=a(w.left,l),u=a(w.top,u),c=s(w.right,c),d=s(w.bottom,d),f.push({dom:x,left:w.left,top:w.top})}}),l*=h,u*=h,c*=h,d*=h;var p=c-l,m=d-u,v=W_.createCanvas(),g=QW(v,{renderer:r?"svg":"canvas"});if(g.resize({width:p,height:m}),r){var y="";return Bt(f,function(_){var b=_.left-l,x=_.top-u;y+='<g transform="translate('+b+","+x+')">'+_.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=y,t.connectedBackgroundColor&&g.painter.setBackgroundColor(t.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return t.connectedBackgroundColor&&g.add(new Sl({shape:{x:0,y:0,width:p,height:m},style:{fill:t.connectedBackgroundColor}})),Bt(f,function(_){var b=new j_({style:{x:_.left*h-l,y:_.top*h-u,image:_.dom}});g.add(b)}),g.refreshImmediately(),v.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r){return RR(this,"convertToPixel",t,r)},e.prototype.convertFromPixel=function(t,r){return RR(this,"convertFromPixel",t,r)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var i=this._model,a,s=nR(i,t);return Bt(s,function(o,l){l.indexOf("Models")>=0&&Bt(o,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)a=a||!!c.containPoint(r);else if(l==="seriesModels"){var d=this._chartsMap[u.__viewId];d&&d.containPoint&&(a=a||d.containPoint(r,u))}},this)},this),!!a},e.prototype.getVisual=function(t,r){var i=this._model,a=nR(i,t,{defaultMainType:"series"}),s=a.seriesModel,o=s.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?o.indexOfRawIndex(a.dataIndex):null;return l!=null?ttt(o,l,r):ntt(o,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;Bt(Qtt,function(r){var i=function(a){var s=t.getModel(),o=a.target,l,u=r==="globalout";if(u?l={}:o&&zS(o,function(p){var m=Ra(p);if(m&&m.dataIndex!=null){var v=m.dataModel||s.getSeriesByIndex(m.seriesIndex);return l=v&&v.getDataParams(m.dataIndex,m.dataType,o)||{},!0}else if(m.eventData)return l=kn({},m.eventData),!0},!0),l){var c=l.componentType,d=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",d=l.seriesIndex);var f=c&&d!=null&&s.getComponent(c,d),h=f&&t[f.mainType==="series"?"_chartsMap":"_componentsMap"][f.__viewId];l.event=a,l.type=r,t._$eventProcessor.eventInfo={targetEl:o,packedEvent:l,model:f,view:h},t.trigger(r,l)}};i.zrEventfulCallAtLast=!0,t._zr.on(r,i,t)}),Bt(gx,function(r,i){t._messageCenter.on(i,function(a){this.trigger(i,a)},t)}),Bt(["selectchanged"],function(r){t._messageCenter.on(r,function(i){this.trigger(r,i)},t)}),itt(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&wle(this.getDom(),s9,"");var r=this,i=r._api,a=r._model;Bt(r._componentsViews,function(s){s.dispose(a,i)}),Bt(r._chartsViews,function(s){s.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete yx[r.id]},e.prototype.resize=function(t){if(!this[ro]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=t&&t.silent;this[ol]&&(a==null&&(a=this[ol].silent),i=!0,this[ol]=null),this[ro]=!0;try{i&&Mg(this),Lh.update.call(this,{type:"resize",animation:kn({duration:0},t&&t.animation)})}catch(s){throw this[ro]=!1,s}this[ro]=!1,eS.call(this,a),tS.call(this,a)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(Ur(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!SO[t]){var i=SO[t](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=kn({},t);return r.type=gx[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(Ur(r)||(r={silent:!!r}),!!_3[t.type]&&this._model){if(this[ro]){this._pendingActions.push(t);return}var i=r.silent;LR.call(this,t,i);var a=r.flush;a?this._zr.flush():a!==!1&&oi.browser.weChat&&this._throttledZrFlush(),eS.call(this,i),tS.call(this,i)}},e.prototype.updateLabelLayout=function(){Sc.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Mg=function(d){var f=d._scheduler;f.restorePipelines(d._model),f.prepareStageTasks(),PR(d,!0),PR(d,!1),f.plan()},PR=function(d,f){for(var h=d._model,p=d._scheduler,m=f?d._componentsViews:d._chartsViews,v=f?d._componentsMap:d._chartsMap,g=d._zr,y=d._api,_=0;_<m.length;_++)m[_].__alive=!1;f?h.eachComponent(function(w,A){w!=="series"&&b(A)}):h.eachSeries(b);function b(w){var A=w.__requireNewView;w.__requireNewView=!1;var T="_ec_"+w.id+"_"+w.type,C=!A&&v[T];if(!C){var E=_d(w.type),I=f?Yp.getClass(E.main,E.sub):d1.getClass(E.sub);C=new I,C.init(h,y),v[T]=C,m.push(C),g.add(C.group)}w.__viewId=C.__id=T,C.__alive=!0,C.__model=w,C.group.__ecComponentInfo={mainType:w.mainType,index:w.componentIndex},!f&&p.prepareView(C,w,h,y)}for(var _=0;_<m.length;){var x=m[_];x.__alive?_++:(!f&&x.renderTask.dispose(),g.remove(x.group),x.dispose(h,y),m.splice(_,1),v[x.__id]===x&&delete v[x.__id],x.__id=x.group.__ecComponentInfo=null)}},TC=function(d,f,h,p,m){var v=d._model;if(v.setUpdatePayload(h),!p){Bt([].concat(d._componentsViews).concat(d._chartsViews),x);return}var g={};g[p+"Id"]=h[p+"Id"],g[p+"Index"]=h[p+"Index"],g[p+"Name"]=h[p+"Name"];var y={mainType:p,query:g};m&&(y.subType=m);var _=h.excludeSeriesId,b;_!=null&&(b=Si(),Bt(Xo(_),function(w){var A=Id(w,null);A!=null&&b.set(A,!0)})),v&&v.eachComponent(y,function(w){var A=b&&b.get(w.id)!=null;if(!A)if(Eq(h))if(w instanceof N2)h.type===J0&&!h.notBlur&&!w.get(["emphasis","disabled"])&&gQe(w,h,d._api);else{var T=B7(w.mainType,w.componentIndex,h.name,d._api),C=T.focusSelf,E=T.dispatchers;h.type===J0&&C&&!h.notBlur&&tO(w.mainType,w.componentIndex,d._api),E&&Bt(E,function(I){h.type===J0?Z6(I):J6(I)})}else iO(h)&&w instanceof N2&&(bQe(w,h,d._api),Cq(w),fu(d))},d),v&&v.eachComponent(y,function(w){var A=b&&b.get(w.id)!=null;A||x(d[p==="series"?"_chartsMap":"_componentsMap"][w.__viewId])},d);function x(w){w&&w.__alive&&w[f]&&w[f](w.__model,v,d._api,h)}},Lh={prepareAndUpdate:function(d){Mg(this),Lh.update.call(this,d,{optionChanged:d.newOption!=null})},update:function(d,f){var h=this._model,p=this._api,m=this._zr,v=this._coordSysMgr,g=this._scheduler;if(h){h.setUpdatePayload(d),g.restoreData(h,d),g.performSeriesTasks(h),v.create(h,p),g.performDataProcessorTasks(h,d),kR(this,h),v.update(h,p),t(h),g.performVisualTasks(h,d),OR(this,h,p,d,f);var y=h.get("backgroundColor")||"transparent",_=h.get("darkMode");m.setBackgroundColor(y),_!=null&&_!=="auto"&&m.setDarkMode(_),Sc.trigger("afterupdate",h,p)}},updateTransform:function(d){var f=this,h=this._model,p=this._api;if(h){h.setUpdatePayload(d);var m=[];h.eachComponent(function(g,y){if(g!=="series"){var _=f.getViewOfComponentModel(y);if(_&&_.__alive)if(_.updateTransform){var b=_.updateTransform(y,h,p,d);b&&b.update&&m.push(_)}else m.push(_)}});var v=Si();h.eachSeries(function(g){var y=f._chartsMap[g.__viewId];if(y.updateTransform){var _=y.updateTransform(g,h,p,d);_&&_.update&&v.set(g.uid,1)}else v.set(g.uid,1)}),t(h),this._scheduler.performVisualTasks(h,d,{setDirty:!0,dirtyMap:v}),CC(this,h,p,d,{},v),Sc.trigger("afterupdate",h,p)}},updateView:function(d){var f=this._model;f&&(f.setUpdatePayload(d),d1.markUpdateMethod(d,"updateView"),t(f),this._scheduler.performVisualTasks(f,d,{setDirty:!0}),OR(this,f,this._api,d,{}),Sc.trigger("afterupdate",f,this._api))},updateVisual:function(d){var f=this,h=this._model;h&&(h.setUpdatePayload(d),h.eachSeries(function(p){p.getData().clearAllVisual()}),d1.markUpdateMethod(d,"updateVisual"),t(h),this._scheduler.performVisualTasks(h,d,{visualType:"visual",setDirty:!0}),h.eachComponent(function(p,m){if(p!=="series"){var v=f.getViewOfComponentModel(m);v&&v.__alive&&v.updateVisual(m,h,f._api,d)}}),h.eachSeries(function(p){var m=f._chartsMap[p.__viewId];m.updateVisual(p,h,f._api,d)}),Sc.trigger("afterupdate",h,this._api))},updateLayout:function(d){Lh.update.call(this,d)}},RR=function(d,f,h,p){if(d._disposed){d.id;return}for(var m=d._model,v=d._coordSysMgr.getCoordinateSystems(),g,y=nR(m,h),_=0;_<v.length;_++){var b=v[_];if(b[f]&&(g=b[f](m,y,p))!=null)return g}},kR=function(d,f){var h=d._chartsMap,p=d._scheduler;f.eachSeries(function(m){p.updateStreamModes(m,h[m.__viewId])})},LR=function(d,f){var h=this,p=this.getModel(),m=d.type,v=d.escapeConnect,g=_3[m],y=g.actionInfo,_=(y.update||"update").split(":"),b=_.pop(),x=_[0]!=null&&_d(_[0]);this[ro]=!0;var w=[d],A=!1;d.batch&&(A=!0,w=Ti(d.batch,function(N){return N=Aa(kn({},N),d),N.batch=null,N}));var T=[],C,E=iO(d),I=Eq(d);if(I&&jle(this._api),Bt(w,function(N){if(C=g.action(N,h._model,h._api),C=C||kn({},N),C.type=y.event||C.type,T.push(C),I){var F=I7(d),k=F.queryOptionMap,H=F.mainTypeSpecified,U=H?k.keys()[0]:"series";TC(h,b,N,U),fu(h)}else E?(TC(h,b,N,"series"),fu(h)):x&&TC(h,b,N,x.main,x.sub)}),b!=="none"&&!I&&!E&&!x)try{this[ol]?(Mg(this),Lh.update.call(this,d),this[ol]=null):Lh[b].call(this,d)}catch(N){throw this[ro]=!1,N}if(A?C={type:y.event||m,escapeConnect:v,batch:T}:C=T[0],this[ro]=!1,!f){var P=this._messageCenter;if(P.trigger(C.type,C),E){var L={type:"selectchanged",escapeConnect:v,selected:SQe(p),isFromClick:d.isFromClick||!1,fromAction:d.type,fromActionPayload:d};P.trigger(L.type,L)}}},eS=function(d){for(var f=this._pendingActions;f.length;){var h=f.shift();LR.call(this,h,d)}},tS=function(d){!d&&this.trigger("updated")},zj=function(d,f){d.on("rendered",function(h){f.trigger("rendered",h),d.animation.isFinished()&&!f[ol]&&!f._scheduler.unfinished&&!f._pendingActions.length&&f.trigger("finished")})},Hj=function(d,f){d.on("mouseover",function(h){var p=h.target,m=zS(p,rO);m&&(yQe(m,h,f._api),fu(f))}).on("mouseout",function(h){var p=h.target,m=zS(p,rO);m&&(_Qe(m,h,f._api),fu(f))}).on("click",function(h){var p=h.target,m=zS(p,function(y){return Ra(y).dataIndex!=null},!0);if(m){var v=m.selected?"unselect":"select",g=Ra(m);f._api.dispatchAction({type:v,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function t(d){d.clearColorPalette(),d.eachSeries(function(f){f.clearColorPalette()})}function r(d){var f=[],h=[],p=!1;if(d.eachComponent(function(y,_){var b=_.get("zlevel")||0,x=_.get("z")||0,w=_.getZLevelKey();p=p||!!w,(y==="series"?h:f).push({zlevel:b,z:x,idx:_.componentIndex,type:y,key:w})}),p){var m=f.concat(h),v,g;bE(m,function(y,_){return y.zlevel===_.zlevel?y.z-_.z:y.zlevel-_.zlevel}),Bt(m,function(y){var _=d.getComponent(y.type,y.idx),b=y.zlevel,x=y.key;v!=null&&(b=Math.max(v,b)),x?(b===v&&x!==g&&b++,g=x):g&&(b===v&&b++,g=""),v=b,_.setZLevel(b)})}}OR=function(d,f,h,p,m){r(f),Vj(d,f,h,p,m),Bt(d._chartsViews,function(v){v.__alive=!1}),CC(d,f,h,p,m),Bt(d._chartsViews,function(v){v.__alive||v.remove(f,h)})},Vj=function(d,f,h,p,m,v){Bt(v||d._componentsViews,function(g){var y=g.__model;u(y,g),g.render(y,f,h,p),o(y,g),c(y,g)})},CC=function(d,f,h,p,m,v){var g=d._scheduler;m=kn(m||{},{updatedSeries:f.getSeries()}),Sc.trigger("series:beforeupdate",f,h,m);var y=!1;f.eachSeries(function(_){var b=d._chartsMap[_.__viewId];b.__alive=!0;var x=b.renderTask;g.updatePayload(x,p),u(_,b),v&&v.get(_.uid)&&x.dirty(),x.perform(g.getPerformArgs(x))&&(y=!0),b.group.silent=!!_.get("silent"),s(_,b),Cq(_)}),g.unfinished=y||g.unfinished,Sc.trigger("series:layoutlabels",f,h,m),Sc.trigger("series:transition",f,h,m),f.eachSeries(function(_){var b=d._chartsMap[_.__viewId];o(_,b),c(_,b)}),a(d,f),Sc.trigger("series:afterupdate",f,h,m)},fu=function(d){d[IR]=!0,d.getZr().wakeUp()},Gj=function(d){d[IR]&&(d.getZr().storage.traverse(function(f){px(f)||i(f)}),d[IR]=!1)};function i(d){for(var f=[],h=d.currentStates,p=0;p<h.length;p++){var m=h[p];m==="emphasis"||m==="blur"||m==="select"||f.push(m)}d.selected&&d.states.select&&f.push("select"),d.hoverState===O7&&d.states.emphasis?f.push("emphasis"):d.hoverState===L7&&d.states.blur&&f.push("blur"),d.useStates(f)}function a(d,f){var h=d._zr,p=h.storage,m=0;p.traverse(function(v){v.isGroup||m++}),m>f.get("hoverLayerThreshold")&&!oi.node&&!oi.worker&&f.eachSeries(function(v){if(!v.preventUsingHoverLayer){var g=d._chartsMap[v.__viewId];g.__alive&&g.eachRendered(function(y){y.states.emphasis&&(y.states.emphasis.hoverLayer=!0)})}})}function s(d,f){var h=d.get("blendMode")||null;f.eachRendered(function(p){p.isGroup||(p.style.blend=h)})}function o(d,f){if(!d.preventAutoZ){var h=d.get("z")||0,p=d.get("zlevel")||0;f.eachRendered(function(m){return l(m,h,p,-1/0),!0})}}function l(d,f,h,p){var m=d.getTextContent(),v=d.getTextGuideLine(),g=d.isGroup;if(g)for(var y=d.childrenRef(),_=0;_<y.length;_++)p=Math.max(l(y[_],f,h,p),p);else d.z=f,d.zlevel=h,p=Math.max(d.z2,p);if(m&&(m.z=f,m.zlevel=h,isFinite(p)&&(m.z2=p+2)),v){var b=d.textGuideLineConfig;v.z=f,v.zlevel=h,isFinite(p)&&(v.z2=p+(b&&b.showAbove?1:-1))}return p}function u(d,f){f.eachRendered(function(h){if(!px(h)){var p=h.getTextContent(),m=h.getTextGuideLine();h.stateTransition&&(h.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),h.hasState()?(h.prevStates=h.currentStates,h.clearStates()):h.prevStates&&(h.prevStates=null)}})}function c(d,f){var h=d.getModel("stateAnimation"),p=d.isAnimationEnabled(),m=h.get("duration"),v=m>0?{duration:m,delay:h.get("delay"),easing:h.get("easing")}:null;f.eachRendered(function(g){if(g.states&&g.states.emphasis){if(px(g))return;if(g instanceof pa&&MQe(g),g.__dirty){var y=g.prevStates;y&&g.useStates(y)}if(p){g.stateTransition=v;var _=g.getTextContent(),b=g.getTextGuideLine();_&&(_.stateTransition=v),b&&(b.stateTransition=v)}g.__dirty&&i(g)}})}$j=function(d){return new(function(f){Dr(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.prototype.getCoordinateSystems=function(){return d._coordSysMgr.getCoordinateSystems()},h.prototype.getComponentByElement=function(p){for(;p;){var m=p.__ecComponentInfo;if(m!=null)return d._model.getComponent(m.mainType,m.index);p=p.parent}},h.prototype.enterEmphasis=function(p,m){Z6(p,m),fu(d)},h.prototype.leaveEmphasis=function(p,m){J6(p,m),fu(d)},h.prototype.enterBlur=function(p){vQe(p),fu(d)},h.prototype.leaveBlur=function(p){$le(p),fu(d)},h.prototype.enterSelect=function(p){Gle(p),fu(d)},h.prototype.leaveSelect=function(p){Wle(p),fu(d)},h.prototype.getModel=function(){return d.getModel()},h.prototype.getViewOfComponentModel=function(p){return d.getViewOfComponentModel(p)},h.prototype.getViewOfSeriesModel=function(p){return d.getViewOfSeriesModel(p)},h}(Bue))(d)},Mce=function(d){function f(h,p){for(var m=0;m<h.length;m++){var v=h[m];v[DR]=p}}Bt(gx,function(h,p){d._messageCenter.on(p,function(m){if(Wj[d.group]&&d[DR]!==Uj){if(m&&m.escapeConnect)return;var v=d.makeActionFromEvent(m),g=[];Bt(yx,function(y){y!==d&&y.group===d.group&&g.push(y)}),f(g,Uj),Bt(g,function(y){y[DR]!==Xtt&&y.dispatchAction(v)}),f(g,Ytt)}})})}}(),e}(Gd),a9=Ice.prototype;a9.on=wce("on");a9.off=wce("off");a9.one=function(n,e,t){var r=this;function i(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];e&&e.apply&&e.apply(this,a),r.off(n,i)}this.on.call(this,n,i,t)};var Qtt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],_3={},gx={},_O=[],bO=[],b3=[],Dce={},SO={},yx={},Wj={},Ztt=+new Date-0,s9="_echarts_instance_";function Jtt(n,e,t){var r=!(t&&t.ssr);if(r){var i=ent(n);if(i)return i}var a=new Ice(n,e,t);return a.id="ec_"+Ztt++,yx[a.id]=a,r&&wle(n,s9,a.id),Mce(a),Sc.trigger("afterinit",a),a}function ent(n){return yx[rYe(n,s9)]}function Pce(n,e){Dce[n]=e}function Rce(n){da(bO,n)<0&&bO.push(n)}function kce(n,e){l9(_O,n,e,Htt)}function tnt(n){o9("afterinit",n)}function nnt(n){o9("afterupdate",n)}function o9(n,e){Sc.on(n,e)}function Y_(n,e,t){Gi(e)&&(t=e,e="");var r=Ur(n)?n.type:[n,n={event:e}][0];n.event=(n.event||r).toLowerCase(),e=n.event,!gx[e]&&(Jf(Fj.test(r)&&Fj.test(e)),_3[r]||(_3[r]={action:t,actionInfo:n}),gx[e]=r)}function rnt(n,e){Fue.register(n,e)}function int(n,e){l9(b3,n,e,bce,"layout")}function kv(n,e){l9(b3,n,e,Sce,"visual")}var qj=[];function l9(n,e,t,r,i){if((Gi(e)||Ur(e))&&(t=e,e=r),!(da(qj,t)>=0)){qj.push(t);var a=cce.wrapStageHandler(t,i);a.__prio=e,a.__raw=t,n.push(a)}}function Lce(n,e){SO[n]=e}function ant(n,e,t){var r=Ntt("registerMap");r&&r(n,e,t)}var snt=iet;kv(i9,Net);kv(II,Bet);kv(II,Fet);kv(i9,Jet);kv(II,ett);kv(xce,ktt);Rce(zue);kce(Utt,zJe);Lce("default",Uet);Y_({type:J0,event:J0,update:J0},bl);Y_({type:EE,event:EE,update:EE},bl);Y_({type:dx,event:dx,update:dx},bl);Y_({type:ME,event:ME,update:ME},bl);Y_({type:fx,event:fx,update:fx},bl);Pce("light",Yet);Pce("dark",Qet);function nS(n){return n==null?0:n.length||1}function jj(n){return n}var ont=function(){function n(e,t,r,i,a,s){this._old=e,this._new=t,this._oldKeyGetter=r||jj,this._newKeyGetter=i||jj,this.context=a,this._diffModeMultiple=s==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},i=new Array(e.length),a=new Array(t.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var s=0;s<e.length;s++){var o=i[s],l=r[o],u=nS(l);if(u>1){var c=l.shift();l.length===1&&(r[o]=l[0]),this._update&&this._update(c,s)}else u===1?(r[o]=null,this._update&&this._update(l,s)):this._remove&&this._remove(s)}this._performRestAdd(a,r)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},i={},a=[],s=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(t,i,s,"_newKeyGetter");for(var o=0;o<a.length;o++){var l=a[o],u=r[l],c=i[l],d=nS(u),f=nS(c);if(d>1&&f===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(d===1&&f>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(d===1&&f===1)this._update&&this._update(c,u),i[l]=null;else if(d>1&&f>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(d>1)for(var h=0;h<d;h++)this._remove&&this._remove(u[h]);else this._remove&&this._remove(u)}this._performRestAdd(s,i)},n.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=t[i],s=nS(a);if(s>1)for(var o=0;o<s;o++)this._add&&this._add(a[o]);else s===1&&this._add&&this._add(a);t[i]=null}},n.prototype._initIndexMap=function(e,t,r,i){for(var a=this._diffModeMultiple,s=0;s<e.length;s++){var o="_ec_"+this[i](e[s],s);if(a||(r[s]=o),!!t){var l=t[o],u=nS(l);u===0?(t[o]=s,a&&r.push(o)):u===1?t[o]=[l,s]:l.push(s)}}},n}();const lnt=ont;var unt=function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function cnt(n,e){var t={},r=t.encode={},i=Si(),a=[],s=[],o={};Bt(n.dimensions,function(f){var h=n.getDimensionInfo(f),p=h.coordDim;if(p){var m=h.coordDimIndex;NR(r,p)[m]=f,h.isExtraCoord||(i.set(p,1),dnt(h.type)&&(a[0]=f),NR(o,p)[m]=n.getDimensionIndex(h.name)),h.defaultTooltip&&s.push(f)}Due.each(function(v,g){var y=NR(r,g),_=h.otherDims[g];_!=null&&_!==!1&&(y[_]=h.name)})});var l=[],u={};i.each(function(f,h){var p=r[h];u[h]=p[0],l=l.concat(p)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=Ti(l,function(f){return n.getDimensionInfo(f).storeDimIndex}),t.encodeFirstDimNotExtra=u;var c=r.label;c&&c.length&&(a=c.slice());var d=r.tooltip;return d&&d.length?s=d.slice():s.length||(s=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=s,t.userOutput=new unt(o,e),t}function NR(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function dnt(n){return!(n==="ordinal"||n==="time")}var fnt=function(){function n(e){this.otherDims={},e!=null&&kn(this,e)}return n}();const kE=fnt;var hnt=Os(),pnt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},Oce=function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=Bce(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return bi(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=$ue(this.source),r=!Fce(e),i="",a=[],s=0,o=0;s<e;s++){var l=void 0,u=void 0,c=void 0,d=this.dimensions[o];if(d&&d.storeDimIndex===s)l=t?d.name:null,u=d.type,c=d.ordinalMeta,o++;else{var f=this.getSourceDimension(s);f&&(l=t?f.name:null,u=f.type)}a.push({property:l,type:u,ordinalMeta:c}),t&&l!=null&&(!d||!d.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=pnt[u]||"f",c&&(i+=c.uid),i+="$"}var h=this.source,p=[h.seriesLayoutBy,h.startIndex,i].join("$$");return{dimensions:a,hash:p}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===t)a.isCalculationCoord||(i=a.name),r++;else{var s=this.getSourceDimension(t);s&&(i=s.name)}e.push(i)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function mnt(n){return n instanceof Oce}function Nce(n){for(var e=Si(),t=0;t<(n||[]).length;t++){var r=n[t],i=Ur(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,t)}return e}function Bce(n){var e=hnt(n);return e.dimNameMap||(e.dimNameMap=Nce(n.dimensionsDefine))}function Fce(n){return n>30}var rS=Ur,Oh=Ti,vnt=typeof Int32Array>"u"?Array:Int32Array,gnt="e\0\0",Kj=-1,ynt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],_nt=["_approximateExtent"],Xj,AC,iS,aS,BR,EC,FR,bnt=function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r,i=!1;mnt(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var a={},s=[],o={},l=!1,u={},c=0;c<r.length;c++){var d=r[c],f=Lr(d)?new kE({name:d}):d instanceof kE?d:new kE(d),h=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=h,f.coordDimIndex=0);var p=f.otherDims=f.otherDims||{};s.push(h),a[h]=f,u[h]!=null&&(l=!0),f.createInvertedIndices&&(o[h]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(f.storeDimIndex=c)}if(this.dimensions=s,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=o,this._dimOmitted){var m=this._dimIdxToName=Si();Bt(s,function(v){m.set(a[v].storeDimIndex,v)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var i=this._schema.getSourceDimension(t);if(i)return i.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(Wa(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,r){var i=this,a;if(e instanceof uO&&(a=e),!a){var s=this.dimensions,o=Q7(e)||El(e)?new Gue(e,s.length):e;a=new uO;var l=Oh(s,function(u){return{type:i._dimInfos[u].type,property:u}});a.initData(o,l,r)}this._store=a,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=cnt(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t.length),i=r.start,a=r.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var o=i;o<a;o++){var l=o-i;this._nameList[o]=t[l],s&&FR(this,o)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var i=this._dimInfos[t[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==Cp&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,s=this._idList,o=i.getSource().sourceFormat,l=o===Wd;if(l&&!i.pure)for(var u=[],c=e;c<t;c++){var d=i.getItem(c,u);if(!this.hasItemOption&&qXe(d)&&(this.hasItemOption=!0),d){var f=d.name;a[c]==null&&f!=null&&(a[c]=Id(f,null));var h=d.id;s[c]==null&&h!=null&&(s[c]=Id(h,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<t;c++)FR(this,c);Xj(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){rS(e)?kn(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=iS(this,this._nameDimIdx,t)),r==null&&(r=""),r},n.prototype._getCategory=function(e,t){var r=this._store.get(e,t),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},n.prototype.getId=function(e){return AC(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var r=this,i=this._store;return br(e)?i.getValues(Oh(e,function(a){return r._getStoreDimIndex(a)}),t):i.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,i=t.length;r<i;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],i=r[t];return i==null||isNaN(i)?Kj:i},n.prototype.indicesOfNearest=function(e,t,r){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,r)},n.prototype.each=function(e,t,r){Gi(e)&&(r=t,t=e,e=[]);var i=r||this,a=Oh(aS(e),this._getStoreDimIndex,this);this._store.each(a,i?fa(t,i):t)},n.prototype.filterSelf=function(e,t,r){Gi(e)&&(r=t,t=e,e=[]);var i=r||this,a=Oh(aS(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?fa(t,i):t),this},n.prototype.selectRange=function(e){var t=this,r={},i=Ga(e);return Bt(i,function(a){var s=t._getStoreDimIndex(a);r[s]=e[a]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(e,t,r){Gi(e)&&(r=t,t=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(t&&t.apply(this,arguments))},r),i},n.prototype.map=function(e,t,r,i){var a=r||i||this,s=Oh(aS(e),this._getStoreDimIndex,this),o=EC(this);return o._store=this._store.map(s,a?fa(t,a):t),o},n.prototype.modify=function(e,t,r,i){var a=r||i||this,s=Oh(aS(e),this._getStoreDimIndex,this);this._store.modify(s,a?fa(t,a):t)},n.prototype.downSample=function(e,t,r,i){var a=EC(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),t,r,i),a},n.prototype.lttbDownSample=function(e,t){var r=EC(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new bo(r,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new lnt(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return AC(e,r)},function(r){return AC(t,r)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},rS(e)?kn(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],i=r&&r[t];return i??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var a=i[t];return a==null&&(a=this.getVisual(t),br(a)?a=a.slice():rS(a)&&(a=kn({},a)),i[t]=a),a},n.prototype.setItemVisual=function(e,t,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,rS(t)?kn(i,t):i[t]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){rS(e)?kn(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?kn(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;sQe(r,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){Bt(this._graphicEls,function(r,i){r&&e&&e.call(t,r,i)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:Oh(this.dimensions,this._getDimInfo,this),this.hostModel)),BR(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var r=this[e];Gi(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return t.apply(this,[i].concat(_7(arguments)))})},n.internalField=function(){Xj=function(e){var t=e._invertedIndicesMap;Bt(t,function(r,i){var a=e._dimInfos[i],s=a.ordinalMeta,o=e._store;if(s){r=t[i]=new vnt(s.categories.length);for(var l=0;l<r.length;l++)r[l]=Kj;for(var l=0;l<o.count();l++)r[o.get(a.storeDimIndex,l)]=l}})},iS=function(e,t,r){return Id(e._getCategory(t,r),null)},AC=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=iS(e,e._idDimIdx,t)),r==null&&(r=gnt+t),r},aS=function(e){return br(e)||(e=e!=null?[e]:[]),e},EC=function(e){var t=new n(e._schema?e._schema:Oh(e.dimensions,e._getDimInfo,e),e.hostModel);return BR(t,e),t},BR=function(e,t){Bt(ynt.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,Bt(_nt,function(r){e[r]=Mi(t[r])}),e._calculationInfo=kn({},t._calculationInfo)},FR=function(e,t){var r=e._nameList,i=e._idList,a=e._nameDimIdx,s=e._idDimIdx,o=r[t],l=i[t];if(o==null&&a!=null&&(r[t]=o=iS(e,a,t)),l==null&&s!=null&&(i[t]=l=iS(e,s,t)),l==null&&o!=null){var u=e._nameRepeatCount,c=u[o]=(u[o]||0)+1;l=o,c>1&&(l+="__ec__"+c),i[t]=l}}}(),n}();const Snt=bnt;function xnt(n,e){Q7(n)||(n=Hue(n)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||n.dimensionsDefine||[],i=Si(),a=[],s=Tnt(n,t,r,e.dimensionsCount),o=e.canOmitUnusedDimensions&&Fce(s),l=r===n.dimensionsDefine,u=l?Bce(n):Nce(r),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(n,s));for(var d=Si(c),f=new Xue(s),h=0;h<f.length;h++)f[h]=-1;function p(C){var E=f[C];if(E<0){var I=r[C],P=Ur(I)?I:{name:I},L=new kE,N=P.name;N!=null&&u.get(N)!=null&&(L.name=L.displayName=N),P.type!=null&&(L.type=P.type),P.displayName!=null&&(L.displayName=P.displayName);var F=a.length;return f[C]=F,L.storeDimIndex=C,a.push(L),L}return a[E]}if(!o)for(var h=0;h<s;h++)p(h);d.each(function(C,E){var I=Xo(C).slice();if(I.length===1&&!Lr(I[0])&&I[0]<0){d.set(E,!1);return}var P=d.set(E,[]);Bt(I,function(L,N){var F=Lr(L)?u.get(L):L;F!=null&&F<s&&(P[N]=F,v(p(F),E,N))})});var m=0;Bt(t,function(C){var E,I,P,L;if(Lr(C))E=C,L={};else{L=C,E=L.name;var N=L.ordinalMeta;L.ordinalMeta=null,L=kn({},L),L.ordinalMeta=N,I=L.dimsDef,P=L.otherDims,L.name=L.coordDim=L.coordDimIndex=L.dimsDef=L.otherDims=null}var F=d.get(E);if(F!==!1){if(F=Xo(F),!F.length)for(var k=0;k<(I&&I.length||1);k++){for(;m<s&&p(m).coordDim!=null;)m++;m<s&&F.push(m++)}Bt(F,function(H,U){var B=p(H);if(l&&L.type!=null&&(B.type=L.type),v(Aa(B,L),E,U),B.name==null&&I){var $=I[U];!Ur($)&&($={name:$}),B.name=B.displayName=$.name,B.defaultTooltip=$.defaultTooltip}P&&Aa(B.otherDims,P)})}});function v(C,E,I){Due.get(E)!=null?C.otherDims[E]=I:(C.coordDim=E,C.coordDimIndex=I,i.set(E,!0))}var g=e.generateCoord,y=e.generateCoordCount,_=y!=null;y=g?y||1:0;var b=g||"value";function x(C){C.name==null&&(C.name=C.coordDim)}if(o)Bt(a,function(C){x(C)}),a.sort(function(C,E){return C.storeDimIndex-E.storeDimIndex});else for(var w=0;w<s;w++){var A=p(w),T=A.coordDim;T==null&&(A.coordDim=Cnt(b,i,_),A.coordDimIndex=0,(!g||y<=0)&&(A.isExtraCoord=!0),y--),x(A),A.type==null&&(kue(n,w)===Us.Must||A.isExtraCoord&&(A.otherDims.itemName!=null||A.otherDims.seriesName!=null))&&(A.type="ordinal")}return wnt(a),new Oce({source:n,dimensions:a,fullDimensionCount:s,dimensionOmitted:o})}function wnt(n){for(var e=Si(),t=0;t<n.length;t++){var r=n[t],i=r.name,a=e.get(i)||0;a>0&&(r.name=i+(a-1)),a++,e.set(i,a)}}function Tnt(n,e,t,r){var i=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,r||0);return Bt(e,function(a){var s;Ur(a)&&(s=a.dimsDef)&&(i=Math.max(i,s.length))}),i}function Cnt(n,e,t){if(t||e.hasKey(n)){for(var r=0;e.hasKey(n+r);)r++;n+=r}return e.set(n,!0),n}function Uce(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function Ant(n){var e=n.get("interval");return e??"auto"}function Ent(n){return n.type==="category"&&Ant(n.getLabelModel())===0}var Yj=[],Mnt={registerPreprocessor:Rce,registerProcessor:kce,registerPostInit:tnt,registerPostUpdate:nnt,registerUpdateLifecycle:o9,registerAction:Y_,registerCoordinateSystem:rnt,registerLayout:int,registerVisual:kv,registerTransform:snt,registerLoading:Lce,registerMap:ant,registerImpl:Ott,PRIORITY:Ktt,ComponentModel:Da,ComponentView:Yp,SeriesModel:N2,ChartView:d1,registerComponentModel:function(n){Da.registerClass(n)},registerComponentView:function(n){Yp.registerClass(n)},registerSeriesModel:function(n){N2.registerClass(n)},registerChartView:function(n){d1.registerClass(n)},registerSubTypeDefaulter:function(n,e){Da.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){NXe(n,e)}};function t_(n){if(br(n)){Bt(n,function(e){t_(e)});return}da(Yj,n)>=0||(Yj.push(n),Gi(n)&&(n={install:n}),n.install(Mnt))}mv.CMD;function zce(n,e,t,r,i,a,s,o){var l=i-n,u=a-e,c=t-n,d=r-e,f=Math.sqrt(c*c+d*d);c/=f,d/=f;var h=l*c+u*d,p=h/f;o&&(p=Math.min(Math.max(p,0),1)),p*=f;var m=s[0]=n+p*c,v=s[1]=e+p*d;return Math.sqrt((m-i)*(m-i)+(v-a)*(v-a))}var mp=new Vr,Ma=new Vr,Hs=new Vr,vp=new Vr,fd=new Vr,S3=[],Bo=new Vr;function Int(n,e){if(e<=180&&e>0){e=e/180*Math.PI,mp.fromArray(n[0]),Ma.fromArray(n[1]),Hs.fromArray(n[2]),Vr.sub(vp,mp,Ma),Vr.sub(fd,Hs,Ma);var t=vp.len(),r=fd.len();if(!(t<.001||r<.001)){vp.scale(1/t),fd.scale(1/r);var i=vp.dot(fd),a=Math.cos(e);if(a<i){var s=zce(Ma.x,Ma.y,Hs.x,Hs.y,mp.x,mp.y,S3,!1);Bo.fromArray(S3),Bo.scaleAndAdd(fd,s/Math.tan(Math.PI-e));var o=Hs.x!==Ma.x?(Bo.x-Ma.x)/(Hs.x-Ma.x):(Bo.y-Ma.y)/(Hs.y-Ma.y);if(isNaN(o))return;o<0?Vr.copy(Bo,Ma):o>1&&Vr.copy(Bo,Hs),Bo.toArray(n[1])}}}}function Dnt(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,mp.fromArray(n[0]),Ma.fromArray(n[1]),Hs.fromArray(n[2]),Vr.sub(vp,Ma,mp),Vr.sub(fd,Hs,Ma);var r=vp.len(),i=fd.len();if(!(r<.001||i<.001)){vp.scale(1/r),fd.scale(1/i);var a=vp.dot(e),s=Math.cos(t);if(a<s){var o=zce(Ma.x,Ma.y,Hs.x,Hs.y,mp.x,mp.y,S3,!1);Bo.fromArray(S3);var l=Math.PI/2,u=Math.acos(fd.dot(e)),c=l+u-t;if(c>=l)Vr.copy(Bo,Hs);else{Bo.scaleAndAdd(fd,o/Math.tan(Math.PI/2-c));var d=Hs.x!==Ma.x?(Bo.x-Ma.x)/(Hs.x-Ma.x):(Bo.y-Ma.y)/(Hs.y-Ma.y);if(isNaN(d))return;d<0?Vr.copy(Bo,Ma):d>1&&Vr.copy(Bo,Hs)}Bo.toArray(n[1])}}}}function Qj(n,e,t,r){var i=t==="normal",a=i?n:n.ensureState(t);a.ignore=e;var s=r.get("smooth");s&&s===!0&&(s=.3),a.shape=a.shape||{},s>0&&(a.shape.smooth=s);var o=r.getModel("lineStyle").getLineStyle();i?n.useStyle(o):a.style=o}function Pnt(n,e){var t=e.smooth,r=e.points;if(r)if(n.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var i=R6(r[0],r[1]),a=R6(r[1],r[2]);if(!i||!a){n.lineTo(r[1][0],r[1][1]),n.lineTo(r[2][0],r[2][1]);return}var s=Math.min(i,a)*t,o=OP([],r[1],r[0],s/i),l=OP([],r[1],r[2],s/a),u=OP([],o,l,.5);n.bezierCurveTo(o[0],o[1],o[0],o[1],u[0],u[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)n.lineTo(r[c][0],r[c][1])}function Rnt(n,e,t){var r=n.getTextGuideLine(),i=n.getTextContent();if(!i){r&&n.removeTextGuideLine();return}for(var a=e.normal,s=a.get("show"),o=i.ignore,l=0;l<l3.length;l++){var u=l3[l],c=e[u],d=u==="normal";if(c){var f=c.get("show"),h=d?o:bi(i.states[u]&&i.states[u].ignore,o);if(h||!bi(f,s)){var p=d?r:r&&r.states[u];p&&(p.ignore=!0);continue}r||(r=new xI,n.setTextGuideLine(r),!d&&(o||!s)&&Qj(r,!0,"normal",e.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),Qj(r,!1,u,c)}}if(r){Aa(r.style,t),r.style.fill=null;var m=a.get("showAbove"),v=n.textGuideLineConfig=n.textGuideLineConfig||{};v.showAbove=m||!1,r.buildPath=Pnt}}function knt(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},r=0;r<Bd.length;r++){var i=Bd[r];t[i]=n.getModel([i,e])}return t}function Lnt(n){for(var e=[],t=0;t<n.length;t++){var r=n[t];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),s=i.getBoundingRect(),o=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,u=s.clone();u.applyTransform(a),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=o?new u3(s,a):null;e.push({label:i,labelLine:r.labelLine,rect:u,localRect:s,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:o,transform:a})}}return e}function Ont(n,e,t,r,i,a){var s=n.length;if(s<2)return;n.sort(function(T,C){return T.rect[e]-C.rect[e]});for(var o=0,l,u=!1,c=0,d=0;d<s;d++){var f=n[d],h=f.rect;l=h[e]-o,l<0&&(h[e]-=l,f.label[e]-=l,u=!0);var p=Math.max(-l,0);c+=p,o=h[e]+h[t]}c>0&&a&&x(-c/s,0,s);var m=n[0],v=n[s-1],g,y;_(),g<0&&w(-g,.8),y<0&&w(y,.8),_(),b(g,y,1),b(y,g,-1),_(),g<0&&A(-g),y<0&&A(y);function _(){g=m.rect[e]-r,y=i-v.rect[e]-v.rect[t]}function b(T,C,E){if(T<0){var I=Math.min(C,-T);if(I>0){x(I*E,0,s);var P=I+T;P<0&&w(-P*E,1)}else w(-T*E,1)}}function x(T,C,E){T!==0&&(u=!0);for(var I=C;I<E;I++){var P=n[I],L=P.rect;L[e]+=T,P.label[e]+=T}}function w(T,C){for(var E=[],I=0,P=1;P<s;P++){var L=n[P-1].rect,N=Math.max(n[P].rect[e]-L[e]-L[t],0);E.push(N),I+=N}if(I){var F=Math.min(Math.abs(T)/I,C);if(T>0)for(var P=0;P<s-1;P++){var k=E[P]*F;x(k,0,P+1)}else for(var P=s-1;P>0;P--){var k=E[P-1]*F;x(-k,P,s)}}}function A(T){var C=T<0?-1:1;T=Math.abs(T);for(var E=Math.ceil(T/(s-1)),I=0;I<s-1;I++)if(C>0?x(E,0,I+1):x(-E,s-I-1,s),T-=E,T<=0)return}return u}function Nnt(n,e,t,r){return Ont(n,"y","height",e,t,r)}function Bnt(n){var e=[];n.sort(function(m,v){return v.priority-m.priority});var t=new Zi(0,0,0,0);function r(m){if(!m.ignore){var v=m.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}m.ignore=!0}for(var i=0;i<n.length;i++){var a=n[i],s=a.axisAligned,o=a.localRect,l=a.transform,u=a.label,c=a.labelLine;t.copy(a.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var d=a.obb,f=!1,h=0;h<e.length;h++){var p=e[h];if(t.intersect(p.rect)){if(s&&p.axisAligned){f=!0;break}if(p.obb||(p.obb=new u3(p.localRect,p.transform)),d||(d=new u3(o,l)),d.intersect(p.obb)){f=!0;break}}}f?(r(u),c&&r(c)):(u.attr("ignore",a.defaultAttr.ignore),c&&c.attr("ignore",a.defaultAttr.labelGuideIgnore),e.push(a))}}function Zj(n,e,t){var r=W_.createCanvas(),i=e.getWidth(),a=e.getHeight(),s=r.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=i+"px",s.height=a+"px",r.setAttribute("data-zr-dom-id",n)),r.width=i*t,r.height=a*t,r}var Fnt=function(n){Dr(e,n);function e(t,r,i){var a=n.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var s;i=i||a3,typeof t=="string"?s=Zj(t,r,i):Ur(t)&&(s=t,t=s.id),a.id=t,a.dom=s;var o=s.style;return o&&(Goe(s),s.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),a.painter=r,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=Zj("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s=[],o=this.maxRepaintRectCount,l=!1,u=new Zi(0,0,0,0);function c(y){if(!(!y.isFinite()||y.isZero()))if(s.length===0){var _=new Zi(0,0,0,0);_.copy(y),s.push(_)}else{for(var b=!1,x=1/0,w=0,A=0;A<s.length;++A){var T=s[A];if(T.intersect(y)){var C=new Zi(0,0,0,0);C.copy(T),C.union(y),s[A]=C,b=!0;break}else if(l){u.copy(y),u.union(T);var E=y.width*y.height,I=T.width*T.height,P=u.width*u.height,L=P-E-I;L<x&&(x=L,w=A)}}if(l&&(s[w].union(y),b=!0),!b){var _=new Zi(0,0,0,0);_.copy(y),s.push(_)}l||(l=s.length>=o)}}for(var d=this.__startIndex;d<this.__endIndex;++d){var f=t[d];if(f){var h=f.shouldBePainted(i,a,!0,!0),p=f.__isRendered&&(f.__dirty&Kl||!h)?f.getPrevPaintRect():null;p&&c(p);var m=h&&(f.__dirty&Kl||!f.__isRendered)?f.getPaintRect():null;m&&c(m)}}for(var d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var f=r[d],h=f.shouldBePainted(i,a,!0,!0);if(f&&(!h||!f.__zr)&&f.__isRendered){var p=f.getPrevPaintRect();p&&c(p)}}var v;do{v=!1;for(var d=0;d<s.length;){if(s[d].isZero()){s.splice(d,1);continue}for(var g=d+1;g<s.length;)s[d].intersect(s[g])?(v=!0,s[d].union(s[g]),s.splice(g,1)):g++;d++}}while(v);return this._paintRects=s,s},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var i=this.dpr,a=this.dom,s=a.style,o=this.domBack;s&&(s.width=t+"px",s.height=r+"px"),a.width=t*i,a.height=r*i,o&&(o.width=t*i,o.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(t,r,i){var a=this.dom,s=this.ctx,o=a.width,l=a.height;r=r||this.clearColor;var u=this.motionBlur&&!t,c=this.lastFrameAlpha,d=this.dpr,f=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,o/d,l/d));var h=this.domBack;function p(m,v,g,y){if(s.clearRect(m,v,g,y),r&&r!=="transparent"){var _=void 0;if(pI(r)){var b=r.global||r.__width===g&&r.__height===y;_=b&&r.__canvasGradient||vO(s,r,{x:0,y:0,width:g,height:y}),r.__canvasGradient=_,r.__width=g,r.__height=y}else sKe(r)&&(r.scaleX=r.scaleX||d,r.scaleY=r.scaleY||d,_=gO(s,r,{dirty:function(){f.setUnpainted(),f.__painter.refresh()}}));s.save(),s.fillStyle=_||r,s.fillRect(m,v,g,y),s.restore()}u&&(s.save(),s.globalAlpha=c,s.drawImage(h,m,v,g,y),s.restore())}!i||u?p(0,0,o,l):i.length&&Bt(i,function(m){p(m.x*d,m.y*d,m.width*d,m.height*d)})},e}(Gd);const UR=Fnt;var Jj=1e5,jm=314159,MC=.01,Unt=.001;function znt(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function Hnt(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var Vnt=function(){function n(e,t,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=kn({},r||{}),this.dpr=r.devicePixelRatio||a3,this._singleCanvas=a,this.root=e;var s=e.style;s&&(Goe(e),e.innerHTML=""),this.storage=t;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var c=e,d=c.width,f=c.height;r.width!=null&&(d=r.width),r.height!=null&&(f=r.height),this.dpr=r.devicePixelRatio||1,c.width=d*this.dpr,c.height=f*this.dpr,this._width=d,this._height=f;var h=new UR(c,this,this.dpr);h.__builtin__=!0,h.initContext(),l[jm]=h,h.zlevel=jm,o.push(jm),this._domRoot=e}else{this._width=wC(e,0,r),this._height=wC(e,1,r);var u=this._domRoot=Hnt(this._width,this._height);e.appendChild(u)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var a=0;a<i.length;a++){var s=i[a],o=this._layers[s];if(!o.__builtin__&&o.refresh){var l=a===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,s=0;s<t;s++){var o=e[s];o.__inHover&&(r||(r=this._hoverlayer=this.getLayer(Jj)),a||(a=r.ctx,a.save()),k0(a,o,i,s===t-1))}a&&a.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(Jj)},n.prototype.paintOne=function(e,t){mce(e,t)},n.prototype._paintList=function(e,t,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,t,r),s=a.finished,o=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),s)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;B6(function(){l._paintList(e,t,r,i)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(jm).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,r)})},n.prototype._doPaintList=function(e,t,r){for(var i=this,a=[],s=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&a.push(u)}for(var c=!0,d=!1,f=function(m){var v=a[m],g=v.ctx,y=s&&v.createRepaintRects(e,t,h._width,h._height),_=r?v.__startIndex:v.__drawIndex,b=!r&&v.incremental&&Date.now,x=b&&Date.now(),w=v.zlevel===h._zlevelList[0]?h._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,w,y);else if(_===v.__startIndex){var A=e[_];(!A.incremental||!A.notClear||r)&&v.clear(!1,w,y)}_===-1&&(console.error("For some unknown reason. drawIndex is -1"),_=v.__startIndex);var T,C=function(L){var N={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(T=_;T<v.__endIndex;T++){var F=e[T];if(F.__inHover&&(d=!0),i._doPaintEl(F,v,s,L,N,T===v.__endIndex-1),b){var k=Date.now()-x;if(k>15)break}}N.prevElClipPaths&&g.restore()};if(y)if(y.length===0)T=v.__endIndex;else for(var E=h.dpr,I=0;I<y.length;++I){var P=y[I];g.save(),g.beginPath(),g.rect(P.x*E,P.y*E,P.width*E,P.height*E),g.clip(),C(P),g.restore()}else g.save(),C(),g.restore();v.__drawIndex=T,v.__drawIndex<v.__endIndex&&(c=!1)},h=this,p=0;p<a.length;p++)f(p);return oi.wxa&&Bt(this._layers,function(m){m&&m.ctx&&m.ctx.draw&&m.ctx.draw()}),{finished:c,needsRefreshHover:d}},n.prototype._doPaintEl=function(e,t,r,i,a,s){var o=t.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(k0(o,e,a,s),e.setPrevPaintRect(l))}else k0(o,e,a,s)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=jm);var r=this._layers[e];return r||(r=new UR("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?Ta(r,this._layerConfig[e],!0):this._layerConfig[e-MC]&&Ta(r,this._layerConfig[e-MC],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},n.prototype.insertLayer=function(e,t){var r=this._layers,i=this._zlevelList,a=i.length,s=this._domRoot,o=null,l=-1;if(!r[e]&&znt(t)){if(a>0&&e>i[0]){for(l=0;l<a-1&&!(i[l]<e&&i[l+1]>e);l++);o=r[i[l]]}if(i.splice(l+1,0,e),r[e]=t,!t.virtual)if(o){var u=o.dom;u.nextSibling?s.insertBefore(t.dom,u.nextSibling):s.appendChild(t.dom)}else s.firstChild?s.insertBefore(t.dom,s.firstChild):s.appendChild(t.dom);t.__painter=this}},n.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];e.call(t,this._layers[a],a)}},n.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],s=this._layers[a];s.__builtin__&&e.call(t,s,a)}},n.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],s=this._layers[a];s.__builtin__||e.call(t,s,a)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(d,f){d.__dirty=d.__used=!1});function t(d){a&&(a.__endIndex!==d&&(a.__dirty=!0),a.__endIndex=d)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,s=0,o,l;for(l=0;l<e.length;l++){var i=e[l],u=i.zlevel,c=void 0;o!==u&&(o=u,s=0),i.incremental?(c=this.getLayer(u+Unt,this._needsManuallyCompositing),c.incremental=!0,s=1):c=this.getLayer(u+(s>0?MC:0),this._needsManuallyCompositing),c.__builtin__||y7("ZLevel "+u+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,t(l),a=c),i.__dirty&Kl&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(d,f){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,Bt(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?Ta(r[e],t,!0):r[e]=t;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+MC){var s=this._layers[a];Ta(s,r[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],r.splice(da(r,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),t!=null&&(i.height=t),e=wC(a,0,i),t=wC(a,1,i),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var s in this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(jm).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[jm].dom;var t=new UR("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,a=t.dom.height;this.eachLayer(function(d){d.__builtin__?r.drawImage(d.dom,0,0,i,a):d.renderToCanvas&&(r.save(),d.renderToCanvas(r),r.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,u=o.length;l<u;l++){var c=o[l];k0(r,c,s,l===u-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();const $nt=Vnt;function Gnt(n){n.registerPainter("canvas",$nt)}function IC(n,e,t){var r=n.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;br(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Ti(r,function(a){return J1(a,i)})}}var DC=Math.PI*2,eK=Math.PI/180;function Hce(n,e){return R2(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Vce(n,e){var t=Hce(n,e),r=n.get("center"),i=n.get("radius");br(i)||(i=[0,i]);var a=us(t.width,e.getWidth()),s=us(t.height,e.getHeight()),o=Math.min(a,s),l=us(i[0],o/2),u=us(i[1],o/2),c,d,f=n.coordinateSystem;if(f){var h=f.dataToPoint(r);c=h[0]||0,d=h[1]||0}else br(r)||(r=[r,r]),c=us(r[0],a)+t.x,d=us(r[1],s)+t.y;return{cx:c,cy:d,r0:l,r:u}}function Wnt(n,e,t){e.eachSeriesByType(n,function(r){var i=r.getData(),a=i.mapDimension("value"),s=Hce(r,t),o=Vce(r,t),l=o.cx,u=o.cy,c=o.r,d=o.r0,f=-r.get("startAngle")*eK,h=r.get("minAngle")*eK,p=0;i.each(a,function(E){!isNaN(E)&&p++});var m=i.getSum(a),v=Math.PI/(m||p)*2,g=r.get("clockwise"),y=r.get("roseType"),_=r.get("stillShowZeroSum"),b=i.getDataExtent(a);b[0]=0;var x=DC,w=0,A=f,T=g?1:-1;if(i.setLayout({viewRect:s,r:c}),i.each(a,function(E,I){var P;if(isNaN(E)){i.setItemLayout(I,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:g,cx:l,cy:u,r0:d,r:y?NaN:c});return}y!=="area"?P=m===0&&_?v:E*v:P=DC/p,P<h?(P=h,x-=h):w+=E;var L=A+T*P;i.setItemLayout(I,{angle:P,startAngle:A,endAngle:L,clockwise:g,cx:l,cy:u,r0:d,r:y?FXe(E,b,[d,c]):c}),A=L}),x<DC&&p)if(x<=.001){var C=DC/p;i.each(a,function(E,I){if(!isNaN(E)){var P=i.getItemLayout(I);P.angle=C,P.startAngle=f+T*I*C,P.endAngle=f+T*(I+1)*C}})}else v=x/w,A=f,i.each(a,function(E,I){if(!isNaN(E)){var P=i.getItemLayout(I),L=P.angle===h?h:E*v;P.startAngle=A,P.endAngle=A+T*L,A+=T*L}})})}function qnt(n){return{seriesType:n,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var s=i.getName(a),o=0;o<r.length;o++)if(!r[o].isSelected(s))return!1;return!0})}}}}var jnt=Math.PI/180;function tK(n,e,t,r,i,a,s,o,l,u){if(n.length<2)return;function c(m){for(var v=m.rB,g=v*v,y=0;y<m.list.length;y++){var _=m.list[y],b=Math.abs(_.label.y-t),x=r+_.len,w=x*x,A=Math.sqrt((1-Math.abs(b*b/g))*w),T=e+(A+_.len2)*i,C=T-_.label.x,E=_.targetTextWidth-C*i;$ce(_,E,!0),_.label.x=T}}function d(m){for(var v={list:[],maxY:0},g={list:[],maxY:0},y=0;y<m.length;y++)if(m[y].labelAlignTo==="none"){var _=m[y],b=_.label.y>t?g:v,x=Math.abs(_.label.y-t);if(x>=b.maxY){var w=_.label.x-e-_.len2*i,A=r+_.len,T=Math.abs(w)<A?Math.sqrt(x*x/(1-w*w/A/A)):A;b.rB=T,b.maxY=x}b.list.push(_)}c(v),c(g)}for(var f=n.length,h=0;h<f;h++)if(n[h].position==="outer"&&n[h].labelAlignTo==="labelLine"){var p=n[h].label.x-u;n[h].linePoints[1][0]+=p,n[h].label.x=u}Nnt(n,l,l+s)&&d(n)}function Knt(n,e,t,r,i,a,s,o){for(var l=[],u=[],c=Number.MAX_VALUE,d=-Number.MAX_VALUE,f=0;f<n.length;f++){var h=n[f].label;zR(n[f])||(h.x<e?(c=Math.min(c,h.x),l.push(n[f])):(d=Math.max(d,h.x),u.push(n[f])))}for(var f=0;f<n.length;f++){var p=n[f];if(!zR(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var h=p.label,m=p.linePoints,v=void 0;p.labelAlignTo==="edge"?h.x<e?v=m[2][0]-p.labelDistance-s-p.edgeDistance:v=s+i-p.edgeDistance-m[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?h.x<e?v=c-s-p.bleedMargin:v=s+i-d-p.bleedMargin:h.x<e?v=h.x-s-p.bleedMargin:v=s+i-h.x-p.bleedMargin,p.targetTextWidth=v,$ce(p,v)}}tK(u,e,t,r,1,i,a,s,o,d),tK(l,e,t,r,-1,i,a,s,o,c);for(var f=0;f<n.length;f++){var p=n[f];if(!zR(p)&&p.linePoints){var h=p.label,m=p.linePoints,g=p.labelAlignTo==="edge",y=h.style.padding,_=y?y[1]+y[3]:0,b=h.style.backgroundColor?0:_,x=p.rect.width+b,w=m[1][0]-m[2][0];g?h.x<e?m[2][0]=s+p.edgeDistance+x+p.labelDistance:m[2][0]=s+i-p.edgeDistance-x-p.labelDistance:(h.x<e?m[2][0]=h.x+p.labelDistance:m[2][0]=h.x-p.labelDistance,m[1][0]=m[2][0]+w),m[1][1]=m[2][1]=h.y}}}function $ce(n,e,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var r=n.label,i=r.style,a=n.rect,s=i.backgroundColor,o=i.padding,l=o?o[1]+o[3]:0,u=i.overflow,c=a.width+(s?0:l);if(e<c||t){var d=a.height;if(u&&u.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var f=r.getBoundingRect();r.setStyle("width",Math.ceil(f.width)),r.setStyle("backgroundColor",s)}else{var h=e-l,p=e<c?h:t?h>n.unconstrainedWidth?null:h:null;r.setStyle("width",p)}var m=r.getBoundingRect();a.width=m.width;var v=(r.style.margin||0)+2.1;a.height=m.height+v,a.y-=(a.height-d)/2}}}function zR(n){return n.position==="center"}function Xnt(n){var e=n.getData(),t=[],r,i,a=!1,s=(n.get("minShowLabelAngle")||0)*jnt,o=e.getLayout("viewRect"),l=e.getLayout("r"),u=o.width,c=o.x,d=o.y,f=o.height;function h(w){w.ignore=!0}function p(w){if(!w.ignore)return!0;for(var A in w.states)if(w.states[A].ignore===!1)return!0;return!1}e.each(function(w){var A=e.getItemGraphicEl(w),T=A.shape,C=A.getTextContent(),E=A.getTextGuideLine(),I=e.getItemModel(w),P=I.getModel("label"),L=P.get("position")||I.get(["emphasis","label","position"]),N=P.get("distanceToLabelLine"),F=P.get("alignTo"),k=us(P.get("edgeDistance"),u),H=P.get("bleedMargin"),U=I.getModel("labelLine"),B=U.get("length");B=us(B,u);var $=U.get("length2");if($=us($,u),Math.abs(T.endAngle-T.startAngle)<s){Bt(C.states,h),C.ignore=!0,E&&(Bt(E.states,h),E.ignore=!0);return}if(p(C)){var ee=(T.startAngle+T.endAngle)/2,re=Math.cos(ee),ne=Math.sin(ee),ae,pe,de,me;r=T.cx,i=T.cy;var ke=L==="inside"||L==="inner";if(L==="center")ae=T.cx,pe=T.cy,me="center";else{var Be=(ke?(T.r+T.r0)/2*re:T.r*re)+r,Xe=(ke?(T.r+T.r0)/2*ne:T.r*ne)+i;if(ae=Be+re*3,pe=Xe+ne*3,!ke){var Ye=Be+re*(B+l-T.r),Y=Xe+ne*(B+l-T.r),he=Ye+(re<0?-1:1)*$,le=Y;F==="edge"?ae=re<0?c+k:c+u-k:ae=he+(re<0?-N:N),pe=le,de=[[Be,Xe],[Ye,Y],[he,le]]}me=ke?"center":F==="edge"?re>0?"right":"left":re>0?"left":"right"}var Ke=Math.PI,Ue=0,Ze=P.get("rotate");if(Wa(Ze))Ue=Ze*(Ke/180);else if(L==="center")Ue=0;else if(Ze==="radial"||Ze===!0){var je=re<0?-ee+Ke:-ee;Ue=je}else if(Ze==="tangential"&&L!=="outside"&&L!=="outer"){var He=Math.atan2(re,ne);He<0&&(He=Ke*2+He);var ut=ne>0;ut&&(He=Ke+He),Ue=He-Ke}if(a=!!Ue,C.x=ae,C.y=pe,C.rotation=Ue,C.setStyle({verticalAlign:"middle"}),ke){C.setStyle({align:me});var te=C.states.select;te&&(te.x+=C.x,te.y+=C.y)}else{var ge=C.getBoundingRect().clone();ge.applyTransform(C.getComputedTransform());var q=(C.style.margin||0)+2.1;ge.y-=q/2,ge.height+=q,t.push({label:C,labelLine:E,position:L,len:B,len2:$,minTurnAngle:U.get("minTurnAngle"),maxSurfaceAngle:U.get("maxSurfaceAngle"),surfaceNormal:new Vr(re,ne),linePoints:de,textAlign:me,labelDistance:N,labelAlignTo:F,edgeDistance:k,bleedMargin:H,rect:ge,unconstrainedWidth:ge.width,labelStyleWidth:C.style.width})}A.setTextConfig({inside:ke})}}),!a&&n.get("avoidLabelOverlap")&&Knt(t,r,i,l,u,f,c,d);for(var m=0;m<t.length;m++){var v=t[m],g=v.label,y=v.labelLine,_=isNaN(g.x)||isNaN(g.y);if(g){g.setStyle({align:v.textAlign}),_&&(Bt(g.states,h),g.ignore=!0);var b=g.states.select;b&&(b.x+=g.x,b.y+=g.y)}if(y){var x=v.linePoints;_||!x?(Bt(y.states,h),y.ignore=!0):(Int(x,v.minTurnAngle),Dnt(x,v.surfaceNormal,v.maxSurfaceAngle),y.setShape({points:x}),g.__hostTarget.textGuideLineConfig={anchor:new Vr(x[0][0],x[0][1])})}}}var Ynt=function(n){Dr(e,n);function e(t,r,i){var a=n.call(this)||this;a.z2=2;var s=new Jo;return a.setTextContent(s),a.updateData(t,r,i,!0),a}return e.prototype.updateData=function(t,r,i,a){var s=this,o=t.hostModel,l=t.getItemModel(r),u=l.getModel("emphasis"),c=t.getItemLayout(r),d=kn(IC(l.getModel("itemStyle"),c,!0),c);if(isNaN(d.startAngle)){s.setShape(d);return}if(a){s.setShape(d);var f=o.getShallow("animationType");o.ecModel.ssr?(IE(s,{scaleX:0,scaleY:0},o,{dataIndex:r,isFrom:!0}),s.originX=d.cx,s.originY=d.cy):f==="scale"?(s.shape.r=c.r0,IE(s,{shape:{r:c.r}},o,r)):i!=null?(s.setShape({startAngle:i,endAngle:i}),IE(s,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},o,r)):(s.shape.endAngle=c.startAngle,e_(s,{shape:{endAngle:c.endAngle}},o,r))}else fZe(s),e_(s,{shape:d},o,r);s.useStyle(t.getItemVisual(r,"style")),AQe(s,l);var h=(c.startAngle+c.endAngle)/2,p=o.get("selectedOffset"),m=Math.cos(h)*p,v=Math.sin(h)*p,g=l.getShallow("cursor");g&&s.attr("cursor",g),this._updateLabel(o,t,r),s.ensureState("emphasis").shape=kn({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},IC(u.getModel("itemStyle"),c)),kn(s.ensureState("select"),{x:m,y:v,shape:IC(l.getModel(["select","itemStyle"]),c)}),kn(s.ensureState("blur"),{shape:IC(l.getModel(["blur","itemStyle"]),c)});var y=s.getTextGuideLine(),_=s.getTextContent();y&&kn(y.ensureState("select"),{x:m,y:v}),kn(_.ensureState("select"),{x:m,y:v}),wQe(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t,r,i){var a=this,s=r.getItemModel(i),o=s.getModel("labelLine"),l=r.getItemVisual(i,"style"),u=l&&l.fill,c=l&&l.opacity;Sue(a,DZe(s),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:u,defaultOpacity:c,defaultText:t.getFormattedLabel(i,"normal")||r.getName(i)});var d=a.getTextContent();a.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var f=t.get(["label","position"]);if(f!=="outside"&&f!=="outer")a.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new xI,this.setTextGuideLine(h)),Rnt(this,knt(s),{stroke:u,opacity:sx(o.get(["lineStyle","opacity"]),c,1)})}},e}(SI),Qnt=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i,a){var s=t.getData(),o=this._data,l=this.group,u;if(!o&&s.count()>0){for(var c=s.getItemLayout(0),d=1;isNaN(c&&c.startAngle)&&d<s.count();++d)c=s.getItemLayout(d);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),s.count()===0&&t.get("showEmptyCircle")){var f=new SI({shape:Vce(t,i)});f.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}s.diff(o).add(function(h){var p=new Ynt(s,h,u);s.setItemGraphicEl(h,p),l.add(p)}).update(function(h,p){var m=o.getItemGraphicEl(p);m.updateData(s,h,u),m.off("click"),l.add(m),s.setItemGraphicEl(h,m)}).remove(function(h){var p=o.getItemGraphicEl(h);mue(p,t,h)}).execute(),Xnt(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=s)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var s=t[0]-a.cx,o=t[1]-a.cy,l=Math.sqrt(s*s+o*o);return l<=a.r&&l>=a.r0}},e.type="pie",e}(d1);const Znt=Qnt;function Jnt(n,e,t){e=br(e)&&{coordDimensions:e}||kn({encodeDefine:n.getEncode()},e);var r=n.getSource(),i=xnt(r,e).dimensions,a=new Snt(i,n);return a.initData(r,t),a}var ert=function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},n}();const trt=ert;var nrt=Os(),rrt=function(n){Dr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new trt(fa(this.getData,this),fa(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Jnt(this,{coordDimensions:["value"],encodeDefaulter:fs(hJe,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),i=nrt(r),a=i.seats;if(!a){var s=[];r.each(r.mapDimension("value"),function(l){s.push(l)}),a=i.seats=HXe(s,r.hostModel.get("percentPrecision"))}var o=n.prototype.getDataParams.call(this,t);return o.percent=a[t]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(t){j6(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(N2);const irt=rrt;function art(n){return{seriesType:n,reset:function(e,t){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),s=r.get(a,i);return!(Wa(s)&&!isNaN(s)&&s<0)})}}}function srt(n){n.registerChartView(Znt),n.registerSeriesModel(irt),rtt("pie",n.registerAction),n.registerLayout(fs(Wnt,"pie")),n.registerProcessor(qnt("pie")),n.registerProcessor(art("pie"))}function nK(n,e,t){t=t||{};var r=n.coordinateSystem,i=e.axis,a={},s=i.getAxesOnZeroOf()[0],o=i.position,l=s?"onZero":o,u=i.dim,c=r.getRect(),d=[c.x,c.x+c.width,c.y,c.y+c.height],f={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,p=u==="x"?[d[2]-h,d[3]+h]:[d[0]-h,d[1]+h];if(s){var m=s.toGlobalCoord(s.dataToCoord(0));p[f.onZero]=Math.max(Math.min(m,p[1]),p[0])}a.position=[u==="y"?p[f[l]]:d[0],u==="x"?p[f[l]]:d[3]],a.rotation=Math.PI/2*(u==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=v[o],a.labelOffset=s?p[f[o]]-p[f.onZero]:0,e.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),C2(t.labelInside,e.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var g=e.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-g:g,a.z2=1,a}var gp=Math.PI,ev=function(){function n(e,t){this.group=new Nd,this.opt=t,this.axisModel=e,Aa(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new Nd({x:t.position[0],y:t.position[1],rotation:t.rotation});r.updateTransform(),this._transformGroup=r}return n.prototype.hasBuilder=function(e){return!!rK[e]},n.prototype.add=function(e){rK[e](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(e,t,r){var i=yle(t-e),a,s;return s3(i)?(s=r>0?"top":"bottom",a="center"):s3(i-gp)?(s=r>0?"bottom":"top",a="center"):(s="middle",i>0&&i<gp?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:s}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n}(),rK={axisLine:function(n,e,t,r){var i=e.get(["axisLine","show"]);if(i==="auto"&&n.handleAutoShown&&(i=n.handleAutoShown("axisLine")),!!i){var a=e.axis.getExtent(),s=r.transform,o=[a[0],0],l=[a[1],0],u=o[0]>l[0];s&&(Md(o,o,s),Md(l,l,s));var c=kn({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new Gw({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});V7(d.shape,d.style.lineWidth),d.anid="line",t.add(d);var f=e.get(["axisLine","symbol"]);if(f!=null){var h=e.get(["axisLine","symbolSize"]);Lr(f)&&(f=[f,f]),(Lr(h)||Wa(h))&&(h=[h,h]);var p=gtt(e.get(["axisLine","symbolOffset"])||0,h),m=h[0],v=h[1];Bt([{rotate:n.rotation+Math.PI/2,offset:p[0],r:0},{rotate:n.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((o[0]-l[0])*(o[0]-l[0])+(o[1]-l[1])*(o[1]-l[1]))}],function(g,y){if(f[y]!=="none"&&f[y]!=null){var _=r9(f[y],-m/2,-v/2,m,v,c.stroke,!0),b=g.r+g.offset,x=u?l:o;_.attr({rotation:g.rotate,x:x[0]+b*Math.cos(n.rotation),y:x[1]-b*Math.sin(n.rotation),silent:!0,z2:11}),t.add(_)}})}}},axisTickLabel:function(n,e,t,r){var i=urt(t,r,e,n),a=drt(t,r,e,n);if(lrt(e,a,i),crt(t,r,e,n.tickDirection),e.get(["axisLabel","hideOverlap"])){var s=Lnt(Ti(a,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));Bnt(s)}},axisName:function(n,e,t,r){var i=C2(n.axisName,e.get("name"));if(i){var a=e.get("nameLocation"),s=n.nameDirection,o=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=e.axis.getExtent(),c=u[0]>u[1]?-1:1,d=[a==="start"?u[0]-c*l:a==="end"?u[1]+c*l:(u[0]+u[1])/2,aK(a)?n.labelOffset+s*l:0],f,h=e.get("nameRotate");h!=null&&(h=h*gp/180);var p;aK(a)?f=ev.innerTextLayout(n.rotation,h??n.rotation,s):(f=ort(n.rotation,a,h||0,u),p=n.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(f.rotation)),!isFinite(p)&&(p=null)));var m=o.getFont(),v=e.get("nameTruncate",!0)||{},g=v.ellipsis,y=C2(n.nameTruncateMaxWidth,v.maxWidth,p),_=new Jo({x:d[0],y:d[1],rotation:f.rotation,silent:ev.isLabelSilent(e),style:Xp(o,{text:i,font:m,overflow:"truncate",width:y,ellipsis:g,fill:o.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:o.get("align")||f.textAlign,verticalAlign:o.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(W7({el:_,componentModel:e,itemName:i}),_.__fullText=i,_.anid="name",e.get("triggerEvent")){var b=ev.makeAxisEventDataBase(e);b.targetType="axisName",b.name=i,Ra(_).eventData=b}r.add(_),_.updateTransform(),t.add(_),_.decomposeTransform()}}};function ort(n,e,t,r){var i=yle(t-n),a,s,o=r[0]>r[1],l=e==="start"&&!o||e!=="start"&&o;return s3(i-gp/2)?(s=l?"bottom":"top",a="center"):s3(i-gp*1.5)?(s=l?"top":"bottom",a="center"):(s="middle",i<gp*1.5&&i>gp/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:s}}function lrt(n,e,t){if(!Ent(n.axis)){var r=n.get(["axisLabel","showMinLabel"]),i=n.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var a=e[0],s=e[1],o=e[e.length-1],l=e[e.length-2],u=t[0],c=t[1],d=t[t.length-1],f=t[t.length-2];r===!1?(hu(a),hu(u)):iK(a,s)&&(r?(hu(s),hu(c)):(hu(a),hu(u))),i===!1?(hu(o),hu(d)):iK(l,o)&&(i?(hu(l),hu(f)):(hu(o),hu(d)))}}function hu(n){n&&(n.ignore=!0)}function iK(n,e){var t=n&&n.getBoundingRect().clone(),r=e&&e.getBoundingRect().clone();if(!(!t||!r)){var i=S7([]);return x7(i,i,-n.rotation),t.applyTransform(u1([],i,n.getLocalTransform())),r.applyTransform(u1([],i,e.getLocalTransform())),t.intersect(r)}}function aK(n){return n==="middle"||n==="center"}function Gce(n,e,t,r,i){for(var a=[],s=[],o=[],l=0;l<n.length;l++){var u=n[l].coord;s[0]=u,s[1]=0,o[0]=u,o[1]=t,e&&(Md(s,s,e),Md(o,o,e));var c=new Gw({shape:{x1:s[0],y1:s[1],x2:o[0],y2:o[1]},style:r,z2:2,autoBatch:!0,silent:!0});V7(c.shape,c.style.lineWidth),c.anid=i+"_"+n[l].tickValue,a.push(c)}return a}function urt(n,e,t,r){var i=t.axis,a=t.getModel("axisTick"),s=a.get("show");if(s==="auto"&&r.handleAutoShown&&(s=r.handleAutoShown("axisTick")),!(!s||i.scale.isBlank())){for(var o=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),u=i.getTicksCoords(),c=Gce(u,e.transform,l,Aa(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<c.length;d++)n.add(c[d]);return c}}function crt(n,e,t,r){var i=t.axis,a=t.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var s=i.getMinorTicksCoords();if(s.length)for(var o=a.getModel("lineStyle"),l=r*a.get("length"),u=Aa(o.getLineStyle(),Aa(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),c=0;c<s.length;c++)for(var d=Gce(s[c],e.transform,l,u,"minorticks_"+c),f=0;f<d.length;f++)n.add(d[f])}}function drt(n,e,t,r){var i=t.axis,a=C2(r.axisLabelShow,t.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var s=t.getModel("axisLabel"),o=s.get("margin"),l=i.getViewLabels(),u=(C2(r.labelRotate,s.get("rotate"))||0)*gp/180,c=ev.innerTextLayout(r.rotation,u,r.labelDirection),d=t.getCategories&&t.getCategories(!0),f=[],h=ev.isLabelSilent(t),p=t.get("triggerEvent");return Bt(l,function(m,v){var g=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(m.tickValue):m.tickValue,y=m.formattedLabel,_=m.rawLabel,b=s;if(d&&d[g]){var x=d[g];Ur(x)&&x.textStyle&&(b=new bo(x.textStyle,s,t.ecModel))}var w=b.getTextColor()||t.get(["axisLine","lineStyle","color"]),A=i.dataToCoord(g),T=new Jo({x:A,y:r.labelOffset+r.labelDirection*o,rotation:c.rotation,silent:h,z2:10+(m.level||0),style:Xp(b,{text:y,align:b.getShallow("align",!0)||c.textAlign,verticalAlign:b.getShallow("verticalAlign",!0)||b.getShallow("baseline",!0)||c.textVerticalAlign,fill:Gi(w)?w(i.type==="category"?_:i.type==="value"?g+"":g,v):w})});if(T.anid="label_"+g,p){var C=ev.makeAxisEventDataBase(t);C.targetType="axisLabel",C.value=_,C.tickIndex=v,i.type==="category"&&(C.dataIndex=g),Ra(T).eventData=C}e.add(T),T.updateTransform(),f.push(T),n.add(T),T.decomposeTransform()}),f}}const frt=ev;function hrt(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return prt(t,n,e),t.seriesInvolved&&vrt(t,n),t}function prt(n,e,t){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],s=[];Bt(t.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=U2(o.model),u=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=o;var c=o.model,d=c.getModel("tooltip",r);if(Bt(o.getAxes(),fs(m,!1,null)),o.getTooltipAxes&&r&&d.get("show")){var f=d.get("trigger")==="axis",h=d.get(["axisPointer","type"])==="cross",p=o.getTooltipAxes(d.get(["axisPointer","axis"]));(f||h)&&Bt(p.baseAxes,fs(m,h?"cross":!0,f)),h&&Bt(p.otherAxes,fs(m,"cross",!1))}function m(v,g,y){var _=y.model.getModel("axisPointer",i),b=_.get("show");if(!(!b||b==="auto"&&!v&&!xO(_))){g==null&&(g=_.get("triggerTooltip")),_=v?mrt(y,d,i,e,v,g):_;var x=_.get("snap"),w=_.get("triggerEmphasis"),A=U2(y.model),T=g||x||y.type==="category",C=n.axesInfo[A]={key:A,axis:y,coordSys:o,axisPointerModel:_,triggerTooltip:g,triggerEmphasis:w,involveSeries:T,snap:x,useHandle:xO(_),seriesModels:[],linkGroup:null};u[A]=C,n.seriesInvolved=n.seriesInvolved||T;var E=grt(a,y);if(E!=null){var I=s[E]||(s[E]={axesInfo:{}});I.axesInfo[A]=C,I.mapper=a[E].mapper,C.linkGroup=I}}}})}function mrt(n,e,t,r,i,a){var s=e.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};Bt(o,function(f){l[f]=Mi(s.get(f))}),l.snap=n.type!=="category"&&!!a,s.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=s.get(["label","show"]);if(u.show=c??!0,!a){var d=l.lineStyle=s.get("crossStyle");d&&Aa(u,d.textStyle)}}return n.model.getModel("axisPointer",new bo(l,t,r))}function vrt(n,e){e.eachSeries(function(t){var r=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),a=t.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||t.get(["axisPointer","show"],!0)===!1||Bt(n.coordSysAxesInfo[U2(r.model)],function(s){var o=s.axis;r.getAxis(o.dim)===o&&(s.seriesModels.push(t),s.seriesDataCount==null&&(s.seriesDataCount=0),s.seriesDataCount+=t.getData().count())})})}function grt(n,e){for(var t=e.model,r=e.dim,i=0;i<n.length;i++){var a=n[i]||{};if(HR(a[r+"AxisId"],t.id)||HR(a[r+"AxisIndex"],t.componentIndex)||HR(a[r+"AxisName"],t.name))return i}}function HR(n,e){return n==="all"||br(n)&&da(n,e)>=0||n===e}function yrt(n){var e=u9(n);if(e){var t=e.axisPointerModel,r=e.axis.scale,i=t.option,a=t.get("status"),s=t.get("value");s!=null&&(s=r.parse(s));var o=xO(t);a==null&&(i.status=o?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(s==null||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),i.value=s,o&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function u9(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[U2(n)]}function _rt(n){var e=u9(n);return e&&e.axisPointerModel}function xO(n){return!!n.get(["handle","show"])}function U2(n){return n.type+"||"+n.id}var sK={},brt=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.axisPointerClass&&yrt(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,r,i,a){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var s=_rt(t);s?(this._axisPointer||(this._axisPointer=new a)).render(t,s,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){sK[t]=r},e.getAxisPointerClass=function(t){return t&&sK[t]},e.type="axis",e}(Yp);const Srt=brt;var v0=Os(),oK=Mi,VR=fa,xrt=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,r,i){var a=t.get("value"),s=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===s)){this._lastValue=a,this._lastStatus=s;var o=this._group,l=this._handle;if(!s||s==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var u={};this.makeElOption(u,a,e,t,r);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var d=this._moveAnimation=this.determineAnimation(e,t);if(!o)o=this._group=new Nd,this.createPointerEl(o,u,e,t),this.createLabelEl(o,u,e,t),r.getZr().add(o);else{var f=fs(lK,t,d);this.updatePointerEl(o,u,f),this.updateLabelEl(o,u,f,t)}cK(o,t,!0),this._renderHandle(a)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var r=t.get("animation"),i=e.axis,a=i.type==="category",s=t.get("snap");if(!s&&!a)return!1;if(r==="auto"||r==null){var o=this.animationThreshold;if(a&&i.getBandWidth()>o)return!0;if(s){var l=u9(e).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>o}return!1}return r===!0},n.prototype.makeElOption=function(e,t,r,i,a){},n.prototype.createPointerEl=function(e,t,r,i){var a=t.pointer;if(a){var s=v0(e).pointerEl=new MZe[a.type](oK(t.pointer));e.add(s)}},n.prototype.createLabelEl=function(e,t,r,i){if(t.label){var a=v0(e).labelEl=new Jo(oK(t.label));e.add(a),uK(a,i)}},n.prototype.updatePointerEl=function(e,t,r){var i=v0(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),r(i,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,r,i){var a=v0(e).labelEl;a&&(a.setStyle(t.label.style),r(a,{x:t.label.x,y:t.label.y}),uK(a,i))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=t.getModel("handle"),s=t.get("status");if(!a.get("show")||!s||s==="hide"){i&&r.remove(i),this._handle=null;return}var o;this._handle||(o=!0,i=this._handle=G7(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){qoe(u.event)},onmousedown:VR(this._onHandleDragMove,this,0,0),drift:VR(this._onHandleDragMove,this),ondragend:VR(this._onHandleDragEnd,this)}),r.add(i)),cK(i,t,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");br(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,ice(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,o)}},n.prototype._moveHandleToValue=function(e,t){lK(this._axisPointerModel,!t&&this._moveAnimation,this._handle,$R(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform($R(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr($R(i)),v0(r).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,i=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),hO(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},n}();function lK(n,e,t,r){Wce(v0(t).lastProp,r)||(v0(t).lastProp=r,e?e_(t,r,n):(t.stopAnimation(),t.attr(r)))}function Wce(n,e){if(Ur(n)&&Ur(e)){var t=!0;return Bt(e,function(r,i){t=t&&Wce(n[i],r)}),!!t}else return n===e}function uK(n,e){n[e.get(["label","show"])?"show":"hide"]()}function $R(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function cK(n,e,t){var r=e.get("z"),i=e.get("zlevel");n&&n.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=t)})}const wrt=xrt;function Trt(n){var e=n.get("type"),t=n.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function Crt(n,e,t,r,i){var a=t.get("value"),s=qce(a,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),o=t.getModel("label"),l=CI(o.get("padding")||0),u=o.getFont(),c=dle(s,u),d=i.position,f=c.width+l[1]+l[3],h=c.height+l[0]+l[2],p=i.align;p==="right"&&(d[0]-=f),p==="center"&&(d[0]-=f/2);var m=i.verticalAlign;m==="bottom"&&(d[1]-=h),m==="middle"&&(d[1]-=h/2),Art(d,f,h,r);var v=o.get("backgroundColor");(!v||v==="auto")&&(v=e.get(["axisLine","lineStyle","color"])),n.label={x:d[0],y:d[1],style:Xp(o,{text:s,font:u,fill:o.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function Art(n,e,t,r){var i=r.getWidth(),a=r.getHeight();n[0]=Math.min(n[0]+e,i)-e,n[1]=Math.min(n[1]+t,a)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function qce(n,e,t,r,i){n=e.scale.parse(n);var a=e.scale.getLabel({value:n},{precision:i.precision}),s=i.formatter;if(s){var o={value:Uce(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};Bt(r,function(l){var u=t.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,d=u&&u.getDataParams(c);d&&o.seriesData.push(d)}),Lr(s)?a=s.replace("{value}",a):Gi(s)&&(a=s(o))}return a}function jce(n,e,t){var r=A2();return x7(r,r,t.rotation),N6(r,r,t.position),$7([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function Ert(n,e,t,r,i,a){var s=frt.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),Crt(e,r,i,a,{position:jce(r.axis,n,t),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function Mrt(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function Irt(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}var Drt=function(n){Dr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,s){var o=i.axis,l=o.grid,u=a.get("type"),c=dK(l,o).getOtherAxis(o).getGlobalExtent(),d=o.toGlobalCoord(o.dataToCoord(r,!0));if(u&&u!=="none"){var f=Trt(a),h=Prt[u](o,d,c);h.style=f,t.graphicKey=h.type,t.pointer=h}var p=nK(l.model,i);Ert(r,t,p,i,a,s)},e.prototype.getHandleTransform=function(t,r,i){var a=nK(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var s=jce(r.axis,t,a);return{x:s[0],y:s[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var s=i.axis,o=s.grid,l=s.getGlobalExtent(!0),u=dK(o,s).getOtherAxis(s).getGlobalExtent(),c=s.dim==="x"?0:1,d=[t.x,t.y];d[c]+=r[c],d[c]=Math.min(l[1],d[c]),d[c]=Math.max(l[0],d[c]);var f=(u[1]+u[0])/2,h=[f,f];h[c]=d[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:t.rotation,cursorPoint:h,tooltipOption:p[c]}},e}(wrt);function dK(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var Prt={line:function(n,e,t){var r=Mrt([e,t[0]],[e,t[1]],fK(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=Math.max(1,n.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:Irt([e-r/2,t[0]],[r,i],fK(n))}}};function fK(n){return n.dim==="x"?0:1}const Rrt=Drt;var krt=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Da);const Lrt=krt;var Df=Os(),Ort=Bt;function Kce(n,e,t){if(!oi.node){var r=e.getZr();Df(r).records||(Df(r).records={}),Nrt(r,e);var i=Df(r).records[n]||(Df(r).records[n]={});i.handler=t}}function Nrt(n,e){if(Df(n).initialized)return;Df(n).initialized=!0,t("click",fs(hK,"click")),t("mousemove",fs(hK,"mousemove")),t("globalout",Frt);function t(r,i){n.on(r,function(a){var s=Urt(e);Ort(Df(n).records,function(o){o&&i(o,a,s.dispatchAction)}),Brt(s.pendings,e)})}}function Brt(n,e){var t=n.showTip.length,r=n.hideTip.length,i;t?i=n.showTip[t-1]:r&&(i=n.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function Frt(n,e,t){n.handler("leave",null,t)}function hK(n,e,t,r){e.handler(n,t,r)}function Urt(n){var e={showTip:[],hideTip:[]},t=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=t,n.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function wO(n,e){if(!oi.node){var t=e.getZr(),r=(Df(t).records||{})[n];r&&(Df(t).records[n]=null)}}var zrt=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=r.getComponent("tooltip"),s=t.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";Kce("axisPointer",i,function(o,l,u){s!=="none"&&(o==="leave"||s.indexOf(o)>=0)&&u({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,r){wO("axisPointer",r)},e.prototype.dispose=function(t,r){wO("axisPointer",r)},e.type="axisPointer",e}(Yp);const Hrt=zrt;function Xce(n,e){var t=[],r=n.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),s=Hw(a,n);if(s==null||s<0||br(s))return{point:[]};var o=a.getItemGraphicEl(s),l=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(s)||[];else if(l&&l.dataToPoint)if(n.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),d=c.dim,f=u.dim,h=d==="x"||d==="radius"?1:0,p=a.mapDimension(f),m=[];m[h]=a.get(p,s),m[1-h]=a.get(a.getCalculationInfo("stackResultDimension"),s),t=l.dataToPoint(m)||[]}else t=l.dataToPoint(a.getValues(Ti(l.dimensions,function(g){return a.mapDimension(g)}),s))||[];else if(o){var v=o.getBoundingRect().clone();v.applyTransform(o.transform),t=[v.x+v.width/2,v.y+v.height/2]}return{point:t,el:o}}var pK=Os();function Vrt(n,e,t){var r=n.currTrigger,i=[n.x,n.y],a=n,s=n.dispatchAction||fa(t.dispatchAction,t),o=e.getComponent("axisPointer").coordSysAxesInfo;if(o){LE(i)&&(i=Xce({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=LE(i),u=a.axesInfo,c=o.axesInfo,d=r==="leave"||LE(i),f={},h={},p={list:[],map:{}},m={showPointer:fs(Grt,h),showTooltip:fs(Wrt,p)};Bt(o.coordSysMap,function(g,y){var _=l||g.containPoint(i);Bt(o.coordSysAxesInfo[y],function(b,x){var w=b.axis,A=Xrt(u,b);if(!d&&_&&(!u||A)){var T=A&&A.value;T==null&&!l&&(T=w.pointToData(i)),T!=null&&mK(b,T,m,!1,f)}})});var v={};return Bt(c,function(g,y){var _=g.linkGroup;_&&!h[y]&&Bt(_.axesInfo,function(b,x){var w=h[x];if(b!==g&&w){var A=w.value;_.mapper&&(A=g.axis.scale.parse(_.mapper(A,vK(b),vK(g)))),v[g.key]=A}})}),Bt(v,function(g,y){mK(c[y],g,m,!0,f)}),qrt(h,c,f),jrt(p,i,n,s),Krt(c,s,t),f}}function mK(n,e,t,r,i){var a=n.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var s=$rt(e,n),o=s.payloadBatch,l=s.snapToValue;o[0]&&i.seriesIndex==null&&kn(i,o[0]),!r&&n.snap&&a.containData(l)&&l!=null&&(e=l),t.showPointer(n,e,o),t.showTooltip(n,s,l)}}function $rt(n,e){var t=e.axis,r=t.dim,i=n,a=[],s=Number.MAX_VALUE,o=-1;return Bt(e.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(r),d,f;if(l.getAxisTooltipData){var h=l.getAxisTooltipData(c,n,t);f=h.dataIndices,d=h.nestestValue}else{if(f=l.getData().indicesOfNearest(c[0],n,t.type==="category"?.5:null),!f.length)return;d=l.getData().get(c[0],f[0])}if(!(d==null||!isFinite(d))){var p=n-d,m=Math.abs(p);m<=s&&((m<s||p>=0&&o<0)&&(s=m,o=p,i=d,a.length=0),Bt(f,function(v){a.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:a,snapToValue:i}}function Grt(n,e,t,r){n[e.key]={value:t,payloadBatch:r}}function Wrt(n,e,t,r){var i=t.payloadBatch,a=e.axis,s=a.model,o=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,u=U2(l),c=n.map[u];c||(c=n.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:r,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function qrt(n,e,t){var r=t.axesInfo=[];Bt(e,function(i,a){var s=i.axisPointerModel.option,o=n[a];o?(!i.useHandle&&(s.status="show"),s.value=o.value,s.seriesDataIndices=(o.payloadBatch||[]).slice()):!i.useHandle&&(s.status="hide"),s.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:s.value})})}function jrt(n,e,t,r){if(LE(e)||!n.list.length){r({type:"hideTip"});return}var i=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:n.list})}function Krt(n,e,t){var r=t.getZr(),i="axisPointerLastHighlights",a=pK(r)[i]||{},s=pK(r)[i]={};Bt(n,function(u,c){var d=u.axisPointerModel.option;d.status==="show"&&u.triggerEmphasis&&Bt(d.seriesDataIndices,function(f){var h=f.seriesIndex+" | "+f.dataIndex;s[h]=f})});var o=[],l=[];Bt(a,function(u,c){!s[c]&&l.push(u)}),Bt(s,function(u,c){!a[c]&&o.push(u)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function Xrt(n,e){for(var t=0;t<(n||[]).length;t++){var r=n[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function vK(n){var e=n.axis.model,t={},r=t.axisDim=n.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function LE(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function Yrt(n){Srt.registerAxisPointerClass("CartesianAxisPointer",Rrt),n.registerComponentModel(Lrt),n.registerComponentView(Hrt),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!br(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=hrt(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Vrt)}function Qrt(n,e){var t=CI(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),n=new Sl({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1}),n}var Zrt=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Da);const Jrt=Zrt;function Yce(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function Qce(n){if(oi.domSupported){for(var e=document.documentElement.style,t=0,r=n.length;t<r;t++)if(n[t]in e)return n[t]}}var Zce=Qce(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),eit=Qce(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Jce(n,e){if(!n)return e;e=Eue(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function tit(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?e?t[e]:t:null}var nit=Jce(eit,"transition"),c9=Jce(Zce,"transform"),rit="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(oi.transform3dSupported?"will-change:transform;":"");function iit(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function ait(n,e,t){if(!Lr(t)||t==="inside")return"";var r=n.get("backgroundColor"),i=n.get("borderWidth");e=P2(e);var a=iit(t),s=Math.max(Math.round(i)*1.5,6),o="",l=c9+":",u;da(["left","right"],a)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var c=u*Math.PI/180,d=s+i,f=d*Math.abs(Math.cos(c))+d*Math.abs(Math.sin(c)),h=Math.round(((f-Math.SQRT2*i)/2+Math.SQRT2*i-(f-d)/2)*100)/100;o+=";"+a+":-"+h+"px";var p=e+" solid "+i+"px;",m=["position:absolute;width:"+s+"px;height:"+s+"px;z-index:-1;",o+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+m.join("")+'"></div>'}function sit(n,e){var t="cubic-bezier(0.23,1,0.32,1)",r=" "+n/2+"s "+t,i="opacity"+r+",visibility"+r;return e||(r=" "+n+"s "+t,i+=oi.transformSupported?","+c9+r:",left"+r+",top"+r),nit+":"+i}function gK(n,e,t){var r=n.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!oi.transformSupported)return t?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=oi.transform3dSupported,s="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return t?"top:0;left:0;"+c9+":"+s+";":[["top",0],["left",0],[Zce,s]]}function oit(n){var e=[],t=n.get("fontSize"),r=n.getTextColor();r&&e.push("color:"+r),e.push("font:"+n.getFont()),t&&e.push("line-height:"+Math.round(t*3/2)+"px");var i=n.get("textShadowColor"),a=n.get("textShadowBlur")||0,s=n.get("textShadowOffsetX")||0,o=n.get("textShadowOffsetY")||0;return i&&a&&e.push("text-shadow:"+s+"px "+o+"px "+a+"px "+i),Bt(["decoration","align"],function(l){var u=n.get(l);u&&e.push("text-"+l+":"+u)}),e.join(";")}function lit(n,e,t){var r=[],i=n.get("transitionDuration"),a=n.get("backgroundColor"),s=n.get("shadowBlur"),o=n.get("shadowColor"),l=n.get("shadowOffsetX"),u=n.get("shadowOffsetY"),c=n.getModel("textStyle"),d=nce(n,"html"),f=l+"px "+u+"px "+s+"px "+o;return r.push("box-shadow:"+f),e&&i&&r.push(sit(i,t)),a&&r.push("background-color:"+a),Bt(["width","color","radius"],function(h){var p="border-"+h,m=Eue(p),v=n.get(m);v!=null&&r.push(p+":"+v+(h==="color"?"":"px"))}),r.push(oit(c)),d!=null&&r.push("padding:"+CI(d).join("px ")+"px"),r.join(";")+";"}function yK(n,e,t,r,i){var a=e&&e.painter;if(t){var s=a&&a.getViewportRoot();s&&wKe(n,s,document.body,r,i)}else{n[0]=r,n[1]=i;var o=a&&a.getViewportRootOffset();o&&(n[0]+=o.offsetLeft,n[1]+=o.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var uit=function(){function n(e,t,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,oi.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var a=this._zr=t.getZr(),s=this._appendToBody=r&&r.appendToBody;yK(this._styleCoord,a,s,t.getWidth()/2,t.getHeight()/2),s?document.body.appendChild(i):e.appendChild(i),this._container=e;var o=this;i.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!o._enterable){var u=a.handler,c=a.painter.getViewportRoot();bu(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return n.prototype.update=function(e){var t=this._container,r=tit(t,"position"),i=t.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative");var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=rit+lit(e,!this._firstShow,this._longHide)+gK(a[0],a[1],!0)+("border-color:"+P2(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,r,i,a){var s=this.el;if(e==null){s.innerHTML="";return}var o="";if(Lr(a)&&r.get("trigger")==="item"&&!Yce(r)&&(o=ait(r,i,a)),Lr(e))s.innerHTML=e+o;else if(e){s.innerHTML="",br(e)||(e=[e]);for(var l=0;l<e.length;l++)e3(e[l])&&e[l].parentNode!==s&&s.appendChild(e[l]);if(o&&s.childNodes.length){var u=document.createElement("div");u.innerHTML=o,s.appendChild(u)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},n.prototype.moveTo=function(e,t){var r=this._styleCoord;if(yK(r,this._zr,this._appendToBody,e,t),r[0]!=null&&r[1]!=null){var i=this.el.style,a=gK(r[0],r[1]);Bt(a,function(s){i[s[0]]=s[1]})}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",oi.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(fa(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},n}();const cit=uit;var dit=function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),bK(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,r,i,a){var s=this;Ur(e)&&fl(""),this.el&&this._zr.remove(this.el);var o=r.getModel("textStyle");this.el=new Jo({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:o.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:nce(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),Bt(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){s.el.style[u]=r.get(u)}),Bt(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){s.el.style[u]=o.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=_K(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},n.prototype.moveTo=function(e,t){var r=this.el;if(r){var i=this._styleCoord;bK(i,this._zr,e,t),e=i[0],t=i[1];var a=r.style,s=ap(a.borderWidth||0),o=_K(a);r.x=e+s+o.left,r.y=t+s+o.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(fa(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function ap(n){return Math.max(0,n)}function _K(n){var e=ap(n.shadowBlur||0),t=ap(n.shadowOffsetX||0),r=ap(n.shadowOffsetY||0);return{left:ap(e-t),right:ap(e+t),top:ap(e-r),bottom:ap(e+r)}}function bK(n,e,t,r){n[0]=t,n[1]=r,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}const fit=dit;var hit=new Sl({shape:{x:-1,y:-1,width:2,height:2}}),pit=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(oi.node||!r.getDom())){var i=t.getComponent("tooltip"),a=this._renderMode=iYe(i.get("renderMode"));this._tooltipContent=a==="richText"?new fit(r):new cit(r.getDom(),r,{appendToBody:i.get("appendToBody",!0)})}},e.prototype.render=function(t,r,i){if(!(oi.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(t),a.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?ice(this,"_updatePosition",50,"fixRate"):hO(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");Kce("itemTooltip",this._api,fa(function(i,a,s){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,s):i==="leave"&&this._hide(s))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,i=this._api,a=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&s.manuallyShowTip(t,r,i,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,i,a){if(!(a.from===this.uid||oi.node||!i.getDom())){var s=SK(a,i);this._ticket="";var o=a.dataByCoordSys,l=yit(a,r,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},s)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=hit;c.x=a.x,c.y=a.y,c.update(),Ra(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},s)}else if(o)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:o,tooltipOption:a.tooltipOption},s);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,i,a))return;var d=Xce(a,r),f=d.point[0],h=d.point[1];f!=null&&h!=null&&this._tryShow({offsetX:f,offsetY:h,target:d.el,position:a.position,positionDefault:"bottom"},s)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},s))}},e.prototype.manuallyHideTip=function(t,r,i,a){var s=this._tooltipContent;this._tooltipModel&&s.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(SK(a,i))},e.prototype._manuallyAxisShowTip=function(t,r,i,a){var s=a.seriesIndex,o=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(s==null||o==null||l==null)){var u=r.getSeriesByIndex(s);if(u){var c=u.getData(),d=sS([c.getItemModel(o),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:s,dataIndex:o,position:a.position}),!0}}},e.prototype._tryShow=function(t,r){var i=t.target,a=this._tooltipModel;if(a){this._lastX=t.offsetX,this._lastY=t.offsetY;var s=t.dataByCoordSys;if(s&&s.length)this._showAxisTooltip(s,t);else if(i){this._lastDataByCoordSys=null;var o,l;zS(i,function(u){if(Ra(u).dataIndex!=null)return o=u,!0;if(Ra(u).tooltipConfig!=null)return l=u,!0},!0),o?this._showSeriesItemTooltip(t,o,r):l?this._showComponentItemTooltip(t,l,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var i=t.get("showDelay");r=fa(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(t,r){var i=this._ecModel,a=this._tooltipModel,s=[r.offsetX,r.offsetY],o=sS([r.tooltipOption],a),l=this._renderMode,u=[],c=O2("section",{blocks:[],noHeader:!0}),d=[],f=new ER;Bt(t,function(y){Bt(y.dataByAxis,function(_){var b=i.getComponent(_.axisDim+"Axis",_.axisIndex),x=_.value;if(!(!b||x==null)){var w=qce(x,b.axis,i,_.seriesDataIndices,_.valueLabelOpt),A=O2("section",{header:w,noHeader:!yd(w),sortBlocks:!0,blocks:[]});c.blocks.push(A),Bt(_.seriesDataIndices,function(T){var C=i.getSeriesByIndex(T.seriesIndex),E=T.dataIndexInside,I=C.getDataParams(E);if(!(I.dataIndex<0)){I.axisDim=_.axisDim,I.axisIndex=_.axisIndex,I.axisType=_.axisType,I.axisId=_.axisId,I.axisValue=Uce(b.axis,{value:x}),I.axisValueLabel=w,I.marker=f.makeTooltipMarker("item",P2(I.color),l);var P=lj(C.formatTooltip(E,!0,null)),L=P.frag;if(L){var N=sS([C],a).get("valueFormatter");A.blocks.push(N?kn({valueFormatter:N},L):L)}P.text&&d.push(P.text),u.push(I)}})}})}),c.blocks.reverse(),d.reverse();var h=r.position,p=o.get("order"),m=hj(c,f,l,p,i.get("useUTC"),o.get("textStyle"));m&&d.unshift(m);var v=l==="richText"?`

`:"<br/>",g=d.join(v);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(o,h,s[0],s[1],this._tooltipContent,u):this._showTooltipContent(o,g,u,Math.random()+"",s[0],s[1],h,null,f)})},e.prototype._showSeriesItemTooltip=function(t,r,i){var a=this._ecModel,s=Ra(r),o=s.seriesIndex,l=a.getSeriesByIndex(o),u=s.dataModel||l,c=s.dataIndex,d=s.dataType,f=u.getData(d),h=this._renderMode,p=t.positionDefault,m=sS([f.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),v=m.get("trigger");if(!(v!=null&&v!=="item")){var g=u.getDataParams(c,d),y=new ER;g.marker=y.makeTooltipMarker("item",P2(g.color),h);var _=lj(u.formatTooltip(c,!1,d)),b=m.get("order"),x=m.get("valueFormatter"),w=_.frag,A=w?hj(x?kn({valueFormatter:x},w):w,y,h,b,a.get("useUTC"),m.get("textStyle")):_.text,T="item_"+u.name+"_"+c;this._showOrMove(m,function(){this._showTooltipContent(m,A,g,T,t.offsetX,t.offsetY,t.position,t.target,y)}),i({type:"showTip",dataIndexInside:c,dataIndex:f.getRawIndex(c),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,i){var a=Ra(r),s=a.tooltipConfig,o=s.option||{};if(Lr(o)){var l=o;o={content:l,formatter:l}}var u=[o],c=this._ecModel.getComponent(a.componentMainType,a.componentIndex);c&&u.push(c),u.push({formatter:o.content});var d=t.positionDefault,f=sS(u,this._tooltipModel,d?{position:d}:null),h=f.get("content"),p=Math.random()+"",m=new ER;this._showOrMove(f,function(){var v=Mi(f.get("formatterParams")||{});this._showTooltipContent(f,h,v,p,t.offsetX,t.offsetY,t.position,r,m)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,i,a,s,o,l,u,c){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var d=this._tooltipContent;d.setEnterable(t.get("enterable"));var f=t.get("formatter");l=l||t.get("position");var h=r,p=this._getNearestPoint([s,o],i,t.get("trigger"),t.get("borderColor")),m=p.color;if(f)if(Lr(f)){var v=t.ecModel.get("useUTC"),g=br(i)?i[0]:i,y=g&&g.axisType&&g.axisType.indexOf("time")>=0;h=f,y&&(h=Aue(g.axisValue,h,v)),h=Mue(h,i,!0)}else if(Gi(f)){var _=fa(function(b,x){b===this._ticket&&(d.setContent(x,c,t,m,l),this._updatePosition(t,l,s,o,d,i,u))},this);this._ticket=a,h=f(i,a,_)}else h=f;d.setContent(h,c,t,m,l),d.show(t,m),this._updatePosition(t,l,s,o,d,i,u)}},e.prototype._getNearestPoint=function(t,r,i,a){if(i==="axis"||br(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!br(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,i,a,s,o,l){var u=this._api.getWidth(),c=this._api.getHeight();r=r||t.get("position");var d=s.getSize(),f=t.get("align"),h=t.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Gi(r)&&(r=r([i,a],o,s.el,p,{viewSize:[u,c],contentSize:d.slice()})),br(r))i=us(r[0],u),a=us(r[1],c);else if(Ur(r)){var m=r;m.width=d[0],m.height=d[1];var v=R2(m,{width:u,height:c});i=v.x,a=v.y,f=null,h=null}else if(Lr(r)&&l){var g=git(r,p,d,t.get("borderWidth"));i=g[0],a=g[1]}else{var g=mit(i,a,s,u,c,f?null:20,h?null:20);i=g[0],a=g[1]}if(f&&(i-=xK(f)?d[0]/2:f==="right"?d[0]:0),h&&(a-=xK(h)?d[1]/2:h==="bottom"?d[1]:0),Yce(t)){var g=vit(i,a,s,u,c);i=g[0],a=g[1]}s.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,s=!!i&&i.length===t.length;return s&&Bt(i,function(o,l){var u=o.dataByAxis||[],c=t[l]||{},d=c.dataByAxis||[];s=s&&u.length===d.length,s&&Bt(u,function(f,h){var p=d[h]||{},m=f.seriesDataIndices||[],v=p.seriesDataIndices||[];s=s&&f.value===p.value&&f.axisType===p.axisType&&f.axisId===p.axisId&&m.length===v.length,s&&Bt(m,function(g,y){var _=v[y];s=s&&g.seriesIndex===_.seriesIndex&&g.dataIndex===_.dataIndex}),a&&Bt(f.seriesDataIndices,function(g){var y=g.seriesIndex,_=r[y],b=a[y];_&&b&&b.data!==_.data&&(s=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!s},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){oi.node||!r.getDom()||(hO(this,"_updatePosition"),this._tooltipContent.dispose(),wO("itemTooltip",r))},e.type="tooltip",e}(Yp);function sS(n,e,t){var r=e.ecModel,i;t?(i=new bo(t,r,r),i=new bo(e.option,i,r)):i=e;for(var a=n.length-1;a>=0;a--){var s=n[a];s&&(s instanceof bo&&(s=s.get("tooltip",!0)),Lr(s)&&(s={formatter:s}),s&&(i=new bo(s,i,r)))}return i}function SK(n,e){return n.dispatchAction||fa(e.dispatchAction,e)}function mit(n,e,t,r,i,a,s){var o=t.getSize(),l=o[0],u=o[1];return a!=null&&(n+l+a+2>r?n-=l+a:n+=a),s!=null&&(e+u+s>i?e-=u+s:e+=s),[n,e]}function vit(n,e,t,r,i){var a=t.getSize(),s=a[0],o=a[1];return n=Math.min(n+s,r)-s,e=Math.min(e+o,i)-o,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function git(n,e,t,r){var i=t[0],a=t[1],s=Math.ceil(Math.SQRT2*r)+8,o=0,l=0,u=e.width,c=e.height;switch(n){case"inside":o=e.x+u/2-i/2,l=e.y+c/2-a/2;break;case"top":o=e.x+u/2-i/2,l=e.y-a-s;break;case"bottom":o=e.x+u/2-i/2,l=e.y+c+s;break;case"left":o=e.x-i-s,l=e.y+c/2-a/2;break;case"right":o=e.x+u+s,l=e.y+c/2-a/2}return[o,l]}function xK(n){return n==="center"||n==="middle"}function yit(n,e,t){var r=I7(n).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=Vw(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),s=a.models[0];if(s){var o=t.getViewOfComponentModel(s),l;if(o.group.traverse(function(u){var c=Ra(u).tooltipConfig;if(c&&c.name===n.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:s.componentIndex,el:l}}}}const _it=pit;function bit(n){t_(Yrt),n.registerComponentModel(Jrt),n.registerComponentView(_it),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},bl),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},bl)}var Sit=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Da),xit=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var a=this.group,s=t.getModel("textStyle"),o=t.getModel("subtextStyle"),l=t.get("textAlign"),u=bi(t.get("textBaseline"),t.get("textVerticalAlign")),c=new Jo({style:Xp(s,{text:t.get("text"),fill:s.getTextColor()},{disableBox:!0}),z2:10}),d=c.getBoundingRect(),f=t.get("subtext"),h=new Jo({style:Xp(o,{text:f,fill:o.getTextColor(),y:d.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),m=t.get("sublink"),v=t.get("triggerEvent",!0);c.silent=!p&&!v,h.silent=!m&&!v,p&&c.on("click",function(){Gq(p,"_"+t.get("target"))}),m&&h.on("click",function(){Gq(m,"_"+t.get("subtarget"))}),Ra(c).eventData=Ra(h).eventData=v?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(c),f&&a.add(h);var g=a.getBoundingRect(),y=t.getBoxLayoutParams();y.width=g.width,y.height=g.height;var _=R2(y,{width:i.getWidth(),height:i.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?_.x+=_.width:l==="center"&&(_.x+=_.width/2)),u||(u=t.get("top")||t.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?_.y+=_.height:u==="middle"&&(_.y+=_.height/2),u=u||"top"),a.x=_.x,a.y=_.y,a.markRedraw();var b={align:l,verticalAlign:u};c.setStyle(b),h.setStyle(b),g=a.getBoundingRect();var x=_.margin,w=t.getItemStyle(["color","opacity"]);w.fill=t.get("backgroundColor");var A=new Sl({shape:{x:g.x-x[3],y:g.y-x[0],width:g.width+x[1]+x[3],height:g.height+x[0]+x[2],r:t.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});a.add(A)}},e.type="title",e}(Yp);function wit(n){n.registerComponentModel(Sit),n.registerComponentView(xit)}var Tit=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},Cit=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),br(r)&&Bt(r,function(a,s){Lr(a)&&(a={type:a}),r[s]=Ta(a,Tit(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<t.length;i++){var a=t[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(l){var u=l.name;i.push(u);var c;if(l.legendVisualProvider){var d=l.legendVisualProvider,f=d.getAllNames();t.isSeriesFiltered(l)||(i=i.concat(f)),f.length?r=r.concat(f):c=!0}else c=!0;c&&M7(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,s=Si(),o=Ti(a,function(l){return(Lr(l)||Wa(l))&&(l={name:l}),s.get(l.name)?null:(s.set(l.name,!0),new bo(l,this,this.ecModel))},this);this._data=Au(o,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;Bt(a,function(s){r[s.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;Bt(t,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;Bt(t,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&da(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Da);const TO=Cit;var Ig=fs,CO=Bt,PC=Nd,Ait=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new PC),this.group.add(this._selectorGroup=new PC),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var s=t.get("align"),o=t.get("orient");(!s||s==="auto")&&(s=t.get("left")==="right"&&o==="vertical"?"right":"left");var l=t.get("selector",!0),u=t.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=o==="horizontal"?"end":"start"),this.renderInner(s,t,r,i,l,o,u);var c=t.getBoxLayoutParams(),d={width:i.getWidth(),height:i.getHeight()},f=t.get("padding"),h=R2(c,d,f),p=this.layoutInner(t,s,h,a,l,u),m=R2(Aa({width:p.width,height:p.height},c),d,f);this.group.x=m.x-p.x,this.group.y=m.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Qrt(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,i,a,s,o,l){var u=this.getContentGroup(),c=Si(),d=r.get("selectedMode"),f=[];i.eachRawSeries(function(h){!h.get("legendHoverLink")&&f.push(h.id)}),CO(r.getData(),function(h,p){var m=h.get("name");if(!this.newlineDisabled&&(m===""||m===`
`)){var v=new PC;v.newline=!0,u.add(v);return}var g=i.getSeriesByName(m)[0];if(!c.get(m))if(g){var y=g.getData(),_=y.getVisual("legendLineStyle")||{},b=y.getVisual("legendIcon"),x=y.getVisual("style"),w=this._createItem(g,m,p,h,r,t,_,x,b,d,a);w.on("click",Ig(wK,m,null,a,f)).on("mouseover",Ig(AO,g.name,null,a,f)).on("mouseout",Ig(EO,g.name,null,a,f)),c.set(m,!0)}else i.eachRawSeries(function(A){if(!c.get(m)&&A.legendVisualProvider){var T=A.legendVisualProvider;if(!T.containName(m))return;var C=T.indexOfName(m),E=T.getItemVisual(C,"style"),I=T.getItemVisual(C,"legendIcon"),P=Q0(E.fill);P&&P[3]===0&&(P[3]=.2,E=kn(kn({},E),{fill:w7(P,"rgba")}));var L=this._createItem(A,m,p,h,r,t,{},E,I,d,a);L.on("click",Ig(wK,null,m,a,f)).on("mouseover",Ig(AO,null,m,a,f)).on("mouseout",Ig(EO,null,m,a,f)),c.set(m,!0)}},this)},this),s&&this._createSelector(s,r,a,o,l)},e.prototype._createSelector=function(t,r,i,a,s){var o=this.getSelectorGroup();CO(t,function(u){var c=u.type,d=new Jo({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});o.add(d);var f=r.getModel("selectorLabel"),h=r.getModel(["emphasis","selectorLabel"]);Sue(d,{normal:f,emphasis:h},{defaultText:u.title}),nO(d)})},e.prototype._createItem=function(t,r,i,a,s,o,l,u,c,d,f){var h=t.visualDrawType,p=s.get("itemWidth"),m=s.get("itemHeight"),v=s.isSelected(r),g=a.get("symbolRotate"),y=a.get("symbolKeepAspect"),_=a.get("icon");c=_||c||"roundRect";var b=Eit(c,a,l,u,h,v,f),x=new PC,w=a.getModel("textStyle");if(Gi(t.getLegendIcon)&&(!_||_==="inherit"))x.add(t.getLegendIcon({itemWidth:p,itemHeight:m,icon:c,iconRotate:g,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:y}));else{var A=_==="inherit"&&t.getData().getVisual("symbol")?g==="inherit"?t.getData().getVisual("symbolRotate"):g:0;x.add(Mit({itemWidth:p,itemHeight:m,icon:c,iconRotate:A,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:y}))}var T=o==="left"?p+5:-5,C=o,E=s.get("formatter"),I=r;Lr(E)&&E?I=E.replace("{name}",r??""):Gi(E)&&(I=E(r));var P=v?w.getTextColor():a.get("inactiveColor");x.add(new Jo({style:Xp(w,{text:I,x:T,y:m/2,fill:P,align:C,verticalAlign:"middle"},{inheritColor:P})}));var L=new Sl({shape:x.getBoundingRect(),invisible:!0}),N=a.getModel("tooltip");return N.get("show")&&W7({el:L,componentModel:s,itemName:r,itemTooltipOption:N.option}),x.add(L),x.eachChild(function(F){F.silent=!0}),L.silent=!d,this.getContentGroup().add(x),nO(x),x.__legendDataIndex=i,x},e.prototype.layoutInner=function(t,r,i,a,s,o){var l=this.getContentGroup(),u=this.getSelectorGroup();mx(t.get("orient"),l,t.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),d=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),s){mx("horizontal",u,t.get("selectorItemGap",!0));var f=u.getBoundingRect(),h=[-f.x,-f.y],p=t.get("selectorButtonGap",!0),m=t.getOrient().index,v=m===0?"width":"height",g=m===0?"height":"width",y=m===0?"y":"x";o==="end"?h[m]+=c[v]+p:d[m]+=f[v]+p,h[1-m]+=c[g]/2-f[g]/2,u.x=h[0],u.y=h[1],l.x=d[0],l.y=d[1];var _={x:0,y:0};return _[v]=c[v]+p+f[v],_[g]=Math.max(c[g],f[g]),_[y]=Math.min(0,f[y]+h[1-m]),_}else return l.x=d[0],l.y=d[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Yp);function Eit(n,e,t,r,i,a,s){function o(v,g){v.lineWidth==="auto"&&(v.lineWidth=g.lineWidth>0?2:0),CO(v,function(y,_){v[_]==="inherit"&&(v[_]=g[_])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),c=n.lastIndexOf("empty",0)===0?"fill":"stroke",d=l.getShallow("decal");u.decal=!d||d==="inherit"?r.decal:yO(d,s),u.fill==="inherit"&&(u.fill=r[i]),u.stroke==="inherit"&&(u.stroke=r[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?r:t).opacity),o(u,r);var f=e.getModel("lineStyle"),h=f.getLineStyle();if(o(h,t),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),h.stroke==="auto"&&(h.stroke=r.fill),!a){var p=e.get("inactiveBorderWidth"),m=u[c];u.lineWidth=p==="auto"?r.lineWidth>0&&m?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),h.stroke=f.get("inactiveColor"),h.lineWidth=f.get("inactiveWidth")}return{itemStyle:u,lineStyle:h}}function Mit(n){var e=n.icon||"roundRect",t=r9(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function wK(n,e,t,r){EO(n,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:n??e}),AO(n,e,t,r)}function ede(n){for(var e=n.getZr().storage.getDisplayList(),t,r=0,i=e.length;r<i&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function AO(n,e,t,r){ede(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:r})}function EO(n,e,t,r){ede(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:r})}const tde=Ait;function Iit(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function oS(n,e,t){var r={},i=n==="toggleSelected",a;return t.eachComponent("legend",function(s){i&&a!=null?s[a?"select":"unSelect"](e.name):n==="allSelect"||n==="inverseSelect"?s[n]():(s[n](e.name),a=s.isSelected(e.name));var o=s.getData();Bt(o,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=s.isSelected(u);r.hasOwnProperty(u)?r[u]=r[u]&&c:r[u]=c}})}),n==="allSelect"||n==="inverseSelect"?{selected:r}:{name:e.name,selected:r}}function Dit(n){n.registerAction("legendToggleSelect","legendselectchanged",fs(oS,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",fs(oS,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",fs(oS,"inverseSelect")),n.registerAction("legendSelect","legendselected",fs(oS,"select")),n.registerAction("legendUnSelect","legendunselected",fs(oS,"unSelect"))}function nde(n){n.registerComponentModel(TO),n.registerComponentView(tde),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,Iit),n.registerSubTypeDefaulter("legend",function(){return"plain"}),Dit(n)}var Pit=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,i){var a=X7(t);n.prototype.init.call(this,t,r,i),TK(this,t,a)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),TK(this,this.option,t)},e.type="legend.scroll",e.defaultOption=WZe(TO.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(TO);function TK(n,e,t){var r=n.getOrient(),i=[1,1];i[r.index]=0,k2(e,t,{type:"box",ignoreSize:!!i})}const Rit=Pit;var CK=Nd,GR=["width","height"],WR=["x","y"],kit=function(n){Dr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new CK),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new CK)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,i,a,s,o,l){var u=this;n.prototype.renderInner.call(this,t,r,i,a,s,o,l);var c=this._controllerGroup,d=r.get("pageIconSize",!0),f=br(d)?d:[d,d];p("pagePrev",0);var h=r.getModel("pageTextStyle");c.add(new Jo({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(m,v){var g=m+"DataIndex",y=G7(r.get("pageIcons",!0)[r.getOrient().name][v],{onclick:fa(u._pageGo,u,g,r,a)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});y.name=m,c.add(y)}},e.prototype.layoutInner=function(t,r,i,a,s,o){var l=this.getSelectorGroup(),u=t.getOrient().index,c=GR[u],d=WR[u],f=GR[1-u],h=WR[1-u];s&&mx("horizontal",l,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),m=l.getBoundingRect(),v=[-m.x,-m.y],g=Mi(i);s&&(g[c]=i[c]-m[c]-p);var y=this._layoutContentAndController(t,a,g,u,c,f,h,d);if(s){if(o==="end")v[u]+=y[c]+p;else{var _=m[c]+p;v[u]-=_,y[d]-=_}y[c]+=m[c]+p,v[1-u]+=y[h]+y[f]/2-m[f]/2,y[f]=Math.max(y[f],m[f]),y[h]=Math.min(y[h],m[h]+v[1-u]),l.x=v[0],l.y=v[1],l.markRedraw()}return y},e.prototype._layoutContentAndController=function(t,r,i,a,s,o,l,u){var c=this.getContentGroup(),d=this._containerGroup,f=this._controllerGroup;mx(t.get("orient"),c,t.get("itemGap"),a?i.width:null,a?null:i.height),mx("horizontal",f,t.get("pageButtonItemGap",!0));var h=c.getBoundingRect(),p=f.getBoundingRect(),m=this._showController=h[s]>i[s],v=[-h.x,-h.y];r||(v[a]=c[u]);var g=[0,0],y=[-p.x,-p.y],_=bi(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(m){var b=t.get("pageButtonPosition",!0);b==="end"?y[a]+=i[s]-p[s]:g[a]+=p[s]+_}y[1-a]+=h[o]/2-p[o]/2,c.setPosition(v),d.setPosition(g),f.setPosition(y);var x={x:0,y:0};if(x[s]=m?i[s]:h[s],x[o]=Math.max(h[o],p[o]),x[l]=Math.min(0,p[l]+y[1-a]),d.__rectSize=i[s],m){var w={x:0,y:0};w[s]=Math.max(i[s]-p[s]-_,0),w[o]=x[o],d.setClipPath(new Sl({shape:w})),d.__rectSize=w[s]}else f.eachChild(function(T){T.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(t);return A.pageIndex!=null&&e_(c,{x:A.contentPosition[0],y:A.contentPosition[1]},m?t:null),this._updatePageInfoView(t,A),x},e.prototype._pageGo=function(t,r,i){var a=this._getPageInfo(r)[t];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;Bt(["pagePrev","pageNext"],function(c){var d=c+"DataIndex",f=r[d]!=null,h=i.childOfName(c);h&&(h.setStyle("fill",f?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),h.cursor=f?"pointer":"default")});var a=i.childOfName("pageText"),s=t.get("pageFormatter"),o=r.pageIndex,l=o!=null?o+1:0,u=r.pageCount;a&&s&&a.setStyle("text",Lr(s)?s.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):s({current:l,total:u}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,s=t.getOrient().index,o=GR[s],l=WR[s],u=this._findTargetItemIndex(r),c=i.children(),d=c[u],f=c.length,h=f?1:0,p={contentPosition:[i.x,i.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return p;var m=b(d);p.contentPosition[s]=-m.s;for(var v=u+1,g=m,y=m,_=null;v<=f;++v)_=b(c[v]),(!_&&y.e>g.s+a||_&&!x(_,g.s))&&(y.i>g.i?g=y:g=_,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),y=_;for(var v=u-1,g=m,y=m,_=null;v>=-1;--v)_=b(c[v]),(!_||!x(y,_.s))&&g.i<y.i&&(y=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=_;return p;function b(w){if(w){var A=w.getBoundingRect(),T=A[l]+w[l];return{s:T,e:T+A[o],i:w.__legendDataIndex}}}function x(w,A){return w.e>=A&&w.s<=A+a}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(s,o){var l=s.__legendDataIndex;a==null&&l!=null&&(a=o),l===t&&(r=o)}),r??a},e.type="legend.scroll",e}(tde);const Lit=kit;function Oit(n){n.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function Nit(n){t_(nde),n.registerComponentModel(Rit),n.registerComponentView(Lit),Oit(n)}function Bit(n){t_(nde),t_(Nit)}var qR=null;function Fit(n){return qR||(qR=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),qR(n)}var jR=null;function Uit(n){jR||(jR=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),jR(n)}function zit(n){var e=document.createElement("style");return e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(e),e}function RC(n,e){e===void 0&&(e={});var t=document.createElement(n);return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}function rde(n,e,t){var r=window.getComputedStyle(n,t||null)||{display:"none"};return r[e]}function MO(n){if(!document.documentElement.contains(n))return{detached:!0,rendered:!1};for(var e=n;e!==document;){if(rde(e,"display")==="none")return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}var Hit='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',IO=0,OE=null;function Vit(n,e){n.__resize_mutation_handler__||(n.__resize_mutation_handler__=Wit.bind(n));var t=n.__resize_listeners__;if(!t){if(n.__resize_listeners__=[],window.ResizeObserver){var r=n.offsetWidth,i=n.offsetHeight,a=new ResizeObserver(function(){!n.__resize_observer_triggered__&&(n.__resize_observer_triggered__=!0,n.offsetWidth===r&&n.offsetHeight===i)||x3(n)}),s=MO(n),o=s.detached,l=s.rendered;n.__resize_observer_triggered__=o===!1&&l===!1,n.__resize_observer__=a,a.observe(n)}else if(n.attachEvent&&n.addEventListener)n.__resize_legacy_resize_handler__=function(){x3(n)},n.attachEvent("onresize",n.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",n.__resize_mutation_handler__);else if(IO||(OE=zit(Hit)),qit(n),n.__resize_rendered__=MO(n).rendered,window.MutationObserver){var u=new MutationObserver(n.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),n.__resize_mutation_observer__=u}}n.__resize_listeners__.push(e),IO++}function $it(n,e){var t=n.__resize_listeners__;if(t){if(e&&t.splice(t.indexOf(e),1),!t.length||!e){if(n.detachEvent&&n.removeEventListener){n.detachEvent("onresize",n.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",n.__resize_mutation_handler__);return}n.__resize_observer__?(n.__resize_observer__.unobserve(n),n.__resize_observer__.disconnect(),n.__resize_observer__=null):(n.__resize_mutation_observer__&&(n.__resize_mutation_observer__.disconnect(),n.__resize_mutation_observer__=null),n.removeEventListener("scroll",d9),n.removeChild(n.__resize_triggers__.triggers),n.__resize_triggers__=null),n.__resize_listeners__=null}!--IO&&OE&&OE.parentNode.removeChild(OE)}}function Git(n){var e=n.__resize_last__,t=e.width,r=e.height,i=n.offsetWidth,a=n.offsetHeight;return i!==t||a!==r?{width:i,height:a}:null}function Wit(){var n=MO(this),e=n.rendered,t=n.detached;e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(f9(this),this.addEventListener("scroll",d9,!0)),this.__resize_rendered__=e,x3(this))}function d9(){var n=this;f9(this),this.__resize_raf__&&Uit(this.__resize_raf__),this.__resize_raf__=Fit(function(){var e=Git(n);e&&(n.__resize_last__=e,x3(n))})}function x3(n){!n||!n.__resize_listeners__||n.__resize_listeners__.forEach(function(e){e.call(n,n)})}function qit(n){var e=rde(n,"position");(!e||e==="static")&&(n.style.position="relative"),n.__resize_old_position__=e,n.__resize_last__={};var t=RC("div",{className:"resize-triggers"}),r=RC("div",{className:"resize-expand-trigger"}),i=RC("div"),a=RC("div",{className:"resize-contract-trigger"});r.appendChild(i),t.appendChild(r),t.appendChild(a),n.appendChild(t),n.__resize_triggers__={triggers:t,expand:r,expandChild:i,contract:a},f9(n),n.addEventListener("scroll",d9,!0),n.__resize_last__={width:n.offsetWidth,height:n.offsetHeight}}function f9(n){var e=n.__resize_triggers__,t=e.expand,r=e.expandChild,i=e.contract,a=i.scrollWidth,s=i.scrollHeight,o=t.offsetWidth,l=t.offsetHeight,u=t.scrollWidth,c=t.scrollHeight;i.scrollLeft=a,i.scrollTop=s,r.style.width=o+1+"px",r.style.height=l+1+"px",t.scrollLeft=u,t.scrollTop=c}var bf=function(){return bf=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},bf.apply(this,arguments)},jit=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Kit(n){return e=Object.create(null),jit.forEach(function(t){e[t]=function(r){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(!n.value)throw new Error("ECharts is not initialized yet.");return n.value[r].apply(n.value,i)}}(t)}),e;var e}var Xit={autoresize:[Boolean,Object]},Yit=/^on[^a-z]/,Qit=function(n){return Yit.test(n)};function kC(n,e){var t=S(n);return t&&typeof t=="object"&&"value"in t?t.value||e:t||e}var Zit="ecLoadingOptions",Jit={loading:Boolean,loadingOptions:Object},lS=null,ide="x-vue-echarts",AK=[],uS=[];(function(n,e){if(n&&typeof document<"u"){var t,r=e.prepend===!0?"prepend":"append",i=e.singleTag===!0,a=typeof e.container=="string"?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(i){var s=AK.indexOf(a);s===-1&&(s=AK.push(a)-1,uS[s]={}),t=uS[s]&&uS[s][r]?uS[s][r]:uS[s][r]=o()}else t=o();n.charCodeAt(0)===65279&&(n=n.substring(1)),t.styleSheet?t.styleSheet.cssText+=n:t.appendChild(document.createTextNode(n))}function o(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),e.attributes)for(var u=Object.keys(e.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],e.attributes[u[c]]);var d=r==="prepend"?"afterbegin":"beforeend";return a.insertAdjacentElement(d,l),l}})(`x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}
`,{});var eat=function(){if(lS!=null)return lS;if(typeof HTMLElement>"u"||typeof customElements>"u")return lS=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(ide)}catch{return lS=!1}return lS=!0}(),tat="ecTheme",nat="ecInitOptions",rat="ecUpdateOptions";Ne({name:"echarts",props:bf(bf({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},Xit),Jit),emits:{},inheritAttrs:!1,setup:function(n,e){var t=e.attrs,r=jr(),i=jr(),a=jr(),s=jr(),o=Yt(tat,null),l=Yt(nat,null),u=Yt(rat,null),c=ja(n),d=c.autoresize,f=c.manualUpdate,h=c.loading,p=c.loadingOptions,m=V(function(){return s.value||n.option||null}),v=V(function(){return n.theme||kC(o,{})}),g=V(function(){return n.initOptions||kC(l,{})}),y=V(function(){return n.updateOptions||kC(u,{})}),_=V(function(){return function(C){var E={};for(var I in C)Qit(I)||(E[I]=C[I]);return E}(t)}),b=tr().proxy.$listeners;function x(C){if(i.value){var E=a.value=Jtt(i.value,v.value,g.value);n.group&&(E.group=n.group);var I=b;I||(I={},Object.keys(t).filter(function(L){return L.indexOf("on")===0&&L.length>2}).forEach(function(L){var N=L.charAt(2).toLowerCase()+L.slice(3);N.substring(N.length-4)==="Once"&&(N="~".concat(N.substring(0,N.length-4))),I[N]=t[L]})),Object.keys(I).forEach(function(L){var N=I[L];if(N){var F=L.toLowerCase();F.charAt(0)==="~"&&(F=F.substring(1),N.__once__=!0);var k=E;if(F.indexOf("zr:")===0&&(k=E.getZr(),F=F.substring(3)),N.__once__){delete N.__once__;var H=N;N=function(){for(var U=[],B=0;B<arguments.length;B++)U[B]=arguments[B];H.apply(void 0,U),k.off(F,N)}}k.on(F,N)}}),d.value?cn(function(){E&&!E.isDisposed()&&E.resize(),P()}):P()}function P(){var L=C||m.value;L&&E.setOption(L,y.value)}}function w(){a.value&&(a.value.dispose(),a.value=void 0)}var A=null;St(f,function(C){typeof A=="function"&&(A(),A=null),C||(A=St(function(){return n.option},function(E,I){E&&(a.value?a.value.setOption(E,bf({notMerge:E!==I},y.value)):x())},{deep:!0}))},{immediate:!0}),St([v,g],function(){w(),x()},{deep:!0}),vs(function(){n.group&&a.value&&(a.value.group=n.group)});var T=Kit(a);return function(C,E,I){var P=Yt(Zit,{}),L=V(function(){return bf(bf({},kC(P,{})),I==null?void 0:I.value)});vs(function(){var N=C.value;N&&(E.value?N.showLoading(L.value):N.hideLoading())})}(a,h,p),function(C,E,I){var P=null;St([I,C,E],function(L,N,F){var k=L[0],H=L[1],U=L[2];if(k&&H&&U){var B=U===!0?{}:U,$=B.throttle,ee=$===void 0?100:$,re=B.onResize,ne=function(){H.resize(),re==null||re()};P=ee?n9(ne,ee):ne,Vit(k,P)}F(function(){k&&P&&$it(k,P)})})}(a,d,i),zn(function(){x()}),Wr(function(){eat&&r.value?r.value.__dispose=w:w()}),bf({chart:a,root:r,inner:i,setOption:function(C,E){n.manualUpdate&&(s.value=C),a.value?a.value.setOption(C,E||{}):x(C)},nonEventAttrs:_},T)},render:function(){var n=bf({},this.nonEventAttrs);return n.ref="root",n.class=n.class?["echarts"].concat(n.class):"echarts",an(ide,n,[an("div",{ref:"inner",class:"echarts-inner"})])}});t_([Gnt,srt,wit,bit,Bit]);const iat=n=>(x_("data-v-a584e089"),n=n(),w_(),n),aat=iat(()=>Ce("h1",{class:"section-title"},"More Results",-1)),sat=Ne({__name:"Table",setup(n){const e=[{model:"DiffWater",UCIQE:"0.609",UIQM:"2.991",Uranker:"1.850"},{model:"DM_Underwater",UCIQE:"0.614",UIQM:"2.972",Uranker:"2.167"},{model:"Osmosis",UCIQE:"0.640",UIQM:"2.844",Uranker:"1.916"},{model:"CLIP_UIE",UCIQE:"0.619",UIQM:"2.892",Uranker:"2.323"},{model:"Our",UCIQE:"0.626",UIQM:"3.193",Uranker:"2.463"}],t=[{model:"DiffWater",UCIQE:"0.614",UIQM:"2.916",Uranker:"2.085"},{model:"DM_Underwater",UCIQE:"0.590",UIQM:"2.838",Uranker:"1.641"},{model:"Osmosis",UCIQE:"0.637",UIQM:"2.637",Uranker:"2.091"},{model:"CLIP_UIE",UCIQE:"0.625",UIQM:"2.818",Uranker:"2.510"},{model:"Our",UCIQE:"0.617",UIQM:"3.056",Uranker:"2.606"}],r=[{model:"DiffWater",UCIQE:"0.554",UIQM:"2.985",Uranker:"0.900"},{model:"DM_Underwater",UCIQE:"0.570",UIQM:"2.995",Uranker:"1.645"},{model:"Osmosis",UCIQE:"0.626",UIQM:"2.938",Uranker:"1.508"},{model:"CLIP_UIE",UCIQE:"0.568",UIQM:"2.971",Uranker:"1.464"},{model:"Our",UCIQE:"0.594",UIQM:"3.099",Uranker:"2.112"}],i=[{model:"DiffWater",UCIQE:"0.595",UIQM:"3.118",Uranker:"1.442"},{model:"DM_Underwater",UCIQE:"0.603",UIQM:"3.107",Uranker:"1.810"},{model:"Osmosis",UCIQE:"0.618",UIQM:"2.902",Uranker:"0.872"},{model:"CLIP_UIE",UCIQE:"0.620",UIQM:"3.007",Uranker:"2.218"},{model:"Our",UCIQE:"0.621",UIQM:"3.213",Uranker:"2.230"}];return(a,s)=>{const o=Kt("el-divider"),l=Kt("el-row"),u=Kt("el-table-column"),c=Kt("el-table"),d=Kt("el-tab-pane"),f=Kt("el-tabs"),h=Kt("el-card"),p=Kt("el-col");return W(),Se("div",null,[be(o),be(l,{justify:"center"},{default:Oe(()=>[aat]),_:1}),be(l,{justify:"center"},{default:Oe(()=>[be(p,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Oe(()=>[be(h,{class:"card"},{default:Oe(()=>[be(f,{class:"demo-tabs","model-value":"T90"},{default:Oe(()=>[be(d,{label:"T90",name:"T90"},{default:Oe(()=>[be(c,{data:e,"default-sort":{prop:"value_b",order:"descending"},"scrollbar-always-on":""},{default:Oe(()=>[be(u,{prop:"model",label:"Model",width:"100",sortable:""}),be(u,{prop:"UCIQE",label:"UCIQE","min-width":"120",sortable:""}),be(u,{prop:"UIQM",label:"UIQM","min-width":"120",sortable:""}),be(u,{prop:"Uranker",label:"Uranker","min-width":"120",sortable:""})]),_:1})]),_:1}),be(d,{label:"EUVP",name:"EUVP"},{default:Oe(()=>[be(c,{data:t,"default-sort":{prop:"value_b",order:"descending"},"scrollbar-always-on":""},{default:Oe(()=>[be(u,{prop:"model",label:"Model",width:"100",sortable:""}),be(u,{prop:"UCIQE",label:"UCIQE","min-width":"120",sortable:""}),be(u,{prop:"UIQM",label:"UIQM","min-width":"120",sortable:""}),be(u,{prop:"Uranker",label:"Uranker","min-width":"120",sortable:""})]),_:1})]),_:1}),be(d,{label:"UCCS",name:"UCCS"},{default:Oe(()=>[be(c,{data:r,"default-sort":{prop:"value_b",order:"descending"},"scrollbar-always-on":""},{default:Oe(()=>[be(u,{prop:"model",label:"Model",width:"100",sortable:""}),be(u,{prop:"UCIQE",label:"UCIQE","min-width":"120",sortable:""}),be(u,{prop:"UIQM",label:"UIQM","min-width":"120",sortable:""}),be(u,{prop:"Uranker",label:"Uranker","min-width":"120",sortable:""})]),_:1})]),_:1}),be(d,{label:"U45",name:"U45"},{default:Oe(()=>[be(c,{data:i,"default-sort":{prop:"value_b",order:"descending"},"scrollbar-always-on":""},{default:Oe(()=>[be(u,{prop:"model",label:"Model",width:"100",sortable:""}),be(u,{prop:"UCIQE",label:"UCIQE","min-width":"120",sortable:""}),be(u,{prop:"UIQM",label:"UIQM","min-width":"120",sortable:""}),be(u,{prop:"Uranker",label:"Uranker","min-width":"120",sortable:""})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),oat=$c(sat,[["__scopeId","data-v-a584e089"]]);var ade={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(typeof self<"u"?self:Al,function(){return function(){var t={};(function(){t.d=function(oe,M){for(var D in M)t.o(M,D)&&!t.o(oe,D)&&Object.defineProperty(oe,D,{enumerable:!0,get:M[D]})}})(),function(){t.o=function(oe,M){return Object.prototype.hasOwnProperty.call(oe,M)}}();var r={};t.d(r,{default:function(){return npe}});var i=function oe(M,D){this.position=void 0;var R="KaTeX parse error: "+M,O,X=D&&D.loc;if(X&&X.start<=X.end){var se=X.lexer.input;O=X.start;var Te=X.end;O===se.length?R+=" at end of input: ":R+=" at position "+(O+1)+": ";var $e=se.slice(O,Te).replace(/[^]/g,"$&̲"),nt;O>15?nt="…"+se.slice(O-15,O):nt=se.slice(0,O);var bt;Te+15<se.length?bt=se.slice(Te,Te+15)+"…":bt=se.slice(Te),R+=nt+$e+bt}var Gt=new Error(R);return Gt.name="ParseError",Gt.__proto__=oe.prototype,Gt.position=O,Gt};i.prototype.__proto__=Error.prototype;var a=i,s=function(M,D){return M.indexOf(D)!==-1},o=function(M,D){return M===void 0?D:M},l=/([A-Z])/g,u=function(M){return M.replace(l,"-$1").toLowerCase()},c={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},d=/[&><"']/g;function f(oe){return String(oe).replace(d,function(M){return c[M]})}var h=function oe(M){return M.type==="ordgroup"||M.type==="color"?M.body.length===1?oe(M.body[0]):M:M.type==="font"?oe(M.body):M},p=function(M){var D=h(M);return D.type==="mathord"||D.type==="textord"||D.type==="atom"},m=function(M){if(!M)throw new Error("Expected non-null, but got "+String(M));return M},v=function(M){var D=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(M);return D!=null?D[1]:"_relative"},g={contains:s,deflt:o,escape:f,hyphenate:u,getBaseElem:h,isCharacterBox:p,protocolFromUrl:v},y=function(){function oe(D){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,D=D||{},this.displayMode=g.deflt(D.displayMode,!1),this.output=g.deflt(D.output,"htmlAndMathml"),this.leqno=g.deflt(D.leqno,!1),this.fleqn=g.deflt(D.fleqn,!1),this.throwOnError=g.deflt(D.throwOnError,!0),this.errorColor=g.deflt(D.errorColor,"#cc0000"),this.macros=D.macros||{},this.minRuleThickness=Math.max(0,g.deflt(D.minRuleThickness,0)),this.colorIsTextColor=g.deflt(D.colorIsTextColor,!1),this.strict=g.deflt(D.strict,"warn"),this.trust=g.deflt(D.trust,!1),this.maxSize=Math.max(0,g.deflt(D.maxSize,1/0)),this.maxExpand=Math.max(0,g.deflt(D.maxExpand,1e3)),this.globalGroup=g.deflt(D.globalGroup,!1)}var M=oe.prototype;return M.reportNonstrict=function(R,O,X){var se=this.strict;if(typeof se=="function"&&(se=se(R,O,X)),!(!se||se==="ignore")){if(se===!0||se==="error")throw new a("LaTeX-incompatible input and strict mode is set to 'error': "+(O+" ["+R+"]"),X);se==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(O+" ["+R+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+se+"': "+O+" ["+R+"]"))}},M.useStrictBehavior=function(R,O,X){var se=this.strict;if(typeof se=="function")try{se=se(R,O,X)}catch{se="error"}return!se||se==="ignore"?!1:se===!0||se==="error"?!0:se==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(O+" ["+R+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+se+"': "+O+" ["+R+"]")),!1)},M.isTrusted=function(R){R.url&&!R.protocol&&(R.protocol=g.protocolFromUrl(R.url));var O=typeof this.trust=="function"?this.trust(R):this.trust;return!!O},oe}(),_=function(){function oe(D,R,O){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=D,this.size=R,this.cramped=O}var M=oe.prototype;return M.sup=function(){return P[L[this.id]]},M.sub=function(){return P[N[this.id]]},M.fracNum=function(){return P[F[this.id]]},M.fracDen=function(){return P[k[this.id]]},M.cramp=function(){return P[H[this.id]]},M.text=function(){return P[U[this.id]]},M.isTight=function(){return this.size>=2},oe}(),b=0,x=1,w=2,A=3,T=4,C=5,E=6,I=7,P=[new _(b,0,!1),new _(x,0,!0),new _(w,1,!1),new _(A,1,!0),new _(T,2,!1),new _(C,2,!0),new _(E,3,!1),new _(I,3,!0)],L=[T,C,T,C,E,I,E,I],N=[C,C,C,C,I,I,I,I],F=[w,A,T,C,E,I,E,I],k=[A,A,C,C,I,I,I,I],H=[x,x,A,A,C,C,I,I],U=[b,x,w,A,w,A,w,A],B={DISPLAY:P[b],TEXT:P[w],SCRIPT:P[T],SCRIPTSCRIPT:P[E]},$=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function ee(oe){for(var M=0;M<$.length;M++)for(var D=$[M],R=0;R<D.blocks.length;R++){var O=D.blocks[R];if(oe>=O[0]&&oe<=O[1])return D.name}return null}var re=[];$.forEach(function(oe){return oe.blocks.forEach(function(M){return re.push.apply(re,M)})});function ne(oe){for(var M=0;M<re.length;M+=2)if(oe>=re[M]&&oe<=re[M+1])return!0;return!1}var ae=80,pe=function(M,D){return"M95,"+(622+M+D)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+M/2.075+" -"+M+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+M)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+M)+" "+D+"h400000v"+(40+M)+"h-400000z"},de=function(M,D){return"M263,"+(601+M+D)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+M/2.084+" -"+M+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+M)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+M)+" "+D+"h400000v"+(40+M)+"h-400000z"},me=function(M,D){return"M983 "+(10+M+D)+`
l`+M/3.13+" -"+M+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+M)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+M)+" "+D+"h400000v"+(40+M)+"h-400000z"},ke=function(M,D){return"M424,"+(2398+M+D)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+M/4.223+" -"+M+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+M)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+M)+" "+D+`
h400000v`+(40+M)+"h-400000z"},Be=function(M,D){return"M473,"+(2713+M+D)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+M/5.298+" -"+M+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+M)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+M)+" "+D+"h400000v"+(40+M)+"H1017.7z"},Xe=function(M){var D=M/2;return"M400000 "+M+" H0 L"+D+" 0 l65 45 L145 "+(M-80)+" H400000z"},Ye=function(M,D,R){var O=R-54-D-M;return"M702 "+(M+D)+"H400000"+(40+M)+`
H742v`+O+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+D+"H400000v"+(40+M)+"H742z"},Y=function(M,D,R){D=1e3*D;var O="";switch(M){case"sqrtMain":O=pe(D,ae);break;case"sqrtSize1":O=de(D,ae);break;case"sqrtSize2":O=me(D,ae);break;case"sqrtSize3":O=ke(D,ae);break;case"sqrtSize4":O=Be(D,ae);break;case"sqrtTall":O=Ye(D,ae,R)}return O},he=function(M,D){switch(M){case"⎜":return"M291 0 H417 V"+D+" H291z M291 0 H417 V"+D+" H291z";case"∣":return"M145 0 H188 V"+D+" H145z M145 0 H188 V"+D+" H145z";case"∥":return"M145 0 H188 V"+D+" H145z M145 0 H188 V"+D+" H145z"+("M367 0 H410 V"+D+" H367z M367 0 H410 V"+D+" H367z");case"⎟":return"M457 0 H583 V"+D+" H457z M457 0 H583 V"+D+" H457z";case"⎢":return"M319 0 H403 V"+D+" H319z M319 0 H403 V"+D+" H319z";case"⎥":return"M263 0 H347 V"+D+" H263z M263 0 H347 V"+D+" H263z";case"⎪":return"M384 0 H504 V"+D+" H384z M384 0 H504 V"+D+" H384z";case"⏐":return"M312 0 H355 V"+D+" H312z M312 0 H355 V"+D+" H312z";case"‖":return"M257 0 H300 V"+D+" H257z M257 0 H300 V"+D+" H257z"+("M478 0 H521 V"+D+" H478z M478 0 H521 V"+D+" H478z");default:return""}},le={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Ke=function(){function oe(D){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=D,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var M=oe.prototype;return M.hasClass=function(R){return g.contains(this.classes,R)},M.toNode=function(){for(var R=document.createDocumentFragment(),O=0;O<this.children.length;O++)R.appendChild(this.children[O].toNode());return R},M.toMarkup=function(){for(var R="",O=0;O<this.children.length;O++)R+=this.children[O].toMarkup();return R},M.toText=function(){var R=function(X){return X.toText()};return this.children.map(R).join("")},oe}(),Ue={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Ze={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},je={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function He(oe,M){Ue[oe]=M}function ut(oe,M,D){if(!Ue[M])throw new Error("Font metrics not found for font: "+M+".");var R=oe.charCodeAt(0),O=Ue[M][R];if(!O&&oe[0]in je&&(R=je[oe[0]].charCodeAt(0),O=Ue[M][R]),!O&&D==="text"&&ne(R)&&(O=Ue[M][77]),O)return{depth:O[0],height:O[1],italic:O[2],skew:O[3],width:O[4]}}var ge={};function q(oe){var M;if(oe>=5?M=0:oe>=3?M=1:M=2,!ge[M]){var D=ge[M]={cssEmPerMu:Ze.quad[M]/18};for(var R in Ze)Ze.hasOwnProperty(R)&&(D[R]=Ze[R][M])}return ge[M]}var te=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],ye=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Ve=function(M,D){return D.size<2?M:te[M-1][D.size-1]},et=function(){function oe(D){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=D.style,this.color=D.color,this.size=D.size||oe.BASESIZE,this.textSize=D.textSize||this.size,this.phantom=!!D.phantom,this.font=D.font||"",this.fontFamily=D.fontFamily||"",this.fontWeight=D.fontWeight||"",this.fontShape=D.fontShape||"",this.sizeMultiplier=ye[this.size-1],this.maxSize=D.maxSize,this.minRuleThickness=D.minRuleThickness,this._fontMetrics=void 0}var M=oe.prototype;return M.extend=function(R){var O={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var X in R)R.hasOwnProperty(X)&&(O[X]=R[X]);return new oe(O)},M.havingStyle=function(R){return this.style===R?this:this.extend({style:R,size:Ve(this.textSize,R)})},M.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},M.havingSize=function(R){return this.size===R&&this.textSize===R?this:this.extend({style:this.style.text(),size:R,textSize:R,sizeMultiplier:ye[R-1]})},M.havingBaseStyle=function(R){R=R||this.style.text();var O=Ve(oe.BASESIZE,R);return this.size===O&&this.textSize===oe.BASESIZE&&this.style===R?this:this.extend({style:R,size:O})},M.havingBaseSizing=function(){var R;switch(this.style.id){case 4:case 5:R=3;break;case 6:case 7:R=1;break;default:R=6}return this.extend({style:this.style.text(),size:R})},M.withColor=function(R){return this.extend({color:R})},M.withPhantom=function(){return this.extend({phantom:!0})},M.withFont=function(R){return this.extend({font:R})},M.withTextFontFamily=function(R){return this.extend({fontFamily:R,font:""})},M.withTextFontWeight=function(R){return this.extend({fontWeight:R,font:""})},M.withTextFontShape=function(R){return this.extend({fontShape:R,font:""})},M.sizingClasses=function(R){return R.size!==this.size?["sizing","reset-size"+R.size,"size"+this.size]:[]},M.baseSizingClasses=function(){return this.size!==oe.BASESIZE?["sizing","reset-size"+this.size,"size"+oe.BASESIZE]:[]},M.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=q(this.size)),this._fontMetrics},M.getColor=function(){return this.phantom?"transparent":this.color},oe}();et.BASESIZE=6;var At=et,It={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},De={ex:!0,em:!0,mu:!0},Tt=function(M){return typeof M!="string"&&(M=M.unit),M in It||M in De||M==="ex"},ot=function(M,D){var R;if(M.unit in It)R=It[M.unit]/D.fontMetrics().ptPerEm/D.sizeMultiplier;else if(M.unit==="mu")R=D.fontMetrics().cssEmPerMu;else{var O;if(D.style.isTight()?O=D.havingStyle(D.style.text()):O=D,M.unit==="ex")R=O.fontMetrics().xHeight;else if(M.unit==="em")R=O.fontMetrics().quad;else throw new a("Invalid unit: '"+M.unit+"'");O!==D&&(R*=O.sizeMultiplier/D.sizeMultiplier)}return Math.min(M.number*R,D.maxSize)},G=function(M){return+M.toFixed(4)+"em"},_e=function(M){return M.filter(function(D){return D}).join(" ")},ve=function(M,D,R){if(this.classes=M||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=R||{},D){D.style.isTight()&&this.classes.push("mtight");var O=D.getColor();O&&(this.style.color=O)}},Le=function(M){var D=document.createElement(M);D.className=_e(this.classes);for(var R in this.style)this.style.hasOwnProperty(R)&&(D.style[R]=this.style[R]);for(var O in this.attributes)this.attributes.hasOwnProperty(O)&&D.setAttribute(O,this.attributes[O]);for(var X=0;X<this.children.length;X++)D.appendChild(this.children[X].toNode());return D},we=function(M){var D="<"+M;this.classes.length&&(D+=' class="'+g.escape(_e(this.classes))+'"');var R="";for(var O in this.style)this.style.hasOwnProperty(O)&&(R+=g.hyphenate(O)+":"+this.style[O]+";");R&&(D+=' style="'+g.escape(R)+'"');for(var X in this.attributes)this.attributes.hasOwnProperty(X)&&(D+=" "+X+'="'+g.escape(this.attributes[X])+'"');D+=">";for(var se=0;se<this.children.length;se++)D+=this.children[se].toMarkup();return D+="</"+M+">",D},Ie=function(){function oe(D,R,O,X){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,ve.call(this,D,O,X),this.children=R||[]}var M=oe.prototype;return M.setAttribute=function(R,O){this.attributes[R]=O},M.hasClass=function(R){return g.contains(this.classes,R)},M.toNode=function(){return Le.call(this,"span")},M.toMarkup=function(){return we.call(this,"span")},oe}(),wt=function(){function oe(D,R,O,X){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,ve.call(this,R,X),this.children=O||[],this.setAttribute("href",D)}var M=oe.prototype;return M.setAttribute=function(R,O){this.attributes[R]=O},M.hasClass=function(R){return g.contains(this.classes,R)},M.toNode=function(){return Le.call(this,"a")},M.toMarkup=function(){return we.call(this,"a")},oe}(),Pe=function(){function oe(D,R,O){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=R,this.src=D,this.classes=["mord"],this.style=O}var M=oe.prototype;return M.hasClass=function(R){return g.contains(this.classes,R)},M.toNode=function(){var R=document.createElement("img");R.src=this.src,R.alt=this.alt,R.className="mord";for(var O in this.style)this.style.hasOwnProperty(O)&&(R.style[O]=this.style[O]);return R},M.toMarkup=function(){var R="<img  src='"+this.src+" 'alt='"+this.alt+"' ",O="";for(var X in this.style)this.style.hasOwnProperty(X)&&(O+=g.hyphenate(X)+":"+this.style[X]+";");return O&&(R+=' style="'+g.escape(O)+'"'),R+="'/>",R},oe}(),Rt={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"},dt=function(){function oe(D,R,O,X,se,Te,$e,nt){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=D,this.height=R||0,this.depth=O||0,this.italic=X||0,this.skew=se||0,this.width=Te||0,this.classes=$e||[],this.style=nt||{},this.maxFontSize=0;var bt=ee(this.text.charCodeAt(0));bt&&this.classes.push(bt+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=Rt[this.text])}var M=oe.prototype;return M.hasClass=function(R){return g.contains(this.classes,R)},M.toNode=function(){var R=document.createTextNode(this.text),O=null;this.italic>0&&(O=document.createElement("span"),O.style.marginRight=G(this.italic)),this.classes.length>0&&(O=O||document.createElement("span"),O.className=_e(this.classes));for(var X in this.style)this.style.hasOwnProperty(X)&&(O=O||document.createElement("span"),O.style[X]=this.style[X]);return O?(O.appendChild(R),O):R},M.toMarkup=function(){var R=!1,O="<span";this.classes.length&&(R=!0,O+=' class="',O+=g.escape(_e(this.classes)),O+='"');var X="";this.italic>0&&(X+="margin-right:"+this.italic+"em;");for(var se in this.style)this.style.hasOwnProperty(se)&&(X+=g.hyphenate(se)+":"+this.style[se]+";");X&&(R=!0,O+=' style="'+g.escape(X)+'"');var Te=g.escape(this.text);return R?(O+=">",O+=Te,O+="</span>",O):Te},oe}(),Mt=function(){function oe(D,R){this.children=void 0,this.attributes=void 0,this.children=D||[],this.attributes=R||{}}var M=oe.prototype;return M.toNode=function(){var R="http://www.w3.org/2000/svg",O=document.createElementNS(R,"svg");for(var X in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,X)&&O.setAttribute(X,this.attributes[X]);for(var se=0;se<this.children.length;se++)O.appendChild(this.children[se].toNode());return O},M.toMarkup=function(){var R='<svg xmlns="http://www.w3.org/2000/svg"';for(var O in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,O)&&(R+=" "+O+"='"+this.attributes[O]+"'");R+=">";for(var X=0;X<this.children.length;X++)R+=this.children[X].toMarkup();return R+="</svg>",R},oe}(),Wt=function(){function oe(D,R){this.pathName=void 0,this.alternate=void 0,this.pathName=D,this.alternate=R}var M=oe.prototype;return M.toNode=function(){var R="http://www.w3.org/2000/svg",O=document.createElementNS(R,"path");return this.alternate?O.setAttribute("d",this.alternate):O.setAttribute("d",le[this.pathName]),O},M.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+le[this.pathName]+"'/>"},oe}(),zt=function(){function oe(D){this.attributes=void 0,this.attributes=D||{}}var M=oe.prototype;return M.toNode=function(){var R="http://www.w3.org/2000/svg",O=document.createElementNS(R,"line");for(var X in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,X)&&O.setAttribute(X,this.attributes[X]);return O},M.toMarkup=function(){var R="<line";for(var O in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,O)&&(R+=" "+O+"='"+this.attributes[O]+"'");return R+="/>",R},oe}();function Sn(oe){if(oe instanceof dt)return oe;throw new Error("Expected symbolNode but got "+String(oe)+".")}function On(oe){if(oe instanceof Ie)return oe;throw new Error("Expected span<HtmlDomNode> but got "+String(oe)+".")}var Er={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Qn={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Xr={math:{},text:{}},Yn=Xr;function Q(oe,M,D,R,O,X){Xr[oe][O]={font:M,group:D,replace:R},X&&R&&(Xr[oe][R]=Xr[oe][O])}var ue="math",Zt="text",Ee="main",ce="ams",Et="accent-token",Ct="bin",Ht="close",ct="inner",Ot="mathord",rn="op-token",gn="open",Zn="punct",rt="rel",fr="spacing",mt="textord";Q(ue,Ee,rt,"≡","\\equiv",!0),Q(ue,Ee,rt,"≺","\\prec",!0),Q(ue,Ee,rt,"≻","\\succ",!0),Q(ue,Ee,rt,"∼","\\sim",!0),Q(ue,Ee,rt,"⊥","\\perp"),Q(ue,Ee,rt,"⪯","\\preceq",!0),Q(ue,Ee,rt,"⪰","\\succeq",!0),Q(ue,Ee,rt,"≃","\\simeq",!0),Q(ue,Ee,rt,"∣","\\mid",!0),Q(ue,Ee,rt,"≪","\\ll",!0),Q(ue,Ee,rt,"≫","\\gg",!0),Q(ue,Ee,rt,"≍","\\asymp",!0),Q(ue,Ee,rt,"∥","\\parallel"),Q(ue,Ee,rt,"⋈","\\bowtie",!0),Q(ue,Ee,rt,"⌣","\\smile",!0),Q(ue,Ee,rt,"⊑","\\sqsubseteq",!0),Q(ue,Ee,rt,"⊒","\\sqsupseteq",!0),Q(ue,Ee,rt,"≐","\\doteq",!0),Q(ue,Ee,rt,"⌢","\\frown",!0),Q(ue,Ee,rt,"∋","\\ni",!0),Q(ue,Ee,rt,"∝","\\propto",!0),Q(ue,Ee,rt,"⊢","\\vdash",!0),Q(ue,Ee,rt,"⊣","\\dashv",!0),Q(ue,Ee,rt,"∋","\\owns"),Q(ue,Ee,Zn,".","\\ldotp"),Q(ue,Ee,Zn,"⋅","\\cdotp"),Q(ue,Ee,mt,"#","\\#"),Q(Zt,Ee,mt,"#","\\#"),Q(ue,Ee,mt,"&","\\&"),Q(Zt,Ee,mt,"&","\\&"),Q(ue,Ee,mt,"ℵ","\\aleph",!0),Q(ue,Ee,mt,"∀","\\forall",!0),Q(ue,Ee,mt,"ℏ","\\hbar",!0),Q(ue,Ee,mt,"∃","\\exists",!0),Q(ue,Ee,mt,"∇","\\nabla",!0),Q(ue,Ee,mt,"♭","\\flat",!0),Q(ue,Ee,mt,"ℓ","\\ell",!0),Q(ue,Ee,mt,"♮","\\natural",!0),Q(ue,Ee,mt,"♣","\\clubsuit",!0),Q(ue,Ee,mt,"℘","\\wp",!0),Q(ue,Ee,mt,"♯","\\sharp",!0),Q(ue,Ee,mt,"♢","\\diamondsuit",!0),Q(ue,Ee,mt,"ℜ","\\Re",!0),Q(ue,Ee,mt,"♡","\\heartsuit",!0),Q(ue,Ee,mt,"ℑ","\\Im",!0),Q(ue,Ee,mt,"♠","\\spadesuit",!0),Q(ue,Ee,mt,"§","\\S",!0),Q(Zt,Ee,mt,"§","\\S"),Q(ue,Ee,mt,"¶","\\P",!0),Q(Zt,Ee,mt,"¶","\\P"),Q(ue,Ee,mt,"†","\\dag"),Q(Zt,Ee,mt,"†","\\dag"),Q(Zt,Ee,mt,"†","\\textdagger"),Q(ue,Ee,mt,"‡","\\ddag"),Q(Zt,Ee,mt,"‡","\\ddag"),Q(Zt,Ee,mt,"‡","\\textdaggerdbl"),Q(ue,Ee,Ht,"⎱","\\rmoustache",!0),Q(ue,Ee,gn,"⎰","\\lmoustache",!0),Q(ue,Ee,Ht,"⟯","\\rgroup",!0),Q(ue,Ee,gn,"⟮","\\lgroup",!0),Q(ue,Ee,Ct,"∓","\\mp",!0),Q(ue,Ee,Ct,"⊖","\\ominus",!0),Q(ue,Ee,Ct,"⊎","\\uplus",!0),Q(ue,Ee,Ct,"⊓","\\sqcap",!0),Q(ue,Ee,Ct,"∗","\\ast"),Q(ue,Ee,Ct,"⊔","\\sqcup",!0),Q(ue,Ee,Ct,"◯","\\bigcirc",!0),Q(ue,Ee,Ct,"∙","\\bullet"),Q(ue,Ee,Ct,"‡","\\ddagger"),Q(ue,Ee,Ct,"≀","\\wr",!0),Q(ue,Ee,Ct,"⨿","\\amalg"),Q(ue,Ee,Ct,"&","\\And"),Q(ue,Ee,rt,"⟵","\\longleftarrow",!0),Q(ue,Ee,rt,"⇐","\\Leftarrow",!0),Q(ue,Ee,rt,"⟸","\\Longleftarrow",!0),Q(ue,Ee,rt,"⟶","\\longrightarrow",!0),Q(ue,Ee,rt,"⇒","\\Rightarrow",!0),Q(ue,Ee,rt,"⟹","\\Longrightarrow",!0),Q(ue,Ee,rt,"↔","\\leftrightarrow",!0),Q(ue,Ee,rt,"⟷","\\longleftrightarrow",!0),Q(ue,Ee,rt,"⇔","\\Leftrightarrow",!0),Q(ue,Ee,rt,"⟺","\\Longleftrightarrow",!0),Q(ue,Ee,rt,"↦","\\mapsto",!0),Q(ue,Ee,rt,"⟼","\\longmapsto",!0),Q(ue,Ee,rt,"↗","\\nearrow",!0),Q(ue,Ee,rt,"↩","\\hookleftarrow",!0),Q(ue,Ee,rt,"↪","\\hookrightarrow",!0),Q(ue,Ee,rt,"↘","\\searrow",!0),Q(ue,Ee,rt,"↼","\\leftharpoonup",!0),Q(ue,Ee,rt,"⇀","\\rightharpoonup",!0),Q(ue,Ee,rt,"↙","\\swarrow",!0),Q(ue,Ee,rt,"↽","\\leftharpoondown",!0),Q(ue,Ee,rt,"⇁","\\rightharpoondown",!0),Q(ue,Ee,rt,"↖","\\nwarrow",!0),Q(ue,Ee,rt,"⇌","\\rightleftharpoons",!0),Q(ue,ce,rt,"≮","\\nless",!0),Q(ue,ce,rt,"","\\@nleqslant"),Q(ue,ce,rt,"","\\@nleqq"),Q(ue,ce,rt,"⪇","\\lneq",!0),Q(ue,ce,rt,"≨","\\lneqq",!0),Q(ue,ce,rt,"","\\@lvertneqq"),Q(ue,ce,rt,"⋦","\\lnsim",!0),Q(ue,ce,rt,"⪉","\\lnapprox",!0),Q(ue,ce,rt,"⊀","\\nprec",!0),Q(ue,ce,rt,"⋠","\\npreceq",!0),Q(ue,ce,rt,"⋨","\\precnsim",!0),Q(ue,ce,rt,"⪹","\\precnapprox",!0),Q(ue,ce,rt,"≁","\\nsim",!0),Q(ue,ce,rt,"","\\@nshortmid"),Q(ue,ce,rt,"∤","\\nmid",!0),Q(ue,ce,rt,"⊬","\\nvdash",!0),Q(ue,ce,rt,"⊭","\\nvDash",!0),Q(ue,ce,rt,"⋪","\\ntriangleleft"),Q(ue,ce,rt,"⋬","\\ntrianglelefteq",!0),Q(ue,ce,rt,"⊊","\\subsetneq",!0),Q(ue,ce,rt,"","\\@varsubsetneq"),Q(ue,ce,rt,"⫋","\\subsetneqq",!0),Q(ue,ce,rt,"","\\@varsubsetneqq"),Q(ue,ce,rt,"≯","\\ngtr",!0),Q(ue,ce,rt,"","\\@ngeqslant"),Q(ue,ce,rt,"","\\@ngeqq"),Q(ue,ce,rt,"⪈","\\gneq",!0),Q(ue,ce,rt,"≩","\\gneqq",!0),Q(ue,ce,rt,"","\\@gvertneqq"),Q(ue,ce,rt,"⋧","\\gnsim",!0),Q(ue,ce,rt,"⪊","\\gnapprox",!0),Q(ue,ce,rt,"⊁","\\nsucc",!0),Q(ue,ce,rt,"⋡","\\nsucceq",!0),Q(ue,ce,rt,"⋩","\\succnsim",!0),Q(ue,ce,rt,"⪺","\\succnapprox",!0),Q(ue,ce,rt,"≆","\\ncong",!0),Q(ue,ce,rt,"","\\@nshortparallel"),Q(ue,ce,rt,"∦","\\nparallel",!0),Q(ue,ce,rt,"⊯","\\nVDash",!0),Q(ue,ce,rt,"⋫","\\ntriangleright"),Q(ue,ce,rt,"⋭","\\ntrianglerighteq",!0),Q(ue,ce,rt,"","\\@nsupseteqq"),Q(ue,ce,rt,"⊋","\\supsetneq",!0),Q(ue,ce,rt,"","\\@varsupsetneq"),Q(ue,ce,rt,"⫌","\\supsetneqq",!0),Q(ue,ce,rt,"","\\@varsupsetneqq"),Q(ue,ce,rt,"⊮","\\nVdash",!0),Q(ue,ce,rt,"⪵","\\precneqq",!0),Q(ue,ce,rt,"⪶","\\succneqq",!0),Q(ue,ce,rt,"","\\@nsubseteqq"),Q(ue,ce,Ct,"⊴","\\unlhd"),Q(ue,ce,Ct,"⊵","\\unrhd"),Q(ue,ce,rt,"↚","\\nleftarrow",!0),Q(ue,ce,rt,"↛","\\nrightarrow",!0),Q(ue,ce,rt,"⇍","\\nLeftarrow",!0),Q(ue,ce,rt,"⇏","\\nRightarrow",!0),Q(ue,ce,rt,"↮","\\nleftrightarrow",!0),Q(ue,ce,rt,"⇎","\\nLeftrightarrow",!0),Q(ue,ce,rt,"△","\\vartriangle"),Q(ue,ce,mt,"ℏ","\\hslash"),Q(ue,ce,mt,"▽","\\triangledown"),Q(ue,ce,mt,"◊","\\lozenge"),Q(ue,ce,mt,"Ⓢ","\\circledS"),Q(ue,ce,mt,"®","\\circledR"),Q(Zt,ce,mt,"®","\\circledR"),Q(ue,ce,mt,"∡","\\measuredangle",!0),Q(ue,ce,mt,"∄","\\nexists"),Q(ue,ce,mt,"℧","\\mho"),Q(ue,ce,mt,"Ⅎ","\\Finv",!0),Q(ue,ce,mt,"⅁","\\Game",!0),Q(ue,ce,mt,"‵","\\backprime"),Q(ue,ce,mt,"▲","\\blacktriangle"),Q(ue,ce,mt,"▼","\\blacktriangledown"),Q(ue,ce,mt,"■","\\blacksquare"),Q(ue,ce,mt,"⧫","\\blacklozenge"),Q(ue,ce,mt,"★","\\bigstar"),Q(ue,ce,mt,"∢","\\sphericalangle",!0),Q(ue,ce,mt,"∁","\\complement",!0),Q(ue,ce,mt,"ð","\\eth",!0),Q(Zt,Ee,mt,"ð","ð"),Q(ue,ce,mt,"╱","\\diagup"),Q(ue,ce,mt,"╲","\\diagdown"),Q(ue,ce,mt,"□","\\square"),Q(ue,ce,mt,"□","\\Box"),Q(ue,ce,mt,"◊","\\Diamond"),Q(ue,ce,mt,"¥","\\yen",!0),Q(Zt,ce,mt,"¥","\\yen",!0),Q(ue,ce,mt,"✓","\\checkmark",!0),Q(Zt,ce,mt,"✓","\\checkmark"),Q(ue,ce,mt,"ℶ","\\beth",!0),Q(ue,ce,mt,"ℸ","\\daleth",!0),Q(ue,ce,mt,"ℷ","\\gimel",!0),Q(ue,ce,mt,"ϝ","\\digamma",!0),Q(ue,ce,mt,"ϰ","\\varkappa"),Q(ue,ce,gn,"┌","\\@ulcorner",!0),Q(ue,ce,Ht,"┐","\\@urcorner",!0),Q(ue,ce,gn,"└","\\@llcorner",!0),Q(ue,ce,Ht,"┘","\\@lrcorner",!0),Q(ue,ce,rt,"≦","\\leqq",!0),Q(ue,ce,rt,"⩽","\\leqslant",!0),Q(ue,ce,rt,"⪕","\\eqslantless",!0),Q(ue,ce,rt,"≲","\\lesssim",!0),Q(ue,ce,rt,"⪅","\\lessapprox",!0),Q(ue,ce,rt,"≊","\\approxeq",!0),Q(ue,ce,Ct,"⋖","\\lessdot"),Q(ue,ce,rt,"⋘","\\lll",!0),Q(ue,ce,rt,"≶","\\lessgtr",!0),Q(ue,ce,rt,"⋚","\\lesseqgtr",!0),Q(ue,ce,rt,"⪋","\\lesseqqgtr",!0),Q(ue,ce,rt,"≑","\\doteqdot"),Q(ue,ce,rt,"≓","\\risingdotseq",!0),Q(ue,ce,rt,"≒","\\fallingdotseq",!0),Q(ue,ce,rt,"∽","\\backsim",!0),Q(ue,ce,rt,"⋍","\\backsimeq",!0),Q(ue,ce,rt,"⫅","\\subseteqq",!0),Q(ue,ce,rt,"⋐","\\Subset",!0),Q(ue,ce,rt,"⊏","\\sqsubset",!0),Q(ue,ce,rt,"≼","\\preccurlyeq",!0),Q(ue,ce,rt,"⋞","\\curlyeqprec",!0),Q(ue,ce,rt,"≾","\\precsim",!0),Q(ue,ce,rt,"⪷","\\precapprox",!0),Q(ue,ce,rt,"⊲","\\vartriangleleft"),Q(ue,ce,rt,"⊴","\\trianglelefteq"),Q(ue,ce,rt,"⊨","\\vDash",!0),Q(ue,ce,rt,"⊪","\\Vvdash",!0),Q(ue,ce,rt,"⌣","\\smallsmile"),Q(ue,ce,rt,"⌢","\\smallfrown"),Q(ue,ce,rt,"≏","\\bumpeq",!0),Q(ue,ce,rt,"≎","\\Bumpeq",!0),Q(ue,ce,rt,"≧","\\geqq",!0),Q(ue,ce,rt,"⩾","\\geqslant",!0),Q(ue,ce,rt,"⪖","\\eqslantgtr",!0),Q(ue,ce,rt,"≳","\\gtrsim",!0),Q(ue,ce,rt,"⪆","\\gtrapprox",!0),Q(ue,ce,Ct,"⋗","\\gtrdot"),Q(ue,ce,rt,"⋙","\\ggg",!0),Q(ue,ce,rt,"≷","\\gtrless",!0),Q(ue,ce,rt,"⋛","\\gtreqless",!0),Q(ue,ce,rt,"⪌","\\gtreqqless",!0),Q(ue,ce,rt,"≖","\\eqcirc",!0),Q(ue,ce,rt,"≗","\\circeq",!0),Q(ue,ce,rt,"≜","\\triangleq",!0),Q(ue,ce,rt,"∼","\\thicksim"),Q(ue,ce,rt,"≈","\\thickapprox"),Q(ue,ce,rt,"⫆","\\supseteqq",!0),Q(ue,ce,rt,"⋑","\\Supset",!0),Q(ue,ce,rt,"⊐","\\sqsupset",!0),Q(ue,ce,rt,"≽","\\succcurlyeq",!0),Q(ue,ce,rt,"⋟","\\curlyeqsucc",!0),Q(ue,ce,rt,"≿","\\succsim",!0),Q(ue,ce,rt,"⪸","\\succapprox",!0),Q(ue,ce,rt,"⊳","\\vartriangleright"),Q(ue,ce,rt,"⊵","\\trianglerighteq"),Q(ue,ce,rt,"⊩","\\Vdash",!0),Q(ue,ce,rt,"∣","\\shortmid"),Q(ue,ce,rt,"∥","\\shortparallel"),Q(ue,ce,rt,"≬","\\between",!0),Q(ue,ce,rt,"⋔","\\pitchfork",!0),Q(ue,ce,rt,"∝","\\varpropto"),Q(ue,ce,rt,"◀","\\blacktriangleleft"),Q(ue,ce,rt,"∴","\\therefore",!0),Q(ue,ce,rt,"∍","\\backepsilon"),Q(ue,ce,rt,"▶","\\blacktriangleright"),Q(ue,ce,rt,"∵","\\because",!0),Q(ue,ce,rt,"⋘","\\llless"),Q(ue,ce,rt,"⋙","\\gggtr"),Q(ue,ce,Ct,"⊲","\\lhd"),Q(ue,ce,Ct,"⊳","\\rhd"),Q(ue,ce,rt,"≂","\\eqsim",!0),Q(ue,Ee,rt,"⋈","\\Join"),Q(ue,ce,rt,"≑","\\Doteq",!0),Q(ue,ce,Ct,"∔","\\dotplus",!0),Q(ue,ce,Ct,"∖","\\smallsetminus"),Q(ue,ce,Ct,"⋒","\\Cap",!0),Q(ue,ce,Ct,"⋓","\\Cup",!0),Q(ue,ce,Ct,"⩞","\\doublebarwedge",!0),Q(ue,ce,Ct,"⊟","\\boxminus",!0),Q(ue,ce,Ct,"⊞","\\boxplus",!0),Q(ue,ce,Ct,"⋇","\\divideontimes",!0),Q(ue,ce,Ct,"⋉","\\ltimes",!0),Q(ue,ce,Ct,"⋊","\\rtimes",!0),Q(ue,ce,Ct,"⋋","\\leftthreetimes",!0),Q(ue,ce,Ct,"⋌","\\rightthreetimes",!0),Q(ue,ce,Ct,"⋏","\\curlywedge",!0),Q(ue,ce,Ct,"⋎","\\curlyvee",!0),Q(ue,ce,Ct,"⊝","\\circleddash",!0),Q(ue,ce,Ct,"⊛","\\circledast",!0),Q(ue,ce,Ct,"⋅","\\centerdot"),Q(ue,ce,Ct,"⊺","\\intercal",!0),Q(ue,ce,Ct,"⋒","\\doublecap"),Q(ue,ce,Ct,"⋓","\\doublecup"),Q(ue,ce,Ct,"⊠","\\boxtimes",!0),Q(ue,ce,rt,"⇢","\\dashrightarrow",!0),Q(ue,ce,rt,"⇠","\\dashleftarrow",!0),Q(ue,ce,rt,"⇇","\\leftleftarrows",!0),Q(ue,ce,rt,"⇆","\\leftrightarrows",!0),Q(ue,ce,rt,"⇚","\\Lleftarrow",!0),Q(ue,ce,rt,"↞","\\twoheadleftarrow",!0),Q(ue,ce,rt,"↢","\\leftarrowtail",!0),Q(ue,ce,rt,"↫","\\looparrowleft",!0),Q(ue,ce,rt,"⇋","\\leftrightharpoons",!0),Q(ue,ce,rt,"↶","\\curvearrowleft",!0),Q(ue,ce,rt,"↺","\\circlearrowleft",!0),Q(ue,ce,rt,"↰","\\Lsh",!0),Q(ue,ce,rt,"⇈","\\upuparrows",!0),Q(ue,ce,rt,"↿","\\upharpoonleft",!0),Q(ue,ce,rt,"⇃","\\downharpoonleft",!0),Q(ue,Ee,rt,"⊶","\\origof",!0),Q(ue,Ee,rt,"⊷","\\imageof",!0),Q(ue,ce,rt,"⊸","\\multimap",!0),Q(ue,ce,rt,"↭","\\leftrightsquigarrow",!0),Q(ue,ce,rt,"⇉","\\rightrightarrows",!0),Q(ue,ce,rt,"⇄","\\rightleftarrows",!0),Q(ue,ce,rt,"↠","\\twoheadrightarrow",!0),Q(ue,ce,rt,"↣","\\rightarrowtail",!0),Q(ue,ce,rt,"↬","\\looparrowright",!0),Q(ue,ce,rt,"↷","\\curvearrowright",!0),Q(ue,ce,rt,"↻","\\circlearrowright",!0),Q(ue,ce,rt,"↱","\\Rsh",!0),Q(ue,ce,rt,"⇊","\\downdownarrows",!0),Q(ue,ce,rt,"↾","\\upharpoonright",!0),Q(ue,ce,rt,"⇂","\\downharpoonright",!0),Q(ue,ce,rt,"⇝","\\rightsquigarrow",!0),Q(ue,ce,rt,"⇝","\\leadsto"),Q(ue,ce,rt,"⇛","\\Rrightarrow",!0),Q(ue,ce,rt,"↾","\\restriction"),Q(ue,Ee,mt,"‘","`"),Q(ue,Ee,mt,"$","\\$"),Q(Zt,Ee,mt,"$","\\$"),Q(Zt,Ee,mt,"$","\\textdollar"),Q(ue,Ee,mt,"%","\\%"),Q(Zt,Ee,mt,"%","\\%"),Q(ue,Ee,mt,"_","\\_"),Q(Zt,Ee,mt,"_","\\_"),Q(Zt,Ee,mt,"_","\\textunderscore"),Q(ue,Ee,mt,"∠","\\angle",!0),Q(ue,Ee,mt,"∞","\\infty",!0),Q(ue,Ee,mt,"′","\\prime"),Q(ue,Ee,mt,"△","\\triangle"),Q(ue,Ee,mt,"Γ","\\Gamma",!0),Q(ue,Ee,mt,"Δ","\\Delta",!0),Q(ue,Ee,mt,"Θ","\\Theta",!0),Q(ue,Ee,mt,"Λ","\\Lambda",!0),Q(ue,Ee,mt,"Ξ","\\Xi",!0),Q(ue,Ee,mt,"Π","\\Pi",!0),Q(ue,Ee,mt,"Σ","\\Sigma",!0),Q(ue,Ee,mt,"Υ","\\Upsilon",!0),Q(ue,Ee,mt,"Φ","\\Phi",!0),Q(ue,Ee,mt,"Ψ","\\Psi",!0),Q(ue,Ee,mt,"Ω","\\Omega",!0),Q(ue,Ee,mt,"A","Α"),Q(ue,Ee,mt,"B","Β"),Q(ue,Ee,mt,"E","Ε"),Q(ue,Ee,mt,"Z","Ζ"),Q(ue,Ee,mt,"H","Η"),Q(ue,Ee,mt,"I","Ι"),Q(ue,Ee,mt,"K","Κ"),Q(ue,Ee,mt,"M","Μ"),Q(ue,Ee,mt,"N","Ν"),Q(ue,Ee,mt,"O","Ο"),Q(ue,Ee,mt,"P","Ρ"),Q(ue,Ee,mt,"T","Τ"),Q(ue,Ee,mt,"X","Χ"),Q(ue,Ee,mt,"¬","\\neg",!0),Q(ue,Ee,mt,"¬","\\lnot"),Q(ue,Ee,mt,"⊤","\\top"),Q(ue,Ee,mt,"⊥","\\bot"),Q(ue,Ee,mt,"∅","\\emptyset"),Q(ue,ce,mt,"∅","\\varnothing"),Q(ue,Ee,Ot,"α","\\alpha",!0),Q(ue,Ee,Ot,"β","\\beta",!0),Q(ue,Ee,Ot,"γ","\\gamma",!0),Q(ue,Ee,Ot,"δ","\\delta",!0),Q(ue,Ee,Ot,"ϵ","\\epsilon",!0),Q(ue,Ee,Ot,"ζ","\\zeta",!0),Q(ue,Ee,Ot,"η","\\eta",!0),Q(ue,Ee,Ot,"θ","\\theta",!0),Q(ue,Ee,Ot,"ι","\\iota",!0),Q(ue,Ee,Ot,"κ","\\kappa",!0),Q(ue,Ee,Ot,"λ","\\lambda",!0),Q(ue,Ee,Ot,"μ","\\mu",!0),Q(ue,Ee,Ot,"ν","\\nu",!0),Q(ue,Ee,Ot,"ξ","\\xi",!0),Q(ue,Ee,Ot,"ο","\\omicron",!0),Q(ue,Ee,Ot,"π","\\pi",!0),Q(ue,Ee,Ot,"ρ","\\rho",!0),Q(ue,Ee,Ot,"σ","\\sigma",!0),Q(ue,Ee,Ot,"τ","\\tau",!0),Q(ue,Ee,Ot,"υ","\\upsilon",!0),Q(ue,Ee,Ot,"ϕ","\\phi",!0),Q(ue,Ee,Ot,"χ","\\chi",!0),Q(ue,Ee,Ot,"ψ","\\psi",!0),Q(ue,Ee,Ot,"ω","\\omega",!0),Q(ue,Ee,Ot,"ε","\\varepsilon",!0),Q(ue,Ee,Ot,"ϑ","\\vartheta",!0),Q(ue,Ee,Ot,"ϖ","\\varpi",!0),Q(ue,Ee,Ot,"ϱ","\\varrho",!0),Q(ue,Ee,Ot,"ς","\\varsigma",!0),Q(ue,Ee,Ot,"φ","\\varphi",!0),Q(ue,Ee,Ct,"∗","*",!0),Q(ue,Ee,Ct,"+","+"),Q(ue,Ee,Ct,"−","-",!0),Q(ue,Ee,Ct,"⋅","\\cdot",!0),Q(ue,Ee,Ct,"∘","\\circ"),Q(ue,Ee,Ct,"÷","\\div",!0),Q(ue,Ee,Ct,"±","\\pm",!0),Q(ue,Ee,Ct,"×","\\times",!0),Q(ue,Ee,Ct,"∩","\\cap",!0),Q(ue,Ee,Ct,"∪","\\cup",!0),Q(ue,Ee,Ct,"∖","\\setminus"),Q(ue,Ee,Ct,"∧","\\land"),Q(ue,Ee,Ct,"∨","\\lor"),Q(ue,Ee,Ct,"∧","\\wedge",!0),Q(ue,Ee,Ct,"∨","\\vee",!0),Q(ue,Ee,mt,"√","\\surd"),Q(ue,Ee,gn,"⟨","\\langle",!0),Q(ue,Ee,gn,"∣","\\lvert"),Q(ue,Ee,gn,"∥","\\lVert"),Q(ue,Ee,Ht,"?","?"),Q(ue,Ee,Ht,"!","!"),Q(ue,Ee,Ht,"⟩","\\rangle",!0),Q(ue,Ee,Ht,"∣","\\rvert"),Q(ue,Ee,Ht,"∥","\\rVert"),Q(ue,Ee,rt,"=","="),Q(ue,Ee,rt,":",":"),Q(ue,Ee,rt,"≈","\\approx",!0),Q(ue,Ee,rt,"≅","\\cong",!0),Q(ue,Ee,rt,"≥","\\ge"),Q(ue,Ee,rt,"≥","\\geq",!0),Q(ue,Ee,rt,"←","\\gets"),Q(ue,Ee,rt,">","\\gt",!0),Q(ue,Ee,rt,"∈","\\in",!0),Q(ue,Ee,rt,"","\\@not"),Q(ue,Ee,rt,"⊂","\\subset",!0),Q(ue,Ee,rt,"⊃","\\supset",!0),Q(ue,Ee,rt,"⊆","\\subseteq",!0),Q(ue,Ee,rt,"⊇","\\supseteq",!0),Q(ue,ce,rt,"⊈","\\nsubseteq",!0),Q(ue,ce,rt,"⊉","\\nsupseteq",!0),Q(ue,Ee,rt,"⊨","\\models"),Q(ue,Ee,rt,"←","\\leftarrow",!0),Q(ue,Ee,rt,"≤","\\le"),Q(ue,Ee,rt,"≤","\\leq",!0),Q(ue,Ee,rt,"<","\\lt",!0),Q(ue,Ee,rt,"→","\\rightarrow",!0),Q(ue,Ee,rt,"→","\\to"),Q(ue,ce,rt,"≱","\\ngeq",!0),Q(ue,ce,rt,"≰","\\nleq",!0),Q(ue,Ee,fr," ","\\ "),Q(ue,Ee,fr," ","\\space"),Q(ue,Ee,fr," ","\\nobreakspace"),Q(Zt,Ee,fr," ","\\ "),Q(Zt,Ee,fr," "," "),Q(Zt,Ee,fr," ","\\space"),Q(Zt,Ee,fr," ","\\nobreakspace"),Q(ue,Ee,fr,null,"\\nobreak"),Q(ue,Ee,fr,null,"\\allowbreak"),Q(ue,Ee,Zn,",",","),Q(ue,Ee,Zn,";",";"),Q(ue,ce,Ct,"⊼","\\barwedge",!0),Q(ue,ce,Ct,"⊻","\\veebar",!0),Q(ue,Ee,Ct,"⊙","\\odot",!0),Q(ue,Ee,Ct,"⊕","\\oplus",!0),Q(ue,Ee,Ct,"⊗","\\otimes",!0),Q(ue,Ee,mt,"∂","\\partial",!0),Q(ue,Ee,Ct,"⊘","\\oslash",!0),Q(ue,ce,Ct,"⊚","\\circledcirc",!0),Q(ue,ce,Ct,"⊡","\\boxdot",!0),Q(ue,Ee,Ct,"△","\\bigtriangleup"),Q(ue,Ee,Ct,"▽","\\bigtriangledown"),Q(ue,Ee,Ct,"†","\\dagger"),Q(ue,Ee,Ct,"⋄","\\diamond"),Q(ue,Ee,Ct,"⋆","\\star"),Q(ue,Ee,Ct,"◃","\\triangleleft"),Q(ue,Ee,Ct,"▹","\\triangleright"),Q(ue,Ee,gn,"{","\\{"),Q(Zt,Ee,mt,"{","\\{"),Q(Zt,Ee,mt,"{","\\textbraceleft"),Q(ue,Ee,Ht,"}","\\}"),Q(Zt,Ee,mt,"}","\\}"),Q(Zt,Ee,mt,"}","\\textbraceright"),Q(ue,Ee,gn,"{","\\lbrace"),Q(ue,Ee,Ht,"}","\\rbrace"),Q(ue,Ee,gn,"[","\\lbrack",!0),Q(Zt,Ee,mt,"[","\\lbrack",!0),Q(ue,Ee,Ht,"]","\\rbrack",!0),Q(Zt,Ee,mt,"]","\\rbrack",!0),Q(ue,Ee,gn,"(","\\lparen",!0),Q(ue,Ee,Ht,")","\\rparen",!0),Q(Zt,Ee,mt,"<","\\textless",!0),Q(Zt,Ee,mt,">","\\textgreater",!0),Q(ue,Ee,gn,"⌊","\\lfloor",!0),Q(ue,Ee,Ht,"⌋","\\rfloor",!0),Q(ue,Ee,gn,"⌈","\\lceil",!0),Q(ue,Ee,Ht,"⌉","\\rceil",!0),Q(ue,Ee,mt,"\\","\\backslash"),Q(ue,Ee,mt,"∣","|"),Q(ue,Ee,mt,"∣","\\vert"),Q(Zt,Ee,mt,"|","\\textbar",!0),Q(ue,Ee,mt,"∥","\\|"),Q(ue,Ee,mt,"∥","\\Vert"),Q(Zt,Ee,mt,"∥","\\textbardbl"),Q(Zt,Ee,mt,"~","\\textasciitilde"),Q(Zt,Ee,mt,"\\","\\textbackslash"),Q(Zt,Ee,mt,"^","\\textasciicircum"),Q(ue,Ee,rt,"↑","\\uparrow",!0),Q(ue,Ee,rt,"⇑","\\Uparrow",!0),Q(ue,Ee,rt,"↓","\\downarrow",!0),Q(ue,Ee,rt,"⇓","\\Downarrow",!0),Q(ue,Ee,rt,"↕","\\updownarrow",!0),Q(ue,Ee,rt,"⇕","\\Updownarrow",!0),Q(ue,Ee,rn,"∐","\\coprod"),Q(ue,Ee,rn,"⋁","\\bigvee"),Q(ue,Ee,rn,"⋀","\\bigwedge"),Q(ue,Ee,rn,"⨄","\\biguplus"),Q(ue,Ee,rn,"⋂","\\bigcap"),Q(ue,Ee,rn,"⋃","\\bigcup"),Q(ue,Ee,rn,"∫","\\int"),Q(ue,Ee,rn,"∫","\\intop"),Q(ue,Ee,rn,"∬","\\iint"),Q(ue,Ee,rn,"∭","\\iiint"),Q(ue,Ee,rn,"∏","\\prod"),Q(ue,Ee,rn,"∑","\\sum"),Q(ue,Ee,rn,"⨂","\\bigotimes"),Q(ue,Ee,rn,"⨁","\\bigoplus"),Q(ue,Ee,rn,"⨀","\\bigodot"),Q(ue,Ee,rn,"∮","\\oint"),Q(ue,Ee,rn,"∯","\\oiint"),Q(ue,Ee,rn,"∰","\\oiiint"),Q(ue,Ee,rn,"⨆","\\bigsqcup"),Q(ue,Ee,rn,"∫","\\smallint"),Q(Zt,Ee,ct,"…","\\textellipsis"),Q(ue,Ee,ct,"…","\\mathellipsis"),Q(Zt,Ee,ct,"…","\\ldots",!0),Q(ue,Ee,ct,"…","\\ldots",!0),Q(ue,Ee,ct,"⋯","\\@cdots",!0),Q(ue,Ee,ct,"⋱","\\ddots",!0),Q(ue,Ee,mt,"⋮","\\varvdots"),Q(ue,Ee,Et,"ˊ","\\acute"),Q(ue,Ee,Et,"ˋ","\\grave"),Q(ue,Ee,Et,"¨","\\ddot"),Q(ue,Ee,Et,"~","\\tilde"),Q(ue,Ee,Et,"ˉ","\\bar"),Q(ue,Ee,Et,"˘","\\breve"),Q(ue,Ee,Et,"ˇ","\\check"),Q(ue,Ee,Et,"^","\\hat"),Q(ue,Ee,Et,"⃗","\\vec"),Q(ue,Ee,Et,"˙","\\dot"),Q(ue,Ee,Et,"˚","\\mathring"),Q(ue,Ee,Ot,"","\\@imath"),Q(ue,Ee,Ot,"","\\@jmath"),Q(ue,Ee,mt,"ı","ı"),Q(ue,Ee,mt,"ȷ","ȷ"),Q(Zt,Ee,mt,"ı","\\i",!0),Q(Zt,Ee,mt,"ȷ","\\j",!0),Q(Zt,Ee,mt,"ß","\\ss",!0),Q(Zt,Ee,mt,"æ","\\ae",!0),Q(Zt,Ee,mt,"œ","\\oe",!0),Q(Zt,Ee,mt,"ø","\\o",!0),Q(Zt,Ee,mt,"Æ","\\AE",!0),Q(Zt,Ee,mt,"Œ","\\OE",!0),Q(Zt,Ee,mt,"Ø","\\O",!0),Q(Zt,Ee,Et,"ˊ","\\'"),Q(Zt,Ee,Et,"ˋ","\\`"),Q(Zt,Ee,Et,"ˆ","\\^"),Q(Zt,Ee,Et,"˜","\\~"),Q(Zt,Ee,Et,"ˉ","\\="),Q(Zt,Ee,Et,"˘","\\u"),Q(Zt,Ee,Et,"˙","\\."),Q(Zt,Ee,Et,"¸","\\c"),Q(Zt,Ee,Et,"˚","\\r"),Q(Zt,Ee,Et,"ˇ","\\v"),Q(Zt,Ee,Et,"¨",'\\"'),Q(Zt,Ee,Et,"˝","\\H"),Q(Zt,Ee,Et,"◯","\\textcircled");var Fe={"--":!0,"---":!0,"``":!0,"''":!0};Q(Zt,Ee,mt,"–","--",!0),Q(Zt,Ee,mt,"–","\\textendash"),Q(Zt,Ee,mt,"—","---",!0),Q(Zt,Ee,mt,"—","\\textemdash"),Q(Zt,Ee,mt,"‘","`",!0),Q(Zt,Ee,mt,"‘","\\textquoteleft"),Q(Zt,Ee,mt,"’","'",!0),Q(Zt,Ee,mt,"’","\\textquoteright"),Q(Zt,Ee,mt,"“","``",!0),Q(Zt,Ee,mt,"“","\\textquotedblleft"),Q(Zt,Ee,mt,"”","''",!0),Q(Zt,Ee,mt,"”","\\textquotedblright"),Q(ue,Ee,mt,"°","\\degree",!0),Q(Zt,Ee,mt,"°","\\degree"),Q(Zt,Ee,mt,"°","\\textdegree",!0),Q(ue,Ee,mt,"£","\\pounds"),Q(ue,Ee,mt,"£","\\mathsterling",!0),Q(Zt,Ee,mt,"£","\\pounds"),Q(Zt,Ee,mt,"£","\\textsterling",!0),Q(ue,ce,mt,"✠","\\maltese"),Q(Zt,ce,mt,"✠","\\maltese");for(var Dt='0123456789/@."',Qe=0;Qe<Dt.length;Qe++){var yt=Dt.charAt(Qe);Q(ue,Ee,mt,yt,yt)}for(var ht='0123456789!@*()-=+";:?/.,',Nt=0;Nt<ht.length;Nt++){var yn=ht.charAt(Nt);Q(Zt,Ee,mt,yn,yn)}for(var un="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Dn=0;Dn<un.length;Dn++){var nr=un.charAt(Dn);Q(ue,Ee,Ot,nr,nr),Q(Zt,Ee,mt,nr,nr)}Q(ue,ce,mt,"C","ℂ"),Q(Zt,ce,mt,"C","ℂ"),Q(ue,ce,mt,"H","ℍ"),Q(Zt,ce,mt,"H","ℍ"),Q(ue,ce,mt,"N","ℕ"),Q(Zt,ce,mt,"N","ℕ"),Q(ue,ce,mt,"P","ℙ"),Q(Zt,ce,mt,"P","ℙ"),Q(ue,ce,mt,"Q","ℚ"),Q(Zt,ce,mt,"Q","ℚ"),Q(ue,ce,mt,"R","ℝ"),Q(Zt,ce,mt,"R","ℝ"),Q(ue,ce,mt,"Z","ℤ"),Q(Zt,ce,mt,"Z","ℤ"),Q(ue,Ee,Ot,"h","ℎ"),Q(Zt,Ee,Ot,"h","ℎ");for(var bn="",Hn=0;Hn<un.length;Hn++){var Fn=un.charAt(Hn);bn=String.fromCharCode(55349,56320+Hn),Q(ue,Ee,Ot,Fn,bn),Q(Zt,Ee,mt,Fn,bn),bn=String.fromCharCode(55349,56372+Hn),Q(ue,Ee,Ot,Fn,bn),Q(Zt,Ee,mt,Fn,bn),bn=String.fromCharCode(55349,56424+Hn),Q(ue,Ee,Ot,Fn,bn),Q(Zt,Ee,mt,Fn,bn),bn=String.fromCharCode(55349,56580+Hn),Q(ue,Ee,Ot,Fn,bn),Q(Zt,Ee,mt,Fn,bn),bn=String.fromCharCode(55349,56736+Hn),Q(ue,Ee,Ot,Fn,bn),Q(Zt,Ee,mt,Fn,bn),bn=String.fromCharCode(55349,56788+Hn),Q(ue,Ee,Ot,Fn,bn),Q(Zt,Ee,mt,Fn,bn),bn=String.fromCharCode(55349,56840+Hn),Q(ue,Ee,Ot,Fn,bn),Q(Zt,Ee,mt,Fn,bn),bn=String.fromCharCode(55349,56944+Hn),Q(ue,Ee,Ot,Fn,bn),Q(Zt,Ee,mt,Fn,bn),Hn<26&&(bn=String.fromCharCode(55349,56632+Hn),Q(ue,Ee,Ot,Fn,bn),Q(Zt,Ee,mt,Fn,bn),bn=String.fromCharCode(55349,56476+Hn),Q(ue,Ee,Ot,Fn,bn),Q(Zt,Ee,mt,Fn,bn))}bn=String.fromCharCode(55349,56668),Q(ue,Ee,Ot,"k",bn),Q(Zt,Ee,mt,"k",bn);for(var yr=0;yr<10;yr++){var Yr=yr.toString();bn=String.fromCharCode(55349,57294+yr),Q(ue,Ee,Ot,Yr,bn),Q(Zt,Ee,mt,Yr,bn),bn=String.fromCharCode(55349,57314+yr),Q(ue,Ee,Ot,Yr,bn),Q(Zt,Ee,mt,Yr,bn),bn=String.fromCharCode(55349,57324+yr),Q(ue,Ee,Ot,Yr,bn),Q(Zt,Ee,mt,Yr,bn),bn=String.fromCharCode(55349,57334+yr),Q(ue,Ee,Ot,Yr,bn),Q(Zt,Ee,mt,Yr,bn)}for(var Mr="ÐÞþ",Br=0;Br<Mr.length;Br++){var ar=Mr.charAt(Br);Q(ue,Ee,Ot,ar,ar),Q(Zt,Ee,mt,ar,ar)}var Pi=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],zr=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Ns=function(M,D){var R=M.charCodeAt(0),O=M.charCodeAt(1),X=(R-55296)*1024+(O-56320)+65536,se=D==="math"?0:1;if(119808<=X&&X<120484){var Te=Math.floor((X-119808)/26);return[Pi[Te][2],Pi[Te][se]]}else if(120782<=X&&X<=120831){var $e=Math.floor((X-120782)/10);return[zr[$e][2],zr[$e][se]]}else{if(X===120485||X===120486)return[Pi[0][2],Pi[0][se]];if(120486<X&&X<120782)return["",""];throw new a("Unsupported character: "+M)}},ns=function(M,D,R){return Yn[R][M]&&Yn[R][M].replace&&(M=Yn[R][M].replace),{value:M,metrics:ut(M,D,R)}},Pr=function(M,D,R,O,X){var se=ns(M,D,R),Te=se.metrics;M=se.value;var $e;if(Te){var nt=Te.italic;(R==="text"||O&&O.font==="mathit")&&(nt=0),$e=new dt(M,Te.height,Te.depth,nt,Te.skew,Te.width,X)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+M+"' in style '"+D+"' and mode '"+R+"'")),$e=new dt(M,0,0,0,0,0,X);if(O){$e.maxFontSize=O.sizeMultiplier,O.style.isTight()&&$e.classes.push("mtight");var bt=O.getColor();bt&&($e.style.color=bt)}return $e},nl=function(M,D,R,O){return O===void 0&&(O=[]),R.font==="boldsymbol"&&ns(M,"Main-Bold",D).metrics?Pr(M,"Main-Bold",D,R,O.concat(["mathbf"])):M==="\\"||Yn[D][M].font==="main"?Pr(M,"Main-Regular",D,R,O):Pr(M,"AMS-Regular",D,R,O.concat(["amsrm"]))},Ri=function(M,D,R,O,X){return X!=="textord"&&ns(M,"Math-BoldItalic",D).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},rs=function(M,D,R){var O=M.mode,X=M.text,se=["mord"],Te=O==="math"||O==="text"&&D.font,$e=Te?D.font:D.fontFamily;if(X.charCodeAt(0)===55349){var nt=Ns(X,O),bt=nt[0],Gt=nt[1];return Pr(X,bt,O,D,se.concat(Gt))}else if($e){var nn,dn;if($e==="boldsymbol"){var fn=Ri(X,O,D,se,R);nn=fn.fontName,dn=[fn.fontClass]}else Te?(nn=qt[$e].fontName,dn=[$e]):(nn=qe($e,D.fontWeight,D.fontShape),dn=[$e,D.fontWeight,D.fontShape]);if(ns(X,nn,O).metrics)return Pr(X,nn,O,D,se.concat(dn));if(Fe.hasOwnProperty(X)&&nn.substr(0,10)==="Typewriter"){for(var Pn=[],Nn=0;Nn<X.length;Nn++)Pn.push(Pr(X[Nn],nn,O,D,se.concat(dn)));return Kd(Pn)}}if(R==="mathord")return Pr(X,"Math-Italic",O,D,se.concat(["mathnormal"]));if(R==="textord"){var sr=Yn[O][X]&&Yn[O][X].font;if(sr==="ams"){var mr=qe("amsrm",D.fontWeight,D.fontShape);return Pr(X,mr,O,D,se.concat("amsrm",D.fontWeight,D.fontShape))}else if(sr==="main"||!sr){var wr=qe("textrm",D.fontWeight,D.fontShape);return Pr(X,wr,O,D,se.concat(D.fontWeight,D.fontShape))}else{var Ei=qe(sr,D.fontWeight,D.fontShape);return Pr(X,Ei,O,D,se.concat(Ei,D.fontWeight,D.fontShape))}}else throw new Error("unexpected type: "+R+" in makeOrd")},Ea=function(M,D){if(_e(M.classes)!==_e(D.classes)||M.skew!==D.skew||M.maxFontSize!==D.maxFontSize)return!1;if(M.classes.length===1){var R=M.classes[0];if(R==="mbin"||R==="mord")return!1}for(var O in M.style)if(M.style.hasOwnProperty(O)&&M.style[O]!==D.style[O])return!1;for(var X in D.style)if(D.style.hasOwnProperty(X)&&M.style[X]!==D.style[X])return!1;return!0},Yi=function(M){for(var D=0;D<M.length-1;D++){var R=M[D],O=M[D+1];R instanceof dt&&O instanceof dt&&Ea(R,O)&&(R.text+=O.text,R.height=Math.max(R.height,O.height),R.depth=Math.max(R.depth,O.depth),R.italic=O.italic,M.splice(D+1,1),D--)}return M},Ji=function(M){for(var D=0,R=0,O=0,X=0;X<M.children.length;X++){var se=M.children[X];se.height>D&&(D=se.height),se.depth>R&&(R=se.depth),se.maxFontSize>O&&(O=se.maxFontSize)}M.height=D,M.depth=R,M.maxFontSize=O},aa=function(M,D,R,O){var X=new Ie(M,D,R,O);return Ji(X),X},Eo=function(M,D,R,O){return new Ie(M,D,R,O)},zv=function(M,D,R){var O=aa([M],[],D);return O.height=Math.max(R||D.fontMetrics().defaultRuleThickness,D.minRuleThickness),O.style.borderBottomWidth=G(O.height),O.maxFontSize=1,O},Sr=function(M,D,R,O){var X=new wt(M,D,R,O);return Ji(X),X},Kd=function(M){var D=new Ke(M);return Ji(D),D},Me=function(M,D){return M instanceof Ke?aa([],[M],D):M},Ae=function(M){if(M.positionType==="individualShift"){for(var D=M.children,R=[D[0]],O=-D[0].shift-D[0].elem.depth,X=O,se=1;se<D.length;se++){var Te=-D[se].shift-X-D[se].elem.depth,$e=Te-(D[se-1].elem.height+D[se-1].elem.depth);X=X+Te,R.push({type:"kern",size:$e}),R.push(D[se])}return{children:R,depth:O}}var nt;if(M.positionType==="top"){for(var bt=M.positionData,Gt=0;Gt<M.children.length;Gt++){var nn=M.children[Gt];bt-=nn.type==="kern"?nn.size:nn.elem.height+nn.elem.depth}nt=bt}else if(M.positionType==="bottom")nt=-M.positionData;else{var dn=M.children[0];if(dn.type!=="elem")throw new Error('First child must have type "elem".');if(M.positionType==="shift")nt=-dn.elem.depth-M.positionData;else if(M.positionType==="firstBaseline")nt=-dn.elem.depth;else throw new Error("Invalid positionType "+M.positionType+".")}return{children:M.children,depth:nt}},We=function(M,D){for(var R=Ae(M),O=R.children,X=R.depth,se=0,Te=0;Te<O.length;Te++){var $e=O[Te];if($e.type==="elem"){var nt=$e.elem;se=Math.max(se,nt.maxFontSize,nt.height)}}se+=2;var bt=aa(["pstrut"],[]);bt.style.height=G(se);for(var Gt=[],nn=X,dn=X,fn=X,Pn=0;Pn<O.length;Pn++){var Nn=O[Pn];if(Nn.type==="kern")fn+=Nn.size;else{var sr=Nn.elem,mr=Nn.wrapperClasses||[],wr=Nn.wrapperStyle||{},Ei=aa(mr,[bt,sr],void 0,wr);Ei.style.top=G(-se-fn-sr.depth),Nn.marginLeft&&(Ei.style.marginLeft=Nn.marginLeft),Nn.marginRight&&(Ei.style.marginRight=Nn.marginRight),Gt.push(Ei),fn+=sr.height+sr.depth}nn=Math.min(nn,fn),dn=Math.max(dn,fn)}var Hi=aa(["vlist"],Gt);Hi.style.height=G(dn);var va;if(nn<0){var Ni=aa([],[]),Vi=aa(["vlist"],[Ni]);Vi.style.height=G(-nn);var Na=aa(["vlist-s"],[new dt("​")]);va=[aa(["vlist-r"],[Hi,Na]),aa(["vlist-r"],[Vi])]}else va=[aa(["vlist-r"],[Hi])];var ta=aa(["vlist-t"],va);return va.length===2&&ta.classes.push("vlist-t2"),ta.height=dn,ta.depth=-nn,ta},ze=function(M,D){var R=aa(["mspace"],[],D),O=ot(M,D);return R.style.marginRight=G(O),R},qe=function(M,D,R){var O="";switch(M){case"amsrm":O="AMS";break;case"textrm":O="Main";break;case"textsf":O="SansSerif";break;case"texttt":O="Typewriter";break;default:O=M}var X;return D==="textbf"&&R==="textit"?X="BoldItalic":D==="textbf"?X="Bold":D==="textit"?X="Italic":X="Regular",O+"-"+X},qt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Qt={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},qn=function(M,D){var R=Qt[M],O=R[0],X=R[1],se=R[2],Te=new Wt(O),$e=new Mt([Te],{width:G(X),height:G(se),style:"width:"+G(X),viewBox:"0 0 "+1e3*X+" "+1e3*se,preserveAspectRatio:"xMinYMin"}),nt=Eo(["overlay"],[$e],D);return nt.height=se,nt.style.height=G(se),nt.style.width=G(X),nt},vt={fontMap:qt,makeSymbol:Pr,mathsym:nl,makeSpan:aa,makeSvgSpan:Eo,makeLineSpan:zv,makeAnchor:Sr,makeFragment:Kd,wrapFragment:Me,makeVList:We,makeOrd:rs,makeGlue:ze,staticSvg:qn,svgData:Qt,tryCombineChars:Yi},Cn={number:3,unit:"mu"},rr={number:4,unit:"mu"},pn={number:5,unit:"mu"},vr={mord:{mop:Cn,mbin:rr,mrel:pn,minner:Cn},mop:{mord:Cn,mop:Cn,mrel:pn,minner:Cn},mbin:{mord:rr,mop:rr,mopen:rr,minner:rr},mrel:{mord:pn,mop:pn,mopen:pn,minner:pn},mopen:{},mclose:{mop:Cn,mbin:rr,mrel:pn,minner:Cn},mpunct:{mord:Cn,mop:Cn,mrel:pn,mopen:Cn,mclose:Cn,mpunct:Cn,minner:Cn},minner:{mord:Cn,mop:Cn,mbin:rr,mrel:pn,mopen:Cn,mpunct:Cn,minner:Cn}},Jn={mord:{mop:Cn},mop:{mord:Cn,mop:Cn},mbin:{},mrel:{},mopen:{},mclose:{mop:Cn},mpunct:{},minner:{mop:Cn}},_r={},dr={},Li={};function mn(oe){for(var M=oe.type,D=oe.names,R=oe.props,O=oe.handler,X=oe.htmlBuilder,se=oe.mathmlBuilder,Te={type:M,numArgs:R.numArgs,argTypes:R.argTypes,allowedInArgument:!!R.allowedInArgument,allowedInText:!!R.allowedInText,allowedInMath:R.allowedInMath===void 0?!0:R.allowedInMath,numOptionalArgs:R.numOptionalArgs||0,infix:!!R.infix,primitive:!!R.primitive,handler:O},$e=0;$e<D.length;++$e)_r[D[$e]]=Te;M&&(X&&(dr[M]=X),se&&(Li[M]=se))}function Or(oe){var M=oe.type,D=oe.htmlBuilder,R=oe.mathmlBuilder;mn({type:M,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:D,mathmlBuilder:R})}var qr=function(M){return M.type==="ordgroup"&&M.body.length===1?M.body[0]:M},ii=function(M){return M.type==="ordgroup"?M.body:[M]},ea=vt.makeSpan,nc=["leftmost","mbin","mopen","mrel","mop","mpunct"],Hv=["rightmost","mrel","mclose","mpunct"],_h={display:B.DISPLAY,text:B.TEXT,script:B.SCRIPT,scriptscript:B.SCRIPTSCRIPT},VI={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},is=function(M,D,R,O){O===void 0&&(O=[null,null]);for(var X=[],se=0;se<M.length;se++){var Te=yi(M[se],D);if(Te instanceof Ke){var $e=Te.children;X.push.apply(X,$e)}else X.push(Te)}if(vt.tryCombineChars(X),!R)return X;var nt=D;if(M.length===1){var bt=M[0];bt.type==="sizing"?nt=D.havingSize(bt.size):bt.type==="styling"&&(nt=D.havingStyle(_h[bt.style]))}var Gt=ea([O[0]||"leftmost"],[],D),nn=ea([O[1]||"rightmost"],[],D),dn=R==="root";return Zw(X,function(fn,Pn){var Nn=Pn.classes[0],sr=fn.classes[0];Nn==="mbin"&&g.contains(Hv,sr)?Pn.classes[0]="mord":sr==="mbin"&&g.contains(nc,Nn)&&(fn.classes[0]="mord")},{node:Gt},nn,dn),Zw(X,function(fn,Pn){var Nn=rc(Pn),sr=rc(fn),mr=Nn&&sr?fn.hasClass("mtight")?Jn[Nn][sr]:vr[Nn][sr]:null;if(mr)return vt.makeGlue(mr,nt)},{node:Gt},nn,dn),X},Zw=function oe(M,D,R,O,X){O&&M.push(O);for(var se=0;se<M.length;se++){var Te=M[se],$e=mm(Te);if($e){oe($e.children,D,R,null,X);continue}var nt=!Te.hasClass("mspace");if(nt){var bt=D(Te,R.node);bt&&(R.insertAfter?R.insertAfter(bt):(M.unshift(bt),se++))}nt?R.node=Te:X&&Te.hasClass("newline")&&(R.node=ea(["leftmost"])),R.insertAfter=function(Gt){return function(nn){M.splice(Gt+1,0,nn),se++}}(se)}O&&M.pop()},mm=function(M){return M instanceof Ke||M instanceof wt||M instanceof Ie&&M.hasClass("enclosing")?M:null},$I=function oe(M,D){var R=mm(M);if(R){var O=R.children;if(O.length){if(D==="right")return oe(O[O.length-1],"right");if(D==="left")return oe(O[0],"left")}}return M},rc=function(M,D){return M?(D&&(M=$I(M,D)),VI[M.classes[0]]||null):null},vm=function(M,D){var R=["nulldelimiter"].concat(M.baseSizingClasses());return ea(D.concat(R))},yi=function(M,D,R){if(!M)return ea();if(dr[M.type]){var O=dr[M.type](M,D);if(R&&D.size!==R.size){O=ea(D.sizingClasses(R),[O],D);var X=D.sizeMultiplier/R.sizeMultiplier;O.height*=X,O.depth*=X}return O}else throw new a("Got group of unknown type: '"+M.type+"'")};function Oi(oe,M){var D=ea(["base"],oe,M),R=ea(["strut"]);return R.style.height=G(D.height+D.depth),D.depth&&(R.style.verticalAlign=G(-D.depth)),D.children.unshift(R),D}function vb(oe,M){var D=null;oe.length===1&&oe[0].type==="tag"&&(D=oe[0].tag,oe=oe[0].body);var R=is(oe,M,"root"),O;R.length===2&&R[1].hasClass("tag")&&(O=R.pop());for(var X=[],se=[],Te=0;Te<R.length;Te++)if(se.push(R[Te]),R[Te].hasClass("mbin")||R[Te].hasClass("mrel")||R[Te].hasClass("allowbreak")){for(var $e=!1;Te<R.length-1&&R[Te+1].hasClass("mspace")&&!R[Te+1].hasClass("newline");)Te++,se.push(R[Te]),R[Te].hasClass("nobreak")&&($e=!0);$e||(X.push(Oi(se,M)),se=[])}else R[Te].hasClass("newline")&&(se.pop(),se.length>0&&(X.push(Oi(se,M)),se=[]),X.push(R[Te]));se.length>0&&X.push(Oi(se,M));var nt;D?(nt=Oi(is(D,M,!0)),nt.classes=["tag"],X.push(nt)):O&&X.push(O);var bt=ea(["katex-html"],X);if(bt.setAttribute("aria-hidden","true"),nt){var Gt=nt.children[0];Gt.style.height=G(bt.height+bt.depth),bt.depth&&(Gt.style.verticalAlign=G(-bt.depth))}return bt}function Jw(oe){return new Ke(oe)}var rl=function(){function oe(D,R,O){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=D,this.attributes={},this.children=R||[],this.classes=O||[]}var M=oe.prototype;return M.setAttribute=function(R,O){this.attributes[R]=O},M.getAttribute=function(R){return this.attributes[R]},M.toNode=function(){var R=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var O in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,O)&&R.setAttribute(O,this.attributes[O]);this.classes.length>0&&(R.className=_e(this.classes));for(var X=0;X<this.children.length;X++)R.appendChild(this.children[X].toNode());return R},M.toMarkup=function(){var R="<"+this.type;for(var O in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,O)&&(R+=" "+O+'="',R+=g.escape(this.attributes[O]),R+='"');this.classes.length>0&&(R+=' class ="'+g.escape(_e(this.classes))+'"'),R+=">";for(var X=0;X<this.children.length;X++)R+=this.children[X].toMarkup();return R+="</"+this.type+">",R},M.toText=function(){return this.children.map(function(R){return R.toText()}).join("")},oe}(),bh=function(){function oe(D){this.text=void 0,this.text=D}var M=oe.prototype;return M.toNode=function(){return document.createTextNode(this.text)},M.toMarkup=function(){return g.escape(this.toText())},M.toText=function(){return this.text},oe}(),GI=function(){function oe(D){this.width=void 0,this.character=void 0,this.width=D,D>=.05555&&D<=.05556?this.character=" ":D>=.1666&&D<=.1667?this.character=" ":D>=.2222&&D<=.2223?this.character=" ":D>=.2777&&D<=.2778?this.character="  ":D>=-.05556&&D<=-.05555?this.character=" ⁣":D>=-.1667&&D<=-.1666?this.character=" ⁣":D>=-.2223&&D<=-.2222?this.character=" ⁣":D>=-.2778&&D<=-.2777?this.character=" ⁣":this.character=null}var M=oe.prototype;return M.toNode=function(){if(this.character)return document.createTextNode(this.character);var R=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return R.setAttribute("width",G(this.width)),R},M.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+G(this.width)+'"/>'},M.toText=function(){return this.character?this.character:" "},oe}(),xn={MathNode:rl,TextNode:bh,SpaceNode:GI,newDocumentFragment:Jw},il=function(M,D,R){return Yn[D][M]&&Yn[D][M].replace&&M.charCodeAt(0)!==55349&&!(Fe.hasOwnProperty(M)&&R&&(R.fontFamily&&R.fontFamily.substr(4,2)==="tt"||R.font&&R.font.substr(4,2)==="tt"))&&(M=Yn[D][M].replace),new xn.TextNode(M)},Vv=function(M){return M.length===1?M[0]:new xn.MathNode("mrow",M)},gb=function(M,D){if(D.fontFamily==="texttt")return"monospace";if(D.fontFamily==="textsf")return D.fontShape==="textit"&&D.fontWeight==="textbf"?"sans-serif-bold-italic":D.fontShape==="textit"?"sans-serif-italic":D.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(D.fontShape==="textit"&&D.fontWeight==="textbf")return"bold-italic";if(D.fontShape==="textit")return"italic";if(D.fontWeight==="textbf")return"bold";var R=D.font;if(!R||R==="mathnormal")return null;var O=M.mode;if(R==="mathit")return"italic";if(R==="boldsymbol")return M.type==="textord"?"bold":"bold-italic";if(R==="mathbf")return"bold";if(R==="mathbb")return"double-struck";if(R==="mathfrak")return"fraktur";if(R==="mathscr"||R==="mathcal")return"script";if(R==="mathsf")return"sans-serif";if(R==="mathtt")return"monospace";var X=M.text;if(g.contains(["\\imath","\\jmath"],X))return null;Yn[O][X]&&Yn[O][X].replace&&(X=Yn[O][X].replace);var se=vt.fontMap[R].fontName;return ut(X,se,O)?vt.fontMap[R].variant:null},to=function(M,D,R){if(M.length===1){var O=Ci(M[0],D);return R&&O instanceof rl&&O.type==="mo"&&(O.setAttribute("lspace","0em"),O.setAttribute("rspace","0em")),[O]}for(var X=[],se,Te=0;Te<M.length;Te++){var $e=Ci(M[Te],D);if($e instanceof rl&&se instanceof rl){if($e.type==="mtext"&&se.type==="mtext"&&$e.getAttribute("mathvariant")===se.getAttribute("mathvariant")){var nt;(nt=se.children).push.apply(nt,$e.children);continue}else if($e.type==="mn"&&se.type==="mn"){var bt;(bt=se.children).push.apply(bt,$e.children);continue}else if($e.type==="mi"&&$e.children.length===1&&se.type==="mn"){var Gt=$e.children[0];if(Gt instanceof bh&&Gt.text==="."){var nn;(nn=se.children).push.apply(nn,$e.children);continue}}else if(se.type==="mi"&&se.children.length===1){var dn=se.children[0];if(dn instanceof bh&&dn.text==="̸"&&($e.type==="mo"||$e.type==="mi"||$e.type==="mn")){var fn=$e.children[0];fn instanceof bh&&fn.text.length>0&&(fn.text=fn.text.slice(0,1)+"̸"+fn.text.slice(1),X.pop())}}}X.push($e),se=$e}return X},ic=function(M,D,R){return Vv(to(M,D,R))},Ci=function(M,D){if(!M)return new xn.MathNode("mrow");if(Li[M.type]){var R=Li[M.type](M,D);return R}else throw new a("Got group of unknown type: '"+M.type+"'")};function Sh(oe,M,D,R,O){var X=to(oe,D),se;X.length===1&&X[0]instanceof rl&&g.contains(["mrow","mtable"],X[0].type)?se=X[0]:se=new xn.MathNode("mrow",X);var Te=new xn.MathNode("annotation",[new xn.TextNode(M)]);Te.setAttribute("encoding","application/x-tex");var $e=new xn.MathNode("semantics",[se,Te]),nt=new xn.MathNode("math",[$e]);nt.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),R&&nt.setAttribute("display","block");var bt=O?"katex":"katex-mathml";return vt.makeSpan([bt],[nt])}var eT=function(M){return new At({style:M.displayMode?B.DISPLAY:B.TEXT,maxSize:M.maxSize,minRuleThickness:M.minRuleThickness})},tT=function(M,D){if(D.displayMode){var R=["katex-display"];D.leqno&&R.push("leqno"),D.fleqn&&R.push("fleqn"),M=vt.makeSpan(R,[M])}return M},WI=function(M,D,R){var O=eT(R),X;if(R.output==="mathml")return Sh(M,D,O,R.displayMode,!0);if(R.output==="html"){var se=vb(M,O);X=vt.makeSpan(["katex"],[se])}else{var Te=Sh(M,D,O,R.displayMode,!1),$e=vb(M,O);X=vt.makeSpan(["katex"],[Te,$e])}return tT(X,R)},qI=function(M,D,R){var O=eT(R),X=vb(M,O),se=vt.makeSpan(["katex"],[X]);return tT(se,R)},jI={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},KI=function(M){var D=new xn.MathNode("mo",[new xn.TextNode(jI[M.replace(/^\\/,"")])]);return D.setAttribute("stretchy","true"),D},XI={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},YI=function(M){return M.type==="ordgroup"?M.body.length:1},QI=function(M,D){function R(){var $e=4e5,nt=M.label.substr(1);if(g.contains(["widehat","widecheck","widetilde","utilde"],nt)){var bt=M,Gt=YI(bt.base),nn,dn,fn;if(Gt>5)nt==="widehat"||nt==="widecheck"?(nn=420,$e=2364,fn=.42,dn=nt+"4"):(nn=312,$e=2340,fn=.34,dn="tilde4");else{var Pn=[1,1,2,2,3,3][Gt];nt==="widehat"||nt==="widecheck"?($e=[0,1062,2364,2364,2364][Pn],nn=[0,239,300,360,420][Pn],fn=[0,.24,.3,.3,.36,.42][Pn],dn=nt+Pn):($e=[0,600,1033,2339,2340][Pn],nn=[0,260,286,306,312][Pn],fn=[0,.26,.286,.3,.306,.34][Pn],dn="tilde"+Pn)}var Nn=new Wt(dn),sr=new Mt([Nn],{width:"100%",height:G(fn),viewBox:"0 0 "+$e+" "+nn,preserveAspectRatio:"none"});return{span:vt.makeSvgSpan([],[sr],D),minWidth:0,height:fn}}else{var mr=[],wr=XI[nt],Ei=wr[0],Hi=wr[1],va=wr[2],Ni=va/1e3,Vi=Ei.length,Na,ta;if(Vi===1){var kl=wr[3];Na=["hide-tail"],ta=[kl]}else if(Vi===2)Na=["halfarrow-left","halfarrow-right"],ta=["xMinYMin","xMaxYMin"];else if(Vi===3)Na=["brace-left","brace-center","brace-right"],ta=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Vi+" children.");for(var Ll=0;Ll<Vi;Ll++){var Ch=new Wt(Ei[Ll]),Yc=new Mt([Ch],{width:"400em",height:G(Ni),viewBox:"0 0 "+$e+" "+va,preserveAspectRatio:ta[Ll]+" slice"}),Ol=vt.makeSvgSpan([Na[Ll]],[Yc],D);if(Vi===1)return{span:Ol,minWidth:Hi,height:Ni};Ol.style.height=G(Ni),mr.push(Ol)}return{span:vt.makeSpan(["stretchy"],mr,D),minWidth:Hi,height:Ni}}}var O=R(),X=O.span,se=O.minWidth,Te=O.height;return X.height=Te,X.style.height=G(Te),se>0&&(X.style.minWidth=G(se)),X},$v=function(M,D,R,O,X){var se,Te=M.height+M.depth+R+O;if(/fbox|color|angl/.test(D)){if(se=vt.makeSpan(["stretchy",D],[],X),D==="fbox"){var $e=X.color&&X.getColor();$e&&(se.style.borderColor=$e)}}else{var nt=[];/^[bx]cancel$/.test(D)&&nt.push(new zt({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(D)&&nt.push(new zt({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var bt=new Mt(nt,{width:"100%",height:G(Te)});se=vt.makeSvgSpan([],[bt],X)}return se.height=Te,se.style.height=G(Te),se},Mo={encloseSpan:$v,mathMLnode:KI,svgSpan:QI};function Gr(oe,M){if(!oe||oe.type!==M)throw new Error("Expected node of type "+M+", but got "+(oe?"node of type "+oe.type:String(oe)));return oe}function Gv(oe){var M=gm(oe);if(!M)throw new Error("Expected node of symbol group type, but got "+(oe?"node of type "+oe.type:String(oe)));return M}function gm(oe){return oe&&(oe.type==="atom"||Qn.hasOwnProperty(oe.type))?oe:null}var Wv=function(M,D){var R,O,X;M&&M.type==="supsub"?(O=Gr(M.base,"accent"),R=O.base,M.base=R,X=On(yi(M,D)),M.base=O):(O=Gr(M,"accent"),R=O.base);var se=yi(R,D.havingCrampedStyle()),Te=O.isShifty&&g.isCharacterBox(R),$e=0;if(Te){var nt=g.getBaseElem(R),bt=yi(nt,D.havingCrampedStyle());$e=Sn(bt).skew}var Gt=O.label==="\\c",nn=Gt?se.height+se.depth:Math.min(se.height,D.fontMetrics().xHeight),dn;if(O.isStretchy)dn=Mo.svgSpan(O,D),dn=vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:se},{type:"elem",elem:dn,wrapperClasses:["svg-align"],wrapperStyle:$e>0?{width:"calc(100% - "+G(2*$e)+")",marginLeft:G(2*$e)}:void 0}]},D);else{var fn,Pn;O.label==="\\vec"?(fn=vt.staticSvg("vec",D),Pn=vt.svgData.vec[1]):(fn=vt.makeOrd({mode:O.mode,text:O.label},D,"textord"),fn=Sn(fn),fn.italic=0,Pn=fn.width,Gt&&(nn+=fn.depth)),dn=vt.makeSpan(["accent-body"],[fn]);var Nn=O.label==="\\textcircled";Nn&&(dn.classes.push("accent-full"),nn=se.height);var sr=$e;Nn||(sr-=Pn/2),dn.style.left=G(sr),O.label==="\\textcircled"&&(dn.style.top=".2em"),dn=vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:se},{type:"kern",size:-nn},{type:"elem",elem:dn}]},D)}var mr=vt.makeSpan(["mord","accent"],[dn],D);return X?(X.children[0]=mr,X.height=Math.max(mr.height,X.height),X.classes[0]="mord",X):mr},yb=function(M,D){var R=M.isStretchy?Mo.mathMLnode(M.label):new xn.MathNode("mo",[il(M.label,M.mode)]),O=new xn.MathNode("mover",[Ci(M.base,D),R]);return O.setAttribute("accent","true"),O},nT=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(function(oe){return"\\"+oe}).join("|"));mn({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(M,D){var R=qr(D[0]),O=!nT.test(M.funcName),X=!O||M.funcName==="\\widehat"||M.funcName==="\\widetilde"||M.funcName==="\\widecheck";return{type:"accent",mode:M.parser.mode,label:M.funcName,isStretchy:O,isShifty:X,base:R}},htmlBuilder:Wv,mathmlBuilder:yb}),mn({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:function(M,D){var R=D[0],O=M.parser.mode;return O==="math"&&(M.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+M.funcName+" works only in text mode"),O="text"),{type:"accent",mode:O,label:M.funcName,isStretchy:!1,isShifty:!0,base:R}},htmlBuilder:Wv,mathmlBuilder:yb}),mn({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(M,D){var R=M.parser,O=M.funcName,X=D[0];return{type:"accentUnder",mode:R.mode,label:O,base:X}},htmlBuilder:function(M,D){var R=yi(M.base,D),O=Mo.svgSpan(M,D),X=M.label==="\\utilde"?.12:0,se=vt.makeVList({positionType:"top",positionData:R.height,children:[{type:"elem",elem:O,wrapperClasses:["svg-align"]},{type:"kern",size:X},{type:"elem",elem:R}]},D);return vt.makeSpan(["mord","accentunder"],[se],D)},mathmlBuilder:function(M,D){var R=Mo.mathMLnode(M.label),O=new xn.MathNode("munder",[Ci(M.base,D),R]);return O.setAttribute("accentunder","true"),O}});var xh=function(M){var D=new xn.MathNode("mpadded",M?[M]:[]);return D.setAttribute("width","+0.6em"),D.setAttribute("lspace","0.3em"),D};mn({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler:function(M,D,R){var O=M.parser,X=M.funcName;return{type:"xArrow",mode:O.mode,label:X,body:D[0],below:R[0]}},htmlBuilder:function(M,D){var R=D.style,O=D.havingStyle(R.sup()),X=vt.wrapFragment(yi(M.body,O,D),D),se=M.label.slice(0,2)==="\\x"?"x":"cd";X.classes.push(se+"-arrow-pad");var Te;M.below&&(O=D.havingStyle(R.sub()),Te=vt.wrapFragment(yi(M.below,O,D),D),Te.classes.push(se+"-arrow-pad"));var $e=Mo.svgSpan(M,D),nt=-D.fontMetrics().axisHeight+.5*$e.height,bt=-D.fontMetrics().axisHeight-.5*$e.height-.111;(X.depth>.25||M.label==="\\xleftequilibrium")&&(bt-=X.depth);var Gt;if(Te){var nn=-D.fontMetrics().axisHeight+Te.height+.5*$e.height+.111;Gt=vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:X,shift:bt},{type:"elem",elem:$e,shift:nt},{type:"elem",elem:Te,shift:nn}]},D)}else Gt=vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:X,shift:bt},{type:"elem",elem:$e,shift:nt}]},D);return Gt.children[0].children[0].children[1].classes.push("svg-align"),vt.makeSpan(["mrel","x-arrow"],[Gt],D)},mathmlBuilder:function(M,D){var R=Mo.mathMLnode(M.label);R.setAttribute("minsize",M.label.charAt(0)==="x"?"1.75em":"3.0em");var O;if(M.body){var X=xh(Ci(M.body,D));if(M.below){var se=xh(Ci(M.below,D));O=new xn.MathNode("munderover",[R,se,X])}else O=new xn.MathNode("mover",[R,X])}else if(M.below){var Te=xh(Ci(M.below,D));O=new xn.MathNode("munder",[R,Te])}else O=xh(),O=new xn.MathNode("mover",[R,O]);return O}});var rT={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},_b=function(){return{type:"styling",body:[],mode:"math",style:"display"}},ym=function(M){return M.type==="textord"&&M.text==="@"},qv=function(M,D){return(M.type==="mathord"||M.type==="atom")&&M.text===D};function ZI(oe,M,D){var R=rT[oe];switch(R){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return D.callFunction(R,[M[0]],[M[1]]);case"\\uparrow":case"\\downarrow":{var O=D.callFunction("\\\\cdleft",[M[0]],[]),X={type:"atom",text:R,mode:"math",family:"rel"},se=D.callFunction("\\Big",[X],[]),Te=D.callFunction("\\\\cdright",[M[1]],[]),$e={type:"ordgroup",mode:"math",body:[O,se,Te]};return D.callFunction("\\\\cdparent",[$e],[])}case"\\\\cdlongequal":return D.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var nt={type:"textord",text:"\\Vert",mode:"math"};return D.callFunction("\\Big",[nt],[])}default:return{type:"textord",text:" ",mode:"math"}}}function JI(oe){var M=[];for(oe.gullet.beginGroup(),oe.gullet.macros.set("\\cr","\\\\\\relax"),oe.gullet.beginGroup();;){M.push(oe.parseExpression(!1,"\\\\")),oe.gullet.endGroup(),oe.gullet.beginGroup();var D=oe.fetch().text;if(D==="&"||D==="\\\\")oe.consume();else if(D==="\\end"){M[M.length-1].length===0&&M.pop();break}else throw new a("Expected \\\\ or \\cr or \\end",oe.nextToken)}for(var R=[],O=[R],X=0;X<M.length;X++){for(var se=M[X],Te=_b(),$e=0;$e<se.length;$e++)if(!ym(se[$e]))Te.body.push(se[$e]);else{R.push(Te),$e+=1;var nt=Gv(se[$e]).text,bt=new Array(2);if(bt[0]={type:"ordgroup",mode:"math",body:[]},bt[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(nt)>-1))if("<>AV".indexOf(nt)>-1)for(var Gt=0;Gt<2;Gt++){for(var nn=!0,dn=$e+1;dn<se.length;dn++){if(qv(se[dn],nt)){nn=!1,$e=dn;break}if(ym(se[dn]))throw new a("Missing a "+nt+" character to complete a CD arrow.",se[dn]);bt[Gt].body.push(se[dn])}if(nn)throw new a("Missing a "+nt+" character to complete a CD arrow.",se[$e])}else throw new a('Expected one of "<>AV=|." after @',se[$e]);var fn=ZI(nt,bt,oe),Pn={type:"styling",body:[fn],mode:"math",style:"display"};R.push(Pn),Te=_b()}X%2===0?R.push(Te):R.shift(),R=[],O.push(R)}oe.gullet.endGroup(),oe.gullet.endGroup();var Nn=new Array(O[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:O,arraystretch:1,addJot:!0,rowGaps:[null],cols:Nn,colSeparationType:"CD",hLinesBeforeRow:new Array(O.length+1).fill([])}}mn({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler:function(M,D){var R=M.parser,O=M.funcName;return{type:"cdlabel",mode:R.mode,side:O.slice(4),label:D[0]}},htmlBuilder:function(M,D){var R=D.havingStyle(D.style.sup()),O=vt.wrapFragment(yi(M.label,R,D),D);return O.classes.push("cd-label-"+M.side),O.style.bottom=G(.8-O.depth),O.height=0,O.depth=0,O},mathmlBuilder:function(M,D){var R=new xn.MathNode("mrow",[Ci(M.label,D)]);return R=new xn.MathNode("mpadded",[R]),R.setAttribute("width","0"),M.side==="left"&&R.setAttribute("lspace","-1width"),R.setAttribute("voffset","0.7em"),R=new xn.MathNode("mstyle",[R]),R.setAttribute("displaystyle","false"),R.setAttribute("scriptlevel","1"),R}}),mn({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler:function(M,D){var R=M.parser;return{type:"cdlabelparent",mode:R.mode,fragment:D[0]}},htmlBuilder:function(M,D){var R=vt.wrapFragment(yi(M.fragment,D),D);return R.classes.push("cd-vert-arrow"),R},mathmlBuilder:function(M,D){return new xn.MathNode("mrow",[Ci(M.fragment,D)])}}),mn({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){for(var R=M.parser,O=Gr(D[0],"ordgroup"),X=O.body,se="",Te=0;Te<X.length;Te++){var $e=Gr(X[Te],"textord");se+=$e.text}var nt=parseInt(se),bt;if(isNaN(nt))throw new a("\\@char has non-numeric argument "+se);if(nt<0||nt>=1114111)throw new a("\\@char with invalid code point "+se);return nt<=65535?bt=String.fromCharCode(nt):(nt-=65536,bt=String.fromCharCode((nt>>10)+55296,(nt&1023)+56320)),{type:"textord",mode:R.mode,text:bt}}});var iT=function(M,D){var R=is(M.body,D.withColor(M.color),!1);return vt.makeFragment(R)},aT=function(M,D){var R=to(M.body,D.withColor(M.color)),O=new xn.MathNode("mstyle",R);return O.setAttribute("mathcolor",M.color),O};mn({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler:function(M,D){var R=M.parser,O=Gr(D[0],"color-token").color,X=D[1];return{type:"color",mode:R.mode,color:O,body:ii(X)}},htmlBuilder:iT,mathmlBuilder:aT}),mn({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler:function(M,D){var R=M.parser,O=M.breakOnTokenText,X=Gr(D[0],"color-token").color;R.gullet.macros.set("\\current@color",X);var se=R.parseExpression(!0,O);return{type:"color",mode:R.mode,color:X,body:se}},htmlBuilder:iT,mathmlBuilder:aT}),mn({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(M,D,R){var O=M.parser,X=R[0],se=!O.settings.displayMode||!O.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:O.mode,newLine:se,size:X&&Gr(X,"size").value}},htmlBuilder:function(M,D){var R=vt.makeSpan(["mspace"],[],D);return M.newLine&&(R.classes.push("newline"),M.size&&(R.style.marginTop=G(ot(M.size,D)))),R},mathmlBuilder:function(M,D){var R=new xn.MathNode("mspace");return M.newLine&&(R.setAttribute("linebreak","newline"),M.size&&R.setAttribute("height",G(ot(M.size,D)))),R}});var bb={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},jv=function(M){var D=M.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(D))throw new a("Expected a control sequence",M);return D},eD=function(M){var D=M.gullet.popToken();return D.text==="="&&(D=M.gullet.popToken(),D.text===" "&&(D=M.gullet.popToken())),D},sT=function(M,D,R,O){var X=M.gullet.macros.get(R.text);X==null&&(R.noexpand=!0,X={tokens:[R],numArgs:0,unexpandable:!M.gullet.isExpandable(R.text)}),M.gullet.macros.set(D,X,O)};mn({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler:function(M){var D=M.parser,R=M.funcName;D.consumeSpaces();var O=D.fetch();if(bb[O.text])return(R==="\\global"||R==="\\\\globallong")&&(O.text=bb[O.text]),Gr(D.parseFunction(),"internal");throw new a("Invalid token after macro prefix",O)}}),mn({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(M){var D=M.parser,R=M.funcName,O=D.gullet.popToken(),X=O.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(X))throw new a("Expected a control sequence",O);for(var se=0,Te,$e=[[]];D.gullet.future().text!=="{";)if(O=D.gullet.popToken(),O.text==="#"){if(D.gullet.future().text==="{"){Te=D.gullet.future(),$e[se].push("{");break}if(O=D.gullet.popToken(),!/^[1-9]$/.test(O.text))throw new a('Invalid argument number "'+O.text+'"');if(parseInt(O.text)!==se+1)throw new a('Argument number "'+O.text+'" out of order');se++,$e.push([])}else{if(O.text==="EOF")throw new a("Expected a macro definition");$e[se].push(O.text)}var nt=D.gullet.consumeArg(),bt=nt.tokens;return Te&&bt.unshift(Te),(R==="\\edef"||R==="\\xdef")&&(bt=D.gullet.expandTokens(bt),bt.reverse()),D.gullet.macros.set(X,{tokens:bt,numArgs:se,delimiters:$e},R===bb[R]),{type:"internal",mode:D.mode}}}),mn({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(M){var D=M.parser,R=M.funcName,O=jv(D.gullet.popToken());D.gullet.consumeSpaces();var X=eD(D);return sT(D,O,X,R==="\\\\globallet"),{type:"internal",mode:D.mode}}}),mn({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(M){var D=M.parser,R=M.funcName,O=jv(D.gullet.popToken()),X=D.gullet.popToken(),se=D.gullet.popToken();return sT(D,O,se,R==="\\\\globalfuture"),D.gullet.pushToken(se),D.gullet.pushToken(X),{type:"internal",mode:D.mode}}});var lu=function(M,D,R){var O=Yn.math[M]&&Yn.math[M].replace,X=ut(O||M,D,R);if(!X)throw new Error("Unsupported symbol "+M+" and font size "+D+".");return X},Ai=function(M,D,R,O){var X=R.havingBaseStyle(D),se=vt.makeSpan(O.concat(X.sizingClasses(R)),[M],R),Te=X.sizeMultiplier/R.sizeMultiplier;return se.height*=Te,se.depth*=Te,se.maxFontSize=X.sizeMultiplier,se},Kc=function(M,D,R){var O=D.havingBaseStyle(R),X=(1-D.sizeMultiplier/O.sizeMultiplier)*D.fontMetrics().axisHeight;M.classes.push("delimcenter"),M.style.top=G(X),M.height-=X,M.depth+=X},Bs=function(M,D,R,O,X,se){var Te=vt.makeSymbol(M,"Main-Regular",X,O),$e=Ai(Te,D,O,se);return R&&Kc($e,O,D),$e},uu=function(M,D,R,O){return vt.makeSymbol(M,"Size"+D+"-Regular",R,O)},oT=function(M,D,R,O,X,se){var Te=uu(M,D,X,O),$e=Ai(vt.makeSpan(["delimsizing","size"+D],[Te],O),B.TEXT,O,se);return R&&Kc($e,O,B.TEXT),$e},Kv=function(M,D,R){var O;D==="Size1-Regular"?O="delim-size1":O="delim-size4";var X=vt.makeSpan(["delimsizinginner",O],[vt.makeSpan([],[vt.makeSymbol(M,D,R)])]);return{type:"elem",elem:X}},Sb=function(M,D,R){var O=Ue["Size4-Regular"][M.charCodeAt(0)]?Ue["Size4-Regular"][M.charCodeAt(0)][4]:Ue["Size1-Regular"][M.charCodeAt(0)][4],X=new Wt("inner",he(M,Math.round(1e3*D))),se=new Mt([X],{width:G(O),height:G(D),style:"width:"+G(O),viewBox:"0 0 "+1e3*O+" "+Math.round(1e3*D),preserveAspectRatio:"xMinYMin"}),Te=vt.makeSvgSpan([],[se],R);return Te.height=D,Te.style.height=G(D),Te.style.width=G(O),{type:"elem",elem:Te}},xb=.008,Xv={type:"kern",size:-1*xb},tD=["|","\\lvert","\\rvert","\\vert"],nD=["\\|","\\lVert","\\rVert","\\Vert"],lT=function(M,D,R,O,X,se){var Te,$e,nt,bt;Te=nt=bt=M,$e=null;var Gt="Size1-Regular";M==="\\uparrow"?nt=bt="⏐":M==="\\Uparrow"?nt=bt="‖":M==="\\downarrow"?Te=nt="⏐":M==="\\Downarrow"?Te=nt="‖":M==="\\updownarrow"?(Te="\\uparrow",nt="⏐",bt="\\downarrow"):M==="\\Updownarrow"?(Te="\\Uparrow",nt="‖",bt="\\Downarrow"):g.contains(tD,M)?nt="∣":g.contains(nD,M)?nt="∥":M==="["||M==="\\lbrack"?(Te="⎡",nt="⎢",bt="⎣",Gt="Size4-Regular"):M==="]"||M==="\\rbrack"?(Te="⎤",nt="⎥",bt="⎦",Gt="Size4-Regular"):M==="\\lfloor"||M==="⌊"?(nt=Te="⎢",bt="⎣",Gt="Size4-Regular"):M==="\\lceil"||M==="⌈"?(Te="⎡",nt=bt="⎢",Gt="Size4-Regular"):M==="\\rfloor"||M==="⌋"?(nt=Te="⎥",bt="⎦",Gt="Size4-Regular"):M==="\\rceil"||M==="⌉"?(Te="⎤",nt=bt="⎥",Gt="Size4-Regular"):M==="("||M==="\\lparen"?(Te="⎛",nt="⎜",bt="⎝",Gt="Size4-Regular"):M===")"||M==="\\rparen"?(Te="⎞",nt="⎟",bt="⎠",Gt="Size4-Regular"):M==="\\{"||M==="\\lbrace"?(Te="⎧",$e="⎨",bt="⎩",nt="⎪",Gt="Size4-Regular"):M==="\\}"||M==="\\rbrace"?(Te="⎫",$e="⎬",bt="⎭",nt="⎪",Gt="Size4-Regular"):M==="\\lgroup"||M==="⟮"?(Te="⎧",bt="⎩",nt="⎪",Gt="Size4-Regular"):M==="\\rgroup"||M==="⟯"?(Te="⎫",bt="⎭",nt="⎪",Gt="Size4-Regular"):M==="\\lmoustache"||M==="⎰"?(Te="⎧",bt="⎭",nt="⎪",Gt="Size4-Regular"):(M==="\\rmoustache"||M==="⎱")&&(Te="⎫",bt="⎩",nt="⎪",Gt="Size4-Regular");var nn=lu(Te,Gt,X),dn=nn.height+nn.depth,fn=lu(nt,Gt,X),Pn=fn.height+fn.depth,Nn=lu(bt,Gt,X),sr=Nn.height+Nn.depth,mr=0,wr=1;if($e!==null){var Ei=lu($e,Gt,X);mr=Ei.height+Ei.depth,wr=2}var Hi=dn+sr+mr,va=Math.max(0,Math.ceil((D-Hi)/(wr*Pn))),Ni=Hi+va*wr*Pn,Vi=O.fontMetrics().axisHeight;R&&(Vi*=O.sizeMultiplier);var Na=Ni/2-Vi,ta=[];if(ta.push(Kv(bt,Gt,X)),ta.push(Xv),$e===null){var kl=Ni-dn-sr+2*xb;ta.push(Sb(nt,kl,O))}else{var Ll=(Ni-dn-sr-mr)/2+2*xb;ta.push(Sb(nt,Ll,O)),ta.push(Xv),ta.push(Kv($e,Gt,X)),ta.push(Xv),ta.push(Sb(nt,Ll,O))}ta.push(Xv),ta.push(Kv(Te,Gt,X));var Ch=O.havingBaseStyle(B.TEXT),Yc=vt.makeVList({positionType:"bottom",positionData:Na,children:ta},Ch);return Ai(vt.makeSpan(["delimsizing","mult"],[Yc],Ch),B.TEXT,O,se)},wb=80,Yv=.08,Re=function(M,D,R,O,X){var se=Y(M,O,R),Te=new Wt(M,se),$e=new Mt([Te],{width:"400em",height:G(D),viewBox:"0 0 400000 "+R,preserveAspectRatio:"xMinYMin slice"});return vt.makeSvgSpan(["hide-tail"],[$e],X)},z=function(M,D){var R=D.havingBaseSizing(),O=Pt("\\surd",M*R.sizeMultiplier,xt,R),X=R.sizeMultiplier,se=Math.max(0,D.minRuleThickness-D.fontMetrics().sqrtRuleThickness),Te,$e=0,nt=0,bt=0,Gt;return O.type==="small"?(bt=1e3+1e3*se+wb,M<1?X=1:M<1.4&&(X=.7),$e=(1+se+Yv)/X,nt=(1+se)/X,Te=Re("sqrtMain",$e,bt,se,D),Te.style.minWidth="0.853em",Gt=.833/X):O.type==="large"?(bt=(1e3+wb)*fe[O.size],nt=(fe[O.size]+se)/X,$e=(fe[O.size]+se+Yv)/X,Te=Re("sqrtSize"+O.size,$e,bt,se,D),Te.style.minWidth="1.02em",Gt=1/X):($e=M+se+Yv,nt=M+se,bt=Math.floor(1e3*M+se)+wb,Te=Re("sqrtTall",$e,bt,se,D),Te.style.minWidth="0.742em",Gt=1.056),Te.height=nt,Te.style.height=G($e),{span:Te,advanceWidth:Gt,ruleWidth:(D.fontMetrics().sqrtRuleThickness+se)*X}},K=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],j=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],Z=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],fe=[0,1.2,1.8,2.4,3],xe=function(M,D,R,O,X){if(M==="<"||M==="\\lt"||M==="⟨"?M="\\langle":(M===">"||M==="\\gt"||M==="⟩")&&(M="\\rangle"),g.contains(K,M)||g.contains(Z,M))return oT(M,D,!1,R,O,X);if(g.contains(j,M))return lT(M,fe[D],!1,R,O,X);throw new a("Illegal delimiter: '"+M+"'")},Je=[{type:"small",style:B.SCRIPTSCRIPT},{type:"small",style:B.SCRIPT},{type:"small",style:B.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],lt=[{type:"small",style:B.SCRIPTSCRIPT},{type:"small",style:B.SCRIPT},{type:"small",style:B.TEXT},{type:"stack"}],xt=[{type:"small",style:B.SCRIPTSCRIPT},{type:"small",style:B.SCRIPT},{type:"small",style:B.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],_t=function(M){if(M.type==="small")return"Main-Regular";if(M.type==="large")return"Size"+M.size+"-Regular";if(M.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+M.type+"' here.")},Pt=function(M,D,R,O){for(var X=Math.min(2,3-O.style.size),se=X;se<R.length&&R[se].type!=="stack";se++){var Te=lu(M,_t(R[se]),"math"),$e=Te.height+Te.depth;if(R[se].type==="small"){var nt=O.havingBaseStyle(R[se].style);$e*=nt.sizeMultiplier}if($e>D)return R[se]}return R[R.length-1]},Xt=function(M,D,R,O,X,se){M==="<"||M==="\\lt"||M==="⟨"?M="\\langle":(M===">"||M==="\\gt"||M==="⟩")&&(M="\\rangle");var Te;g.contains(Z,M)?Te=Je:g.contains(K,M)?Te=xt:Te=lt;var $e=Pt(M,D,Te,O);return $e.type==="small"?Bs(M,$e.style,R,O,X,se):$e.type==="large"?oT(M,$e.size,R,O,X,se):lT(M,D,R,O,X,se)},Mn=function(M,D,R,O,X,se){var Te=O.fontMetrics().axisHeight*O.sizeMultiplier,$e=901,nt=5/O.fontMetrics().ptPerEm,bt=Math.max(D-Te,R+Te),Gt=Math.max(bt/500*$e,2*bt-nt);return Xt(M,Gt,!0,O,X,se)},Ln={sqrtImage:z,sizedDelim:xe,sizeToMaxHeight:fe,customSizedDelim:Xt,leftRightDelim:Mn},wn={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},xr=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function ma(oe,M){var D=gm(oe);if(D&&g.contains(xr,D.text))return D;throw D?new a("Invalid delimiter '"+D.text+"' after '"+M.funcName+"'",oe):new a("Invalid delimiter type '"+oe.type+"'",oe)}mn({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:function(M,D){var R=ma(D[0],M);return{type:"delimsizing",mode:M.parser.mode,size:wn[M.funcName].size,mclass:wn[M.funcName].mclass,delim:R.text}},htmlBuilder:function(M,D){return M.delim==="."?vt.makeSpan([M.mclass]):Ln.sizedDelim(M.delim,M.size,D,M.mode,[M.mclass])},mathmlBuilder:function(M){var D=[];M.delim!=="."&&D.push(il(M.delim,M.mode));var R=new xn.MathNode("mo",D);M.mclass==="mopen"||M.mclass==="mclose"?R.setAttribute("fence","true"):R.setAttribute("fence","false"),R.setAttribute("stretchy","true");var O=G(Ln.sizeToMaxHeight[M.size]);return R.setAttribute("minsize",O),R.setAttribute("maxsize",O),R}});function Ss(oe){if(!oe.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}mn({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:function(M,D){var R=M.parser.gullet.macros.get("\\current@color");if(R&&typeof R!="string")throw new a("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:M.parser.mode,delim:ma(D[0],M).text,color:R}}}),mn({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:function(M,D){var R=ma(D[0],M),O=M.parser;++O.leftrightDepth;var X=O.parseExpression(!1);--O.leftrightDepth,O.expect("\\right",!1);var se=Gr(O.parseFunction(),"leftright-right");return{type:"leftright",mode:O.mode,body:X,left:R.text,right:se.delim,rightColor:se.color}},htmlBuilder:function(M,D){Ss(M);for(var R=is(M.body,D,!0,["mopen","mclose"]),O=0,X=0,se=!1,Te=0;Te<R.length;Te++)R[Te].isMiddle?se=!0:(O=Math.max(R[Te].height,O),X=Math.max(R[Te].depth,X));O*=D.sizeMultiplier,X*=D.sizeMultiplier;var $e;if(M.left==="."?$e=vm(D,["mopen"]):$e=Ln.leftRightDelim(M.left,O,X,D,M.mode,["mopen"]),R.unshift($e),se)for(var nt=1;nt<R.length;nt++){var bt=R[nt],Gt=bt.isMiddle;Gt&&(R[nt]=Ln.leftRightDelim(Gt.delim,O,X,Gt.options,M.mode,[]))}var nn;if(M.right===".")nn=vm(D,["mclose"]);else{var dn=M.rightColor?D.withColor(M.rightColor):D;nn=Ln.leftRightDelim(M.right,O,X,dn,M.mode,["mclose"])}return R.push(nn),vt.makeSpan(["minner"],R,D)},mathmlBuilder:function(M,D){Ss(M);var R=to(M.body,D);if(M.left!=="."){var O=new xn.MathNode("mo",[il(M.left,M.mode)]);O.setAttribute("fence","true"),R.unshift(O)}if(M.right!=="."){var X=new xn.MathNode("mo",[il(M.right,M.mode)]);X.setAttribute("fence","true"),M.rightColor&&X.setAttribute("mathcolor",M.rightColor),R.push(X)}return Vv(R)}}),mn({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:function(M,D){var R=ma(D[0],M);if(!M.parser.leftrightDepth)throw new a("\\middle without preceding \\left",R);return{type:"middle",mode:M.parser.mode,delim:R.text}},htmlBuilder:function(M,D){var R;if(M.delim===".")R=vm(D,[]);else{R=Ln.sizedDelim(M.delim,1,D,M.mode,[]);var O={delim:M.delim,options:D};R.isMiddle=O}return R},mathmlBuilder:function(M,D){var R=M.delim==="\\vert"||M.delim==="|"?il("|","text"):il(M.delim,M.mode),O=new xn.MathNode("mo",[R]);return O.setAttribute("fence","true"),O.setAttribute("lspace","0.05em"),O.setAttribute("rspace","0.05em"),O}});var ac=function(M,D){var R=vt.wrapFragment(yi(M.body,D),D),O=M.label.substr(1),X=D.sizeMultiplier,se,Te=0,$e=g.isCharacterBox(M.body);if(O==="sout")se=vt.makeSpan(["stretchy","sout"]),se.height=D.fontMetrics().defaultRuleThickness/X,Te=-.5*D.fontMetrics().xHeight;else if(O==="phase"){var nt=ot({number:.6,unit:"pt"},D),bt=ot({number:.35,unit:"ex"},D),Gt=D.havingBaseSizing();X=X/Gt.sizeMultiplier;var nn=R.height+R.depth+nt+bt;R.style.paddingLeft=G(nn/2+nt);var dn=Math.floor(1e3*nn*X),fn=Xe(dn),Pn=new Mt([new Wt("phase",fn)],{width:"400em",height:G(dn/1e3),viewBox:"0 0 400000 "+dn,preserveAspectRatio:"xMinYMin slice"});se=vt.makeSvgSpan(["hide-tail"],[Pn],D),se.style.height=G(nn),Te=R.depth+nt+bt}else{/cancel/.test(O)?$e||R.classes.push("cancel-pad"):O==="angl"?R.classes.push("anglpad"):R.classes.push("boxpad");var Nn=0,sr=0,mr=0;/box/.test(O)?(mr=Math.max(D.fontMetrics().fboxrule,D.minRuleThickness),Nn=D.fontMetrics().fboxsep+(O==="colorbox"?0:mr),sr=Nn):O==="angl"?(mr=Math.max(D.fontMetrics().defaultRuleThickness,D.minRuleThickness),Nn=4*mr,sr=Math.max(0,.25-R.depth)):(Nn=$e?.2:0,sr=Nn),se=Mo.encloseSpan(R,O,Nn,sr,D),/fbox|boxed|fcolorbox/.test(O)?(se.style.borderStyle="solid",se.style.borderWidth=G(mr)):O==="angl"&&mr!==.049&&(se.style.borderTopWidth=G(mr),se.style.borderRightWidth=G(mr)),Te=R.depth+sr,M.backgroundColor&&(se.style.backgroundColor=M.backgroundColor,M.borderColor&&(se.style.borderColor=M.borderColor))}var wr;if(M.backgroundColor)wr=vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:se,shift:Te},{type:"elem",elem:R,shift:0}]},D);else{var Ei=/cancel|phase/.test(O)?["svg-align"]:[];wr=vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:R,shift:0},{type:"elem",elem:se,shift:Te,wrapperClasses:Ei}]},D)}return/cancel/.test(O)&&(wr.height=R.height,wr.depth=R.depth),/cancel/.test(O)&&!$e?vt.makeSpan(["mord","cancel-lap"],[wr],D):vt.makeSpan(["mord"],[wr],D)},_m=function(M,D){var R=0,O=new xn.MathNode(M.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Ci(M.body,D)]);switch(M.label){case"\\cancel":O.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":O.setAttribute("notation","downdiagonalstrike");break;case"\\phase":O.setAttribute("notation","phasorangle");break;case"\\sout":O.setAttribute("notation","horizontalstrike");break;case"\\fbox":O.setAttribute("notation","box");break;case"\\angl":O.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(R=D.fontMetrics().fboxsep*D.fontMetrics().ptPerEm,O.setAttribute("width","+"+2*R+"pt"),O.setAttribute("height","+"+2*R+"pt"),O.setAttribute("lspace",R+"pt"),O.setAttribute("voffset",R+"pt"),M.label==="\\fcolorbox"){var X=Math.max(D.fontMetrics().fboxrule,D.minRuleThickness);O.setAttribute("style","border: "+X+"em solid "+String(M.borderColor))}break;case"\\xcancel":O.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return M.backgroundColor&&O.setAttribute("mathbackground",M.backgroundColor),O};mn({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler:function(M,D,R){var O=M.parser,X=M.funcName,se=Gr(D[0],"color-token").color,Te=D[1];return{type:"enclose",mode:O.mode,label:X,backgroundColor:se,body:Te}},htmlBuilder:ac,mathmlBuilder:_m}),mn({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler:function(M,D,R){var O=M.parser,X=M.funcName,se=Gr(D[0],"color-token").color,Te=Gr(D[1],"color-token").color,$e=D[2];return{type:"enclose",mode:O.mode,label:X,backgroundColor:Te,borderColor:se,body:$e}},htmlBuilder:ac,mathmlBuilder:_m}),mn({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:function(M,D){var R=M.parser;return{type:"enclose",mode:R.mode,label:"\\fbox",body:D[0]}}}),mn({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler:function(M,D){var R=M.parser,O=M.funcName,X=D[0];return{type:"enclose",mode:R.mode,label:O,body:X}},htmlBuilder:ac,mathmlBuilder:_m}),mn({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler:function(M,D){var R=M.parser;return{type:"enclose",mode:R.mode,label:"\\angl",body:D[0]}}});var Tb={};function Pl(oe){for(var M=oe.type,D=oe.names,R=oe.props,O=oe.handler,X=oe.htmlBuilder,se=oe.mathmlBuilder,Te={type:M,numArgs:R.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:O},$e=0;$e<D.length;++$e)Tb[D[$e]]=Te;X&&(dr[M]=X),se&&(Li[M]=se)}function Cb(oe){var M=[];oe.consumeSpaces();for(var D=oe.fetch().text;D==="\\hline"||D==="\\hdashline";)oe.consume(),M.push(D==="\\hdashline"),oe.consumeSpaces(),D=oe.fetch().text;return M}var wh=function(M){var D=M.parser.settings;if(!D.displayMode)throw new a("{"+M.envName+"} can be used only in display mode.")};function sc(oe,M,D){var R=M.hskipBeforeAndAfter,O=M.addJot,X=M.cols,se=M.arraystretch,Te=M.colSeparationType,$e=M.addEqnNum,nt=M.singleRow,bt=M.emptySingleRow,Gt=M.maxNumCols,nn=M.leqno;if(oe.gullet.beginGroup(),nt||oe.gullet.macros.set("\\cr","\\\\\\relax"),!se){var dn=oe.gullet.expandMacroAsText("\\arraystretch");if(dn==null)se=1;else if(se=parseFloat(dn),!se||se<0)throw new a("Invalid \\arraystretch: "+dn)}oe.gullet.beginGroup();var fn=[],Pn=[fn],Nn=[],sr=[];for(sr.push(Cb(oe));;){var mr=oe.parseExpression(!1,nt?"\\end":"\\\\");oe.gullet.endGroup(),oe.gullet.beginGroup(),mr={type:"ordgroup",mode:oe.mode,body:mr},D&&(mr={type:"styling",mode:oe.mode,style:D,body:[mr]}),fn.push(mr);var wr=oe.fetch().text;if(wr==="&"){if(Gt&&fn.length===Gt){if(nt||Te)throw new a("Too many tab characters: &",oe.nextToken);oe.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}oe.consume()}else if(wr==="\\end"){fn.length===1&&mr.type==="styling"&&mr.body[0].body.length===0&&(Pn.length>1||!bt)&&Pn.pop(),sr.length<Pn.length+1&&sr.push([]);break}else if(wr==="\\\\"){oe.consume();var Ei=void 0;oe.gullet.future().text!==" "&&(Ei=oe.parseSizeGroup(!0)),Nn.push(Ei?Ei.value:null),sr.push(Cb(oe)),fn=[],Pn.push(fn)}else throw new a("Expected & or \\\\ or \\cr or \\end",oe.nextToken)}return oe.gullet.endGroup(),oe.gullet.endGroup(),{type:"array",mode:oe.mode,addJot:O,arraystretch:se,body:Pn,cols:X,rowGaps:Nn,hskipBeforeAndAfter:R,hLinesBeforeRow:sr,colSeparationType:Te,addEqnNum:$e,leqno:nn}}function sa(oe){return oe.substr(0,1)==="d"?"display":"text"}var Rl=function(M,D){var R,O,X=M.body.length,se=M.hLinesBeforeRow,Te=0,$e=new Array(X),nt=[],bt=Math.max(D.fontMetrics().arrayRuleWidth,D.minRuleThickness),Gt=1/D.fontMetrics().ptPerEm,nn=5*Gt;if(M.colSeparationType&&M.colSeparationType==="small"){var dn=D.havingStyle(B.SCRIPT).sizeMultiplier;nn=.2778*(dn/D.sizeMultiplier)}var fn=M.colSeparationType==="CD"?ot({number:3,unit:"ex"},D):12*Gt,Pn=3*Gt,Nn=M.arraystretch*fn,sr=.7*Nn,mr=.3*Nn,wr=0;function Ei(dz){for(var dT=0;dT<dz.length;++dT)dT>0&&(wr+=.25),nt.push({pos:wr,isDashed:dz[dT]})}for(Ei(se[0]),R=0;R<M.body.length;++R){var Hi=M.body[R],va=sr,Ni=mr;Te<Hi.length&&(Te=Hi.length);var Vi=new Array(Hi.length);for(O=0;O<Hi.length;++O){var Na=yi(Hi[O],D);Ni<Na.depth&&(Ni=Na.depth),va<Na.height&&(va=Na.height),Vi[O]=Na}var ta=M.rowGaps[R],kl=0;ta&&(kl=ot(ta,D),kl>0&&(kl+=mr,Ni<kl&&(Ni=kl),kl=0)),M.addJot&&(Ni+=Pn),Vi.height=va,Vi.depth=Ni,wr+=va,Vi.pos=wr,wr+=Ni+kl,$e[R]=Vi,Ei(se[R+1])}var Ll=wr/2+D.fontMetrics().axisHeight,Ch=M.cols||[],Yc=[],Ol,Zv,sz=[];if(M.addEqnNum)for(R=0;R<X;++R){var mD=$e[R],rpe=mD.pos-Ll,vD=vt.makeSpan(["eqn-num"],[],D);vD.depth=mD.depth,vD.height=mD.height,sz.push({type:"elem",elem:vD,shift:rpe})}for(O=0,Zv=0;O<Te||Zv<Ch.length;++O,++Zv){for(var Yd=Ch[Zv]||{},oz=!0;Yd.type==="separator";){if(oz||(Ol=vt.makeSpan(["arraycolsep"],[]),Ol.style.width=G(D.fontMetrics().doubleRuleSep),Yc.push(Ol)),Yd.separator==="|"||Yd.separator===":"){var ipe=Yd.separator==="|"?"solid":"dashed",Jv=vt.makeSpan(["vertical-separator"],[],D);Jv.style.height=G(wr),Jv.style.borderRightWidth=G(bt),Jv.style.borderRightStyle=ipe,Jv.style.margin="0 "+G(-bt/2);var lz=wr-Ll;lz&&(Jv.style.verticalAlign=G(-lz)),Yc.push(Jv)}else throw new a("Invalid separator type: "+Yd.separator);Zv++,Yd=Ch[Zv]||{},oz=!1}if(!(O>=Te)){var eg=void 0;(O>0||M.hskipBeforeAndAfter)&&(eg=g.deflt(Yd.pregap,nn),eg!==0&&(Ol=vt.makeSpan(["arraycolsep"],[]),Ol.style.width=G(eg),Yc.push(Ol)));var tg=[];for(R=0;R<X;++R){var uT=$e[R],cT=uT[O];if(cT){var ape=uT.pos-Ll;cT.depth=uT.depth,cT.height=uT.height,tg.push({type:"elem",elem:cT,shift:ape})}}tg=vt.makeVList({positionType:"individualShift",children:tg},D),tg=vt.makeSpan(["col-align-"+(Yd.align||"c")],[tg]),Yc.push(tg),(O<Te-1||M.hskipBeforeAndAfter)&&(eg=g.deflt(Yd.postgap,nn),eg!==0&&(Ol=vt.makeSpan(["arraycolsep"],[]),Ol.style.width=G(eg),Yc.push(Ol)))}}if($e=vt.makeSpan(["mtable"],Yc),nt.length>0){for(var spe=vt.makeLineSpan("hline",D,bt),ope=vt.makeLineSpan("hdashline",D,bt),gD=[{type:"elem",elem:$e,shift:0}];nt.length>0;){var uz=nt.pop(),cz=uz.pos-Ll;uz.isDashed?gD.push({type:"elem",elem:ope,shift:cz}):gD.push({type:"elem",elem:spe,shift:cz})}$e=vt.makeVList({positionType:"individualShift",children:gD},D)}if(M.addEqnNum){var yD=vt.makeVList({positionType:"individualShift",children:sz},D);return yD=vt.makeSpan(["tag"],[yD],D),vt.makeFragment([$e,yD])}else return vt.makeSpan(["mord"],[$e],D)},Xd={c:"center ",l:"left ",r:"right "},Xc=function(M,D){for(var R=[],O=new xn.MathNode("mtd",[],["mtr-glue"]),X=new xn.MathNode("mtd",[],["mml-eqn-num"]),se=0;se<M.body.length;se++){for(var Te=M.body[se],$e=[],nt=0;nt<Te.length;nt++)$e.push(new xn.MathNode("mtd",[Ci(Te[nt],D)]));M.addEqnNum&&($e.unshift(O),$e.push(O),M.leqno?$e.unshift(X):$e.push(X)),R.push(new xn.MathNode("mtr",$e))}var bt=new xn.MathNode("mtable",R),Gt=M.arraystretch===.5?.1:.16+M.arraystretch-1+(M.addJot?.09:0);bt.setAttribute("rowspacing",G(Gt));var nn="",dn="";if(M.cols&&M.cols.length>0){var fn=M.cols,Pn="",Nn=!1,sr=0,mr=fn.length;fn[0].type==="separator"&&(nn+="top ",sr=1),fn[fn.length-1].type==="separator"&&(nn+="bottom ",mr-=1);for(var wr=sr;wr<mr;wr++)fn[wr].type==="align"?(dn+=Xd[fn[wr].align],Nn&&(Pn+="none "),Nn=!0):fn[wr].type==="separator"&&Nn&&(Pn+=fn[wr].separator==="|"?"solid ":"dashed ",Nn=!1);bt.setAttribute("columnalign",dn.trim()),/[sd]/.test(Pn)&&bt.setAttribute("columnlines",Pn.trim())}if(M.colSeparationType==="align"){for(var Ei=M.cols||[],Hi="",va=1;va<Ei.length;va++)Hi+=va%2?"0em ":"1em ";bt.setAttribute("columnspacing",Hi.trim())}else M.colSeparationType==="alignat"||M.colSeparationType==="gather"?bt.setAttribute("columnspacing","0em"):M.colSeparationType==="small"?bt.setAttribute("columnspacing","0.2778em"):M.colSeparationType==="CD"?bt.setAttribute("columnspacing","0.5em"):bt.setAttribute("columnspacing","1em");var Ni="",Vi=M.hLinesBeforeRow;nn+=Vi[0].length>0?"left ":"",nn+=Vi[Vi.length-1].length>0?"right ":"";for(var Na=1;Na<Vi.length-1;Na++)Ni+=Vi[Na].length===0?"none ":Vi[Na][0]?"dashed ":"solid ";return/[sd]/.test(Ni)&&bt.setAttribute("rowlines",Ni.trim()),nn!==""&&(bt=new xn.MathNode("menclose",[bt]),bt.setAttribute("notation",nn.trim())),M.arraystretch&&M.arraystretch<1&&(bt=new xn.MathNode("mstyle",[bt]),bt.setAttribute("scriptlevel","1")),bt},CU=function(M,D){M.envName.indexOf("ed")===-1&&wh(M);var R=[],O=M.envName.indexOf("at")>-1?"alignat":"align",X=sc(M.parser,{cols:R,addJot:!0,addEqnNum:M.envName==="align"||M.envName==="alignat",emptySingleRow:!0,colSeparationType:O,maxNumCols:M.envName==="split"?2:void 0,leqno:M.parser.settings.leqno},"display"),se,Te=0,$e={type:"ordgroup",mode:M.mode,body:[]};if(D[0]&&D[0].type==="ordgroup"){for(var nt="",bt=0;bt<D[0].body.length;bt++){var Gt=Gr(D[0].body[bt],"textord");nt+=Gt.text}se=Number(nt),Te=se*2}var nn=!Te;X.body.forEach(function(Nn){for(var sr=1;sr<Nn.length;sr+=2){var mr=Gr(Nn[sr],"styling"),wr=Gr(mr.body[0],"ordgroup");wr.body.unshift($e)}if(nn)Te<Nn.length&&(Te=Nn.length);else{var Ei=Nn.length/2;if(se<Ei)throw new a("Too many math in a row: "+("expected "+se+", but got "+Ei),Nn[0])}});for(var dn=0;dn<Te;++dn){var fn="r",Pn=0;dn%2===1?fn="l":dn>0&&nn&&(Pn=1),R[dn]={type:"align",align:fn,pregap:Pn,postgap:0}}return X.colSeparationType=nn?"align":"alignat",X};Pl({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(M,D){var R=gm(D[0]),O=R?[D[0]]:Gr(D[0],"ordgroup").body,X=O.map(function(Te){var $e=Gv(Te),nt=$e.text;if("lcr".indexOf(nt)!==-1)return{type:"align",align:nt};if(nt==="|")return{type:"separator",separator:"|"};if(nt===":")return{type:"separator",separator:":"};throw new a("Unknown column alignment: "+nt,Te)}),se={cols:X,hskipBeforeAndAfter:!0,maxNumCols:X.length};return sc(M.parser,se,sa(M.envName))},htmlBuilder:Rl,mathmlBuilder:Xc}),Pl({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler:function(M){var D={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[M.envName.replace("*","")],R="c",O={hskipBeforeAndAfter:!1,cols:[{type:"align",align:R}]};if(M.envName.charAt(M.envName.length-1)==="*"){var X=M.parser;if(X.consumeSpaces(),X.fetch().text==="["){if(X.consume(),X.consumeSpaces(),R=X.fetch().text,"lcr".indexOf(R)===-1)throw new a("Expected l or c or r",X.nextToken);X.consume(),X.consumeSpaces(),X.expect("]"),X.consume(),O.cols=[{type:"align",align:R}]}}var se=sc(M.parser,O,sa(M.envName)),Te=Math.max.apply(Math,[0].concat(se.body.map(function($e){return $e.length})));return se.cols=new Array(Te).fill({type:"align",align:R}),D?{type:"leftright",mode:M.mode,body:[se],left:D[0],right:D[1],rightColor:void 0}:se},htmlBuilder:Rl,mathmlBuilder:Xc}),Pl({type:"array",names:["smallmatrix"],props:{numArgs:0},handler:function(M){var D={arraystretch:.5},R=sc(M.parser,D,"script");return R.colSeparationType="small",R},htmlBuilder:Rl,mathmlBuilder:Xc}),Pl({type:"array",names:["subarray"],props:{numArgs:1},handler:function(M,D){var R=gm(D[0]),O=R?[D[0]]:Gr(D[0],"ordgroup").body,X=O.map(function(Te){var $e=Gv(Te),nt=$e.text;if("lc".indexOf(nt)!==-1)return{type:"align",align:nt};throw new a("Unknown column alignment: "+nt,Te)});if(X.length>1)throw new a("{subarray} can contain only one column");var se={cols:X,hskipBeforeAndAfter:!1,arraystretch:.5};if(se=sc(M.parser,se,"script"),se.body.length>0&&se.body[0].length>1)throw new a("{subarray} can contain only one column");return se},htmlBuilder:Rl,mathmlBuilder:Xc}),Pl({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler:function(M){var D={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},R=sc(M.parser,D,sa(M.envName));return{type:"leftright",mode:M.mode,body:[R],left:M.envName.indexOf("r")>-1?".":"\\{",right:M.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Rl,mathmlBuilder:Xc}),Pl({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:CU,htmlBuilder:Rl,mathmlBuilder:Xc}),Pl({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler:function(M){g.contains(["gather","gather*"],M.envName)&&wh(M);var D={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",addEqnNum:M.envName==="gather",emptySingleRow:!0,leqno:M.parser.settings.leqno};return sc(M.parser,D,"display")},htmlBuilder:Rl,mathmlBuilder:Xc}),Pl({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:CU,htmlBuilder:Rl,mathmlBuilder:Xc}),Pl({type:"array",names:["equation","equation*"],props:{numArgs:0},handler:function(M){wh(M);var D={addEqnNum:M.envName==="equation",emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:M.parser.settings.leqno};return sc(M.parser,D,"display")},htmlBuilder:Rl,mathmlBuilder:Xc}),Pl({type:"array",names:["CD"],props:{numArgs:0},handler:function(M){return wh(M),JI(M.parser)},htmlBuilder:Rl,mathmlBuilder:Xc}),mn({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(M,D){throw new a(M.funcName+" valid only within array environment")}});var Phe=Tb,AU=Phe;mn({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(M,D){var R=M.parser,O=M.funcName,X=D[0];if(X.type!=="ordgroup")throw new a("Invalid environment name",X);for(var se="",Te=0;Te<X.body.length;++Te)se+=Gr(X.body[Te],"textord").text;if(O==="\\begin"){if(!AU.hasOwnProperty(se))throw new a("No such environment: "+se,X);var $e=AU[se],nt=R.parseArguments("\\begin{"+se+"}",$e),bt=nt.args,Gt=nt.optArgs,nn={mode:R.mode,envName:se,parser:R},dn=$e.handler(nn,bt,Gt);R.expect("\\end",!1);var fn=R.nextToken,Pn=Gr(R.parseFunction(),"environment");if(Pn.name!==se)throw new a("Mismatch: \\begin{"+se+"} matched by \\end{"+Pn.name+"}",fn);return dn}return{type:"environment",mode:R.mode,name:se,nameGroup:X}}});var Rhe=vt.makeSpan;function EU(oe,M){var D=is(oe.body,M,!0);return Rhe([oe.mclass],D,M)}function MU(oe,M){var D,R=to(oe.body,M);return oe.mclass==="minner"?xn.newDocumentFragment(R):(oe.mclass==="mord"?oe.isCharacterBox?(D=R[0],D.type="mi"):D=new xn.MathNode("mi",R):(oe.isCharacterBox?(D=R[0],D.type="mo"):D=new xn.MathNode("mo",R),oe.mclass==="mbin"?(D.attributes.lspace="0.22em",D.attributes.rspace="0.22em"):oe.mclass==="mpunct"?(D.attributes.lspace="0em",D.attributes.rspace="0.17em"):(oe.mclass==="mopen"||oe.mclass==="mclose")&&(D.attributes.lspace="0em",D.attributes.rspace="0em")),D)}mn({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler:function(M,D){var R=M.parser,O=M.funcName,X=D[0];return{type:"mclass",mode:R.mode,mclass:"m"+O.substr(5),body:ii(X),isCharacterBox:g.isCharacterBox(X)}},htmlBuilder:EU,mathmlBuilder:MU});var rD=function(M){var D=M.type==="ordgroup"&&M.body.length?M.body[0]:M;return D.type==="atom"&&(D.family==="bin"||D.family==="rel")?"m"+D.family:"mord"};mn({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(M,D){var R=M.parser;return{type:"mclass",mode:R.mode,mclass:rD(D[0]),body:ii(D[1]),isCharacterBox:g.isCharacterBox(D[1])}}}),mn({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(M,D){var R=M.parser,O=M.funcName,X=D[1],se=D[0],Te;O!=="\\stackrel"?Te=rD(X):Te="mrel";var $e={type:"op",mode:X.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:O!=="\\stackrel",body:ii(X)},nt={type:"supsub",mode:se.mode,base:$e,sup:O==="\\underset"?null:se,sub:O==="\\underset"?se:null};return{type:"mclass",mode:R.mode,mclass:Te,body:[nt],isCharacterBox:g.isCharacterBox(nt)}},htmlBuilder:EU,mathmlBuilder:MU});var IU=function(M,D){var R=M.font,O=D.withFont(R);return yi(M.body,O)},DU=function(M,D){var R=M.font,O=D.withFont(R);return Ci(M.body,O)},PU={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};mn({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:function(M,D){var R=M.parser,O=M.funcName,X=qr(D[0]),se=O;return se in PU&&(se=PU[se]),{type:"font",mode:R.mode,font:se.slice(1),body:X}},htmlBuilder:IU,mathmlBuilder:DU}),mn({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:function(M,D){var R=M.parser,O=D[0],X=g.isCharacterBox(O);return{type:"mclass",mode:R.mode,mclass:rD(O),body:[{type:"font",mode:R.mode,font:"boldsymbol",body:O}],isCharacterBox:X}}}),mn({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:function(M,D){var R=M.parser,O=M.funcName,X=M.breakOnTokenText,se=R.mode,Te=R.parseExpression(!0,X),$e="math"+O.slice(1);return{type:"font",mode:se,font:$e,body:{type:"ordgroup",mode:R.mode,body:Te}}},htmlBuilder:IU,mathmlBuilder:DU});var RU=function(M,D){var R=D;return M==="display"?R=R.id>=B.SCRIPT.id?R.text():B.DISPLAY:M==="text"&&R.size===B.DISPLAY.size?R=B.TEXT:M==="script"?R=B.SCRIPT:M==="scriptscript"&&(R=B.SCRIPTSCRIPT),R},iD=function(M,D){var R=RU(M.size,D.style),O=R.fracNum(),X=R.fracDen(),se;se=D.havingStyle(O);var Te=yi(M.numer,se,D);if(M.continued){var $e=8.5/D.fontMetrics().ptPerEm,nt=3.5/D.fontMetrics().ptPerEm;Te.height=Te.height<$e?$e:Te.height,Te.depth=Te.depth<nt?nt:Te.depth}se=D.havingStyle(X);var bt=yi(M.denom,se,D),Gt,nn,dn;M.hasBarLine?(M.barSize?(nn=ot(M.barSize,D),Gt=vt.makeLineSpan("frac-line",D,nn)):Gt=vt.makeLineSpan("frac-line",D),nn=Gt.height,dn=Gt.height):(Gt=null,nn=0,dn=D.fontMetrics().defaultRuleThickness);var fn,Pn,Nn;R.size===B.DISPLAY.size||M.size==="display"?(fn=D.fontMetrics().num1,nn>0?Pn=3*dn:Pn=7*dn,Nn=D.fontMetrics().denom1):(nn>0?(fn=D.fontMetrics().num2,Pn=dn):(fn=D.fontMetrics().num3,Pn=3*dn),Nn=D.fontMetrics().denom2);var sr;if(Gt){var wr=D.fontMetrics().axisHeight;fn-Te.depth-(wr+.5*nn)<Pn&&(fn+=Pn-(fn-Te.depth-(wr+.5*nn))),wr-.5*nn-(bt.height-Nn)<Pn&&(Nn+=Pn-(wr-.5*nn-(bt.height-Nn)));var Ei=-(wr-.5*nn);sr=vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:bt,shift:Nn},{type:"elem",elem:Gt,shift:Ei},{type:"elem",elem:Te,shift:-fn}]},D)}else{var mr=fn-Te.depth-(bt.height-Nn);mr<Pn&&(fn+=.5*(Pn-mr),Nn+=.5*(Pn-mr)),sr=vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:bt,shift:Nn},{type:"elem",elem:Te,shift:-fn}]},D)}se=D.havingStyle(R),sr.height*=se.sizeMultiplier/D.sizeMultiplier,sr.depth*=se.sizeMultiplier/D.sizeMultiplier;var Hi;R.size===B.DISPLAY.size?Hi=D.fontMetrics().delim1:R.size===B.SCRIPTSCRIPT.size?Hi=D.havingStyle(B.SCRIPT).fontMetrics().delim2:Hi=D.fontMetrics().delim2;var va,Ni;return M.leftDelim==null?va=vm(D,["mopen"]):va=Ln.customSizedDelim(M.leftDelim,Hi,!0,D.havingStyle(R),M.mode,["mopen"]),M.continued?Ni=vt.makeSpan([]):M.rightDelim==null?Ni=vm(D,["mclose"]):Ni=Ln.customSizedDelim(M.rightDelim,Hi,!0,D.havingStyle(R),M.mode,["mclose"]),vt.makeSpan(["mord"].concat(se.sizingClasses(D)),[va,vt.makeSpan(["mfrac"],[sr]),Ni],D)},aD=function(M,D){var R=new xn.MathNode("mfrac",[Ci(M.numer,D),Ci(M.denom,D)]);if(!M.hasBarLine)R.setAttribute("linethickness","0px");else if(M.barSize){var O=ot(M.barSize,D);R.setAttribute("linethickness",G(O))}var X=RU(M.size,D.style);if(X.size!==D.style.size){R=new xn.MathNode("mstyle",[R]);var se=X.size===B.DISPLAY.size?"true":"false";R.setAttribute("displaystyle",se),R.setAttribute("scriptlevel","0")}if(M.leftDelim!=null||M.rightDelim!=null){var Te=[];if(M.leftDelim!=null){var $e=new xn.MathNode("mo",[new xn.TextNode(M.leftDelim.replace("\\",""))]);$e.setAttribute("fence","true"),Te.push($e)}if(Te.push(R),M.rightDelim!=null){var nt=new xn.MathNode("mo",[new xn.TextNode(M.rightDelim.replace("\\",""))]);nt.setAttribute("fence","true"),Te.push(nt)}return Vv(Te)}return R};mn({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:function(M,D){var R=M.parser,O=M.funcName,X=D[0],se=D[1],Te,$e=null,nt=null,bt="auto";switch(O){case"\\dfrac":case"\\frac":case"\\tfrac":Te=!0;break;case"\\\\atopfrac":Te=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":Te=!1,$e="(",nt=")";break;case"\\\\bracefrac":Te=!1,$e="\\{",nt="\\}";break;case"\\\\brackfrac":Te=!1,$e="[",nt="]";break;default:throw new Error("Unrecognized genfrac command")}switch(O){case"\\dfrac":case"\\dbinom":bt="display";break;case"\\tfrac":case"\\tbinom":bt="text";break}return{type:"genfrac",mode:R.mode,continued:!1,numer:X,denom:se,hasBarLine:Te,leftDelim:$e,rightDelim:nt,size:bt,barSize:null}},htmlBuilder:iD,mathmlBuilder:aD}),mn({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:function(M,D){var R=M.parser;M.funcName;var O=D[0],X=D[1];return{type:"genfrac",mode:R.mode,continued:!0,numer:O,denom:X,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),mn({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(M){var D=M.parser,R=M.funcName,O=M.token,X;switch(R){case"\\over":X="\\frac";break;case"\\choose":X="\\binom";break;case"\\atop":X="\\\\atopfrac";break;case"\\brace":X="\\\\bracefrac";break;case"\\brack":X="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:D.mode,replaceWith:X,token:O}}});var kU=["display","text","script","scriptscript"],LU=function(M){var D=null;return M.length>0&&(D=M,D=D==="."?null:D),D};mn({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler:function(M,D){var R=M.parser,O=D[4],X=D[5],se=qr(D[0]),Te=se.type==="atom"&&se.family==="open"?LU(se.text):null,$e=qr(D[1]),nt=$e.type==="atom"&&$e.family==="close"?LU($e.text):null,bt=Gr(D[2],"size"),Gt,nn=null;bt.isBlank?Gt=!0:(nn=bt.value,Gt=nn.number>0);var dn="auto",fn=D[3];if(fn.type==="ordgroup"){if(fn.body.length>0){var Pn=Gr(fn.body[0],"textord");dn=kU[Number(Pn.text)]}}else fn=Gr(fn,"textord"),dn=kU[Number(fn.text)];return{type:"genfrac",mode:R.mode,numer:O,denom:X,continued:!1,hasBarLine:Gt,barSize:nn,leftDelim:Te,rightDelim:nt,size:dn}},htmlBuilder:iD,mathmlBuilder:aD}),mn({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(M,D){var R=M.parser;M.funcName;var O=M.token;return{type:"infix",mode:R.mode,replaceWith:"\\\\abovefrac",size:Gr(D[0],"size").value,token:O}}}),mn({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(M,D){var R=M.parser;M.funcName;var O=D[0],X=m(Gr(D[1],"infix").size),se=D[2],Te=X.number>0;return{type:"genfrac",mode:R.mode,numer:O,denom:se,continued:!1,hasBarLine:Te,barSize:X,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:iD,mathmlBuilder:aD});var OU=function(M,D){var R=D.style,O,X;M.type==="supsub"?(O=M.sup?yi(M.sup,D.havingStyle(R.sup()),D):yi(M.sub,D.havingStyle(R.sub()),D),X=Gr(M.base,"horizBrace")):X=Gr(M,"horizBrace");var se=yi(X.base,D.havingBaseStyle(B.DISPLAY)),Te=Mo.svgSpan(X,D),$e;if(X.isOver?($e=vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:se},{type:"kern",size:.1},{type:"elem",elem:Te}]},D),$e.children[0].children[0].children[1].classes.push("svg-align")):($e=vt.makeVList({positionType:"bottom",positionData:se.depth+.1+Te.height,children:[{type:"elem",elem:Te},{type:"kern",size:.1},{type:"elem",elem:se}]},D),$e.children[0].children[0].children[0].classes.push("svg-align")),O){var nt=vt.makeSpan(["mord",X.isOver?"mover":"munder"],[$e],D);X.isOver?$e=vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:nt},{type:"kern",size:.2},{type:"elem",elem:O}]},D):$e=vt.makeVList({positionType:"bottom",positionData:nt.depth+.2+O.height+O.depth,children:[{type:"elem",elem:O},{type:"kern",size:.2},{type:"elem",elem:nt}]},D)}return vt.makeSpan(["mord",X.isOver?"mover":"munder"],[$e],D)},khe=function(M,D){var R=Mo.mathMLnode(M.label);return new xn.MathNode(M.isOver?"mover":"munder",[Ci(M.base,D),R])};mn({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(M,D){var R=M.parser,O=M.funcName;return{type:"horizBrace",mode:R.mode,label:O,isOver:/^\\over/.test(O),base:D[0]}},htmlBuilder:OU,mathmlBuilder:khe}),mn({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(M,D){var R=M.parser,O=D[1],X=Gr(D[0],"url").url;return R.settings.isTrusted({command:"\\href",url:X})?{type:"href",mode:R.mode,href:X,body:ii(O)}:R.formatUnsupportedCmd("\\href")},htmlBuilder:function(M,D){var R=is(M.body,D,!1);return vt.makeAnchor(M.href,[],R,D)},mathmlBuilder:function(M,D){var R=ic(M.body,D);return R instanceof rl||(R=new rl("mrow",[R])),R.setAttribute("href",M.href),R}}),mn({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(M,D){var R=M.parser,O=Gr(D[0],"url").url;if(!R.settings.isTrusted({command:"\\url",url:O}))return R.formatUnsupportedCmd("\\url");for(var X=[],se=0;se<O.length;se++){var Te=O[se];Te==="~"&&(Te="\\textasciitilde"),X.push({type:"textord",mode:"text",text:Te})}var $e={type:"text",mode:R.mode,font:"\\texttt",body:X};return{type:"href",mode:R.mode,href:O,body:ii($e)}}}),mn({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler:function(M,D){var R=M.parser;return{type:"hbox",mode:R.mode,body:ii(D[0])}},htmlBuilder:function(M,D){var R=is(M.body,D,!1);return vt.makeFragment(R)},mathmlBuilder:function(M,D){return new xn.MathNode("mrow",to(M.body,D))}}),mn({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:function(M,D){var R=M.parser,O=M.funcName;M.token;var X=Gr(D[0],"raw").string,se=D[1];R.settings.strict&&R.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var Te,$e={};switch(O){case"\\htmlClass":$e.class=X,Te={command:"\\htmlClass",class:X};break;case"\\htmlId":$e.id=X,Te={command:"\\htmlId",id:X};break;case"\\htmlStyle":$e.style=X,Te={command:"\\htmlStyle",style:X};break;case"\\htmlData":{for(var nt=X.split(","),bt=0;bt<nt.length;bt++){var Gt=nt[bt].split("=");if(Gt.length!==2)throw new a("Error parsing key-value for \\htmlData");$e["data-"+Gt[0].trim()]=Gt[1].trim()}Te={command:"\\htmlData",attributes:$e};break}default:throw new Error("Unrecognized html command")}return R.settings.isTrusted(Te)?{type:"html",mode:R.mode,attributes:$e,body:ii(se)}:R.formatUnsupportedCmd(O)},htmlBuilder:function(M,D){var R=is(M.body,D,!1),O=["enclosing"];M.attributes.class&&O.push.apply(O,M.attributes.class.trim().split(/\s+/));var X=vt.makeSpan(O,R,D);for(var se in M.attributes)se!=="class"&&M.attributes.hasOwnProperty(se)&&X.setAttribute(se,M.attributes[se]);return X},mathmlBuilder:function(M,D){return ic(M.body,D)}}),mn({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(M,D){var R=M.parser;return{type:"htmlmathml",mode:R.mode,html:ii(D[0]),mathml:ii(D[1])}},htmlBuilder:function(M,D){var R=is(M.html,D,!1);return vt.makeFragment(R)},mathmlBuilder:function(M,D){return ic(M.mathml,D)}});var sD=function(M){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(M))return{number:+M,unit:"bp"};var D=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(M);if(!D)throw new a("Invalid size: '"+M+"' in \\includegraphics");var R={number:+(D[1]+D[2]),unit:D[3]};if(!Tt(R))throw new a("Invalid unit: '"+R.unit+"' in \\includegraphics.");return R};mn({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:function(M,D,R){var O=M.parser,X={number:0,unit:"em"},se={number:.9,unit:"em"},Te={number:0,unit:"em"},$e="";if(R[0])for(var nt=Gr(R[0],"raw").string,bt=nt.split(","),Gt=0;Gt<bt.length;Gt++){var nn=bt[Gt].split("=");if(nn.length===2){var dn=nn[1].trim();switch(nn[0].trim()){case"alt":$e=dn;break;case"width":X=sD(dn);break;case"height":se=sD(dn);break;case"totalheight":Te=sD(dn);break;default:throw new a("Invalid key: '"+nn[0]+"' in \\includegraphics.")}}}var fn=Gr(D[0],"url").url;return $e===""&&($e=fn,$e=$e.replace(/^.*[\\/]/,""),$e=$e.substring(0,$e.lastIndexOf("."))),O.settings.isTrusted({command:"\\includegraphics",url:fn})?{type:"includegraphics",mode:O.mode,alt:$e,width:X,height:se,totalheight:Te,src:fn}:O.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:function(M,D){var R=ot(M.height,D),O=0;M.totalheight.number>0&&(O=ot(M.totalheight,D)-R);var X=0;M.width.number>0&&(X=ot(M.width,D));var se={height:G(R+O)};X>0&&(se.width=G(X)),O>0&&(se.verticalAlign=G(-O));var Te=new Pe(M.src,M.alt,se);return Te.height=R,Te.depth=O,Te},mathmlBuilder:function(M,D){var R=new xn.MathNode("mglyph",[]);R.setAttribute("alt",M.alt);var O=ot(M.height,D),X=0;if(M.totalheight.number>0&&(X=ot(M.totalheight,D)-O,R.setAttribute("valign",G(-X))),R.setAttribute("height",G(O+X)),M.width.number>0){var se=ot(M.width,D);R.setAttribute("width",G(se))}return R.setAttribute("src",M.src),R}}),mn({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler:function(M,D){var R=M.parser,O=M.funcName,X=Gr(D[0],"size");if(R.settings.strict){var se=O[1]==="m",Te=X.value.unit==="mu";se?(Te||R.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+O+" supports only mu units, "+("not "+X.value.unit+" units")),R.mode!=="math"&&R.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+O+" works only in math mode")):Te&&R.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+O+" doesn't support mu units")}return{type:"kern",mode:R.mode,dimension:X.value}},htmlBuilder:function(M,D){return vt.makeGlue(M.dimension,D)},mathmlBuilder:function(M,D){var R=ot(M.dimension,D);return new xn.SpaceNode(R)}}),mn({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){var R=M.parser,O=M.funcName,X=D[0];return{type:"lap",mode:R.mode,alignment:O.slice(5),body:X}},htmlBuilder:function(M,D){var R;M.alignment==="clap"?(R=vt.makeSpan([],[yi(M.body,D)]),R=vt.makeSpan(["inner"],[R],D)):R=vt.makeSpan(["inner"],[yi(M.body,D)]);var O=vt.makeSpan(["fix"],[]),X=vt.makeSpan([M.alignment],[R,O],D),se=vt.makeSpan(["strut"]);return se.style.height=G(X.height+X.depth),X.depth&&(se.style.verticalAlign=G(-X.depth)),X.children.unshift(se),X=vt.makeSpan(["thinbox"],[X],D),vt.makeSpan(["mord","vbox"],[X],D)},mathmlBuilder:function(M,D){var R=new xn.MathNode("mpadded",[Ci(M.body,D)]);if(M.alignment!=="rlap"){var O=M.alignment==="llap"?"-1":"-0.5";R.setAttribute("lspace",O+"width")}return R.setAttribute("width","0px"),R}}),mn({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(M,D){var R=M.funcName,O=M.parser,X=O.mode;O.switchMode("math");var se=R==="\\("?"\\)":"$",Te=O.parseExpression(!1,se);return O.expect(se),O.switchMode(X),{type:"styling",mode:O.mode,style:"text",body:Te}}}),mn({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(M,D){throw new a("Mismatched "+M.funcName)}});var NU=function(M,D){switch(D.style.size){case B.DISPLAY.size:return M.display;case B.TEXT.size:return M.text;case B.SCRIPT.size:return M.script;case B.SCRIPTSCRIPT.size:return M.scriptscript;default:return M.text}};mn({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:function(M,D){var R=M.parser;return{type:"mathchoice",mode:R.mode,display:ii(D[0]),text:ii(D[1]),script:ii(D[2]),scriptscript:ii(D[3])}},htmlBuilder:function(M,D){var R=NU(M,D),O=is(R,D,!1);return vt.makeFragment(O)},mathmlBuilder:function(M,D){var R=NU(M,D);return ic(R,D)}});var BU=function(M,D,R,O,X,se,Te){M=vt.makeSpan([],[M]);var $e=R&&g.isCharacterBox(R),nt,bt;if(D){var Gt=yi(D,O.havingStyle(X.sup()),O);bt={elem:Gt,kern:Math.max(O.fontMetrics().bigOpSpacing1,O.fontMetrics().bigOpSpacing3-Gt.depth)}}if(R){var nn=yi(R,O.havingStyle(X.sub()),O);nt={elem:nn,kern:Math.max(O.fontMetrics().bigOpSpacing2,O.fontMetrics().bigOpSpacing4-nn.height)}}var dn;if(bt&&nt){var fn=O.fontMetrics().bigOpSpacing5+nt.elem.height+nt.elem.depth+nt.kern+M.depth+Te;dn=vt.makeVList({positionType:"bottom",positionData:fn,children:[{type:"kern",size:O.fontMetrics().bigOpSpacing5},{type:"elem",elem:nt.elem,marginLeft:G(-se)},{type:"kern",size:nt.kern},{type:"elem",elem:M},{type:"kern",size:bt.kern},{type:"elem",elem:bt.elem,marginLeft:G(se)},{type:"kern",size:O.fontMetrics().bigOpSpacing5}]},O)}else if(nt){var Pn=M.height-Te;dn=vt.makeVList({positionType:"top",positionData:Pn,children:[{type:"kern",size:O.fontMetrics().bigOpSpacing5},{type:"elem",elem:nt.elem,marginLeft:G(-se)},{type:"kern",size:nt.kern},{type:"elem",elem:M}]},O)}else if(bt){var Nn=M.depth+Te;dn=vt.makeVList({positionType:"bottom",positionData:Nn,children:[{type:"elem",elem:M},{type:"kern",size:bt.kern},{type:"elem",elem:bt.elem,marginLeft:G(se)},{type:"kern",size:O.fontMetrics().bigOpSpacing5}]},O)}else return M;var sr=[dn];if(nt&&se!==0&&!$e){var mr=vt.makeSpan(["mspace"],[],O);mr.style.marginRight=G(se),sr.unshift(mr)}return vt.makeSpan(["mop","op-limits"],sr,O)},FU=["\\smallint"],Qv=function(M,D){var R,O,X=!1,se;M.type==="supsub"?(R=M.sup,O=M.sub,se=Gr(M.base,"op"),X=!0):se=Gr(M,"op");var Te=D.style,$e=!1;Te.size===B.DISPLAY.size&&se.symbol&&!g.contains(FU,se.name)&&($e=!0);var nt;if(se.symbol){var bt=$e?"Size2-Regular":"Size1-Regular",Gt="";if((se.name==="\\oiint"||se.name==="\\oiiint")&&(Gt=se.name.substr(1),se.name=Gt==="oiint"?"\\iint":"\\iiint"),nt=vt.makeSymbol(se.name,bt,"math",D,["mop","op-symbol",$e?"large-op":"small-op"]),Gt.length>0){var nn=nt.italic,dn=vt.staticSvg(Gt+"Size"+($e?"2":"1"),D);nt=vt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:nt,shift:0},{type:"elem",elem:dn,shift:$e?.08:0}]},D),se.name="\\"+Gt,nt.classes.unshift("mop"),nt.italic=nn}}else if(se.body){var fn=is(se.body,D,!0);fn.length===1&&fn[0]instanceof dt?(nt=fn[0],nt.classes[0]="mop"):nt=vt.makeSpan(["mop"],fn,D)}else{for(var Pn=[],Nn=1;Nn<se.name.length;Nn++)Pn.push(vt.mathsym(se.name[Nn],se.mode,D));nt=vt.makeSpan(["mop"],Pn,D)}var sr=0,mr=0;return(nt instanceof dt||se.name==="\\oiint"||se.name==="\\oiiint")&&!se.suppressBaseShift&&(sr=(nt.height-nt.depth)/2-D.fontMetrics().axisHeight,mr=nt.italic),X?BU(nt,R,O,D,Te,mr,sr):(sr&&(nt.style.position="relative",nt.style.top=G(sr)),nt)},Ab=function(M,D){var R;if(M.symbol)R=new rl("mo",[il(M.name,M.mode)]),g.contains(FU,M.name)&&R.setAttribute("largeop","false");else if(M.body)R=new rl("mo",to(M.body,D));else{R=new rl("mi",[new bh(M.name.slice(1))]);var O=new rl("mo",[il("⁡","text")]);M.parentIsSupSub?R=new rl("mrow",[R,O]):R=Jw([R,O])}return R},Lhe={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};mn({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:function(M,D){var R=M.parser,O=M.funcName,X=O;return X.length===1&&(X=Lhe[X]),{type:"op",mode:R.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:X}},htmlBuilder:Qv,mathmlBuilder:Ab}),mn({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:function(M,D){var R=M.parser,O=D[0];return{type:"op",mode:R.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ii(O)}},htmlBuilder:Qv,mathmlBuilder:Ab});var Ohe={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};mn({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(M){var D=M.parser,R=M.funcName;return{type:"op",mode:D.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:R}},htmlBuilder:Qv,mathmlBuilder:Ab}),mn({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(M){var D=M.parser,R=M.funcName;return{type:"op",mode:D.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:R}},htmlBuilder:Qv,mathmlBuilder:Ab}),mn({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler:function(M){var D=M.parser,R=M.funcName,O=R;return O.length===1&&(O=Ohe[O]),{type:"op",mode:D.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:O}},htmlBuilder:Qv,mathmlBuilder:Ab});var UU={};function Ge(oe,M){UU[oe]=M}var zU=function(M,D){var R,O,X=!1,se;M.type==="supsub"?(R=M.sup,O=M.sub,se=Gr(M.base,"operatorname"),X=!0):se=Gr(M,"operatorname");var Te;if(se.body.length>0){for(var $e=se.body.map(function(nn){var dn=nn.text;return typeof dn=="string"?{type:"textord",mode:nn.mode,text:dn}:nn}),nt=is($e,D.withFont("mathrm"),!0),bt=0;bt<nt.length;bt++){var Gt=nt[bt];Gt instanceof dt&&(Gt.text=Gt.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}Te=vt.makeSpan(["mop"],nt,D)}else Te=vt.makeSpan(["mop"],[],D);return X?BU(Te,R,O,D,D.style,0,0):Te},Nhe=function(M,D){for(var R=to(M.body,D.withFont("mathrm")),O=!0,X=0;X<R.length;X++){var se=R[X];if(!(se instanceof xn.SpaceNode))if(se instanceof xn.MathNode)switch(se.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var Te=se.children[0];se.children.length===1&&Te instanceof xn.TextNode?Te.text=Te.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):O=!1;break}default:O=!1}else O=!1}if(O){var $e=R.map(function(Gt){return Gt.toText()}).join("");R=[new xn.TextNode($e)]}var nt=new xn.MathNode("mi",R);nt.setAttribute("mathvariant","normal");var bt=new xn.MathNode("mo",[il("⁡","text")]);return M.parentIsSupSub?new xn.MathNode("mrow",[nt,bt]):xn.newDocumentFragment([nt,bt])};mn({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:function(M,D){var R=M.parser,O=M.funcName,X=D[0];return{type:"operatorname",mode:R.mode,body:ii(X),alwaysHandleSupSub:O==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:zU,mathmlBuilder:Nhe}),Ge("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),Or({type:"ordgroup",htmlBuilder:function(M,D){return M.semisimple?vt.makeFragment(is(M.body,D,!1)):vt.makeSpan(["mord"],is(M.body,D,!0),D)},mathmlBuilder:function(M,D){return ic(M.body,D,!0)}}),mn({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(M,D){var R=M.parser,O=D[0];return{type:"overline",mode:R.mode,body:O}},htmlBuilder:function(M,D){var R=yi(M.body,D.havingCrampedStyle()),O=vt.makeLineSpan("overline-line",D),X=D.fontMetrics().defaultRuleThickness,se=vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:R},{type:"kern",size:3*X},{type:"elem",elem:O},{type:"kern",size:X}]},D);return vt.makeSpan(["mord","overline"],[se],D)},mathmlBuilder:function(M,D){var R=new xn.MathNode("mo",[new xn.TextNode("‾")]);R.setAttribute("stretchy","true");var O=new xn.MathNode("mover",[Ci(M.body,D),R]);return O.setAttribute("accent","true"),O}}),mn({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){var R=M.parser,O=D[0];return{type:"phantom",mode:R.mode,body:ii(O)}},htmlBuilder:function(M,D){var R=is(M.body,D.withPhantom(),!1);return vt.makeFragment(R)},mathmlBuilder:function(M,D){var R=to(M.body,D);return new xn.MathNode("mphantom",R)}}),mn({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){var R=M.parser,O=D[0];return{type:"hphantom",mode:R.mode,body:O}},htmlBuilder:function(M,D){var R=vt.makeSpan([],[yi(M.body,D.withPhantom())]);if(R.height=0,R.depth=0,R.children)for(var O=0;O<R.children.length;O++)R.children[O].height=0,R.children[O].depth=0;return R=vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:R}]},D),vt.makeSpan(["mord"],[R],D)},mathmlBuilder:function(M,D){var R=to(ii(M.body),D),O=new xn.MathNode("mphantom",R),X=new xn.MathNode("mpadded",[O]);return X.setAttribute("height","0px"),X.setAttribute("depth","0px"),X}}),mn({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){var R=M.parser,O=D[0];return{type:"vphantom",mode:R.mode,body:O}},htmlBuilder:function(M,D){var R=vt.makeSpan(["inner"],[yi(M.body,D.withPhantom())]),O=vt.makeSpan(["fix"],[]);return vt.makeSpan(["mord","rlap"],[R,O],D)},mathmlBuilder:function(M,D){var R=to(ii(M.body),D),O=new xn.MathNode("mphantom",R),X=new xn.MathNode("mpadded",[O]);return X.setAttribute("width","0px"),X}}),mn({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler:function(M,D){var R=M.parser,O=Gr(D[0],"size").value,X=D[1];return{type:"raisebox",mode:R.mode,dy:O,body:X}},htmlBuilder:function(M,D){var R=yi(M.body,D),O=ot(M.dy,D);return vt.makeVList({positionType:"shift",positionData:-O,children:[{type:"elem",elem:R}]},D)},mathmlBuilder:function(M,D){var R=new xn.MathNode("mpadded",[Ci(M.body,D)]),O=M.dy.number+M.dy.unit;return R.setAttribute("voffset",O),R}}),mn({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(M,D,R){var O=M.parser,X=R[0],se=Gr(D[0],"size"),Te=Gr(D[1],"size");return{type:"rule",mode:O.mode,shift:X&&Gr(X,"size").value,width:se.value,height:Te.value}},htmlBuilder:function(M,D){var R=vt.makeSpan(["mord","rule"],[],D),O=ot(M.width,D),X=ot(M.height,D),se=M.shift?ot(M.shift,D):0;return R.style.borderRightWidth=G(O),R.style.borderTopWidth=G(X),R.style.bottom=G(se),R.width=O,R.height=X+se,R.depth=-se,R.maxFontSize=X*1.125*D.sizeMultiplier,R},mathmlBuilder:function(M,D){var R=ot(M.width,D),O=ot(M.height,D),X=M.shift?ot(M.shift,D):0,se=D.color&&D.getColor()||"black",Te=new xn.MathNode("mspace");Te.setAttribute("mathbackground",se),Te.setAttribute("width",G(R)),Te.setAttribute("height",G(O));var $e=new xn.MathNode("mpadded",[Te]);return X>=0?$e.setAttribute("height",G(X)):($e.setAttribute("height",G(X)),$e.setAttribute("depth",G(-X))),$e.setAttribute("voffset",G(X)),$e}});function HU(oe,M,D){for(var R=is(oe,M,!1),O=M.sizeMultiplier/D.sizeMultiplier,X=0;X<R.length;X++){var se=R[X].classes.indexOf("sizing");se<0?Array.prototype.push.apply(R[X].classes,M.sizingClasses(D)):R[X].classes[se+1]==="reset-size"+M.size&&(R[X].classes[se+1]="reset-size"+D.size),R[X].height*=O,R[X].depth*=O}return vt.makeFragment(R)}var VU=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Bhe=function(M,D){var R=D.havingSize(M.size);return HU(M.body,R,D)};mn({type:"sizing",names:VU,props:{numArgs:0,allowedInText:!0},handler:function(M,D){var R=M.breakOnTokenText,O=M.funcName,X=M.parser,se=X.parseExpression(!1,R);return{type:"sizing",mode:X.mode,size:VU.indexOf(O)+1,body:se}},htmlBuilder:Bhe,mathmlBuilder:function(M,D){var R=D.havingSize(M.size),O=to(M.body,R),X=new xn.MathNode("mstyle",O);return X.setAttribute("mathsize",G(R.sizeMultiplier)),X}}),mn({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(M,D,R){var O=M.parser,X=!1,se=!1,Te=R[0]&&Gr(R[0],"ordgroup");if(Te)for(var $e="",nt=0;nt<Te.body.length;++nt){var bt=Te.body[nt];if($e=bt.text,$e==="t")X=!0;else if($e==="b")se=!0;else{X=!1,se=!1;break}}else X=!0,se=!0;var Gt=D[0];return{type:"smash",mode:O.mode,body:Gt,smashHeight:X,smashDepth:se}},htmlBuilder:function(M,D){var R=vt.makeSpan([],[yi(M.body,D)]);if(!M.smashHeight&&!M.smashDepth)return R;if(M.smashHeight&&(R.height=0,R.children))for(var O=0;O<R.children.length;O++)R.children[O].height=0;if(M.smashDepth&&(R.depth=0,R.children))for(var X=0;X<R.children.length;X++)R.children[X].depth=0;var se=vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:R}]},D);return vt.makeSpan(["mord"],[se],D)},mathmlBuilder:function(M,D){var R=new xn.MathNode("mpadded",[Ci(M.body,D)]);return M.smashHeight&&R.setAttribute("height","0px"),M.smashDepth&&R.setAttribute("depth","0px"),R}}),mn({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(M,D,R){var O=M.parser,X=R[0],se=D[0];return{type:"sqrt",mode:O.mode,body:se,index:X}},htmlBuilder:function(M,D){var R=yi(M.body,D.havingCrampedStyle());R.height===0&&(R.height=D.fontMetrics().xHeight),R=vt.wrapFragment(R,D);var O=D.fontMetrics(),X=O.defaultRuleThickness,se=X;D.style.id<B.TEXT.id&&(se=D.fontMetrics().xHeight);var Te=X+se/4,$e=R.height+R.depth+Te+X,nt=Ln.sqrtImage($e,D),bt=nt.span,Gt=nt.ruleWidth,nn=nt.advanceWidth,dn=bt.height-Gt;dn>R.height+R.depth+Te&&(Te=(Te+dn-R.height-R.depth)/2);var fn=bt.height-R.height-Te-Gt;R.style.paddingLeft=G(nn);var Pn=vt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:R,wrapperClasses:["svg-align"]},{type:"kern",size:-(R.height+fn)},{type:"elem",elem:bt},{type:"kern",size:Gt}]},D);if(M.index){var Nn=D.havingStyle(B.SCRIPTSCRIPT),sr=yi(M.index,Nn,D),mr=.6*(Pn.height-Pn.depth),wr=vt.makeVList({positionType:"shift",positionData:-mr,children:[{type:"elem",elem:sr}]},D),Ei=vt.makeSpan(["root"],[wr]);return vt.makeSpan(["mord","sqrt"],[Ei,Pn],D)}else return vt.makeSpan(["mord","sqrt"],[Pn],D)},mathmlBuilder:function(M,D){var R=M.body,O=M.index;return O?new xn.MathNode("mroot",[Ci(R,D),Ci(O,D)]):new xn.MathNode("msqrt",[Ci(R,D)])}});var $U={display:B.DISPLAY,text:B.TEXT,script:B.SCRIPT,scriptscript:B.SCRIPTSCRIPT};mn({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(M,D){var R=M.breakOnTokenText,O=M.funcName,X=M.parser,se=X.parseExpression(!0,R),Te=O.slice(1,O.length-5);return{type:"styling",mode:X.mode,style:Te,body:se}},htmlBuilder:function(M,D){var R=$U[M.style],O=D.havingStyle(R).withFont("");return HU(M.body,O,D)},mathmlBuilder:function(M,D){var R=$U[M.style],O=D.havingStyle(R),X=to(M.body,O),se=new xn.MathNode("mstyle",X),Te={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},$e=Te[M.style];return se.setAttribute("scriptlevel",$e[0]),se.setAttribute("displaystyle",$e[1]),se}});var Fhe=function(M,D){var R=M.base;if(R)if(R.type==="op"){var O=R.limits&&(D.style.size===B.DISPLAY.size||R.alwaysHandleSupSub);return O?Qv:null}else if(R.type==="operatorname"){var X=R.alwaysHandleSupSub&&(D.style.size===B.DISPLAY.size||R.limits);return X?zU:null}else{if(R.type==="accent")return g.isCharacterBox(R.base)?Wv:null;if(R.type==="horizBrace"){var se=!M.sub;return se===R.isOver?OU:null}else return null}else return null};Or({type:"supsub",htmlBuilder:function(M,D){var R=Fhe(M,D);if(R)return R(M,D);var O=M.base,X=M.sup,se=M.sub,Te=yi(O,D),$e,nt,bt=D.fontMetrics(),Gt=0,nn=0,dn=O&&g.isCharacterBox(O);if(X){var fn=D.havingStyle(D.style.sup());$e=yi(X,fn,D),dn||(Gt=Te.height-fn.fontMetrics().supDrop*fn.sizeMultiplier/D.sizeMultiplier)}if(se){var Pn=D.havingStyle(D.style.sub());nt=yi(se,Pn,D),dn||(nn=Te.depth+Pn.fontMetrics().subDrop*Pn.sizeMultiplier/D.sizeMultiplier)}var Nn;D.style===B.DISPLAY?Nn=bt.sup1:D.style.cramped?Nn=bt.sup3:Nn=bt.sup2;var sr=D.sizeMultiplier,mr=G(.5/bt.ptPerEm/sr),wr=null;if(nt){var Ei=M.base&&M.base.type==="op"&&M.base.name&&(M.base.name==="\\oiint"||M.base.name==="\\oiiint");(Te instanceof dt||Ei)&&(wr=G(-Te.italic))}var Hi;if($e&&nt){Gt=Math.max(Gt,Nn,$e.depth+.25*bt.xHeight),nn=Math.max(nn,bt.sub2);var va=bt.defaultRuleThickness,Ni=4*va;if(Gt-$e.depth-(nt.height-nn)<Ni){nn=Ni-(Gt-$e.depth)+nt.height;var Vi=.8*bt.xHeight-(Gt-$e.depth);Vi>0&&(Gt+=Vi,nn-=Vi)}var Na=[{type:"elem",elem:nt,shift:nn,marginRight:mr,marginLeft:wr},{type:"elem",elem:$e,shift:-Gt,marginRight:mr}];Hi=vt.makeVList({positionType:"individualShift",children:Na},D)}else if(nt){nn=Math.max(nn,bt.sub1,nt.height-.8*bt.xHeight);var ta=[{type:"elem",elem:nt,marginLeft:wr,marginRight:mr}];Hi=vt.makeVList({positionType:"shift",positionData:nn,children:ta},D)}else if($e)Gt=Math.max(Gt,Nn,$e.depth+.25*bt.xHeight),Hi=vt.makeVList({positionType:"shift",positionData:-Gt,children:[{type:"elem",elem:$e,marginRight:mr}]},D);else throw new Error("supsub must have either sup or sub.");var kl=rc(Te,"right")||"mord";return vt.makeSpan([kl],[Te,vt.makeSpan(["msupsub"],[Hi])],D)},mathmlBuilder:function(M,D){var R=!1,O,X;M.base&&M.base.type==="horizBrace"&&(X=!!M.sup,X===M.base.isOver&&(R=!0,O=M.base.isOver)),M.base&&(M.base.type==="op"||M.base.type==="operatorname")&&(M.base.parentIsSupSub=!0);var se=[Ci(M.base,D)];M.sub&&se.push(Ci(M.sub,D)),M.sup&&se.push(Ci(M.sup,D));var Te;if(R)Te=O?"mover":"munder";else if(M.sub)if(M.sup){var bt=M.base;bt&&bt.type==="op"&&bt.limits&&D.style===B.DISPLAY||bt&&bt.type==="operatorname"&&bt.alwaysHandleSupSub&&(D.style===B.DISPLAY||bt.limits)?Te="munderover":Te="msubsup"}else{var nt=M.base;nt&&nt.type==="op"&&nt.limits&&(D.style===B.DISPLAY||nt.alwaysHandleSupSub)||nt&&nt.type==="operatorname"&&nt.alwaysHandleSupSub&&(nt.limits||D.style===B.DISPLAY)?Te="munder":Te="msub"}else{var $e=M.base;$e&&$e.type==="op"&&$e.limits&&(D.style===B.DISPLAY||$e.alwaysHandleSupSub)||$e&&$e.type==="operatorname"&&$e.alwaysHandleSupSub&&($e.limits||D.style===B.DISPLAY)?Te="mover":Te="msup"}return new xn.MathNode(Te,se)}}),Or({type:"atom",htmlBuilder:function(M,D){return vt.mathsym(M.text,M.mode,D,["m"+M.family])},mathmlBuilder:function(M,D){var R=new xn.MathNode("mo",[il(M.text,M.mode)]);if(M.family==="bin"){var O=gb(M,D);O==="bold-italic"&&R.setAttribute("mathvariant",O)}else M.family==="punct"?R.setAttribute("separator","true"):(M.family==="open"||M.family==="close")&&R.setAttribute("stretchy","false");return R}});var GU={mi:"italic",mn:"normal",mtext:"normal"};Or({type:"mathord",htmlBuilder:function(M,D){return vt.makeOrd(M,D,"mathord")},mathmlBuilder:function(M,D){var R=new xn.MathNode("mi",[il(M.text,M.mode,D)]),O=gb(M,D)||"italic";return O!==GU[R.type]&&R.setAttribute("mathvariant",O),R}}),Or({type:"textord",htmlBuilder:function(M,D){return vt.makeOrd(M,D,"textord")},mathmlBuilder:function(M,D){var R=il(M.text,M.mode,D),O=gb(M,D)||"normal",X;return M.mode==="text"?X=new xn.MathNode("mtext",[R]):/[0-9]/.test(M.text)?X=new xn.MathNode("mn",[R]):M.text==="\\prime"?X=new xn.MathNode("mo",[R]):X=new xn.MathNode("mi",[R]),O!==GU[X.type]&&X.setAttribute("mathvariant",O),X}});var oD={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},lD={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Or({type:"spacing",htmlBuilder:function(M,D){if(lD.hasOwnProperty(M.text)){var R=lD[M.text].className||"";if(M.mode==="text"){var O=vt.makeOrd(M,D,"textord");return O.classes.push(R),O}else return vt.makeSpan(["mspace",R],[vt.mathsym(M.text,M.mode,D)],D)}else{if(oD.hasOwnProperty(M.text))return vt.makeSpan(["mspace",oD[M.text]],[],D);throw new a('Unknown type of space "'+M.text+'"')}},mathmlBuilder:function(M,D){var R;if(lD.hasOwnProperty(M.text))R=new xn.MathNode("mtext",[new xn.TextNode(" ")]);else{if(oD.hasOwnProperty(M.text))return new xn.MathNode("mspace");throw new a('Unknown type of space "'+M.text+'"')}return R}});var WU=function(){var M=new xn.MathNode("mtd",[]);return M.setAttribute("width","50%"),M};Or({type:"tag",mathmlBuilder:function(M,D){var R=new xn.MathNode("mtable",[new xn.MathNode("mtr",[WU(),new xn.MathNode("mtd",[ic(M.body,D)]),WU(),new xn.MathNode("mtd",[ic(M.tag,D)])])]);return R.setAttribute("width","100%"),R}});var qU={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},jU={"\\textbf":"textbf","\\textmd":"textmd"},Uhe={"\\textit":"textit","\\textup":"textup"},KU=function(M,D){var R=M.font;return R?qU[R]?D.withTextFontFamily(qU[R]):jU[R]?D.withTextFontWeight(jU[R]):D.withTextFontShape(Uhe[R]):D};mn({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler:function(M,D){var R=M.parser,O=M.funcName,X=D[0];return{type:"text",mode:R.mode,body:ii(X),font:O}},htmlBuilder:function(M,D){var R=KU(M,D),O=is(M.body,R,!0);return vt.makeSpan(["mord","text"],O,R)},mathmlBuilder:function(M,D){var R=KU(M,D);return ic(M.body,R)}}),mn({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){var R=M.parser;return{type:"underline",mode:R.mode,body:D[0]}},htmlBuilder:function(M,D){var R=yi(M.body,D),O=vt.makeLineSpan("underline-line",D),X=D.fontMetrics().defaultRuleThickness,se=vt.makeVList({positionType:"top",positionData:R.height,children:[{type:"kern",size:X},{type:"elem",elem:O},{type:"kern",size:3*X},{type:"elem",elem:R}]},D);return vt.makeSpan(["mord","underline"],[se],D)},mathmlBuilder:function(M,D){var R=new xn.MathNode("mo",[new xn.TextNode("‾")]);R.setAttribute("stretchy","true");var O=new xn.MathNode("munder",[Ci(M.body,D),R]);return O.setAttribute("accentunder","true"),O}}),mn({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler:function(M,D){var R=M.parser;return{type:"vcenter",mode:R.mode,body:D[0]}},htmlBuilder:function(M,D){var R=yi(M.body,D),O=D.fontMetrics().axisHeight,X=.5*(R.height-O-(R.depth+O));return vt.makeVList({positionType:"shift",positionData:X,children:[{type:"elem",elem:R}]},D)},mathmlBuilder:function(M,D){return new xn.MathNode("mpadded",[Ci(M.body,D)],["vcenter"])}}),mn({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(M,D,R){throw new a("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(M,D){for(var R=XU(M),O=[],X=D.havingStyle(D.style.text()),se=0;se<R.length;se++){var Te=R[se];Te==="~"&&(Te="\\textasciitilde"),O.push(vt.makeSymbol(Te,"Typewriter-Regular",M.mode,X,["mord","texttt"]))}return vt.makeSpan(["mord","text"].concat(X.sizingClasses(D)),vt.tryCombineChars(O),X)},mathmlBuilder:function(M,D){var R=new xn.TextNode(XU(M)),O=new xn.MathNode("mtext",[R]);return O.setAttribute("mathvariant","monospace"),O}});var XU=function(M){return M.body.replace(/ /g,M.star?"␣":" ")},zhe=_r,Th=zhe,oc=function(){function oe(M,D,R){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=M,this.start=D,this.end=R}return oe.range=function(D,R){return R?!D||!D.loc||!R.loc||D.loc.lexer!==R.loc.lexer?null:new oe(D.loc.lexer,D.loc.start,R.loc.end):D&&D.loc},oe}(),bm=function(){function oe(D,R){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=D,this.loc=R}var M=oe.prototype;return M.range=function(R,O){return new oe(O,oc.range(this,R))},oe}(),YU=`[ \r
	]`,Hhe="\\\\[a-zA-Z@]+",Vhe="\\\\[^\uD800-\uDFFF]",$he="("+Hhe+")"+YU+"*",Ghe=`\\\\(
|[ \r	]+
?)[ \r	]*`,uD="[̀-ͯ]",Whe=new RegExp(uD+"+$"),qhe="("+YU+"+)|"+(Ghe+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(uD+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(uD+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+$he)+("|"+Vhe+")"),QU=function(){function oe(D,R){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=D,this.settings=R,this.tokenRegex=new RegExp(qhe,"g"),this.catcodes={"%":14,"~":13}}var M=oe.prototype;return M.setCatcode=function(R,O){this.catcodes[R]=O},M.lex=function(){var R=this.input,O=this.tokenRegex.lastIndex;if(O===R.length)return new bm("EOF",new oc(this,O,O));var X=this.tokenRegex.exec(R);if(X===null||X.index!==O)throw new a("Unexpected character: '"+R[O]+"'",new bm(R[O],new oc(this,O,O+1)));var se=X[6]||X[3]||(X[2]?"\\ ":" ");if(this.catcodes[se]===14){var Te=R.indexOf(`
`,this.tokenRegex.lastIndex);return Te===-1?(this.tokenRegex.lastIndex=R.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=Te+1,this.lex()}return new bm(se,new oc(this,O,this.tokenRegex.lastIndex))},oe}(),jhe=function(){function oe(D,R){D===void 0&&(D={}),R===void 0&&(R={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=R,this.builtins=D,this.undefStack=[]}var M=oe.prototype;return M.beginGroup=function(){this.undefStack.push({})},M.endGroup=function(){if(this.undefStack.length===0)throw new a("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var R=this.undefStack.pop();for(var O in R)R.hasOwnProperty(O)&&(R[O]===void 0?delete this.current[O]:this.current[O]=R[O])},M.endGroups=function(){for(;this.undefStack.length>0;)this.endGroup()},M.has=function(R){return this.current.hasOwnProperty(R)||this.builtins.hasOwnProperty(R)},M.get=function(R){return this.current.hasOwnProperty(R)?this.current[R]:this.builtins[R]},M.set=function(R,O,X){if(X===void 0&&(X=!1),X){for(var se=0;se<this.undefStack.length;se++)delete this.undefStack[se][R];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][R]=O)}else{var Te=this.undefStack[this.undefStack.length-1];Te&&!Te.hasOwnProperty(R)&&(Te[R]=this.current[R])}this.current[R]=O},oe}(),Khe=UU,Xhe=Khe;Ge("\\noexpand",function(oe){var M=oe.popToken();return oe.isExpandable(M.text)&&(M.noexpand=!0,M.treatAsRelax=!0),{tokens:[M],numArgs:0}}),Ge("\\expandafter",function(oe){var M=oe.popToken();return oe.expandOnce(!0),{tokens:[M],numArgs:0}}),Ge("\\@firstoftwo",function(oe){var M=oe.consumeArgs(2);return{tokens:M[0],numArgs:0}}),Ge("\\@secondoftwo",function(oe){var M=oe.consumeArgs(2);return{tokens:M[1],numArgs:0}}),Ge("\\@ifnextchar",function(oe){var M=oe.consumeArgs(3);oe.consumeSpaces();var D=oe.future();return M[0].length===1&&M[0][0].text===D.text?{tokens:M[1],numArgs:0}:{tokens:M[2],numArgs:0}}),Ge("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Ge("\\TextOrMath",function(oe){var M=oe.consumeArgs(2);return oe.mode==="text"?{tokens:M[0],numArgs:0}:{tokens:M[1],numArgs:0}});var ZU={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Ge("\\char",function(oe){var M=oe.popToken(),D,R="";if(M.text==="'")D=8,M=oe.popToken();else if(M.text==='"')D=16,M=oe.popToken();else if(M.text==="`")if(M=oe.popToken(),M.text[0]==="\\")R=M.text.charCodeAt(1);else{if(M.text==="EOF")throw new a("\\char` missing argument");R=M.text.charCodeAt(0)}else D=10;if(D){if(R=ZU[M.text],R==null||R>=D)throw new a("Invalid base-"+D+" digit "+M.text);for(var O;(O=ZU[oe.future().text])!=null&&O<D;)R*=D,R+=O,oe.popToken()}return"\\@char{"+R+"}"});var cD=function(M,D,R){var O=M.consumeArg().tokens;if(O.length!==1)throw new a("\\newcommand's first argument must be a macro name");var X=O[0].text,se=M.isDefined(X);if(se&&!D)throw new a("\\newcommand{"+X+"} attempting to redefine "+(X+"; use \\renewcommand"));if(!se&&!R)throw new a("\\renewcommand{"+X+"} when command "+X+" does not yet exist; use \\newcommand");var Te=0;if(O=M.consumeArg().tokens,O.length===1&&O[0].text==="["){for(var $e="",nt=M.expandNextToken();nt.text!=="]"&&nt.text!=="EOF";)$e+=nt.text,nt=M.expandNextToken();if(!$e.match(/^\s*[0-9]+\s*$/))throw new a("Invalid number of arguments: "+$e);Te=parseInt($e),O=M.consumeArg().tokens}return M.macros.set(X,{tokens:O,numArgs:Te}),""};Ge("\\newcommand",function(oe){return cD(oe,!1,!0)}),Ge("\\renewcommand",function(oe){return cD(oe,!0,!1)}),Ge("\\providecommand",function(oe){return cD(oe,!0,!0)}),Ge("\\message",function(oe){var M=oe.consumeArgs(1)[0];return console.log(M.reverse().map(function(D){return D.text}).join("")),""}),Ge("\\errmessage",function(oe){var M=oe.consumeArgs(1)[0];return console.error(M.reverse().map(function(D){return D.text}).join("")),""}),Ge("\\show",function(oe){var M=oe.popToken(),D=M.text;return console.log(M,oe.macros.get(D),Th[D],Yn.math[D],Yn.text[D]),""}),Ge("\\bgroup","{"),Ge("\\egroup","}"),Ge("~","\\nobreakspace"),Ge("\\lq","`"),Ge("\\rq","'"),Ge("\\aa","\\r a"),Ge("\\AA","\\r A"),Ge("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),Ge("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Ge("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),Ge("ℬ","\\mathscr{B}"),Ge("ℰ","\\mathscr{E}"),Ge("ℱ","\\mathscr{F}"),Ge("ℋ","\\mathscr{H}"),Ge("ℐ","\\mathscr{I}"),Ge("ℒ","\\mathscr{L}"),Ge("ℳ","\\mathscr{M}"),Ge("ℛ","\\mathscr{R}"),Ge("ℭ","\\mathfrak{C}"),Ge("ℌ","\\mathfrak{H}"),Ge("ℨ","\\mathfrak{Z}"),Ge("\\Bbbk","\\Bbb{k}"),Ge("·","\\cdotp"),Ge("\\llap","\\mathllap{\\textrm{#1}}"),Ge("\\rlap","\\mathrlap{\\textrm{#1}}"),Ge("\\clap","\\mathclap{\\textrm{#1}}"),Ge("\\mathstrut","\\vphantom{(}"),Ge("\\underbar","\\underline{\\text{#1}}"),Ge("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Ge("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),Ge("\\ne","\\neq"),Ge("≠","\\neq"),Ge("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),Ge("∉","\\notin"),Ge("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),Ge("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),Ge("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),Ge("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),Ge("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),Ge("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),Ge("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),Ge("⟂","\\perp"),Ge("‼","\\mathclose{!\\mkern-0.8mu!}"),Ge("∌","\\notni"),Ge("⌜","\\ulcorner"),Ge("⌝","\\urcorner"),Ge("⌞","\\llcorner"),Ge("⌟","\\lrcorner"),Ge("©","\\copyright"),Ge("®","\\textregistered"),Ge("️","\\textregistered"),Ge("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),Ge("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),Ge("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),Ge("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),Ge("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),Ge("⋮","\\vdots"),Ge("\\varGamma","\\mathit{\\Gamma}"),Ge("\\varDelta","\\mathit{\\Delta}"),Ge("\\varTheta","\\mathit{\\Theta}"),Ge("\\varLambda","\\mathit{\\Lambda}"),Ge("\\varXi","\\mathit{\\Xi}"),Ge("\\varPi","\\mathit{\\Pi}"),Ge("\\varSigma","\\mathit{\\Sigma}"),Ge("\\varUpsilon","\\mathit{\\Upsilon}"),Ge("\\varPhi","\\mathit{\\Phi}"),Ge("\\varPsi","\\mathit{\\Psi}"),Ge("\\varOmega","\\mathit{\\Omega}"),Ge("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Ge("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),Ge("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Ge("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Ge("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Ge("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var JU={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Ge("\\dots",function(oe){var M="\\dotso",D=oe.expandAfterFuture().text;return D in JU?M=JU[D]:(D.substr(0,4)==="\\not"||D in Yn.math&&g.contains(["bin","rel"],Yn.math[D].group))&&(M="\\dotsb"),M});var dD={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Ge("\\dotso",function(oe){var M=oe.future().text;return M in dD?"\\ldots\\,":"\\ldots"}),Ge("\\dotsc",function(oe){var M=oe.future().text;return M in dD&&M!==","?"\\ldots\\,":"\\ldots"}),Ge("\\cdots",function(oe){var M=oe.future().text;return M in dD?"\\@cdots\\,":"\\@cdots"}),Ge("\\dotsb","\\cdots"),Ge("\\dotsm","\\cdots"),Ge("\\dotsi","\\!\\cdots"),Ge("\\dotsx","\\ldots\\,"),Ge("\\DOTSI","\\relax"),Ge("\\DOTSB","\\relax"),Ge("\\DOTSX","\\relax"),Ge("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Ge("\\,","\\tmspace+{3mu}{.1667em}"),Ge("\\thinspace","\\,"),Ge("\\>","\\mskip{4mu}"),Ge("\\:","\\tmspace+{4mu}{.2222em}"),Ge("\\medspace","\\:"),Ge("\\;","\\tmspace+{5mu}{.2777em}"),Ge("\\thickspace","\\;"),Ge("\\!","\\tmspace-{3mu}{.1667em}"),Ge("\\negthinspace","\\!"),Ge("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Ge("\\negthickspace","\\tmspace-{5mu}{.277em}"),Ge("\\enspace","\\kern.5em "),Ge("\\enskip","\\hskip.5em\\relax"),Ge("\\quad","\\hskip1em\\relax"),Ge("\\qquad","\\hskip2em\\relax"),Ge("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Ge("\\tag@paren","\\tag@literal{({#1})}"),Ge("\\tag@literal",function(oe){if(oe.macros.get("\\df@tag"))throw new a("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),Ge("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Ge("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Ge("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Ge("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Ge("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),Ge("\\newline","\\\\\\relax"),Ge("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var ez=G(Ue["Main-Regular"]["T".charCodeAt(0)][1]-.7*Ue["Main-Regular"]["A".charCodeAt(0)][1]);Ge("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+ez+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),Ge("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+ez+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),Ge("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Ge("\\@hspace","\\hskip #1\\relax"),Ge("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Ge("\\ordinarycolon",":"),Ge("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Ge("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Ge("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Ge("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Ge("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Ge("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Ge("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Ge("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Ge("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Ge("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Ge("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Ge("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Ge("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Ge("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Ge("∷","\\dblcolon"),Ge("∹","\\eqcolon"),Ge("≔","\\coloneqq"),Ge("≕","\\eqqcolon"),Ge("⩴","\\Coloneqq"),Ge("\\ratio","\\vcentcolon"),Ge("\\coloncolon","\\dblcolon"),Ge("\\colonequals","\\coloneqq"),Ge("\\coloncolonequals","\\Coloneqq"),Ge("\\equalscolon","\\eqqcolon"),Ge("\\equalscoloncolon","\\Eqqcolon"),Ge("\\colonminus","\\coloneq"),Ge("\\coloncolonminus","\\Coloneq"),Ge("\\minuscolon","\\eqcolon"),Ge("\\minuscoloncolon","\\Eqcolon"),Ge("\\coloncolonapprox","\\Colonapprox"),Ge("\\coloncolonsim","\\Colonsim"),Ge("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Ge("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Ge("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Ge("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Ge("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),Ge("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Ge("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Ge("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),Ge("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),Ge("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),Ge("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),Ge("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),Ge("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),Ge("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),Ge("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),Ge("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),Ge("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),Ge("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),Ge("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),Ge("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),Ge("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),Ge("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),Ge("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),Ge("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),Ge("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),Ge("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),Ge("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),Ge("\\imath","\\html@mathml{\\@imath}{ı}"),Ge("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),Ge("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),Ge("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),Ge("⟦","\\llbracket"),Ge("⟧","\\rrbracket"),Ge("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),Ge("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),Ge("⦃","\\lBrace"),Ge("⦄","\\rBrace"),Ge("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),Ge("⦵","\\minuso"),Ge("\\darr","\\downarrow"),Ge("\\dArr","\\Downarrow"),Ge("\\Darr","\\Downarrow"),Ge("\\lang","\\langle"),Ge("\\rang","\\rangle"),Ge("\\uarr","\\uparrow"),Ge("\\uArr","\\Uparrow"),Ge("\\Uarr","\\Uparrow"),Ge("\\N","\\mathbb{N}"),Ge("\\R","\\mathbb{R}"),Ge("\\Z","\\mathbb{Z}"),Ge("\\alef","\\aleph"),Ge("\\alefsym","\\aleph"),Ge("\\Alpha","\\mathrm{A}"),Ge("\\Beta","\\mathrm{B}"),Ge("\\bull","\\bullet"),Ge("\\Chi","\\mathrm{X}"),Ge("\\clubs","\\clubsuit"),Ge("\\cnums","\\mathbb{C}"),Ge("\\Complex","\\mathbb{C}"),Ge("\\Dagger","\\ddagger"),Ge("\\diamonds","\\diamondsuit"),Ge("\\empty","\\emptyset"),Ge("\\Epsilon","\\mathrm{E}"),Ge("\\Eta","\\mathrm{H}"),Ge("\\exist","\\exists"),Ge("\\harr","\\leftrightarrow"),Ge("\\hArr","\\Leftrightarrow"),Ge("\\Harr","\\Leftrightarrow"),Ge("\\hearts","\\heartsuit"),Ge("\\image","\\Im"),Ge("\\infin","\\infty"),Ge("\\Iota","\\mathrm{I}"),Ge("\\isin","\\in"),Ge("\\Kappa","\\mathrm{K}"),Ge("\\larr","\\leftarrow"),Ge("\\lArr","\\Leftarrow"),Ge("\\Larr","\\Leftarrow"),Ge("\\lrarr","\\leftrightarrow"),Ge("\\lrArr","\\Leftrightarrow"),Ge("\\Lrarr","\\Leftrightarrow"),Ge("\\Mu","\\mathrm{M}"),Ge("\\natnums","\\mathbb{N}"),Ge("\\Nu","\\mathrm{N}"),Ge("\\Omicron","\\mathrm{O}"),Ge("\\plusmn","\\pm"),Ge("\\rarr","\\rightarrow"),Ge("\\rArr","\\Rightarrow"),Ge("\\Rarr","\\Rightarrow"),Ge("\\real","\\Re"),Ge("\\reals","\\mathbb{R}"),Ge("\\Reals","\\mathbb{R}"),Ge("\\Rho","\\mathrm{P}"),Ge("\\sdot","\\cdot"),Ge("\\sect","\\S"),Ge("\\spades","\\spadesuit"),Ge("\\sub","\\subset"),Ge("\\sube","\\subseteq"),Ge("\\supe","\\supseteq"),Ge("\\Tau","\\mathrm{T}"),Ge("\\thetasym","\\vartheta"),Ge("\\weierp","\\wp"),Ge("\\Zeta","\\mathrm{Z}"),Ge("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Ge("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Ge("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),Ge("\\bra","\\mathinner{\\langle{#1}|}"),Ge("\\ket","\\mathinner{|{#1}\\rangle}"),Ge("\\braket","\\mathinner{\\langle{#1}\\rangle}"),Ge("\\Bra","\\left\\langle#1\\right|"),Ge("\\Ket","\\left|#1\\right\\rangle"),Ge("\\angln","{\\angl n}"),Ge("\\blue","\\textcolor{##6495ed}{#1}"),Ge("\\orange","\\textcolor{##ffa500}{#1}"),Ge("\\pink","\\textcolor{##ff00af}{#1}"),Ge("\\red","\\textcolor{##df0030}{#1}"),Ge("\\green","\\textcolor{##28ae7b}{#1}"),Ge("\\gray","\\textcolor{gray}{#1}"),Ge("\\purple","\\textcolor{##9d38bd}{#1}"),Ge("\\blueA","\\textcolor{##ccfaff}{#1}"),Ge("\\blueB","\\textcolor{##80f6ff}{#1}"),Ge("\\blueC","\\textcolor{##63d9ea}{#1}"),Ge("\\blueD","\\textcolor{##11accd}{#1}"),Ge("\\blueE","\\textcolor{##0c7f99}{#1}"),Ge("\\tealA","\\textcolor{##94fff5}{#1}"),Ge("\\tealB","\\textcolor{##26edd5}{#1}"),Ge("\\tealC","\\textcolor{##01d1c1}{#1}"),Ge("\\tealD","\\textcolor{##01a995}{#1}"),Ge("\\tealE","\\textcolor{##208170}{#1}"),Ge("\\greenA","\\textcolor{##b6ffb0}{#1}"),Ge("\\greenB","\\textcolor{##8af281}{#1}"),Ge("\\greenC","\\textcolor{##74cf70}{#1}"),Ge("\\greenD","\\textcolor{##1fab54}{#1}"),Ge("\\greenE","\\textcolor{##0d923f}{#1}"),Ge("\\goldA","\\textcolor{##ffd0a9}{#1}"),Ge("\\goldB","\\textcolor{##ffbb71}{#1}"),Ge("\\goldC","\\textcolor{##ff9c39}{#1}"),Ge("\\goldD","\\textcolor{##e07d10}{#1}"),Ge("\\goldE","\\textcolor{##a75a05}{#1}"),Ge("\\redA","\\textcolor{##fca9a9}{#1}"),Ge("\\redB","\\textcolor{##ff8482}{#1}"),Ge("\\redC","\\textcolor{##f9685d}{#1}"),Ge("\\redD","\\textcolor{##e84d39}{#1}"),Ge("\\redE","\\textcolor{##bc2612}{#1}"),Ge("\\maroonA","\\textcolor{##ffbde0}{#1}"),Ge("\\maroonB","\\textcolor{##ff92c6}{#1}"),Ge("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Ge("\\maroonD","\\textcolor{##ca337c}{#1}"),Ge("\\maroonE","\\textcolor{##9e034e}{#1}"),Ge("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Ge("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Ge("\\purpleC","\\textcolor{##aa87ff}{#1}"),Ge("\\purpleD","\\textcolor{##7854ab}{#1}"),Ge("\\purpleE","\\textcolor{##543b78}{#1}"),Ge("\\mintA","\\textcolor{##f5f9e8}{#1}"),Ge("\\mintB","\\textcolor{##edf2df}{#1}"),Ge("\\mintC","\\textcolor{##e0e5cc}{#1}"),Ge("\\grayA","\\textcolor{##f6f7f7}{#1}"),Ge("\\grayB","\\textcolor{##f0f1f2}{#1}"),Ge("\\grayC","\\textcolor{##e3e5e6}{#1}"),Ge("\\grayD","\\textcolor{##d6d8da}{#1}"),Ge("\\grayE","\\textcolor{##babec2}{#1}"),Ge("\\grayF","\\textcolor{##888d93}{#1}"),Ge("\\grayG","\\textcolor{##626569}{#1}"),Ge("\\grayH","\\textcolor{##3b3e40}{#1}"),Ge("\\grayI","\\textcolor{##21242c}{#1}"),Ge("\\kaBlue","\\textcolor{##314453}{#1}"),Ge("\\kaGreen","\\textcolor{##71B307}{#1}");var tz={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},Yhe=function(){function oe(D,R,O){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=R,this.expansionCount=0,this.feed(D),this.macros=new jhe(Xhe,R.macros),this.mode=O,this.stack=[]}var M=oe.prototype;return M.feed=function(R){this.lexer=new QU(R,this.settings)},M.switchMode=function(R){this.mode=R},M.beginGroup=function(){this.macros.beginGroup()},M.endGroup=function(){this.macros.endGroup()},M.endGroups=function(){this.macros.endGroups()},M.future=function(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},M.popToken=function(){return this.future(),this.stack.pop()},M.pushToken=function(R){this.stack.push(R)},M.pushTokens=function(R){var O;(O=this.stack).push.apply(O,R)},M.scanArgument=function(R){var O,X,se;if(R){if(this.consumeSpaces(),this.future().text!=="[")return null;O=this.popToken();var Te=this.consumeArg(["]"]);se=Te.tokens,X=Te.end}else{var $e=this.consumeArg();se=$e.tokens,O=$e.start,X=$e.end}return this.pushToken(new bm("EOF",X.loc)),this.pushTokens(se),O.range(X,"")},M.consumeSpaces=function(){for(;;){var R=this.future();if(R.text===" ")this.stack.pop();else break}},M.consumeArg=function(R){var O=[],X=R&&R.length>0;X||this.consumeSpaces();var se=this.future(),Te,$e=0,nt=0;do{if(Te=this.popToken(),O.push(Te),Te.text==="{")++$e;else if(Te.text==="}"){if(--$e,$e===-1)throw new a("Extra }",Te)}else if(Te.text==="EOF")throw new a("Unexpected end of input in a macro argument, expected '"+(R&&X?R[nt]:"}")+"'",Te);if(R&&X)if(($e===0||$e===1&&R[nt]==="{")&&Te.text===R[nt]){if(++nt,nt===R.length){O.splice(-nt,nt);break}}else nt=0}while($e!==0||X);return se.text==="{"&&O[O.length-1].text==="}"&&(O.pop(),O.shift()),O.reverse(),{tokens:O,start:se,end:Te}},M.consumeArgs=function(R,O){if(O){if(O.length!==R+1)throw new a("The length of delimiters doesn't match the number of args!");for(var X=O[0],se=0;se<X.length;se++){var Te=this.popToken();if(X[se]!==Te.text)throw new a("Use of the macro doesn't match its definition",Te)}}for(var $e=[],nt=0;nt<R;nt++)$e.push(this.consumeArg(O&&O[nt+1]).tokens);return $e},M.expandOnce=function(R){var O=this.popToken(),X=O.text,se=O.noexpand?null:this._getExpansion(X);if(se==null||R&&se.unexpandable){if(R&&se==null&&X[0]==="\\"&&!this.isDefined(X))throw new a("Undefined control sequence: "+X);return this.pushToken(O),O}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new a("Too many expansions: infinite loop or need to increase maxExpand setting");var Te=se.tokens,$e=this.consumeArgs(se.numArgs,se.delimiters);if(se.numArgs){Te=Te.slice();for(var nt=Te.length-1;nt>=0;--nt){var bt=Te[nt];if(bt.text==="#"){if(nt===0)throw new a("Incomplete placeholder at end of macro body",bt);if(bt=Te[--nt],bt.text==="#")Te.splice(nt+1,1);else if(/^[1-9]$/.test(bt.text)){var Gt;(Gt=Te).splice.apply(Gt,[nt,2].concat($e[+bt.text-1]))}else throw new a("Not a valid argument number",bt)}}}return this.pushTokens(Te),Te},M.expandAfterFuture=function(){return this.expandOnce(),this.future()},M.expandNextToken=function(){for(;;){var R=this.expandOnce();if(R instanceof bm)if(R.text==="\\relax"||R.treatAsRelax)this.stack.pop();else return this.stack.pop()}throw new Error},M.expandMacro=function(R){return this.macros.has(R)?this.expandTokens([new bm(R)]):void 0},M.expandTokens=function(R){var O=[],X=this.stack.length;for(this.pushTokens(R);this.stack.length>X;){var se=this.expandOnce(!0);se instanceof bm&&(se.treatAsRelax&&(se.noexpand=!1,se.treatAsRelax=!1),O.push(this.stack.pop()))}return O},M.expandMacroAsText=function(R){var O=this.expandMacro(R);return O&&O.map(function(X){return X.text}).join("")},M._getExpansion=function(R){var O=this.macros.get(R);if(O==null)return O;if(R.length===1){var X=this.lexer.catcodes[R];if(X!=null&&X!==13)return}var se=typeof O=="function"?O(this):O;if(typeof se=="string"){var Te=0;if(se.indexOf("#")!==-1)for(var $e=se.replace(/##/g,"");$e.indexOf("#"+(Te+1))!==-1;)++Te;for(var nt=new QU(se,this.settings),bt=[],Gt=nt.lex();Gt.text!=="EOF";)bt.push(Gt),Gt=nt.lex();bt.reverse();var nn={tokens:bt,numArgs:Te};return nn}return se},M.isDefined=function(R){return this.macros.has(R)||Th.hasOwnProperty(R)||Yn.math.hasOwnProperty(R)||Yn.text.hasOwnProperty(R)||tz.hasOwnProperty(R)},M.isExpandable=function(R){var O=this.macros.get(R);return O!=null?typeof O=="string"||typeof O=="function"||!O.unexpandable:Th.hasOwnProperty(R)&&!Th[R].primitive},oe}(),fD={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},nz={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"},rz=function(){function oe(D,R){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Yhe(D,R,this.mode),this.settings=R,this.leftrightDepth=0}var M=oe.prototype;return M.expect=function(R,O){if(O===void 0&&(O=!0),this.fetch().text!==R)throw new a("Expected '"+R+"', got '"+this.fetch().text+"'",this.fetch());O&&this.consume()},M.consume=function(){this.nextToken=null},M.fetch=function(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken},M.switchMode=function(R){this.mode=R,this.gullet.switchMode(R)},M.parse=function(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var R=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),R}finally{this.gullet.endGroups()}},M.parseExpression=function(R,O){for(var X=[];;){this.mode==="math"&&this.consumeSpaces();var se=this.fetch();if(oe.endOfExpression.indexOf(se.text)!==-1||O&&se.text===O||R&&Th[se.text]&&Th[se.text].infix)break;var Te=this.parseAtom(O);if(Te){if(Te.type==="internal")continue}else break;X.push(Te)}return this.mode==="text"&&this.formLigatures(X),this.handleInfixNodes(X)},M.handleInfixNodes=function(R){for(var O=-1,X,se=0;se<R.length;se++)if(R[se].type==="infix"){if(O!==-1)throw new a("only one infix operator per group",R[se].token);O=se,X=R[se].replaceWith}if(O!==-1&&X){var Te,$e,nt=R.slice(0,O),bt=R.slice(O+1);nt.length===1&&nt[0].type==="ordgroup"?Te=nt[0]:Te={type:"ordgroup",mode:this.mode,body:nt},bt.length===1&&bt[0].type==="ordgroup"?$e=bt[0]:$e={type:"ordgroup",mode:this.mode,body:bt};var Gt;return X==="\\\\abovefrac"?Gt=this.callFunction(X,[Te,R[O],$e],[]):Gt=this.callFunction(X,[Te,$e],[]),[Gt]}else return R},M.handleSupSubscript=function(R){var O=this.fetch(),X=O.text;this.consume(),this.consumeSpaces();var se=this.parseGroup(R);if(!se)throw new a("Expected group after '"+X+"'",O);return se},M.formatUnsupportedCmd=function(R){for(var O=[],X=0;X<R.length;X++)O.push({type:"textord",mode:"text",text:R[X]});var se={type:"text",mode:this.mode,body:O},Te={type:"color",mode:this.mode,color:this.settings.errorColor,body:[se]};return Te},M.parseAtom=function(R){var O=this.parseGroup("atom",R);if(this.mode==="text")return O;for(var X,se;;){this.consumeSpaces();var Te=this.fetch();if(Te.text==="\\limits"||Te.text==="\\nolimits"){if(O&&O.type==="op"){var $e=Te.text==="\\limits";O.limits=$e,O.alwaysHandleSupSub=!0}else if(O&&O.type==="operatorname")O.alwaysHandleSupSub&&(O.limits=Te.text==="\\limits");else throw new a("Limit controls must follow a math operator",Te);this.consume()}else if(Te.text==="^"){if(X)throw new a("Double superscript",Te);X=this.handleSupSubscript("superscript")}else if(Te.text==="_"){if(se)throw new a("Double subscript",Te);se=this.handleSupSubscript("subscript")}else if(Te.text==="'"){if(X)throw new a("Double superscript",Te);var nt={type:"textord",mode:this.mode,text:"\\prime"},bt=[nt];for(this.consume();this.fetch().text==="'";)bt.push(nt),this.consume();this.fetch().text==="^"&&bt.push(this.handleSupSubscript("superscript")),X={type:"ordgroup",mode:this.mode,body:bt}}else break}return X||se?{type:"supsub",mode:this.mode,base:O,sup:X,sub:se}:O},M.parseFunction=function(R,O){var X=this.fetch(),se=X.text,Te=Th[se];if(!Te)return null;if(this.consume(),O&&O!=="atom"&&!Te.allowedInArgument)throw new a("Got function '"+se+"' with no arguments"+(O?" as "+O:""),X);if(this.mode==="text"&&!Te.allowedInText)throw new a("Can't use function '"+se+"' in text mode",X);if(this.mode==="math"&&Te.allowedInMath===!1)throw new a("Can't use function '"+se+"' in math mode",X);var $e=this.parseArguments(se,Te),nt=$e.args,bt=$e.optArgs;return this.callFunction(se,nt,bt,X,R)},M.callFunction=function(R,O,X,se,Te){var $e={funcName:R,parser:this,token:se,breakOnTokenText:Te},nt=Th[R];if(nt&&nt.handler)return nt.handler($e,O,X);throw new a("No function handler for "+R)},M.parseArguments=function(R,O){var X=O.numArgs+O.numOptionalArgs;if(X===0)return{args:[],optArgs:[]};for(var se=[],Te=[],$e=0;$e<X;$e++){var nt=O.argTypes&&O.argTypes[$e],bt=$e<O.numOptionalArgs;(O.primitive&&nt==null||O.type==="sqrt"&&$e===1&&Te[0]==null)&&(nt="primitive");var Gt=this.parseGroupOfType("argument to '"+R+"'",nt,bt);if(bt)Te.push(Gt);else if(Gt!=null)se.push(Gt);else throw new a("Null argument, please report this as a bug")}return{args:se,optArgs:Te}},M.parseGroupOfType=function(R,O,X){switch(O){case"color":return this.parseColorGroup(X);case"size":return this.parseSizeGroup(X);case"url":return this.parseUrlGroup(X);case"math":case"text":return this.parseArgumentGroup(X,O);case"hbox":{var se=this.parseArgumentGroup(X,"text");return se!=null?{type:"styling",mode:se.mode,body:[se],style:"text"}:null}case"raw":{var Te=this.parseStringGroup("raw",X);return Te!=null?{type:"raw",mode:"text",string:Te.text}:null}case"primitive":{if(X)throw new a("A primitive argument cannot be optional");var $e=this.parseGroup(R);if($e==null)throw new a("Expected group as "+R,this.fetch());return $e}case"original":case null:case void 0:return this.parseArgumentGroup(X);default:throw new a("Unknown group type as "+R,this.fetch())}},M.consumeSpaces=function(){for(;this.fetch().text===" ";)this.consume()},M.parseStringGroup=function(R,O){var X=this.gullet.scanArgument(O);if(X==null)return null;for(var se="",Te;(Te=this.fetch()).text!=="EOF";)se+=Te.text,this.consume();return this.consume(),X.text=se,X},M.parseRegexGroup=function(R,O){for(var X=this.fetch(),se=X,Te="",$e;($e=this.fetch()).text!=="EOF"&&R.test(Te+$e.text);)se=$e,Te+=se.text,this.consume();if(Te==="")throw new a("Invalid "+O+": '"+X.text+"'",X);return X.range(se,Te)},M.parseColorGroup=function(R){var O=this.parseStringGroup("color",R);if(O==null)return null;var X=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(O.text);if(!X)throw new a("Invalid color: '"+O.text+"'",O);var se=X[0];return/^[0-9a-f]{6}$/i.test(se)&&(se="#"+se),{type:"color-token",mode:this.mode,color:se}},M.parseSizeGroup=function(R){var O,X=!1;if(this.gullet.consumeSpaces(),!R&&this.gullet.future().text!=="{"?O=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):O=this.parseStringGroup("size",R),!O)return null;!R&&O.text.length===0&&(O.text="0pt",X=!0);var se=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(O.text);if(!se)throw new a("Invalid size: '"+O.text+"'",O);var Te={number:+(se[1]+se[2]),unit:se[3]};if(!Tt(Te))throw new a("Invalid unit: '"+Te.unit+"'",O);return{type:"size",mode:this.mode,value:Te,isBlank:X}},M.parseUrlGroup=function(R){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var O=this.parseStringGroup("url",R);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),O==null)return null;var X=O.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:X}},M.parseArgumentGroup=function(R,O){var X=this.gullet.scanArgument(R);if(X==null)return null;var se=this.mode;O&&this.switchMode(O),this.gullet.beginGroup();var Te=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var $e={type:"ordgroup",mode:this.mode,loc:X.loc,body:Te};return O&&this.switchMode(se),$e},M.parseGroup=function(R,O){var X=this.fetch(),se=X.text,Te;if(se==="{"||se==="\\begingroup"){this.consume();var $e=se==="{"?"}":"\\endgroup";this.gullet.beginGroup();var nt=this.parseExpression(!1,$e),bt=this.fetch();this.expect($e),this.gullet.endGroup(),Te={type:"ordgroup",mode:this.mode,loc:oc.range(X,bt),body:nt,semisimple:se==="\\begingroup"||void 0}}else if(Te=this.parseFunction(O,R)||this.parseSymbol(),Te==null&&se[0]==="\\"&&!tz.hasOwnProperty(se)){if(this.settings.throwOnError)throw new a("Undefined control sequence: "+se,X);Te=this.formatUnsupportedCmd(se),this.consume()}return Te},M.formLigatures=function(R){for(var O=R.length-1,X=0;X<O;++X){var se=R[X],Te=se.text;Te==="-"&&R[X+1].text==="-"&&(X+1<O&&R[X+2].text==="-"?(R.splice(X,3,{type:"textord",mode:"text",loc:oc.range(se,R[X+2]),text:"---"}),O-=2):(R.splice(X,2,{type:"textord",mode:"text",loc:oc.range(se,R[X+1]),text:"--"}),O-=1)),(Te==="'"||Te==="`")&&R[X+1].text===Te&&(R.splice(X,2,{type:"textord",mode:"text",loc:oc.range(se,R[X+1]),text:Te+Te}),O-=1)}},M.parseSymbol=function(){var R=this.fetch(),O=R.text;if(/^\\verb[^a-zA-Z]/.test(O)){this.consume();var X=O.slice(5),se=X.charAt(0)==="*";if(se&&(X=X.slice(1)),X.length<2||X.charAt(0)!==X.slice(-1))throw new a(`\\verb assertion failed --
                    please report what input caused this bug`);return X=X.slice(1,-1),{type:"verb",mode:"text",body:X,star:se}}nz.hasOwnProperty(O[0])&&!Yn[this.mode][O[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+O[0]+'" used in math mode',R),O=nz[O[0]]+O.substr(1));var Te=Whe.exec(O);Te&&(O=O.substring(0,Te.index),O==="i"?O="ı":O==="j"&&(O="ȷ"));var $e;if(Yn[this.mode][O]){this.settings.strict&&this.mode==="math"&&Mr.indexOf(O)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+O[0]+'" used in math mode',R);var nt=Yn[this.mode][O].group,bt=oc.range(R),Gt;if(Er.hasOwnProperty(nt)){var nn=nt;Gt={type:"atom",mode:this.mode,family:nn,loc:bt,text:O}}else Gt={type:nt,mode:this.mode,loc:bt,text:O};$e=Gt}else if(O.charCodeAt(0)>=128)this.settings.strict&&(ne(O.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+O[0]+'" used in math mode',R):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+O[0]+'"'+(" ("+O.charCodeAt(0)+")"),R)),$e={type:"textord",mode:"text",loc:oc.range(R),text:O};else return null;if(this.consume(),Te)for(var dn=0;dn<Te[0].length;dn++){var fn=Te[0][dn];if(!fD[fn])throw new a("Unknown accent ' "+fn+"'",R);var Pn=fD[fn][this.mode]||fD[fn].text;if(!Pn)throw new a("Accent "+fn+" unsupported in "+this.mode+" mode",R);$e={type:"accent",mode:this.mode,loc:oc.range(R),label:Pn,isStretchy:!1,isShifty:!0,base:$e}}return $e},oe}();rz.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Qhe=function(M,D){if(!(typeof M=="string"||M instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var R=new rz(M,D);delete R.gullet.macros.current["\\df@tag"];var O=R.parse();if(delete R.gullet.macros.current["\\current@color"],delete R.gullet.macros.current["\\color"],R.gullet.macros.get("\\df@tag")){if(!D.displayMode)throw new a("\\tag works only in display equations");R.gullet.feed("\\df@tag"),O=[{type:"tag",mode:"text",body:O,tag:R.parse()}]}return O},hD=Qhe,iz=function(M,D,R){D.textContent="";var O=pD(M,R).toNode();D.appendChild(O)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),iz=function(){throw new a("KaTeX doesn't work in quirks mode.")});var Zhe=function(M,D){var R=pD(M,D).toMarkup();return R},Jhe=function(M,D){var R=new y(D);return hD(M,R)},az=function(M,D,R){if(R.throwOnError||!(M instanceof a))throw M;var O=vt.makeSpan(["katex-error"],[new dt(D)]);return O.setAttribute("title",M.toString()),O.setAttribute("style","color:"+R.errorColor),O},pD=function(M,D){var R=new y(D);try{var O=hD(M,R);return WI(O,M,R)}catch(X){return az(X,M,R)}},epe=function(M,D){var R=new y(D);try{var O=hD(M,R);return qI(O,M,R)}catch(X){return az(X,M,R)}},tpe={version:"0.13.24",render:iz,renderToString:Zhe,ParseError:a,__parse:Jhe,__renderToDomTree:pD,__renderToHTMLTree:epe,__setFontMetrics:He,__defineSymbol:Q,__defineMacro:Ge,__domTree:{Span:Ie,Anchor:wt,SymbolNode:dt,SvgNode:Mt,PathNode:Wt,LineNode:zt}},npe=tpe;return r=r.default,r}()})})(ade);var lat=ade.exports;const uat=Ls(lat),cat=(n,e={},t)=>{const{props:r,domProps:i,on:a,...s}=e,o={...s,...r,...i,...(l=>l?Object.entries(l).reduce((u,[c,d])=>({...u,[c=`on${c=c.charAt(0).toUpperCase()+c.slice(1)}`]:d}),{}):null)(a)};return an(n,o,t)};var KR=Ne({name:"VueLatex",props:{fontsize:{type:Number,default:16},expression:{type:String,required:!0},displayMode:{type:Boolean,default:!1},throwOnError:{type:Boolean,default:!1},errorColor:{type:String,default:void 0},minRuleThickness:{type:Number,default:.04},macros:{type:Object,default:void 0},colorIsTextColor:{type:Boolean,default:void 0},maxSize:{type:Number,default:void 0},maxExpand:{type:Number,default:void 0},allowedProtocols:{type:Array,default:void 0},strict:{type:[Boolean,String,Function],default:void 0}},setup:n=>({html:V(()=>uat.renderToString(n.expression,n))}),render(){return cat(this.displayMode?"div":"span",{domProps:{innerHTML:this.html},style:{"font-size":`${this.fontsize}px`}})}});KR.install=n=>{n.component(KR.name,KR)};/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const h9="143",Dg={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Pg={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},dat=0,EK=1,fat=2,sde=1,hat=2,HS=3,Qp=0,Nc=1,Zp=2,pat=1,Ap=0,f1=1,MK=2,IK=3,DK=4,mat=5,wy=100,vat=101,gat=102,PK=103,RK=104,yat=200,_at=201,bat=202,Sat=203,ode=204,lde=205,xat=206,wat=207,Tat=208,Cat=209,Aat=210,Eat=0,Mat=1,Iat=2,DO=3,Dat=4,Pat=5,Rat=6,kat=7,DI=0,Lat=1,Oat=2,Uf=0,Nat=1,Bat=2,Fat=3,Uat=4,zat=5,p9=300,vv=301,gv=302,z2=303,w3=304,Ww=306,vl=1e3,hs=1001,H2=1002,Cs=1003,T3=1004,C3=1005,Za=1006,m9=1007,yh=1008,yv=1009,Hat=1010,Vat=1011,ude=1012,$at=1013,L0=1014,yp=1015,V2=1016,Gat=1017,Wat=1018,h1=1020,qat=1021,jat=1022,Ou=1023,Kat=1024,Xat=1025,tv=1026,n_=1027,Yat=1028,Qat=1029,Zat=1030,Jat=1031,est=1033,NE=33776,XR=33777,BE=33778,FE=33779,kK=35840,LK=35841,OK=35842,NK=35843,cde=36196,BK=37492,FK=37496,UK=37808,zK=37809,HK=37810,VK=37811,$K=37812,GK=37813,WK=37814,qK=37815,jK=37816,KK=37817,XK=37818,YK=37819,QK=37820,ZK=37821,JK=36492,tst=2200,nst=2201,rst=2202,$2=2300,r_=2301,YR=2302,Hy=2400,Vy=2401,A3=2402,v9=2500,ist=2501,ast=1,dde=2,Jp=3e3,ai=3001,sst=3200,ost=3201,Lv=0,lst=1,Sf="srgb",O0="srgb-linear",QR=7680,ust=519,PO=35044,eX="300 es",RO=1035;let fm=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}};const io=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let tX=1234567;const p1=Math.PI/180,G2=180/Math.PI;function Hu(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(io[n&255]+io[n>>8&255]+io[n>>16&255]+io[n>>24&255]+"-"+io[e&255]+io[e>>8&255]+"-"+io[e>>16&15|64]+io[e>>24&255]+"-"+io[t&63|128]+io[t>>8&255]+"-"+io[t>>16&255]+io[t>>24&255]+io[r&255]+io[r>>8&255]+io[r>>16&255]+io[r>>24&255]).toLowerCase()}function cs(n,e,t){return Math.max(e,Math.min(t,n))}function g9(n,e){return(n%e+e)%e}function cst(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function dst(n,e,t){return n!==e?(t-n)/(e-n):0}function _x(n,e,t){return(1-t)*n+t*e}function fst(n,e,t,r){return _x(n,e,1-Math.exp(-t*r))}function hst(n,e=1){return e-Math.abs(g9(n,e*2)-e)}function pst(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function mst(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function vst(n,e){return n+Math.floor(Math.random()*(e-n+1))}function gst(n,e){return n+Math.random()*(e-n)}function yst(n){return n*(.5-Math.random())}function _st(n){n!==void 0&&(tX=n);let e=tX+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function bst(n){return n*p1}function Sst(n){return n*G2}function kO(n){return(n&n-1)===0&&n!==0}function fde(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function E3(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function xst(n,e,t,r,i){const a=Math.cos,s=Math.sin,o=a(t/2),l=s(t/2),u=a((e+r)/2),c=s((e+r)/2),d=a((e-r)/2),f=s((e-r)/2),h=a((r-e)/2),p=s((r-e)/2);switch(i){case"XYX":n.set(o*c,l*d,l*f,o*u);break;case"YZY":n.set(l*f,o*c,l*d,o*u);break;case"ZXZ":n.set(l*d,l*f,o*c,o*u);break;case"XZX":n.set(o*c,l*p,l*h,o*u);break;case"YXY":n.set(l*h,o*c,l*p,o*u);break;case"ZYZ":n.set(l*p,l*h,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function wst(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Tst(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var yo=Object.freeze({__proto__:null,DEG2RAD:p1,RAD2DEG:G2,generateUUID:Hu,clamp:cs,euclideanModulo:g9,mapLinear:cst,inverseLerp:dst,lerp:_x,damp:fst,pingpong:hst,smoothstep:pst,smootherstep:mst,randInt:vst,randFloat:gst,randFloatSpread:yst,seededRandom:_st,degToRad:bst,radToDeg:Sst,isPowerOfTwo:kO,ceilPowerOfTwo:fde,floorPowerOfTwo:E3,setQuaternionFromProperEuler:xst,normalize:Tst,denormalize:wst});let sn=class hde{constructor(e=0,t=0){hde.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Nu=class pde{constructor(){pde.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,a,s,o,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=a,c[5]=l,c[6]=r,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],c=r[4],d=r[7],f=r[2],h=r[5],p=r[8],m=i[0],v=i[3],g=i[6],y=i[1],_=i[4],b=i[7],x=i[2],w=i[5],A=i[8];return a[0]=s*m+o*y+l*x,a[3]=s*v+o*_+l*w,a[6]=s*g+o*b+l*A,a[1]=u*m+c*y+d*x,a[4]=u*v+c*_+d*w,a[7]=u*g+c*b+d*A,a[2]=f*m+h*y+p*x,a[5]=f*v+h*_+p*w,a[8]=f*g+h*b+p*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*s*c-t*o*u-r*a*c+r*o*l+i*a*u-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=c*s-o*u,f=o*l-c*a,h=u*a-s*l,p=t*d+r*f+i*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(i*u-c*r)*m,e[2]=(o*r-i*s)*m,e[3]=f*m,e[4]=(c*t-i*l)*m,e[5]=(i*a-o*t)*m,e[6]=h*m,e[7]=(r*l-u*t)*m,e[8]=(s*t-r*a)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,s,o){const l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*s+u*o)+s+e,-i*u,i*l,-i*(-u*s+l*o)+o+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,a=i[0],s=i[3],o=i[6],l=i[1],u=i[4],c=i[7];return i[0]=t*a+r*l,i[3]=t*s+r*u,i[6]=t*o+r*c,i[1]=-r*a+t*l,i[4]=-r*s+t*u,i[7]=-r*o+t*c,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}};function mde(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const Cst={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function $y(n,e){return new Cst[n](e)}function W2(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function nv(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function UE(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const ZR={[Sf]:{[O0]:nv},[O0]:{[Sf]:UE}},dc={legacyMode:!0,get workingColorSpace(){return O0},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(ZR[e]&&ZR[e][t]!==void 0){const r=ZR[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},vde={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},as={r:0,g:0,b:0},fc={h:0,s:0,l:0},LC={h:0,s:0,l:0};function JR(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function OC(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let Un=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Sf){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,dc.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=O0){return this.r=e,this.g=t,this.b=r,dc.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=O0){if(e=g9(e,1),t=cs(t,0,1),r=cs(r,0,1),t===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+t):r+t-r*t,s=2*r-a;this.r=JR(s,a,e+1/3),this.g=JR(s,a,e),this.b=JR(s,a,e-1/3)}return dc.toWorkingColorSpace(this,i),this}setStyle(e,t=Sf){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,dc.toWorkingColorSpace(this,t),r(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,dc.toWorkingColorSpace(this,t),r(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(a[1])/360,u=parseInt(a[2],10)/100,c=parseInt(a[3],10)/100;return r(a[4]),this.setHSL(l,u,c,t)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255,dc.toWorkingColorSpace(this,t),this;if(s===6)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,dc.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Sf){const r=vde[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=nv(e.r),this.g=nv(e.g),this.b=nv(e.b),this}copyLinearToSRGB(e){return this.r=UE(e.r),this.g=UE(e.g),this.b=UE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Sf){return dc.fromWorkingColorSpace(OC(this,as),e),cs(as.r*255,0,255)<<16^cs(as.g*255,0,255)<<8^cs(as.b*255,0,255)<<0}getHexString(e=Sf){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=O0){dc.fromWorkingColorSpace(OC(this,as),t);const r=as.r,i=as.g,a=as.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let l,u;const c=(o+s)/2;if(o===s)l=0,u=0;else{const d=s-o;switch(u=c<=.5?d/(s+o):d/(2-s-o),s){case r:l=(i-a)/d+(i<a?6:0);break;case i:l=(a-r)/d+2;break;case a:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=O0){return dc.fromWorkingColorSpace(OC(this,as),t),e.r=as.r,e.g=as.g,e.b=as.b,e}getStyle(e=Sf){return dc.fromWorkingColorSpace(OC(this,as),e),e!==Sf?`color(${e} ${as.r} ${as.g} ${as.b})`:`rgb(${as.r*255|0},${as.g*255|0},${as.b*255|0})`}offsetHSL(e,t,r){return this.getHSL(fc),fc.h+=e,fc.s+=t,fc.l+=r,this.setHSL(fc.h,fc.s,fc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(fc),e.getHSL(LC);const r=_x(fc.h,LC.h,t),i=_x(fc.s,LC.s,t),a=_x(fc.l,LC.l,t);return this.setHSL(r,i,a),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Un.NAMES=vde;let Rg,gde=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Rg===void 0&&(Rg=W2("canvas")),Rg.width=e.width,Rg.height=e.height;const r=Rg.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Rg}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=W2("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=nv(a[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(nv(t[r]/255)*255):t[r]=nv(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Gy=class{constructor(e=null){this.isSource=!0,this.uuid=Hu(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(ek(i[s].image)):a.push(ek(i[s]))}else a=ek(i);r.url=a}return t||(e.images[this.uuid]=r),r}};function ek(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?gde.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ast=0,Qs=class LO extends fm{constructor(e=LO.DEFAULT_IMAGE,t=LO.DEFAULT_MAPPING,r=hs,i=hs,a=Za,s=yh,o=Ou,l=yv,u=1,c=Jp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ast++}),this.uuid=Hu(),this.name="",this.source=new Gy(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new sn(0,0),this.repeat=new sn(1,1),this.center=new sn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nu,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==p9)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case vl:e.x=e.x-Math.floor(e.x);break;case hs:e.x=e.x<0?0:1;break;case H2:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case vl:e.y=e.y-Math.floor(e.y);break;case hs:e.y=e.y<0?0:1;break;case H2:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Qs.DEFAULT_IMAGE=null;Qs.DEFAULT_MAPPING=p9;let ki=class yde{constructor(e=0,t=0,r=0,i=1){yde.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const l=e.elements,u=l[0],c=l[4],d=l[8],f=l[1],h=l[5],p=l[9],m=l[2],v=l[6],g=l[10];if(Math.abs(c-f)<.01&&Math.abs(d-m)<.01&&Math.abs(p-v)<.01){if(Math.abs(c+f)<.1&&Math.abs(d+m)<.1&&Math.abs(p+v)<.1&&Math.abs(u+h+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(u+1)/2,b=(h+1)/2,x=(g+1)/2,w=(c+f)/4,A=(d+m)/4,T=(p+v)/4;return _>b&&_>x?_<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(_),i=w/r,a=A/r):b>x?b<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(b),r=w/i,a=T/i):x<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(x),r=A/a,i=T/a),this.set(r,i,a,t),this}let y=Math.sqrt((v-p)*(v-p)+(d-m)*(d-m)+(f-c)*(f-c));return Math.abs(y)<.001&&(y=1),this.x=(v-p)/y,this.y=(d-m)/y,this.z=(f-c)/y,this.w=Math.acos((u+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},_v=class extends fm{constructor(e,t,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ki(0,0,e,t),this.scissorTest=!1,this.viewport=new ki(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new Qs(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Za,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Gy(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},_de=class extends Qs{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Cs,this.minFilter=Cs,this.wrapR=hs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Est=class extends Qs{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Cs,this.minFilter=Cs,this.wrapR=hs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},qs=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,a,s,o){let l=r[i+0],u=r[i+1],c=r[i+2],d=r[i+3];const f=a[s+0],h=a[s+1],p=a[s+2],m=a[s+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=h,e[t+2]=p,e[t+3]=m;return}if(d!==m||l!==f||u!==h||c!==p){let v=1-o;const g=l*f+u*h+c*p+d*m,y=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const x=Math.sqrt(_),w=Math.atan2(x,g*y);v=Math.sin(v*w)/x,o=Math.sin(o*w)/x}const b=o*y;if(l=l*v+f*b,u=u*v+h*b,c=c*v+p*b,d=d*v+m*b,v===1-o){const x=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=x,u*=x,c*=x,d*=x}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,a,s){const o=r[i],l=r[i+1],u=r[i+2],c=r[i+3],d=a[s],f=a[s+1],h=a[s+2],p=a[s+3];return e[t]=o*p+c*d+l*h-u*f,e[t+1]=l*p+c*f+u*d-o*h,e[t+2]=u*p+c*h+o*f-l*d,e[t+3]=c*p-o*d-l*f-u*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(r/2),c=o(i/2),d=o(a/2),f=l(r/2),h=l(i/2),p=l(a/2);switch(s){case"XYZ":this._x=f*c*d+u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d-f*h*p;break;case"YXZ":this._x=f*c*d+u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d+f*h*p;break;case"ZXY":this._x=f*c*d-u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d-f*h*p;break;case"ZYX":this._x=f*c*d-u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d+f*h*p;break;case"YZX":this._x=f*c*d+u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d-f*h*p;break;case"XZY":this._x=f*c*d-u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],s=t[1],o=t[5],l=t[9],u=t[2],c=t[6],d=t[10],f=r+o+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(c-l)*h,this._y=(a-u)*h,this._z=(s-i)*h}else if(r>o&&r>d){const h=2*Math.sqrt(1+r-o-d);this._w=(c-l)/h,this._x=.25*h,this._y=(i+s)/h,this._z=(a+u)/h}else if(o>d){const h=2*Math.sqrt(1+o-r-d);this._w=(a-u)/h,this._x=(i+s)/h,this._y=.25*h,this._z=(l+c)/h}else{const h=2*Math.sqrt(1+d-r-o);this._w=(s-i)/h,this._x=(a+u)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(cs(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,s=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+s*o+i*u-a*l,this._y=i*c+s*l+a*o-r*u,this._z=a*c+s*u+r*l-i*o,this._w=s*c-r*o-i*l-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,s=this._w;let o=s*e._w+r*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=r,this._y=i,this._z=a,this;const l=1-o*o;if(l<=Number.EPSILON){const h=1-t;return this._w=h*s+t*this._w,this._x=h*r+t*this._x,this._y=h*i+t*this._y,this._z=h*a+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=s*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=a*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(a),r*Math.cos(a),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},it=class bde{constructor(e=0,t=0,r=0){bde.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(nX.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(nX.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=l*t+s*i-o*r,c=l*r+o*t-a*i,d=l*i+a*r-s*t,f=-a*t-s*r-o*i;return this.x=u*l+f*-a+c*-o-d*-s,this.y=c*l+f*-s+d*-a-u*-o,this.z=d*l+f*-o+u*-s-c*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,s=t.x,o=t.y,l=t.z;return this.x=i*l-a*o,this.y=a*s-r*l,this.z=r*o-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return tk.copy(this).projectOnVector(e),this.sub(tk)}reflect(e){return this.sub(tk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(cs(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const tk=new it,nX=new qs;let Ov=class{constructor(e=new it(1/0,1/0,1/0),t=new it(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,a=-1/0,s=-1/0,o=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],d=e[l+1],f=e[l+2];c<t&&(t=c),d<r&&(r=d),f<i&&(i=f),c>a&&(a=c),d>s&&(s=d),f>o&&(o=f)}return this.min.set(t,r,i),this.max.set(a,s,o),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,a=-1/0,s=-1/0,o=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),d=e.getY(l),f=e.getZ(l);c<t&&(t=c),d<r&&(r=d),f<i&&(i=f),c>a&&(a=c),d>s&&(s=d),f>o&&(o=f)}return this.min.set(t,r,i),this.max.set(a,s,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Km.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){const a=r.attributes.position;for(let s=0,o=a.count;s<o;s++)Km.fromBufferAttribute(a,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Km)}else r.boundingBox===null&&r.computeBoundingBox(),nk.copy(r.boundingBox),nk.applyMatrix4(e.matrixWorld),this.union(nk);const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Km),Km.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cS),NC.subVectors(this.max,cS),kg.subVectors(e.a,cS),Lg.subVectors(e.b,cS),Og.subVectors(e.c,cS),Nh.subVectors(Lg,kg),Bh.subVectors(Og,Lg),Xm.subVectors(kg,Og);let t=[0,-Nh.z,Nh.y,0,-Bh.z,Bh.y,0,-Xm.z,Xm.y,Nh.z,0,-Nh.x,Bh.z,0,-Bh.x,Xm.z,0,-Xm.x,-Nh.y,Nh.x,0,-Bh.y,Bh.x,0,-Xm.y,Xm.x,0];return!rk(t,kg,Lg,Og,NC)||(t=[1,0,0,0,1,0,0,0,1],!rk(t,kg,Lg,Og,NC))?!1:(BC.crossVectors(Nh,Bh),t=[BC.x,BC.y,BC.z],rk(t,kg,Lg,Og,NC))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Km.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Km).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(tf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),tf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),tf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),tf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),tf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),tf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),tf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),tf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(tf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const tf=[new it,new it,new it,new it,new it,new it,new it,new it],Km=new it,nk=new Ov,kg=new it,Lg=new it,Og=new it,Nh=new it,Bh=new it,Xm=new it,cS=new it,NC=new it,BC=new it,Ym=new it;function rk(n,e,t,r,i){for(let a=0,s=n.length-3;a<=s;a+=3){Ym.fromArray(n,a);const o=i.x*Math.abs(Ym.x)+i.y*Math.abs(Ym.y)+i.z*Math.abs(Ym.z),l=e.dot(Ym),u=t.dot(Ym),c=r.dot(Ym);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const Mst=new Ov,rX=new it,FC=new it,ik=new it;let Nv=class{constructor(e=new it,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):Mst.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){ik.subVectors(e,this.center);const t=ik.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.add(ik.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return this.center.equals(e.center)===!0?FC.set(0,0,1).multiplyScalar(e.radius):FC.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(rX.copy(e.center).add(FC)),this.expandByPoint(rX.copy(e.center).sub(FC)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const nf=new it,ak=new it,UC=new it,Fh=new it,sk=new it,zC=new it,ok=new it;let PI=class{constructor(e=new it,t=new it(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,nf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=nf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(nf.copy(this.direction).multiplyScalar(t).add(this.origin),nf.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){ak.copy(e).add(t).multiplyScalar(.5),UC.copy(t).sub(e).normalize(),Fh.copy(this.origin).sub(ak);const a=e.distanceTo(t)*.5,s=-this.direction.dot(UC),o=Fh.dot(this.direction),l=-Fh.dot(UC),u=Fh.lengthSq(),c=Math.abs(1-s*s);let d,f,h,p;if(c>0)if(d=s*l-o,f=s*o-l,p=a*c,d>=0)if(f>=-p)if(f<=p){const m=1/c;d*=m,f*=m,h=d*(d+s*f+2*o)+f*(s*d+f+2*l)+u}else f=a,d=Math.max(0,-(s*f+o)),h=-d*d+f*(f+2*l)+u;else f=-a,d=Math.max(0,-(s*f+o)),h=-d*d+f*(f+2*l)+u;else f<=-p?(d=Math.max(0,-(-s*a+o)),f=d>0?-a:Math.min(Math.max(-a,-l),a),h=-d*d+f*(f+2*l)+u):f<=p?(d=0,f=Math.min(Math.max(-a,-l),a),h=f*(f+2*l)+u):(d=Math.max(0,-(s*a+o)),f=d>0?a:Math.min(Math.max(-a,-l),a),h=-d*d+f*(f+2*l)+u);else f=s>0?-a:a,d=Math.max(0,-(s*f+o)),h=-d*d+f*(f+2*l)+u;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(UC).multiplyScalar(f).add(ak),h}intersectSphere(e,t){nf.subVectors(e.center,this.origin);const r=nf.dot(this.direction),i=nf.dot(nf)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,l=r+s;return o<0&&l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,s,o,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),c>=0?(a=(e.min.y-f.y)*c,s=(e.max.y-f.y)*c):(a=(e.max.y-f.y)*c,s=(e.min.y-f.y)*c),r>s||a>i||((a>r||r!==r)&&(r=a),(s<i||i!==i)&&(i=s),d>=0?(o=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,nf)!==null}intersectTriangle(e,t,r,i,a){sk.subVectors(t,e),zC.subVectors(r,e),ok.crossVectors(sk,zC);let s=this.direction.dot(ok),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Fh.subVectors(this.origin,e);const l=o*this.direction.dot(zC.crossVectors(Fh,zC));if(l<0)return null;const u=o*this.direction.dot(sk.cross(Fh));if(u<0||l+u>s)return null;const c=-o*Fh.dot(ok);return c<0?null:this.at(c/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},or=class OO{constructor(){OO.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,a,s,o,l,u,c,d,f,h,p,m,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=a,g[5]=s,g[9]=o,g[13]=l,g[2]=u,g[6]=c,g[10]=d,g[14]=f,g[3]=h,g[7]=p,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new OO().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Ng.setFromMatrixColumn(e,0).length(),a=1/Ng.setFromMatrixColumn(e,1).length(),s=1/Ng.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),d=Math.sin(a);if(e.order==="XYZ"){const f=s*c,h=s*d,p=o*c,m=o*d;t[0]=l*c,t[4]=-l*d,t[8]=u,t[1]=h+p*u,t[5]=f-m*u,t[9]=-o*l,t[2]=m-f*u,t[6]=p+h*u,t[10]=s*l}else if(e.order==="YXZ"){const f=l*c,h=l*d,p=u*c,m=u*d;t[0]=f+m*o,t[4]=p*o-h,t[8]=s*u,t[1]=s*d,t[5]=s*c,t[9]=-o,t[2]=h*o-p,t[6]=m+f*o,t[10]=s*l}else if(e.order==="ZXY"){const f=l*c,h=l*d,p=u*c,m=u*d;t[0]=f-m*o,t[4]=-s*d,t[8]=p+h*o,t[1]=h+p*o,t[5]=s*c,t[9]=m-f*o,t[2]=-s*u,t[6]=o,t[10]=s*l}else if(e.order==="ZYX"){const f=s*c,h=s*d,p=o*c,m=o*d;t[0]=l*c,t[4]=p*u-h,t[8]=f*u+m,t[1]=l*d,t[5]=m*u+f,t[9]=h*u-p,t[2]=-u,t[6]=o*l,t[10]=s*l}else if(e.order==="YZX"){const f=s*l,h=s*u,p=o*l,m=o*u;t[0]=l*c,t[4]=m-f*d,t[8]=p*d+h,t[1]=d,t[5]=s*c,t[9]=-o*c,t[2]=-u*c,t[6]=h*d+p,t[10]=f-m*d}else if(e.order==="XZY"){const f=s*l,h=s*u,p=o*l,m=o*u;t[0]=l*c,t[4]=-d,t[8]=u*c,t[1]=f*d+m,t[5]=s*c,t[9]=h*d-p,t[2]=p*d-h,t[6]=o*c,t[10]=m*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ist,e,Dst)}lookAt(e,t,r){const i=this.elements;return Fl.subVectors(e,t),Fl.lengthSq()===0&&(Fl.z=1),Fl.normalize(),Uh.crossVectors(r,Fl),Uh.lengthSq()===0&&(Math.abs(r.z)===1?Fl.x+=1e-4:Fl.z+=1e-4,Fl.normalize(),Uh.crossVectors(r,Fl)),Uh.normalize(),HC.crossVectors(Fl,Uh),i[0]=Uh.x,i[4]=HC.x,i[8]=Fl.x,i[1]=Uh.y,i[5]=HC.y,i[9]=Fl.y,i[2]=Uh.z,i[6]=HC.z,i[10]=Fl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[4],l=r[8],u=r[12],c=r[1],d=r[5],f=r[9],h=r[13],p=r[2],m=r[6],v=r[10],g=r[14],y=r[3],_=r[7],b=r[11],x=r[15],w=i[0],A=i[4],T=i[8],C=i[12],E=i[1],I=i[5],P=i[9],L=i[13],N=i[2],F=i[6],k=i[10],H=i[14],U=i[3],B=i[7],$=i[11],ee=i[15];return a[0]=s*w+o*E+l*N+u*U,a[4]=s*A+o*I+l*F+u*B,a[8]=s*T+o*P+l*k+u*$,a[12]=s*C+o*L+l*H+u*ee,a[1]=c*w+d*E+f*N+h*U,a[5]=c*A+d*I+f*F+h*B,a[9]=c*T+d*P+f*k+h*$,a[13]=c*C+d*L+f*H+h*ee,a[2]=p*w+m*E+v*N+g*U,a[6]=p*A+m*I+v*F+g*B,a[10]=p*T+m*P+v*k+g*$,a[14]=p*C+m*L+v*H+g*ee,a[3]=y*w+_*E+b*N+x*U,a[7]=y*A+_*I+b*F+x*B,a[11]=y*T+_*P+b*k+x*$,a[15]=y*C+_*L+b*H+x*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],c=e[2],d=e[6],f=e[10],h=e[14],p=e[3],m=e[7],v=e[11],g=e[15];return p*(+a*l*d-i*u*d-a*o*f+r*u*f+i*o*h-r*l*h)+m*(+t*l*h-t*u*f+a*s*f-i*s*h+i*u*c-a*l*c)+v*(+t*u*d-t*o*h-a*s*d+r*s*h+a*o*c-r*u*c)+g*(-i*o*c-t*l*d+t*o*f+i*s*d-r*s*f+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],v=e[14],g=e[15],y=d*v*u-m*f*u+m*l*h-o*v*h-d*l*g+o*f*g,_=p*f*u-c*v*u-p*l*h+s*v*h+c*l*g-s*f*g,b=c*m*u-p*d*u+p*o*h-s*m*h-c*o*g+s*d*g,x=p*d*l-c*m*l-p*o*f+s*m*f+c*o*v-s*d*v,w=t*y+r*_+i*b+a*x;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/w;return e[0]=y*A,e[1]=(m*f*a-d*v*a-m*i*h+r*v*h+d*i*g-r*f*g)*A,e[2]=(o*v*a-m*l*a+m*i*u-r*v*u-o*i*g+r*l*g)*A,e[3]=(d*l*a-o*f*a-d*i*u+r*f*u+o*i*h-r*l*h)*A,e[4]=_*A,e[5]=(c*v*a-p*f*a+p*i*h-t*v*h-c*i*g+t*f*g)*A,e[6]=(p*l*a-s*v*a-p*i*u+t*v*u+s*i*g-t*l*g)*A,e[7]=(s*f*a-c*l*a+c*i*u-t*f*u-s*i*h+t*l*h)*A,e[8]=b*A,e[9]=(p*d*a-c*m*a-p*r*h+t*m*h+c*r*g-t*d*g)*A,e[10]=(s*m*a-p*o*a+p*r*u-t*m*u-s*r*g+t*o*g)*A,e[11]=(c*o*a-s*d*a-c*r*u+t*d*u+s*r*h-t*o*h)*A,e[12]=x*A,e[13]=(c*m*i-p*d*i+p*r*f-t*m*f-c*r*v+t*d*v)*A,e[14]=(p*o*i-s*m*i-p*r*l+t*m*l+s*r*v-t*o*v)*A,e[15]=(s*d*i-c*o*i+c*r*l-t*d*l-s*r*f+t*o*f)*A,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,s=e.x,o=e.y,l=e.z,u=a*s,c=a*o;return this.set(u*s+r,u*o-i*l,u*l+i*o,0,u*o+i*l,c*o+r,c*l-i*s,0,u*l-i*o,c*l+i*s,a*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,s=t._y,o=t._z,l=t._w,u=a+a,c=s+s,d=o+o,f=a*u,h=a*c,p=a*d,m=s*c,v=s*d,g=o*d,y=l*u,_=l*c,b=l*d,x=r.x,w=r.y,A=r.z;return i[0]=(1-(m+g))*x,i[1]=(h+b)*x,i[2]=(p-_)*x,i[3]=0,i[4]=(h-b)*w,i[5]=(1-(f+g))*w,i[6]=(v+y)*w,i[7]=0,i[8]=(p+_)*A,i[9]=(v-y)*A,i[10]=(1-(f+m))*A,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let a=Ng.set(i[0],i[1],i[2]).length();const s=Ng.set(i[4],i[5],i[6]).length(),o=Ng.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],hc.copy(this);const u=1/a,c=1/s,d=1/o;return hc.elements[0]*=u,hc.elements[1]*=u,hc.elements[2]*=u,hc.elements[4]*=c,hc.elements[5]*=c,hc.elements[6]*=c,hc.elements[8]*=d,hc.elements[9]*=d,hc.elements[10]*=d,t.setFromRotationMatrix(hc),r.x=a,r.y=s,r.z=o,this}makePerspective(e,t,r,i,a,s){const o=this.elements,l=2*a/(t-e),u=2*a/(r-i),c=(t+e)/(t-e),d=(r+i)/(r-i),f=-(s+a)/(s-a),h=-2*s*a/(s-a);return o[0]=l,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,r,i,a,s){const o=this.elements,l=1/(t-e),u=1/(r-i),c=1/(s-a),d=(t+e)*l,f=(r+i)*u,h=(s+a)*c;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}};const Ng=new it,hc=new or,Ist=new it(0,0,0),Dst=new it(1,1,1),Uh=new it,HC=new it,Fl=new it,iX=new or,aX=new qs;let Pf=class Sde{constructor(e=0,t=0,r=0,i=Sde.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],u=i[5],c=i[9],d=i[2],f=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(cs(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-cs(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(cs(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-cs(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(cs(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-cs(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return iX.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iX,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return aX.setFromEuler(this),this.setFromQuaternion(aX,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}};Pf.DefaultOrder="XYZ";Pf.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];let y9=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Pst=0;const sX=new it,Bg=new qs,rf=new or,VC=new it,dS=new it,Rst=new it,kst=new qs,oX=new it(1,0,0),lX=new it(0,1,0),uX=new it(0,0,1),Lst={type:"added"},cX={type:"removed"};let Sa=class NO extends fm{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pst++}),this.uuid=Hu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=NO.DefaultUp.clone();const e=new it,t=new Pf,r=new qs,i=new it(1,1,1);function a(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new or},normalMatrix:{value:new Nu}}),this.matrix=new or,this.matrixWorld=new or,this.matrixAutoUpdate=NO.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new y9,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Bg.setFromAxisAngle(e,t),this.quaternion.multiply(Bg),this}rotateOnWorldAxis(e,t){return Bg.setFromAxisAngle(e,t),this.quaternion.premultiply(Bg),this}rotateX(e){return this.rotateOnAxis(oX,e)}rotateY(e){return this.rotateOnAxis(lX,e)}rotateZ(e){return this.rotateOnAxis(uX,e)}translateOnAxis(e,t){return sX.copy(e).applyQuaternion(this.quaternion),this.position.add(sX.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(oX,e)}translateY(e){return this.translateOnAxis(lX,e)}translateZ(e){return this.translateOnAxis(uX,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(rf.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?VC.copy(e):VC.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),dS.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rf.lookAt(dS,VC,this.up):rf.lookAt(VC,dS,this.up),this.quaternion.setFromRotationMatrix(rf),i&&(rf.extractRotation(i.matrixWorld),Bg.setFromRotationMatrix(rf),this.quaternion.premultiply(Bg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Lst)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(cX)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(cX)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),rf.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),rf.multiply(e.parent.matrixWorld)),e.applyMatrix4(rf),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dS,e,Rst),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dS,kst,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];a(e.shapes,d)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(a(e.materials,this.material[l]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(a(e.animations,l))}}if(t){const o=s(e.geometries),l=s(e.materials),u=s(e.textures),c=s(e.images),d=s(e.shapes),f=s(e.skeletons),h=s(e.animations),p=s(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),h.length>0&&(r.animations=h),p.length>0&&(r.nodes=p)}return r.object=i,r;function s(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}};Sa.DefaultUp=new it(0,1,0);Sa.DefaultMatrixAutoUpdate=!0;const pc=new it,af=new it,lk=new it,sf=new it,Fg=new it,Ug=new it,dX=new it,uk=new it,ck=new it,dk=new it;let bx=class Ty{constructor(e=new it,t=new it,r=new it){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),pc.subVectors(e,t),i.cross(pc);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){pc.subVectors(i,t),af.subVectors(r,t),lk.subVectors(e,t);const s=pc.dot(pc),o=pc.dot(af),l=pc.dot(lk),u=af.dot(af),c=af.dot(lk),d=s*u-o*o;if(d===0)return a.set(-2,-1,-1);const f=1/d,h=(u*l-o*c)*f,p=(s*c-o*l)*f;return a.set(1-h-p,p,h)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,sf),sf.x>=0&&sf.y>=0&&sf.x+sf.y<=1}static getUV(e,t,r,i,a,s,o,l){return this.getBarycoord(e,t,r,i,sf),l.set(0,0),l.addScaledVector(a,sf.x),l.addScaledVector(s,sf.y),l.addScaledVector(o,sf.z),l}static isFrontFacing(e,t,r,i){return pc.subVectors(r,t),af.subVectors(e,t),pc.cross(af).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return pc.subVectors(this.c,this.b),af.subVectors(this.a,this.b),pc.cross(af).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ty.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ty.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,a){return Ty.getUV(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return Ty.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ty.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let s,o;Fg.subVectors(i,r),Ug.subVectors(a,r),uk.subVectors(e,r);const l=Fg.dot(uk),u=Ug.dot(uk);if(l<=0&&u<=0)return t.copy(r);ck.subVectors(e,i);const c=Fg.dot(ck),d=Ug.dot(ck);if(c>=0&&d<=c)return t.copy(i);const f=l*d-c*u;if(f<=0&&l>=0&&c<=0)return s=l/(l-c),t.copy(r).addScaledVector(Fg,s);dk.subVectors(e,a);const h=Fg.dot(dk),p=Ug.dot(dk);if(p>=0&&h<=p)return t.copy(a);const m=h*u-l*p;if(m<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(r).addScaledVector(Ug,o);const v=c*p-h*d;if(v<=0&&d-c>=0&&h-p>=0)return dX.subVectors(a,i),o=(d-c)/(d-c+(h-p)),t.copy(i).addScaledVector(dX,o);const g=1/(v+m+f);return s=m*g,o=f*g,t.copy(r).addScaledVector(Fg,s).addScaledVector(Ug,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Ost=0,ts=class extends fm{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ost++}),this.uuid=Hu(),this.name="",this.type="Material",this.blending=f1,this.side=Qp,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=ode,this.blendDst=lde,this.blendEquation=wy,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=DO,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ust,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=QR,this.stencilZFail=QR,this.stencilZPass=QR,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===pat;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==f1&&(r.blending=this.blending),this.side!==Qp&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(t){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Dc=class extends ts{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Un(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=DI,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const Ya=new it,$C=new sn;let ka=class{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r===!0,this.usage=PO,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new Un),t[r++]=s.r,t[r++]=s.g,t[r++]=s.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new sn),t[r++]=s.x,t[r++]=s.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new it),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let i=0,a=e.length;i<a;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new ki),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z,t[r++]=s.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)$C.fromBufferAttribute(this,t),$C.applyMatrix3(e),this.setXY(t,$C.x,$C.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Ya.fromBufferAttribute(this,t),Ya.applyMatrix3(e),this.setXYZ(t,Ya.x,Ya.y,Ya.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Ya.fromBufferAttribute(this,t),Ya.applyMatrix4(e),this.setXYZ(t,Ya.x,Ya.y,Ya.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ya.fromBufferAttribute(this,t),Ya.applyNormalMatrix(e),this.setXYZ(t,Ya.x,Ya.y,Ya.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ya.fromBufferAttribute(this,t),Ya.transformDirection(e),this.setXYZ(t,Ya.x,Ya.y,Ya.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==PO&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}},_9=class extends ka{constructor(e,t,r){super(new Uint16Array(e),t,r)}},xde=class extends ka{constructor(e,t,r){super(new Uint32Array(e),t,r)}},Kn=class extends ka{constructor(e,t,r){super(new Float32Array(e),t,r)}},Nst=0;const pu=new or,fk=new Sa,zg=new it,Ul=new Ov,fS=new Ov,xs=new it;let pi=class wde extends fm{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Nst++}),this.uuid=Hu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(mde(e)?xde:_9)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Nu().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return pu.makeRotationFromQuaternion(e),this.applyMatrix4(pu),this}rotateX(e){return pu.makeRotationX(e),this.applyMatrix4(pu),this}rotateY(e){return pu.makeRotationY(e),this.applyMatrix4(pu),this}rotateZ(e){return pu.makeRotationZ(e),this.applyMatrix4(pu),this}translate(e,t,r){return pu.makeTranslation(e,t,r),this.applyMatrix4(pu),this}scale(e,t,r){return pu.makeScale(e,t,r),this.applyMatrix4(pu),this}lookAt(e){return fk.lookAt(e),fk.updateMatrix(),this.applyMatrix4(fk.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zg).negate(),this.translate(zg.x,zg.y,zg.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new Kn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ov);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new it(-1/0,-1/0,-1/0),new it(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];Ul.setFromBufferAttribute(a),this.morphTargetsRelative?(xs.addVectors(this.boundingBox.min,Ul.min),this.boundingBox.expandByPoint(xs),xs.addVectors(this.boundingBox.max,Ul.max),this.boundingBox.expandByPoint(xs)):(this.boundingBox.expandByPoint(Ul.min),this.boundingBox.expandByPoint(Ul.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Nv);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new it,1/0);return}if(e){const r=this.boundingSphere.center;if(Ul.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];fS.setFromBufferAttribute(o),this.morphTargetsRelative?(xs.addVectors(Ul.min,fS.min),Ul.expandByPoint(xs),xs.addVectors(Ul.max,fS.max),Ul.expandByPoint(xs)):(Ul.expandByPoint(fS.min),Ul.expandByPoint(fS.max))}Ul.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)xs.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(xs));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)xs.fromBufferAttribute(o,u),l&&(zg.fromBufferAttribute(e,u),xs.add(zg)),i=Math.max(i,r.distanceToSquared(xs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,a=t.normal.array,s=t.uv.array,o=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ka(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let E=0;E<o;E++)u[E]=new it,c[E]=new it;const d=new it,f=new it,h=new it,p=new sn,m=new sn,v=new sn,g=new it,y=new it;function _(E,I,P){d.fromArray(i,E*3),f.fromArray(i,I*3),h.fromArray(i,P*3),p.fromArray(s,E*2),m.fromArray(s,I*2),v.fromArray(s,P*2),f.sub(d),h.sub(d),m.sub(p),v.sub(p);const L=1/(m.x*v.y-v.x*m.y);isFinite(L)&&(g.copy(f).multiplyScalar(v.y).addScaledVector(h,-m.y).multiplyScalar(L),y.copy(h).multiplyScalar(m.x).addScaledVector(f,-v.x).multiplyScalar(L),u[E].add(g),u[I].add(g),u[P].add(g),c[E].add(y),c[I].add(y),c[P].add(y))}let b=this.groups;b.length===0&&(b=[{start:0,count:r.length}]);for(let E=0,I=b.length;E<I;++E){const P=b[E],L=P.start,N=P.count;for(let F=L,k=L+N;F<k;F+=3)_(r[F+0],r[F+1],r[F+2])}const x=new it,w=new it,A=new it,T=new it;function C(E){A.fromArray(a,E*3),T.copy(A);const I=u[E];x.copy(I),x.sub(A.multiplyScalar(A.dot(I))).normalize(),w.crossVectors(T,I);const L=w.dot(c[E])<0?-1:1;l[E*4]=x.x,l[E*4+1]=x.y,l[E*4+2]=x.z,l[E*4+3]=L}for(let E=0,I=b.length;E<I;++E){const P=b[E],L=P.start,N=P.count;for(let F=L,k=L+N;F<k;F+=3)C(r[F+0]),C(r[F+1]),C(r[F+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ka(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,h=r.count;f<h;f++)r.setXYZ(f,0,0,0);const i=new it,a=new it,s=new it,o=new it,l=new it,u=new it,c=new it,d=new it;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),m=e.getX(f+1),v=e.getX(f+2);i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,m),s.fromBufferAttribute(t,v),c.subVectors(s,a),d.subVectors(i,a),c.cross(d),o.fromBufferAttribute(r,p),l.fromBufferAttribute(r,m),u.fromBufferAttribute(r,v),o.add(c),l.add(c),u.add(c),r.setXYZ(p,o.x,o.y,o.z),r.setXYZ(m,l.x,l.y,l.z),r.setXYZ(v,u.x,u.y,u.z)}else for(let f=0,h=t.count;f<h;f+=3)i.fromBufferAttribute(t,f+0),a.fromBufferAttribute(t,f+1),s.fromBufferAttribute(t,f+2),c.subVectors(s,a),d.subVectors(i,a),c.cross(d),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(e.attributes[i]===void 0)continue;const s=r[i].array,o=e.attributes[i],l=o.array,u=o.itemSize*t,c=Math.min(l.length,s.length-u);for(let d=0,f=u;d<c;d++,f++)s[f]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)xs.fromBufferAttribute(e,t),xs.normalize(),e.setXYZ(t,xs.x,xs.y,xs.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,d=o.normalized,f=new u.constructor(l.length*c);let h=0,p=0;for(let m=0,v=l.length;m<v;m++){o.isInterleavedBufferAttribute?h=l[m]*o.data.stride+o.offset:h=l[m]*c;for(let g=0;g<c;g++)f[p++]=u[h++]}return new ka(f,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new wde,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);t.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const l=[],u=a[o];for(let c=0,d=u.length;c<d;c++){const f=u[c],h=e(f,r);l.push(h)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const u=s[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,f=u.length;d<f;d++){const h=u[d];c.push(h.toJSON(e.data))}c.length>0&&(i[l]=c,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const a=e.morphAttributes;for(const u in a){const c=[],d=a[u];for(let f=0,h=d.length;f<h;f++)c.push(d[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,c=s.length;u<c;u++){const d=s[u];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}};const fX=new or,Hg=new PI,hk=new Nv,zh=new it,Hh=new it,Vh=new it,pk=new it,mk=new it,vk=new it,GC=new it,WC=new it,qC=new it,jC=new sn,KC=new sn,XC=new sn,gk=new it,YC=new it;let ps=class extends Sa{constructor(e=new pi,t=new Dc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),hk.copy(r.boundingSphere),hk.applyMatrix4(a),e.ray.intersectsSphere(hk)===!1)||(fX.copy(a).invert(),Hg.copy(e.ray).applyMatrix4(fX),r.boundingBox!==null&&Hg.intersectsBox(r.boundingBox)===!1))return;let s;const o=r.index,l=r.attributes.position,u=r.morphAttributes.position,c=r.morphTargetsRelative,d=r.attributes.uv,f=r.attributes.uv2,h=r.groups,p=r.drawRange;if(o!==null)if(Array.isArray(i))for(let m=0,v=h.length;m<v;m++){const g=h[m],y=i[g.materialIndex],_=Math.max(g.start,p.start),b=Math.min(o.count,Math.min(g.start+g.count,p.start+p.count));for(let x=_,w=b;x<w;x+=3){const A=o.getX(x),T=o.getX(x+1),C=o.getX(x+2);s=QC(this,y,e,Hg,l,u,c,d,f,A,T,C),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{const m=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let g=m,y=v;g<y;g+=3){const _=o.getX(g),b=o.getX(g+1),x=o.getX(g+2);s=QC(this,i,e,Hg,l,u,c,d,f,_,b,x),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(i))for(let m=0,v=h.length;m<v;m++){const g=h[m],y=i[g.materialIndex],_=Math.max(g.start,p.start),b=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let x=_,w=b;x<w;x+=3){const A=x,T=x+1,C=x+2;s=QC(this,y,e,Hg,l,u,c,d,f,A,T,C),s&&(s.faceIndex=Math.floor(x/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{const m=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let g=m,y=v;g<y;g+=3){const _=g,b=g+1,x=g+2;s=QC(this,i,e,Hg,l,u,c,d,f,_,b,x),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}}};function Bst(n,e,t,r,i,a,s,o){let l;if(e.side===Nc?l=r.intersectTriangle(s,a,i,!0,o):l=r.intersectTriangle(i,a,s,e.side!==Zp,o),l===null)return null;YC.copy(o),YC.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(YC);return u<t.near||u>t.far?null:{distance:u,point:YC.clone(),object:n}}function QC(n,e,t,r,i,a,s,o,l,u,c,d){zh.fromBufferAttribute(i,u),Hh.fromBufferAttribute(i,c),Vh.fromBufferAttribute(i,d);const f=n.morphTargetInfluences;if(a&&f){GC.set(0,0,0),WC.set(0,0,0),qC.set(0,0,0);for(let p=0,m=a.length;p<m;p++){const v=f[p],g=a[p];v!==0&&(pk.fromBufferAttribute(g,u),mk.fromBufferAttribute(g,c),vk.fromBufferAttribute(g,d),s?(GC.addScaledVector(pk,v),WC.addScaledVector(mk,v),qC.addScaledVector(vk,v)):(GC.addScaledVector(pk.sub(zh),v),WC.addScaledVector(mk.sub(Hh),v),qC.addScaledVector(vk.sub(Vh),v)))}zh.add(GC),Hh.add(WC),Vh.add(qC)}n.isSkinnedMesh&&(n.boneTransform(u,zh),n.boneTransform(c,Hh),n.boneTransform(d,Vh));const h=Bst(n,e,t,r,zh,Hh,Vh,gk);if(h){o&&(jC.fromBufferAttribute(o,u),KC.fromBufferAttribute(o,c),XC.fromBufferAttribute(o,d),h.uv=bx.getUV(gk,zh,Hh,Vh,jC,KC,XC,new sn)),l&&(jC.fromBufferAttribute(l,u),KC.fromBufferAttribute(l,c),XC.fromBufferAttribute(l,d),h.uv2=bx.getUV(gk,zh,Hh,Vh,jC,KC,XC,new sn));const p={a:u,b:c,c:d,normal:new it,materialIndex:0};bx.getNormal(zh,Hh,Vh,p.normal),h.face=p}return h}let q2=class Tde extends pi{constructor(e=1,t=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],c=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,r,t,e,s,a,0),p("z","y","x",1,-1,r,t,-e,s,a,1),p("x","z","y",1,1,e,r,t,i,s,2),p("x","z","y",1,-1,e,r,-t,i,s,3),p("x","y","z",1,-1,e,t,r,i,a,4),p("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new Kn(u,3)),this.setAttribute("normal",new Kn(c,3)),this.setAttribute("uv",new Kn(d,2));function p(m,v,g,y,_,b,x,w,A,T,C){const E=b/A,I=x/T,P=b/2,L=x/2,N=w/2,F=A+1,k=T+1;let H=0,U=0;const B=new it;for(let $=0;$<k;$++){const ee=$*I-L;for(let re=0;re<F;re++){const ne=re*E-P;B[m]=ne*y,B[v]=ee*_,B[g]=N,u.push(B.x,B.y,B.z),B[m]=0,B[v]=0,B[g]=w>0?1:-1,c.push(B.x,B.y,B.z),d.push(re/A),d.push(1-$/T),H+=1}}for(let $=0;$<T;$++)for(let ee=0;ee<A;ee++){const re=f+ee+F*$,ne=f+ee+F*($+1),ae=f+(ee+1)+F*($+1),pe=f+(ee+1)+F*$;l.push(re,ne,pe),l.push(ne,ae,pe),U+=6}o.addGroup(h,U,C),h+=U,f+=H}}static fromJSON(e){return new Tde(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function i_(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function uo(n){const e={};for(let t=0;t<n.length;t++){const r=i_(n[t]);for(const i in r)e[i]=r[i]}return e}function Fst(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const Ust={clone:i_,merge:uo};var zst=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Hst=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let eh=class extends ts{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=zst,this.fragmentShader=Hst,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=i_(e.uniforms),this.uniformsGroups=Fst(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},Cde=class extends Sa{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new or,this.projectionMatrix=new or,this.projectionMatrixInverse=new or}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ds=class extends Cde{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=G2*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(p1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return G2*2*Math.atan(Math.tan(p1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(p1*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/l,t-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Vg=90,$g=1;let Vst=class extends Sa{constructor(e,t,r){if(super(),this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const i=new ds(Vg,$g,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new it(1,0,0)),this.add(i);const a=new ds(Vg,$g,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new it(-1,0,0)),this.add(a);const s=new ds(Vg,$g,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new it(0,1,0)),this.add(s);const o=new ds(Vg,$g,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new it(0,-1,0)),this.add(o);const l=new ds(Vg,$g,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new it(0,0,1)),this.add(l);const u=new ds(Vg,$g,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new it(0,0,-1)),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,a,s,o,l,u]=this.children,c=e.getRenderTarget(),d=e.toneMapping,f=e.xr.enabled;e.toneMapping=Uf,e.xr.enabled=!1;const h=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,a),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,o),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=h,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(c),e.toneMapping=d,e.xr.enabled=f,r.texture.needsPMREMUpdate=!0}},b9=class extends Qs{constructor(e,t,r,i,a,s,o,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:vv,super(e,t,r,i,a,s,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},$st=class extends _v{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new b9(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Za}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new q2(5,5,5),a=new eh({name:"CubemapFromEquirect",uniforms:i_(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Nc,blending:Ap});a.uniforms.tEquirect.value=t;const s=new ps(i,a),o=t.minFilter;return t.minFilter===yh&&(t.minFilter=Za),new Vst(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(a)}};const yk=new it,Gst=new it,Wst=new Nu;let s0=class{constructor(e=new it(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=yk.subVectors(r,t).cross(Gst.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(yk),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(r).multiplyScalar(a).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Wst.getNormalMatrix(e),i=this.coplanarPoint(yk).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Gg=new Nv,ZC=new it;let S9=class{constructor(e=new s0,t=new s0,r=new s0,i=new s0,a=new s0,s=new s0){this.planes=[e,t,r,i,a,s]}set(e,t,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],a=r[1],s=r[2],o=r[3],l=r[4],u=r[5],c=r[6],d=r[7],f=r[8],h=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15];return t[0].setComponents(o-i,d-l,m-f,_-v).normalize(),t[1].setComponents(o+i,d+l,m+f,_+v).normalize(),t[2].setComponents(o+a,d+u,m+h,_+g).normalize(),t[3].setComponents(o-a,d-u,m-h,_-g).normalize(),t[4].setComponents(o-s,d-c,m-p,_-y).normalize(),t[5].setComponents(o+s,d+c,m+p,_+y).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Gg.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Gg)}intersectsSprite(e){return Gg.center.set(0,0,0),Gg.radius=.7071067811865476,Gg.applyMatrix4(e.matrixWorld),this.intersectsSphere(Gg)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(ZC.x=i.normal.x>0?e.max.x:e.min.x,ZC.y=i.normal.y>0?e.max.y:e.min.y,ZC.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ZC)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Ade(){let n=null,e=!1,t=null,r=null;function i(a,s){t(a,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function qst(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const d=u.array,f=u.usage,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,d,f),u.onUploadCallback();let p;if(d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else if(d instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:h,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function a(u,c,d){const f=c.array,h=c.updateRange;n.bindBuffer(d,u),h.count===-1?n.bufferSubData(d,0,f):(t?n.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):n.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1)}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const f=r.get(u);(!f||f.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=r.get(u);d===void 0?r.set(u,i(u,c)):d.version<u.version&&(a(d.buffer,u,c),d.version=u.version)}return{get:s,remove:o,update:l}}let BO=class Ede extends pi{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,s=t/2,o=Math.floor(r),l=Math.floor(i),u=o+1,c=l+1,d=e/o,f=t/l,h=[],p=[],m=[],v=[];for(let g=0;g<c;g++){const y=g*f-s;for(let _=0;_<u;_++){const b=_*d-a;p.push(b,-y,0),m.push(0,0,1),v.push(_/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let y=0;y<o;y++){const _=y+u*g,b=y+u*(g+1),x=y+1+u*(g+1),w=y+1+u*g;h.push(_,b,w),h.push(b,x,w)}this.setIndex(h),this.setAttribute("position",new Kn(p,3)),this.setAttribute("normal",new Kn(m,3)),this.setAttribute("uv",new Kn(v,2))}static fromJSON(e){return new Ede(e.width,e.height,e.widthSegments,e.heightSegments)}};var jst=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Kst=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Xst=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Yst=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Qst=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Zst=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Jst="vec3 transformed = vec3( position );",eot=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,tot=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,not=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,rot=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,iot=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,aot=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,sot=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,oot=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,lot=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,uot=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,cot=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,dot=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,fot=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,hot=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,pot=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,mot=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,vot=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,got=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,yot=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,_ot="gl_FragColor = linearToOutputTexel( gl_FragColor );",bot=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Sot=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,xot=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,wot=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Tot=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Cot=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Aot=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Eot=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Mot=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Iot=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Dot=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Pot=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Rot=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,kot=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Lot=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Oot=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Not=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Bot=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Fot=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Uot=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,zot=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Hot=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Vot=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$ot=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Got=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Wot=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,qot=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,jot=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Kot=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Xot=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Yot=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Qot=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Zot=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Jot=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,elt=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,tlt=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,nlt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,rlt=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,ilt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,alt=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,slt=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,olt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,llt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ult=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,clt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,dlt=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,flt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,hlt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,plt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,mlt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,vlt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,glt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ylt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,_lt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,blt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Slt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xlt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,wlt=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Tlt=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Clt=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Alt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Elt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Mlt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Ilt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Dlt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Plt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Rlt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,klt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Llt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Olt=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,Nlt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Blt=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Flt=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Ult=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,zlt=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Hlt=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Vlt=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,$lt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Glt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Wlt=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,qlt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,jlt=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Klt=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Xlt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Ylt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Qlt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Zlt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Jlt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,eut=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tut=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nut=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,rut=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iut=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aut=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sut=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,out=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lut=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,uut=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,cut=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dut=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fut=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,hut=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,put=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mut=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vut=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,gut=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yut=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_ut=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,but=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Sut=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ui={alphamap_fragment:jst,alphamap_pars_fragment:Kst,alphatest_fragment:Xst,alphatest_pars_fragment:Yst,aomap_fragment:Qst,aomap_pars_fragment:Zst,begin_vertex:Jst,beginnormal_vertex:eot,bsdfs:tot,iridescence_fragment:not,bumpmap_pars_fragment:rot,clipping_planes_fragment:iot,clipping_planes_pars_fragment:aot,clipping_planes_pars_vertex:sot,clipping_planes_vertex:oot,color_fragment:lot,color_pars_fragment:uot,color_pars_vertex:cot,color_vertex:dot,common:fot,cube_uv_reflection_fragment:hot,defaultnormal_vertex:pot,displacementmap_pars_vertex:mot,displacementmap_vertex:vot,emissivemap_fragment:got,emissivemap_pars_fragment:yot,encodings_fragment:_ot,encodings_pars_fragment:bot,envmap_fragment:Sot,envmap_common_pars_fragment:xot,envmap_pars_fragment:wot,envmap_pars_vertex:Tot,envmap_physical_pars_fragment:Oot,envmap_vertex:Cot,fog_vertex:Aot,fog_pars_vertex:Eot,fog_fragment:Mot,fog_pars_fragment:Iot,gradientmap_pars_fragment:Dot,lightmap_fragment:Pot,lightmap_pars_fragment:Rot,lights_lambert_vertex:kot,lights_pars_begin:Lot,lights_toon_fragment:Not,lights_toon_pars_fragment:Bot,lights_phong_fragment:Fot,lights_phong_pars_fragment:Uot,lights_physical_fragment:zot,lights_physical_pars_fragment:Hot,lights_fragment_begin:Vot,lights_fragment_maps:$ot,lights_fragment_end:Got,logdepthbuf_fragment:Wot,logdepthbuf_pars_fragment:qot,logdepthbuf_pars_vertex:jot,logdepthbuf_vertex:Kot,map_fragment:Xot,map_pars_fragment:Yot,map_particle_fragment:Qot,map_particle_pars_fragment:Zot,metalnessmap_fragment:Jot,metalnessmap_pars_fragment:elt,morphcolor_vertex:tlt,morphnormal_vertex:nlt,morphtarget_pars_vertex:rlt,morphtarget_vertex:ilt,normal_fragment_begin:alt,normal_fragment_maps:slt,normal_pars_fragment:olt,normal_pars_vertex:llt,normal_vertex:ult,normalmap_pars_fragment:clt,clearcoat_normal_fragment_begin:dlt,clearcoat_normal_fragment_maps:flt,clearcoat_pars_fragment:hlt,iridescence_pars_fragment:plt,output_fragment:mlt,packing:vlt,premultiplied_alpha_fragment:glt,project_vertex:ylt,dithering_fragment:_lt,dithering_pars_fragment:blt,roughnessmap_fragment:Slt,roughnessmap_pars_fragment:xlt,shadowmap_pars_fragment:wlt,shadowmap_pars_vertex:Tlt,shadowmap_vertex:Clt,shadowmask_pars_fragment:Alt,skinbase_vertex:Elt,skinning_pars_vertex:Mlt,skinning_vertex:Ilt,skinnormal_vertex:Dlt,specularmap_fragment:Plt,specularmap_pars_fragment:Rlt,tonemapping_fragment:klt,tonemapping_pars_fragment:Llt,transmission_fragment:Olt,transmission_pars_fragment:Nlt,uv_pars_fragment:Blt,uv_pars_vertex:Flt,uv_vertex:Ult,uv2_pars_fragment:zlt,uv2_pars_vertex:Hlt,uv2_vertex:Vlt,worldpos_vertex:$lt,background_vert:Glt,background_frag:Wlt,cube_vert:qlt,cube_frag:jlt,depth_vert:Klt,depth_frag:Xlt,distanceRGBA_vert:Ylt,distanceRGBA_frag:Qlt,equirect_vert:Zlt,equirect_frag:Jlt,linedashed_vert:eut,linedashed_frag:tut,meshbasic_vert:nut,meshbasic_frag:rut,meshlambert_vert:iut,meshlambert_frag:aut,meshmatcap_vert:sut,meshmatcap_frag:out,meshnormal_vert:lut,meshnormal_frag:uut,meshphong_vert:cut,meshphong_frag:dut,meshphysical_vert:fut,meshphysical_frag:hut,meshtoon_vert:put,meshtoon_frag:mut,points_vert:vut,points_frag:gut,shadow_vert:yut,shadow_frag:_ut,sprite_vert:but,sprite_frag:Sut},$n={common:{diffuse:{value:new Un(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Nu},uv2Transform:{value:new Nu},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new sn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Un(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Un(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Nu}},sprite:{diffuse:{value:new Un(16777215)},opacity:{value:1},center:{value:new sn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Nu}}},od={basic:{uniforms:uo([$n.common,$n.specularmap,$n.envmap,$n.aomap,$n.lightmap,$n.fog]),vertexShader:ui.meshbasic_vert,fragmentShader:ui.meshbasic_frag},lambert:{uniforms:uo([$n.common,$n.specularmap,$n.envmap,$n.aomap,$n.lightmap,$n.emissivemap,$n.fog,$n.lights,{emissive:{value:new Un(0)}}]),vertexShader:ui.meshlambert_vert,fragmentShader:ui.meshlambert_frag},phong:{uniforms:uo([$n.common,$n.specularmap,$n.envmap,$n.aomap,$n.lightmap,$n.emissivemap,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.fog,$n.lights,{emissive:{value:new Un(0)},specular:{value:new Un(1118481)},shininess:{value:30}}]),vertexShader:ui.meshphong_vert,fragmentShader:ui.meshphong_frag},standard:{uniforms:uo([$n.common,$n.envmap,$n.aomap,$n.lightmap,$n.emissivemap,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.roughnessmap,$n.metalnessmap,$n.fog,$n.lights,{emissive:{value:new Un(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ui.meshphysical_vert,fragmentShader:ui.meshphysical_frag},toon:{uniforms:uo([$n.common,$n.aomap,$n.lightmap,$n.emissivemap,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.gradientmap,$n.fog,$n.lights,{emissive:{value:new Un(0)}}]),vertexShader:ui.meshtoon_vert,fragmentShader:ui.meshtoon_frag},matcap:{uniforms:uo([$n.common,$n.bumpmap,$n.normalmap,$n.displacementmap,$n.fog,{matcap:{value:null}}]),vertexShader:ui.meshmatcap_vert,fragmentShader:ui.meshmatcap_frag},points:{uniforms:uo([$n.points,$n.fog]),vertexShader:ui.points_vert,fragmentShader:ui.points_frag},dashed:{uniforms:uo([$n.common,$n.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ui.linedashed_vert,fragmentShader:ui.linedashed_frag},depth:{uniforms:uo([$n.common,$n.displacementmap]),vertexShader:ui.depth_vert,fragmentShader:ui.depth_frag},normal:{uniforms:uo([$n.common,$n.bumpmap,$n.normalmap,$n.displacementmap,{opacity:{value:1}}]),vertexShader:ui.meshnormal_vert,fragmentShader:ui.meshnormal_frag},sprite:{uniforms:uo([$n.sprite,$n.fog]),vertexShader:ui.sprite_vert,fragmentShader:ui.sprite_frag},background:{uniforms:{uvTransform:{value:new Nu},t2D:{value:null}},vertexShader:ui.background_vert,fragmentShader:ui.background_frag},cube:{uniforms:uo([$n.envmap,{opacity:{value:1}}]),vertexShader:ui.cube_vert,fragmentShader:ui.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ui.equirect_vert,fragmentShader:ui.equirect_frag},distanceRGBA:{uniforms:uo([$n.common,$n.displacementmap,{referencePosition:{value:new it},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ui.distanceRGBA_vert,fragmentShader:ui.distanceRGBA_frag},shadow:{uniforms:uo([$n.lights,$n.fog,{color:{value:new Un(0)},opacity:{value:1}}]),vertexShader:ui.shadow_vert,fragmentShader:ui.shadow_frag}};od.physical={uniforms:uo([od.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new sn(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Un(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new sn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Un(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Un(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ui.meshphysical_vert,fragmentShader:ui.meshphysical_frag};function xut(n,e,t,r,i,a){const s=new Un(0);let o=i===!0?0:1,l,u,c=null,d=0,f=null;function h(m,v){let g=!1,y=v.isScene===!0?v.background:null;y&&y.isTexture&&(y=e.get(y));const _=n.xr,b=_.getSession&&_.getSession();b&&b.environmentBlendMode==="additive"&&(y=null),y===null?p(s,o):y&&y.isColor&&(p(y,1),g=!0),(n.autoClear||g)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||y.mapping===Ww)?(u===void 0&&(u=new ps(new q2(1,1,1),new eh({name:"BackgroundCubeMaterial",uniforms:i_(od.cube.uniforms),vertexShader:od.cube.vertexShader,fragmentShader:od.cube.fragmentShader,side:Nc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(x,w,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,(c!==y||d!==y.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,c=y,d=y.version,f=n.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(l===void 0&&(l=new ps(new BO(2,2),new eh({name:"BackgroundMaterial",uniforms:i_(od.background.uniforms),vertexShader:od.background.vertexShader,fragmentShader:od.background.fragmentShader,side:Qp,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,y.matrixAutoUpdate===!0&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(c!==y||d!==y.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,c=y,d=y.version,f=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}function p(m,v){t.buffers.color.setClear(m.r,m.g,m.b,v,a)}return{getClearColor:function(){return s},setClearColor:function(m,v=1){s.set(m),o=v,p(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(m){o=m,p(s,o)},render:h}}function wut(n,e,t,r){const i=n.getParameter(34921),a=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||a!==null,o={},l=v(null);let u=l,c=!1;function d(N,F,k,H,U){let B=!1;if(s){const $=m(H,k,F);u!==$&&(u=$,h(u.object)),B=g(N,H,k,U),B&&y(N,H,k,U)}else{const $=F.wireframe===!0;(u.geometry!==H.id||u.program!==k.id||u.wireframe!==$)&&(u.geometry=H.id,u.program=k.id,u.wireframe=$,B=!0)}U!==null&&t.update(U,34963),(B||c)&&(c=!1,T(N,F,k,H),U!==null&&n.bindBuffer(34963,t.get(U).buffer))}function f(){return r.isWebGL2?n.createVertexArray():a.createVertexArrayOES()}function h(N){return r.isWebGL2?n.bindVertexArray(N):a.bindVertexArrayOES(N)}function p(N){return r.isWebGL2?n.deleteVertexArray(N):a.deleteVertexArrayOES(N)}function m(N,F,k){const H=k.wireframe===!0;let U=o[N.id];U===void 0&&(U={},o[N.id]=U);let B=U[F.id];B===void 0&&(B={},U[F.id]=B);let $=B[H];return $===void 0&&($=v(f()),B[H]=$),$}function v(N){const F=[],k=[],H=[];for(let U=0;U<i;U++)F[U]=0,k[U]=0,H[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:k,attributeDivisors:H,object:N,attributes:{},index:null}}function g(N,F,k,H){const U=u.attributes,B=F.attributes;let $=0;const ee=k.getAttributes();for(const re in ee)if(ee[re].location>=0){const ae=U[re];let pe=B[re];if(pe===void 0&&(re==="instanceMatrix"&&N.instanceMatrix&&(pe=N.instanceMatrix),re==="instanceColor"&&N.instanceColor&&(pe=N.instanceColor)),ae===void 0||ae.attribute!==pe||pe&&ae.data!==pe.data)return!0;$++}return u.attributesNum!==$||u.index!==H}function y(N,F,k,H){const U={},B=F.attributes;let $=0;const ee=k.getAttributes();for(const re in ee)if(ee[re].location>=0){let ae=B[re];ae===void 0&&(re==="instanceMatrix"&&N.instanceMatrix&&(ae=N.instanceMatrix),re==="instanceColor"&&N.instanceColor&&(ae=N.instanceColor));const pe={};pe.attribute=ae,ae&&ae.data&&(pe.data=ae.data),U[re]=pe,$++}u.attributes=U,u.attributesNum=$,u.index=H}function _(){const N=u.newAttributes;for(let F=0,k=N.length;F<k;F++)N[F]=0}function b(N){x(N,0)}function x(N,F){const k=u.newAttributes,H=u.enabledAttributes,U=u.attributeDivisors;k[N]=1,H[N]===0&&(n.enableVertexAttribArray(N),H[N]=1),U[N]!==F&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](N,F),U[N]=F)}function w(){const N=u.newAttributes,F=u.enabledAttributes;for(let k=0,H=F.length;k<H;k++)F[k]!==N[k]&&(n.disableVertexAttribArray(k),F[k]=0)}function A(N,F,k,H,U,B){r.isWebGL2===!0&&(k===5124||k===5125)?n.vertexAttribIPointer(N,F,k,U,B):n.vertexAttribPointer(N,F,k,H,U,B)}function T(N,F,k,H){if(r.isWebGL2===!1&&(N.isInstancedMesh||H.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const U=H.attributes,B=k.getAttributes(),$=F.defaultAttributeValues;for(const ee in B){const re=B[ee];if(re.location>=0){let ne=U[ee];if(ne===void 0&&(ee==="instanceMatrix"&&N.instanceMatrix&&(ne=N.instanceMatrix),ee==="instanceColor"&&N.instanceColor&&(ne=N.instanceColor)),ne!==void 0){const ae=ne.normalized,pe=ne.itemSize,de=t.get(ne);if(de===void 0)continue;const me=de.buffer,ke=de.type,Be=de.bytesPerElement;if(ne.isInterleavedBufferAttribute){const Xe=ne.data,Ye=Xe.stride,Y=ne.offset;if(Xe.isInstancedInterleavedBuffer){for(let he=0;he<re.locationSize;he++)x(re.location+he,Xe.meshPerAttribute);N.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=Xe.meshPerAttribute*Xe.count)}else for(let he=0;he<re.locationSize;he++)b(re.location+he);n.bindBuffer(34962,me);for(let he=0;he<re.locationSize;he++)A(re.location+he,pe/re.locationSize,ke,ae,Ye*Be,(Y+pe/re.locationSize*he)*Be)}else{if(ne.isInstancedBufferAttribute){for(let Xe=0;Xe<re.locationSize;Xe++)x(re.location+Xe,ne.meshPerAttribute);N.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let Xe=0;Xe<re.locationSize;Xe++)b(re.location+Xe);n.bindBuffer(34962,me);for(let Xe=0;Xe<re.locationSize;Xe++)A(re.location+Xe,pe/re.locationSize,ke,ae,pe*Be,pe/re.locationSize*Xe*Be)}}else if($!==void 0){const ae=$[ee];if(ae!==void 0)switch(ae.length){case 2:n.vertexAttrib2fv(re.location,ae);break;case 3:n.vertexAttrib3fv(re.location,ae);break;case 4:n.vertexAttrib4fv(re.location,ae);break;default:n.vertexAttrib1fv(re.location,ae)}}}}w()}function C(){P();for(const N in o){const F=o[N];for(const k in F){const H=F[k];for(const U in H)p(H[U].object),delete H[U];delete F[k]}delete o[N]}}function E(N){if(o[N.id]===void 0)return;const F=o[N.id];for(const k in F){const H=F[k];for(const U in H)p(H[U].object),delete H[U];delete F[k]}delete o[N.id]}function I(N){for(const F in o){const k=o[F];if(k[N.id]===void 0)continue;const H=k[N.id];for(const U in H)p(H[U].object),delete H[U];delete k[N.id]}}function P(){L(),c=!0,u!==l&&(u=l,h(u.object))}function L(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:P,resetDefaultState:L,dispose:C,releaseStatesOfGeometry:E,releaseStatesOfProgram:I,initAttributes:_,enableAttribute:b,disableUnusedAttributes:w}}function Tut(n,e,t,r){const i=r.isWebGL2;let a;function s(u){a=u}function o(u,c){n.drawArrays(a,u,c),t.update(c,a,1)}function l(u,c,d){if(d===0)return;let f,h;if(i)f=n,h="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[h](a,u,c,d),t.update(c,a,d)}this.setMode=s,this.render=o,this.renderInstances=l}function Cut(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(A){if(A==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";A="mediump"}return A==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let o=t.precision!==void 0?t.precision:"highp";const l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=s||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),f=n.getParameter(35660),h=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),v=n.getParameter(36347),g=n.getParameter(36348),y=n.getParameter(36349),_=f>0,b=s||e.has("OES_texture_float"),x=_&&b,w=s?n.getParameter(36183):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:w}}function Aut(n){const e=this;let t=null,r=0,i=!1,a=!1;const s=new s0,o=new Nu,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f,h){const p=d.length!==0||f||r!==0||i;return i=f,t=c(d,h,0),r=d.length,p},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,u()},this.setState=function(d,f,h){const p=d.clippingPlanes,m=d.clipIntersection,v=d.clipShadows,g=n.get(d);if(!i||p===null||p.length===0||a&&!v)a?c(null):u();else{const y=a?0:r,_=y*4;let b=g.clippingState||null;l.value=b,b=c(p,f,_,h);for(let x=0;x!==_;++x)b[x]=t[x];g.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(d,f,h,p){const m=d!==null?d.length:0;let v=null;if(m!==0){if(v=l.value,p!==!0||v===null){const g=h+m*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(v===null||v.length<g)&&(v=new Float32Array(g));for(let _=0,b=h;_!==m;++_,b+=4)s.copy(d[_]).applyMatrix4(y,o),s.normal.toArray(v,b),v[b+3]=s.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function Eut(n){let e=new WeakMap;function t(s,o){return o===z2?s.mapping=vv:o===w3&&(s.mapping=gv),s}function r(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const o=s.mapping;if(o===z2||o===w3)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new $st(l.height/2);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",i),t(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}let Q_=class extends Cde{constructor(e=-1,t=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const Wy=4,hX=[.125,.215,.35,.446,.526,.582],g0=20,_k=new Q_,pX=new Un;let bk=null;const o0=(1+Math.sqrt(5))/2,Wg=1/o0,mX=[new it(1,1,1),new it(-1,1,1),new it(1,1,-1),new it(-1,1,-1),new it(0,o0,Wg),new it(0,o0,-Wg),new it(Wg,0,o0),new it(-Wg,0,o0),new it(o0,Wg,0),new it(-o0,Wg,0)];let vX=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){bk=this._renderer.getRenderTarget(),this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_X(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=yX(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(bk),e.scissorTest=!1,JC(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===vv||e.mapping===gv?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),bk=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Za,minFilter:Za,generateMipmaps:!1,type:V2,format:Ou,encoding:Jp,depthBuffer:!1},i=gX(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=gX(e,t,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Mut(a)),this._blurMaterial=Iut(a,e,t)}return i}_compileMaterial(e){const t=new ps(this._lodPlanes[0],e);this._renderer.compile(t,_k)}_sceneToCubeUV(e,t,r,i){const o=new ds(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,f=c.toneMapping;c.getClearColor(pX),c.toneMapping=Uf,c.autoClear=!1;const h=new Dc({name:"PMREM.Background",side:Nc,depthWrite:!1,depthTest:!1}),p=new ps(new q2,h);let m=!1;const v=e.background;v?v.isColor&&(h.color.copy(v),e.background=null,m=!0):(h.color.copy(pX),m=!0);for(let g=0;g<6;g++){const y=g%3;y===0?(o.up.set(0,l[g],0),o.lookAt(u[g],0,0)):y===1?(o.up.set(0,0,l[g]),o.lookAt(0,u[g],0)):(o.up.set(0,l[g],0),o.lookAt(0,0,u[g]));const _=this._cubeSize;JC(i,y*_,g>2?_:0,_,_),c.setRenderTarget(i),m&&c.render(p,o),c.render(e,o)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=f,c.autoClear=d,e.background=v}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===vv||e.mapping===gv;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=_X()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=yX());const a=i?this._cubemapMaterial:this._equirectMaterial,s=new ps(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;JC(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,_k)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=mX[(i-1)%mX.length];this._blur(e,i-1,i,a,s)}t.autoClear=r}_blur(e,t,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,s,o){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new ps(this._lodPlanes[i],u),f=u.uniforms,h=this._sizeLods[r]-1,p=isFinite(a)?Math.PI/(2*h):2*Math.PI/(2*g0-1),m=a/p,v=isFinite(a)?1+Math.floor(c*m):g0;v>g0&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${g0}`);const g=[];let y=0;for(let A=0;A<g0;++A){const T=A/m,C=Math.exp(-T*T/2);g.push(C),A===0?y+=C:A<v&&(y+=2*C)}for(let A=0;A<g.length;A++)g[A]=g[A]/y;f.envMap.value=e.texture,f.samples.value=v,f.weights.value=g,f.latitudinal.value=s==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:_}=this;f.dTheta.value=p,f.mipInt.value=_-r;const b=this._sizeLods[i],x=3*b*(i>_-Wy?i-_+Wy:0),w=4*(this._cubeSize-b);JC(t,x,w,3*b,2*b),l.setRenderTarget(t),l.render(d,_k)}};function Mut(n){const e=[],t=[],r=[];let i=n;const a=n-Wy+1+hX.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);t.push(o);let l=1/o;s>n-Wy?l=hX[s-n+Wy-1]:s===0&&(l=0),r.push(l);const u=1/(o-2),c=-u,d=1+u,f=[c,c,d,c,d,d,c,c,d,d,c,d],h=6,p=6,m=3,v=2,g=1,y=new Float32Array(m*p*h),_=new Float32Array(v*p*h),b=new Float32Array(g*p*h);for(let w=0;w<h;w++){const A=w%3*2/3-1,T=w>2?0:-1,C=[A,T,0,A+2/3,T,0,A+2/3,T+1,0,A,T,0,A+2/3,T+1,0,A,T+1,0];y.set(C,m*p*w),_.set(f,v*p*w);const E=[w,w,w,w,w,w];b.set(E,g*p*w)}const x=new pi;x.setAttribute("position",new ka(y,m)),x.setAttribute("uv",new ka(_,v)),x.setAttribute("faceIndex",new ka(b,g)),e.push(x),i>Wy&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function gX(n,e,t){const r=new _v(n,e,t);return r.texture.mapping=Ww,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function JC(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function Iut(n,e,t){const r=new Float32Array(g0),i=new it(0,1,0);return new eh({name:"SphericalGaussianBlur",defines:{n:g0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:x9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ap,depthTest:!1,depthWrite:!1})}function yX(){return new eh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:x9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ap,depthTest:!1,depthWrite:!1})}function _X(){return new eh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:x9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ap,depthTest:!1,depthWrite:!1})}function x9(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Dut(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===z2||l===w3,c=l===vv||l===gv;if(u||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=e.get(o);return t===null&&(t=new vX(n)),d=u?t.fromEquirectangular(o,d):t.fromCubemap(o,d),e.set(o,d),d.texture}else{if(e.has(o))return e.get(o).texture;{const d=o.image;if(u&&d&&d.height>0||c&&d&&i(d)){t===null&&(t=new vX(n));const f=u?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,f),o.addEventListener("dispose",a),f.texture}else return null}}}return o}function i(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function a(o){const l=o.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function Put(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Rut(n,e,t,r){const i={},a=new WeakMap;function s(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",s),delete i[f.id];const h=a.get(f);h&&(e.remove(h),a.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return i[f.id]===!0||(f.addEventListener("dispose",s),i[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],34962);const h=d.morphAttributes;for(const p in h){const m=h[p];for(let v=0,g=m.length;v<g;v++)e.update(m[v],34962)}}function u(d){const f=[],h=d.index,p=d.attributes.position;let m=0;if(h!==null){const y=h.array;m=h.version;for(let _=0,b=y.length;_<b;_+=3){const x=y[_+0],w=y[_+1],A=y[_+2];f.push(x,w,w,A,A,x)}}else{const y=p.array;m=p.version;for(let _=0,b=y.length/3-1;_<b;_+=3){const x=_+0,w=_+1,A=_+2;f.push(x,w,w,A,A,x)}}const v=new(mde(f)?xde:_9)(f,1);v.version=m;const g=a.get(d);g&&e.remove(g),a.set(d,v)}function c(d){const f=a.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&u(d)}else u(d);return a.get(d)}return{get:o,update:l,getWireframeAttribute:c}}function kut(n,e,t,r){const i=r.isWebGL2;let a;function s(f){a=f}let o,l;function u(f){o=f.type,l=f.bytesPerElement}function c(f,h){n.drawElements(a,h,o,f*l),t.update(h,a,1)}function d(f,h,p){if(p===0)return;let m,v;if(i)m=n,v="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](a,h,o,f*l,p),t.update(h,a,p)}this.setMode=s,this.setIndex=u,this.render=c,this.renderInstances=d}function Lut(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(t.calls++,s){case 4:t.triangles+=o*(a/3);break;case 1:t.lines+=o*(a/2);break;case 3:t.lines+=o*(a-1);break;case 2:t.lines+=o*a;break;case 0:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Out(n,e){return n[0]-e[0]}function Nut(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Sk(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Uint8Array?t=255:r instanceof Uint16Array?t=65535:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function But(n,e,t){const r={},i=new Float32Array(8),a=new WeakMap,s=new ki,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,c,d,f){const h=u.morphTargetInfluences;if(e.isWebGL2===!0){const p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,m=p!==void 0?p.length:0;let v=a.get(c);if(v===void 0||v.count!==m){let _=function(){N.dispose(),a.delete(c),c.removeEventListener("dispose",_)};v!==void 0&&v.texture.dispose();const b=c.morphAttributes.position!==void 0,x=c.morphAttributes.normal!==void 0,w=c.morphAttributes.color!==void 0,A=c.morphAttributes.position||[],T=c.morphAttributes.normal||[],C=c.morphAttributes.color||[];let E=0;b===!0&&(E=1),x===!0&&(E=2),w===!0&&(E=3);let I=c.attributes.position.count*E,P=1;I>e.maxTextureSize&&(P=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const L=new Float32Array(I*P*4*m),N=new _de(L,I,P,m);N.type=yp,N.needsUpdate=!0;const F=E*4;for(let k=0;k<m;k++){const H=A[k],U=T[k],B=C[k],$=I*P*4*k;for(let ee=0;ee<H.count;ee++){const re=ee*F;b===!0&&(s.fromBufferAttribute(H,ee),H.normalized===!0&&Sk(s,H),L[$+re+0]=s.x,L[$+re+1]=s.y,L[$+re+2]=s.z,L[$+re+3]=0),x===!0&&(s.fromBufferAttribute(U,ee),U.normalized===!0&&Sk(s,U),L[$+re+4]=s.x,L[$+re+5]=s.y,L[$+re+6]=s.z,L[$+re+7]=0),w===!0&&(s.fromBufferAttribute(B,ee),B.normalized===!0&&Sk(s,B),L[$+re+8]=s.x,L[$+re+9]=s.y,L[$+re+10]=s.z,L[$+re+11]=B.itemSize===4?s.w:1)}}v={count:m,texture:N,size:new sn(I,P)},a.set(c,v),c.addEventListener("dispose",_)}let g=0;for(let _=0;_<h.length;_++)g+=h[_];const y=c.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",y),f.getUniforms().setValue(n,"morphTargetInfluences",h),f.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const p=h===void 0?0:h.length;let m=r[c.id];if(m===void 0||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];r[c.id]=m}for(let b=0;b<p;b++){const x=m[b];x[0]=b,x[1]=h[b]}m.sort(Nut);for(let b=0;b<8;b++)b<p&&m[b][1]?(o[b][0]=m[b][0],o[b][1]=m[b][1]):(o[b][0]=Number.MAX_SAFE_INTEGER,o[b][1]=0);o.sort(Out);const v=c.morphAttributes.position,g=c.morphAttributes.normal;let y=0;for(let b=0;b<8;b++){const x=o[b],w=x[0],A=x[1];w!==Number.MAX_SAFE_INTEGER&&A?(v&&c.getAttribute("morphTarget"+b)!==v[w]&&c.setAttribute("morphTarget"+b,v[w]),g&&c.getAttribute("morphNormal"+b)!==g[w]&&c.setAttribute("morphNormal"+b,g[w]),i[b]=A,y+=A):(v&&c.hasAttribute("morphTarget"+b)===!0&&c.deleteAttribute("morphTarget"+b),g&&c.hasAttribute("morphNormal"+b)===!0&&c.deleteAttribute("morphNormal"+b),i[b]=0)}const _=c.morphTargetsRelative?1:1-y;f.getUniforms().setValue(n,"morphTargetBaseInfluence",_),f.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function Fut(n,e,t,r){let i=new WeakMap;function a(l){const u=r.render.frame,c=l.geometry,d=e.get(l,c);return i.get(d)!==u&&(e.update(d),i.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),d}function s(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:s}}const Mde=new Qs,Ide=new _de,Dde=new Est,Pde=new b9,bX=[],SX=[],xX=new Float32Array(16),wX=new Float32Array(9),TX=new Float32Array(4);function Z_(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=bX[i];if(a===void 0&&(a=new Float32Array(i),bX[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function el(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function tl(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function RI(n,e){let t=SX[e];t===void 0&&(t=new Int32Array(e),SX[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Uut(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function zut(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(el(t,e))return;n.uniform2fv(this.addr,e),tl(t,e)}}function Hut(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(el(t,e))return;n.uniform3fv(this.addr,e),tl(t,e)}}function Vut(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(el(t,e))return;n.uniform4fv(this.addr,e),tl(t,e)}}function $ut(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(el(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),tl(t,e)}else{if(el(t,r))return;TX.set(r),n.uniformMatrix2fv(this.addr,!1,TX),tl(t,r)}}function Gut(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(el(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),tl(t,e)}else{if(el(t,r))return;wX.set(r),n.uniformMatrix3fv(this.addr,!1,wX),tl(t,r)}}function Wut(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(el(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),tl(t,e)}else{if(el(t,r))return;xX.set(r),n.uniformMatrix4fv(this.addr,!1,xX),tl(t,r)}}function qut(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function jut(n,e){const t=this.cache;el(t,e)||(n.uniform2iv(this.addr,e),tl(t,e))}function Kut(n,e){const t=this.cache;el(t,e)||(n.uniform3iv(this.addr,e),tl(t,e))}function Xut(n,e){const t=this.cache;el(t,e)||(n.uniform4iv(this.addr,e),tl(t,e))}function Yut(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Qut(n,e){const t=this.cache;el(t,e)||(n.uniform2uiv(this.addr,e),tl(t,e))}function Zut(n,e){const t=this.cache;el(t,e)||(n.uniform3uiv(this.addr,e),tl(t,e))}function Jut(n,e){const t=this.cache;el(t,e)||(n.uniform4uiv(this.addr,e),tl(t,e))}function ect(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||Mde,i)}function tct(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||Dde,i)}function nct(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||Pde,i)}function rct(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||Ide,i)}function ict(n){switch(n){case 5126:return Uut;case 35664:return zut;case 35665:return Hut;case 35666:return Vut;case 35674:return $ut;case 35675:return Gut;case 35676:return Wut;case 5124:case 35670:return qut;case 35667:case 35671:return jut;case 35668:case 35672:return Kut;case 35669:case 35673:return Xut;case 5125:return Yut;case 36294:return Qut;case 36295:return Zut;case 36296:return Jut;case 35678:case 36198:case 36298:case 36306:case 35682:return ect;case 35679:case 36299:case 36307:return tct;case 35680:case 36300:case 36308:case 36293:return nct;case 36289:case 36303:case 36311:case 36292:return rct}}function act(n,e){n.uniform1fv(this.addr,e)}function sct(n,e){const t=Z_(e,this.size,2);n.uniform2fv(this.addr,t)}function oct(n,e){const t=Z_(e,this.size,3);n.uniform3fv(this.addr,t)}function lct(n,e){const t=Z_(e,this.size,4);n.uniform4fv(this.addr,t)}function uct(n,e){const t=Z_(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function cct(n,e){const t=Z_(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function dct(n,e){const t=Z_(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function fct(n,e){n.uniform1iv(this.addr,e)}function hct(n,e){n.uniform2iv(this.addr,e)}function pct(n,e){n.uniform3iv(this.addr,e)}function mct(n,e){n.uniform4iv(this.addr,e)}function vct(n,e){n.uniform1uiv(this.addr,e)}function gct(n,e){n.uniform2uiv(this.addr,e)}function yct(n,e){n.uniform3uiv(this.addr,e)}function _ct(n,e){n.uniform4uiv(this.addr,e)}function bct(n,e,t){const r=e.length,i=RI(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTexture2D(e[a]||Mde,i[a])}function Sct(n,e,t){const r=e.length,i=RI(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTexture3D(e[a]||Dde,i[a])}function xct(n,e,t){const r=e.length,i=RI(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTextureCube(e[a]||Pde,i[a])}function wct(n,e,t){const r=e.length,i=RI(t,r);n.uniform1iv(this.addr,i);for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||Ide,i[a])}function Tct(n){switch(n){case 5126:return act;case 35664:return sct;case 35665:return oct;case 35666:return lct;case 35674:return uct;case 35675:return cct;case 35676:return dct;case 5124:case 35670:return fct;case 35667:case 35671:return hct;case 35668:case 35672:return pct;case 35669:case 35673:return mct;case 5125:return vct;case 36294:return gct;case 36295:return yct;case 36296:return _ct;case 35678:case 36198:case 36298:case 36306:case 35682:return bct;case 35679:case 36299:case 36307:return Sct;case 35680:case 36300:case 36308:case 36293:return xct;case 36289:case 36303:case 36311:case 36292:return wct}}let Cct=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=ict(t.type)}},Act=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=Tct(t.type)}},Ect=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,t[o.id],r)}}};const xk=/(\w+)(\])?(\[|\.)?/g;function CX(n,e){n.seq.push(e),n.map[e.id]=e}function Mct(n,e,t){const r=n.name,i=r.length;for(xk.lastIndex=0;;){const a=xk.exec(r),s=xk.lastIndex;let o=a[1];const l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===i){CX(t,u===void 0?new Cct(o,n,e):new Act(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new Ect(o),CX(t,d)),t=d}}}let zE=class{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){const a=e.getActiveUniform(t,i),s=e.getUniformLocation(t,a.name);Mct(a,s,this)}}setValue(e,t,r,i){const a=this.map[t];a!==void 0&&a.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let a=0,s=t.length;a!==s;++a){const o=t[a],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in t&&r.push(s)}return r}};function AX(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let Ict=0;function Dct(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return r.join(`
`)}function Pct(n){switch(n){case Jp:return["Linear","( value )"];case ai:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function EX(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const s=parseInt(a[1]);return t.toUpperCase()+`

`+i+`

`+Dct(n.getShaderSource(e),s)}else return i}function Rct(n,e){const t=Pct(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function kct(n,e){let t;switch(e){case Nat:t="Linear";break;case Bat:t="Reinhard";break;case Fat:t="OptimizedCineon";break;case Uat:t="ACESFilmic";break;case zat:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Lct(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(VS).join(`
`)}function Oct(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Nct(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),s=a.name;let o=1;a.type===35674&&(o=2),a.type===35675&&(o=3),a.type===35676&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function VS(n){return n!==""}function MX(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function IX(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Bct=/^[ \t]*#include +<([\w\d./]+)>/gm;function FO(n){return n.replace(Bct,Fct)}function Fct(n,e){const t=ui[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return FO(t)}const Uct=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,zct=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DX(n){return n.replace(zct,Rde).replace(Uct,Hct)}function Hct(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Rde(n,e,t,r)}function Rde(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function PX(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Vct(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===sde?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===hat?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===HS&&(e="SHADOWMAP_TYPE_VSM"),e}function $ct(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case vv:case gv:e="ENVMAP_TYPE_CUBE";break;case Ww:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Gct(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case gv:e="ENVMAP_MODE_REFRACTION";break}return e}function Wct(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case DI:e="ENVMAP_BLENDING_MULTIPLY";break;case Lat:e="ENVMAP_BLENDING_MIX";break;case Oat:e="ENVMAP_BLENDING_ADD";break}return e}function qct(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function jct(n,e,t,r){const i=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const l=Vct(t),u=$ct(t),c=Gct(t),d=Wct(t),f=qct(t),h=t.isWebGL2?"":Lct(t),p=Oct(a),m=i.createProgram();let v,g,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=[p].filter(VS).join(`
`),v.length>0&&(v+=`
`),g=[h,p].filter(VS).join(`
`),g.length>0&&(g+=`
`)):(v=[PX(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(VS).join(`
`),g=[h,PX(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Uf?"#define TONE_MAPPING":"",t.toneMapping!==Uf?ui.tonemapping_pars_fragment:"",t.toneMapping!==Uf?kct("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ui.encodings_pars_fragment,Rct("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(VS).join(`
`)),s=FO(s),s=MX(s,t),s=IX(s,t),o=FO(o),o=MX(o,t),o=IX(o,t),s=DX(s),o=DX(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",t.glslVersion===eX?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===eX?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=y+v+s,b=y+g+o,x=AX(i,35633,_),w=AX(i,35632,b);if(i.attachShader(m,x),i.attachShader(m,w),t.index0AttributeName!==void 0?i.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),n.debug.checkShaderErrors){const C=i.getProgramInfoLog(m).trim(),E=i.getShaderInfoLog(x).trim(),I=i.getShaderInfoLog(w).trim();let P=!0,L=!0;if(i.getProgramParameter(m,35714)===!1){P=!1;const N=EX(i,x,"vertex"),F=EX(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,35715)+`

Program Info Log: `+C+`
`+N+`
`+F)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(E===""||I==="")&&(L=!1);L&&(this.diagnostics={runnable:P,programLog:C,vertexShader:{log:E,prefix:v},fragmentShader:{log:I,prefix:g}})}i.deleteShader(x),i.deleteShader(w);let A;this.getUniforms=function(){return A===void 0&&(A=new zE(i,m)),A};let T;return this.getAttributes=function(){return T===void 0&&(T=Nct(i,m)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=Ict++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let Kct=0,Xct=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const r=new Yct(e);t.set(e,r)}return t.get(e)}},Yct=class{constructor(e){this.id=Kct++,this.code=e,this.usedTimes=0}};function Qct(n,e,t,r,i,a,s){const o=new y9,l=new Xct,u=[],c=i.isWebGL2,d=i.logarithmicDepthBuffer,f=i.vertexTextures;let h=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(T,C,E,I,P){const L=I.fog,N=P.geometry,F=T.isMeshStandardMaterial?I.environment:null,k=(T.isMeshStandardMaterial?t:e).get(T.envMap||F),H=k&&k.mapping===Ww?k.image.height:null,U=p[T.type];T.precision!==null&&(h=i.getMaxPrecision(T.precision),h!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",h,"instead."));const B=N.morphAttributes.position||N.morphAttributes.normal||N.morphAttributes.color,$=B!==void 0?B.length:0;let ee=0;N.morphAttributes.position!==void 0&&(ee=1),N.morphAttributes.normal!==void 0&&(ee=2),N.morphAttributes.color!==void 0&&(ee=3);let re,ne,ae,pe;if(U){const Ye=od[U];re=Ye.vertexShader,ne=Ye.fragmentShader}else re=T.vertexShader,ne=T.fragmentShader,l.update(T),ae=l.getVertexShaderID(T),pe=l.getFragmentShaderID(T);const de=n.getRenderTarget(),me=T.alphaTest>0,ke=T.clearcoat>0,Be=T.iridescence>0;return{isWebGL2:c,shaderID:U,shaderName:T.type,vertexShader:re,fragmentShader:ne,defines:T.defines,customVertexShaderID:ae,customFragmentShaderID:pe,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:h,instancing:P.isInstancedMesh===!0,instancingColor:P.isInstancedMesh===!0&&P.instanceColor!==null,supportsVertexTextures:f,outputEncoding:de===null?n.outputEncoding:de.isXRRenderTarget===!0?de.texture.encoding:Jp,map:!!T.map,matcap:!!T.matcap,envMap:!!k,envMapMode:k&&k.mapping,envMapCubeUVHeight:H,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===lst,tangentSpaceNormalMap:T.normalMapType===Lv,decodeVideoTexture:!!T.map&&T.map.isVideoTexture===!0&&T.map.encoding===ai,clearcoat:ke,clearcoatMap:ke&&!!T.clearcoatMap,clearcoatRoughnessMap:ke&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:ke&&!!T.clearcoatNormalMap,iridescence:Be,iridescenceMap:Be&&!!T.iridescenceMap,iridescenceThicknessMap:Be&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:T.transparent===!1&&T.blending===f1,alphaMap:!!T.alphaMap,alphaTest:me,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!N.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!N.attributes.color&&N.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||!!T.sheenRoughnessMap,uvsVertexOnly:!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.transmission>0||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheen>0||T.sheenColorMap||T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!L,useFog:T.fog===!0,fogExp2:L&&L.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:d,skinning:P.isSkinnedMesh===!0,morphTargets:N.morphAttributes.position!==void 0,morphNormals:N.morphAttributes.normal!==void 0,morphColors:N.morphAttributes.color!==void 0,morphTargetsCount:$,morphTextureStride:ee,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&E.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:Uf,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Zp,flipSided:T.side===Nc,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function v(T){const C=[];if(T.shaderID?C.push(T.shaderID):(C.push(T.customVertexShaderID),C.push(T.customFragmentShaderID)),T.defines!==void 0)for(const E in T.defines)C.push(E),C.push(T.defines[E]);return T.isRawShaderMaterial===!1&&(g(C,T),y(C,T),C.push(n.outputEncoding)),C.push(T.customProgramCacheKey),C.join()}function g(T,C){T.push(C.precision),T.push(C.outputEncoding),T.push(C.envMapMode),T.push(C.envMapCubeUVHeight),T.push(C.combine),T.push(C.vertexUvs),T.push(C.fogExp2),T.push(C.sizeAttenuation),T.push(C.morphTargetsCount),T.push(C.morphAttributeCount),T.push(C.numDirLights),T.push(C.numPointLights),T.push(C.numSpotLights),T.push(C.numHemiLights),T.push(C.numRectAreaLights),T.push(C.numDirLightShadows),T.push(C.numPointLightShadows),T.push(C.numSpotLightShadows),T.push(C.shadowMapType),T.push(C.toneMapping),T.push(C.numClippingPlanes),T.push(C.numClipIntersection),T.push(C.depthPacking)}function y(T,C){o.disableAll(),C.isWebGL2&&o.enable(0),C.supportsVertexTextures&&o.enable(1),C.instancing&&o.enable(2),C.instancingColor&&o.enable(3),C.map&&o.enable(4),C.matcap&&o.enable(5),C.envMap&&o.enable(6),C.lightMap&&o.enable(7),C.aoMap&&o.enable(8),C.emissiveMap&&o.enable(9),C.bumpMap&&o.enable(10),C.normalMap&&o.enable(11),C.objectSpaceNormalMap&&o.enable(12),C.tangentSpaceNormalMap&&o.enable(13),C.clearcoat&&o.enable(14),C.clearcoatMap&&o.enable(15),C.clearcoatRoughnessMap&&o.enable(16),C.clearcoatNormalMap&&o.enable(17),C.iridescence&&o.enable(18),C.iridescenceMap&&o.enable(19),C.iridescenceThicknessMap&&o.enable(20),C.displacementMap&&o.enable(21),C.specularMap&&o.enable(22),C.roughnessMap&&o.enable(23),C.metalnessMap&&o.enable(24),C.gradientMap&&o.enable(25),C.alphaMap&&o.enable(26),C.alphaTest&&o.enable(27),C.vertexColors&&o.enable(28),C.vertexAlphas&&o.enable(29),C.vertexUvs&&o.enable(30),C.vertexTangents&&o.enable(31),C.uvsVertexOnly&&o.enable(32),C.fog&&o.enable(33),T.push(o.mask),o.disableAll(),C.useFog&&o.enable(0),C.flatShading&&o.enable(1),C.logarithmicDepthBuffer&&o.enable(2),C.skinning&&o.enable(3),C.morphTargets&&o.enable(4),C.morphNormals&&o.enable(5),C.morphColors&&o.enable(6),C.premultipliedAlpha&&o.enable(7),C.shadowMapEnabled&&o.enable(8),C.physicallyCorrectLights&&o.enable(9),C.doubleSided&&o.enable(10),C.flipSided&&o.enable(11),C.useDepthPacking&&o.enable(12),C.dithering&&o.enable(13),C.specularIntensityMap&&o.enable(14),C.specularColorMap&&o.enable(15),C.transmission&&o.enable(16),C.transmissionMap&&o.enable(17),C.thicknessMap&&o.enable(18),C.sheen&&o.enable(19),C.sheenColorMap&&o.enable(20),C.sheenRoughnessMap&&o.enable(21),C.decodeVideoTexture&&o.enable(22),C.opaque&&o.enable(23),T.push(o.mask)}function _(T){const C=p[T.type];let E;if(C){const I=od[C];E=Ust.clone(I.uniforms)}else E=T.uniforms;return E}function b(T,C){let E;for(let I=0,P=u.length;I<P;I++){const L=u[I];if(L.cacheKey===C){E=L,++E.usedTimes;break}}return E===void 0&&(E=new jct(n,C,T,a),u.push(E)),E}function x(T){if(--T.usedTimes===0){const C=u.indexOf(T);u[C]=u[u.length-1],u.pop(),T.destroy()}}function w(T){l.remove(T)}function A(){l.dispose()}return{getParameters:m,getProgramCacheKey:v,getUniforms:_,acquireProgram:b,releaseProgram:x,releaseShaderCache:w,programs:u,dispose:A}}function Zct(){let n=new WeakMap;function e(a){let s=n.get(a);return s===void 0&&(s={},n.set(a,s)),s}function t(a){n.delete(a)}function r(a,s,o){n.get(a)[s]=o}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Jct(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function RX(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function kX(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function s(d,f,h,p,m,v){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:m,group:v},n[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=h,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=m,g.group=v),e++,g}function o(d,f,h,p,m,v){const g=s(d,f,h,p,m,v);h.transmission>0?r.push(g):h.transparent===!0?i.push(g):t.push(g)}function l(d,f,h,p,m,v){const g=s(d,f,h,p,m,v);h.transmission>0?r.unshift(g):h.transparent===!0?i.unshift(g):t.unshift(g)}function u(d,f){t.length>1&&t.sort(d||Jct),r.length>1&&r.sort(f||RX),i.length>1&&i.sort(f||RX)}function c(){for(let d=e,f=n.length;d<f;d++){const h=n[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:o,unshift:l,finish:c,sort:u}}function edt(){let n=new WeakMap;function e(r,i){let a;return n.has(r)===!1?(a=new kX,n.set(r,[a])):i>=n.get(r).length?(a=new kX,n.get(r).push(a)):a=n.get(r)[i],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function tdt(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new it,color:new Un};break;case"SpotLight":t={position:new it,direction:new it,color:new Un,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new it,color:new Un,distance:0,decay:0};break;case"HemisphereLight":t={direction:new it,skyColor:new Un,groundColor:new Un};break;case"RectAreaLight":t={color:new Un,position:new it,halfWidth:new it,halfHeight:new it};break}return n[e.id]=t,t}}}function ndt(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sn};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sn};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sn,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let rdt=0;function idt(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function adt(n,e){const t=new tdt,r=ndt(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let c=0;c<9;c++)i.probe.push(new it);const a=new it,s=new or,o=new or;function l(c,d){let f=0,h=0,p=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let m=0,v=0,g=0,y=0,_=0,b=0,x=0,w=0;c.sort(idt);const A=d!==!0?Math.PI:1;for(let C=0,E=c.length;C<E;C++){const I=c[C],P=I.color,L=I.intensity,N=I.distance,F=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)f+=P.r*L*A,h+=P.g*L*A,p+=P.b*L*A;else if(I.isLightProbe)for(let k=0;k<9;k++)i.probe[k].addScaledVector(I.sh.coefficients[k],L);else if(I.isDirectionalLight){const k=t.get(I);if(k.color.copy(I.color).multiplyScalar(I.intensity*A),I.castShadow){const H=I.shadow,U=r.get(I);U.shadowBias=H.bias,U.shadowNormalBias=H.normalBias,U.shadowRadius=H.radius,U.shadowMapSize=H.mapSize,i.directionalShadow[m]=U,i.directionalShadowMap[m]=F,i.directionalShadowMatrix[m]=I.shadow.matrix,b++}i.directional[m]=k,m++}else if(I.isSpotLight){const k=t.get(I);if(k.position.setFromMatrixPosition(I.matrixWorld),k.color.copy(P).multiplyScalar(L*A),k.distance=N,k.coneCos=Math.cos(I.angle),k.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),k.decay=I.decay,I.castShadow){const H=I.shadow,U=r.get(I);U.shadowBias=H.bias,U.shadowNormalBias=H.normalBias,U.shadowRadius=H.radius,U.shadowMapSize=H.mapSize,i.spotShadow[g]=U,i.spotShadowMap[g]=F,i.spotShadowMatrix[g]=I.shadow.matrix,w++}i.spot[g]=k,g++}else if(I.isRectAreaLight){const k=t.get(I);k.color.copy(P).multiplyScalar(L),k.halfWidth.set(I.width*.5,0,0),k.halfHeight.set(0,I.height*.5,0),i.rectArea[y]=k,y++}else if(I.isPointLight){const k=t.get(I);if(k.color.copy(I.color).multiplyScalar(I.intensity*A),k.distance=I.distance,k.decay=I.decay,I.castShadow){const H=I.shadow,U=r.get(I);U.shadowBias=H.bias,U.shadowNormalBias=H.normalBias,U.shadowRadius=H.radius,U.shadowMapSize=H.mapSize,U.shadowCameraNear=H.camera.near,U.shadowCameraFar=H.camera.far,i.pointShadow[v]=U,i.pointShadowMap[v]=F,i.pointShadowMatrix[v]=I.shadow.matrix,x++}i.point[v]=k,v++}else if(I.isHemisphereLight){const k=t.get(I);k.skyColor.copy(I.color).multiplyScalar(L*A),k.groundColor.copy(I.groundColor).multiplyScalar(L*A),i.hemi[_]=k,_++}}y>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=$n.LTC_FLOAT_1,i.rectAreaLTC2=$n.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=$n.LTC_HALF_1,i.rectAreaLTC2=$n.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=h,i.ambient[2]=p;const T=i.hash;(T.directionalLength!==m||T.pointLength!==v||T.spotLength!==g||T.rectAreaLength!==y||T.hemiLength!==_||T.numDirectionalShadows!==b||T.numPointShadows!==x||T.numSpotShadows!==w)&&(i.directional.length=m,i.spot.length=g,i.rectArea.length=y,i.point.length=v,i.hemi.length=_,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=x,i.pointShadowMap.length=x,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=x,i.spotShadowMatrix.length=w,T.directionalLength=m,T.pointLength=v,T.spotLength=g,T.rectAreaLength=y,T.hemiLength=_,T.numDirectionalShadows=b,T.numPointShadows=x,T.numSpotShadows=w,i.version=rdt++)}function u(c,d){let f=0,h=0,p=0,m=0,v=0;const g=d.matrixWorldInverse;for(let y=0,_=c.length;y<_;y++){const b=c[y];if(b.isDirectionalLight){const x=i.directional[f];x.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(a),x.direction.transformDirection(g),f++}else if(b.isSpotLight){const x=i.spot[p];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(g),x.direction.setFromMatrixPosition(b.matrixWorld),a.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(a),x.direction.transformDirection(g),p++}else if(b.isRectAreaLight){const x=i.rectArea[m];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(g),o.identity(),s.copy(b.matrixWorld),s.premultiply(g),o.extractRotation(s),x.halfWidth.set(b.width*.5,0,0),x.halfHeight.set(0,b.height*.5,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),m++}else if(b.isPointLight){const x=i.point[h];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(g),h++}else if(b.isHemisphereLight){const x=i.hemi[v];x.direction.setFromMatrixPosition(b.matrixWorld),x.direction.transformDirection(g),v++}}}return{setup:l,setupView:u,state:i}}function LX(n,e){const t=new adt(n,e),r=[],i=[];function a(){r.length=0,i.length=0}function s(d){r.push(d)}function o(d){i.push(d)}function l(d){t.setup(r,d)}function u(d){t.setupView(r,d)}return{init:a,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function sdt(n,e){let t=new WeakMap;function r(a,s=0){let o;return t.has(a)===!1?(o=new LX(n,e),t.set(a,[o])):s>=t.get(a).length?(o=new LX(n,e),t.get(a).push(o)):o=t.get(a)[s],o}function i(){t=new WeakMap}return{get:r,dispose:i}}let kde=class extends ts{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=sst,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Lde=class extends ts{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new it,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};const odt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ldt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function udt(n,e,t){let r=new S9;const i=new sn,a=new sn,s=new ki,o=new kde({depthPacking:ost}),l=new Lde,u={},c=t.maxTextureSize,d={0:Nc,1:Qp,2:Zp},f=new eh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new sn},radius:{value:4}},vertexShader:odt,fragmentShader:ldt}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new pi;p.setAttribute("position",new ka(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new ps(p,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=sde,this.render=function(b,x,w){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||b.length===0)return;const A=n.getRenderTarget(),T=n.getActiveCubeFace(),C=n.getActiveMipmapLevel(),E=n.state;E.setBlending(Ap),E.buffers.color.setClear(1,1,1,1),E.buffers.depth.setTest(!0),E.setScissorTest(!1);for(let I=0,P=b.length;I<P;I++){const L=b[I],N=L.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",L,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;i.copy(N.mapSize);const F=N.getFrameExtents();if(i.multiply(F),a.copy(N.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/F.x),i.x=a.x*F.x,N.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/F.y),i.y=a.y*F.y,N.mapSize.y=a.y)),N.map===null){const H=this.type!==HS?{minFilter:Cs,magFilter:Cs}:{};N.map=new _v(i.x,i.y,H),N.map.texture.name=L.name+".shadowMap",N.camera.updateProjectionMatrix()}n.setRenderTarget(N.map),n.clear();const k=N.getViewportCount();for(let H=0;H<k;H++){const U=N.getViewport(H);s.set(a.x*U.x,a.y*U.y,a.x*U.z,a.y*U.w),E.viewport(s),N.updateMatrices(L,H),r=N.getFrustum(),_(x,w,N.camera,L,this.type)}N.isPointLightShadow!==!0&&this.type===HS&&g(N,w),N.needsUpdate=!1}v.needsUpdate=!1,n.setRenderTarget(A,T,C)};function g(b,x){const w=e.update(m);f.defines.VSM_SAMPLES!==b.blurSamples&&(f.defines.VSM_SAMPLES=b.blurSamples,h.defines.VSM_SAMPLES=b.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new _v(i.x,i.y)),f.uniforms.shadow_pass.value=b.map.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(x,null,w,f,m,null),h.uniforms.shadow_pass.value=b.mapPass.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(x,null,w,h,m,null)}function y(b,x,w,A,T,C){let E=null;const I=w.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(I!==void 0?E=I:E=w.isPointLight===!0?l:o,n.localClippingEnabled&&x.clipShadows===!0&&Array.isArray(x.clippingPlanes)&&x.clippingPlanes.length!==0||x.displacementMap&&x.displacementScale!==0||x.alphaMap&&x.alphaTest>0){const P=E.uuid,L=x.uuid;let N=u[P];N===void 0&&(N={},u[P]=N);let F=N[L];F===void 0&&(F=E.clone(),N[L]=F),E=F}return E.visible=x.visible,E.wireframe=x.wireframe,C===HS?E.side=x.shadowSide!==null?x.shadowSide:x.side:E.side=x.shadowSide!==null?x.shadowSide:d[x.side],E.alphaMap=x.alphaMap,E.alphaTest=x.alphaTest,E.clipShadows=x.clipShadows,E.clippingPlanes=x.clippingPlanes,E.clipIntersection=x.clipIntersection,E.displacementMap=x.displacementMap,E.displacementScale=x.displacementScale,E.displacementBias=x.displacementBias,E.wireframeLinewidth=x.wireframeLinewidth,E.linewidth=x.linewidth,w.isPointLight===!0&&E.isMeshDistanceMaterial===!0&&(E.referencePosition.setFromMatrixPosition(w.matrixWorld),E.nearDistance=A,E.farDistance=T),E}function _(b,x,w,A,T){if(b.visible===!1)return;if(b.layers.test(x.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&T===HS)&&(!b.frustumCulled||r.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,b.matrixWorld);const I=e.update(b),P=b.material;if(Array.isArray(P)){const L=I.groups;for(let N=0,F=L.length;N<F;N++){const k=L[N],H=P[k.materialIndex];if(H&&H.visible){const U=y(b,H,A,w.near,w.far,T);n.renderBufferDirect(w,null,I,U,b,k)}}}else if(P.visible){const L=y(b,P,A,w.near,w.far,T);n.renderBufferDirect(w,null,I,L,b,null)}}const E=b.children;for(let I=0,P=E.length;I<P;I++)_(E[I],x,w,A,T)}}function cdt(n,e,t){const r=t.isWebGL2;function i(){let Ie=!1;const wt=new ki;let Pe=null;const Rt=new ki(0,0,0,0);return{setMask:function(dt){Pe!==dt&&!Ie&&(n.colorMask(dt,dt,dt,dt),Pe=dt)},setLocked:function(dt){Ie=dt},setClear:function(dt,Mt,Wt,zt,Sn){Sn===!0&&(dt*=zt,Mt*=zt,Wt*=zt),wt.set(dt,Mt,Wt,zt),Rt.equals(wt)===!1&&(n.clearColor(dt,Mt,Wt,zt),Rt.copy(wt))},reset:function(){Ie=!1,Pe=null,Rt.set(-1,0,0,0)}}}function a(){let Ie=!1,wt=null,Pe=null,Rt=null;return{setTest:function(dt){dt?me(2929):ke(2929)},setMask:function(dt){wt!==dt&&!Ie&&(n.depthMask(dt),wt=dt)},setFunc:function(dt){if(Pe!==dt){if(dt)switch(dt){case Eat:n.depthFunc(512);break;case Mat:n.depthFunc(519);break;case Iat:n.depthFunc(513);break;case DO:n.depthFunc(515);break;case Dat:n.depthFunc(514);break;case Pat:n.depthFunc(518);break;case Rat:n.depthFunc(516);break;case kat:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);Pe=dt}},setLocked:function(dt){Ie=dt},setClear:function(dt){Rt!==dt&&(n.clearDepth(dt),Rt=dt)},reset:function(){Ie=!1,wt=null,Pe=null,Rt=null}}}function s(){let Ie=!1,wt=null,Pe=null,Rt=null,dt=null,Mt=null,Wt=null,zt=null,Sn=null;return{setTest:function(On){Ie||(On?me(2960):ke(2960))},setMask:function(On){wt!==On&&!Ie&&(n.stencilMask(On),wt=On)},setFunc:function(On,Er,Qn){(Pe!==On||Rt!==Er||dt!==Qn)&&(n.stencilFunc(On,Er,Qn),Pe=On,Rt=Er,dt=Qn)},setOp:function(On,Er,Qn){(Mt!==On||Wt!==Er||zt!==Qn)&&(n.stencilOp(On,Er,Qn),Mt=On,Wt=Er,zt=Qn)},setLocked:function(On){Ie=On},setClear:function(On){Sn!==On&&(n.clearStencil(On),Sn=On)},reset:function(){Ie=!1,wt=null,Pe=null,Rt=null,dt=null,Mt=null,Wt=null,zt=null,Sn=null}}}const o=new i,l=new a,u=new s,c=new WeakMap,d=new WeakMap;let f={},h={},p=new WeakMap,m=[],v=null,g=!1,y=null,_=null,b=null,x=null,w=null,A=null,T=null,C=!1,E=null,I=null,P=null,L=null,N=null;const F=n.getParameter(35661);let k=!1,H=0;const U=n.getParameter(7938);U.indexOf("WebGL")!==-1?(H=parseFloat(/^WebGL (\d)/.exec(U)[1]),k=H>=1):U.indexOf("OpenGL ES")!==-1&&(H=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),k=H>=2);let B=null,$={};const ee=n.getParameter(3088),re=n.getParameter(2978),ne=new ki().fromArray(ee),ae=new ki().fromArray(re);function pe(Ie,wt,Pe){const Rt=new Uint8Array(4),dt=n.createTexture();n.bindTexture(Ie,dt),n.texParameteri(Ie,10241,9728),n.texParameteri(Ie,10240,9728);for(let Mt=0;Mt<Pe;Mt++)n.texImage2D(wt+Mt,0,6408,1,1,0,6408,5121,Rt);return dt}const de={};de[3553]=pe(3553,3553,1),de[34067]=pe(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),me(2929),l.setFunc(DO),Ue(!1),Ze(EK),me(2884),le(Ap);function me(Ie){f[Ie]!==!0&&(n.enable(Ie),f[Ie]=!0)}function ke(Ie){f[Ie]!==!1&&(n.disable(Ie),f[Ie]=!1)}function Be(Ie,wt){return h[Ie]!==wt?(n.bindFramebuffer(Ie,wt),h[Ie]=wt,r&&(Ie===36009&&(h[36160]=wt),Ie===36160&&(h[36009]=wt)),!0):!1}function Xe(Ie,wt){let Pe=m,Rt=!1;if(Ie)if(Pe=p.get(wt),Pe===void 0&&(Pe=[],p.set(wt,Pe)),Ie.isWebGLMultipleRenderTargets){const dt=Ie.texture;if(Pe.length!==dt.length||Pe[0]!==36064){for(let Mt=0,Wt=dt.length;Mt<Wt;Mt++)Pe[Mt]=36064+Mt;Pe.length=dt.length,Rt=!0}}else Pe[0]!==36064&&(Pe[0]=36064,Rt=!0);else Pe[0]!==1029&&(Pe[0]=1029,Rt=!0);Rt&&(t.isWebGL2?n.drawBuffers(Pe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Pe))}function Ye(Ie){return v!==Ie?(n.useProgram(Ie),v=Ie,!0):!1}const Y={[wy]:32774,[vat]:32778,[gat]:32779};if(r)Y[PK]=32775,Y[RK]=32776;else{const Ie=e.get("EXT_blend_minmax");Ie!==null&&(Y[PK]=Ie.MIN_EXT,Y[RK]=Ie.MAX_EXT)}const he={[yat]:0,[_at]:1,[bat]:768,[ode]:770,[Aat]:776,[Tat]:774,[xat]:772,[Sat]:769,[lde]:771,[Cat]:775,[wat]:773};function le(Ie,wt,Pe,Rt,dt,Mt,Wt,zt){if(Ie===Ap){g===!0&&(ke(3042),g=!1);return}if(g===!1&&(me(3042),g=!0),Ie!==mat){if(Ie!==y||zt!==C){if((_!==wy||w!==wy)&&(n.blendEquation(32774),_=wy,w=wy),zt)switch(Ie){case f1:n.blendFuncSeparate(1,771,1,771);break;case MK:n.blendFunc(1,1);break;case IK:n.blendFuncSeparate(0,769,0,1);break;case DK:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ie);break}else switch(Ie){case f1:n.blendFuncSeparate(770,771,1,771);break;case MK:n.blendFunc(770,1);break;case IK:n.blendFuncSeparate(0,769,0,1);break;case DK:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ie);break}b=null,x=null,A=null,T=null,y=Ie,C=zt}return}dt=dt||wt,Mt=Mt||Pe,Wt=Wt||Rt,(wt!==_||dt!==w)&&(n.blendEquationSeparate(Y[wt],Y[dt]),_=wt,w=dt),(Pe!==b||Rt!==x||Mt!==A||Wt!==T)&&(n.blendFuncSeparate(he[Pe],he[Rt],he[Mt],he[Wt]),b=Pe,x=Rt,A=Mt,T=Wt),y=Ie,C=null}function Ke(Ie,wt){Ie.side===Zp?ke(2884):me(2884);let Pe=Ie.side===Nc;wt&&(Pe=!Pe),Ue(Pe),Ie.blending===f1&&Ie.transparent===!1?le(Ap):le(Ie.blending,Ie.blendEquation,Ie.blendSrc,Ie.blendDst,Ie.blendEquationAlpha,Ie.blendSrcAlpha,Ie.blendDstAlpha,Ie.premultipliedAlpha),l.setFunc(Ie.depthFunc),l.setTest(Ie.depthTest),l.setMask(Ie.depthWrite),o.setMask(Ie.colorWrite);const Rt=Ie.stencilWrite;u.setTest(Rt),Rt&&(u.setMask(Ie.stencilWriteMask),u.setFunc(Ie.stencilFunc,Ie.stencilRef,Ie.stencilFuncMask),u.setOp(Ie.stencilFail,Ie.stencilZFail,Ie.stencilZPass)),He(Ie.polygonOffset,Ie.polygonOffsetFactor,Ie.polygonOffsetUnits),Ie.alphaToCoverage===!0?me(32926):ke(32926)}function Ue(Ie){E!==Ie&&(Ie?n.frontFace(2304):n.frontFace(2305),E=Ie)}function Ze(Ie){Ie!==dat?(me(2884),Ie!==I&&(Ie===EK?n.cullFace(1029):Ie===fat?n.cullFace(1028):n.cullFace(1032))):ke(2884),I=Ie}function je(Ie){Ie!==P&&(k&&n.lineWidth(Ie),P=Ie)}function He(Ie,wt,Pe){Ie?(me(32823),(L!==wt||N!==Pe)&&(n.polygonOffset(wt,Pe),L=wt,N=Pe)):ke(32823)}function ut(Ie){Ie?me(3089):ke(3089)}function ge(Ie){Ie===void 0&&(Ie=33984+F-1),B!==Ie&&(n.activeTexture(Ie),B=Ie)}function q(Ie,wt){B===null&&ge();let Pe=$[B];Pe===void 0&&(Pe={type:void 0,texture:void 0},$[B]=Pe),(Pe.type!==Ie||Pe.texture!==wt)&&(n.bindTexture(Ie,wt||de[Ie]),Pe.type=Ie,Pe.texture=wt)}function te(){const Ie=$[B];Ie!==void 0&&Ie.type!==void 0&&(n.bindTexture(Ie.type,null),Ie.type=void 0,Ie.texture=void 0)}function ye(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function Ve(){try{n.texSubImage2D.apply(n,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function et(){try{n.texSubImage3D.apply(n,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function At(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function It(){try{n.texStorage2D.apply(n,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function De(){try{n.texStorage3D.apply(n,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function Tt(){try{n.texImage2D.apply(n,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function ot(){try{n.texImage3D.apply(n,arguments)}catch(Ie){console.error("THREE.WebGLState:",Ie)}}function G(Ie){ne.equals(Ie)===!1&&(n.scissor(Ie.x,Ie.y,Ie.z,Ie.w),ne.copy(Ie))}function _e(Ie){ae.equals(Ie)===!1&&(n.viewport(Ie.x,Ie.y,Ie.z,Ie.w),ae.copy(Ie))}function ve(Ie,wt){let Pe=d.get(wt);Pe===void 0&&(Pe=new WeakMap,d.set(wt,Pe));let Rt=Pe.get(Ie);Rt===void 0&&(Rt=n.getUniformBlockIndex(wt,Ie.name),Pe.set(Ie,Rt))}function Le(Ie,wt){const Rt=d.get(wt).get(Ie);c.get(Ie)!==Rt&&(n.uniformBlockBinding(wt,Rt,Ie.__bindingPointIndex),c.set(Ie,Rt))}function we(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),r===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},B=null,$={},h={},p=new WeakMap,m=[],v=null,g=!1,y=null,_=null,b=null,x=null,w=null,A=null,T=null,C=!1,E=null,I=null,P=null,L=null,N=null,ne.set(0,0,n.canvas.width,n.canvas.height),ae.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:me,disable:ke,bindFramebuffer:Be,drawBuffers:Xe,useProgram:Ye,setBlending:le,setMaterial:Ke,setFlipSided:Ue,setCullFace:Ze,setLineWidth:je,setPolygonOffset:He,setScissorTest:ut,activeTexture:ge,bindTexture:q,unbindTexture:te,compressedTexImage2D:ye,texImage2D:Tt,texImage3D:ot,updateUBOMapping:ve,uniformBlockBinding:Le,texStorage2D:It,texStorage3D:De,texSubImage2D:Ve,texSubImage3D:et,compressedTexSubImage2D:At,scissor:G,viewport:_e,reset:we}}function ddt(n,e,t,r,i,a,s){const o=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,d=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const v=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(q,te){return g?new OffscreenCanvas(q,te):W2("canvas")}function _(q,te,ye,Ve){let et=1;if((q.width>Ve||q.height>Ve)&&(et=Ve/Math.max(q.width,q.height)),et<1||te===!0)if(typeof HTMLImageElement<"u"&&q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&q instanceof ImageBitmap){const At=te?E3:Math.floor,It=At(et*q.width),De=At(et*q.height);m===void 0&&(m=y(It,De));const Tt=ye?y(It,De):m;return Tt.width=It,Tt.height=De,Tt.getContext("2d").drawImage(q,0,0,It,De),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+q.width+"x"+q.height+") to ("+It+"x"+De+")."),Tt}else return"data"in q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+q.width+"x"+q.height+")."),q;return q}function b(q){return kO(q.width)&&kO(q.height)}function x(q){return o?!1:q.wrapS!==hs||q.wrapT!==hs||q.minFilter!==Cs&&q.minFilter!==Za}function w(q,te){return q.generateMipmaps&&te&&q.minFilter!==Cs&&q.minFilter!==Za}function A(q){n.generateMipmap(q)}function T(q,te,ye,Ve,et=!1){if(o===!1)return te;if(q!==null){if(n[q]!==void 0)return n[q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+q+"'")}let At=te;return te===6403&&(ye===5126&&(At=33326),ye===5131&&(At=33325),ye===5121&&(At=33321)),te===33319&&(ye===5126&&(At=33328),ye===5131&&(At=33327),ye===5121&&(At=33323)),te===6408&&(ye===5126&&(At=34836),ye===5131&&(At=34842),ye===5121&&(At=Ve===ai&&et===!1?35907:32856),ye===32819&&(At=32854),ye===32820&&(At=32855)),(At===33325||At===33326||At===33327||At===33328||At===34842||At===34836)&&e.get("EXT_color_buffer_float"),At}function C(q,te,ye){return w(q,ye)===!0||q.isFramebufferTexture&&q.minFilter!==Cs&&q.minFilter!==Za?Math.log2(Math.max(te.width,te.height))+1:q.mipmaps!==void 0&&q.mipmaps.length>0?q.mipmaps.length:q.isCompressedTexture&&Array.isArray(q.image)?te.mipmaps.length:1}function E(q){return q===Cs||q===T3||q===C3?9728:9729}function I(q){const te=q.target;te.removeEventListener("dispose",I),L(te),te.isVideoTexture&&p.delete(te)}function P(q){const te=q.target;te.removeEventListener("dispose",P),F(te)}function L(q){const te=r.get(q);if(te.__webglInit===void 0)return;const ye=q.source,Ve=v.get(ye);if(Ve){const et=Ve[te.__cacheKey];et.usedTimes--,et.usedTimes===0&&N(q),Object.keys(Ve).length===0&&v.delete(ye)}r.remove(q)}function N(q){const te=r.get(q);n.deleteTexture(te.__webglTexture);const ye=q.source,Ve=v.get(ye);delete Ve[te.__cacheKey],s.memory.textures--}function F(q){const te=q.texture,ye=r.get(q),Ve=r.get(te);if(Ve.__webglTexture!==void 0&&(n.deleteTexture(Ve.__webglTexture),s.memory.textures--),q.depthTexture&&q.depthTexture.dispose(),q.isWebGLCubeRenderTarget)for(let et=0;et<6;et++)n.deleteFramebuffer(ye.__webglFramebuffer[et]),ye.__webglDepthbuffer&&n.deleteRenderbuffer(ye.__webglDepthbuffer[et]);else{if(n.deleteFramebuffer(ye.__webglFramebuffer),ye.__webglDepthbuffer&&n.deleteRenderbuffer(ye.__webglDepthbuffer),ye.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ye.__webglMultisampledFramebuffer),ye.__webglColorRenderbuffer)for(let et=0;et<ye.__webglColorRenderbuffer.length;et++)ye.__webglColorRenderbuffer[et]&&n.deleteRenderbuffer(ye.__webglColorRenderbuffer[et]);ye.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ye.__webglDepthRenderbuffer)}if(q.isWebGLMultipleRenderTargets)for(let et=0,At=te.length;et<At;et++){const It=r.get(te[et]);It.__webglTexture&&(n.deleteTexture(It.__webglTexture),s.memory.textures--),r.remove(te[et])}r.remove(te),r.remove(q)}let k=0;function H(){k=0}function U(){const q=k;return q>=l&&console.warn("THREE.WebGLTextures: Trying to use "+q+" texture units while this GPU supports only "+l),k+=1,q}function B(q){const te=[];return te.push(q.wrapS),te.push(q.wrapT),te.push(q.magFilter),te.push(q.minFilter),te.push(q.anisotropy),te.push(q.internalFormat),te.push(q.format),te.push(q.type),te.push(q.generateMipmaps),te.push(q.premultiplyAlpha),te.push(q.flipY),te.push(q.unpackAlignment),te.push(q.encoding),te.join()}function $(q,te){const ye=r.get(q);if(q.isVideoTexture&&ut(q),q.isRenderTargetTexture===!1&&q.version>0&&ye.__version!==q.version){const Ve=q.image;if(Ve===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ve.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ke(ye,q,te);return}}t.activeTexture(33984+te),t.bindTexture(3553,ye.__webglTexture)}function ee(q,te){const ye=r.get(q);if(q.version>0&&ye.__version!==q.version){ke(ye,q,te);return}t.activeTexture(33984+te),t.bindTexture(35866,ye.__webglTexture)}function re(q,te){const ye=r.get(q);if(q.version>0&&ye.__version!==q.version){ke(ye,q,te);return}t.activeTexture(33984+te),t.bindTexture(32879,ye.__webglTexture)}function ne(q,te){const ye=r.get(q);if(q.version>0&&ye.__version!==q.version){Be(ye,q,te);return}t.activeTexture(33984+te),t.bindTexture(34067,ye.__webglTexture)}const ae={[vl]:10497,[hs]:33071,[H2]:33648},pe={[Cs]:9728,[T3]:9984,[C3]:9986,[Za]:9729,[m9]:9985,[yh]:9987};function de(q,te,ye){if(ye?(n.texParameteri(q,10242,ae[te.wrapS]),n.texParameteri(q,10243,ae[te.wrapT]),(q===32879||q===35866)&&n.texParameteri(q,32882,ae[te.wrapR]),n.texParameteri(q,10240,pe[te.magFilter]),n.texParameteri(q,10241,pe[te.minFilter])):(n.texParameteri(q,10242,33071),n.texParameteri(q,10243,33071),(q===32879||q===35866)&&n.texParameteri(q,32882,33071),(te.wrapS!==hs||te.wrapT!==hs)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(q,10240,E(te.magFilter)),n.texParameteri(q,10241,E(te.minFilter)),te.minFilter!==Cs&&te.minFilter!==Za&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const Ve=e.get("EXT_texture_filter_anisotropic");if(te.type===yp&&e.has("OES_texture_float_linear")===!1||o===!1&&te.type===V2&&e.has("OES_texture_half_float_linear")===!1)return;(te.anisotropy>1||r.get(te).__currentAnisotropy)&&(n.texParameterf(q,Ve.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(te.anisotropy,i.getMaxAnisotropy())),r.get(te).__currentAnisotropy=te.anisotropy)}}function me(q,te){let ye=!1;q.__webglInit===void 0&&(q.__webglInit=!0,te.addEventListener("dispose",I));const Ve=te.source;let et=v.get(Ve);et===void 0&&(et={},v.set(Ve,et));const At=B(te);if(At!==q.__cacheKey){et[At]===void 0&&(et[At]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,ye=!0),et[At].usedTimes++;const It=et[q.__cacheKey];It!==void 0&&(et[q.__cacheKey].usedTimes--,It.usedTimes===0&&N(te)),q.__cacheKey=At,q.__webglTexture=et[At].texture}return ye}function ke(q,te,ye){let Ve=3553;te.isDataArrayTexture&&(Ve=35866),te.isData3DTexture&&(Ve=32879);const et=me(q,te),At=te.source;if(t.activeTexture(33984+ye),t.bindTexture(Ve,q.__webglTexture),At.version!==At.__currentVersion||et===!0){n.pixelStorei(37440,te.flipY),n.pixelStorei(37441,te.premultiplyAlpha),n.pixelStorei(3317,te.unpackAlignment),n.pixelStorei(37443,0);const It=x(te)&&b(te.image)===!1;let De=_(te.image,It,!1,c);De=ge(te,De);const Tt=b(De)||o,ot=a.convert(te.format,te.encoding);let G=a.convert(te.type),_e=T(te.internalFormat,ot,G,te.encoding,te.isVideoTexture);de(Ve,te,Tt);let ve;const Le=te.mipmaps,we=o&&te.isVideoTexture!==!0,Ie=At.__currentVersion===void 0||et===!0,wt=C(te,De,Tt);if(te.isDepthTexture)_e=6402,o?te.type===yp?_e=36012:te.type===L0?_e=33190:te.type===h1?_e=35056:_e=33189:te.type===yp&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),te.format===tv&&_e===6402&&te.type!==ude&&te.type!==L0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),te.type=L0,G=a.convert(te.type)),te.format===n_&&_e===6402&&(_e=34041,te.type!==h1&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),te.type=h1,G=a.convert(te.type))),Ie&&(we?t.texStorage2D(3553,1,_e,De.width,De.height):t.texImage2D(3553,0,_e,De.width,De.height,0,ot,G,null));else if(te.isDataTexture)if(Le.length>0&&Tt){we&&Ie&&t.texStorage2D(3553,wt,_e,Le[0].width,Le[0].height);for(let Pe=0,Rt=Le.length;Pe<Rt;Pe++)ve=Le[Pe],we?t.texSubImage2D(3553,Pe,0,0,ve.width,ve.height,ot,G,ve.data):t.texImage2D(3553,Pe,_e,ve.width,ve.height,0,ot,G,ve.data);te.generateMipmaps=!1}else we?(Ie&&t.texStorage2D(3553,wt,_e,De.width,De.height),t.texSubImage2D(3553,0,0,0,De.width,De.height,ot,G,De.data)):t.texImage2D(3553,0,_e,De.width,De.height,0,ot,G,De.data);else if(te.isCompressedTexture){we&&Ie&&t.texStorage2D(3553,wt,_e,Le[0].width,Le[0].height);for(let Pe=0,Rt=Le.length;Pe<Rt;Pe++)ve=Le[Pe],te.format!==Ou?ot!==null?we?t.compressedTexSubImage2D(3553,Pe,0,0,ve.width,ve.height,ot,ve.data):t.compressedTexImage2D(3553,Pe,_e,ve.width,ve.height,0,ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?t.texSubImage2D(3553,Pe,0,0,ve.width,ve.height,ot,G,ve.data):t.texImage2D(3553,Pe,_e,ve.width,ve.height,0,ot,G,ve.data)}else if(te.isDataArrayTexture)we?(Ie&&t.texStorage3D(35866,wt,_e,De.width,De.height,De.depth),t.texSubImage3D(35866,0,0,0,0,De.width,De.height,De.depth,ot,G,De.data)):t.texImage3D(35866,0,_e,De.width,De.height,De.depth,0,ot,G,De.data);else if(te.isData3DTexture)we?(Ie&&t.texStorage3D(32879,wt,_e,De.width,De.height,De.depth),t.texSubImage3D(32879,0,0,0,0,De.width,De.height,De.depth,ot,G,De.data)):t.texImage3D(32879,0,_e,De.width,De.height,De.depth,0,ot,G,De.data);else if(te.isFramebufferTexture){if(Ie)if(we)t.texStorage2D(3553,wt,_e,De.width,De.height);else{let Pe=De.width,Rt=De.height;for(let dt=0;dt<wt;dt++)t.texImage2D(3553,dt,_e,Pe,Rt,0,ot,G,null),Pe>>=1,Rt>>=1}}else if(Le.length>0&&Tt){we&&Ie&&t.texStorage2D(3553,wt,_e,Le[0].width,Le[0].height);for(let Pe=0,Rt=Le.length;Pe<Rt;Pe++)ve=Le[Pe],we?t.texSubImage2D(3553,Pe,0,0,ot,G,ve):t.texImage2D(3553,Pe,_e,ot,G,ve);te.generateMipmaps=!1}else we?(Ie&&t.texStorage2D(3553,wt,_e,De.width,De.height),t.texSubImage2D(3553,0,0,0,ot,G,De)):t.texImage2D(3553,0,_e,ot,G,De);w(te,Tt)&&A(Ve),At.__currentVersion=At.version,te.onUpdate&&te.onUpdate(te)}q.__version=te.version}function Be(q,te,ye){if(te.image.length!==6)return;const Ve=me(q,te),et=te.source;if(t.activeTexture(33984+ye),t.bindTexture(34067,q.__webglTexture),et.version!==et.__currentVersion||Ve===!0){n.pixelStorei(37440,te.flipY),n.pixelStorei(37441,te.premultiplyAlpha),n.pixelStorei(3317,te.unpackAlignment),n.pixelStorei(37443,0);const At=te.isCompressedTexture||te.image[0].isCompressedTexture,It=te.image[0]&&te.image[0].isDataTexture,De=[];for(let Pe=0;Pe<6;Pe++)!At&&!It?De[Pe]=_(te.image[Pe],!1,!0,u):De[Pe]=It?te.image[Pe].image:te.image[Pe],De[Pe]=ge(te,De[Pe]);const Tt=De[0],ot=b(Tt)||o,G=a.convert(te.format,te.encoding),_e=a.convert(te.type),ve=T(te.internalFormat,G,_e,te.encoding),Le=o&&te.isVideoTexture!==!0,we=et.__currentVersion===void 0||Ve===!0;let Ie=C(te,Tt,ot);de(34067,te,ot);let wt;if(At){Le&&we&&t.texStorage2D(34067,Ie,ve,Tt.width,Tt.height);for(let Pe=0;Pe<6;Pe++){wt=De[Pe].mipmaps;for(let Rt=0;Rt<wt.length;Rt++){const dt=wt[Rt];te.format!==Ou?G!==null?Le?t.compressedTexSubImage2D(34069+Pe,Rt,0,0,dt.width,dt.height,G,dt.data):t.compressedTexImage2D(34069+Pe,Rt,ve,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Le?t.texSubImage2D(34069+Pe,Rt,0,0,dt.width,dt.height,G,_e,dt.data):t.texImage2D(34069+Pe,Rt,ve,dt.width,dt.height,0,G,_e,dt.data)}}}else{wt=te.mipmaps,Le&&we&&(wt.length>0&&Ie++,t.texStorage2D(34067,Ie,ve,De[0].width,De[0].height));for(let Pe=0;Pe<6;Pe++)if(It){Le?t.texSubImage2D(34069+Pe,0,0,0,De[Pe].width,De[Pe].height,G,_e,De[Pe].data):t.texImage2D(34069+Pe,0,ve,De[Pe].width,De[Pe].height,0,G,_e,De[Pe].data);for(let Rt=0;Rt<wt.length;Rt++){const Mt=wt[Rt].image[Pe].image;Le?t.texSubImage2D(34069+Pe,Rt+1,0,0,Mt.width,Mt.height,G,_e,Mt.data):t.texImage2D(34069+Pe,Rt+1,ve,Mt.width,Mt.height,0,G,_e,Mt.data)}}else{Le?t.texSubImage2D(34069+Pe,0,0,0,G,_e,De[Pe]):t.texImage2D(34069+Pe,0,ve,G,_e,De[Pe]);for(let Rt=0;Rt<wt.length;Rt++){const dt=wt[Rt];Le?t.texSubImage2D(34069+Pe,Rt+1,0,0,G,_e,dt.image[Pe]):t.texImage2D(34069+Pe,Rt+1,ve,G,_e,dt.image[Pe])}}}w(te,ot)&&A(34067),et.__currentVersion=et.version,te.onUpdate&&te.onUpdate(te)}q.__version=te.version}function Xe(q,te,ye,Ve,et){const At=a.convert(ye.format,ye.encoding),It=a.convert(ye.type),De=T(ye.internalFormat,At,It,ye.encoding);r.get(te).__hasExternalTextures||(et===32879||et===35866?t.texImage3D(et,0,De,te.width,te.height,te.depth,0,At,It,null):t.texImage2D(et,0,De,te.width,te.height,0,At,It,null)),t.bindFramebuffer(36160,q),He(te)?f.framebufferTexture2DMultisampleEXT(36160,Ve,et,r.get(ye).__webglTexture,0,je(te)):n.framebufferTexture2D(36160,Ve,et,r.get(ye).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ye(q,te,ye){if(n.bindRenderbuffer(36161,q),te.depthBuffer&&!te.stencilBuffer){let Ve=33189;if(ye||He(te)){const et=te.depthTexture;et&&et.isDepthTexture&&(et.type===yp?Ve=36012:et.type===L0&&(Ve=33190));const At=je(te);He(te)?f.renderbufferStorageMultisampleEXT(36161,At,Ve,te.width,te.height):n.renderbufferStorageMultisample(36161,At,Ve,te.width,te.height)}else n.renderbufferStorage(36161,Ve,te.width,te.height);n.framebufferRenderbuffer(36160,36096,36161,q)}else if(te.depthBuffer&&te.stencilBuffer){const Ve=je(te);ye&&He(te)===!1?n.renderbufferStorageMultisample(36161,Ve,35056,te.width,te.height):He(te)?f.renderbufferStorageMultisampleEXT(36161,Ve,35056,te.width,te.height):n.renderbufferStorage(36161,34041,te.width,te.height),n.framebufferRenderbuffer(36160,33306,36161,q)}else{const Ve=te.isWebGLMultipleRenderTargets===!0?te.texture:[te.texture];for(let et=0;et<Ve.length;et++){const At=Ve[et],It=a.convert(At.format,At.encoding),De=a.convert(At.type),Tt=T(At.internalFormat,It,De,At.encoding),ot=je(te);ye&&He(te)===!1?n.renderbufferStorageMultisample(36161,ot,Tt,te.width,te.height):He(te)?f.renderbufferStorageMultisampleEXT(36161,ot,Tt,te.width,te.height):n.renderbufferStorage(36161,Tt,te.width,te.height)}}n.bindRenderbuffer(36161,null)}function Y(q,te){if(te&&te.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,q),!(te.depthTexture&&te.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(te.depthTexture).__webglTexture||te.depthTexture.image.width!==te.width||te.depthTexture.image.height!==te.height)&&(te.depthTexture.image.width=te.width,te.depthTexture.image.height=te.height,te.depthTexture.needsUpdate=!0),$(te.depthTexture,0);const Ve=r.get(te.depthTexture).__webglTexture,et=je(te);if(te.depthTexture.format===tv)He(te)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ve,0,et):n.framebufferTexture2D(36160,36096,3553,Ve,0);else if(te.depthTexture.format===n_)He(te)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ve,0,et):n.framebufferTexture2D(36160,33306,3553,Ve,0);else throw new Error("Unknown depthTexture format")}function he(q){const te=r.get(q),ye=q.isWebGLCubeRenderTarget===!0;if(q.depthTexture&&!te.__autoAllocateDepthBuffer){if(ye)throw new Error("target.depthTexture not supported in Cube render targets");Y(te.__webglFramebuffer,q)}else if(ye){te.__webglDepthbuffer=[];for(let Ve=0;Ve<6;Ve++)t.bindFramebuffer(36160,te.__webglFramebuffer[Ve]),te.__webglDepthbuffer[Ve]=n.createRenderbuffer(),Ye(te.__webglDepthbuffer[Ve],q,!1)}else t.bindFramebuffer(36160,te.__webglFramebuffer),te.__webglDepthbuffer=n.createRenderbuffer(),Ye(te.__webglDepthbuffer,q,!1);t.bindFramebuffer(36160,null)}function le(q,te,ye){const Ve=r.get(q);te!==void 0&&Xe(Ve.__webglFramebuffer,q,q.texture,36064,3553),ye!==void 0&&he(q)}function Ke(q){const te=q.texture,ye=r.get(q),Ve=r.get(te);q.addEventListener("dispose",P),q.isWebGLMultipleRenderTargets!==!0&&(Ve.__webglTexture===void 0&&(Ve.__webglTexture=n.createTexture()),Ve.__version=te.version,s.memory.textures++);const et=q.isWebGLCubeRenderTarget===!0,At=q.isWebGLMultipleRenderTargets===!0,It=b(q)||o;if(et){ye.__webglFramebuffer=[];for(let De=0;De<6;De++)ye.__webglFramebuffer[De]=n.createFramebuffer()}else{if(ye.__webglFramebuffer=n.createFramebuffer(),At)if(i.drawBuffers){const De=q.texture;for(let Tt=0,ot=De.length;Tt<ot;Tt++){const G=r.get(De[Tt]);G.__webglTexture===void 0&&(G.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&q.samples>0&&He(q)===!1){const De=At?te:[te];ye.__webglMultisampledFramebuffer=n.createFramebuffer(),ye.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ye.__webglMultisampledFramebuffer);for(let Tt=0;Tt<De.length;Tt++){const ot=De[Tt];ye.__webglColorRenderbuffer[Tt]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ye.__webglColorRenderbuffer[Tt]);const G=a.convert(ot.format,ot.encoding),_e=a.convert(ot.type),ve=T(ot.internalFormat,G,_e,ot.encoding),Le=je(q);n.renderbufferStorageMultisample(36161,Le,ve,q.width,q.height),n.framebufferRenderbuffer(36160,36064+Tt,36161,ye.__webglColorRenderbuffer[Tt])}n.bindRenderbuffer(36161,null),q.depthBuffer&&(ye.__webglDepthRenderbuffer=n.createRenderbuffer(),Ye(ye.__webglDepthRenderbuffer,q,!0)),t.bindFramebuffer(36160,null)}}if(et){t.bindTexture(34067,Ve.__webglTexture),de(34067,te,It);for(let De=0;De<6;De++)Xe(ye.__webglFramebuffer[De],q,te,36064,34069+De);w(te,It)&&A(34067),t.unbindTexture()}else if(At){const De=q.texture;for(let Tt=0,ot=De.length;Tt<ot;Tt++){const G=De[Tt],_e=r.get(G);t.bindTexture(3553,_e.__webglTexture),de(3553,G,It),Xe(ye.__webglFramebuffer,q,G,36064+Tt,3553),w(G,It)&&A(3553)}t.unbindTexture()}else{let De=3553;(q.isWebGL3DRenderTarget||q.isWebGLArrayRenderTarget)&&(o?De=q.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(De,Ve.__webglTexture),de(De,te,It),Xe(ye.__webglFramebuffer,q,te,36064,De),w(te,It)&&A(De),t.unbindTexture()}q.depthBuffer&&he(q)}function Ue(q){const te=b(q)||o,ye=q.isWebGLMultipleRenderTargets===!0?q.texture:[q.texture];for(let Ve=0,et=ye.length;Ve<et;Ve++){const At=ye[Ve];if(w(At,te)){const It=q.isWebGLCubeRenderTarget?34067:3553,De=r.get(At).__webglTexture;t.bindTexture(It,De),A(It),t.unbindTexture()}}}function Ze(q){if(o&&q.samples>0&&He(q)===!1){const te=q.isWebGLMultipleRenderTargets?q.texture:[q.texture],ye=q.width,Ve=q.height;let et=16384;const At=[],It=q.stencilBuffer?33306:36096,De=r.get(q),Tt=q.isWebGLMultipleRenderTargets===!0;if(Tt)for(let ot=0;ot<te.length;ot++)t.bindFramebuffer(36160,De.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ot,36161,null),t.bindFramebuffer(36160,De.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ot,3553,null,0);t.bindFramebuffer(36008,De.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,De.__webglFramebuffer);for(let ot=0;ot<te.length;ot++){At.push(36064+ot),q.depthBuffer&&At.push(It);const G=De.__ignoreDepthValues!==void 0?De.__ignoreDepthValues:!1;if(G===!1&&(q.depthBuffer&&(et|=256),q.stencilBuffer&&(et|=1024)),Tt&&n.framebufferRenderbuffer(36008,36064,36161,De.__webglColorRenderbuffer[ot]),G===!0&&(n.invalidateFramebuffer(36008,[It]),n.invalidateFramebuffer(36009,[It])),Tt){const _e=r.get(te[ot]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,_e,0)}n.blitFramebuffer(0,0,ye,Ve,0,0,ye,Ve,et,9728),h&&n.invalidateFramebuffer(36008,At)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Tt)for(let ot=0;ot<te.length;ot++){t.bindFramebuffer(36160,De.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+ot,36161,De.__webglColorRenderbuffer[ot]);const G=r.get(te[ot]).__webglTexture;t.bindFramebuffer(36160,De.__webglFramebuffer),n.framebufferTexture2D(36009,36064+ot,3553,G,0)}t.bindFramebuffer(36009,De.__webglMultisampledFramebuffer)}}function je(q){return Math.min(d,q.samples)}function He(q){const te=r.get(q);return o&&q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&te.__useRenderToTexture!==!1}function ut(q){const te=s.render.frame;p.get(q)!==te&&(p.set(q,te),q.update())}function ge(q,te){const ye=q.encoding,Ve=q.format,et=q.type;return q.isCompressedTexture===!0||q.isVideoTexture===!0||q.format===RO||ye!==Jp&&(ye===ai?o===!1?e.has("EXT_sRGB")===!0&&Ve===Ou?(q.format=RO,q.minFilter=Za,q.generateMipmaps=!1):te=gde.sRGBToLinear(te):(Ve!==Ou||et!==yv)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ye)),te}this.allocateTextureUnit=U,this.resetTextureUnits=H,this.setTexture2D=$,this.setTexture2DArray=ee,this.setTexture3D=re,this.setTextureCube=ne,this.rebindTextures=le,this.setupRenderTarget=Ke,this.updateRenderTargetMipmap=Ue,this.updateMultisampleRenderTarget=Ze,this.setupDepthRenderbuffer=he,this.setupFrameBufferTexture=Xe,this.useMultisampledRTT=He}function fdt(n,e,t){const r=t.isWebGL2;function i(a,s=null){let o;if(a===yv)return 5121;if(a===Gat)return 32819;if(a===Wat)return 32820;if(a===Hat)return 5120;if(a===Vat)return 5122;if(a===ude)return 5123;if(a===$at)return 5124;if(a===L0)return 5125;if(a===yp)return 5126;if(a===V2)return r?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(a===qat)return 6406;if(a===Ou)return 6408;if(a===Kat)return 6409;if(a===Xat)return 6410;if(a===tv)return 6402;if(a===n_)return 34041;if(a===Yat)return 6403;if(a===jat)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(a===RO)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(a===Qat)return 36244;if(a===Zat)return 33319;if(a===Jat)return 33320;if(a===est)return 36249;if(a===NE||a===XR||a===BE||a===FE)if(s===ai)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(a===NE)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(a===XR)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(a===BE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(a===FE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(a===NE)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===XR)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===BE)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===FE)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(a===kK||a===LK||a===OK||a===NK)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(a===kK)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===LK)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===OK)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===NK)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(a===cde)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(a===BK||a===FK)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(a===BK)return s===ai?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(a===FK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(a===UK||a===zK||a===HK||a===VK||a===$K||a===GK||a===WK||a===qK||a===jK||a===KK||a===XK||a===YK||a===QK||a===ZK)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(a===UK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(a===zK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(a===HK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(a===VK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(a===$K)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(a===GK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(a===WK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(a===qK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(a===jK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(a===KK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(a===XK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(a===YK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(a===QK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(a===ZK)return s===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(a===JK)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(a===JK)return s===ai?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return a===h1?r?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[a]!==void 0?n[a]:null}return{convert:i}}let hdt=class extends ds{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},gl=class extends Sa{constructor(){super(),this.isGroup=!0,this.type="Group"}};const pdt={type:"move"};let wk=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new gl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new gl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new it,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new it),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new gl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new it,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new it),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,s=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const m of e.hand.values()){const v=t.getJointPose(m,r);if(u.joints[m.jointName]===void 0){const y=new gl;y.matrixAutoUpdate=!1,y.visible=!1,u.joints[m.jointName]=y,u.add(y)}const g=u.joints[m.jointName];v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=v.radius),g.visible=v!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],f=c.position.distanceTo(d.position),h=.02,p=.005;u.inputState.pinching&&f>h+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=h-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(pdt)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),this}},mdt=class extends Qs{constructor(e,t,r,i,a,s,o,l,u,c){if(c=c!==void 0?c:tv,c!==tv&&c!==n_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===tv&&(r=L0),r===void 0&&c===n_&&(r=h1),super(null,i,a,s,o,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Cs,this.minFilter=l!==void 0?l:Cs,this.flipY=!1,this.generateMipmaps=!1}},vdt=class extends fm{constructor(e,t){super();const r=this;let i=null,a=1,s=null,o="local-floor",l=null,u=null,c=null,d=null,f=null,h=null;const p=t.getContextAttributes();let m=null,v=null;const g=[],y=[],_=new ds;_.layers.enable(1),_.viewport=new ki;const b=new ds;b.layers.enable(2),b.viewport=new ki;const x=[_,b],w=new hdt;w.layers.enable(1),w.layers.enable(2);let A=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let $=g[B];return $===void 0&&($=new wk,g[B]=$),$.getTargetRaySpace()},this.getControllerGrip=function(B){let $=g[B];return $===void 0&&($=new wk,g[B]=$),$.getGripSpace()},this.getHand=function(B){let $=g[B];return $===void 0&&($=new wk,g[B]=$),$.getHandSpace()};function C(B){const $=y.indexOf(B.inputSource);if($===-1)return;const ee=g[$];ee!==void 0&&ee.dispatchEvent({type:B.type,data:B.inputSource})}function E(){i.removeEventListener("select",C),i.removeEventListener("selectstart",C),i.removeEventListener("selectend",C),i.removeEventListener("squeeze",C),i.removeEventListener("squeezestart",C),i.removeEventListener("squeezeend",C),i.removeEventListener("end",E),i.removeEventListener("inputsourceschange",I);for(let B=0;B<g.length;B++){const $=y[B];$!==null&&(y[B]=null,g[B].disconnect($))}A=null,T=null,e.setRenderTarget(m),f=null,d=null,c=null,i=null,v=null,U.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(B){a=B,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){o=B,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(B){l=B},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return i},this.setSession=async function(B){if(i=B,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",C),i.addEventListener("selectstart",C),i.addEventListener("selectend",C),i.addEventListener("squeeze",C),i.addEventListener("squeezestart",C),i.addEventListener("squeezeend",C),i.addEventListener("end",E),i.addEventListener("inputsourceschange",I),p.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const $={antialias:i.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:a};f=new XRWebGLLayer(i,t,$),i.updateRenderState({baseLayer:f}),v=new _v(f.framebufferWidth,f.framebufferHeight,{format:Ou,type:yv,encoding:e.outputEncoding})}else{let $=null,ee=null,re=null;p.depth&&(re=p.stencil?35056:33190,$=p.stencil?n_:tv,ee=p.stencil?h1:L0);const ne={colorFormat:32856,depthFormat:re,scaleFactor:a};c=new XRWebGLBinding(i,t),d=c.createProjectionLayer(ne),i.updateRenderState({layers:[d]}),v=new _v(d.textureWidth,d.textureHeight,{format:Ou,type:yv,depthTexture:new mdt(d.textureWidth,d.textureHeight,ee,void 0,void 0,void 0,void 0,void 0,void 0,$),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});const ae=e.properties.get(v);ae.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(1),l=null,s=await i.requestReferenceSpace(o),U.setContext(i),U.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function I(B){for(let $=0;$<B.removed.length;$++){const ee=B.removed[$],re=y.indexOf(ee);re>=0&&(y[re]=null,g[re].dispatchEvent({type:"disconnected",data:ee}))}for(let $=0;$<B.added.length;$++){const ee=B.added[$];let re=y.indexOf(ee);if(re===-1){for(let ae=0;ae<g.length;ae++)if(ae>=y.length){y.push(ee),re=ae;break}else if(y[ae]===null){y[ae]=ee,re=ae;break}if(re===-1)break}const ne=g[re];ne&&ne.dispatchEvent({type:"connected",data:ee})}}const P=new it,L=new it;function N(B,$,ee){P.setFromMatrixPosition($.matrixWorld),L.setFromMatrixPosition(ee.matrixWorld);const re=P.distanceTo(L),ne=$.projectionMatrix.elements,ae=ee.projectionMatrix.elements,pe=ne[14]/(ne[10]-1),de=ne[14]/(ne[10]+1),me=(ne[9]+1)/ne[5],ke=(ne[9]-1)/ne[5],Be=(ne[8]-1)/ne[0],Xe=(ae[8]+1)/ae[0],Ye=pe*Be,Y=pe*Xe,he=re/(-Be+Xe),le=he*-Be;$.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(le),B.translateZ(he),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();const Ke=pe+he,Ue=de+he,Ze=Ye-le,je=Y+(re-le),He=me*de/Ue*Ke,ut=ke*de/Ue*Ke;B.projectionMatrix.makePerspective(Ze,je,He,ut,Ke,Ue)}function F(B,$){$===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices($.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCamera=function(B){if(i===null)return;w.near=b.near=_.near=B.near,w.far=b.far=_.far=B.far,(A!==w.near||T!==w.far)&&(i.updateRenderState({depthNear:w.near,depthFar:w.far}),A=w.near,T=w.far);const $=B.parent,ee=w.cameras;F(w,$);for(let ne=0;ne<ee.length;ne++)F(ee[ne],$);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),B.position.copy(w.position),B.quaternion.copy(w.quaternion),B.scale.copy(w.scale),B.matrix.copy(w.matrix),B.matrixWorld.copy(w.matrixWorld);const re=B.children;for(let ne=0,ae=re.length;ne<ae;ne++)re[ne].updateMatrixWorld(!0);ee.length===2?N(w,_,b):w.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(B){d!==null&&(d.fixedFoveation=B),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=B)};let k=null;function H(B,$){if(u=$.getViewerPose(l||s),h=$,u!==null){const ee=u.views;f!==null&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let re=!1;ee.length!==w.cameras.length&&(w.cameras.length=0,re=!0);for(let ne=0;ne<ee.length;ne++){const ae=ee[ne];let pe=null;if(f!==null)pe=f.getViewport(ae);else{const me=c.getViewSubImage(d,ae);pe=me.viewport,ne===0&&(e.setRenderTargetTextures(v,me.colorTexture,d.ignoreDepthValues?void 0:me.depthStencilTexture),e.setRenderTarget(v))}let de=x[ne];de===void 0&&(de=new ds,de.layers.enable(ne),de.viewport=new ki,x[ne]=de),de.matrix.fromArray(ae.transform.matrix),de.projectionMatrix.fromArray(ae.projectionMatrix),de.viewport.set(pe.x,pe.y,pe.width,pe.height),ne===0&&w.matrix.copy(de.matrix),re===!0&&w.cameras.push(de)}}for(let ee=0;ee<g.length;ee++){const re=y[ee],ne=g[ee];re!==null&&ne!==void 0&&ne.update(re,$,l||s)}k&&k(B,$),h=null}const U=new Ade;U.setAnimationLoop(H),this.setAnimationLoop=function(B){k=B},this.dispose=function(){}}};function gdt(n,e){function t(m,v){m.fogColor.value.copy(v.color),v.isFog?(m.fogNear.value=v.near,m.fogFar.value=v.far):v.isFogExp2&&(m.fogDensity.value=v.density)}function r(m,v,g,y,_){v.isMeshBasicMaterial||v.isMeshLambertMaterial?i(m,v):v.isMeshToonMaterial?(i(m,v),c(m,v)):v.isMeshPhongMaterial?(i(m,v),u(m,v)):v.isMeshStandardMaterial?(i(m,v),d(m,v),v.isMeshPhysicalMaterial&&f(m,v,_)):v.isMeshMatcapMaterial?(i(m,v),h(m,v)):v.isMeshDepthMaterial?i(m,v):v.isMeshDistanceMaterial?(i(m,v),p(m,v)):v.isMeshNormalMaterial?i(m,v):v.isLineBasicMaterial?(a(m,v),v.isLineDashedMaterial&&s(m,v)):v.isPointsMaterial?o(m,v,g,y):v.isSpriteMaterial?l(m,v):v.isShadowMaterial?(m.color.value.copy(v.color),m.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function i(m,v){m.opacity.value=v.opacity,v.color&&m.diffuse.value.copy(v.color),v.emissive&&m.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.bumpMap&&(m.bumpMap.value=v.bumpMap,m.bumpScale.value=v.bumpScale,v.side===Nc&&(m.bumpScale.value*=-1)),v.displacementMap&&(m.displacementMap.value=v.displacementMap,m.displacementScale.value=v.displacementScale,m.displacementBias.value=v.displacementBias),v.emissiveMap&&(m.emissiveMap.value=v.emissiveMap),v.normalMap&&(m.normalMap.value=v.normalMap,m.normalScale.value.copy(v.normalScale),v.side===Nc&&m.normalScale.value.negate()),v.specularMap&&(m.specularMap.value=v.specularMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);const g=e.get(v).envMap;if(g&&(m.envMap.value=g,m.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=v.reflectivity,m.ior.value=v.ior,m.refractionRatio.value=v.refractionRatio),v.lightMap){m.lightMap.value=v.lightMap;const b=n.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=v.lightMapIntensity*b}v.aoMap&&(m.aoMap.value=v.aoMap,m.aoMapIntensity.value=v.aoMapIntensity);let y;v.map?y=v.map:v.specularMap?y=v.specularMap:v.displacementMap?y=v.displacementMap:v.normalMap?y=v.normalMap:v.bumpMap?y=v.bumpMap:v.roughnessMap?y=v.roughnessMap:v.metalnessMap?y=v.metalnessMap:v.alphaMap?y=v.alphaMap:v.emissiveMap?y=v.emissiveMap:v.clearcoatMap?y=v.clearcoatMap:v.clearcoatNormalMap?y=v.clearcoatNormalMap:v.clearcoatRoughnessMap?y=v.clearcoatRoughnessMap:v.iridescenceMap?y=v.iridescenceMap:v.iridescenceThicknessMap?y=v.iridescenceThicknessMap:v.specularIntensityMap?y=v.specularIntensityMap:v.specularColorMap?y=v.specularColorMap:v.transmissionMap?y=v.transmissionMap:v.thicknessMap?y=v.thicknessMap:v.sheenColorMap?y=v.sheenColorMap:v.sheenRoughnessMap&&(y=v.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let _;v.aoMap?_=v.aoMap:v.lightMap&&(_=v.lightMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uv2Transform.value.copy(_.matrix))}function a(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity}function s(m,v){m.dashSize.value=v.dashSize,m.totalSize.value=v.dashSize+v.gapSize,m.scale.value=v.scale}function o(m,v,g,y){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.size.value=v.size*g,m.scale.value=y*.5,v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let _;v.map?_=v.map:v.alphaMap&&(_=v.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}function l(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.rotation.value=v.rotation,v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let g;v.map?g=v.map:v.alphaMap&&(g=v.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),m.uvTransform.value.copy(g.matrix))}function u(m,v){m.specular.value.copy(v.specular),m.shininess.value=Math.max(v.shininess,1e-4)}function c(m,v){v.gradientMap&&(m.gradientMap.value=v.gradientMap)}function d(m,v){m.roughness.value=v.roughness,m.metalness.value=v.metalness,v.roughnessMap&&(m.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(m.metalnessMap.value=v.metalnessMap),e.get(v).envMap&&(m.envMapIntensity.value=v.envMapIntensity)}function f(m,v,g){m.ior.value=v.ior,v.sheen>0&&(m.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),m.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(m.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(m.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(m.clearcoat.value=v.clearcoat,m.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(m.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),m.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===Nc&&m.clearcoatNormalScale.value.negate())),v.iridescence>0&&(m.iridescence.value=v.iridescence,m.iridescenceIOR.value=v.iridescenceIOR,m.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(m.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(m.transmission.value=v.transmission,m.transmissionSamplerMap.value=g.texture,m.transmissionSamplerSize.value.set(g.width,g.height),v.transmissionMap&&(m.transmissionMap.value=v.transmissionMap),m.thickness.value=v.thickness,v.thicknessMap&&(m.thicknessMap.value=v.thicknessMap),m.attenuationDistance.value=v.attenuationDistance,m.attenuationColor.value.copy(v.attenuationColor)),m.specularIntensity.value=v.specularIntensity,m.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(m.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(m.specularColorMap.value=v.specularColorMap)}function h(m,v){v.matcap&&(m.matcap.value=v.matcap)}function p(m,v){m.referencePosition.value.copy(v.referencePosition),m.nearDistance.value=v.nearDistance,m.farDistance.value=v.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:r}}function ydt(n,e,t,r){let i={},a={},s=[];const o=t.isWebGL2?n.getParameter(35375):0;function l(y,_){const b=_.program;r.uniformBlockBinding(y,b)}function u(y,_){let b=i[y.id];b===void 0&&(p(y),b=c(y),i[y.id]=b,y.addEventListener("dispose",v));const x=_.program;r.updateUBOMapping(y,x);const w=e.render.frame;a[y.id]!==w&&(f(y),a[y.id]=w)}function c(y){const _=d();y.__bindingPointIndex=_;const b=n.createBuffer(),x=y.__size,w=y.usage;return n.bindBuffer(35345,b),n.bufferData(35345,x,w),n.bindBuffer(35345,null),n.bindBufferBase(35345,_,b),b}function d(){for(let y=0;y<o;y++)if(s.indexOf(y)===-1)return s.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const _=i[y.id],b=y.uniforms,x=y.__cache;n.bindBuffer(35345,_);for(let w=0,A=b.length;w<A;w++){const T=b[w];if(h(T,w,x)===!0){const C=T.value,E=T.__offset;typeof C=="number"?(T.__data[0]=C,n.bufferSubData(35345,E,T.__data)):(T.value.isMatrix3?(T.__data[0]=T.value.elements[0],T.__data[1]=T.value.elements[1],T.__data[2]=T.value.elements[2],T.__data[3]=T.value.elements[0],T.__data[4]=T.value.elements[3],T.__data[5]=T.value.elements[4],T.__data[6]=T.value.elements[5],T.__data[7]=T.value.elements[0],T.__data[8]=T.value.elements[6],T.__data[9]=T.value.elements[7],T.__data[10]=T.value.elements[8],T.__data[11]=T.value.elements[0]):C.toArray(T.__data),n.bufferSubData(35345,E,T.__data))}}n.bindBuffer(35345,null)}function h(y,_,b){const x=y.value;if(b[_]===void 0)return typeof x=="number"?b[_]=x:b[_]=x.clone(),!0;if(typeof x=="number"){if(b[_]!==x)return b[_]=x,!0}else{const w=b[_];if(w.equals(x)===!1)return w.copy(x),!0}return!1}function p(y){const _=y.uniforms;let b=0;const x=16;let w=0;for(let A=0,T=_.length;A<T;A++){const C=_[A],E=m(C);if(C.__data=new Float32Array(E.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=b,A>0){w=b%x;const I=x-w;w!==0&&I-E.boundary<0&&(b+=x-w,C.__offset=b)}b+=E.storage}return w=b%x,w>0&&(b+=x-w),y.__size=b,y.__cache={},this}function m(y){const _=y.value,b={boundary:0,storage:0};return typeof _=="number"?(b.boundary=4,b.storage=4):_.isVector2?(b.boundary=8,b.storage=8):_.isVector3||_.isColor?(b.boundary=16,b.storage=12):_.isVector4?(b.boundary=16,b.storage=16):_.isMatrix3?(b.boundary=48,b.storage=48):_.isMatrix4?(b.boundary=64,b.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),b}function v(y){const _=y.target;_.removeEventListener("dispose",v);const b=s.indexOf(_.__bindingPointIndex);s.splice(b,1),n.deleteBuffer(i[_.id]),delete i[_.id],delete a[_.id]}function g(){for(const y in i)n.deleteBuffer(i[y]);s=[],i={},a={}}return{bind:l,update:u,dispose:g}}function _dt(){const n=W2("canvas");return n.style.display="block",n}function Ode(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:_dt(),t=n.context!==void 0?n.context:null,r=n.depth!==void 0?n.depth:!0,i=n.stencil!==void 0?n.stencil:!0,a=n.antialias!==void 0?n.antialias:!1,s=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,o=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=n.alpha!==void 0?n.alpha:!1;let d=null,f=null;const h=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Jp,this.physicallyCorrectLights=!1,this.toneMapping=Uf,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let v=!1,g=0,y=0,_=null,b=-1,x=null;const w=new ki,A=new ki;let T=null,C=e.width,E=e.height,I=1,P=null,L=null;const N=new ki(0,0,C,E),F=new ki(0,0,C,E);let k=!1;const H=new S9;let U=!1,B=!1,$=null;const ee=new or,re=new sn,ne=new it,ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function pe(){return _===null?I:1}let de=t;function me(ce,Et){for(let Ct=0;Ct<ce.length;Ct++){const Ht=ce[Ct],ct=e.getContext(Ht,Et);if(ct!==null)return ct}return null}try{const ce={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${h9}`),e.addEventListener("webglcontextlost",ve,!1),e.addEventListener("webglcontextrestored",Le,!1),e.addEventListener("webglcontextcreationerror",we,!1),de===null){const Et=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&Et.shift(),de=me(Et,ce),de===null)throw me(Et)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}de.getShaderPrecisionFormat===void 0&&(de.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ce){throw console.error("THREE.WebGLRenderer: "+ce.message),ce}let ke,Be,Xe,Ye,Y,he,le,Ke,Ue,Ze,je,He,ut,ge,q,te,ye,Ve,et,At,It,De,Tt,ot;function G(){ke=new Put(de),Be=new Cut(de,ke,n),ke.init(Be),De=new fdt(de,ke,Be),Xe=new cdt(de,ke,Be),Ye=new Lut,Y=new Zct,he=new ddt(de,ke,Xe,Y,Be,De,Ye),le=new Eut(m),Ke=new Dut(m),Ue=new qst(de,Be),Tt=new wut(de,ke,Ue,Be),Ze=new Rut(de,Ue,Ye,Tt),je=new Fut(de,Ze,Ue,Ye),et=new But(de,Be,he),te=new Aut(Y),He=new Qct(m,le,Ke,ke,Be,Tt,te),ut=new gdt(m,Y),ge=new edt,q=new sdt(ke,Be),Ve=new xut(m,le,Xe,je,c,s),ye=new udt(m,je,Be),ot=new ydt(de,Ye,Be,Xe),At=new Tut(de,ke,Ye,Be),It=new kut(de,ke,Ye,Be),Ye.programs=He.programs,m.capabilities=Be,m.extensions=ke,m.properties=Y,m.renderLists=ge,m.shadowMap=ye,m.state=Xe,m.info=Ye}G();const _e=new vdt(m,de);this.xr=_e,this.getContext=function(){return de},this.getContextAttributes=function(){return de.getContextAttributes()},this.forceContextLoss=function(){const ce=ke.get("WEBGL_lose_context");ce&&ce.loseContext()},this.forceContextRestore=function(){const ce=ke.get("WEBGL_lose_context");ce&&ce.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(ce){ce!==void 0&&(I=ce,this.setSize(C,E,!1))},this.getSize=function(ce){return ce.set(C,E)},this.setSize=function(ce,Et,Ct){if(_e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=ce,E=Et,e.width=Math.floor(ce*I),e.height=Math.floor(Et*I),Ct!==!1&&(e.style.width=ce+"px",e.style.height=Et+"px"),this.setViewport(0,0,ce,Et)},this.getDrawingBufferSize=function(ce){return ce.set(C*I,E*I).floor()},this.setDrawingBufferSize=function(ce,Et,Ct){C=ce,E=Et,I=Ct,e.width=Math.floor(ce*Ct),e.height=Math.floor(Et*Ct),this.setViewport(0,0,ce,Et)},this.getCurrentViewport=function(ce){return ce.copy(w)},this.getViewport=function(ce){return ce.copy(N)},this.setViewport=function(ce,Et,Ct,Ht){ce.isVector4?N.set(ce.x,ce.y,ce.z,ce.w):N.set(ce,Et,Ct,Ht),Xe.viewport(w.copy(N).multiplyScalar(I).floor())},this.getScissor=function(ce){return ce.copy(F)},this.setScissor=function(ce,Et,Ct,Ht){ce.isVector4?F.set(ce.x,ce.y,ce.z,ce.w):F.set(ce,Et,Ct,Ht),Xe.scissor(A.copy(F).multiplyScalar(I).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(ce){Xe.setScissorTest(k=ce)},this.setOpaqueSort=function(ce){P=ce},this.setTransparentSort=function(ce){L=ce},this.getClearColor=function(ce){return ce.copy(Ve.getClearColor())},this.setClearColor=function(){Ve.setClearColor.apply(Ve,arguments)},this.getClearAlpha=function(){return Ve.getClearAlpha()},this.setClearAlpha=function(){Ve.setClearAlpha.apply(Ve,arguments)},this.clear=function(ce=!0,Et=!0,Ct=!0){let Ht=0;ce&&(Ht|=16384),Et&&(Ht|=256),Ct&&(Ht|=1024),de.clear(Ht)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ve,!1),e.removeEventListener("webglcontextrestored",Le,!1),e.removeEventListener("webglcontextcreationerror",we,!1),ge.dispose(),q.dispose(),Y.dispose(),le.dispose(),Ke.dispose(),je.dispose(),Tt.dispose(),ot.dispose(),He.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",Mt),_e.removeEventListener("sessionend",Wt),$&&($.dispose(),$=null),zt.stop()};function ve(ce){ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function Le(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const ce=Ye.autoReset,Et=ye.enabled,Ct=ye.autoUpdate,Ht=ye.needsUpdate,ct=ye.type;G(),Ye.autoReset=ce,ye.enabled=Et,ye.autoUpdate=Ct,ye.needsUpdate=Ht,ye.type=ct}function we(ce){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ce.statusMessage)}function Ie(ce){const Et=ce.target;Et.removeEventListener("dispose",Ie),wt(Et)}function wt(ce){Pe(ce),Y.remove(ce)}function Pe(ce){const Et=Y.get(ce).programs;Et!==void 0&&(Et.forEach(function(Ct){He.releaseProgram(Ct)}),ce.isShaderMaterial&&He.releaseShaderCache(ce))}this.renderBufferDirect=function(ce,Et,Ct,Ht,ct,Ot){Et===null&&(Et=ae);const rn=ct.isMesh&&ct.matrixWorld.determinant()<0,gn=ue(ce,Et,Ct,Ht,ct);Xe.setMaterial(Ht,rn);let Zn=Ct.index;const rt=Ct.attributes.position;if(Zn===null){if(rt===void 0||rt.count===0)return}else if(Zn.count===0)return;let fr=1;Ht.wireframe===!0&&(Zn=Ze.getWireframeAttribute(Ct),fr=2),Tt.setup(ct,Ht,gn,Ct,Zn);let mt,Fe=At;Zn!==null&&(mt=Ue.get(Zn),Fe=It,Fe.setIndex(mt));const Dt=Zn!==null?Zn.count:rt.count,Qe=Ct.drawRange.start*fr,yt=Ct.drawRange.count*fr,ht=Ot!==null?Ot.start*fr:0,Nt=Ot!==null?Ot.count*fr:1/0,yn=Math.max(Qe,ht),un=Math.min(Dt,Qe+yt,ht+Nt)-1,Dn=Math.max(0,un-yn+1);if(Dn!==0){if(ct.isMesh)Ht.wireframe===!0?(Xe.setLineWidth(Ht.wireframeLinewidth*pe()),Fe.setMode(1)):Fe.setMode(4);else if(ct.isLine){let nr=Ht.linewidth;nr===void 0&&(nr=1),Xe.setLineWidth(nr*pe()),ct.isLineSegments?Fe.setMode(1):ct.isLineLoop?Fe.setMode(2):Fe.setMode(3)}else ct.isPoints?Fe.setMode(0):ct.isSprite&&Fe.setMode(4);if(ct.isInstancedMesh)Fe.renderInstances(yn,Dn,ct.count);else if(Ct.isInstancedBufferGeometry){const nr=Math.min(Ct.instanceCount,Ct._maxInstanceCount);Fe.renderInstances(yn,Dn,nr)}else Fe.render(yn,Dn)}},this.compile=function(ce,Et){f=q.get(ce),f.init(),p.push(f),ce.traverseVisible(function(Ct){Ct.isLight&&Ct.layers.test(Et.layers)&&(f.pushLight(Ct),Ct.castShadow&&f.pushShadow(Ct))}),f.setupLights(m.physicallyCorrectLights),ce.traverse(function(Ct){const Ht=Ct.material;if(Ht)if(Array.isArray(Ht))for(let ct=0;ct<Ht.length;ct++){const Ot=Ht[ct];Yn(Ot,ce,Ct)}else Yn(Ht,ce,Ct)}),p.pop(),f=null};let Rt=null;function dt(ce){Rt&&Rt(ce)}function Mt(){zt.stop()}function Wt(){zt.start()}const zt=new Ade;zt.setAnimationLoop(dt),typeof self<"u"&&zt.setContext(self),this.setAnimationLoop=function(ce){Rt=ce,_e.setAnimationLoop(ce),ce===null?zt.stop():zt.start()},_e.addEventListener("sessionstart",Mt),_e.addEventListener("sessionend",Wt),this.render=function(ce,Et){if(Et!==void 0&&Et.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;ce.autoUpdate===!0&&ce.updateMatrixWorld(),Et.parent===null&&Et.updateMatrixWorld(),_e.enabled===!0&&_e.isPresenting===!0&&(_e.cameraAutoUpdate===!0&&_e.updateCamera(Et),Et=_e.getCamera()),ce.isScene===!0&&ce.onBeforeRender(m,ce,Et,_),f=q.get(ce,p.length),f.init(),p.push(f),ee.multiplyMatrices(Et.projectionMatrix,Et.matrixWorldInverse),H.setFromProjectionMatrix(ee),B=this.localClippingEnabled,U=te.init(this.clippingPlanes,B,Et),d=ge.get(ce,h.length),d.init(),h.push(d),Sn(ce,Et,0,m.sortObjects),d.finish(),m.sortObjects===!0&&d.sort(P,L),U===!0&&te.beginShadows();const Ct=f.state.shadowsArray;if(ye.render(Ct,ce,Et),U===!0&&te.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ve.render(d,ce),f.setupLights(m.physicallyCorrectLights),Et.isArrayCamera){const Ht=Et.cameras;for(let ct=0,Ot=Ht.length;ct<Ot;ct++){const rn=Ht[ct];On(d,ce,rn,rn.viewport)}}else On(d,ce,Et);_!==null&&(he.updateMultisampleRenderTarget(_),he.updateRenderTargetMipmap(_)),ce.isScene===!0&&ce.onAfterRender(m,ce,Et),Tt.resetDefaultState(),b=-1,x=null,p.pop(),p.length>0?f=p[p.length-1]:f=null,h.pop(),h.length>0?d=h[h.length-1]:d=null};function Sn(ce,Et,Ct,Ht){if(ce.visible===!1)return;if(ce.layers.test(Et.layers)){if(ce.isGroup)Ct=ce.renderOrder;else if(ce.isLOD)ce.autoUpdate===!0&&ce.update(Et);else if(ce.isLight)f.pushLight(ce),ce.castShadow&&f.pushShadow(ce);else if(ce.isSprite){if(!ce.frustumCulled||H.intersectsSprite(ce)){Ht&&ne.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(ee);const rn=je.update(ce),gn=ce.material;gn.visible&&d.push(ce,rn,gn,Ct,ne.z,null)}}else if((ce.isMesh||ce.isLine||ce.isPoints)&&(ce.isSkinnedMesh&&ce.skeleton.frame!==Ye.render.frame&&(ce.skeleton.update(),ce.skeleton.frame=Ye.render.frame),!ce.frustumCulled||H.intersectsObject(ce))){Ht&&ne.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(ee);const rn=je.update(ce),gn=ce.material;if(Array.isArray(gn)){const Zn=rn.groups;for(let rt=0,fr=Zn.length;rt<fr;rt++){const mt=Zn[rt],Fe=gn[mt.materialIndex];Fe&&Fe.visible&&d.push(ce,rn,Fe,Ct,ne.z,mt)}}else gn.visible&&d.push(ce,rn,gn,Ct,ne.z,null)}}const Ot=ce.children;for(let rn=0,gn=Ot.length;rn<gn;rn++)Sn(Ot[rn],Et,Ct,Ht)}function On(ce,Et,Ct,Ht){const ct=ce.opaque,Ot=ce.transmissive,rn=ce.transparent;f.setupLightsView(Ct),Ot.length>0&&Er(ct,Et,Ct),Ht&&Xe.viewport(w.copy(Ht)),ct.length>0&&Qn(ct,Et,Ct),Ot.length>0&&Qn(Ot,Et,Ct),rn.length>0&&Qn(rn,Et,Ct),Xe.buffers.depth.setTest(!0),Xe.buffers.depth.setMask(!0),Xe.buffers.color.setMask(!0),Xe.setPolygonOffset(!1)}function Er(ce,Et,Ct){const Ht=Be.isWebGL2;$===null&&($=new _v(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")?V2:yv,minFilter:yh,samples:Ht&&a===!0?4:0})),m.getDrawingBufferSize(re),Ht?$.setSize(re.x,re.y):$.setSize(E3(re.x),E3(re.y));const ct=m.getRenderTarget();m.setRenderTarget($),m.clear();const Ot=m.toneMapping;m.toneMapping=Uf,Qn(ce,Et,Ct),m.toneMapping=Ot,he.updateMultisampleRenderTarget($),he.updateRenderTargetMipmap($),m.setRenderTarget(ct)}function Qn(ce,Et,Ct){const Ht=Et.isScene===!0?Et.overrideMaterial:null;for(let ct=0,Ot=ce.length;ct<Ot;ct++){const rn=ce[ct],gn=rn.object,Zn=rn.geometry,rt=Ht===null?rn.material:Ht,fr=rn.group;gn.layers.test(Ct.layers)&&Xr(gn,Et,Ct,Zn,rt,fr)}}function Xr(ce,Et,Ct,Ht,ct,Ot){ce.onBeforeRender(m,Et,Ct,Ht,ct,Ot),ce.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,ce.matrixWorld),ce.normalMatrix.getNormalMatrix(ce.modelViewMatrix),ct.onBeforeRender(m,Et,Ct,Ht,ce,Ot),ct.transparent===!0&&ct.side===Zp?(ct.side=Nc,ct.needsUpdate=!0,m.renderBufferDirect(Ct,Et,Ht,ct,ce,Ot),ct.side=Qp,ct.needsUpdate=!0,m.renderBufferDirect(Ct,Et,Ht,ct,ce,Ot),ct.side=Zp):m.renderBufferDirect(Ct,Et,Ht,ct,ce,Ot),ce.onAfterRender(m,Et,Ct,Ht,ct,Ot)}function Yn(ce,Et,Ct){Et.isScene!==!0&&(Et=ae);const Ht=Y.get(ce),ct=f.state.lights,Ot=f.state.shadowsArray,rn=ct.state.version,gn=He.getParameters(ce,ct.state,Ot,Et,Ct),Zn=He.getProgramCacheKey(gn);let rt=Ht.programs;Ht.environment=ce.isMeshStandardMaterial?Et.environment:null,Ht.fog=Et.fog,Ht.envMap=(ce.isMeshStandardMaterial?Ke:le).get(ce.envMap||Ht.environment),rt===void 0&&(ce.addEventListener("dispose",Ie),rt=new Map,Ht.programs=rt);let fr=rt.get(Zn);if(fr!==void 0){if(Ht.currentProgram===fr&&Ht.lightsStateVersion===rn)return Q(ce,gn),fr}else gn.uniforms=He.getUniforms(ce),ce.onBuild(Ct,gn,m),ce.onBeforeCompile(gn,m),fr=He.acquireProgram(gn,Zn),rt.set(Zn,fr),Ht.uniforms=gn.uniforms;const mt=Ht.uniforms;(!ce.isShaderMaterial&&!ce.isRawShaderMaterial||ce.clipping===!0)&&(mt.clippingPlanes=te.uniform),Q(ce,gn),Ht.needsLights=Ee(ce),Ht.lightsStateVersion=rn,Ht.needsLights&&(mt.ambientLightColor.value=ct.state.ambient,mt.lightProbe.value=ct.state.probe,mt.directionalLights.value=ct.state.directional,mt.directionalLightShadows.value=ct.state.directionalShadow,mt.spotLights.value=ct.state.spot,mt.spotLightShadows.value=ct.state.spotShadow,mt.rectAreaLights.value=ct.state.rectArea,mt.ltc_1.value=ct.state.rectAreaLTC1,mt.ltc_2.value=ct.state.rectAreaLTC2,mt.pointLights.value=ct.state.point,mt.pointLightShadows.value=ct.state.pointShadow,mt.hemisphereLights.value=ct.state.hemi,mt.directionalShadowMap.value=ct.state.directionalShadowMap,mt.directionalShadowMatrix.value=ct.state.directionalShadowMatrix,mt.spotShadowMap.value=ct.state.spotShadowMap,mt.spotShadowMatrix.value=ct.state.spotShadowMatrix,mt.pointShadowMap.value=ct.state.pointShadowMap,mt.pointShadowMatrix.value=ct.state.pointShadowMatrix);const Fe=fr.getUniforms(),Dt=zE.seqWithValue(Fe.seq,mt);return Ht.currentProgram=fr,Ht.uniformsList=Dt,fr}function Q(ce,Et){const Ct=Y.get(ce);Ct.outputEncoding=Et.outputEncoding,Ct.instancing=Et.instancing,Ct.skinning=Et.skinning,Ct.morphTargets=Et.morphTargets,Ct.morphNormals=Et.morphNormals,Ct.morphColors=Et.morphColors,Ct.morphTargetsCount=Et.morphTargetsCount,Ct.numClippingPlanes=Et.numClippingPlanes,Ct.numIntersection=Et.numClipIntersection,Ct.vertexAlphas=Et.vertexAlphas,Ct.vertexTangents=Et.vertexTangents,Ct.toneMapping=Et.toneMapping}function ue(ce,Et,Ct,Ht,ct){Et.isScene!==!0&&(Et=ae),he.resetTextureUnits();const Ot=Et.fog,rn=Ht.isMeshStandardMaterial?Et.environment:null,gn=_===null?m.outputEncoding:_.isXRRenderTarget===!0?_.texture.encoding:Jp,Zn=(Ht.isMeshStandardMaterial?Ke:le).get(Ht.envMap||rn),rt=Ht.vertexColors===!0&&!!Ct.attributes.color&&Ct.attributes.color.itemSize===4,fr=!!Ht.normalMap&&!!Ct.attributes.tangent,mt=!!Ct.morphAttributes.position,Fe=!!Ct.morphAttributes.normal,Dt=!!Ct.morphAttributes.color,Qe=Ht.toneMapped?m.toneMapping:Uf,yt=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,ht=yt!==void 0?yt.length:0,Nt=Y.get(Ht),yn=f.state.lights;if(U===!0&&(B===!0||ce!==x)){const Mr=ce===x&&Ht.id===b;te.setState(Ht,ce,Mr)}let un=!1;Ht.version===Nt.__version?(Nt.needsLights&&Nt.lightsStateVersion!==yn.state.version||Nt.outputEncoding!==gn||ct.isInstancedMesh&&Nt.instancing===!1||!ct.isInstancedMesh&&Nt.instancing===!0||ct.isSkinnedMesh&&Nt.skinning===!1||!ct.isSkinnedMesh&&Nt.skinning===!0||Nt.envMap!==Zn||Ht.fog===!0&&Nt.fog!==Ot||Nt.numClippingPlanes!==void 0&&(Nt.numClippingPlanes!==te.numPlanes||Nt.numIntersection!==te.numIntersection)||Nt.vertexAlphas!==rt||Nt.vertexTangents!==fr||Nt.morphTargets!==mt||Nt.morphNormals!==Fe||Nt.morphColors!==Dt||Nt.toneMapping!==Qe||Be.isWebGL2===!0&&Nt.morphTargetsCount!==ht)&&(un=!0):(un=!0,Nt.__version=Ht.version);let Dn=Nt.currentProgram;un===!0&&(Dn=Yn(Ht,Et,ct));let nr=!1,bn=!1,Hn=!1;const Fn=Dn.getUniforms(),yr=Nt.uniforms;if(Xe.useProgram(Dn.program)&&(nr=!0,bn=!0,Hn=!0),Ht.id!==b&&(b=Ht.id,bn=!0),nr||x!==ce){if(Fn.setValue(de,"projectionMatrix",ce.projectionMatrix),Be.logarithmicDepthBuffer&&Fn.setValue(de,"logDepthBufFC",2/(Math.log(ce.far+1)/Math.LN2)),x!==ce&&(x=ce,bn=!0,Hn=!0),Ht.isShaderMaterial||Ht.isMeshPhongMaterial||Ht.isMeshToonMaterial||Ht.isMeshStandardMaterial||Ht.envMap){const Mr=Fn.map.cameraPosition;Mr!==void 0&&Mr.setValue(de,ne.setFromMatrixPosition(ce.matrixWorld))}(Ht.isMeshPhongMaterial||Ht.isMeshToonMaterial||Ht.isMeshLambertMaterial||Ht.isMeshBasicMaterial||Ht.isMeshStandardMaterial||Ht.isShaderMaterial)&&Fn.setValue(de,"isOrthographic",ce.isOrthographicCamera===!0),(Ht.isMeshPhongMaterial||Ht.isMeshToonMaterial||Ht.isMeshLambertMaterial||Ht.isMeshBasicMaterial||Ht.isMeshStandardMaterial||Ht.isShaderMaterial||Ht.isShadowMaterial||ct.isSkinnedMesh)&&Fn.setValue(de,"viewMatrix",ce.matrixWorldInverse)}if(ct.isSkinnedMesh){Fn.setOptional(de,ct,"bindMatrix"),Fn.setOptional(de,ct,"bindMatrixInverse");const Mr=ct.skeleton;Mr&&(Be.floatVertexTextures?(Mr.boneTexture===null&&Mr.computeBoneTexture(),Fn.setValue(de,"boneTexture",Mr.boneTexture,he),Fn.setValue(de,"boneTextureSize",Mr.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Yr=Ct.morphAttributes;if((Yr.position!==void 0||Yr.normal!==void 0||Yr.color!==void 0&&Be.isWebGL2===!0)&&et.update(ct,Ct,Ht,Dn),(bn||Nt.receiveShadow!==ct.receiveShadow)&&(Nt.receiveShadow=ct.receiveShadow,Fn.setValue(de,"receiveShadow",ct.receiveShadow)),bn&&(Fn.setValue(de,"toneMappingExposure",m.toneMappingExposure),Nt.needsLights&&Zt(yr,Hn),Ot&&Ht.fog===!0&&ut.refreshFogUniforms(yr,Ot),ut.refreshMaterialUniforms(yr,Ht,I,E,$),zE.upload(de,Nt.uniformsList,yr,he)),Ht.isShaderMaterial&&Ht.uniformsNeedUpdate===!0&&(zE.upload(de,Nt.uniformsList,yr,he),Ht.uniformsNeedUpdate=!1),Ht.isSpriteMaterial&&Fn.setValue(de,"center",ct.center),Fn.setValue(de,"modelViewMatrix",ct.modelViewMatrix),Fn.setValue(de,"normalMatrix",ct.normalMatrix),Fn.setValue(de,"modelMatrix",ct.matrixWorld),Ht.isShaderMaterial||Ht.isRawShaderMaterial){const Mr=Ht.uniformsGroups;for(let Br=0,ar=Mr.length;Br<ar;Br++)if(Be.isWebGL2){const Pi=Mr[Br];ot.update(Pi,Dn),ot.bind(Pi,Dn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Dn}function Zt(ce,Et){ce.ambientLightColor.needsUpdate=Et,ce.lightProbe.needsUpdate=Et,ce.directionalLights.needsUpdate=Et,ce.directionalLightShadows.needsUpdate=Et,ce.pointLights.needsUpdate=Et,ce.pointLightShadows.needsUpdate=Et,ce.spotLights.needsUpdate=Et,ce.spotLightShadows.needsUpdate=Et,ce.rectAreaLights.needsUpdate=Et,ce.hemisphereLights.needsUpdate=Et}function Ee(ce){return ce.isMeshLambertMaterial||ce.isMeshToonMaterial||ce.isMeshPhongMaterial||ce.isMeshStandardMaterial||ce.isShadowMaterial||ce.isShaderMaterial&&ce.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(ce,Et,Ct){Y.get(ce.texture).__webglTexture=Et,Y.get(ce.depthTexture).__webglTexture=Ct;const Ht=Y.get(ce);Ht.__hasExternalTextures=!0,Ht.__hasExternalTextures&&(Ht.__autoAllocateDepthBuffer=Ct===void 0,Ht.__autoAllocateDepthBuffer||ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ht.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ce,Et){const Ct=Y.get(ce);Ct.__webglFramebuffer=Et,Ct.__useDefaultFramebuffer=Et===void 0},this.setRenderTarget=function(ce,Et=0,Ct=0){_=ce,g=Et,y=Ct;let Ht=!0;if(ce){const Zn=Y.get(ce);Zn.__useDefaultFramebuffer!==void 0?(Xe.bindFramebuffer(36160,null),Ht=!1):Zn.__webglFramebuffer===void 0?he.setupRenderTarget(ce):Zn.__hasExternalTextures&&he.rebindTextures(ce,Y.get(ce.texture).__webglTexture,Y.get(ce.depthTexture).__webglTexture)}let ct=null,Ot=!1,rn=!1;if(ce){const Zn=ce.texture;(Zn.isData3DTexture||Zn.isDataArrayTexture)&&(rn=!0);const rt=Y.get(ce).__webglFramebuffer;ce.isWebGLCubeRenderTarget?(ct=rt[Et],Ot=!0):Be.isWebGL2&&ce.samples>0&&he.useMultisampledRTT(ce)===!1?ct=Y.get(ce).__webglMultisampledFramebuffer:ct=rt,w.copy(ce.viewport),A.copy(ce.scissor),T=ce.scissorTest}else w.copy(N).multiplyScalar(I).floor(),A.copy(F).multiplyScalar(I).floor(),T=k;if(Xe.bindFramebuffer(36160,ct)&&Be.drawBuffers&&Ht&&Xe.drawBuffers(ce,ct),Xe.viewport(w),Xe.scissor(A),Xe.setScissorTest(T),Ot){const Zn=Y.get(ce.texture);de.framebufferTexture2D(36160,36064,34069+Et,Zn.__webglTexture,Ct)}else if(rn){const Zn=Y.get(ce.texture),rt=Et||0;de.framebufferTextureLayer(36160,36064,Zn.__webglTexture,Ct||0,rt)}b=-1},this.readRenderTargetPixels=function(ce,Et,Ct,Ht,ct,Ot,rn){if(!(ce&&ce.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let gn=Y.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&rn!==void 0&&(gn=gn[rn]),gn){Xe.bindFramebuffer(36160,gn);try{const Zn=ce.texture,rt=Zn.format,fr=Zn.type;if(rt!==Ou&&De.convert(rt)!==de.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const mt=fr===V2&&(ke.has("EXT_color_buffer_half_float")||Be.isWebGL2&&ke.has("EXT_color_buffer_float"));if(fr!==yv&&De.convert(fr)!==de.getParameter(35738)&&!(fr===yp&&(Be.isWebGL2||ke.has("OES_texture_float")||ke.has("WEBGL_color_buffer_float")))&&!mt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Et>=0&&Et<=ce.width-Ht&&Ct>=0&&Ct<=ce.height-ct&&de.readPixels(Et,Ct,Ht,ct,De.convert(rt),De.convert(fr),Ot)}finally{const Zn=_!==null?Y.get(_).__webglFramebuffer:null;Xe.bindFramebuffer(36160,Zn)}}},this.copyFramebufferToTexture=function(ce,Et,Ct=0){const Ht=Math.pow(2,-Ct),ct=Math.floor(Et.image.width*Ht),Ot=Math.floor(Et.image.height*Ht);he.setTexture2D(Et,0),de.copyTexSubImage2D(3553,Ct,0,0,ce.x,ce.y,ct,Ot),Xe.unbindTexture()},this.copyTextureToTexture=function(ce,Et,Ct,Ht=0){const ct=Et.image.width,Ot=Et.image.height,rn=De.convert(Ct.format),gn=De.convert(Ct.type);he.setTexture2D(Ct,0),de.pixelStorei(37440,Ct.flipY),de.pixelStorei(37441,Ct.premultiplyAlpha),de.pixelStorei(3317,Ct.unpackAlignment),Et.isDataTexture?de.texSubImage2D(3553,Ht,ce.x,ce.y,ct,Ot,rn,gn,Et.image.data):Et.isCompressedTexture?de.compressedTexSubImage2D(3553,Ht,ce.x,ce.y,Et.mipmaps[0].width,Et.mipmaps[0].height,rn,Et.mipmaps[0].data):de.texSubImage2D(3553,Ht,ce.x,ce.y,rn,gn,Et.image),Ht===0&&Ct.generateMipmaps&&de.generateMipmap(3553),Xe.unbindTexture()},this.copyTextureToTexture3D=function(ce,Et,Ct,Ht,ct=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ot=ce.max.x-ce.min.x+1,rn=ce.max.y-ce.min.y+1,gn=ce.max.z-ce.min.z+1,Zn=De.convert(Ht.format),rt=De.convert(Ht.type);let fr;if(Ht.isData3DTexture)he.setTexture3D(Ht,0),fr=32879;else if(Ht.isDataArrayTexture)he.setTexture2DArray(Ht,0),fr=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}de.pixelStorei(37440,Ht.flipY),de.pixelStorei(37441,Ht.premultiplyAlpha),de.pixelStorei(3317,Ht.unpackAlignment);const mt=de.getParameter(3314),Fe=de.getParameter(32878),Dt=de.getParameter(3316),Qe=de.getParameter(3315),yt=de.getParameter(32877),ht=Ct.isCompressedTexture?Ct.mipmaps[0]:Ct.image;de.pixelStorei(3314,ht.width),de.pixelStorei(32878,ht.height),de.pixelStorei(3316,ce.min.x),de.pixelStorei(3315,ce.min.y),de.pixelStorei(32877,ce.min.z),Ct.isDataTexture||Ct.isData3DTexture?de.texSubImage3D(fr,ct,Et.x,Et.y,Et.z,Ot,rn,gn,Zn,rt,ht.data):Ct.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),de.compressedTexSubImage3D(fr,ct,Et.x,Et.y,Et.z,Ot,rn,gn,Zn,ht.data)):de.texSubImage3D(fr,ct,Et.x,Et.y,Et.z,Ot,rn,gn,Zn,rt,ht),de.pixelStorei(3314,mt),de.pixelStorei(32878,Fe),de.pixelStorei(3316,Dt),de.pixelStorei(3315,Qe),de.pixelStorei(32877,yt),ct===0&&Ht.generateMipmaps&&de.generateMipmap(fr),Xe.unbindTexture()},this.initTexture=function(ce){ce.isCubeTexture?he.setTextureCube(ce,0):ce.isData3DTexture?he.setTexture3D(ce,0):ce.isDataArrayTexture?he.setTexture2DArray(ce,0):he.setTexture2D(ce,0),Xe.unbindTexture()},this.resetState=function(){g=0,y=0,_=null,Xe.reset(),Tt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class bdt extends Ode{}bdt.prototype.isWebGL1Renderer=!0;class w9{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Un(e),this.density=t}clone(){return new w9(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class T9{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Un(e),this.near=t,this.far=r}clone(){return new T9(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let C9=class extends Sa{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};class A9{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=PO,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Hu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,a=this.stride;i<a;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Po=new it;class bv{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Po.fromBufferAttribute(this,t),Po.applyMatrix4(e),this.setXYZ(t,Po.x,Po.y,Po.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Po.fromBufferAttribute(this,t),Po.applyNormalMatrix(e),this.setXYZ(t,Po.x,Po.y,Po.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Po.fromBufferAttribute(this,t),Po.transformDirection(e),this.setXYZ(t,Po.x,Po.y,Po.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return new ka(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new bv(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class E9 extends ts{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Un(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let qg;const hS=new it,jg=new it,Kg=new it,Xg=new sn,pS=new sn,Nde=new or,eA=new it,mS=new it,tA=new it,OX=new sn,Tk=new sn,NX=new sn;class HE extends Sa{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",qg===void 0){qg=new pi;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new A9(t,5);qg.setIndex([0,1,2,0,2,3]),qg.setAttribute("position",new bv(r,3,0,!1)),qg.setAttribute("uv",new bv(r,2,3,!1))}this.geometry=qg,this.material=e!==void 0?e:new E9,this.center=new sn(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),jg.setFromMatrixScale(this.matrixWorld),Nde.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&jg.multiplyScalar(-Kg.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const s=this.center;nA(eA.set(-.5,-.5,0),Kg,s,jg,i,a),nA(mS.set(.5,-.5,0),Kg,s,jg,i,a),nA(tA.set(.5,.5,0),Kg,s,jg,i,a),OX.set(0,0),Tk.set(1,0),NX.set(1,1);let o=e.ray.intersectTriangle(eA,mS,tA,!1,hS);if(o===null&&(nA(mS.set(-.5,.5,0),Kg,s,jg,i,a),Tk.set(0,1),o=e.ray.intersectTriangle(eA,tA,mS,!1,hS),o===null))return;const l=e.ray.origin.distanceTo(hS);l<e.near||l>e.far||t.push({distance:l,point:hS.clone(),uv:bx.getUV(hS,eA,mS,tA,OX,Tk,NX,new sn),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function nA(n,e,t,r,i,a){Xg.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(pS.x=a*Xg.x-i*Xg.y,pS.y=i*Xg.x+a*Xg.y):pS.copy(Xg),n.copy(e),n.x+=pS.x,n.y+=pS.y,n.applyMatrix4(Nde)}const rA=new it,BX=new it;class Sdt extends Sa{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const a=t[r];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i&&!(e<t[r].distance);r++);return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){rA.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(rA);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){rA.setFromMatrixPosition(e.matrixWorld),BX.setFromMatrixPosition(this.matrixWorld);const r=rA.distanceTo(BX)/e.zoom;t[0].object.visible=!0;let i,a;for(i=1,a=t.length;i<a&&r>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<a;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,a=r.length;i<a;i++){const s=r[i];t.object.levels.push({object:s.object.uuid,distance:s.distance})}return t}}const FX=new it,UX=new ki,zX=new ki,xdt=new it,HX=new or;class kI extends ps{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new or,this.bindMatrixInverse=new or}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ki,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;UX.fromBufferAttribute(i.attributes.skinIndex,e),zX.fromBufferAttribute(i.attributes.skinWeight,e),FX.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=zX.getComponent(a);if(s!==0){const o=UX.getComponent(a);HX.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(xdt.copy(FX).applyMatrix4(HX),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class a_ extends Sa{constructor(){super(),this.isBone=!0,this.type="Bone"}}let Sx=class extends Qs{constructor(e=null,t=1,r=1,i,a,s,o,l,u=Cs,c=Cs,d,f){super(null,s,o,l,u,c,i,a,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const VX=new or,wdt=new or;class J_{constructor(e=[],t=[]){this.uuid=Hu(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new or)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new or;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:wdt;VX.multiplyMatrices(o,t[a]),VX.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new J_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=fde(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Sx(t,e,e,Ou,yp);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=t[a];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),s=new a_),this.bones.push(s),this.boneInverses.push(new or().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const s=t[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}let j2=class extends ka{constructor(e,t,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};const $X=new or,GX=new or,iA=[],vS=new ps;class Tdt extends ps{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new j2(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(vS.geometry=this.geometry,vS.material=this.material,vS.material!==void 0)for(let a=0;a<i;a++){this.getMatrixAt(a,$X),GX.multiplyMatrices(r,$X),vS.matrixWorld=GX,vS.raycast(e,iA);for(let s=0,o=iA.length;s<o;s++){const l=iA[s];l.instanceId=a,l.object=this,t.push(l)}iA.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new j2(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Bc extends ts{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Un(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const WX=new it,qX=new it,jX=new or,Ck=new PI,aA=new Nv;class eb extends Sa{constructor(e=new pi,t=new Bc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,a=t.count;i<a;i++)WX.fromBufferAttribute(t,i-1),qX.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=WX.distanceTo(qX);e.setAttribute("lineDistance",new Kn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),aA.copy(r.boundingSphere),aA.applyMatrix4(i),aA.radius+=a,e.ray.intersectsSphere(aA)===!1)return;jX.copy(i).invert(),Ck.copy(e.ray).applyMatrix4(jX);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new it,c=new it,d=new it,f=new it,h=this.isLineSegments?2:1,p=r.index,v=r.attributes.position;if(p!==null){const g=Math.max(0,s.start),y=Math.min(p.count,s.start+s.count);for(let _=g,b=y-1;_<b;_+=h){const x=p.getX(_),w=p.getX(_+1);if(u.fromBufferAttribute(v,x),c.fromBufferAttribute(v,w),Ck.distanceSqToSegment(u,c,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(f);T<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,s.start),y=Math.min(v.count,s.start+s.count);for(let _=g,b=y-1;_<b;_+=h){if(u.fromBufferAttribute(v,_),c.fromBufferAttribute(v,_+1),Ck.distanceSqToSegment(u,c,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(f);w<e.near||w>e.far||t.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}const KX=new it,XX=new it;class Sv extends eb{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,a=t.count;i<a;i+=2)KX.fromBufferAttribute(t,i),XX.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+KX.distanceTo(XX);e.setAttribute("lineDistance",new Kn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Bde extends eb{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class N0 extends ts{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Un(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const YX=new or,UO=new PI,sA=new Nv,oA=new it;class xx extends Sa{constructor(e=new pi,t=new N0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),sA.copy(r.boundingSphere),sA.applyMatrix4(i),sA.radius+=a,e.ray.intersectsSphere(sA)===!1)return;YX.copy(i).invert(),UO.copy(e.ray).applyMatrix4(YX);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=r.index,d=r.attributes.position;if(u!==null){const f=Math.max(0,s.start),h=Math.min(u.count,s.start+s.count);for(let p=f,m=h;p<m;p++){const v=u.getX(p);oA.fromBufferAttribute(d,v),QX(oA,v,l,i,e,t,this)}}else{const f=Math.max(0,s.start),h=Math.min(d.count,s.start+s.count);for(let p=f,m=h;p<m;p++)oA.fromBufferAttribute(d,p),QX(oA,p,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function QX(n,e,t,r,i,a,s){const o=UO.distanceSqToPoint(n);if(o<t){const l=new it;UO.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;a.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:s})}}class Cdt extends Qs{constructor(e,t,r,i,a,s,o,l,u,c,d,f){super(null,s,o,l,u,c,i,a,d,f),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class jc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),t.push(a),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const a=r.length;let s;t?s=t:s=e*r[a-1];let o=0,l=a-1,u;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),u=r[i]-s,u<0)o=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(a-1);const c=r[i],f=r[i+1]-c,h=(s-c)/f;return(i+h)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),l=t||(s.isVector2?new sn:new it);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new it,i=[],a=[],s=[],o=new it,l=new or;for(let h=0;h<=e;h++){const p=h/e;i[h]=this.getTangentAt(p,new it)}a[0]=new it,s[0]=new it;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),d=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),d<=u&&(u=d,r.set(0,1,0)),f<=u&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let h=1;h<=e;h++){if(a[h]=a[h-1].clone(),s[h]=s[h-1].clone(),o.crossVectors(i[h-1],i[h]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(cs(i[h-1].dot(i[h]),-1,1));a[h].applyMatrix4(l.makeRotationAxis(o,p))}s[h].crossVectors(i[h],a[h])}if(t===!0){let h=Math.acos(cs(a[0].dot(a[e]),-1,1));h/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(h=-h);for(let p=1;p<=e;p++)a[p].applyMatrix4(l.makeRotationAxis(i[p],h*p)),s[p].crossVectors(i[p],a[p])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class M9 extends jc{constructor(e=0,t=0,r=1,i=1,a=0,s=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=s,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const r=t||new sn,i=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const s=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(s?a=0:a=i),this.aClockwise===!0&&!s&&(a===i?a=-i:a=a-i);const o=this.aStartAngle+e*a;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,h=u-this.aY;l=f*c-h*d+this.aX,u=f*d+h*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Adt extends M9{constructor(e,t,r,i,a,s){super(e,t,r,r,i,a,s),this.isArcCurve=!0,this.type="ArcCurve"}}function I9(){let n=0,e=0,t=0,r=0;function i(a,s,o,l){n=a,e=o,t=-3*a+3*s-2*o-l,r=2*a-2*s+o+l}return{initCatmullRom:function(a,s,o,l,u){i(s,o,u*(o-a),u*(l-s))},initNonuniformCatmullRom:function(a,s,o,l,u,c,d){let f=(s-a)/u-(o-a)/(u+c)+(o-s)/c,h=(o-s)/c-(l-s)/(c+d)+(l-o)/d;f*=c,h*=c,i(s,o,f,h)},calc:function(a){const s=a*a,o=s*a;return n+e*a+t*s+r*o}}}const lA=new it,Ak=new I9,Ek=new I9,Mk=new I9;class Edt extends jc{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new it){const r=t,i=this.points,a=i.length,s=(a-(this.closed?0:1))*e;let o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:l===0&&o===a-1&&(o=a-2,l=1);let u,c;this.closed||o>0?u=i[(o-1)%a]:(lA.subVectors(i[0],i[1]).add(i[0]),u=lA);const d=i[o%a],f=i[(o+1)%a];if(this.closed||o+2<a?c=i[(o+2)%a]:(lA.subVectors(i[a-1],i[a-2]).add(i[a-1]),c=lA),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let p=Math.pow(u.distanceToSquared(d),h),m=Math.pow(d.distanceToSquared(f),h),v=Math.pow(f.distanceToSquared(c),h);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),Ak.initNonuniformCatmullRom(u.x,d.x,f.x,c.x,p,m,v),Ek.initNonuniformCatmullRom(u.y,d.y,f.y,c.y,p,m,v),Mk.initNonuniformCatmullRom(u.z,d.z,f.z,c.z,p,m,v)}else this.curveType==="catmullrom"&&(Ak.initCatmullRom(u.x,d.x,f.x,c.x,this.tension),Ek.initCatmullRom(u.y,d.y,f.y,c.y,this.tension),Mk.initCatmullRom(u.z,d.z,f.z,c.z,this.tension));return r.set(Ak.calc(l),Ek.calc(l),Mk.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new it().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ZX(n,e,t,r,i){const a=(r-e)*.5,s=(i-t)*.5,o=n*n,l=n*o;return(2*t-2*r+a+s)*l+(-3*t+3*r-2*a-s)*o+a*n+t}function Mdt(n,e){const t=1-n;return t*t*e}function Idt(n,e){return 2*(1-n)*n*e}function Ddt(n,e){return n*n*e}function Tx(n,e,t,r){return Mdt(n,e)+Idt(n,t)+Ddt(n,r)}function Pdt(n,e){const t=1-n;return t*t*t*e}function Rdt(n,e){const t=1-n;return 3*t*t*n*e}function kdt(n,e){return 3*(1-n)*n*n*e}function Ldt(n,e){return n*n*n*e}function Cx(n,e,t,r,i){return Pdt(n,e)+Rdt(n,t)+kdt(n,r)+Ldt(n,i)}class Fde extends jc{constructor(e=new sn,t=new sn,r=new sn,i=new sn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new sn){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Cx(e,i.x,a.x,s.x,o.x),Cx(e,i.y,a.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Odt extends jc{constructor(e=new it,t=new it,r=new it,i=new it){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new it){const r=t,i=this.v0,a=this.v1,s=this.v2,o=this.v3;return r.set(Cx(e,i.x,a.x,s.x,o.x),Cx(e,i.y,a.y,s.y,o.y),Cx(e,i.z,a.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class D9 extends jc{constructor(e=new sn,t=new sn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new sn){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new sn;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ndt extends jc{constructor(e=new it,t=new it){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new it){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ude extends jc{constructor(e=new sn,t=new sn,r=new sn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new sn){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(Tx(e,i.x,a.x,s.x),Tx(e,i.y,a.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zde extends jc{constructor(e=new it,t=new it,r=new it){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new it){const r=t,i=this.v0,a=this.v1,s=this.v2;return r.set(Tx(e,i.x,a.x,s.x),Tx(e,i.y,a.y,s.y),Tx(e,i.z,a.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Hde extends jc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new sn){const r=t,i=this.points,a=(i.length-1)*e,s=Math.floor(a),o=a-s,l=i[s===0?s:s-1],u=i[s],c=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return r.set(ZX(o,l.x,u.x,c.x,d.x),ZX(o,l.y,u.y,c.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new sn().fromArray(i))}return this}}var P9=Object.freeze({__proto__:null,ArcCurve:Adt,CatmullRomCurve3:Edt,CubicBezierCurve:Fde,CubicBezierCurve3:Odt,EllipseCurve:M9,LineCurve:D9,LineCurve3:Ndt,QuadraticBezierCurve:Ude,QuadraticBezierCurve3:zde,SplineCurve:Hde});class Bdt extends jc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new D9(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let a=0;for(;a<i.length;){if(i[a]>=r){const s=i[a]-r,o=this.curves[a],l=o.getLength(),u=l===0?0:1-s/l;return o.getPointAt(u,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,a=this.curves;i<a.length;i++){const s=a[i],o=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(o);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new P9[i.type]().fromJSON(i))}return this}}class zO extends Bdt{constructor(e){super(),this.type="Path",this.currentPoint=new sn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new D9(this.currentPoint.clone(),new sn(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const a=new Ude(this.currentPoint.clone(),new sn(e,t),new sn(r,i));return this.curves.push(a),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,a,s){const o=new Fde(this.currentPoint.clone(),new sn(e,t),new sn(r,i),new sn(a,s));return this.curves.push(o),this.currentPoint.set(a,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new Hde(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,a,s){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,r,i,a,s),this}absarc(e,t,r,i,a,s){return this.absellipse(e,t,r,r,i,a,s),this}ellipse(e,t,r,i,a,s,o,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,a,s,o,l),this}absellipse(e,t,r,i,a,s,o,l){const u=new M9(e,t,r,i,a,s,o,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class K2 extends pi{constructor(e=[new sn(0,-.5),new sn(.5,0),new sn(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=cs(i,0,Math.PI*2);const a=[],s=[],o=[],l=[],u=[],c=1/t,d=new it,f=new sn,h=new it,p=new it,m=new it;let v=0,g=0;for(let y=0;y<=e.length-1;y++)switch(y){case 0:v=e[y+1].x-e[y].x,g=e[y+1].y-e[y].y,h.x=g*1,h.y=-v,h.z=g*0,m.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:v=e[y+1].x-e[y].x,g=e[y+1].y-e[y].y,h.x=g*1,h.y=-v,h.z=g*0,p.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),l.push(h.x,h.y,h.z),m.copy(p)}for(let y=0;y<=t;y++){const _=r+y*c*i,b=Math.sin(_),x=Math.cos(_);for(let w=0;w<=e.length-1;w++){d.x=e[w].x*b,d.y=e[w].y,d.z=e[w].x*x,s.push(d.x,d.y,d.z),f.x=y/t,f.y=w/(e.length-1),o.push(f.x,f.y);const A=l[3*w+0]*b,T=l[3*w+1],C=l[3*w+0]*x;u.push(A,T,C)}}for(let y=0;y<t;y++)for(let _=0;_<e.length-1;_++){const b=_+y*e.length,x=b,w=b+e.length,A=b+e.length+1,T=b+1;a.push(x,w,T),a.push(A,T,w)}this.setIndex(a),this.setAttribute("position",new Kn(s,3)),this.setAttribute("uv",new Kn(o,2)),this.setAttribute("normal",new Kn(u,3))}static fromJSON(e){return new K2(e.points,e.segments,e.phiStart,e.phiLength)}}class M3 extends K2{constructor(e=1,t=1,r=4,i=8){const a=new zO;a.absarc(0,-t/2,e,Math.PI*1.5,0),a.absarc(0,t/2,e,0,Math.PI*.5),super(a.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new M3(e.radius,e.length,e.capSegments,e.radialSegments)}}class I3 extends pi{constructor(e=1,t=8,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const a=[],s=[],o=[],l=[],u=new it,c=new sn;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=t;d++,f+=3){const h=r+d/t*i;u.x=e*Math.cos(h),u.y=e*Math.sin(h),s.push(u.x,u.y,u.z),o.push(0,0,1),c.x=(s[f]/e+1)/2,c.y=(s[f+1]/e+1)/2,l.push(c.x,c.y)}for(let d=1;d<=t;d++)a.push(d,d+1,0);this.setIndex(a),this.setAttribute("position",new Kn(s,3)),this.setAttribute("normal",new Kn(o,3)),this.setAttribute("uv",new Kn(l,2))}static fromJSON(e){return new I3(e.radius,e.segments,e.thetaStart,e.thetaLength)}}let HO=class Vde extends pi{constructor(e=1,t=1,r=1,i=8,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const u=this;i=Math.floor(i),a=Math.floor(a);const c=[],d=[],f=[],h=[];let p=0;const m=[],v=r/2;let g=0;y(),s===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new Kn(d,3)),this.setAttribute("normal",new Kn(f,3)),this.setAttribute("uv",new Kn(h,2));function y(){const b=new it,x=new it;let w=0;const A=(t-e)/r;for(let T=0;T<=a;T++){const C=[],E=T/a,I=E*(t-e)+e;for(let P=0;P<=i;P++){const L=P/i,N=L*l+o,F=Math.sin(N),k=Math.cos(N);x.x=I*F,x.y=-E*r+v,x.z=I*k,d.push(x.x,x.y,x.z),b.set(F,A,k).normalize(),f.push(b.x,b.y,b.z),h.push(L,1-E),C.push(p++)}m.push(C)}for(let T=0;T<i;T++)for(let C=0;C<a;C++){const E=m[C][T],I=m[C+1][T],P=m[C+1][T+1],L=m[C][T+1];c.push(E,I,L),c.push(I,P,L),w+=6}u.addGroup(g,w,0),g+=w}function _(b){const x=p,w=new sn,A=new it;let T=0;const C=b===!0?e:t,E=b===!0?1:-1;for(let P=1;P<=i;P++)d.push(0,v*E,0),f.push(0,E,0),h.push(.5,.5),p++;const I=p;for(let P=0;P<=i;P++){const N=P/i*l+o,F=Math.cos(N),k=Math.sin(N);A.x=C*k,A.y=v*E,A.z=C*F,d.push(A.x,A.y,A.z),f.push(0,E,0),w.x=F*.5+.5,w.y=k*.5*E+.5,h.push(w.x,w.y),p++}for(let P=0;P<i;P++){const L=x+P,N=I+P;b===!0?c.push(N,N+1,L):c.push(N+1,N,L),T+=3}u.addGroup(g,T,b===!0?1:2),g+=T}}static fromJSON(e){return new Vde(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},JX=class $de extends HO{constructor(e=1,t=1,r=8,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new $de(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};class em extends pi{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const a=[],s=[];o(i),u(r),c(),this.setAttribute("position",new Kn(a,3)),this.setAttribute("normal",new Kn(a.slice(),3)),this.setAttribute("uv",new Kn(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function o(y){const _=new it,b=new it,x=new it;for(let w=0;w<t.length;w+=3)h(t[w+0],_),h(t[w+1],b),h(t[w+2],x),l(_,b,x,y)}function l(y,_,b,x){const w=x+1,A=[];for(let T=0;T<=w;T++){A[T]=[];const C=y.clone().lerp(b,T/w),E=_.clone().lerp(b,T/w),I=w-T;for(let P=0;P<=I;P++)P===0&&T===w?A[T][P]=C:A[T][P]=C.clone().lerp(E,P/I)}for(let T=0;T<w;T++)for(let C=0;C<2*(w-T)-1;C++){const E=Math.floor(C/2);C%2===0?(f(A[T][E+1]),f(A[T+1][E]),f(A[T][E])):(f(A[T][E+1]),f(A[T+1][E+1]),f(A[T+1][E]))}}function u(y){const _=new it;for(let b=0;b<a.length;b+=3)_.x=a[b+0],_.y=a[b+1],_.z=a[b+2],_.normalize().multiplyScalar(y),a[b+0]=_.x,a[b+1]=_.y,a[b+2]=_.z}function c(){const y=new it;for(let _=0;_<a.length;_+=3){y.x=a[_+0],y.y=a[_+1],y.z=a[_+2];const b=v(y)/2/Math.PI+.5,x=g(y)/Math.PI+.5;s.push(b,1-x)}p(),d()}function d(){for(let y=0;y<s.length;y+=6){const _=s[y+0],b=s[y+2],x=s[y+4],w=Math.max(_,b,x),A=Math.min(_,b,x);w>.9&&A<.1&&(_<.2&&(s[y+0]+=1),b<.2&&(s[y+2]+=1),x<.2&&(s[y+4]+=1))}}function f(y){a.push(y.x,y.y,y.z)}function h(y,_){const b=y*3;_.x=e[b+0],_.y=e[b+1],_.z=e[b+2]}function p(){const y=new it,_=new it,b=new it,x=new it,w=new sn,A=new sn,T=new sn;for(let C=0,E=0;C<a.length;C+=9,E+=6){y.set(a[C+0],a[C+1],a[C+2]),_.set(a[C+3],a[C+4],a[C+5]),b.set(a[C+6],a[C+7],a[C+8]),w.set(s[E+0],s[E+1]),A.set(s[E+2],s[E+3]),T.set(s[E+4],s[E+5]),x.copy(y).add(_).add(b).divideScalar(3);const I=v(x);m(w,E+0,y,I),m(A,E+2,_,I),m(T,E+4,b,I)}}function m(y,_,b,x){x<0&&y.x===1&&(s[_]=y.x-1),b.x===0&&b.z===0&&(s[_]=x/2/Math.PI+.5)}function v(y){return Math.atan2(y.z,-y.x)}function g(y){return Math.atan2(-y.y,Math.sqrt(y.x*y.x+y.z*y.z))}}static fromJSON(e){return new em(e.vertices,e.indices,e.radius,e.details)}}class D3 extends em{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new D3(e.radius,e.detail)}}const uA=new it,cA=new it,Ik=new it,dA=new bx;class Fdt extends pi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),a=Math.cos(p1*t),s=e.getIndex(),o=e.getAttribute("position"),l=s?s.count:o.count,u=[0,0,0],c=["a","b","c"],d=new Array(3),f={},h=[];for(let p=0;p<l;p+=3){s?(u[0]=s.getX(p),u[1]=s.getX(p+1),u[2]=s.getX(p+2)):(u[0]=p,u[1]=p+1,u[2]=p+2);const{a:m,b:v,c:g}=dA;if(m.fromBufferAttribute(o,u[0]),v.fromBufferAttribute(o,u[1]),g.fromBufferAttribute(o,u[2]),dA.getNormal(Ik),d[0]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,d[1]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,d[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let y=0;y<3;y++){const _=(y+1)%3,b=d[y],x=d[_],w=dA[c[y]],A=dA[c[_]],T=`${b}_${x}`,C=`${x}_${b}`;C in f&&f[C]?(Ik.dot(f[C].normal)<=a&&(h.push(w.x,w.y,w.z),h.push(A.x,A.y,A.z)),f[C]=null):T in f||(f[T]={index0:u[y],index1:u[_],normal:Ik.clone()})}}for(const p in f)if(f[p]){const{index0:m,index1:v}=f[p];uA.fromBufferAttribute(o,m),cA.fromBufferAttribute(o,v),h.push(uA.x,uA.y,uA.z),h.push(cA.x,cA.y,cA.z)}this.setAttribute("position",new Kn(h,3))}}}class R9 extends zO{constructor(e){super(e),this.uuid=Hu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new zO().fromJSON(i))}return this}}const Udt={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let a=Gde(n,0,i,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,u,c,d,f,h;if(r&&(a=Gdt(n,e,a,t)),n.length>80*t){o=u=n[0],l=c=n[1];for(let p=t;p<i;p+=t)d=n[p],f=n[p+1],d<o&&(o=d),f<l&&(l=f),d>u&&(u=d),f>c&&(c=f);h=Math.max(u-o,c-l),h=h!==0?1/h:0}return X2(a,s,t,o,l,h),s}};function Gde(n,e,t,r,i){let a,s;if(i===tft(n,e,t,r)>0)for(a=e;a<t;a+=r)s=eY(a,n[a],n[a+1],s);else for(a=t-r;a>=e;a-=r)s=eY(a,n[a],n[a+1],s);return s&&LI(s,s.next)&&(Q2(s),s=s.next),s}function tm(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(LI(t,t.next)||xa(t.prev,t,t.next)===0)){if(Q2(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function X2(n,e,t,r,i,a,s){if(!n)return;!s&&a&&Xdt(n,r,i,a);let o=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,a?Hdt(n,r,i,a):zdt(n)){e.push(l.i/t),e.push(n.i/t),e.push(u.i/t),Q2(n),n=u.next,o=u.next;continue}if(n=u,n===o){s?s===1?(n=Vdt(tm(n),e,t),X2(n,e,t,r,i,a,2)):s===2&&$dt(n,e,t,r,i,a):X2(tm(n),e,t,r,i,a,1);break}}}function zdt(n){const e=n.prev,t=n,r=n.next;if(xa(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(qy(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&xa(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Hdt(n,e,t,r){const i=n.prev,a=n,s=n.next;if(xa(i,a,s)>=0)return!1;const o=i.x<a.x?i.x<s.x?i.x:s.x:a.x<s.x?a.x:s.x,l=i.y<a.y?i.y<s.y?i.y:s.y:a.y<s.y?a.y:s.y,u=i.x>a.x?i.x>s.x?i.x:s.x:a.x>s.x?a.x:s.x,c=i.y>a.y?i.y>s.y?i.y:s.y:a.y>s.y?a.y:s.y,d=VO(o,l,e,t,r),f=VO(u,c,e,t,r);let h=n.prevZ,p=n.nextZ;for(;h&&h.z>=d&&p&&p.z<=f;){if(h!==n.prev&&h!==n.next&&qy(i.x,i.y,a.x,a.y,s.x,s.y,h.x,h.y)&&xa(h.prev,h,h.next)>=0||(h=h.prevZ,p!==n.prev&&p!==n.next&&qy(i.x,i.y,a.x,a.y,s.x,s.y,p.x,p.y)&&xa(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;h&&h.z>=d;){if(h!==n.prev&&h!==n.next&&qy(i.x,i.y,a.x,a.y,s.x,s.y,h.x,h.y)&&xa(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=f;){if(p!==n.prev&&p!==n.next&&qy(i.x,i.y,a.x,a.y,s.x,s.y,p.x,p.y)&&xa(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Vdt(n,e,t){let r=n;do{const i=r.prev,a=r.next.next;!LI(i,a)&&Wde(i,r,r.next,a)&&Y2(i,a)&&Y2(a,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(a.i/t),Q2(r),Q2(r.next),r=n=a),r=r.next}while(r!==n);return tm(r)}function $dt(n,e,t,r,i,a){let s=n;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&Zdt(s,o)){let l=qde(s,o);s=tm(s,s.next),l=tm(l,l.next),X2(s,e,t,r,i,a),X2(l,e,t,r,i,a);return}o=o.next}s=s.next}while(s!==n)}function Gdt(n,e,t,r){const i=[];let a,s,o,l,u;for(a=0,s=e.length;a<s;a++)o=e[a]*r,l=a<s-1?e[a+1]*r:n.length,u=Gde(n,o,l,r,!1),u===u.next&&(u.steiner=!0),i.push(Qdt(u));for(i.sort(Wdt),a=0;a<i.length;a++)qdt(i[a],t),t=tm(t,t.next);return t}function Wdt(n,e){return n.x-e.x}function qdt(n,e){if(e=jdt(n,e),e){const t=qde(e,n);tm(e,e.next),tm(t,t.next)}}function jdt(n,e){let t=e;const r=n.x,i=n.y;let a=-1/0,s;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const f=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=r&&f>a){if(a=f,f===r){if(i===t.y)return t;if(i===t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!s)return null;if(r===a)return s;const o=s,l=s.x,u=s.y;let c=1/0,d;t=s;do r>=t.x&&t.x>=l&&r!==t.x&&qy(i<u?r:a,i,l,u,i<u?a:r,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(r-t.x),Y2(t,n)&&(d<c||d===c&&(t.x>s.x||t.x===s.x&&Kdt(s,t)))&&(s=t,c=d)),t=t.next;while(t!==o);return s}function Kdt(n,e){return xa(n.prev,n,e.prev)<0&&xa(e.next,n,n.next)<0}function Xdt(n,e,t,r){let i=n;do i.z===null&&(i.z=VO(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Ydt(i)}function Ydt(n){let e,t,r,i,a,s,o,l,u=1;do{for(t=n,n=null,a=null,s=0;t;){for(s++,r=t,o=0,e=0;e<u&&(o++,r=r.nextZ,!!r);e++);for(l=u;o>0||l>0&&r;)o!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,o--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;t=r}a.nextZ=null,u*=2}while(s>1);return n}function VO(n,e,t,r,i){return n=32767*(n-t)*i,e=32767*(e-r)*i,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Qdt(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function qy(n,e,t,r,i,a,s,o){return(i-s)*(e-o)-(n-s)*(a-o)>=0&&(n-s)*(r-o)-(t-s)*(e-o)>=0&&(t-s)*(a-o)-(i-s)*(r-o)>=0}function Zdt(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Jdt(n,e)&&(Y2(n,e)&&Y2(e,n)&&eft(n,e)&&(xa(n.prev,n,e.prev)||xa(n,e.prev,e))||LI(n,e)&&xa(n.prev,n,n.next)>0&&xa(e.prev,e,e.next)>0)}function xa(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function LI(n,e){return n.x===e.x&&n.y===e.y}function Wde(n,e,t,r){const i=hA(xa(n,e,t)),a=hA(xa(n,e,r)),s=hA(xa(t,r,n)),o=hA(xa(t,r,e));return!!(i!==a&&s!==o||i===0&&fA(n,t,e)||a===0&&fA(n,r,e)||s===0&&fA(t,n,r)||o===0&&fA(t,e,r))}function fA(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function hA(n){return n>0?1:n<0?-1:0}function Jdt(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Wde(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Y2(n,e){return xa(n.prev,n,n.next)<0?xa(n,e,n.next)>=0&&xa(n,n.prev,e)>=0:xa(n,e,n.prev)<0||xa(n,n.next,e)<0}function eft(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function qde(n,e){const t=new $O(n.i,n.x,n.y),r=new $O(e.i,e.x,e.y),i=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function eY(n,e,t,r){const i=new $O(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Q2(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function $O(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tft(n,e,t,r){let i=0;for(let a=e,s=t-r;a<t;a+=r)i+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return i}class Ep{static area(e){const t=e.length;let r=0;for(let i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return Ep.area(e)<0}static triangulateShape(e,t){const r=[],i=[],a=[];tY(e),nY(r,e);let s=e.length;t.forEach(tY);for(let l=0;l<t.length;l++)i.push(s),s+=t[l].length,nY(r,t[l]);const o=Udt.triangulate(r,i);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function tY(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function nY(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class P3 extends pi{constructor(e=new R9([new sn(.5,.5),new sn(-.5,.5),new sn(-.5,-.5),new sn(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];s(u)}this.setAttribute("position",new Kn(i,3)),this.setAttribute("uv",new Kn(a,2)),this.computeVertexNormals();function s(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:h-.1,m=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,y=t.UVGenerator!==void 0?t.UVGenerator:nft;let _,b=!1,x,w,A,T;g&&(_=g.getSpacedPoints(c),b=!0,f=!1,x=g.computeFrenetFrames(c,!1),w=new it,A=new it,T=new it),f||(v=0,h=0,p=0,m=0);const C=o.extractPoints(u);let E=C.shape;const I=C.holes;if(!Ep.isClockWise(E)){E=E.reverse();for(let Y=0,he=I.length;Y<he;Y++){const le=I[Y];Ep.isClockWise(le)&&(I[Y]=le.reverse())}}const L=Ep.triangulateShape(E,I),N=E;for(let Y=0,he=I.length;Y<he;Y++){const le=I[Y];E=E.concat(le)}function F(Y,he,le){return he||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().multiplyScalar(le).add(Y)}const k=E.length,H=L.length;function U(Y,he,le){let Ke,Ue,Ze;const je=Y.x-he.x,He=Y.y-he.y,ut=le.x-Y.x,ge=le.y-Y.y,q=je*je+He*He,te=je*ge-He*ut;if(Math.abs(te)>Number.EPSILON){const ye=Math.sqrt(q),Ve=Math.sqrt(ut*ut+ge*ge),et=he.x-He/ye,At=he.y+je/ye,It=le.x-ge/Ve,De=le.y+ut/Ve,Tt=((It-et)*ge-(De-At)*ut)/(je*ge-He*ut);Ke=et+je*Tt-Y.x,Ue=At+He*Tt-Y.y;const ot=Ke*Ke+Ue*Ue;if(ot<=2)return new sn(Ke,Ue);Ze=Math.sqrt(ot/2)}else{let ye=!1;je>Number.EPSILON?ut>Number.EPSILON&&(ye=!0):je<-Number.EPSILON?ut<-Number.EPSILON&&(ye=!0):Math.sign(He)===Math.sign(ge)&&(ye=!0),ye?(Ke=-He,Ue=je,Ze=Math.sqrt(q)):(Ke=je,Ue=He,Ze=Math.sqrt(q/2))}return new sn(Ke/Ze,Ue/Ze)}const B=[];for(let Y=0,he=N.length,le=he-1,Ke=Y+1;Y<he;Y++,le++,Ke++)le===he&&(le=0),Ke===he&&(Ke=0),B[Y]=U(N[Y],N[le],N[Ke]);const $=[];let ee,re=B.concat();for(let Y=0,he=I.length;Y<he;Y++){const le=I[Y];ee=[];for(let Ke=0,Ue=le.length,Ze=Ue-1,je=Ke+1;Ke<Ue;Ke++,Ze++,je++)Ze===Ue&&(Ze=0),je===Ue&&(je=0),ee[Ke]=U(le[Ke],le[Ze],le[je]);$.push(ee),re=re.concat(ee)}for(let Y=0;Y<v;Y++){const he=Y/v,le=h*Math.cos(he*Math.PI/2),Ke=p*Math.sin(he*Math.PI/2)+m;for(let Ue=0,Ze=N.length;Ue<Ze;Ue++){const je=F(N[Ue],B[Ue],Ke);me(je.x,je.y,-le)}for(let Ue=0,Ze=I.length;Ue<Ze;Ue++){const je=I[Ue];ee=$[Ue];for(let He=0,ut=je.length;He<ut;He++){const ge=F(je[He],ee[He],Ke);me(ge.x,ge.y,-le)}}}const ne=p+m;for(let Y=0;Y<k;Y++){const he=f?F(E[Y],re[Y],ne):E[Y];b?(A.copy(x.normals[0]).multiplyScalar(he.x),w.copy(x.binormals[0]).multiplyScalar(he.y),T.copy(_[0]).add(A).add(w),me(T.x,T.y,T.z)):me(he.x,he.y,0)}for(let Y=1;Y<=c;Y++)for(let he=0;he<k;he++){const le=f?F(E[he],re[he],ne):E[he];b?(A.copy(x.normals[Y]).multiplyScalar(le.x),w.copy(x.binormals[Y]).multiplyScalar(le.y),T.copy(_[Y]).add(A).add(w),me(T.x,T.y,T.z)):me(le.x,le.y,d/c*Y)}for(let Y=v-1;Y>=0;Y--){const he=Y/v,le=h*Math.cos(he*Math.PI/2),Ke=p*Math.sin(he*Math.PI/2)+m;for(let Ue=0,Ze=N.length;Ue<Ze;Ue++){const je=F(N[Ue],B[Ue],Ke);me(je.x,je.y,d+le)}for(let Ue=0,Ze=I.length;Ue<Ze;Ue++){const je=I[Ue];ee=$[Ue];for(let He=0,ut=je.length;He<ut;He++){const ge=F(je[He],ee[He],Ke);b?me(ge.x,ge.y+_[c-1].y,_[c-1].x+le):me(ge.x,ge.y,d+le)}}}ae(),pe();function ae(){const Y=i.length/3;if(f){let he=0,le=k*he;for(let Ke=0;Ke<H;Ke++){const Ue=L[Ke];ke(Ue[2]+le,Ue[1]+le,Ue[0]+le)}he=c+v*2,le=k*he;for(let Ke=0;Ke<H;Ke++){const Ue=L[Ke];ke(Ue[0]+le,Ue[1]+le,Ue[2]+le)}}else{for(let he=0;he<H;he++){const le=L[he];ke(le[2],le[1],le[0])}for(let he=0;he<H;he++){const le=L[he];ke(le[0]+k*c,le[1]+k*c,le[2]+k*c)}}r.addGroup(Y,i.length/3-Y,0)}function pe(){const Y=i.length/3;let he=0;de(N,he),he+=N.length;for(let le=0,Ke=I.length;le<Ke;le++){const Ue=I[le];de(Ue,he),he+=Ue.length}r.addGroup(Y,i.length/3-Y,1)}function de(Y,he){let le=Y.length;for(;--le>=0;){const Ke=le;let Ue=le-1;Ue<0&&(Ue=Y.length-1);for(let Ze=0,je=c+v*2;Ze<je;Ze++){const He=k*Ze,ut=k*(Ze+1),ge=he+Ke+He,q=he+Ue+He,te=he+Ue+ut,ye=he+Ke+ut;Be(ge,q,te,ye)}}}function me(Y,he,le){l.push(Y),l.push(he),l.push(le)}function ke(Y,he,le){Xe(Y),Xe(he),Xe(le);const Ke=i.length/3,Ue=y.generateTopUV(r,i,Ke-3,Ke-2,Ke-1);Ye(Ue[0]),Ye(Ue[1]),Ye(Ue[2])}function Be(Y,he,le,Ke){Xe(Y),Xe(he),Xe(Ke),Xe(he),Xe(le),Xe(Ke);const Ue=i.length/3,Ze=y.generateSideWallUV(r,i,Ue-6,Ue-3,Ue-2,Ue-1);Ye(Ze[0]),Ye(Ze[1]),Ye(Ze[3]),Ye(Ze[1]),Ye(Ze[2]),Ye(Ze[3])}function Xe(Y){i.push(l[Y*3+0]),i.push(l[Y*3+1]),i.push(l[Y*3+2])}function Ye(Y){a.push(Y.x),a.push(Y.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return rft(t,r,e)}static fromJSON(e,t){const r=[];for(let a=0,s=e.shapes.length;a<s;a++){const o=t[e.shapes[a]];r.push(o)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new P9[i.type]().fromJSON(i)),new P3(r,e.options)}}const nft={generateTopUV:function(n,e,t,r,i){const a=e[t*3],s=e[t*3+1],o=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new sn(a,s),new sn(o,l),new sn(u,c)]},generateSideWallUV:function(n,e,t,r,i,a){const s=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],d=e[r*3+2],f=e[i*3],h=e[i*3+1],p=e[i*3+2],m=e[a*3],v=e[a*3+1],g=e[a*3+2];return Math.abs(o-c)<Math.abs(s-u)?[new sn(s,1-l),new sn(u,1-d),new sn(f,1-p),new sn(m,1-g)]:[new sn(o,1-l),new sn(c,1-d),new sn(h,1-p),new sn(v,1-g)]}};function rft(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const a=n[r];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class R3 extends em{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new R3(e.radius,e.detail)}}class k3 extends em{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new k3(e.radius,e.detail)}}class L3 extends pi{constructor(e=.5,t=1,r=8,i=1,a=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:a,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const o=[],l=[],u=[],c=[];let d=e;const f=(t-e)/i,h=new it,p=new sn;for(let m=0;m<=i;m++){for(let v=0;v<=r;v++){const g=a+v/r*s;h.x=d*Math.cos(g),h.y=d*Math.sin(g),l.push(h.x,h.y,h.z),u.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}d+=f}for(let m=0;m<i;m++){const v=m*(r+1);for(let g=0;g<r;g++){const y=g+v,_=y,b=y+r+1,x=y+r+2,w=y+1;o.push(_,b,w),o.push(b,x,w)}}this.setIndex(o),this.setAttribute("position",new Kn(l,3)),this.setAttribute("normal",new Kn(u,3)),this.setAttribute("uv",new Kn(c,2))}static fromJSON(e){return new L3(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class O3 extends pi{constructor(e=new R9([new sn(0,.5),new sn(-.5,-.5),new sn(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],a=[],s=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(o,l,c),o+=l,l=0;this.setIndex(r),this.setAttribute("position",new Kn(i,3)),this.setAttribute("normal",new Kn(a,3)),this.setAttribute("uv",new Kn(s,2));function u(c){const d=i.length/3,f=c.extractPoints(t);let h=f.shape;const p=f.holes;Ep.isClockWise(h)===!1&&(h=h.reverse());for(let v=0,g=p.length;v<g;v++){const y=p[v];Ep.isClockWise(y)===!0&&(p[v]=y.reverse())}const m=Ep.triangulateShape(h,p);for(let v=0,g=p.length;v<g;v++){const y=p[v];h=h.concat(y)}for(let v=0,g=h.length;v<g;v++){const y=h[v];i.push(y.x,y.y,0),a.push(0,0,1),s.push(y.x,y.y)}for(let v=0,g=m.length;v<g;v++){const y=m[v],_=y[0]+d,b=y[1]+d,x=y[2]+d;r.push(_,b,x),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return ift(t,e)}static fromJSON(e,t){const r=[];for(let i=0,a=e.shapes.length;i<a;i++){const s=t[e.shapes[i]];r.push(s)}return new O3(r,e.curveSegments)}}function ift(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}let rY=class jde extends pi{constructor(e=1,t=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(s+o,Math.PI);let u=0;const c=[],d=new it,f=new it,h=[],p=[],m=[],v=[];for(let g=0;g<=r;g++){const y=[],_=g/r;let b=0;g==0&&s==0?b=.5/t:g==r&&l==Math.PI&&(b=-.5/t);for(let x=0;x<=t;x++){const w=x/t;d.x=-e*Math.cos(i+w*a)*Math.sin(s+_*o),d.y=e*Math.cos(s+_*o),d.z=e*Math.sin(i+w*a)*Math.sin(s+_*o),p.push(d.x,d.y,d.z),f.copy(d).normalize(),m.push(f.x,f.y,f.z),v.push(w+b,1-_),y.push(u++)}c.push(y)}for(let g=0;g<r;g++)for(let y=0;y<t;y++){const _=c[g][y+1],b=c[g][y],x=c[g+1][y],w=c[g+1][y+1];(g!==0||s>0)&&h.push(_,b,w),(g!==r-1||l<Math.PI)&&h.push(b,x,w)}this.setIndex(h),this.setAttribute("position",new Kn(p,3)),this.setAttribute("normal",new Kn(m,3)),this.setAttribute("uv",new Kn(v,2))}static fromJSON(e){return new jde(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};class N3 extends em{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new N3(e.radius,e.detail)}}class B3 extends pi{constructor(e=1,t=.4,r=8,i=6,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],l=[],u=[],c=new it,d=new it,f=new it;for(let h=0;h<=r;h++)for(let p=0;p<=i;p++){const m=p/i*a,v=h/r*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(m),d.y=(e+t*Math.cos(v))*Math.sin(m),d.z=t*Math.sin(v),o.push(d.x,d.y,d.z),c.x=e*Math.cos(m),c.y=e*Math.sin(m),f.subVectors(d,c).normalize(),l.push(f.x,f.y,f.z),u.push(p/i),u.push(h/r)}for(let h=1;h<=r;h++)for(let p=1;p<=i;p++){const m=(i+1)*h+p-1,v=(i+1)*(h-1)+p-1,g=(i+1)*(h-1)+p,y=(i+1)*h+p;s.push(m,v,y),s.push(v,g,y)}this.setIndex(s),this.setAttribute("position",new Kn(o,3)),this.setAttribute("normal",new Kn(l,3)),this.setAttribute("uv",new Kn(u,2))}static fromJSON(e){return new B3(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class F3 extends pi{constructor(e=1,t=.4,r=64,i=8,a=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:a,q:s},r=Math.floor(r),i=Math.floor(i);const o=[],l=[],u=[],c=[],d=new it,f=new it,h=new it,p=new it,m=new it,v=new it,g=new it;for(let _=0;_<=r;++_){const b=_/r*a*Math.PI*2;y(b,a,s,e,h),y(b+.01,a,s,e,p),v.subVectors(p,h),g.addVectors(p,h),m.crossVectors(v,g),g.crossVectors(m,v),m.normalize(),g.normalize();for(let x=0;x<=i;++x){const w=x/i*Math.PI*2,A=-t*Math.cos(w),T=t*Math.sin(w);d.x=h.x+(A*g.x+T*m.x),d.y=h.y+(A*g.y+T*m.y),d.z=h.z+(A*g.z+T*m.z),l.push(d.x,d.y,d.z),f.subVectors(d,h).normalize(),u.push(f.x,f.y,f.z),c.push(_/r),c.push(x/i)}}for(let _=1;_<=r;_++)for(let b=1;b<=i;b++){const x=(i+1)*(_-1)+(b-1),w=(i+1)*_+(b-1),A=(i+1)*_+b,T=(i+1)*(_-1)+b;o.push(x,w,T),o.push(w,A,T)}this.setIndex(o),this.setAttribute("position",new Kn(l,3)),this.setAttribute("normal",new Kn(u,3)),this.setAttribute("uv",new Kn(c,2));function y(_,b,x,w,A){const T=Math.cos(_),C=Math.sin(_),E=x/b*_,I=Math.cos(E);A.x=w*(2+I)*.5*T,A.y=w*(2+I)*C*.5,A.z=w*Math.sin(E)*.5}}static fromJSON(e){return new F3(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class U3 extends pi{constructor(e=new zde(new it(-1,-1,0),new it(-1,1,0),new it(1,1,0)),t=64,r=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:a};const s=e.computeFrenetFrames(t,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new it,l=new it,u=new sn;let c=new it;const d=[],f=[],h=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new Kn(d,3)),this.setAttribute("normal",new Kn(f,3)),this.setAttribute("uv",new Kn(h,2));function m(){for(let _=0;_<t;_++)v(_);v(a===!1?t:0),y(),g()}function v(_){c=e.getPointAt(_/t,c);const b=s.normals[_],x=s.binormals[_];for(let w=0;w<=i;w++){const A=w/i*Math.PI*2,T=Math.sin(A),C=-Math.cos(A);l.x=C*b.x+T*x.x,l.y=C*b.y+T*x.y,l.z=C*b.z+T*x.z,l.normalize(),f.push(l.x,l.y,l.z),o.x=c.x+r*l.x,o.y=c.y+r*l.y,o.z=c.z+r*l.z,d.push(o.x,o.y,o.z)}}function g(){for(let _=1;_<=t;_++)for(let b=1;b<=i;b++){const x=(i+1)*(_-1)+(b-1),w=(i+1)*_+(b-1),A=(i+1)*_+b,T=(i+1)*(_-1)+b;p.push(x,w,T),p.push(w,A,T)}}function y(){for(let _=0;_<=t;_++)for(let b=0;b<=i;b++)u.x=_/t,u.y=b/i,h.push(u.x,u.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new U3(new P9[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class aft extends pi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new it,a=new it;if(e.index!==null){const s=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const d=l[u],f=d.start,h=d.count;for(let p=f,m=f+h;p<m;p+=3)for(let v=0;v<3;v++){const g=o.getX(p+v),y=o.getX(p+(v+1)%3);i.fromBufferAttribute(s,g),a.fromBufferAttribute(s,y),iY(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}}else{const s=e.attributes.position;for(let o=0,l=s.count/3;o<l;o++)for(let u=0;u<3;u++){const c=3*o+u,d=3*o+(u+1)%3;i.fromBufferAttribute(s,c),a.fromBufferAttribute(s,d),iY(i,a,r)===!0&&(t.push(i.x,i.y,i.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Kn(t,3))}}}function iY(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var aY=Object.freeze({__proto__:null,BoxGeometry:q2,BoxBufferGeometry:q2,CapsuleGeometry:M3,CapsuleBufferGeometry:M3,CircleGeometry:I3,CircleBufferGeometry:I3,ConeGeometry:JX,ConeBufferGeometry:JX,CylinderGeometry:HO,CylinderBufferGeometry:HO,DodecahedronGeometry:D3,DodecahedronBufferGeometry:D3,EdgesGeometry:Fdt,ExtrudeGeometry:P3,ExtrudeBufferGeometry:P3,IcosahedronGeometry:R3,IcosahedronBufferGeometry:R3,LatheGeometry:K2,LatheBufferGeometry:K2,OctahedronGeometry:k3,OctahedronBufferGeometry:k3,PlaneGeometry:BO,PlaneBufferGeometry:BO,PolyhedronGeometry:em,PolyhedronBufferGeometry:em,RingGeometry:L3,RingBufferGeometry:L3,ShapeGeometry:O3,ShapeBufferGeometry:O3,SphereGeometry:rY,SphereBufferGeometry:rY,TetrahedronGeometry:N3,TetrahedronBufferGeometry:N3,TorusGeometry:B3,TorusBufferGeometry:B3,TorusKnotGeometry:F3,TorusKnotBufferGeometry:F3,TubeGeometry:U3,TubeBufferGeometry:U3,WireframeGeometry:aft});class sft extends ts{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Un(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class oft extends eh{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class tb extends ts{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Un(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lv,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hm extends tb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new sn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return cs(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Un(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Un(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Un(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class zf extends ts{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Un(16777215),this.specular=new Un(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lv,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=DI,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lft extends ts{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Un(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lv,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class uft extends ts{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lv,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class k9 extends ts{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Un(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=DI,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class cft extends ts{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Un(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lv,this.normalScale=new sn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dft extends Bc{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function $h(n,e,t){return Kde(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function pA(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Kde(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function fft(n){function e(i,a){return n[i]-n[a]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function sY(n,e,t){const r=n.length,i=new n.constructor(r);for(let a=0,s=0;s!==r;++a){const o=t[a]*e;for(let l=0;l!==e;++l)i[s++]=n[o+l]}return i}function Xde(n,e,t,r){let i=1,a=n[0];for(;a!==void 0&&a[r]===void 0;)a=n[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),t.push.apply(t,s)),a=n[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),t.push(s)),a=n[i++];while(a!==void 0)}class qw{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(r=2,a=o);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=a,a=t[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<t[o]?s=o:r=o+1}if(i=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)t[s]=r[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hft extends qw{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Hy,endingEnd:Hy}}intervalChanged_(e,t,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],l=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case Vy:a=e,o=2*t-r;break;case A3:a=i.length-2,o=t+i[a]-i[a+1];break;default:a=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Vy:s=e,l=2*r-t;break;case A3:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-r),this._offsetPrev=a*c,this._offsetNext=s*c}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(r-t)/(i-t),m=p*p,v=m*p,g=-f*v+2*f*m-f*p,y=(1+f)*v+(-1.5-2*f)*m+(-.5+f)*p+1,_=(-1-h)*v+(1.5+h)*m+.5*p,b=h*v-h*m;for(let x=0;x!==o;++x)a[x]=g*s[c+x]+y*s[u+x]+_*s[l+x]+b*s[d+x];return a}}class Yde extends qw{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=(r-t)/(i-t),d=1-c;for(let f=0;f!==o;++f)a[f]=s[u+f]*d+s[l+f]*c;return a}}class pft extends qw{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class jd{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=pA(t,this.TimeBufferType),this.values=pA(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:pA(e.times,Array),values:pA(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new pft(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Yde(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hft(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case $2:t=this.InterpolantFactoryMethodDiscrete;break;case r_:t=this.InterpolantFactoryMethodLinear;break;case YR:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return $2;case this.InterpolantFactoryMethodLinear:return r_;case this.InterpolantFactoryMethodSmooth:return YR}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>t;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=$h(r,a,s),this.values=$h(this.values,a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(i!==void 0&&Kde(i))for(let o=0,l=i.length;o!==l;++o){const u=i[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=$h(this.times),t=$h(this.values),r=this.getValueSize(),i=this.getInterpolation()===YR,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const u=e[o],c=e[o+1];if(u!==c&&(o!==1||u!==e[0]))if(i)l=!0;else{const d=o*r,f=d-r,h=d+r;for(let p=0;p!==r;++p){const m=t[d+p];if(m!==t[f+p]||m!==t[h+p]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const d=o*r,f=s*r;for(let h=0;h!==r;++h)t[f+h]=t[d+h]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,l=s*r,u=0;u!==r;++u)t[l+u]=t[o+u];++s}return s!==e.length?(this.times=$h(e,0,s),this.values=$h(t,0,s*r)):(this.times=e,this.values=t),this}clone(){const e=$h(this.times,0),t=$h(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}jd.prototype.TimeBufferType=Float32Array;jd.prototype.ValueBufferType=Float32Array;jd.prototype.DefaultInterpolation=r_;class nb extends jd{}nb.prototype.ValueTypeName="bool";nb.prototype.ValueBufferType=Array;nb.prototype.DefaultInterpolation=$2;nb.prototype.InterpolantFactoryMethodLinear=void 0;nb.prototype.InterpolantFactoryMethodSmooth=void 0;class Qde extends jd{}Qde.prototype.ValueTypeName="color";class s_ extends jd{}s_.prototype.ValueTypeName="number";class mft extends qw{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(r-t)/(i-t);let u=e*o;for(let c=u+o;u!==c;u+=4)qs.slerpFlat(a,0,s,u-o,s,u,l);return a}}class th extends jd{InterpolantFactoryMethodLinear(e){return new mft(this.times,this.values,this.getValueSize(),e)}}th.prototype.ValueTypeName="quaternion";th.prototype.DefaultInterpolation=r_;th.prototype.InterpolantFactoryMethodSmooth=void 0;class rb extends jd{}rb.prototype.ValueTypeName="string";rb.prototype.ValueBufferType=Array;rb.prototype.DefaultInterpolation=$2;rb.prototype.InterpolantFactoryMethodLinear=void 0;rb.prototype.InterpolantFactoryMethodSmooth=void 0;class nm extends jd{}nm.prototype.ValueTypeName="vector";class xv{constructor(e,t=-1,r,i=v9){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Hu(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)t.push(gft(r[s]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,s=r.length;a!==s;++a)t.push(jd.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const a=t.length,s=[];for(let o=0;o<a;o++){let l=[],u=[];l.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);const c=fft(l);l=sY(l,1,c),u=sY(u,1,c),!i&&l[0]===0&&(l.push(a),u.push(u[0])),s.push(new s_(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],c=u.name.match(a);if(c&&c.length>1){const d=c[1];let f=i[d];f||(i[d]=f=[]),f.push(u)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,f,h,p,m){if(h.length!==0){const v=[],g=[];Xde(h,v,g,p),v.length!==0&&m.push(new d(f,v,g))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const f=u[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let m=0;m<f[p].morphTargets.length;m++)h[f[p].morphTargets[m]]=-1;for(const m in h){const v=[],g=[];for(let y=0;y!==f[p].morphTargets.length;++y){const _=f[p];v.push(_.time),g.push(_.morphTarget===m?1:0)}i.push(new s_(".morphTargetInfluence["+m+"]",v,g))}l=h.length*s}else{const h=".bones["+t[d].name+"]";r(nm,h+".position",f,"pos",i),r(th,h+".quaternion",f,"rot",i),r(nm,h+".scale",f,"scl",i)}}return i.length===0?null:new this(a,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function vft(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return s_;case"vector":case"vector2":case"vector3":case"vector4":return nm;case"color":return Qde;case"quaternion":return th;case"bool":case"boolean":return nb;case"string":return rb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function gft(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=vft(n.type);if(n.times===void 0){const t=[],r=[];Xde(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const o_={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Zde{constructor(e,t,r){const i=this;let a=!1,s=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){o++,a===!1&&i.onStart!==void 0&&i.onStart(c,s,o),a=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,f=u.length;d<f;d+=2){const h=u[d],p=u[d+1];if(h.global&&(h.lastIndex=0),h.test(c))return p}return null}}}const Jde=new Zde;class eo{constructor(e){this.manager=e!==void 0?e:Jde,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const of={};class yft extends Error{constructor(e,t){super(e),this.response=t}}class Co extends eo{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=o_.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(of[e]!==void 0){of[e].push({onLoad:t,onProgress:r,onError:i});return}of[e]=[],of[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=of[e],d=u.body.getReader(),f=u.headers.get("Content-Length"),h=f?parseInt(f):0,p=h!==0;let m=0;const v=new ReadableStream({start(g){y();function y(){d.read().then(({done:_,value:b})=>{if(_)g.close();else{m+=b.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:h});for(let w=0,A=c.length;w<A;w++){const T=c[w];T.onProgress&&T.onProgress(x)}g.enqueue(b),y()}})}}});return new Response(v)}else throw new yft(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return u.json();default:if(o===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return u.arrayBuffer().then(p=>h.decode(p))}}}).then(u=>{o_.add(e,u);const c=of[e];delete of[e];for(let d=0,f=c.length;d<f;d++){const h=c[d];h.onLoad&&h.onLoad(u)}}).catch(u=>{const c=of[e];if(c===void 0)throw this.manager.itemError(e),u;delete of[e];for(let d=0,f=c.length;d<f;d++){const h=c[d];h.onError&&h.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class _ft extends eo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=[],o=new Cdt,l=new Co(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(a.withCredentials);let u=0;function c(d){l.load(e[d],function(f){const h=a.parse(f,!0);s[d]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},u+=1,u===6&&(h.mipmapCount===1&&(o.minFilter=Za),o.image=s,o.format=h.format,o.needsUpdate=!0,t&&t(o))},r,i)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)c(d);else l.load(e,function(d){const f=a.parse(d,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let p=0;p<h;p++){s[p]={mipmaps:[]};for(let m=0;m<f.mipmapCount;m++)s[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+m]),s[p].format=f.format,s[p].width=f.width,s[p].height=f.height}o.image=s}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=Za),o.format=f.format,o.needsUpdate=!0,t&&t(o)},r,i);return o}}class GO extends eo{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=o_.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;const o=W2("img");function l(){c(),o_.add(e,this),t&&t(this),a.manager.itemEnd(e)}function u(d){c(),i&&i(d),a.manager.itemError(e),a.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o}}class bft extends eo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Sx,o=new Co(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(a.withCredentials),o.load(e,function(l){const u=a.parse(l);u&&(u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:hs,s.wrapT=u.wrapT!==void 0?u.wrapT:hs,s.magFilter=u.magFilter!==void 0?u.magFilter:Za,s.minFilter=u.minFilter!==void 0?u.minFilter:Za,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(s.encoding=u.encoding),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=yh),u.mipmapCount===1&&(s.minFilter=Za),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,t&&t(s,u))},r,i),s}}class l_ extends eo{constructor(e){super(e)}load(e,t,r,i){const a=new Qs,s=new GO(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},r,i),a}}class Bv extends Sa{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Un(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class efe extends Bv{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Sa.DefaultUp),this.updateMatrix(),this.groundColor=new Un(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const oY=new or,lY=new it,uY=new it;class L9{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new sn(512,512),this.map=null,this.mapPass=null,this.matrix=new or,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new S9,this._frameExtents=new sn(1,1),this._viewportCount=1,this._viewports=[new ki(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;lY.setFromMatrixPosition(e.matrixWorld),t.position.copy(lY),uY.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(uY),t.updateMatrixWorld(),oY.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oY),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Sft extends L9{constructor(){super(new ds(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=G2*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class OI extends Bv{constructor(e,t,r=0,i=Math.PI/3,a=0,s=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Sa.DefaultUp),this.updateMatrix(),this.target=new Sa,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.shadow=new Sft}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const cY=new or,gS=new it,Dk=new it;class xft extends L9{constructor(){super(new ds(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new sn(4,2),this._viewportCount=6,this._viewports=[new ki(2,1,1,1),new ki(0,1,1,1),new ki(3,1,1,1),new ki(1,1,1,1),new ki(3,0,1,1),new ki(1,0,1,1)],this._cubeDirections=[new it(1,0,0),new it(-1,0,0),new it(0,0,1),new it(0,0,-1),new it(0,1,0),new it(0,-1,0)],this._cubeUps=[new it(0,1,0),new it(0,1,0),new it(0,1,0),new it(0,1,0),new it(0,0,1),new it(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,a=e.distance||r.far;a!==r.far&&(r.far=a,r.updateProjectionMatrix()),gS.setFromMatrixPosition(e.matrixWorld),r.position.copy(gS),Dk.copy(r.position),Dk.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Dk),r.updateMatrixWorld(),i.makeTranslation(-gS.x,-gS.y,-gS.z),cY.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cY)}}class wv extends Bv{constructor(e,t,r=0,i=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new xft}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class wft extends L9{constructor(){super(new Q_(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class jw extends Bv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Sa.DefaultUp),this.updateMatrix(),this.target=new Sa,this.shadow=new wft}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class NI extends Bv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Tft extends Bv{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Cft{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new it)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*a),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*a)),t.addScaledVector(s[6],.315392*(3*a*a-1)),t.addScaledVector(s[7],1.092548*(r*a)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,a=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*a),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*a),t.addScaledVector(s[6],.743125*a*a-.247708),t.addScaledVector(s[7],2*.429043*r*a),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,a=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*a,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*r*a,t[8]=.546274*(r*r-i*i)}}class Aft extends Bv{constructor(e=new Cft,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class O9 extends eo{constructor(e){super(e),this.textures={}}load(e,t,r,i){const a=this,s=new Co(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const i=O9.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Un().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const s=e.uniforms[a];switch(i.uniforms[a]={},s.type){case"t":i.uniforms[a].value=r(s.value);break;case"c":i.uniforms[a].value=new Un().setHex(s.value);break;case"v2":i.uniforms[a].value=new sn().fromArray(s.value);break;case"v3":i.uniforms[a].value=new it().fromArray(s.value);break;case"v4":i.uniforms[a].value=new ki().fromArray(s.value);break;case"m3":i.uniforms[a].value=new Nu().fromArray(s.value);break;case"m4":i.uniforms[a].value=new or().fromArray(s.value);break;default:i.uniforms[a].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const a in e.extensions)i.extensions[a]=e.extensions[a];if(e.shading!==void 0&&(i.flatShading=e.shading===1),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),i.normalScale=new sn().fromArray(a)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new sn().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:sft,SpriteMaterial:E9,RawShaderMaterial:oft,ShaderMaterial:eh,PointsMaterial:N0,MeshPhysicalMaterial:hm,MeshStandardMaterial:tb,MeshPhongMaterial:zf,MeshToonMaterial:lft,MeshNormalMaterial:uft,MeshLambertMaterial:k9,MeshDepthMaterial:kde,MeshDistanceMaterial:Lde,MeshBasicMaterial:Dc,MeshMatcapMaterial:cft,LineDashedMaterial:dft,LineBasicMaterial:Bc,Material:ts};return new t[e]}}class To{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}let Eft=class extends pi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}};class Mft extends eo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Co(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(o){try{t(a.parse(JSON.parse(o)))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(h,p){if(t[p]!==void 0)return t[p];const v=h.interleavedBuffers[p],g=a(h,v.buffer),y=$y(v.type,g),_=new A9(y,v.stride);return _.uuid=v.uuid,t[p]=_,_}function a(h,p){if(r[p]!==void 0)return r[p];const v=h.arrayBuffers[p],g=new Uint32Array(v).buffer;return r[p]=g,g}const s=e.isInstancedBufferGeometry?new Eft:new pi,o=e.data.index;if(o!==void 0){const h=$y(o.type,o.array);s.setIndex(new ka(h,1))}const l=e.data.attributes;for(const h in l){const p=l[h];let m;if(p.isInterleavedBufferAttribute){const v=i(e.data,p.data);m=new bv(v,p.itemSize,p.offset,p.normalized)}else{const v=$y(p.type,p.array),g=p.isInstancedBufferAttribute?j2:ka;m=new g(v,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),s.setAttribute(h,m)}const u=e.data.morphAttributes;if(u)for(const h in u){const p=u[h],m=[];for(let v=0,g=p.length;v<g;v++){const y=p[v];let _;if(y.isInterleavedBufferAttribute){const b=i(e.data,y.data);_=new bv(b,y.itemSize,y.offset,y.normalized)}else{const b=$y(y.type,y.array);_=new ka(b,y.itemSize,y.normalized)}y.name!==void 0&&(_.name=y.name),m.push(_)}s.morphAttributes[h]=m}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let h=0,p=d.length;h!==p;++h){const m=d[h];s.addGroup(m.start,m.count,m.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const h=new it;f.center!==void 0&&h.fromArray(f.center),s.boundingSphere=new Nv(h,f.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class Ift extends eo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=this.path===""?To.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Co(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){i!==void 0&&i(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?To.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const a=new Co(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const s=await a.loadAsync(e,t),o=JSON.parse(s),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(o)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,a,l,o,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let d=!1;for(const f in s)if(s[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,o,s,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const a=new R9().fromJSON(e[r]);t[a.uuid]=a}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(a){a.isBone&&(i[a.uuid]=a)}),e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=new J_().fromJSON(e[a],i);r[o.uuid]=o}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new Mft;for(let a=0,s=e.length;a<s;a++){let o;const l=e[a];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:l.type in aY?o=aY[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),o.isBufferGeometry===!0&&l.userData!==void 0&&(o.userData=l.userData),r[l.uuid]=o}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const a=new O9;a.setTextures(t);for(let s=0,o=e.length;s<o;s++){const l=e[s];if(l.type==="MultiMaterial"){const u=[];for(let c=0;c<l.materials.length;c++){const d=l.materials[c];r[d.uuid]===void 0&&(r[d.uuid]=a.parse(d)),u.push(r[d.uuid])}i[l.uuid]=u}else r[l.uuid]===void 0&&(r[l.uuid]=a.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],a=xv.parse(i);t[a.uuid]=a}return t}parseImages(e,t){const r=this,i={};let a;function s(l){return r.manager.itemStart(l),a.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return s(c)}else return l.data?{data:$y(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Zde(t);a=new GO(l),a.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const d=e[u],f=d.url;if(Array.isArray(f)){const h=[];for(let p=0,m=f.length;p<m;p++){const v=f[p],g=o(v);g!==null&&(g instanceof HTMLImageElement?h.push(g):h.push(new Sx(g.data,g.width,g.height)))}i[d.uuid]=new Gy(h)}else{const h=o(d.url);i[d.uuid]=new Gy(h)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function a(s){if(typeof s=="string"){const o=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await i.loadAsync(l)}else return s.data?{data:$y(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new GO(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=e.length;s<o;s++){const l=e[s],u=l.url;if(Array.isArray(u)){const c=[];for(let d=0,f=u.length;d<f;d++){const h=u[d],p=await a(h);p!==null&&(p instanceof HTMLImageElement?c.push(p):c.push(new Sx(p.data,p.width,p.height)))}r[l.uuid]=new Gy(c)}else{const c=await a(l.url);r[l.uuid]=new Gy(c)}}}return r}parseTextures(e,t){function r(a,s){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),s[a])}const i={};if(e!==void 0)for(let a=0,s=e.length;a<s;a++){const o=e[a];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],u=l.data;let c;Array.isArray(u)?(c=new b9,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new Sx:c=new Qs,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=o.uuid,o.name!==void 0&&(c.name=o.name),o.mapping!==void 0&&(c.mapping=r(o.mapping,Dft)),o.offset!==void 0&&c.offset.fromArray(o.offset),o.repeat!==void 0&&c.repeat.fromArray(o.repeat),o.center!==void 0&&c.center.fromArray(o.center),o.rotation!==void 0&&(c.rotation=o.rotation),o.wrap!==void 0&&(c.wrapS=r(o.wrap[0],dY),c.wrapT=r(o.wrap[1],dY)),o.format!==void 0&&(c.format=o.format),o.type!==void 0&&(c.type=o.type),o.encoding!==void 0&&(c.encoding=o.encoding),o.minFilter!==void 0&&(c.minFilter=r(o.minFilter,fY)),o.magFilter!==void 0&&(c.magFilter=r(o.magFilter,fY)),o.anisotropy!==void 0&&(c.anisotropy=o.anisotropy),o.flipY!==void 0&&(c.flipY=o.flipY),o.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(c.unpackAlignment=o.unpackAlignment),o.userData!==void 0&&(c.userData=o.userData),i[o.uuid]=c}return i}parseObject(e,t,r,i,a){let s;function o(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const h=[];for(let p=0,m=f.length;p<m;p++){const v=f[p];r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),h.push(r[v])}return h}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function u(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let c,d;switch(e.type){case"Scene":s=new C9,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Un(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new T9(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new w9(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":s=new ds(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Q_(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new NI(e.color,e.intensity);break;case"DirectionalLight":s=new jw(e.color,e.intensity);break;case"PointLight":s=new wv(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new Tft(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new OI(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new efe(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new Aft().fromJSON(e);break;case"SkinnedMesh":c=o(e.geometry),d=l(e.material),s=new kI(c,d),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":c=o(e.geometry),d=l(e.material),s=new ps(c,d);break;case"InstancedMesh":c=o(e.geometry),d=l(e.material);const f=e.count,h=e.instanceMatrix,p=e.instanceColor;s=new Tdt(c,d,f),s.instanceMatrix=new j2(new Float32Array(h.array),16),p!==void 0&&(s.instanceColor=new j2(new Float32Array(p.array),p.itemSize));break;case"LOD":s=new Sdt;break;case"Line":s=new eb(o(e.geometry),l(e.material));break;case"LineLoop":s=new Bde(o(e.geometry),l(e.material));break;case"LineSegments":s=new Sv(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new xx(o(e.geometry),l(e.material));break;case"Sprite":s=new HE(l(e.material));break;case"Group":s=new gl;break;case"Bone":s=new a_;break;default:s=new Sa}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let h=0;h<f.length;h++)s.add(this.parseObject(f[h],t,r,i,a))}if(e.animations!==void 0){const f=e.animations;for(let h=0;h<f.length;h++){const p=f[h];s.animations.push(a[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const f=e.levels;for(let h=0;h<f.length;h++){const p=f[h],m=s.getObjectByProperty("uuid",p.object);m!==void 0&&s.addLevel(m,p.distance)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const Dft={UVMapping:p9,CubeReflectionMapping:vv,CubeRefractionMapping:gv,EquirectangularReflectionMapping:z2,EquirectangularRefractionMapping:w3,CubeUVReflectionMapping:Ww},dY={RepeatWrapping:vl,ClampToEdgeWrapping:hs,MirroredRepeatWrapping:H2},fY={NearestFilter:Cs,NearestMipmapNearestFilter:T3,NearestMipmapLinearFilter:C3,LinearFilter:Za,LinearMipmapNearestFilter:m9,LinearMipmapLinearFilter:yh};class Pft extends eo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=o_.get(e);if(s!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0),s;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(l){o_.add(e,l),t&&t(l),a.manager.itemEnd(e)}).catch(function(l){i&&i(l),a.manager.itemError(e),a.manager.itemEnd(e)}),a.manager.itemStart(e)}}class Rft{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hY(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=hY();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function hY(){return(typeof performance>"u"?Date:performance).now()}class kft{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,a,s;switch(t){case"quaternion":i=this._slerp,a=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,a=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let o=0;o!==i;++o)r[a+o]=r[o];s=t}else{s+=t;const o=t/s;this._mixBufferRegion(r,a,0,o,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,a=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-a,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){o.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let a=r,s=i;a!==s;++a)t[a]=t[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,a){if(i>=.5)for(let s=0;s!==a;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){qs.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,a){const s=this._workIndex*a;qs.multiplyQuaternionsFlat(e,s,e,t,e,r),qs.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,a){const s=1-i;for(let o=0;o!==a;++o){const l=t+o;e[l]=e[l]*s+e[r+o]*i}}_lerpAdditive(e,t,r,i,a){for(let s=0;s!==a;++s){const o=t+s;e[o]=e[o]+e[r+s]*i}}}const N9="\\[\\]\\.:\\/",Lft=new RegExp("["+N9+"]","g"),B9="[^"+N9+"]",Oft="[^"+N9.replace("\\.","")+"]",Nft=/((?:WC+[\/:])*)/.source.replace("WC",B9),Bft=/(WCOD+)?/.source.replace("WCOD",Oft),Fft=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",B9),Uft=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",B9),zft=new RegExp("^"+Nft+Bft+Fft+Uft+"$"),Hft=["material","materials","bones"];class Vft{constructor(e,t,r){const i=r||_i.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class _i{constructor(e,t,r){this.path=t,this.parsedPath=r||_i.parseTrackName(t),this.node=_i.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new _i.Composite(e,t,r):new _i(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Lft,"")}static parseTrackName(e){const t=zft.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);Hft.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=_i.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_i.Composite=Vft;_i.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_i.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_i.prototype.GetterByBindingType=[_i.prototype._getValue_direct,_i.prototype._getValue_array,_i.prototype._getValue_arrayElement,_i.prototype._getValue_toArray];_i.prototype.SetterByBindingTypeAndVersioning=[[_i.prototype._setValue_direct,_i.prototype._setValue_direct_setNeedsUpdate,_i.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_i.prototype._setValue_array,_i.prototype._setValue_array_setNeedsUpdate,_i.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_i.prototype._setValue_arrayElement,_i.prototype._setValue_arrayElement_setNeedsUpdate,_i.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_i.prototype._setValue_fromArray,_i.prototype._setValue_fromArray_setNeedsUpdate,_i.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class $ft{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const a=t.tracks,s=a.length,o=new Array(s),l={endingStart:Hy,endingEnd:Hy};for(let u=0;u!==s;++u){const c=a[u].createInterpolant(null);o[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=nst,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,a=e._clip.duration,s=a/i,o=i/a;e.warp(1,s,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,a=i.time,s=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=a,l[1]=a+r,u[0]=e/s,u[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const l=(e-a)*r;if(l<0||r===0)return;this._startTime=null,t=r*l}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case ist:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(s),u[c].accumulateAdditive(o);break;case v9:default:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(s),u[c].accumulate(i,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,a=this._loopCount;const s=r===rst;if(e===0)return a===-1?i:s&&(a&1)===1?t-i:i;if(r===tst){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const o=Math.floor(i/t);i-=t*o,a+=Math.abs(o);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(s&&(a&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Vy,i.endingEnd=Vy):(e?i.endingStart=this.zeroSlopeAtStart?Vy:Hy:i.endingStart=A3,t?i.endingEnd=this.zeroSlopeAtEnd?Vy:Hy:i.endingEnd=A3)}_scheduleFading(e,t,r){const i=this._mixer,a=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=a,l[0]=t,o[1]=a+e,l[1]=r,this}}const Gft=new Float32Array(1);class Pk extends fm{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,a=i.length,s=e._propertyBindings,o=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let d=0;d!==a;++d){const f=i[d],h=f.name;let p=c[h];if(p!==void 0)++p.referenceCount,s[d]=p;else{if(p=s[d],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,h));continue}const m=t&&t._propertyBindings[d].binding.parsedPath;p=new kft(_i.create(r,h,m),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,h),s[d]=p}o[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,a=this._actionsByClip[i];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,a=this._actionsByClip;let s=a[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=s;else{const o=s.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,s=this._actionsByClip,o=s[a],l=o.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete s[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const a=t[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,a=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,a=r.path,s=this._bindingsByRootAndName,o=s[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete o[a],Object.keys(o).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,a=t[i];e._cacheIndex=i,t[i]=e,a._cacheIndex=r,t[r]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new Yde(new Float32Array(2),new Float32Array(2),1,Gft),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,a=t[i];e.__cacheIndex=i,t[i]=e,a.__cacheIndex=r,t[r]=a}clipAction(e,t,r){const i=t||this._root,a=i.uuid;let s=typeof e=="string"?xv.findByName(i,e):e;const o=s!==null?s.uuid:e,l=this._actionsByClip[o];let u=null;if(r===void 0&&(s!==null?r=s.blendMode:r=v9),l!==void 0){const d=l.actionByRoot[a];if(d!==void 0&&d.blendMode===r)return d;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const c=new $ft(this,s,t,r);return this._bindAction(c,u),this._addInactiveAction(c,o,a),c}existingAction(e,t){const r=t||this._root,i=r.uuid,a=typeof e=="string"?xv.findByName(r,e):e,s=a?a.uuid:e,o=this._actionsByClip[s];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,a=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,a,s);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const s=a.knownActions;for(let o=0,l=s.length;o!==l;++o){const u=s[o];this._deactivateAction(u);const c=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=c,t[c]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const s in r){const o=r[s].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[t];if(a!==void 0)for(const s in a){const o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}let Wft=class{constructor(e,t,r=0,i=1/0){this.ray=new PI(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new y9,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return WO(e,this,r,t),r.sort(pY),r}intersectObjects(e,t=!0,r=[]){for(let i=0,a=e.length;i<a;i++)WO(e[i],this,r,t);return r.sort(pY),r}};function pY(n,e){return n.distance-e.distance}function WO(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let a=0,s=i.length;a<s;a++)WO(i[a],e,t,!0)}}let mY=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(cs(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};class qft extends Sv{constructor(e=10,t=10,r=4473924,i=8947848){r=new Un(r),i=new Un(i);const a=t/2,s=e/t,o=e/2,l=[],u=[];for(let f=0,h=0,p=-o;f<=t;f++,p+=s){l.push(-o,0,p,o,0,p),l.push(p,0,-o,p,0,o);const m=f===a?r:i;m.toArray(u,h),h+=3,m.toArray(u,h),h+=3,m.toArray(u,h),h+=3,m.toArray(u,h),h+=3}const c=new pi;c.setAttribute("position",new Kn(l,3)),c.setAttribute("color",new Kn(u,3));const d=new Bc({vertexColors:!0,toneMapped:!1});super(c,d),this.type="GridHelper"}}class jft extends Sv{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new pi;i.setAttribute("position",new Kn(t,3)),i.setAttribute("color",new Kn(r,3));const a=new Bc({vertexColors:!0,toneMapped:!1});super(i,a),this.type="AxesHelper"}setColors(e,t,r){const i=new Un,a=this.geometry.attributes.color.array;return i.set(e),i.toArray(a,0),i.toArray(a,3),i.set(t),i.toArray(a,6),i.toArray(a,9),i.set(r),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:h9}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=h9);const vY={type:"change"},Rk={type:"start"},gY={type:"end"};let Kft=class extends fm{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new it,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Dg.ROTATE,MIDDLE:Dg.DOLLY,RIGHT:Dg.PAN},this.touches={ONE:Pg.ROTATE,TWO:Pg.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(De){De.addEventListener("keydown",ge),this._domElementKeyEvents=De},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(vY),r.update(),a=i.NONE},this.update=function(){const De=new it,Tt=new qs().setFromUnitVectors(e.up,new it(0,1,0)),ot=Tt.clone().invert(),G=new it,_e=new qs,ve=2*Math.PI;return function(){const we=r.object.position;De.copy(we).sub(r.target),De.applyQuaternion(Tt),o.setFromVector3(De),r.autoRotate&&a===i.NONE&&C(A()),r.enableDamping?(o.theta+=l.theta*r.dampingFactor,o.phi+=l.phi*r.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let Ie=r.minAzimuthAngle,wt=r.maxAzimuthAngle;return isFinite(Ie)&&isFinite(wt)&&(Ie<-Math.PI?Ie+=ve:Ie>Math.PI&&(Ie-=ve),wt<-Math.PI?wt+=ve:wt>Math.PI&&(wt-=ve),Ie<=wt?o.theta=Math.max(Ie,Math.min(wt,o.theta)):o.theta=o.theta>(Ie+wt)/2?Math.max(Ie,o.theta):Math.min(wt,o.theta)),o.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=u,o.radius=Math.max(r.minDistance,Math.min(r.maxDistance,o.radius)),r.enableDamping===!0?r.target.addScaledVector(c,r.dampingFactor):r.target.add(c),De.setFromSpherical(o),De.applyQuaternion(ot),we.copy(r.target).add(De),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,c.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),u=1,d||G.distanceToSquared(r.object.position)>s||8*(1-_e.dot(r.object.quaternion))>s?(r.dispatchEvent(vY),G.copy(r.object.position),_e.copy(r.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",ye),r.domElement.removeEventListener("pointerdown",le),r.domElement.removeEventListener("pointercancel",Ze),r.domElement.removeEventListener("wheel",ut),r.domElement.removeEventListener("pointermove",Ke),r.domElement.removeEventListener("pointerup",Ue),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ge)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=i.NONE;const s=1e-6,o=new mY,l=new mY;let u=1;const c=new it;let d=!1;const f=new sn,h=new sn,p=new sn,m=new sn,v=new sn,g=new sn,y=new sn,_=new sn,b=new sn,x=[],w={};function A(){return 2*Math.PI/60/60*r.autoRotateSpeed}function T(){return Math.pow(.95,r.zoomSpeed)}function C(De){l.theta-=De}function E(De){l.phi-=De}const I=function(){const De=new it;return function(ot,G){De.setFromMatrixColumn(G,0),De.multiplyScalar(-ot),c.add(De)}}(),P=function(){const De=new it;return function(ot,G){r.screenSpacePanning===!0?De.setFromMatrixColumn(G,1):(De.setFromMatrixColumn(G,0),De.crossVectors(r.object.up,De)),De.multiplyScalar(ot),c.add(De)}}(),L=function(){const De=new it;return function(ot,G){const _e=r.domElement;if(r.object.isPerspectiveCamera){const ve=r.object.position;De.copy(ve).sub(r.target);let Le=De.length();Le*=Math.tan(r.object.fov/2*Math.PI/180),I(2*ot*Le/_e.clientHeight,r.object.matrix),P(2*G*Le/_e.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(I(ot*(r.object.right-r.object.left)/r.object.zoom/_e.clientWidth,r.object.matrix),P(G*(r.object.top-r.object.bottom)/r.object.zoom/_e.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function N(De){r.object.isPerspectiveCamera?u/=De:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*De)),r.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function F(De){r.object.isPerspectiveCamera?u*=De:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/De)),r.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function k(De){f.set(De.clientX,De.clientY)}function H(De){y.set(De.clientX,De.clientY)}function U(De){m.set(De.clientX,De.clientY)}function B(De){h.set(De.clientX,De.clientY),p.subVectors(h,f).multiplyScalar(r.rotateSpeed);const Tt=r.domElement;C(2*Math.PI*p.x/Tt.clientHeight),E(2*Math.PI*p.y/Tt.clientHeight),f.copy(h),r.update()}function $(De){_.set(De.clientX,De.clientY),b.subVectors(_,y),b.y>0?N(T()):b.y<0&&F(T()),y.copy(_),r.update()}function ee(De){v.set(De.clientX,De.clientY),g.subVectors(v,m).multiplyScalar(r.panSpeed),L(g.x,g.y),m.copy(v),r.update()}function re(De){De.deltaY<0?F(T()):De.deltaY>0&&N(T()),r.update()}function ne(De){let Tt=!1;switch(De.code){case r.keys.UP:L(0,r.keyPanSpeed),Tt=!0;break;case r.keys.BOTTOM:L(0,-r.keyPanSpeed),Tt=!0;break;case r.keys.LEFT:L(r.keyPanSpeed,0),Tt=!0;break;case r.keys.RIGHT:L(-r.keyPanSpeed,0),Tt=!0;break}Tt&&(De.preventDefault(),r.update())}function ae(){if(x.length===1)f.set(x[0].pageX,x[0].pageY);else{const De=.5*(x[0].pageX+x[1].pageX),Tt=.5*(x[0].pageY+x[1].pageY);f.set(De,Tt)}}function pe(){if(x.length===1)m.set(x[0].pageX,x[0].pageY);else{const De=.5*(x[0].pageX+x[1].pageX),Tt=.5*(x[0].pageY+x[1].pageY);m.set(De,Tt)}}function de(){const De=x[0].pageX-x[1].pageX,Tt=x[0].pageY-x[1].pageY,ot=Math.sqrt(De*De+Tt*Tt);y.set(0,ot)}function me(){r.enableZoom&&de(),r.enablePan&&pe()}function ke(){r.enableZoom&&de(),r.enableRotate&&ae()}function Be(De){if(x.length==1)h.set(De.pageX,De.pageY);else{const ot=It(De),G=.5*(De.pageX+ot.x),_e=.5*(De.pageY+ot.y);h.set(G,_e)}p.subVectors(h,f).multiplyScalar(r.rotateSpeed);const Tt=r.domElement;C(2*Math.PI*p.x/Tt.clientHeight),E(2*Math.PI*p.y/Tt.clientHeight),f.copy(h)}function Xe(De){if(x.length===1)v.set(De.pageX,De.pageY);else{const Tt=It(De),ot=.5*(De.pageX+Tt.x),G=.5*(De.pageY+Tt.y);v.set(ot,G)}g.subVectors(v,m).multiplyScalar(r.panSpeed),L(g.x,g.y),m.copy(v)}function Ye(De){const Tt=It(De),ot=De.pageX-Tt.x,G=De.pageY-Tt.y,_e=Math.sqrt(ot*ot+G*G);_.set(0,_e),b.set(0,Math.pow(_.y/y.y,r.zoomSpeed)),N(b.y),y.copy(_)}function Y(De){r.enableZoom&&Ye(De),r.enablePan&&Xe(De)}function he(De){r.enableZoom&&Ye(De),r.enableRotate&&Be(De)}function le(De){r.enabled!==!1&&(x.length===0&&(r.domElement.setPointerCapture(De.pointerId),r.domElement.addEventListener("pointermove",Ke),r.domElement.addEventListener("pointerup",Ue)),Ve(De),De.pointerType==="touch"?q(De):je(De))}function Ke(De){r.enabled!==!1&&(De.pointerType==="touch"?te(De):He(De))}function Ue(De){et(De),x.length===0&&(r.domElement.releasePointerCapture(De.pointerId),r.domElement.removeEventListener("pointermove",Ke),r.domElement.removeEventListener("pointerup",Ue)),r.dispatchEvent(gY),a=i.NONE}function Ze(De){et(De)}function je(De){let Tt;switch(De.button){case 0:Tt=r.mouseButtons.LEFT;break;case 1:Tt=r.mouseButtons.MIDDLE;break;case 2:Tt=r.mouseButtons.RIGHT;break;default:Tt=-1}switch(Tt){case Dg.DOLLY:if(r.enableZoom===!1)return;H(De),a=i.DOLLY;break;case Dg.ROTATE:if(De.ctrlKey||De.metaKey||De.shiftKey){if(r.enablePan===!1)return;U(De),a=i.PAN}else{if(r.enableRotate===!1)return;k(De),a=i.ROTATE}break;case Dg.PAN:if(De.ctrlKey||De.metaKey||De.shiftKey){if(r.enableRotate===!1)return;k(De),a=i.ROTATE}else{if(r.enablePan===!1)return;U(De),a=i.PAN}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(Rk)}function He(De){switch(a){case i.ROTATE:if(r.enableRotate===!1)return;B(De);break;case i.DOLLY:if(r.enableZoom===!1)return;$(De);break;case i.PAN:if(r.enablePan===!1)return;ee(De);break}}function ut(De){r.enabled===!1||r.enableZoom===!1||a!==i.NONE||(De.preventDefault(),r.dispatchEvent(Rk),re(De),r.dispatchEvent(gY))}function ge(De){r.enabled===!1||r.enablePan===!1||ne(De)}function q(De){switch(At(De),x.length){case 1:switch(r.touches.ONE){case Pg.ROTATE:if(r.enableRotate===!1)return;ae(),a=i.TOUCH_ROTATE;break;case Pg.PAN:if(r.enablePan===!1)return;pe(),a=i.TOUCH_PAN;break;default:a=i.NONE}break;case 2:switch(r.touches.TWO){case Pg.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;me(),a=i.TOUCH_DOLLY_PAN;break;case Pg.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ke(),a=i.TOUCH_DOLLY_ROTATE;break;default:a=i.NONE}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(Rk)}function te(De){switch(At(De),a){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;Be(De),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;Xe(De),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Y(De),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;he(De),r.update();break;default:a=i.NONE}}function ye(De){r.enabled!==!1&&De.preventDefault()}function Ve(De){x.push(De)}function et(De){delete w[De.pointerId];for(let Tt=0;Tt<x.length;Tt++)if(x[Tt].pointerId==De.pointerId){x.splice(Tt,1);return}}function At(De){let Tt=w[De.pointerId];Tt===void 0&&(Tt=new sn,w[De.pointerId]=Tt),Tt.set(De.pageX,De.pageY)}function It(De){const Tt=De.pointerId===x[0].pointerId?x[1]:x[0];return w[Tt.pointerId]}r.domElement.addEventListener("contextmenu",ye),r.domElement.addEventListener("pointerdown",le),r.domElement.addEventListener("pointercancel",Ze),r.domElement.addEventListener("wheel",ut,{passive:!1}),this.update()}};var Ax=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(c){c.preventDefault(),r(++n%e.children.length)},!1);function t(c){return e.appendChild(c.dom),c}function r(c){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===c?"block":"none";n=c}var i=(performance||Date).now(),a=i,s=0,o=t(new Ax.Panel("FPS","#0ff","#002")),l=t(new Ax.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new Ax.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:e,addPanel:t,showPanel:r,begin:function(){i=(performance||Date).now()},end:function(){s++;var c=(performance||Date).now();if(l.update(c-i,200),c>=a+1e3&&(o.update(s*1e3/(c-a),100),a=c,s=0,u)){var d=performance.memory;u.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){i=this.end()},domElement:e,setMode:r}};Ax.Panel=function(n,e,t){var r=1/0,i=0,a=Math.round,s=a(window.devicePixelRatio||1),o=80*s,l=48*s,u=3*s,c=2*s,d=3*s,f=15*s,h=74*s,p=30*s,m=document.createElement("canvas");m.width=o,m.height=l,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*s+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=t,v.fillRect(0,0,o,l),v.fillStyle=e,v.fillText(n,u,c),v.fillRect(d,f,h,p),v.fillStyle=t,v.globalAlpha=.9,v.fillRect(d,f,h,p),{dom:m,update:function(g,y){r=Math.min(r,g),i=Math.max(i,g),v.fillStyle=t,v.globalAlpha=1,v.fillRect(0,0,o,f),v.fillStyle=e,v.fillText(a(g)+" "+n+" ("+a(r)+"-"+a(i)+")",u,c),v.drawImage(m,d+s,f,h-s,p,d,f,h-s,p),v.fillRect(d+h-s,f,s,p),v.fillStyle=t,v.globalAlpha=.9,v.fillRect(d+h-s,f,s,a((1-g/y)*p))}}};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var yY={},qO=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},tfe=function(n){return new Worker(n)};try{URL.revokeObjectURL(qO(""))}catch{qO=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},tfe=function(e){return new Worker(e,{type:"module"})}}var Xft=function(n,e,t,r,i){var a=tfe(yY[e]||(yY[e]=qO(n)));return a.onerror=function(s){return i(s.error,null)},a.onmessage=function(s){return i(null,s.data)},a.postMessage(t,r),a},gi=Uint8Array,Es=Uint16Array,nh=Uint32Array,ib=new gi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ab=new gi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Z2=new gi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),nfe=function(n,e){for(var t=new Es(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new nh(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return[t,i]},rfe=nfe(ib,2),F9=rfe[0],z3=rfe[1];F9[28]=258,z3[258]=28;var ife=nfe(ab,0),afe=ife[0],jO=ife[1],J2=new Es(32768);for(var ha=0;ha<32768;++ha){var Gh=(ha&43690)>>>1|(ha&21845)<<1;Gh=(Gh&52428)>>>2|(Gh&13107)<<2,Gh=(Gh&61680)>>>4|(Gh&3855)<<4,J2[ha]=((Gh&65280)>>>8|(Gh&255)<<8)>>>1}var Vu=function(n,e,t){for(var r=n.length,i=0,a=new Es(e);i<r;++i)++a[n[i]-1];var s=new Es(e);for(i=0;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(t){o=new Es(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],d=s[n[i]-1]++<<c,f=d|(1<<c)-1;d<=f;++d)o[J2[d]>>>l]=u}else for(o=new Es(r),i=0;i<r;++i)n[i]&&(o[i]=J2[s[n[i]-1]++]>>>15-n[i]);return o},rh=new gi(288);for(var ha=0;ha<144;++ha)rh[ha]=8;for(var ha=144;ha<256;++ha)rh[ha]=9;for(var ha=256;ha<280;++ha)rh[ha]=7;for(var ha=280;ha<288;++ha)rh[ha]=8;var u_=new gi(32);for(var ha=0;ha<32;++ha)u_[ha]=5;var sfe=Vu(rh,9,0),ofe=Vu(rh,9,1),lfe=Vu(u_,5,0),ufe=Vu(u_,5,1),VE=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},_u=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},$E=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Kw=function(n){return(n/8|0)+(n&7&&1)},$u=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Es?Es:n instanceof nh?nh:gi)(t-e);return r.set(n.subarray(e,t)),r},Xw=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new gi(0);var i=!e||t,a=!t||t.i;t||(t={}),e||(e=new gi(r*3));var s=function(de){var me=e.length;if(de>me){var ke=new gi(Math.max(me*2,de));ke.set(e),e=ke}},o=t.f||0,l=t.p||0,u=t.b||0,c=t.l,d=t.d,f=t.m,h=t.n,p=r*8;do{if(!c){t.f=o=_u(n,l,1);var m=_u(n,l+1,3);if(l+=3,m)if(m==1)c=ofe,d=ufe,f=9,h=5;else if(m==2){var _=_u(n,l,31)+257,b=_u(n,l+10,15)+4,x=_+_u(n,l+5,31)+1;l+=14;for(var w=new gi(x),A=new gi(19),T=0;T<b;++T)A[Z2[T]]=_u(n,l+T*3,7);l+=b*3;for(var C=VE(A),E=(1<<C)-1,I=Vu(A,C,1),T=0;T<x;){var P=I[_u(n,l,E)];l+=P&15;var v=P>>>4;if(v<16)w[T++]=v;else{var L=0,N=0;for(v==16?(N=3+_u(n,l,3),l+=2,L=w[T-1]):v==17?(N=3+_u(n,l,7),l+=3):v==18&&(N=11+_u(n,l,127),l+=7);N--;)w[T++]=L}}var F=w.subarray(0,_),k=w.subarray(_);f=VE(F),h=VE(k),c=Vu(F,f,1),d=Vu(k,h,1)}else throw"invalid block type";else{var v=Kw(l)+4,g=n[v-4]|n[v-3]<<8,y=v+g;if(y>r){if(a)throw"unexpected EOF";break}i&&s(u+g),e.set(n.subarray(v,y),u),t.b=u+=g,t.p=l=y*8;continue}if(l>p){if(a)throw"unexpected EOF";break}}i&&s(u+131072);for(var H=(1<<f)-1,U=(1<<h)-1,B=l;;B=l){var L=c[$E(n,l)&H],$=L>>>4;if(l+=L&15,l>p){if(a)throw"unexpected EOF";break}if(!L)throw"invalid length/literal";if($<256)e[u++]=$;else if($==256){B=l,c=null;break}else{var ee=$-254;if($>264){var T=$-257,re=ib[T];ee=_u(n,l,(1<<re)-1)+F9[T],l+=re}var ne=d[$E(n,l)&U],ae=ne>>>4;if(!ne)throw"invalid distance";l+=ne&15;var k=afe[ae];if(ae>3){var re=ab[ae];k+=$E(n,l)&(1<<re)-1,l+=re}if(l>p){if(a)throw"unexpected EOF";break}i&&s(u+131072);for(var pe=u+ee;u<pe;u+=4)e[u]=e[u-k],e[u+1]=e[u+1-k],e[u+2]=e[u+2-k],e[u+3]=e[u+3-k];u=pe}}t.l=c,t.p=B,t.b=u,c&&(o=1,t.m=f,t.d=d,t.n=h)}while(!o);return u==e.length?e:$u(e,0,u)},nd=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>>8},Cy=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},GE=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,a=t.slice();if(!i)return[Rf,0];if(i==1){var s=new gi(t[0].s+1);return s[t[0].s]=1,[s,1]}t.sort(function(x,w){return x.f-w.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],u=0,c=1,d=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};c!=i-1;)o=t[t[u].f<t[d].f?u++:d++],l=t[u!=c&&t[u].f<t[d].f?u++:d++],t[c++]={s:-1,f:o.f+l.f,l:o,r:l};for(var f=a[0].s,r=1;r<i;++r)a[r].s>f&&(f=a[r].s);var h=new Es(f+1),p=H3(t[c-1],h,0);if(p>e){var r=0,m=0,v=p-e,g=1<<v;for(a.sort(function(w,A){return h[A.s]-h[w.s]||w.f-A.f});r<i;++r){var y=a[r].s;if(h[y]>e)m+=g-(1<<p-h[y]),h[y]=e;else break}for(m>>>=v;m>0;){var _=a[r].s;h[_]<e?m-=1<<e-h[_]++-1:++r}for(;r>=0&&m;--r){var b=a[r].s;h[b]==e&&(--h[b],++m)}p=e}return[new gi(h),p]},H3=function(n,e,t){return n.s==-1?Math.max(H3(n.l,e,t+1),H3(n.r,e,t+1)):e[n.s]=t},KO=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Es(++e),r=0,i=n[0],a=1,s=function(l){t[r++]=l},o=1;o<=e;++o)if(n[o]==i&&o!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=n[o]}return[t.subarray(0,r),e]},Ay=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Ex=function(n,e,t){var r=t.length,i=Kw(e+2);n[i]=r&255,n[i+1]=r>>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var a=0;a<r;++a)n[i+a+4]=t[a];return(i+4+r)*8},XO=function(n,e,t,r,i,a,s,o,l,u,c){nd(e,c++,t),++i[256];for(var d=GE(i,15),f=d[0],h=d[1],p=GE(a,15),m=p[0],v=p[1],g=KO(f),y=g[0],_=g[1],b=KO(m),x=b[0],w=b[1],A=new Es(19),T=0;T<y.length;++T)A[y[T]&31]++;for(var T=0;T<x.length;++T)A[x[T]&31]++;for(var C=GE(A,7),E=C[0],I=C[1],P=19;P>4&&!E[Z2[P-1]];--P);var L=u+5<<3,N=Ay(i,rh)+Ay(a,u_)+s,F=Ay(i,f)+Ay(a,m)+s+14+3*P+Ay(A,E)+(2*A[16]+3*A[17]+7*A[18]);if(L<=N&&L<=F)return Ex(e,c,n.subarray(l,l+u));var k,H,U,B;if(nd(e,c,1+(F<N)),c+=2,F<N){k=Vu(f,h,0),H=f,U=Vu(m,v,0),B=m;var $=Vu(E,I,0);nd(e,c,_-257),nd(e,c+5,w-1),nd(e,c+10,P-4),c+=14;for(var T=0;T<P;++T)nd(e,c+3*T,E[Z2[T]]);c+=3*P;for(var ee=[y,x],re=0;re<2;++re)for(var ne=ee[re],T=0;T<ne.length;++T){var ae=ne[T]&31;nd(e,c,$[ae]),c+=E[ae],ae>15&&(nd(e,c,ne[T]>>>5&127),c+=ne[T]>>>12)}}else k=sfe,H=rh,U=lfe,B=u_;for(var T=0;T<o;++T)if(r[T]>255){var ae=r[T]>>>18&31;Cy(e,c,k[ae+257]),c+=H[ae+257],ae>7&&(nd(e,c,r[T]>>>23&31),c+=ib[ae]);var pe=r[T]&31;Cy(e,c,U[pe]),c+=B[pe],pe>3&&(Cy(e,c,r[T]>>>5&8191),c+=ab[pe])}else Cy(e,c,k[r[T]]),c+=H[r[T]];return Cy(e,c,k[256]),c+H[256]},cfe=new nh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Rf=new gi(0),dfe=function(n,e,t,r,i,a){var s=n.length,o=new gi(r+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(r,o.length-i),u=0;if(!e||s<8)for(var c=0;c<=s;c+=65535){var d=c+65535;d<s?u=Ex(l,u,n.subarray(c,d)):(l[c]=a,u=Ex(l,u,n.subarray(c,s)))}else{for(var f=cfe[e-1],h=f>>>13,p=f&8191,m=(1<<t)-1,v=new Es(32768),g=new Es(m+1),y=Math.ceil(t/3),_=2*y,b=function(le){return(n[le]^n[le+1]<<y^n[le+2]<<_)&m},x=new nh(25e3),w=new Es(288),A=new Es(32),T=0,C=0,c=0,E=0,I=0,P=0;c<s;++c){var L=b(c),N=c&32767,F=g[L];if(v[N]=F,g[L]=N,I<=c){var k=s-c;if((T>7e3||E>24576)&&k>423){u=XO(n,l,0,x,w,A,C,E,P,c-P,u),E=T=C=0,P=c;for(var H=0;H<286;++H)w[H]=0;for(var H=0;H<30;++H)A[H]=0}var U=2,B=0,$=p,ee=N-F&32767;if(k>2&&L==b(c-ee))for(var re=Math.min(h,k)-1,ne=Math.min(32767,c),ae=Math.min(258,k);ee<=ne&&--$&&N!=F;){if(n[c+U]==n[c+U-ee]){for(var pe=0;pe<ae&&n[c+pe]==n[c+pe-ee];++pe);if(pe>U){if(U=pe,B=ee,pe>re)break;for(var de=Math.min(ee,pe-2),me=0,H=0;H<de;++H){var ke=c-ee+H+32768&32767,Be=v[ke],Xe=ke-Be+32768&32767;Xe>me&&(me=Xe,F=ke)}}}N=F,F=v[N],ee+=N-F+32768&32767}if(B){x[E++]=268435456|z3[U]<<18|jO[B];var Ye=z3[U]&31,Y=jO[B]&31;C+=ib[Ye]+ab[Y],++w[257+Ye],++A[Y],I=c+U,++T}else x[E++]=n[c],++w[n[c]]}}u=XO(n,l,a,x,w,A,C,E,P,c-P,u),!a&&u&7&&(u=Ex(l,u+1,Rf))}return $u(o,0,r+Kw(u)+i)},ffe=function(){for(var n=new nh(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),sb=function(){var n=-1;return{p:function(e){for(var t=n,r=0;r<e.length;++r)t=ffe[t&255^e[r]]^t>>>8;n=t},d:function(){return~n}}},U9=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,a=t.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|n>>>8<<16|(e&255)<<8|e>>>8}}},Fv=function(n,e,t,r,i){return dfe(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,r,!i)},Yw=function(n,e){var t={};for(var r in n)t[r]=n[r];for(var r in e)t[r]=e[r];return t},_Y=function(n,e,t){for(var r=n(),i=n.toString(),a=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/ /g,"").split(","),s=0;s<r.length;++s){var o=r[s],l=a[s];if(typeof o=="function"){e+=";"+l+"=";var u=o.toString();if(o.prototype)if(u.indexOf("[native code]")!=-1){var c=u.indexOf(" ",8)+1;e+=u.slice(c,u.indexOf("(",c))}else{e+=u;for(var d in o.prototype)e+=";"+l+".prototype."+d+"="+o.prototype[d].toString()}else e+=u}else t[l]=o}return[e,t]},mA=[],Yft=function(n){var e=[];for(var t in n)(n[t]instanceof gi||n[t]instanceof Es||n[t]instanceof nh)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},hfe=function(n,e,t,r){var i;if(!mA[t]){for(var a="",s={},o=n.length-1,l=0;l<o;++l)i=_Y(n[l],a,s),a=i[0],s=i[1];mA[t]=_Y(n[o],a,s)}var u=Yw({},mA[t][1]);return Xft(mA[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,u,Yft(u),r)},ob=function(){return[gi,Es,nh,ib,ab,Z2,F9,afe,ofe,ufe,J2,Vu,VE,_u,$E,Kw,$u,Xw,db,pm,z9]},lb=function(){return[gi,Es,nh,ib,ab,Z2,z3,jO,sfe,rh,lfe,u_,J2,cfe,Rf,Vu,nd,Cy,GE,H3,KO,Ay,Ex,XO,Kw,$u,dfe,Fv,Qw,pm]},pfe=function(){return[H9,$9,Ui,sb,ffe]},mfe=function(){return[V9,yfe]},vfe=function(){return[G9,Ui,U9]},gfe=function(){return[_fe]},pm=function(n){return postMessage(n,[n.buffer])},z9=function(n){return n&&n.size&&new gi(n.size)},ub=function(n,e,t,r,i,a){var s=hfe(t,r,i,function(o,l){s.terminate(),a(o,l)});return s.postMessage([n,e],e.consume?[n.buffer]:[]),function(){s.terminate()}},Zu=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},cb=function(n,e,t,r,i){var a,s=hfe(n,r,i,function(o,l){o?(s.terminate(),e.ondata.call(e,o)):(l[1]&&s.terminate(),e.ondata.call(e,o,l[0],l[1]))});s.postMessage(t),e.push=function(o,l){if(a)throw"stream finished";if(!e.ondata)throw"no stream handler";s.postMessage([o,a=l],[o.buffer])},e.terminate=function(){s.terminate()}},Go=function(n,e){return n[e]|n[e+1]<<8},$a=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},kk=function(n,e){return $a(n,e)+$a(n,e+4)*4294967296},Ui=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},H9=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&Ui(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var r=0;r<=t.length;++r)n[r+10]=t.charCodeAt(r)}},V9=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw"invalid gzip data";var e=n[3],t=10;e&4&&(t+=n[10]|(n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},yfe=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},$9=function(n){return 10+(n.filename&&n.filename.length+1||0)},G9=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)},_fe=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function W9(n,e){return!e&&typeof n=="function"&&(e=n,n={}),this.ondata=e,n}var Fd=function(){function n(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(Fv(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}(),bfe=function(){function n(e,t){cb([lb,function(){return[Zu,Fd]}],this,W9.call(this,e,t),function(r){var i=new Fd(r.data);onmessage=Zu(i)},6)}return n}();function Sfe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return ub(n,e,[lb],function(r){return pm(Qw(r.data[0],r.data[1]))},0,t)}function Qw(n,e){return Fv(n,e||{},0,0)}var xl=function(){function n(e){this.s={},this.p=new gi(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,r=new gi(t+e.length);r.set(this.p),r.set(e,t),this.p=r},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,r=Xw(this.p,this.o,this.s);this.ondata($u(r,t,this.s.b),this.d),this.o=$u(r,this.s.b-32768),this.s.b=this.o.length,this.p=$u(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}(),q9=function(){function n(e){this.ondata=e,cb([ob,function(){return[Zu,xl]}],this,0,function(){var t=new xl;onmessage=Zu(t)},7)}return n}();function j9(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return ub(n,e,[ob],function(r){return pm(db(r.data[0],z9(r.data[1])))},1,t)}function db(n,e){return Xw(n,e)}var V3=function(){function n(e,t){this.c=sb(),this.l=0,this.v=1,Fd.call(this,e,t)}return n.prototype.push=function(e,t){Fd.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var r=Fv(e,this.o,this.v&&$9(this.o),t&&8,!t);this.v&&(H9(r,this.o),this.v=0),t&&(Ui(r,r.length-8,this.c.d()),Ui(r,r.length-4,this.l)),this.ondata(r,t)},n}(),bY=function(){function n(e,t){cb([lb,pfe,function(){return[Zu,Fd,V3]}],this,W9.call(this,e,t),function(r){var i=new V3(r.data);onmessage=Zu(i)},8)}return n}();function SY(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return ub(n,e,[lb,pfe,function(){return[$3]}],function(r){return pm($3(r.data[0],r.data[1]))},2,t)}function $3(n,e){e||(e={});var t=sb(),r=n.length;t.p(n);var i=Fv(n,e,$9(e),8),a=i.length;return H9(i,e),Ui(i,a-8,t.d()),Ui(i,a-4,r),i}var G3=function(){function n(e){this.v=1,xl.call(this,e)}return n.prototype.push=function(e,t){if(xl.prototype.e.call(this,e),this.v){var r=this.p.length>3?V9(this.p):4;if(r>=this.p.length&&!t)return;this.p=this.p.subarray(r),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}xl.prototype.c.call(this,t)},n}(),xfe=function(){function n(e){this.ondata=e,cb([ob,mfe,function(){return[Zu,xl,G3]}],this,0,function(){var t=new G3;onmessage=Zu(t)},9)}return n}();function wfe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return ub(n,e,[ob,mfe,function(){return[W3]}],function(r){return pm(W3(r.data[0]))},3,t)}function W3(n,e){return Xw(n.subarray(V9(n),-8),e||new gi(yfe(n)))}var YO=function(){function n(e,t){this.c=U9(),this.v=1,Fd.call(this,e,t)}return n.prototype.push=function(e,t){Fd.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var r=Fv(e,this.o,this.v&&2,t&&4,!t);this.v&&(G9(r,this.o),this.v=0),t&&Ui(r,r.length-4,this.c.d()),this.ondata(r,t)},n}(),Qft=function(){function n(e,t){cb([lb,vfe,function(){return[Zu,Fd,YO]}],this,W9.call(this,e,t),function(r){var i=new YO(r.data);onmessage=Zu(i)},10)}return n}();function Zft(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return ub(n,e,[lb,vfe,function(){return[QO]}],function(r){return pm(QO(r.data[0],r.data[1]))},4,t)}function QO(n,e){e||(e={});var t=U9();t.p(n);var r=Fv(n,e,2,4);return G9(r,e),Ui(r,r.length-4,t.d()),r}var q3=function(){function n(e){this.v=1,xl.call(this,e)}return n.prototype.push=function(e,t){if(xl.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}xl.prototype.c.call(this,t)},n}(),Tfe=function(){function n(e){this.ondata=e,cb([ob,gfe,function(){return[Zu,xl,q3]}],this,0,function(){var t=new q3;onmessage=Zu(t)},11)}return n}();function Cfe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return ub(n,e,[ob,gfe,function(){return[ew]}],function(r){return pm(ew(r.data[0],z9(r.data[1])))},5,t)}function ew(n,e){return Xw((_fe(n),n.subarray(2,-4)),e)}var Afe=function(){function n(e){this.G=G3,this.I=xl,this.Z=q3,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var r=new gi(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var i=this,a=function(){i.ondata.apply(i,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(a):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(a):new this.Z(a),this.s.push(this.p,t),this.p=null}}},n}(),Jft=function(){function n(e){this.G=xfe,this.I=q9,this.Z=Tfe,this.ondata=e}return n.prototype.push=function(e,t){Afe.prototype.push.call(this,e,t)},n}();function eht(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return n[0]==31&&n[1]==139&&n[2]==8?wfe(n,e,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?j9(n,e,t):Cfe(n,e,t)}function tht(n,e){return n[0]==31&&n[1]==139&&n[2]==8?W3(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?db(n,e):ew(n,e)}var K9=function(n,e,t,r){for(var i in n){var a=n[i],s=e+i;a instanceof gi?t[s]=[a,r]:Array.isArray(a)?t[s]=[a[0],Yw(r,a[1])]:K9(a,s+"/",t,r)}},xY=typeof TextEncoder<"u"&&new TextEncoder,ZO=typeof TextDecoder<"u"&&new TextDecoder,Efe=0;try{ZO.decode(Rf,{stream:!0}),Efe=1}catch{}var Mfe=function(n){for(var e="",t=0;;){var r=n[t++],i=(r>127)+(r>223)+(r>239);if(t+i>n.length)return[e,$u(n,t-1)];i?i==3?(r=((r&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?e+=String.fromCharCode((r&31)<<6|n[t++]&63):e+=String.fromCharCode((r&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(r)}},nht=function(){function n(e){this.ondata=e,Efe?this.t=new TextDecoder:this.p=Rf}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new gi(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var i=Mfe(r),a=i[0],s=i[1];if(t){if(s.length)throw"invalid utf-8 data";this.p=null}else this.p=s;this.ondata(a,t)},n}(),rht=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(rm(e),this.d=t||!1)},n}();function rm(n,e){if(e){for(var t=new gi(n.length),r=0;r<n.length;++r)t[r]=n.charCodeAt(r);return t}if(xY)return xY.encode(n);for(var i=n.length,a=new gi(n.length+(n.length>>1)),s=0,o=function(c){a[s++]=c},r=0;r<i;++r){if(s+5>a.length){var l=new gi(s+8+(i-r<<1));l.set(a),a=l}var u=n.charCodeAt(r);u<128||e?o(u):u<2048?(o(192|u>>6),o(128|u&63)):u>55295&&u<57344?(u=65536+(u&1047552)|n.charCodeAt(++r)&1023,o(240|u>>18),o(128|u>>12&63),o(128|u>>6&63),o(128|u&63)):(o(224|u>>12),o(128|u>>6&63),o(128|u&63))}return $u(a,0,s)}function X9(n,e){if(e){for(var t="",r=0;r<n.length;r+=16384)t+=String.fromCharCode.apply(null,n.subarray(r,r+16384));return t}else{if(ZO)return ZO.decode(n);var i=Mfe(n),a=i[0],s=i[1];if(s.length)throw"invalid utf-8 data";return a}}var Ife=function(n){return n==1?3:n<6?2:n==9?1:0},Dfe=function(n,e){return e+30+Go(n,e+26)+Go(n,e+28)},Pfe=function(n,e,t){var r=Go(n,e+28),i=X9(n.subarray(e+46,e+46+r),!(Go(n,e+8)&2048)),a=e+46+r,s=$a(n,e+20),o=t&&s==4294967295?Rfe(n,a):[s,$a(n,e+24),$a(n,e+42)],l=o[0],u=o[1],c=o[2];return[Go(n,e+10),l,u,i,a+Go(n,e+30)+Go(n,e+32),c]},Rfe=function(n,e){for(;Go(n,e)!=1;e+=4+Go(n,e+2));return[kk(n,e+12),kk(n,e+4),kk(n,e+20)]},Mp=function(n){var e=0;if(n)for(var t in n){var r=n[t].length;if(r>65535)throw"extra field too long";e+=r+4}return e},c_=function(n,e,t,r,i,a,s,o){var l=r.length,u=t.extra,c=o&&o.length,d=Mp(u);Ui(n,e,s!=null?33639248:67324752),e+=4,s!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(a==null&&8),n[e++]=i&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var f=new Date(t.mtime==null?Date.now():t.mtime),h=f.getFullYear()-1980;if(h<0||h>119)throw"date not in range 1980-2099";if(Ui(n,e,h<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),e+=4,a!=null&&(Ui(n,e,t.crc),Ui(n,e+4,a),Ui(n,e+8,t.size)),Ui(n,e+12,l),Ui(n,e+14,d),e+=16,s!=null&&(Ui(n,e,c),Ui(n,e+6,t.attrs),Ui(n,e+10,s),e+=14),n.set(r,e),e+=l,d)for(var p in u){var m=u[p],v=m.length;Ui(n,e,+p),Ui(n,e+2,v),n.set(m,e+4),e+=4+v}return c&&(n.set(o,e),e+=c),e},Y9=function(n,e,t,r,i){Ui(n,e,101010256),Ui(n,e+8,t),Ui(n,e+10,t),Ui(n,e+12,r),Ui(n,e+16,i)},tw=function(){function n(e){this.filename=e,this.c=sb(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),iht=function(){function n(e,t){var r=this;t||(t={}),tw.call(this,e),this.d=new Fd(t,function(i,a){r.ondata(null,i,a)}),this.compression=8,this.flag=Ife(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(r){this.ondata(r,null,t)}},n.prototype.push=function(e,t){tw.prototype.push.call(this,e,t)},n}(),aht=function(){function n(e,t){var r=this;t||(t={}),tw.call(this,e),this.d=new bfe(t,function(i,a,s){r.ondata(i,a,s)}),this.compression=8,this.flag=Ife(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){tw.prototype.push.call(this,e,t)},n}(),sht=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var r=rm(e.filename),i=r.length,a=e.comment,s=a&&rm(a),o=i!=e.filename.length||s&&a.length!=s.length,l=i+Mp(e.extra)+30;if(i>65535)throw"filename too long";var u=new gi(l);c_(u,0,e,r,o);var c=[u],d=function(){for(var v=0,g=c;v<g.length;v++){var y=g[v];t.ondata(null,y,!1)}c=[]},f=this.d;this.d=0;var h=this.u.length,p=Yw(e,{f:r,u:o,o:s,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),f){var v=t.u[h+1];v?v.r():t.d=1}f=1}}),m=0;e.ondata=function(v,g,y){if(v)t.ondata(v,g,y),t.terminate();else if(m+=g.length,c.push(g),y){var _=new gi(16);Ui(_,0,134695760),Ui(_,4,e.crc),Ui(_,8,m),Ui(_,12,e.size),c.push(_),p.c=m,p.b=l+m+16,p.crc=e.crc,p.size=e.size,f&&p.r(),f=1}else f&&d()},this.u.push(p)},n.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,r=0,i=0,a=this.u;i<a.length;i++){var s=a[i];r+=46+s.f.length+Mp(s.extra)+(s.o?s.o.length:0)}for(var o=new gi(r+22),l=0,u=this.u;l<u.length;l++){var s=u[l];c_(o,e,s,s.f,s.u,s.c,t,s.o),e+=46+s.f.length+Mp(s.extra)+(s.o?s.o.length:0),t+=s.b}Y9(o,e,this.u.length,r,t),this.ondata(null,o,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var r=t[e];r.t()}this.d=2},n}();function oht(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var r={};K9(n,"",r,e);var i=Object.keys(r),a=i.length,s=0,o=0,l=a,u=new Array(a),c=[],d=function(){for(var m=0;m<c.length;++m)c[m]()},f=function(){var m=new gi(o+22),v=s,g=o-s;o=0;for(var y=0;y<l;++y){var _=u[y];try{var b=_.c.length;c_(m,o,_,_.f,_.u,b);var x=30+_.f.length+Mp(_.extra),w=o+x;m.set(_.c,w),c_(m,s,_,_.f,_.u,b,o,_.m),s+=16+x+(_.m?_.m.length:0),o=w+b}catch(A){return t(A,null)}}Y9(m,s,u.length,g,v),t(null,m)};a||f();for(var h=function(m){var v=i[m],g=r[v],y=g[0],_=g[1],b=sb(),x=y.length;b.p(y);var w=rm(v),A=w.length,T=_.comment,C=T&&rm(T),E=C&&C.length,I=Mp(_.extra),P=_.level==0?0:8,L=function(N,F){if(N)d(),t(N,null);else{var k=F.length;u[m]=Yw(_,{size:x,crc:b.d(),c:F,f:w,m:C,u:A!=v.length||C&&T.length!=E,compression:P}),s+=30+A+I+k,o+=76+2*(A+I)+(E||0)+k,--a||f()}};if(A>65535&&L("filename too long",null),!P)L(null,y);else if(x<16e4)try{L(null,Qw(y,_))}catch(N){L(N,null)}else c.push(Sfe(y,_,L))},p=0;p<l;++p)h(p);return d}function lht(n,e){e||(e={});var t={},r=[];K9(n,"",t,e);var i=0,a=0;for(var s in t){var o=t[s],l=o[0],u=o[1],c=u.level==0?0:8,d=rm(s),f=d.length,h=u.comment,p=h&&rm(h),m=p&&p.length,v=Mp(u.extra);if(f>65535)throw"filename too long";var g=c?Qw(l,u):l,y=g.length,_=sb();_.p(l),r.push(Yw(u,{size:l.length,crc:_.d(),c:g,f:d,m:p,u:f!=s.length||p&&h.length!=m,o:i,compression:c})),i+=30+f+v+y,a+=76+2*(f+v)+(m||0)+y}for(var b=new gi(a+22),x=i,w=a-i,A=0;A<r.length;++A){var d=r[A];c_(b,d.o,d,d.f,d.u,d.c.length);var T=30+d.f.length+Mp(d.extra);b.set(d.c,d.o+T),c_(b,i,d,d.f,d.u,d.c.length,d.o,d.m),i+=16+T+(d.m?d.m.length:0)}return Y9(b,i,r.length,w,x),b}var kfe=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}(),uht=function(){function n(){var e=this;this.i=new xl(function(t,r){e.ondata(null,t,r)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(r){this.ondata(r,e,t)}},n.compression=8,n}(),cht=function(){function n(e,t){var r=this;t<32e4?this.i=new xl(function(i,a){r.ondata(null,i,a)}):(this.i=new q9(function(i,a,s){r.ondata(i,a,s)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=$u(e,0)),this.i.push(e,t)},n.compression=8,n}(),dht=function(){function n(e){this.onfile=e,this.k=[],this.o={0:kfe},this.p=Rf}return n.prototype.push=function(e,t){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var i=Math.min(this.c,e.length),a=e.subarray(0,i);if(this.c-=i,this.d?this.d.push(a,!this.c):this.k[0].push(a),e=e.subarray(i),e.length)return this.push(e,t)}else{var s=0,o=0,l=void 0,u=void 0;this.p.length?e.length?(u=new gi(this.p.length+e.length),u.set(this.p),u.set(e,this.p.length)):u=this.p:u=e;for(var c=u.length,d=this.c,f=d&&this.d,h=function(){var g,y=$a(u,o);if(y==67324752){s=1,l=o,p.d=null,p.c=0;var _=Go(u,o+6),b=Go(u,o+8),x=_&2048,w=_&8,A=Go(u,o+26),T=Go(u,o+28);if(c>o+30+A+T){var C=[];p.k.unshift(C),s=2;var E=$a(u,o+18),I=$a(u,o+22),P=X9(u.subarray(o+30,o+=30+A),!x);E==4294967295?(g=w?[-2]:Rfe(u,o),E=g[0],I=g[1]):w&&(E=-1),o+=T,p.c=E;var L,N={name:P,compression:b,start:function(){if(!N.ondata)throw"no callback";if(!E)N.ondata(null,Rf,!0);else{var F=r.o[b];if(!F)throw"unknown compression type "+b;L=E<0?new F(P):new F(P,E,I),L.ondata=function(B,$,ee){N.ondata(B,$,ee)};for(var k=0,H=C;k<H.length;k++){var U=H[k];L.push(U,!1)}r.k[0]==C&&r.c?r.d=L:L.push(Rf,!0)}},terminate:function(){L&&L.terminate&&L.terminate()}};E>=0&&(N.size=E,N.originalSize=I),p.onfile(N)}return"break"}else if(d){if(y==134695760)return l=o+=12+(d==-2&&8),s=3,p.c=0,"break";if(y==33639248)return l=o-=4,s=3,p.c=0,"break"}},p=this;o<c-4;++o){var m=h();if(m==="break")break}if(this.p=Rf,d<0){var v=s?u.subarray(0,l-12-(d==-2&&8)-($a(u,l-16)==134695760&&4)):u.subarray(0,o);f?f.push(v,!!s):this.k[+(s==2)].push(v)}if(s&2)return this.push(u.subarray(o),t);this.p=u.subarray(o)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function fht(n,e){if(typeof e!="function")throw"no callback";for(var t=[],r=function(){for(var f=0;f<t.length;++f)t[f]()},i={},a=n.length-22;$a(n,a)!=101010256;--a)if(!a||n.length-a>65558){e("invalid zip file",null);return}var s=Go(n,a+8);s||e(null,{});var o=s,l=$a(n,a+16),u=l==4294967295;if(u){if(a=$a(n,a-12),$a(n,a)!=101075792){e("invalid zip file",null);return}o=s=$a(n,a+32),l=$a(n,a+48)}for(var c=function(f){var h=Pfe(n,l,u),p=h[0],m=h[1],v=h[2],g=h[3],y=h[4],_=h[5],b=Dfe(n,_);l=y;var x=function(A,T){A?(r(),e(A,null)):(i[g]=T,--s||e(null,i))};if(!p)x(null,$u(n,b,b+m));else if(p==8){var w=n.subarray(b,b+m);if(m<32e4)try{x(null,db(w,new gi(v)))}catch(A){x(A,null)}else t.push(j9(w,{size:v},x))}else x("unknown compression type "+p,null)},d=0;d<o;++d)c();return r}function hht(n){for(var e={},t=n.length-22;$a(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw"invalid zip file";var r=Go(n,t+8);if(!r)return{};var i=$a(n,t+16),a=i==4294967295;if(a){if(t=$a(n,t-12),$a(n,t)!=101075792)throw"invalid zip file";r=$a(n,t+32),i=$a(n,t+48)}for(var s=0;s<r;++s){var o=Pfe(n,i,a),l=o[0],u=o[1],c=o[2],d=o[3],f=o[4],h=o[5],p=Dfe(n,h);if(i=f,!l)e[d]=$u(n,p,p+u);else if(l==8)e[d]=db(n.subarray(p,p+u),new gi(c));else throw"unknown compression type "+l}return e}var pht=Object.freeze(Object.defineProperty({__proto__:null,Deflate:Fd,AsyncDeflate:bfe,deflate:Sfe,deflateSync:Qw,Inflate:xl,AsyncInflate:q9,inflate:j9,inflateSync:db,Gzip:V3,AsyncGzip:bY,gzip:SY,gzipSync:$3,Gunzip:G3,AsyncGunzip:xfe,gunzip:wfe,gunzipSync:W3,Zlib:YO,AsyncZlib:Qft,zlib:Zft,zlibSync:QO,Unzlib:q3,AsyncUnzlib:Tfe,unzlib:Cfe,unzlibSync:ew,compress:SY,AsyncCompress:bY,compressSync:$3,Compress:V3,Decompress:Afe,AsyncDecompress:Jft,decompress:eht,decompressSync:tht,DecodeUTF8:nht,EncodeUTF8:rht,strToU8:rm,strFromU8:X9,ZipPassThrough:tw,ZipDeflate:iht,AsyncZipDeflate:aht,Zip:sht,zip:oht,zipSync:lht,UnzipPassThrough:kfe,UnzipInflate:uht,AsyncUnzipInflate:cht,Unzip:dht,unzip:fht,unzipSync:hht},Symbol.toStringTag,{value:"Module"}));function Lfe(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,a=r,s=Math.floor((i+a)/2);for(;e<t[s]||e>=t[s+1];)e<t[s]?a=s:i=s,s=Math.floor((i+a)/2);return s}function mht(n,e,t,r){const i=[],a=[],s=[];i[0]=1;for(let o=1;o<=t;++o){a[o]=e-r[n+1-o],s[o]=r[n+o]-e;let l=0;for(let u=0;u<o;++u){const c=s[u+1],d=a[o-u],f=i[u]/(c+d);i[u]=l+c*f,l=d*f}i[o]=l}return i}function vht(n,e,t,r){const i=Lfe(n,r,e),a=mht(i,r,n,e),s=new ki(0,0,0,0);for(let o=0;o<=n;++o){const l=t[i-n+o],u=a[o],c=l.w*u;s.x+=l.x*c,s.y+=l.y*c,s.z+=l.z*c,s.w+=l.w*u}return s}function ght(n,e,t,r,i){const a=[];for(let d=0;d<=t;++d)a[d]=0;const s=[];for(let d=0;d<=r;++d)s[d]=a.slice(0);const o=[];for(let d=0;d<=t;++d)o[d]=a.slice(0);o[0][0]=1;const l=a.slice(0),u=a.slice(0);for(let d=1;d<=t;++d){l[d]=e-i[n+1-d],u[d]=i[n+d]-e;let f=0;for(let h=0;h<d;++h){const p=u[h+1],m=l[d-h];o[d][h]=p+m;const v=o[h][d-1]/o[d][h];o[h][d]=f+p*v,f=m*v}o[d][d]=f}for(let d=0;d<=t;++d)s[0][d]=o[d][t];for(let d=0;d<=t;++d){let f=0,h=1;const p=[];for(let m=0;m<=t;++m)p[m]=a.slice(0);p[0][0]=1;for(let m=1;m<=r;++m){let v=0;const g=d-m,y=t-m;d>=m&&(p[h][0]=p[f][0]/o[y+1][g],v=p[h][0]*o[g][y]);const _=g>=-1?1:-g,b=d-1<=y?m-1:t-d;for(let w=_;w<=b;++w)p[h][w]=(p[f][w]-p[f][w-1])/o[y+1][g+w],v+=p[h][w]*o[g+w][y];d<=y&&(p[h][m]=-p[f][m-1]/o[y+1][d],v+=p[h][m]*o[d][y]),s[m][d]=v;const x=f;f=h,h=x}}let c=t;for(let d=1;d<=r;++d){for(let f=0;f<=t;++f)s[d][f]*=c;c*=t-d}return s}function yht(n,e,t,r,i){const a=i<n?i:n,s=[],o=Lfe(n,r,e),l=ght(o,r,n,a,e),u=[];for(let c=0;c<t.length;++c){const d=t[c].clone(),f=d.w;d.x*=f,d.y*=f,d.z*=f,u[c]=d}for(let c=0;c<=a;++c){const d=u[o-n].clone().multiplyScalar(l[c][0]);for(let f=1;f<=n;++f)d.add(u[o-n+f].clone().multiplyScalar(l[c][f]));s[c]=d}for(let c=a+1;c<=i+1;++c)s[c]=new ki(0,0,0);return s}function _ht(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function bht(n){const e=n.length,t=[],r=[];for(let a=0;a<e;++a){const s=n[a];t[a]=new it(s.x,s.y,s.z),r[a]=s.w}const i=[];for(let a=0;a<e;++a){const s=t[a].clone();for(let o=1;o<=a;++o)s.sub(i[a-o].clone().multiplyScalar(_ht(a,o)*r[o]));i[a]=s.divideScalar(r[0])}return i}function Sht(n,e,t,r,i){const a=yht(n,e,t,r,i);return bht(a)}class wY extends jc{constructor(e,t,r,i,a){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=a||this.knots.length-1;for(let s=0;s<r.length;++s){const o=r[s];this.controlPoints[s]=new ki(o.x,o.y,o.z,o.w)}}getPoint(e,t=new it){const r=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=vht(this.degree,this.knots,this.controlPoints,i);return a.w!==1&&a.divideScalar(a.w),r.set(a.x,a.y,a.z)}getTangent(e,t=new it){const r=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=Sht(this.degree,this.knots,this.controlPoints,i,1);return r.copy(a[1]).normalize(),r}}let ci,Ba,ll;class xht extends eo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=a.path===""?To.extractUrlBase(e):a.path,o=new Co(this.manager);o.setPath(a.path),o.setResponseType("arraybuffer"),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(l){try{t(a.parse(l,s))}catch(u){i?i(u):console.error(u),a.manager.itemError(e)}},r,i)}parse(e,t){if(Mht(e))ci=new Eht().parse(e);else{const i=Ffe(e);if(!Iht(i))throw new Error("THREE.FBXLoader: Unknown format.");if(CY(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+CY(i));ci=new Aht().parse(i)}const r=new l_(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new wht(r,this.manager).parse(ci)}}class wht{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Ba=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),a=new Tht().parse(i);return this.parseScene(i,a,r),ll}parseConnections(){const e=new Map;return"Connections"in ci&&ci.Connections.connections.forEach(function(r){const i=r[0],a=r[1],s=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const o={ID:a,relationship:s};e.get(i).parents.push(o),e.has(a)||e.set(a,{parents:[],children:[]});const l={ID:i,relationship:s};e.get(a).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in ci.Objects){const r=ci.Objects.Video;for(const i in r){const a=r[i],s=parseInt(i);if(e[s]=a.RelativeFilename||a.Filename,"Content"in a){const o=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,l=typeof a.Content=="string"&&a.Content!=="";if(o||l){const u=this.parseImage(r[i]);t[a.RelativeFilename||a.Filename]=u}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let a;switch(i){case"bmp":a="image/bmp";break;case"jpg":case"jpeg":a="image/jpeg";break;case"png":a="image/png";break;case"tif":a="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),a="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+a+";base64,"+t;{const s=new Uint8Array(t);return window.URL.createObjectURL(new Blob([s],{type:a}))}}parseTextures(e){const t=new Map;if("Texture"in ci.Objects){const r=ci.Objects.Texture;for(const i in r){const a=this.parseTexture(r[i],e);t.set(parseInt(i),a)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,a=e.WrapModeV,s=i!==void 0?i.value:0,o=a!==void 0?a.value:0;if(r.wrapS=s===0?vl:hs,r.wrapT=o===0?vl:hs,"Scaling"in e){const l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;r.offset.x=l[0],r.offset.y=l[1]}return r}loadTexture(e,t){let r;const i=this.textureLoader.path,a=Ba.get(e.id).children;a!==void 0&&a.length>0&&t[a[0].ID]!==void 0&&(r=t[a[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let s;const o=e.FileName.slice(-3).toLowerCase();if(o==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),s=new Qs):(l.setPath(this.textureLoader.path),s=l.load(r))}else o==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),s=new Qs):s=this.textureLoader.load(r);return this.textureLoader.setPath(i),s}parseMaterials(e){const t=new Map;if("Material"in ci.Objects){const r=ci.Objects.Material;for(const i in r){const a=this.parseMaterial(r[i],e);a!==null&&t.set(parseInt(i),a)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let a=e.ShadingModel;if(typeof a=="object"&&(a=a.value),!Ba.has(r))return null;const s=this.parseParameters(e,t,r);let o;switch(a.toLowerCase()){case"phong":o=new zf;break;case"lambert":o=new k9;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),o=new zf;break}return o.setValues(s),o.name=i,o}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new Un().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new Un().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new Un().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new Un().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new Un().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new Un().fromArray(e.SpecularColor.value));const a=this;return Ba.get(r).children.forEach(function(s){const o=s.relationship;switch(o){case"Bump":i.bumpMap=a.getTexture(t,s.ID);break;case"Maya|TEX_ao_map":i.aoMap=a.getTexture(t,s.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=a.getTexture(t,s.ID),i.map!==void 0&&(i.map.encoding=ai);break;case"DisplacementColor":i.displacementMap=a.getTexture(t,s.ID);break;case"EmissiveColor":i.emissiveMap=a.getTexture(t,s.ID),i.emissiveMap!==void 0&&(i.emissiveMap.encoding=ai);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=a.getTexture(t,s.ID);break;case"ReflectionColor":i.envMap=a.getTexture(t,s.ID),i.envMap!==void 0&&(i.envMap.mapping=z2,i.envMap.encoding=ai);break;case"SpecularColor":i.specularMap=a.getTexture(t,s.ID),i.specularMap!==void 0&&(i.specularMap.encoding=ai);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=a.getTexture(t,s.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),i}getTexture(e,t){return"LayeredTexture"in ci.Objects&&t in ci.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Ba.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in ci.Objects){const r=ci.Objects.Deformer;for(const i in r){const a=r[i],s=Ba.get(parseInt(i));if(a.attrType==="Skin"){const o=this.parseSkeleton(s,r);o.ID=i,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=s.parents[0].ID,e[i]=o}else if(a.attrType==="BlendShape"){const o={id:i};o.rawTargets=this.parseMorphTargets(s,r),o.id=i,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=o}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const a=t[i.ID];if(a.attrType!=="Cluster")return;const s={ID:i.ID,indices:[],weights:[],transformLink:new or().fromArray(a.TransformLink.a)};"Indexes"in a&&(s.indices=a.Indexes.a,s.weights=a.Weights.a),r.push(s)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const a=e.children[i],s=t[a.ID],o={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if(s.attrType!=="BlendShapeChannel")return;o.geoID=Ba.get(parseInt(a.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(o)}return r}parseScene(e,t,r){ll=new gl;const i=this.parseModels(e.skeletons,t,r),a=ci.Objects.Model,s=this;i.forEach(function(l){const u=a[l.ID];s.setLookAtProperties(l,u),Ba.get(l.ID).parents.forEach(function(d){const f=i.get(d.ID);f!==void 0&&f.add(l)}),l.parent===null&&ll.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),ll.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const u=Nfe(l.userData.transformData);l.applyMatrix4(u),l.updateWorldMatrix()}});const o=new Cht().parse();ll.children.length===1&&ll.children[0].isGroup&&(ll.children[0].animations=o,ll=ll.children[0]),ll.animations=o}parseModels(e,t,r){const i=new Map,a=ci.Objects.Model;for(const s in a){const o=parseInt(s),l=a[s],u=Ba.get(o);let c=this.buildSkeleton(u,e,o,l.attrName);if(!c){switch(l.attrType){case"Camera":c=this.createCamera(u);break;case"Light":c=this.createLight(u);break;case"Mesh":c=this.createMesh(u,t,r);break;case"NurbsCurve":c=this.createCurve(u,t);break;case"LimbNode":case"Root":c=new a_;break;case"Null":default:c=new gl;break}c.name=l.attrName?_i.sanitizeNodeName(l.attrName):"",c.ID=o}this.getTransformData(c,l),i.set(o,c)}return i}buildSkeleton(e,t,r,i){let a=null;return e.parents.forEach(function(s){for(const o in t){const l=t[o];l.rawBones.forEach(function(u,c){if(u.ID===s.ID){const d=a;a=new a_,a.matrixWorld.copy(u.transformLink),a.name=i?_i.sanitizeNodeName(i):"",a.ID=r,l.bones[c]=a,d!==null&&a.add(d)}})}}),a}createCamera(e){let t,r;if(e.children.forEach(function(i){const a=ci.Objects.NodeAttribute[i.ID];a!==void 0&&(r=a)}),r===void 0)t=new Sa;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let a=1;r.NearPlane!==void 0&&(a=r.NearPlane.value/1e3);let s=1e3;r.FarPlane!==void 0&&(s=r.FarPlane.value/1e3);let o=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(o=r.AspectWidth.value,l=r.AspectHeight.value);const u=o/l;let c=45;r.FieldOfView!==void 0&&(c=r.FieldOfView.value);const d=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new ds(c,u,a,s),d!==null&&t.setFocalLength(d);break;case 1:t=new Q_(-o/2,o/2,l/2,-l/2,a,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new Sa;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const a=ci.Objects.NodeAttribute[i.ID];a!==void 0&&(r=a)}),r===void 0)t=new Sa;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let a=16777215;r.Color!==void 0&&(a=new Un().fromArray(r.Color.value));let s=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(s=0);let o=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?o=0:o=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new wv(a,s,o,l);break;case 1:t=new jw(a,s);break;case 2:let u=Math.PI/3;r.InnerAngle!==void 0&&(u=yo.degToRad(r.InnerAngle.value));let c=0;r.OuterAngle!==void 0&&(c=yo.degToRad(r.OuterAngle.value),c=Math.max(c,1)),t=new OI(a,s,o,u,c,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new wv(a,s);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,a=null,s=null;const o=[];return e.children.forEach(function(l){t.has(l.ID)&&(a=t.get(l.ID)),r.has(l.ID)&&o.push(r.get(l.ID))}),o.length>1?s=o:o.length>0?s=o[0]:(s=new zf({color:13421772}),o.push(s)),"color"in a.attributes&&o.forEach(function(l){l.vertexColors=!0}),a.FBX_Deformer?(i=new kI(a,s),i.normalizeSkinWeights()):i=new ps(a,s),i}createCurve(e,t){const r=e.children.reduce(function(a,s){return t.has(s.ID)&&(a=t.get(s.ID)),a},null),i=new Bc({color:3342591,linewidth:1});return new eb(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=Bfe(t.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&Ba.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const a=ci.Objects.Model[i.ID];if("Lcl_Translation"in a){const s=a.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),ll.add(e.target)):e.lookAt(new it().fromArray(s))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const a in e){const s=e[a];Ba.get(parseInt(s.ID)).parents.forEach(function(l){if(t.has(l.ID)){const u=l.ID;Ba.get(u).parents.forEach(function(d){r.has(d.ID)&&r.get(d.ID).bind(new J_(s.bones),i[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in ci.Objects){const t=ci.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(a){e[a.Node]=new or().fromArray(a.Matrix.a)}):e[i.Node]=new or().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in ci&&"AmbientColor"in ci.GlobalSettings){const e=ci.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const a=new Un(t,r,i);ll.add(new NI(a,1))}}}}class Tht{parse(e){const t=new Map;if("Geometry"in ci.Objects){const r=ci.Objects.Geometry;for(const i in r){const a=Ba.get(parseInt(i)),s=this.parseGeometry(a,r[i],e);t.set(parseInt(i),s)}}return t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,a=[],s=e.parents.map(function(d){return ci.Objects.Model[d.ID]});if(s.length===0)return;const o=e.children.reduce(function(d,f){return i[f.ID]!==void 0&&(d=i[f.ID]),d},null);e.children.forEach(function(d){r.morphTargets[d.ID]!==void 0&&a.push(r.morphTargets[d.ID])});const l=s[0],u={};"RotationOrder"in l&&(u.eulerOrder=Bfe(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);const c=Nfe(u);return this.genGeometry(t,o,a,c)}genGeometry(e,t,r,i){const a=new pi;e.attrName&&(a.name=e.attrName);const s=this.parseGeoNode(e,t),o=this.genBuffers(s),l=new Kn(o.vertex,3);if(l.applyMatrix4(i),a.setAttribute("position",l),o.colors.length>0&&a.setAttribute("color",new Kn(o.colors,3)),t&&(a.setAttribute("skinIndex",new _9(o.weightsIndices,4)),a.setAttribute("skinWeight",new Kn(o.vertexWeights,4)),a.FBX_Deformer=t),o.normal.length>0){const u=new Nu().getNormalMatrix(i),c=new Kn(o.normal,3);c.applyNormalMatrix(u),a.setAttribute("normal",c)}if(o.uvs.forEach(function(u,c){let d="uv"+(c+1).toString();c===0&&(d="uv"),a.setAttribute(d,new Kn(o.uvs[c],2))}),s.material&&s.material.mappingType!=="AllSame"){let u=o.materialIndex[0],c=0;if(o.materialIndex.forEach(function(d,f){d!==u&&(a.addGroup(c,f-c,u),u=d,c=f)}),a.groups.length>0){const d=a.groups[a.groups.length-1],f=d.start+d.count;f!==o.materialIndex.length&&a.addGroup(f,o.materialIndex.length-f,u)}a.groups.length===0&&a.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(a,e,r,i),a}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,a){i.indices.forEach(function(s,o){r.weightTable[s]===void 0&&(r.weightTable[s]=[]),r.weightTable[s].push({id:a,weight:i.weights[o]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,a=!1,s=[],o=[],l=[],u=[],c=[],d=[];const f=this;return e.vertexIndices.forEach(function(h,p){let m,v=!1;h<0&&(h=h^-1,v=!0);let g=[],y=[];if(s.push(h*3,h*3+1,h*3+2),e.color){const _=vA(p,r,h,e.color);l.push(_[0],_[1],_[2])}if(e.skeleton){if(e.weightTable[h]!==void 0&&e.weightTable[h].forEach(function(_){y.push(_.weight),g.push(_.id)}),y.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);const _=[0,0,0,0],b=[0,0,0,0];y.forEach(function(x,w){let A=x,T=g[w];b.forEach(function(C,E,I){if(A>C){I[E]=A,A=C;const P=_[E];_[E]=T,T=P}})}),g=_,y=b}for(;y.length<4;)y.push(0),g.push(0);for(let _=0;_<4;++_)c.push(y[_]),d.push(g[_])}if(e.normal){const _=vA(p,r,h,e.normal);o.push(_[0],_[1],_[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=vA(p,r,h,e.material)[0]),e.uv&&e.uv.forEach(function(_,b){const x=vA(p,r,h,_);u[b]===void 0&&(u[b]=[]),u[b].push(x[0]),u[b].push(x[1])}),i++,v&&(f.genFace(t,e,s,m,o,l,u,c,d,i),r++,i=0,s=[],o=[],l=[],u=[],c=[],d=[])}),t}genFace(e,t,r,i,a,s,o,l,u,c){for(let d=2;d<c;d++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[(d-1)*3]]),e.vertex.push(t.vertexPositions[r[(d-1)*3+1]]),e.vertex.push(t.vertexPositions[r[(d-1)*3+2]]),e.vertex.push(t.vertexPositions[r[d*3]]),e.vertex.push(t.vertexPositions[r[d*3+1]]),e.vertex.push(t.vertexPositions[r[d*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(d-1)*4]),e.vertexWeights.push(l[(d-1)*4+1]),e.vertexWeights.push(l[(d-1)*4+2]),e.vertexWeights.push(l[(d-1)*4+3]),e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[(d-1)*4]),e.weightsIndices.push(u[(d-1)*4+1]),e.weightsIndices.push(u[(d-1)*4+2]),e.weightsIndices.push(u[(d-1)*4+3]),e.weightsIndices.push(u[d*4]),e.weightsIndices.push(u[d*4+1]),e.weightsIndices.push(u[d*4+2]),e.weightsIndices.push(u[d*4+3])),t.color&&(e.colors.push(s[0]),e.colors.push(s[1]),e.colors.push(s[2]),e.colors.push(s[(d-1)*3]),e.colors.push(s[(d-1)*3+1]),e.colors.push(s[(d-1)*3+2]),e.colors.push(s[d*3]),e.colors.push(s[d*3+1]),e.colors.push(s[d*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(a[0]),e.normal.push(a[1]),e.normal.push(a[2]),e.normal.push(a[(d-1)*3]),e.normal.push(a[(d-1)*3+1]),e.normal.push(a[(d-1)*3+2]),e.normal.push(a[d*3]),e.normal.push(a[d*3+1]),e.normal.push(a[d*3+2])),t.uv&&t.uv.forEach(function(f,h){e.uvs[h]===void 0&&(e.uvs[h]=[]),e.uvs[h].push(o[h][0]),e.uvs[h].push(o[h][1]),e.uvs[h].push(o[h][(d-1)*2]),e.uvs[h].push(o[h][(d-1)*2+1]),e.uvs[h].push(o[h][d*2]),e.uvs[h].push(o[h][d*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const a=this;r.forEach(function(s){s.rawTargets.forEach(function(o){const l=ci.Objects.Geometry[o.geoID];l!==void 0&&a.genMorphGeometry(e,t,l,i,o.name)})})}genMorphGeometry(e,t,r,i,a){const s=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],o=r.Vertices!==void 0?r.Vertices.a:[],l=r.Indexes!==void 0?r.Indexes.a:[],u=e.attributes.position.count*3,c=new Float32Array(u);for(let p=0;p<l.length;p++){const m=l[p]*3;c[m]=o[p*3],c[m+1]=o[p*3+1],c[m+2]=o[p*3+2]}const d={vertexIndices:s,vertexPositions:c},f=this.genBuffers(d),h=new Kn(f.vertex,3);h.name=a||r.attrName,h.applyMatrix4(i),e.morphAttributes.position.push(h)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let a=[];return r==="IndexToDirect"&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:a,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let a=[];return r==="IndexToDirect"&&(a=e.UVIndex.a),{dataSize:2,buffer:i,indices:a,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let a=[];return r==="IndexToDirect"&&(a=e.ColorIndex.a),{dataSize:4,buffer:i,indices:a,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,a=[];for(let s=0;s<i.length;++s)a.push(s);return{dataSize:1,buffer:i,indices:a,mappingType:t,referenceType:r}}parseNurbsGeometry(e){if(wY===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new pi;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new pi;const r=t-1,i=e.KnotVector.a,a=[],s=e.Points.a;for(let d=0,f=s.length;d<f;d+=4)a.push(new ki().fromArray(s,d));let o,l;if(e.Form==="Closed")a.push(a[0]);else if(e.Form==="Periodic"){o=r,l=i.length-1-o;for(let d=0;d<r;++d)a.push(a[d])}const c=new wY(r,i,a,o,l).getPoints(a.length*12);return new pi().setFromPoints(c)}}class Cht{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],a=this.addClip(i);e.push(a)}return e}parseClips(){if(ci.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=ci.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const a={id:i.id,attr:i.attrName,curves:{}};t.set(a.id,a)}}return t}parseAnimationCurves(e){const t=ci.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(Dht),values:t[r].KeyValueFloat.a},a=Ba.get(i.id);if(a!==void 0){const s=a.parents[0].ID,o=a.parents[0].relationship;o.match(/X/)?e.get(s).curves.x=i:o.match(/Y/)?e.get(s).curves.y=i:o.match(/Z/)?e.get(s).curves.z=i:o.match(/d|DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=i)}}}parseAnimationLayers(e){const t=ci.Objects.AnimationLayer,r=new Map;for(const i in t){const a=[],s=Ba.get(parseInt(i));s!==void 0&&(s.children.forEach(function(l,u){if(e.has(l.ID)){const c=e.get(l.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(a[u]===void 0){const d=Ba.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(d!==void 0){const f=ci.Objects.Model[d.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const h={modelName:f.attrName?_i.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ll.traverse(function(p){p.ID===f.id&&(h.transform=p.matrix,p.userData.transformData&&(h.eulerOrder=p.userData.transformData.eulerOrder))}),h.transform||(h.transform=new or),"PreRotation"in f&&(h.preRotation=f.PreRotation.value),"PostRotation"in f&&(h.postRotation=f.PostRotation.value),a[u]=h}}a[u]&&(a[u][c.attr]=c)}else if(c.curves.morph!==void 0){if(a[u]===void 0){const d=Ba.get(l.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,f=Ba.get(d).parents[0].ID,h=Ba.get(f).parents[0].ID,p=Ba.get(h).parents[0].ID,m=ci.Objects.Model[p],v={modelName:m.attrName?_i.sanitizeNodeName(m.attrName):"",morphName:ci.Objects.Deformer[d].attrName};a[u]=v}a[u][c.attr]=c}}}),r.set(parseInt(i),a))}return r}parseAnimStacks(e){const t=ci.Objects.AnimationStack,r={};for(const i in t){const a=Ba.get(parseInt(i)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const s=e.get(a[0].ID);r[i]={name:t[i].attrName,layer:s}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new xv(e.name,-1,t)}generateTracks(e){const t=[];let r=new it,i=new qs,a=new it;if(e.transform&&e.transform.decompose(r,i,a),r=r.toArray(),i=new Pf().setFromQuaternion(i,e.eulerOrder).toArray(),a=a.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const s=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");s!==void 0&&t.push(s)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const s=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);s!==void 0&&t.push(s)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const s=this.generateVectorTrack(e.modelName,e.S.curves,a,"scale");s!==void 0&&t.push(s)}if(e.DeformPercent!==void 0){const s=this.generateMorphTrack(e);s!==void 0&&t.push(s)}return t}generateVectorTrack(e,t,r,i){const a=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(a,t,r);return new nm(e+"."+i,a,s)}generateRotationTrack(e,t,r,i,a,s){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(yo.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(yo.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(yo.degToRad));const o=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(o,t,r);i!==void 0&&(i=i.map(yo.degToRad),i.push(s),i=new Pf().fromArray(i),i=new qs().setFromEuler(i)),a!==void 0&&(a=a.map(yo.degToRad),a.push(s),a=new Pf().fromArray(a),a=new qs().setFromEuler(a).invert());const u=new qs,c=new Pf,d=[];for(let f=0;f<l.length;f+=3)c.set(l[f],l[f+1],l[f+2],s),u.setFromEuler(c),i!==void 0&&u.premultiply(i),a!==void 0&&u.multiply(a),u.toArray(d,f/3*4);return new th(e+".quaternion",o,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(a){return a/100}),i=ll.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new s_(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let a=1;a<t.length;a++){const s=t[a];s!==i&&(t[r]=s,i=s,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,a=[];let s=-1,o=-1,l=-1;return e.forEach(function(u){if(t.x&&(s=t.x.times.indexOf(u)),t.y&&(o=t.y.times.indexOf(u)),t.z&&(l=t.z.times.indexOf(u)),s!==-1){const c=t.x.values[s];a.push(c),i[0]=c}else a.push(i[0]);if(o!==-1){const c=t.y.values[o];a.push(c),i[1]=c}else a.push(i[1]);if(l!==-1){const c=t.z.values[l];a.push(c),i[2]=c}else a.push(i[2])}),a}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const r=e.values[t-1],i=e.values[t]-r,a=Math.abs(i);if(a>=180){const s=a/180,o=i/s;let l=r+o;const u=e.times[t-1],d=(e.times[t]-u)/s;let f=u+d;const h=[],p=[];for(;f<e.times[t];)h.push(f),f+=d,p.push(l),l+=o;e.times=AY(e.times,t,h),e.values=AY(e.values,t,p)}}}}class Aht{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Ofe,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,a){const s=i.match(/^[\s\t]*;/),o=i.match(/^[\s\t]*$/);if(s||o)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):u?t.parseNodeProperty(i,u,r[++a]):c?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),a={name:r},s=this.parseNodeAttr(i),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,a):r in o?(r==="PoseNode"?o.PoseNode.push(a):o[r].id!==void 0&&(o[r]={},o[r][o[r].id]=o[r]),s.id!==""&&(o[r][s.id]=a)):typeof s.id=="number"?(o[r]={},o[r][s.id]=a):r!=="Properties70"&&(r==="PoseNode"?o[r]=[a]:o[r]=a),typeof s.id=="number"&&(a.id=s.id),s.name!==""&&(a.attrName=s.name),s.type!==""&&(a.attrType=s.type),this.pushStack(a)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),a=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&a===","&&(a=r.replace(/"/g,"").replace(/,$/,"").trim());const s=this.getCurrentNode();if(s.name==="Properties70"){this.parseNodeSpecialProperty(e,i,a);return}if(i==="C"){const l=a.split(",").slice(1),u=parseInt(l[0]),c=parseInt(l[1]);let d=a.split(",").slice(3);d=d.map(function(f){return f.trim().replace(/^"/,"")}),i="connections",a=[u,c],Rht(a,d),s[i]===void 0&&(s[i]=[])}i==="Node"&&(s.id=a),i in s&&Array.isArray(s[i])?s[i].push(a):i!=="a"?s[i]=a:s.a=a,this.setCurrentProp(s,i),i==="a"&&a.slice(-1)!==","&&(s.a=Ok(a))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=Ok(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(c){return c.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=i[0],s=i[1],o=i[2],l=i[3];let u=i[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=Ok(u);break}this.getPrevNode()[a]={type:s,type2:o,flag:l,value:u},this.setCurrentProp(this.getPrevNode(),a)}}class Eht{parse(e){const t=new TY(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new Ofe;for(;!this.endOfContent(t);){const a=this.parseNode(t,r);a!==null&&i.add(a.name,a)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),a=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const s=e.getUint8(),o=e.getString(s);if(i===0)return null;const l=[];for(let f=0;f<a;f++)l.push(this.parseProperty(e));const u=l.length>0?l[0]:"",c=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(r.singleProperty=a===1&&e.getOffset()===i;i>e.getOffset();){const f=this.parseNode(e,t);f!==null&&this.parseSubNode(o,r,f)}return r.propertyList=l,typeof u=="number"&&(r.id=u),c!==""&&(r.attrName=c),d!==""&&(r.attrType=d),o!==""&&(r.name=o),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(a,s){s!==0&&i.push(a)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(a){t[a]=r[a]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],a=r.propertyList[1];const s=r.propertyList[2],o=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),a.indexOf("Lcl ")===0&&(a=a.replace("Lcl ","Lcl_")),a==="Color"||a==="ColorRGB"||a==="Vector"||a==="Vector3D"||a.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],t[i]={type:a,type2:s,flag:o,value:l}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),a=e.getUint32(),s=e.getUint32();if(a===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}typeof pht>"u"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const o=ew(new Uint8Array(e.getArrayBuffer(s))),l=new TY(o.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class TY{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),To.decodeText(new Uint8Array(t))}}class Ofe{add(e,t){this[e]=t}}function Mht(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===Ffe(n,0,e.length)}function Iht(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const a=n[i-1];return n=n.slice(t+i),t++,a}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function CY(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Dht(n){return n/46186158e3}const Pht=[];function vA(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const a=i*r.dataSize,s=a+r.dataSize;return kht(Pht,r.buffer,a,s)}const Lk=new Pf,Yg=new it;function Nfe(n){const e=new or,t=new or,r=new or,i=new or,a=new or,s=new or,o=new or,l=new or,u=new or,c=new or,d=new or,f=new or,h=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Yg.fromArray(n.translation)),n.preRotation){const E=n.preRotation.map(yo.degToRad);E.push(n.eulerOrder),t.makeRotationFromEuler(Lk.fromArray(E))}if(n.rotation){const E=n.rotation.map(yo.degToRad);E.push(n.eulerOrder),r.makeRotationFromEuler(Lk.fromArray(E))}if(n.postRotation){const E=n.postRotation.map(yo.degToRad);E.push(n.eulerOrder),i.makeRotationFromEuler(Lk.fromArray(E)),i.invert()}n.scale&&a.scale(Yg.fromArray(n.scale)),n.scalingOffset&&o.setPosition(Yg.fromArray(n.scalingOffset)),n.scalingPivot&&s.setPosition(Yg.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Yg.fromArray(n.rotationOffset)),n.rotationPivot&&u.setPosition(Yg.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(d.copy(n.parentMatrix),c.copy(n.parentMatrixWorld));const p=t.clone().multiply(r).multiply(i),m=new or;m.extractRotation(c);const v=new or;v.copyPosition(c);const g=v.clone().invert().multiply(c),y=m.clone().invert().multiply(g),_=a,b=new or;if(h===0)b.copy(m).multiply(p).multiply(y).multiply(_);else if(h===1)b.copy(m).multiply(y).multiply(p).multiply(_);else{const I=new or().scale(new it().setFromMatrixScale(d)).clone().invert(),P=y.clone().multiply(I);b.copy(m).multiply(p).multiply(P).multiply(_)}const x=u.clone().invert(),w=s.clone().invert();let A=e.clone().multiply(l).multiply(u).multiply(t).multiply(r).multiply(i).multiply(x).multiply(o).multiply(s).multiply(a).multiply(w);const T=new or().copyPosition(A),C=c.clone().multiply(T);return f.copyPosition(C),A=f.clone().multiply(b),A.premultiply(c.invert()),A}function Bfe(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function Ok(n){return n.split(",").map(function(t){return parseFloat(t)})}function Ffe(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),To.decodeText(new Uint8Array(n,e,t))}function Rht(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function kht(n,e,t,r){for(let i=t,a=0;i<r;i++,a++)n[a]=e[i];return n}function AY(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}class JO extends bft{constructor(e){super(e)}parse(e){function t(k){switch(k.image_type){case f:case m:(k.colormap_length>256||k.colormap_size!==24||k.colormap_type!==1)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case h:case p:case v:case g:k.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case d:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',k.image_type)}(k.width<=0||k.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),k.pixel_size!==8&&k.pixel_size!==16&&k.pixel_size!==24&&k.pixel_size!==32&&console.error('THREE.TGALoader: Invalid pixel size "%s".',k.pixel_size)}function r(k,H,U,B,$){let ee,re;const ne=U.pixel_size>>3,ae=U.width*U.height*ne;if(H&&(re=$.subarray(B,B+=U.colormap_length*(U.colormap_size>>3))),k){ee=new Uint8Array(ae);let pe,de,me,ke=0;const Be=new Uint8Array(ne);for(;ke<ae;)if(pe=$[B++],de=(pe&127)+1,pe&128){for(me=0;me<ne;++me)Be[me]=$[B++];for(me=0;me<de;++me)ee.set(Be,ke+me*ne);ke+=ne*de}else{for(de*=ne,me=0;me<de;++me)ee[ke+me]=$[B++];ke+=de}}else ee=$.subarray(B,B+=H?U.width*U.height:ae);return{pixel_data:ee,palettes:re}}function i(k,H,U,B,$,ee,re,ne,ae){const pe=ae;let de,me=0,ke,Be;const Xe=E.width;for(Be=H;Be!==B;Be+=U)for(ke=$;ke!==re;ke+=ee,me++)de=ne[me],k[(ke+Xe*Be)*4+3]=255,k[(ke+Xe*Be)*4+2]=pe[de*3+0],k[(ke+Xe*Be)*4+1]=pe[de*3+1],k[(ke+Xe*Be)*4+0]=pe[de*3+2];return k}function a(k,H,U,B,$,ee,re,ne){let ae,pe=0,de,me;const ke=E.width;for(me=H;me!==B;me+=U)for(de=$;de!==re;de+=ee,pe+=2)ae=ne[pe+0]+(ne[pe+1]<<8),k[(de+ke*me)*4+0]=(ae&31744)>>7,k[(de+ke*me)*4+1]=(ae&992)>>2,k[(de+ke*me)*4+2]=(ae&31)<<3,k[(de+ke*me)*4+3]=ae&32768?0:255;return k}function s(k,H,U,B,$,ee,re,ne){let ae=0,pe,de;const me=E.width;for(de=H;de!==B;de+=U)for(pe=$;pe!==re;pe+=ee,ae+=3)k[(pe+me*de)*4+3]=255,k[(pe+me*de)*4+2]=ne[ae+0],k[(pe+me*de)*4+1]=ne[ae+1],k[(pe+me*de)*4+0]=ne[ae+2];return k}function o(k,H,U,B,$,ee,re,ne){let ae=0,pe,de;const me=E.width;for(de=H;de!==B;de+=U)for(pe=$;pe!==re;pe+=ee,ae+=4)k[(pe+me*de)*4+2]=ne[ae+0],k[(pe+me*de)*4+1]=ne[ae+1],k[(pe+me*de)*4+0]=ne[ae+2],k[(pe+me*de)*4+3]=ne[ae+3];return k}function l(k,H,U,B,$,ee,re,ne){let ae,pe=0,de,me;const ke=E.width;for(me=H;me!==B;me+=U)for(de=$;de!==re;de+=ee,pe++)ae=ne[pe],k[(de+ke*me)*4+0]=ae,k[(de+ke*me)*4+1]=ae,k[(de+ke*me)*4+2]=ae,k[(de+ke*me)*4+3]=255;return k}function u(k,H,U,B,$,ee,re,ne){let ae=0,pe,de;const me=E.width;for(de=H;de!==B;de+=U)for(pe=$;pe!==re;pe+=ee,ae+=2)k[(pe+me*de)*4+0]=ne[ae+0],k[(pe+me*de)*4+1]=ne[ae+0],k[(pe+me*de)*4+2]=ne[ae+0],k[(pe+me*de)*4+3]=ne[ae+1];return k}function c(k,H,U,B,$){let ee,re,ne,ae,pe,de;switch((E.flags&y)>>_){default:case w:ee=0,ne=1,pe=H,re=0,ae=1,de=U;break;case b:ee=0,ne=1,pe=H,re=U-1,ae=-1,de=-1;break;case A:ee=H-1,ne=-1,pe=-1,re=0,ae=1,de=U;break;case x:ee=H-1,ne=-1,pe=-1,re=U-1,ae=-1,de=-1;break}if(L)switch(E.pixel_size){case 8:l(k,re,ae,de,ee,ne,pe,B);break;case 16:u(k,re,ae,de,ee,ne,pe,B);break;default:console.error("THREE.TGALoader: Format not supported.");break}else switch(E.pixel_size){case 8:i(k,re,ae,de,ee,ne,pe,B,$);break;case 16:a(k,re,ae,de,ee,ne,pe,B);break;case 24:s(k,re,ae,de,ee,ne,pe,B);break;case 32:o(k,re,ae,de,ee,ne,pe,B);break;default:console.error("THREE.TGALoader: Format not supported.");break}return k}const d=0,f=1,h=2,p=3,m=9,v=10,g=11,y=48,_=4,b=0,x=1,w=2,A=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let T=0;const C=new Uint8Array(e),E={id_length:C[T++],colormap_type:C[T++],image_type:C[T++],colormap_index:C[T++]|C[T++]<<8,colormap_length:C[T++]|C[T++]<<8,colormap_size:C[T++],origin:[C[T++]|C[T++]<<8,C[T++]|C[T++]<<8],width:C[T++]|C[T++]<<8,height:C[T++]|C[T++]<<8,pixel_size:C[T++],flags:C[T++]};t(E),E.id_length+T>e.length&&console.error("THREE.TGALoader: No data."),T+=E.id_length;let I=!1,P=!1,L=!1;switch(E.image_type){case m:I=!0,P=!0;break;case f:P=!0;break;case v:I=!0;break;case h:break;case g:I=!0,L=!0;break;case p:L=!0;break}const N=new Uint8Array(E.width*E.height*4),F=r(I,P,E,T,C);return c(N,E.width,E.height,F.pixel_data,F.palettes),{data:N,width:E.width,height:E.height,flipY:!0,generateMipmaps:!0,minFilter:yh}}}class Lht extends eo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=a.path===""?To.extractUrlBase(e):a.path,o=new Co(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(l){try{t(a.parse(l,s))}catch(u){i?i(u):console.error(u),a.manager.itemError(e)}},r,i)}parse(e,t){function r(Me,Ae){const We=[],ze=Me.childNodes;for(let qe=0,qt=ze.length;qe<qt;qe++){const Qt=ze[qe];Qt.nodeName===Ae&&We.push(Qt)}return We}function i(Me){if(Me.length===0)return[];const Ae=Me.trim().split(/\s+/),We=new Array(Ae.length);for(let ze=0,qe=Ae.length;ze<qe;ze++)We[ze]=Ae[ze];return We}function a(Me){if(Me.length===0)return[];const Ae=Me.trim().split(/\s+/),We=new Array(Ae.length);for(let ze=0,qe=Ae.length;ze<qe;ze++)We[ze]=parseFloat(Ae[ze]);return We}function s(Me){if(Me.length===0)return[];const Ae=Me.trim().split(/\s+/),We=new Array(Ae.length);for(let ze=0,qe=Ae.length;ze<qe;ze++)We[ze]=parseInt(Ae[ze]);return We}function o(Me){return Me.substring(1)}function l(){return"three_default_"+zv++}function u(Me){return Object.keys(Me).length===0}function c(Me){return{unit:d(r(Me,"unit")[0]),upAxis:f(r(Me,"up_axis")[0])}}function d(Me){return Me!==void 0&&Me.hasAttribute("meter")===!0?parseFloat(Me.getAttribute("meter")):1}function f(Me){return Me!==void 0?Me.textContent:"Y_UP"}function h(Me,Ae,We,ze){const qe=r(Me,Ae)[0];if(qe!==void 0){const qt=r(qe,We);for(let Qt=0;Qt<qt.length;Qt++)ze(qt[Qt])}}function p(Me,Ae){for(const We in Me){const ze=Me[We];ze.build=Ae(Me[We])}}function m(Me,Ae){return Me.build!==void 0||(Me.build=Ae(Me)),Me.build}function v(Me){const Ae={sources:{},samplers:{},channels:{}};let We=!1;for(let ze=0,qe=Me.childNodes.length;ze<qe;ze++){const qt=Me.childNodes[ze];if(qt.nodeType!==1)continue;let Qt;switch(qt.nodeName){case"source":Qt=qt.getAttribute("id"),Ae.sources[Qt]=dt(qt);break;case"sampler":Qt=qt.getAttribute("id"),Ae.samplers[Qt]=g(qt);break;case"channel":Qt=qt.getAttribute("target"),Ae.channels[Qt]=y(qt);break;case"animation":v(qt),We=!0;break;default:console.log(qt)}}We===!1&&(Sr.animations[Me.getAttribute("id")||yo.generateUUID()]=Ae)}function g(Me){const Ae={inputs:{}};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"input":const qt=o(qe.getAttribute("source")),Qt=qe.getAttribute("semantic");Ae.inputs[Qt]=qt;break}}return Ae}function y(Me){const Ae={};let ze=Me.getAttribute("target").split("/");const qe=ze.shift();let qt=ze.shift();const Qt=qt.indexOf("(")!==-1,qn=qt.indexOf(".")!==-1;if(qn)ze=qt.split("."),qt=ze.shift(),Ae.member=ze.shift();else if(Qt){const vt=qt.split("(");qt=vt.shift();for(let Cn=0;Cn<vt.length;Cn++)vt[Cn]=parseInt(vt[Cn].replace(/\)/,""));Ae.indices=vt}return Ae.id=qe,Ae.sid=qt,Ae.arraySyntax=Qt,Ae.memberSyntax=qn,Ae.sampler=o(Me.getAttribute("source")),Ae}function _(Me){const Ae=[],We=Me.channels,ze=Me.samplers,qe=Me.sources;for(const qt in We)if(We.hasOwnProperty(qt)){const Qt=We[qt],qn=ze[Qt.sampler],vt=qn.inputs.INPUT,Cn=qn.inputs.OUTPUT,rr=qe[vt],pn=qe[Cn],vr=x(Qt,rr,pn);E(vr,Ae)}return Ae}function b(Me){return m(Sr.animations[Me],_)}function x(Me,Ae,We){const ze=Sr.nodes[Me.id],qe=yr(ze.id),qt=ze.transforms[Me.sid],Qt=ze.matrix.clone().transpose();let qn,vt,Cn,rr,pn,vr;const Jn={};switch(qt){case"matrix":for(Cn=0,rr=Ae.array.length;Cn<rr;Cn++)if(qn=Ae.array[Cn],vt=Cn*We.stride,Jn[qn]===void 0&&(Jn[qn]={}),Me.arraySyntax===!0){const Li=We.array[vt],mn=Me.indices[0]+4*Me.indices[1];Jn[qn][mn]=Li}else for(pn=0,vr=We.stride;pn<vr;pn++)Jn[qn][pn]=We.array[vt+pn];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',qt);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',qt);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',qt);break}const _r=w(Jn,Qt);return{name:qe.uuid,keyframes:_r}}function w(Me,Ae){const We=[];for(const qe in Me)We.push({time:parseFloat(qe),value:Me[qe]});We.sort(ze);for(let qe=0;qe<16;qe++)I(We,qe,Ae.elements[qe]);return We;function ze(qe,qt){return qe.time-qt.time}}const A=new it,T=new it,C=new qs;function E(Me,Ae){const We=Me.keyframes,ze=Me.name,qe=[],qt=[],Qt=[],qn=[];for(let vt=0,Cn=We.length;vt<Cn;vt++){const rr=We[vt],pn=rr.time,vr=rr.value;Qe.fromArray(vr).transpose(),Qe.decompose(A,C,T),qe.push(pn),qt.push(A.x,A.y,A.z),Qt.push(C.x,C.y,C.z,C.w),qn.push(T.x,T.y,T.z)}return qt.length>0&&Ae.push(new nm(ze+".position",qe,qt)),Qt.length>0&&Ae.push(new th(ze+".quaternion",qe,Qt)),qn.length>0&&Ae.push(new nm(ze+".scale",qe,qn)),Ae}function I(Me,Ae,We){let ze,qe=!0,qt,Qt;for(qt=0,Qt=Me.length;qt<Qt;qt++)ze=Me[qt],ze.value[Ae]===void 0?ze.value[Ae]=null:qe=!1;if(qe===!0)for(qt=0,Qt=Me.length;qt<Qt;qt++)ze=Me[qt],ze.value[Ae]=We;else P(Me,Ae)}function P(Me,Ae){let We,ze;for(let qe=0,qt=Me.length;qe<qt;qe++){const Qt=Me[qe];if(Qt.value[Ae]===null){if(We=L(Me,qe,Ae),ze=N(Me,qe,Ae),We===null){Qt.value[Ae]=ze.value[Ae];continue}if(ze===null){Qt.value[Ae]=We.value[Ae];continue}F(Qt,We,ze,Ae)}}}function L(Me,Ae,We){for(;Ae>=0;){const ze=Me[Ae];if(ze.value[We]!==null)return ze;Ae--}return null}function N(Me,Ae,We){for(;Ae<Me.length;){const ze=Me[Ae];if(ze.value[We]!==null)return ze;Ae++}return null}function F(Me,Ae,We,ze){if(We.time-Ae.time===0){Me.value[ze]=Ae.value[ze];return}Me.value[ze]=(Me.time-Ae.time)*(We.value[ze]-Ae.value[ze])/(We.time-Ae.time)+Ae.value[ze]}function k(Me){const Ae={name:Me.getAttribute("id")||"default",start:parseFloat(Me.getAttribute("start")||0),end:parseFloat(Me.getAttribute("end")||0),animations:[]};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"instance_animation":Ae.animations.push(o(qe.getAttribute("url")));break}}Sr.clips[Me.getAttribute("id")]=Ae}function H(Me){const Ae=[],We=Me.name,ze=Me.end-Me.start||-1,qe=Me.animations;for(let qt=0,Qt=qe.length;qt<Qt;qt++){const qn=b(qe[qt]);for(let vt=0,Cn=qn.length;vt<Cn;vt++)Ae.push(qn[vt])}return new xv(We,ze,Ae)}function U(Me){return m(Sr.clips[Me],H)}function B(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"skin":Ae.id=o(qe.getAttribute("source")),Ae.skin=$(qe);break;case"morph":Ae.id=o(qe.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}Sr.controllers[Me.getAttribute("id")]=Ae}function $(Me){const Ae={sources:{}};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"bind_shape_matrix":Ae.bindShapeMatrix=a(qe.textContent);break;case"source":const qt=qe.getAttribute("id");Ae.sources[qt]=dt(qe);break;case"joints":Ae.joints=ee(qe);break;case"vertex_weights":Ae.vertexWeights=re(qe);break}}return Ae}function ee(Me){const Ae={inputs:{}};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"input":const qt=qe.getAttribute("semantic"),Qt=o(qe.getAttribute("source"));Ae.inputs[qt]=Qt;break}}return Ae}function re(Me){const Ae={inputs:{}};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"input":const qt=qe.getAttribute("semantic"),Qt=o(qe.getAttribute("source")),qn=parseInt(qe.getAttribute("offset"));Ae.inputs[qt]={id:Qt,offset:qn};break;case"vcount":Ae.vcount=s(qe.textContent);break;case"v":Ae.v=s(qe.textContent);break}}return Ae}function ne(Me){const Ae={id:Me.id},We=Sr.geometries[Ae.id];return Me.skin!==void 0&&(Ae.skin=ae(Me.skin),We.sources.skinIndices=Ae.skin.indices,We.sources.skinWeights=Ae.skin.weights),Ae}function ae(Me){const We={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},ze=Me.sources,qe=Me.vertexWeights,qt=qe.vcount,Qt=qe.v,qn=qe.inputs.JOINT.offset,vt=qe.inputs.WEIGHT.offset,Cn=Me.sources[Me.joints.inputs.JOINT],rr=Me.sources[Me.joints.inputs.INV_BIND_MATRIX],pn=ze[qe.inputs.WEIGHT.id].array;let vr=0,Jn,_r,dr;for(Jn=0,dr=qt.length;Jn<dr;Jn++){const mn=qt[Jn],Or=[];for(_r=0;_r<mn;_r++){const qr=Qt[vr+qn],ii=Qt[vr+vt],ea=pn[ii];Or.push({index:qr,weight:ea}),vr+=2}for(Or.sort(Li),_r=0;_r<4;_r++){const qr=Or[_r];qr!==void 0?(We.indices.array.push(qr.index),We.weights.array.push(qr.weight)):(We.indices.array.push(0),We.weights.array.push(0))}}for(Me.bindShapeMatrix?We.bindMatrix=new or().fromArray(Me.bindShapeMatrix).transpose():We.bindMatrix=new or().identity(),Jn=0,dr=Cn.array.length;Jn<dr;Jn++){const mn=Cn.array[Jn],Or=new or().fromArray(rr.array,Jn*rr.stride).transpose();We.joints.push({name:mn,boneInverse:Or})}return We;function Li(mn,Or){return Or.weight-mn.weight}}function pe(Me){return m(Sr.controllers[Me],ne)}function de(Me){const Ae={init_from:r(Me,"init_from")[0].textContent};Sr.images[Me.getAttribute("id")]=Ae}function me(Me){return Me.build!==void 0?Me.build:Me.init_from}function ke(Me){const Ae=Sr.images[Me];return Ae!==void 0?m(Ae,me):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",Me),null)}function Be(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"profile_COMMON":Ae.profile=Xe(qe);break}}Sr.effects[Me.getAttribute("id")]=Ae}function Xe(Me){const Ae={surfaces:{},samplers:{}};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"newparam":Ye(qe,Ae);break;case"technique":Ae.technique=le(qe);break;case"extra":Ae.extra=ut(qe);break}}return Ae}function Ye(Me,Ae){const We=Me.getAttribute("sid");for(let ze=0,qe=Me.childNodes.length;ze<qe;ze++){const qt=Me.childNodes[ze];if(qt.nodeType===1)switch(qt.nodeName){case"surface":Ae.surfaces[We]=Y(qt);break;case"sampler2D":Ae.samplers[We]=he(qt);break}}}function Y(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"init_from":Ae.init_from=qe.textContent;break}}return Ae}function he(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"source":Ae.source=qe.textContent;break}}return Ae}function le(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"constant":case"lambert":case"blinn":case"phong":Ae.type=qe.nodeName,Ae.parameters=Ke(qe);break;case"extra":Ae.extra=ut(qe);break}}return Ae}function Ke(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":Ae[qe.nodeName]=Ue(qe);break;case"transparent":Ae[qe.nodeName]={opaque:qe.hasAttribute("opaque")?qe.getAttribute("opaque"):"A_ONE",data:Ue(qe)};break}}return Ae}function Ue(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"color":Ae[qe.nodeName]=a(qe.textContent);break;case"float":Ae[qe.nodeName]=parseFloat(qe.textContent);break;case"texture":Ae[qe.nodeName]={id:qe.getAttribute("texture"),extra:Ze(qe)};break}}return Ae}function Ze(Me){const Ae={technique:{}};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"extra":je(qe,Ae);break}}return Ae}function je(Me,Ae){for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"technique":He(qe,Ae);break}}}function He(Me,Ae){for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":Ae.technique[qe.nodeName]=parseFloat(qe.textContent);break;case"wrapU":case"wrapV":qe.textContent.toUpperCase()==="TRUE"?Ae.technique[qe.nodeName]=1:qe.textContent.toUpperCase()==="FALSE"?Ae.technique[qe.nodeName]=0:Ae.technique[qe.nodeName]=parseInt(qe.textContent);break;case"bump":Ae[qe.nodeName]=q(qe);break}}}function ut(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"technique":Ae.technique=ge(qe);break}}return Ae}function ge(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"double_sided":Ae[qe.nodeName]=parseInt(qe.textContent);break;case"bump":Ae[qe.nodeName]=q(qe);break}}return Ae}function q(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"texture":Ae[qe.nodeName]={id:qe.getAttribute("texture"),texcoord:qe.getAttribute("texcoord"),extra:Ze(qe)};break}}return Ae}function te(Me){return Me}function ye(Me){return m(Sr.effects[Me],te)}function Ve(Me){const Ae={name:Me.getAttribute("name")};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"instance_effect":Ae.url=o(qe.getAttribute("url"));break}}Sr.materials[Me.getAttribute("id")]=Ae}function et(Me){let Ae,We=Me.slice((Me.lastIndexOf(".")-1>>>0)+2);switch(We=We.toLowerCase(),We){case"tga":Ae=Yi;break;default:Ae=Ea}return Ae}function At(Me){const Ae=ye(Me.url),We=Ae.profile.technique;let ze;switch(We.type){case"phong":case"blinn":ze=new zf;break;case"lambert":ze=new k9;break;default:ze=new Dc;break}ze.name=Me.name||"";function qe(vt,Cn=null){const rr=Ae.profile.samplers[vt.id];let pn=null;if(rr!==void 0){const vr=Ae.profile.surfaces[rr.source];pn=ke(vr.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),pn=ke(vt.id);if(pn!==null){const vr=et(pn);if(vr!==void 0){const Jn=vr.load(pn),_r=vt.extra;if(_r!==void 0&&_r.technique!==void 0&&u(_r.technique)===!1){const dr=_r.technique;Jn.wrapS=dr.wrapU?vl:hs,Jn.wrapT=dr.wrapV?vl:hs,Jn.offset.set(dr.offsetU||0,dr.offsetV||0),Jn.repeat.set(dr.repeatU||1,dr.repeatV||1)}else Jn.wrapS=vl,Jn.wrapT=vl;return Cn!==null&&(Jn.encoding=Cn),Jn}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",pn),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",vt.id),null}const qt=We.parameters;for(const vt in qt){const Cn=qt[vt];switch(vt){case"diffuse":Cn.color&&ze.color.fromArray(Cn.color),Cn.texture&&(ze.map=qe(Cn.texture,ai));break;case"specular":Cn.color&&ze.specular&&ze.specular.fromArray(Cn.color),Cn.texture&&(ze.specularMap=qe(Cn.texture));break;case"bump":Cn.texture&&(ze.normalMap=qe(Cn.texture));break;case"ambient":Cn.texture&&(ze.lightMap=qe(Cn.texture,ai));break;case"shininess":Cn.float&&ze.shininess&&(ze.shininess=Cn.float);break;case"emission":Cn.color&&ze.emissive&&ze.emissive.fromArray(Cn.color),Cn.texture&&(ze.emissiveMap=qe(Cn.texture,ai));break}}ze.color.convertSRGBToLinear(),ze.specular&&ze.specular.convertSRGBToLinear(),ze.emissive&&ze.emissive.convertSRGBToLinear();let Qt=qt.transparent,qn=qt.transparency;if(qn===void 0&&Qt&&(qn={float:1}),Qt===void 0&&qn&&(Qt={opaque:"A_ONE",data:{color:[1,1,1,1]}}),Qt&&qn)if(Qt.data.texture)ze.transparent=!0;else{const vt=Qt.data.color;switch(Qt.opaque){case"A_ONE":ze.opacity=vt[3]*qn.float;break;case"RGB_ZERO":ze.opacity=1-vt[0]*qn.float;break;case"A_ZERO":ze.opacity=1-vt[3]*qn.float;break;case"RGB_ONE":ze.opacity=vt[0]*qn.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',Qt.opaque)}ze.opacity<1&&(ze.transparent=!0)}if(We.extra!==void 0&&We.extra.technique!==void 0){const vt=We.extra.technique;for(const Cn in vt){const rr=vt[Cn];switch(Cn){case"double_sided":ze.side=rr===1?Zp:Qp;break;case"bump":ze.normalMap=qe(rr.texture),ze.normalScale=new sn(1,1);break}}}return ze}function It(Me){return m(Sr.materials[Me],At)}function De(Me){const Ae={name:Me.getAttribute("name")};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"optics":Ae.optics=Tt(qe);break}}Sr.cameras[Me.getAttribute("id")]=Ae}function Tt(Me){for(let Ae=0;Ae<Me.childNodes.length;Ae++){const We=Me.childNodes[Ae];switch(We.nodeName){case"technique_common":return ot(We)}}return{}}function ot(Me){const Ae={};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];switch(ze.nodeName){case"perspective":case"orthographic":Ae.technique=ze.nodeName,Ae.parameters=G(ze);break}}return Ae}function G(Me){const Ae={};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];switch(ze.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":Ae[ze.nodeName]=parseFloat(ze.textContent);break}}return Ae}function _e(Me){let Ae;switch(Me.optics.technique){case"perspective":Ae=new ds(Me.optics.parameters.yfov,Me.optics.parameters.aspect_ratio,Me.optics.parameters.znear,Me.optics.parameters.zfar);break;case"orthographic":let We=Me.optics.parameters.ymag,ze=Me.optics.parameters.xmag;const qe=Me.optics.parameters.aspect_ratio;ze=ze===void 0?We*qe:ze,We=We===void 0?ze/qe:We,ze*=.5,We*=.5,Ae=new Q_(-ze,ze,We,-We,Me.optics.parameters.znear,Me.optics.parameters.zfar);break;default:Ae=new ds;break}return Ae.name=Me.name||"",Ae}function ve(Me){const Ae=Sr.cameras[Me];return Ae!==void 0?m(Ae,_e):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",Me),null)}function Le(Me){let Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"technique_common":Ae=we(qe);break}}Sr.lights[Me.getAttribute("id")]=Ae}function we(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"directional":case"point":case"spot":case"ambient":Ae.technique=qe.nodeName,Ae.parameters=Ie(qe)}}return Ae}function Ie(Me){const Ae={};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"color":const qt=a(qe.textContent);Ae.color=new Un().fromArray(qt).convertSRGBToLinear();break;case"falloff_angle":Ae.falloffAngle=parseFloat(qe.textContent);break;case"quadratic_attenuation":const Qt=parseFloat(qe.textContent);Ae.distance=Qt?Math.sqrt(1/Qt):0;break}}return Ae}function wt(Me){let Ae;switch(Me.technique){case"directional":Ae=new jw;break;case"point":Ae=new wv;break;case"spot":Ae=new OI;break;case"ambient":Ae=new NI;break}return Me.parameters.color&&Ae.color.copy(Me.parameters.color),Me.parameters.distance&&(Ae.distance=Me.parameters.distance),Ae}function Pe(Me){const Ae=Sr.lights[Me];return Ae!==void 0?m(Ae,wt):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",Me),null)}function Rt(Me){const Ae={name:Me.getAttribute("name"),sources:{},vertices:{},primitives:[]},We=r(Me,"mesh")[0];if(We!==void 0){for(let ze=0;ze<We.childNodes.length;ze++){const qe=We.childNodes[ze];if(qe.nodeType!==1)continue;const qt=qe.getAttribute("id");switch(qe.nodeName){case"source":Ae.sources[qt]=dt(qe);break;case"vertices":Ae.vertices=Mt(qe);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",qe.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":Ae.primitives.push(Wt(qe));break;default:console.log(qe)}}Sr.geometries[Me.getAttribute("id")]=Ae}}function dt(Me){const Ae={array:[],stride:3};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"float_array":Ae.array=a(ze.textContent);break;case"Name_array":Ae.array=i(ze.textContent);break;case"technique_common":const qe=r(ze,"accessor")[0];qe!==void 0&&(Ae.stride=parseInt(qe.getAttribute("stride")));break}}return Ae}function Mt(Me){const Ae={};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];ze.nodeType===1&&(Ae[ze.getAttribute("semantic")]=o(ze.getAttribute("source")))}return Ae}function Wt(Me){const Ae={type:Me.nodeName,material:Me.getAttribute("material"),count:parseInt(Me.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let We=0,ze=Me.childNodes.length;We<ze;We++){const qe=Me.childNodes[We];if(qe.nodeType===1)switch(qe.nodeName){case"input":const qt=o(qe.getAttribute("source")),Qt=qe.getAttribute("semantic"),qn=parseInt(qe.getAttribute("offset")),vt=parseInt(qe.getAttribute("set")),Cn=vt>0?Qt+vt:Qt;Ae.inputs[Cn]={id:qt,offset:qn},Ae.stride=Math.max(Ae.stride,qn+1),Qt==="TEXCOORD"&&(Ae.hasUV=!0);break;case"vcount":Ae.vcount=s(qe.textContent);break;case"p":Ae.p=s(qe.textContent);break}}return Ae}function zt(Me){const Ae={};for(let We=0;We<Me.length;We++){const ze=Me[We];Ae[ze.type]===void 0&&(Ae[ze.type]=[]),Ae[ze.type].push(ze)}return Ae}function Sn(Me){let Ae=0;for(let We=0,ze=Me.length;We<ze;We++)Me[We].hasUV===!0&&Ae++;Ae>0&&Ae<Me.length&&(Me.uvsNeedsFix=!0)}function On(Me){const Ae={},We=Me.sources,ze=Me.vertices,qe=Me.primitives;if(qe.length===0)return{};const qt=zt(qe);for(const Qt in qt){const qn=qt[Qt];Sn(qn),Ae[Qt]=Er(qn,We,ze)}return Ae}function Er(Me,Ae,We){const ze={},qe={array:[],stride:0},qt={array:[],stride:0},Qt={array:[],stride:0},qn={array:[],stride:0},vt={array:[],stride:0},Cn={array:[],stride:4},rr={array:[],stride:4},pn=new pi,vr=[];let Jn=0;for(let _r=0;_r<Me.length;_r++){const dr=Me[_r],Li=dr.inputs;let mn=0;switch(dr.type){case"lines":case"linestrips":mn=dr.count*2;break;case"triangles":mn=dr.count*3;break;case"polylist":for(let Or=0;Or<dr.count;Or++){const qr=dr.vcount[Or];switch(qr){case 3:mn+=3;break;case 4:mn+=6;break;default:mn+=(qr-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",dr.type)}pn.addGroup(Jn,mn,_r),Jn+=mn,dr.material&&vr.push(dr.material);for(const Or in Li){const qr=Li[Or];switch(Or){case"VERTEX":for(const ii in We){const ea=We[ii];switch(ii){case"POSITION":const nc=qe.array.length;if(Qn(dr,Ae[ea],qr.offset,qe.array),qe.stride=Ae[ea].stride,Ae.skinWeights&&Ae.skinIndices&&(Qn(dr,Ae.skinIndices,qr.offset,Cn.array),Qn(dr,Ae.skinWeights,qr.offset,rr.array)),dr.hasUV===!1&&Me.uvsNeedsFix===!0){const Hv=(qe.array.length-nc)/qe.stride;for(let _h=0;_h<Hv;_h++)Qt.array.push(0,0)}break;case"NORMAL":Qn(dr,Ae[ea],qr.offset,qt.array),qt.stride=Ae[ea].stride;break;case"COLOR":Qn(dr,Ae[ea],qr.offset,vt.array),vt.stride=Ae[ea].stride;break;case"TEXCOORD":Qn(dr,Ae[ea],qr.offset,Qt.array),Qt.stride=Ae[ea].stride;break;case"TEXCOORD1":Qn(dr,Ae[ea],qr.offset,qn.array),Qt.stride=Ae[ea].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',ii)}}break;case"NORMAL":Qn(dr,Ae[qr.id],qr.offset,qt.array),qt.stride=Ae[qr.id].stride;break;case"COLOR":Qn(dr,Ae[qr.id],qr.offset,vt.array,!0),vt.stride=Ae[qr.id].stride;break;case"TEXCOORD":Qn(dr,Ae[qr.id],qr.offset,Qt.array),Qt.stride=Ae[qr.id].stride;break;case"TEXCOORD1":Qn(dr,Ae[qr.id],qr.offset,qn.array),qn.stride=Ae[qr.id].stride;break}}}return qe.array.length>0&&pn.setAttribute("position",new Kn(qe.array,qe.stride)),qt.array.length>0&&pn.setAttribute("normal",new Kn(qt.array,qt.stride)),vt.array.length>0&&pn.setAttribute("color",new Kn(vt.array,vt.stride)),Qt.array.length>0&&pn.setAttribute("uv",new Kn(Qt.array,Qt.stride)),qn.array.length>0&&pn.setAttribute("uv2",new Kn(qn.array,qn.stride)),Cn.array.length>0&&pn.setAttribute("skinIndex",new Kn(Cn.array,Cn.stride)),rr.array.length>0&&pn.setAttribute("skinWeight",new Kn(rr.array,rr.stride)),ze.data=pn,ze.type=Me[0].type,ze.materialKeys=vr,ze}function Qn(Me,Ae,We,ze,qe=!1){const qt=Me.p,Qt=Me.stride,qn=Me.vcount;function vt(pn){let vr=qt[pn+We]*rr;const Jn=vr+rr;for(;vr<Jn;vr++)ze.push(Cn[vr]);if(qe){const _r=ze.length-rr-1;Ji.setRGB(ze[_r+0],ze[_r+1],ze[_r+2]).convertSRGBToLinear(),ze[_r+0]=Ji.r,ze[_r+1]=Ji.g,ze[_r+2]=Ji.b}}const Cn=Ae.array,rr=Ae.stride;if(Me.vcount!==void 0){let pn=0;for(let vr=0,Jn=qn.length;vr<Jn;vr++){const _r=qn[vr];if(_r===4){const dr=pn+Qt*0,Li=pn+Qt*1,mn=pn+Qt*2,Or=pn+Qt*3;vt(dr),vt(Li),vt(Or),vt(Li),vt(mn),vt(Or)}else if(_r===3){const dr=pn+Qt*0,Li=pn+Qt*1,mn=pn+Qt*2;vt(dr),vt(Li),vt(mn)}else if(_r>4)for(let dr=1,Li=_r-2;dr<=Li;dr++){const mn=pn+Qt*0,Or=pn+Qt*dr,qr=pn+Qt*(dr+1);vt(mn),vt(Or),vt(qr)}pn+=Qt*_r}}else for(let pn=0,vr=qt.length;pn<vr;pn+=Qt)vt(pn)}function Xr(Me){return m(Sr.geometries[Me],On)}function Yn(Me){const Ae={name:Me.getAttribute("name")||"",joints:{},links:[]};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"technique_common":Zt(ze,Ae);break}}Sr.kinematicsModels[Me.getAttribute("id")]=Ae}function Q(Me){return Me.build!==void 0?Me.build:Me}function ue(Me){return m(Sr.kinematicsModels[Me],Q)}function Zt(Me,Ae){for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"joint":Ae.joints[ze.getAttribute("sid")]=Ee(ze);break;case"link":Ae.links.push(Et(ze));break}}}function Ee(Me){let Ae;for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"prismatic":case"revolute":Ae=ce(ze);break}}return Ae}function ce(Me){const Ae={sid:Me.getAttribute("sid"),name:Me.getAttribute("name")||"",axis:new it,limits:{min:0,max:0},type:Me.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"axis":const qe=a(ze.textContent);Ae.axis.fromArray(qe);break;case"limits":const qt=ze.getElementsByTagName("max")[0],Qt=ze.getElementsByTagName("min")[0];Ae.limits.max=parseFloat(qt.textContent),Ae.limits.min=parseFloat(Qt.textContent);break}}return Ae.limits.min>=Ae.limits.max&&(Ae.static=!0),Ae.middlePosition=(Ae.limits.min+Ae.limits.max)/2,Ae}function Et(Me){const Ae={sid:Me.getAttribute("sid"),name:Me.getAttribute("name")||"",attachments:[],transforms:[]};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"attachment_full":Ae.attachments.push(Ct(ze));break;case"matrix":case"translate":case"rotate":Ae.transforms.push(Ht(ze));break}}return Ae}function Ct(Me){const Ae={joint:Me.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"link":Ae.links.push(Et(ze));break;case"matrix":case"translate":case"rotate":Ae.transforms.push(Ht(ze));break}}return Ae}function Ht(Me){const Ae={type:Me.nodeName},We=a(Me.textContent);switch(Ae.type){case"matrix":Ae.obj=new or,Ae.obj.fromArray(We).transpose();break;case"translate":Ae.obj=new it,Ae.obj.fromArray(We);break;case"rotate":Ae.obj=new it,Ae.obj.fromArray(We),Ae.angle=yo.degToRad(We[3]);break}return Ae}function ct(Me){const Ae={name:Me.getAttribute("name")||"",rigidBodies:{}};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"rigid_body":Ae.rigidBodies[ze.getAttribute("name")]={},Ot(ze,Ae.rigidBodies[ze.getAttribute("name")]);break}}Sr.physicsModels[Me.getAttribute("id")]=Ae}function Ot(Me,Ae){for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"technique_common":rn(ze,Ae);break}}}function rn(Me,Ae){for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"inertia":Ae.inertia=a(ze.textContent);break;case"mass":Ae.mass=a(ze.textContent)[0];break}}}function gn(Me){const Ae={bindJointAxis:[]};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"bind_joint_axis":Ae.bindJointAxis.push(Zn(ze));break}}Sr.kinematicsScenes[o(Me.getAttribute("url"))]=Ae}function Zn(Me){const Ae={target:Me.getAttribute("target").split("/").pop()};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType===1)switch(ze.nodeName){case"axis":const qe=ze.getElementsByTagName("param")[0];Ae.axis=qe.textContent;const qt=Ae.axis.split("inst_").pop().split("axis")[0];Ae.jointIndex=qt.substring(0,qt.length-1);break}}return Ae}function rt(Me){return Me.build!==void 0?Me.build:Me}function fr(Me){return m(Sr.kinematicsScenes[Me],rt)}function mt(){const Me=Object.keys(Sr.kinematicsModels)[0],Ae=Object.keys(Sr.kinematicsScenes)[0],We=Object.keys(Sr.visualScenes)[0];if(Me===void 0||Ae===void 0)return;const ze=ue(Me),qe=fr(Ae),qt=ar(We),Qt=qe.bindJointAxis,qn={};for(let rr=0,pn=Qt.length;rr<pn;rr++){const vr=Qt[rr],Jn=Pr.querySelector('[sid="'+vr.target+'"]');if(Jn){const _r=Jn.parentElement;vt(vr.jointIndex,_r)}}function vt(rr,pn){const vr=pn.getAttribute("name"),Jn=ze.joints[rr];qt.traverse(function(_r){_r.name===vr&&(qn[rr]={object:_r,transforms:Fe(pn),joint:Jn,position:Jn.zeroPosition})})}const Cn=new or;Eo={joints:ze&&ze.joints,getJointValue:function(rr){const pn=qn[rr];if(pn)return pn.position;console.warn("THREE.ColladaLoader: Joint "+rr+" doesn't exist.")},setJointValue:function(rr,pn){const vr=qn[rr];if(vr){const Jn=vr.joint;if(pn>Jn.limits.max||pn<Jn.limits.min)console.warn("THREE.ColladaLoader: Joint "+rr+" value "+pn+" outside of limits (min: "+Jn.limits.min+", max: "+Jn.limits.max+").");else if(Jn.static)console.warn("THREE.ColladaLoader: Joint "+rr+" is static.");else{const _r=vr.object,dr=Jn.axis,Li=vr.transforms;Qe.identity();for(let mn=0;mn<Li.length;mn++){const Or=Li[mn];if(Or.sid&&Or.sid.indexOf(rr)!==-1)switch(Jn.type){case"revolute":Qe.multiply(Cn.makeRotationAxis(dr,yo.degToRad(pn)));break;case"prismatic":Qe.multiply(Cn.makeTranslation(dr.x*pn,dr.y*pn,dr.z*pn));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+Jn.type);break}else switch(Or.type){case"matrix":Qe.multiply(Or.obj);break;case"translate":Qe.multiply(Cn.makeTranslation(Or.obj.x,Or.obj.y,Or.obj.z));break;case"scale":Qe.scale(Or.obj);break;case"rotate":Qe.multiply(Cn.makeRotationAxis(Or.obj,Or.angle));break}}_r.matrix.copy(Qe),_r.matrix.decompose(_r.position,_r.quaternion,_r.scale),qn[rr].position=pn}}else console.log("THREE.ColladaLoader: "+rr+" does not exist.")}}}function Fe(Me){const Ae=[],We=Pr.querySelector('[id="'+Me.id+'"]');for(let ze=0;ze<We.childNodes.length;ze++){const qe=We.childNodes[ze];if(qe.nodeType!==1)continue;let qt,Qt;switch(qe.nodeName){case"matrix":qt=a(qe.textContent);const qn=new or().fromArray(qt).transpose();Ae.push({sid:qe.getAttribute("sid"),type:qe.nodeName,obj:qn});break;case"translate":case"scale":qt=a(qe.textContent),Qt=new it().fromArray(qt),Ae.push({sid:qe.getAttribute("sid"),type:qe.nodeName,obj:Qt});break;case"rotate":qt=a(qe.textContent),Qt=new it().fromArray(qt);const vt=yo.degToRad(qt[3]);Ae.push({sid:qe.getAttribute("sid"),type:qe.nodeName,obj:Qt,angle:vt});break}}return Ae}function Dt(Me){const Ae=Me.getElementsByTagName("node");for(let We=0;We<Ae.length;We++){const ze=Ae[We];ze.hasAttribute("id")===!1&&ze.setAttribute("id",l())}}const Qe=new or,yt=new it;function ht(Me){const Ae={name:Me.getAttribute("name")||"",type:Me.getAttribute("type"),id:Me.getAttribute("id"),sid:Me.getAttribute("sid"),matrix:new or,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];if(ze.nodeType!==1)continue;let qe;switch(ze.nodeName){case"node":Ae.nodes.push(ze.getAttribute("id")),ht(ze);break;case"instance_camera":Ae.instanceCameras.push(o(ze.getAttribute("url")));break;case"instance_controller":Ae.instanceControllers.push(Nt(ze));break;case"instance_light":Ae.instanceLights.push(o(ze.getAttribute("url")));break;case"instance_geometry":Ae.instanceGeometries.push(Nt(ze));break;case"instance_node":Ae.instanceNodes.push(o(ze.getAttribute("url")));break;case"matrix":qe=a(ze.textContent),Ae.matrix.multiply(Qe.fromArray(qe).transpose()),Ae.transforms[ze.getAttribute("sid")]=ze.nodeName;break;case"translate":qe=a(ze.textContent),yt.fromArray(qe),Ae.matrix.multiply(Qe.makeTranslation(yt.x,yt.y,yt.z)),Ae.transforms[ze.getAttribute("sid")]=ze.nodeName;break;case"rotate":qe=a(ze.textContent);const qt=yo.degToRad(qe[3]);Ae.matrix.multiply(Qe.makeRotationAxis(yt.fromArray(qe),qt)),Ae.transforms[ze.getAttribute("sid")]=ze.nodeName;break;case"scale":qe=a(ze.textContent),Ae.matrix.scale(yt.fromArray(qe)),Ae.transforms[ze.getAttribute("sid")]=ze.nodeName;break;case"extra":break;default:console.log(ze)}}return Fn(Ae.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",Ae.id):Sr.nodes[Ae.id]=Ae,Ae}function Nt(Me){const Ae={id:o(Me.getAttribute("url")),materials:{},skeletons:[]};for(let We=0;We<Me.childNodes.length;We++){const ze=Me.childNodes[We];switch(ze.nodeName){case"bind_material":const qe=ze.getElementsByTagName("instance_material");for(let qt=0;qt<qe.length;qt++){const Qt=qe[qt],qn=Qt.getAttribute("symbol"),vt=Qt.getAttribute("target");Ae.materials[qn]=o(vt)}break;case"skeleton":Ae.skeletons.push(o(ze.textContent));break}}return Ae}function yn(Me,Ae){const We=[],ze=[];let qe,qt,Qt;for(qe=0;qe<Me.length;qe++){const Cn=Me[qe];let rr;if(Fn(Cn))rr=yr(Cn),un(rr,Ae,We);else if(Br(Cn)){const vr=Sr.visualScenes[Cn].children;for(let Jn=0;Jn<vr.length;Jn++){const _r=vr[Jn];if(_r.type==="JOINT"){const dr=yr(_r.id);un(dr,Ae,We)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",Cn)}for(qe=0;qe<Ae.length;qe++)for(qt=0;qt<We.length;qt++)if(Qt=We[qt],Qt.bone.name===Ae[qe].name){ze[qe]=Qt,Qt.processed=!0;break}for(qe=0;qe<We.length;qe++)Qt=We[qe],Qt.processed===!1&&(ze.push(Qt),Qt.processed=!0);const qn=[],vt=[];for(qe=0;qe<ze.length;qe++)Qt=ze[qe],qn.push(Qt.bone),vt.push(Qt.boneInverse);return new J_(qn,vt)}function un(Me,Ae,We){Me.traverse(function(ze){if(ze.isBone===!0){let qe;for(let qt=0;qt<Ae.length;qt++){const Qt=Ae[qt];if(Qt.name===ze.name){qe=Qt.boneInverse;break}}qe===void 0&&(qe=new or),We.push({bone:ze,boneInverse:qe,processed:!1})}})}function Dn(Me){const Ae=[],We=Me.matrix,ze=Me.nodes,qe=Me.type,qt=Me.instanceCameras,Qt=Me.instanceControllers,qn=Me.instanceLights,vt=Me.instanceGeometries,Cn=Me.instanceNodes;for(let pn=0,vr=ze.length;pn<vr;pn++)Ae.push(yr(ze[pn]));for(let pn=0,vr=qt.length;pn<vr;pn++){const Jn=ve(qt[pn]);Jn!==null&&Ae.push(Jn.clone())}for(let pn=0,vr=Qt.length;pn<vr;pn++){const Jn=Qt[pn],_r=pe(Jn.id),dr=Xr(_r.id),Li=Hn(dr,Jn.materials),mn=Jn.skeletons,Or=_r.skin.joints,qr=yn(mn,Or);for(let ii=0,ea=Li.length;ii<ea;ii++){const nc=Li[ii];nc.isSkinnedMesh&&(nc.bind(qr,_r.skin.bindMatrix),nc.normalizeSkinWeights()),Ae.push(nc)}}for(let pn=0,vr=qn.length;pn<vr;pn++){const Jn=Pe(qn[pn]);Jn!==null&&Ae.push(Jn.clone())}for(let pn=0,vr=vt.length;pn<vr;pn++){const Jn=vt[pn],_r=Xr(Jn.id),dr=Hn(_r,Jn.materials);for(let Li=0,mn=dr.length;Li<mn;Li++)Ae.push(dr[Li])}for(let pn=0,vr=Cn.length;pn<vr;pn++)Ae.push(yr(Cn[pn]).clone());let rr;if(ze.length===0&&Ae.length===1)rr=Ae[0];else{rr=qe==="JOINT"?new a_:new gl;for(let pn=0;pn<Ae.length;pn++)rr.add(Ae[pn])}return rr.name=qe==="JOINT"?Me.sid:Me.name,rr.matrix.copy(We),rr.matrix.decompose(rr.position,rr.quaternion,rr.scale),rr}const nr=new Dc({color:16711935});function bn(Me,Ae){const We=[];for(let ze=0,qe=Me.length;ze<qe;ze++){const qt=Ae[Me[ze]];qt===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",Me[ze]),We.push(nr)):We.push(It(qt))}return We}function Hn(Me,Ae){const We=[];for(const ze in Me){const qe=Me[ze],qt=bn(qe.materialKeys,Ae);qt.length===0&&(ze==="lines"||ze==="linestrips"?qt.push(new Bc):qt.push(new zf));const Qt=qe.data.attributes.skinIndex!==void 0,qn=qt.length===1?qt[0]:qt;let vt;switch(ze){case"lines":vt=new Sv(qe.data,qn);break;case"linestrips":vt=new eb(qe.data,qn);break;case"triangles":case"polylist":Qt?vt=new kI(qe.data,qn):vt=new ps(qe.data,qn);break}We.push(vt)}return We}function Fn(Me){return Sr.nodes[Me]!==void 0}function yr(Me){return m(Sr.nodes[Me],Dn)}function Yr(Me){const Ae={name:Me.getAttribute("name"),children:[]};Dt(Me);const We=r(Me,"node");for(let ze=0;ze<We.length;ze++)Ae.children.push(ht(We[ze]));Sr.visualScenes[Me.getAttribute("id")]=Ae}function Mr(Me){const Ae=new gl;Ae.name=Me.name;const We=Me.children;for(let ze=0;ze<We.length;ze++){const qe=We[ze];Ae.add(yr(qe.id))}return Ae}function Br(Me){return Sr.visualScenes[Me]!==void 0}function ar(Me){return m(Sr.visualScenes[Me],Mr)}function Pi(Me){const Ae=r(Me,"instance_visual_scene")[0];return ar(o(Ae.getAttribute("url")))}function zr(){const Me=Sr.clips;if(u(Me)===!0){if(u(Sr.animations)===!1){const Ae=[];for(const We in Sr.animations){const ze=b(We);for(let qe=0,qt=ze.length;qe<qt;qe++)Ae.push(ze[qe])}aa.push(new xv("default",-1,Ae))}}else for(const Ae in Me)aa.push(U(Ae))}function Ns(Me){let Ae="";const We=[Me];for(;We.length;){const ze=We.shift();ze.nodeType===Node.TEXT_NODE?Ae+=ze.textContent:(Ae+=`
`,We.push.apply(We,ze.childNodes))}return Ae.trim()}if(e.length===0)return{scene:new C9};const ns=new DOMParser().parseFromString(e,"application/xml"),Pr=r(ns,"COLLADA")[0],nl=ns.getElementsByTagName("parsererror")[0];if(nl!==void 0){const Me=r(nl,"div")[0];let Ae;return Me?Ae=Me.textContent:Ae=Ns(nl),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,Ae),null}const Ri=Pr.getAttribute("version");console.log("THREE.ColladaLoader: File version",Ri);const rs=c(r(Pr,"asset")[0]),Ea=new l_(this.manager);Ea.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let Yi;JO&&(Yi=new JO(this.manager),Yi.setPath(this.resourcePath||t));const Ji=new Un,aa=[];let Eo={},zv=0;const Sr={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};h(Pr,"library_animations","animation",v),h(Pr,"library_animation_clips","animation_clip",k),h(Pr,"library_controllers","controller",B),h(Pr,"library_images","image",de),h(Pr,"library_effects","effect",Be),h(Pr,"library_materials","material",Ve),h(Pr,"library_cameras","camera",De),h(Pr,"library_lights","light",Le),h(Pr,"library_geometries","geometry",Rt),h(Pr,"library_nodes","node",ht),h(Pr,"library_visual_scenes","visual_scene",Yr),h(Pr,"library_kinematics_models","kinematics_model",Yn),h(Pr,"library_physics_models","physics_model",ct),h(Pr,"scene","instance_kinematics_scene",gn),p(Sr.animations,_),p(Sr.clips,H),p(Sr.controllers,ne),p(Sr.images,me),p(Sr.effects,te),p(Sr.materials,At),p(Sr.cameras,_e),p(Sr.lights,wt),p(Sr.geometries,On),p(Sr.visualScenes,Mr),zr(),mt();const Kd=Pi(r(Pr,"scene")[0]);return Kd.animations=aa,rs.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),Kd.quaternion.setFromEuler(new Pf(-Math.PI/2,0,0))),Kd.scale.multiplyScalar(rs.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),aa},kinematics:Eo,library:Sr,scene:Kd}}}class Oht extends eo{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new zht(t)}),this.register(function(t){return new jht(t)}),this.register(function(t){return new Kht(t)}),this.register(function(t){return new Vht(t)}),this.register(function(t){return new $ht(t)}),this.register(function(t){return new Ght(t)}),this.register(function(t){return new Wht(t)}),this.register(function(t){return new Uht(t)}),this.register(function(t){return new qht(t)}),this.register(function(t){return new Hht(t)}),this.register(function(t){return new Bht(t)}),this.register(function(t){return new Xht(t)})}load(e,t,r,i){const a=this;let s;this.resourcePath!==""?s=this.resourcePath:this.path!==""?s=this.path:s=To.extractUrlBase(e),this.manager.itemStart(e);const o=function(u){i?i(u):console.error(u),a.manager.itemError(e),a.manager.itemEnd(e)},l=new Co(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{a.parse(u,s,function(c){t(c),a.manager.itemEnd(e)},o)}catch(c){o(c)}},r,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let a;const s={},o={};if(typeof e=="string")a=e;else if(To.decodeText(new Uint8Array(e,0,4))===Ufe){try{s[di.KHR_BINARY_GLTF]=new Yht(e)}catch(d){i&&i(d);return}a=s[di.KHR_BINARY_GLTF].content}else a=To.decodeText(new Uint8Array(e));const l=JSON.parse(a);if(l.asset===void 0||l.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new upt(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const d=this.pluginCallbacks[c](u);o[d.name]=d,s[d.name]=!0}if(l.extensionsUsed)for(let c=0;c<l.extensionsUsed.length;++c){const d=l.extensionsUsed[c],f=l.extensionsRequired||[];switch(d){case di.KHR_MATERIALS_UNLIT:s[d]=new Fht;break;case di.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:s[d]=new Jht;break;case di.KHR_DRACO_MESH_COMPRESSION:s[d]=new Qht(l,this.dracoLoader);break;case di.KHR_TEXTURE_TRANSFORM:s[d]=new Zht;break;case di.KHR_MESH_QUANTIZATION:s[d]=new ept;break;default:f.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}u.setExtensions(s),u.setPlugins(o),u.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,a){r.parse(e,t,i,a)})}}function Nht(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const di={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Bht{constructor(e){this.parser=e,this.name=di.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const a=t[r];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const a=t.json,l=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let u;const c=new Un(16777215);l.color!==void 0&&c.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new jw(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new wv(c),u.distance=d;break;case"spot":u=new OI(c),u.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),t.cache.add(r,i),i}createNodeAttachment(e){const t=this,r=this.parser,a=r.json.nodes[e],o=(a.extensions&&a.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return r._getNodeRef(t.cache,o,l)})}}class Fht{constructor(){this.name=di.KHR_MATERIALS_UNLIT}getMaterialType(){return Dc}extendParams(e,t,r){const i=[];e.color=new Un(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const s=a.baseColorFactor;e.color.fromArray(s),e.opacity=s[3]}a.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",a.baseColorTexture,ai))}return Promise.all(i)}}class Uht{constructor(e){this.parser=e,this.name=di.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=i.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}}class zht{constructor(e){this.parser=e,this.name=di.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:hm}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&a.push(r.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&a.push(r.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(a.push(r.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const o=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new sn(o,o)}return Promise.all(a)}}class Hht{constructor(e){this.parser=e,this.name=di.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:hm}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&a.push(r.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&a.push(r.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(a)}}class Vht{constructor(e){this.parser=e,this.name=di.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:hm}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new Un(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=i.extensions[this.name];return s.sheenColorFactor!==void 0&&t.sheenColor.fromArray(s.sheenColorFactor),s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&a.push(r.assignTexture(t,"sheenColorMap",s.sheenColorTexture,ai)),s.sheenRoughnessTexture!==void 0&&a.push(r.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(a)}}class $ht{constructor(e){this.parser=e,this.name=di.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:hm}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&a.push(r.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(a)}}class Ght{constructor(e){this.parser=e,this.name=di.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:hm}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&a.push(r.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||0;const o=s.attenuationColor||[1,1,1];return t.attenuationColor=new Un(o[0],o[1],o[2]),Promise.all(a)}}class Wht{constructor(e){this.parser=e,this.name=di.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:hm}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=i.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class qht{constructor(e){this.parser=e,this.name=di.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:hm}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const a=[],s=i.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&a.push(r.assignTexture(t,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return t.specularColor=new Un(o[0],o[1],o[2]),s.specularColorTexture!==void 0&&a.push(r.assignTexture(t,"specularColorMap",s.specularColorTexture,ai)),Promise.all(a)}}class jht{constructor(e){this.parser=e,this.name=di.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const a=i.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,s)}}class Kht{constructor(e){this.parser=e,this.name=di.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,a=i.textures[e];if(!a.extensions||!a.extensions[t])return null;const s=a.extensions[t],o=i.images[s.source];let l=r.textureLoader;if(o.uri){const u=r.options.manager.getHandler(o.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,s.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Xht{constructor(e){this.name=di.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],a=this.parser.getDependency("buffer",i.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([a,s.ready]).then(function(o){const l=i.byteOffset||0,u=i.byteLength||0,c=i.count,d=i.byteStride,f=new ArrayBuffer(c*d),h=new Uint8Array(o[0],l,u);return s.decodeGltfBuffer(new Uint8Array(f),c,d,h,i.mode,i.filter),f})}else return null}}const Ufe="glTF",yS=12,EY={JSON:1313821514,BIN:5130562};class Yht{constructor(e){this.name=di.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,yS);if(this.header={magic:To.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Ufe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-yS,i=new DataView(e,yS);let a=0;for(;a<r;){const s=i.getUint32(a,!0);a+=4;const o=i.getUint32(a,!0);if(a+=4,o===EY.JSON){const l=new Uint8Array(e,yS+a,s);this.content=To.decodeText(l)}else if(o===EY.BIN){const l=yS+a;this.body=e.slice(l,l+s)}a+=s}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Qht{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=di.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,a=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,o={},l={},u={};for(const c in s){const d=t8[c]||c.toLowerCase();o[d]=s[c]}for(const c in e.attributes){const d=t8[c]||c.toLowerCase();if(s[c]!==void 0){const f=r.accessors[e.attributes[c]],h=nw[f.componentType];u[d]=h,l[d]=f.normalized===!0}}return t.getDependency("bufferView",a).then(function(c){return new Promise(function(d){i.decodeDracoFile(c,function(f){for(const h in f.attributes){const p=f.attributes[h],m=l[h];m!==void 0&&(p.normalized=m)}d(f)},o,u)})})}}class Zht{constructor(){this.name=di.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class e8 extends tb{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),r=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),a=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),s=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),o={specular:{value:new Un().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(l){for(const u in o)l.uniforms[u]=o[u];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",a).replace("#include <lights_physical_fragment>",s)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(l){o.specular.value=l}},specularMap:{get:function(){return o.specularMap.value},set:function(l){o.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(l){o.glossiness.value=l}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(l){o.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Jht{constructor(){this.name=di.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return e8}extendParams(e,t,r){const i=t.extensions[this.name];e.color=new Un(1,1,1),e.opacity=1;const a=[];if(Array.isArray(i.diffuseFactor)){const s=i.diffuseFactor;e.color.fromArray(s),e.opacity=s[3]}if(i.diffuseTexture!==void 0&&a.push(r.assignTexture(e,"map",i.diffuseTexture,ai)),e.emissive=new Un(0,0,0),e.glossiness=i.glossinessFactor!==void 0?i.glossinessFactor:1,e.specular=new Un(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),i.specularGlossinessTexture!==void 0){const s=i.specularGlossinessTexture;a.push(r.assignTexture(e,"glossinessMap",s)),a.push(r.assignTexture(e,"specularMap",s,ai))}return Promise.all(a)}createMaterial(e){const t=new e8(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=Lv,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class ept{constructor(){this.name=di.KHR_MESH_QUANTIZATION}}class zfe extends qw{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i*3+i;for(let s=0;s!==i;s++)t[s]=r[a+s];return t}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=o*2,u=o*3,c=i-t,d=(r-t)/c,f=d*d,h=f*d,p=e*u,m=p-u,v=-2*h+3*f,g=h-f,y=1-v,_=g-f+d;for(let b=0;b!==o;b++){const x=s[m+b+o],w=s[m+b+l]*c,A=s[p+b+o],T=s[p+b]*c;a[b]=y*x+_*w+v*A+g*T}return a}}const tpt=new qs;class npt extends zfe{interpolate_(e,t,r,i){const a=super.interpolate_(e,t,r,i);return tpt.fromArray(a).normalize().toArray(a),a}}const lf={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},nw={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},MY={9728:Cs,9729:Za,9984:T3,9985:m9,9986:C3,9987:yh},IY={33071:hs,33648:H2,10497:vl},DY={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},t8={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Wh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rpt={CUBICSPLINE:void 0,LINEAR:r_,STEP:$2},Nk={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ipt(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new tb({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Qp})),n.DefaultMaterial}function _S(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function l0(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function apt(n,e,t){let r=!1,i=!1,a=!1;for(let u=0,c=e.length;u<c;u++){const d=e[u];if(d.POSITION!==void 0&&(r=!0),d.NORMAL!==void 0&&(i=!0),d.COLOR_0!==void 0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(n);const s=[],o=[],l=[];for(let u=0,c=e.length;u<c;u++){const d=e[u];if(r){const f=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;s.push(f)}if(i){const f=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;o.push(f)}if(a){const f=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(l)]).then(function(u){const c=u[0],d=u[1],f=u[2];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=d),a&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function spt(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function opt(n){const e=n.extensions&&n.extensions[di.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+PY(e.attributes):t=n.indices+":"+PY(n.attributes)+":"+n.mode,t}function PY(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function n8(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function lpt(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class upt{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Nht,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,a=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||r||i&&a<98?this.textureLoader=new l_(this.options.manager):this.textureLoader=new Pft(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Co(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(s){const o={scene:s[0][i.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:i.asset,parser:r,userData:{}};_S(a,o,i),l0(o,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,a=t.length;i<a;i++){const s=t[i].joints;for(let o=0,l=s.length;o<l;o++)e[s[o]].isBone=!0}for(let i=0,a=e.length;i<a;i++){const s=e[i];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(r[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),a=(s,o)=>{const l=this.associations.get(s);l!=null&&this.associations.set(o,l);for(const[u,c]of s.children.entries())a(c,o.children[u])};return a(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const a=e(t[i]);a&&r.push(a)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(a,s){return r.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[di.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(a,s){r.load(To.resolveURL(t.uri,i.path),a,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,a=t.byteOffset||0;return r.slice(a,a+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0)return Promise.resolve(null);const a=[];return i.bufferView!==void 0?a.push(this.getDependency("bufferView",i.bufferView)):a.push(null),i.sparse!==void 0&&(a.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(a).then(function(s){const o=s[0],l=DY[i.type],u=nw[i.componentType],c=u.BYTES_PER_ELEMENT,d=c*l,f=i.byteOffset||0,h=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,p=i.normalized===!0;let m,v;if(h&&h!==d){const g=Math.floor(f/h),y="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count;let _=t.cache.get(y);_||(m=new u(o,g*h,i.count*h/c),_=new A9(m,h/c),t.cache.add(y,_)),v=new bv(_,l,f%h/c,p)}else o===null?m=new u(i.count*l):m=new u(o,f,i.count*l),v=new ka(m,l,p);if(i.sparse!==void 0){const g=DY.SCALAR,y=nw[i.sparse.indices.componentType],_=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,x=new y(s[1],_,i.sparse.count*g),w=new u(s[2],b,i.sparse.count*l);o!==null&&(v=new ka(v.array.slice(),v.itemSize,v.normalized));for(let A=0,T=x.length;A<T;A++){const C=x[A];if(v.setX(C,w[A*l]),l>=2&&v.setY(C,w[A*l+1]),l>=3&&v.setZ(C,w[A*l+2]),l>=4&&v.setW(C,w[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,r=this.options,a=t.textures[e].source,s=t.images[a];let o=this.textureLoader;if(s.uri){const l=r.manager.getHandler(s.uri);l!==null&&(o=l)}return this.loadTextureImage(e,a,o)}loadTextureImage(e,t,r){const i=this,a=this.json,s=a.textures[e],o=a.images[t],l=(o.uri||o.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,r).then(function(c){c.flipY=!1,s.name&&(c.name=s.name);const f=(a.samplers||{})[s.sampler]||{};return c.magFilter=MY[f.magFilter]||Za,c.minFilter=MY[f.minFilter]||yh,c.wrapS=IY[f.wrapS]||vl,c.wrapT=IY[f.wrapT]||vl,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const r=this,i=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const s=i.images[e],o=self.URL||self.webkitURL;let l=s.uri||"",u=!1;if(s.bufferView!==void 0)l=r.getDependency("bufferView",s.bufferView).then(function(d){u=!0;const f=new Blob([d],{type:s.mimeType});return l=o.createObjectURL(f),l});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(d){return new Promise(function(f,h){let p=f;t.isImageBitmapLoader===!0&&(p=function(m){const v=new Qs(m);v.needsUpdate=!0,f(v)}),t.load(To.resolveURL(d,a.path),p,void 0,h)})}).then(function(d){return u===!0&&o.revokeObjectURL(l),d.userData.mimeType=s.mimeType||lpt(s.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){const a=this;return this.getDependency("texture",r.index).then(function(s){if(r.texCoord!==void 0&&r.texCoord!=0&&!(t==="aoMap"&&r.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),a.extensions[di.KHR_TEXTURE_TRANSFORM]){const o=r.extensions!==void 0?r.extensions[di.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=a.associations.get(s);s=a.extensions[di.KHR_TEXTURE_TRANSFORM].extendTexture(s,o),a.associations.set(s,l)}}return i!==void 0&&(s.encoding=i),e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+r.uuid;let l=this.cache.get(o);l||(l=new N0,ts.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(o,l)),r=l}else if(e.isLine){const o="LineBasicMaterial:"+r.uuid;let l=this.cache.get(o);l||(l=new Bc,ts.prototype.copy.call(l,r),l.color.copy(r.color),this.cache.add(o,l)),r=l}if(i||a||s){let o="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(o+="specular-glossiness:"),i&&(o+="derivative-tangents:"),a&&(o+="vertex-colors:"),s&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=r.clone(),a&&(l.vertexColors=!0),s&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(r))),r=l}r.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return tb}loadMaterial(e){const t=this,r=this.json,i=this.extensions,a=r.materials[e];let s;const o={},l=a.extensions||{},u=[];if(l[di.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=i[di.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];s=d.getMaterialType(),u.push(d.extendParams(o,a,t))}else if(l[di.KHR_MATERIALS_UNLIT]){const d=i[di.KHR_MATERIALS_UNLIT];s=d.getMaterialType(),u.push(d.extendParams(o,a,t))}else{const d=a.pbrMetallicRoughness||{};if(o.color=new Un(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const f=d.baseColorFactor;o.color.fromArray(f),o.opacity=f[3]}d.baseColorTexture!==void 0&&u.push(t.assignTexture(o,"map",d.baseColorTexture,ai)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),u.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),s=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,o)})))}a.doubleSided===!0&&(o.side=Zp);const c=a.alphaMode||Nk.OPAQUE;if(c===Nk.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,c===Nk.MASK&&(o.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&s!==Dc&&(u.push(t.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new sn(1,1),a.normalTexture.scale!==void 0)){const d=a.normalTexture.scale;o.normalScale.set(d,d)}return a.occlusionTexture!==void 0&&s!==Dc&&(u.push(t.assignTexture(o,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&s!==Dc&&(o.emissive=new Un().fromArray(a.emissiveFactor)),a.emissiveTexture!==void 0&&s!==Dc&&u.push(t.assignTexture(o,"emissiveMap",a.emissiveTexture,ai)),Promise.all(u).then(function(){let d;return s===e8?d=i[di.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):d=new s(o),a.name&&(d.name=a.name),l0(d,a),t.associations.set(d,{materials:e}),a.extensions&&_S(i,d,a),d})}createUniqueName(e){const t=_i.sanitizeNodeName(e||"");let r=t;for(let i=1;this.nodeNamesUsed[r];++i)r=t+"_"+i;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function a(o){return r[di.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return RY(l,o,t)})}const s=[];for(let o=0,l=e.length;o<l;o++){const u=e[o],c=opt(u),d=i[c];if(d)s.push(d.promise);else{let f;u.extensions&&u.extensions[di.KHR_DRACO_MESH_COMPRESSION]?f=a(u):f=RY(new pi,u,t),i[c]={primitive:u,promise:f},s.push(f)}}return Promise.all(s)}loadMesh(e){const t=this,r=this.json,i=this.extensions,a=r.meshes[e],s=a.primitives,o=[];for(let l=0,u=s.length;l<u;l++){const c=s[l].material===void 0?ipt(this.cache):this.getDependency("material",s[l].material);o.push(c)}return o.push(t.loadGeometries(s)),Promise.all(o).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],d=[];for(let h=0,p=c.length;h<p;h++){const m=c[h],v=s[h];let g;const y=u[h];if(v.mode===lf.TRIANGLES||v.mode===lf.TRIANGLE_STRIP||v.mode===lf.TRIANGLE_FAN||v.mode===void 0)g=a.isSkinnedMesh===!0?new kI(m,y):new ps(m,y),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),v.mode===lf.TRIANGLE_STRIP?g.geometry=kY(g.geometry,ast):v.mode===lf.TRIANGLE_FAN&&(g.geometry=kY(g.geometry,dde));else if(v.mode===lf.LINES)g=new Sv(m,y);else if(v.mode===lf.LINE_STRIP)g=new eb(m,y);else if(v.mode===lf.LINE_LOOP)g=new Bde(m,y);else if(v.mode===lf.POINTS)g=new xx(m,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(g.geometry.morphAttributes).length>0&&spt(g,a),g.name=t.createUniqueName(a.name||"mesh_"+e),l0(g,a),v.extensions&&_S(i,g,v),t.assignFinalMaterial(g),d.push(g)}for(let h=0,p=d.length;h<p;h++)t.associations.set(d[h],{meshes:e,primitives:h});if(d.length===1)return d[0];const f=new gl;t.associations.set(f,{meshes:e});for(let h=0,p=d.length;h<p;h++)f.add(d[h]);return f})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new ds(yo.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Q_(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),l0(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(i){return r.inverseBindMatrices=i,r})}loadAnimation(e){const r=this.json.animations[e],i=[],a=[],s=[],o=[],l=[];for(let u=0,c=r.channels.length;u<c;u++){const d=r.channels[u],f=r.samplers[d.sampler],h=d.target,p=h.node!==void 0?h.node:h.id,m=r.parameters!==void 0?r.parameters[f.input]:f.input,v=r.parameters!==void 0?r.parameters[f.output]:f.output;i.push(this.getDependency("node",p)),a.push(this.getDependency("accessor",m)),s.push(this.getDependency("accessor",v)),o.push(f),l.push(h)}return Promise.all([Promise.all(i),Promise.all(a),Promise.all(s),Promise.all(o),Promise.all(l)]).then(function(u){const c=u[0],d=u[1],f=u[2],h=u[3],p=u[4],m=[];for(let g=0,y=c.length;g<y;g++){const _=c[g],b=d[g],x=f[g],w=h[g],A=p[g];if(_===void 0)continue;_.updateMatrix();let T;switch(Wh[A.path]){case Wh.weights:T=s_;break;case Wh.rotation:T=th;break;case Wh.position:case Wh.scale:default:T=nm;break}const C=_.name?_.name:_.uuid,E=w.interpolation!==void 0?rpt[w.interpolation]:r_,I=[];Wh[A.path]===Wh.weights?_.traverse(function(L){L.morphTargetInfluences&&I.push(L.name?L.name:L.uuid)}):I.push(C);let P=x.array;if(x.normalized){const L=n8(P.constructor),N=new Float32Array(P.length);for(let F=0,k=P.length;F<k;F++)N[F]=P[F]*L;P=N}for(let L=0,N=I.length;L<N;L++){const F=new T(I[L]+"."+Wh[A.path],b.array,P,E);w.interpolation==="CUBICSPLINE"&&(F.createInterpolant=function(H){const U=this instanceof th?npt:zfe;return new U(this.times,this.values,this.getValueSize()/3,H)},F.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(F)}}const v=r.name?r.name:"animation_"+e;return new xv(v,void 0,m)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(a){const s=r._getNodeRef(r.meshCache,i.mesh,a);return i.weights!==void 0&&s.traverse(function(o){if(o.isMesh)for(let l=0,u=i.weights.length;l<u;l++)o.morphTargetInfluences[l]=i.weights[l]}),s})}loadNode(e){const t=this.json,r=this.extensions,i=this,a=t.nodes[e],s=a.name?i.createUniqueName(a.name):"";return function(){const o=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&o.push(l),a.camera!==void 0&&o.push(i.getDependency("camera",a.camera).then(function(u){return i._getNodeRef(i.cameraCache,a.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){o.push(u)}),Promise.all(o)}().then(function(o){let l;if(a.isBone===!0?l=new a_:o.length>1?l=new gl:o.length===1?l=o[0]:l=new Sa,l!==o[0])for(let u=0,c=o.length;u<c;u++)l.add(o[u]);if(a.name&&(l.userData.name=a.name,l.name=s),l0(l,a),a.extensions&&_S(r,l,a),a.matrix!==void 0){const u=new or;u.fromArray(a.matrix),l.applyMatrix4(u)}else a.translation!==void 0&&l.position.fromArray(a.translation),a.rotation!==void 0&&l.quaternion.fromArray(a.rotation),a.scale!==void 0&&l.scale.fromArray(a.scale);return i.associations.has(l)||i.associations.set(l,{}),i.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,r=this.extensions,i=this.json.scenes[e],a=this,s=new gl;i.name&&(s.name=a.createUniqueName(i.name)),l0(s,i),i.extensions&&_S(r,s,i);const o=i.nodes||[],l=[];for(let u=0,c=o.length;u<c;u++)l.push(Hfe(o[u],s,t,a));return Promise.all(l).then(function(){const u=c=>{const d=new Map;for(const[f,h]of a.associations)(f instanceof ts||f instanceof Qs)&&d.set(f,h);return c.traverse(f=>{const h=a.associations.get(f);h!=null&&d.set(f,h)}),d};return a.associations=u(s),s})}}function Hfe(n,e,t,r){const i=t.nodes[n];return r.getDependency("node",n).then(function(a){if(i.skin===void 0)return a;let s;return r.getDependency("skin",i.skin).then(function(o){s=o;const l=[];for(let u=0,c=s.joints.length;u<c;u++)l.push(r.getDependency("node",s.joints[u]));return Promise.all(l)}).then(function(o){return a.traverse(function(l){if(!l.isMesh)return;const u=[],c=[];for(let d=0,f=o.length;d<f;d++){const h=o[d];if(h){u.push(h);const p=new or;s.inverseBindMatrices!==void 0&&p.fromArray(s.inverseBindMatrices.array,d*16),c.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',s.joints[d])}l.bind(new J_(u,c),l.matrixWorld)}),a})}).then(function(a){e.add(a);const s=[];if(i.children){const o=i.children;for(let l=0,u=o.length;l<u;l++){const c=o[l];s.push(Hfe(c,a,t,r))}}return Promise.all(s)})}function cpt(n,e,t){const r=e.attributes,i=new Ov;if(r.POSITION!==void 0){const o=t.json.accessors[r.POSITION],l=o.min,u=o.max;if(l!==void 0&&u!==void 0){if(i.set(new it(l[0],l[1],l[2]),new it(u[0],u[1],u[2])),o.normalized){const c=n8(nw[o.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const o=new it,l=new it;for(let u=0,c=a.length;u<c;u++){const d=a[u];if(d.POSITION!==void 0){const f=t.json.accessors[d.POSITION],h=f.min,p=f.max;if(h!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(h[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(h[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(h[2]),Math.abs(p[2]))),f.normalized){const m=n8(nw[f.componentType]);l.multiplyScalar(m)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}n.boundingBox=i;const s=new Nv;i.getCenter(s.center),s.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=s}function RY(n,e,t){const r=e.attributes,i=[];function a(s,o){return t.getDependency("accessor",s).then(function(l){n.setAttribute(o,l)})}for(const s in r){const o=t8[s]||s.toLowerCase();o in n.attributes||i.push(a(r[s],o))}if(e.indices!==void 0&&!n.index){const s=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});i.push(s)}return l0(n,e),cpt(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?apt(n,e.targets,t):n})}function kY(n,e){let t=n.getIndex();if(t===null){const s=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)s.push(l);n.setIndex(s),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(e===dde)for(let s=1;s<=r;s++)i.push(t.getX(0)),i.push(t.getX(s)),i.push(t.getX(s+1));else for(let s=0;s<r;s++)s%2===0?(i.push(t.getX(s)),i.push(t.getX(s+1)),i.push(t.getX(s+2))):(i.push(t.getX(s+2)),i.push(t.getX(s+1)),i.push(t.getX(s)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=n.clone();return a.setIndex(i),a}const dpt=/^[og]\s*(.+)?/,fpt=/^mtllib /,hpt=/^usemtl /,ppt=/^usemap /,LY=/\s+/,OY=new it,Bk=new it,NY=new it,BY=new it,mu=new it,gA=new Un;function mpt(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const r=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(i,a){const s=this._finalize(!1);s&&(s.inherited||s.groupCount<=0)&&this.materials.splice(s.index,1);const o={index:this.materials.length,name:i||"",mtllib:Array.isArray(a)&&a.length>0?a[a.length-1]:"",smooth:s!==void 0?s.smooth:this.smooth,groupStart:s!==void 0?s.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(i){const a=this.currentMaterial();if(a&&a.groupEnd===-1&&(a.groupEnd=this.geometry.vertices.length/3,a.groupCount=a.groupEnd-a.groupStart,a.inherited=!1),i&&this.materials.length>1)for(let s=this.materials.length-1;s>=0;s--)this.materials[s].groupCount<=0&&this.materials.splice(s,1);return i&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),a}},r&&r.name&&typeof r.clone=="function"){const i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const r=parseInt(e,10);return(r>=0?r-1:r+t/3)*3},parseNormalIndex:function(e,t){const r=parseInt(e,10);return(r>=0?r-1:r+t/3)*3},parseUVIndex:function(e,t){const r=parseInt(e,10);return(r>=0?r-1:r+t/2)*2},addVertex:function(e,t,r){const i=this.vertices,a=this.object.geometry.vertices;a.push(i[e+0],i[e+1],i[e+2]),a.push(i[t+0],i[t+1],i[t+2]),a.push(i[r+0],i[r+1],i[r+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){const i=this.normals,a=this.object.geometry.normals;a.push(i[e+0],i[e+1],i[e+2]),a.push(i[t+0],i[t+1],i[t+2]),a.push(i[r+0],i[r+1],i[r+2])},addFaceNormal:function(e,t,r){const i=this.vertices,a=this.object.geometry.normals;OY.fromArray(i,e),Bk.fromArray(i,t),NY.fromArray(i,r),mu.subVectors(NY,Bk),BY.subVectors(OY,Bk),mu.cross(BY),mu.normalize(),a.push(mu.x,mu.y,mu.z),a.push(mu.x,mu.y,mu.z),a.push(mu.x,mu.y,mu.z)},addColor:function(e,t,r){const i=this.colors,a=this.object.geometry.colors;i[e]!==void 0&&a.push(i[e+0],i[e+1],i[e+2]),i[t]!==void 0&&a.push(i[t+0],i[t+1],i[t+2]),i[r]!==void 0&&a.push(i[r+0],i[r+1],i[r+2])},addUV:function(e,t,r){const i=this.uvs,a=this.object.geometry.uvs;a.push(i[e+0],i[e+1]),a.push(i[t+0],i[t+1]),a.push(i[r+0],i[r+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,r,i,a,s,o,l,u){const c=this.vertices.length;let d=this.parseVertexIndex(e,c),f=this.parseVertexIndex(t,c),h=this.parseVertexIndex(r,c);if(this.addVertex(d,f,h),this.addColor(d,f,h),o!==void 0&&o!==""){const p=this.normals.length;d=this.parseNormalIndex(o,p),f=this.parseNormalIndex(l,p),h=this.parseNormalIndex(u,p),this.addNormal(d,f,h)}else this.addFaceNormal(d,f,h);if(i!==void 0&&i!==""){const p=this.uvs.length;d=this.parseUVIndex(i,p),f=this.parseUVIndex(a,p),h=this.parseUVIndex(s,p),this.addUV(d,f,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let r=0,i=e.length;r<i;r++){const a=this.parseVertexIndex(e[r],t);this.addVertexPoint(a),this.addColor(a)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const r=this.vertices.length,i=this.uvs.length;for(let a=0,s=e.length;a<s;a++)this.addVertexLine(this.parseVertexIndex(e[a],r));for(let a=0,s=t.length;a<s;a++)this.addUVLine(this.parseUVIndex(t[a],i))}};return n.startObject("",!1),n}class vpt extends eo{constructor(e){super(e),this.materials=null}load(e,t,r,i){const a=this,s=new Co(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(o))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}setMaterials(e){return this.materials=e,this}parse(e){const t=new mpt;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const r=e.split(`
`);let i=[];for(let o=0,l=r.length;o<l;o++){const u=r[o].trimStart();if(u.length===0)continue;const c=u.charAt(0);if(c!=="#")if(c==="v"){const d=u.split(LY);switch(d[0]){case"v":t.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?(gA.setRGB(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6])).convertSRGBToLinear(),t.colors.push(gA.r,gA.g,gA.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":t.uvs.push(parseFloat(d[1]),parseFloat(d[2]));break}}else if(c==="f"){const f=u.slice(1).trim().split(LY),h=[];for(let m=0,v=f.length;m<v;m++){const g=f[m];if(g.length>0){const y=g.split("/");h.push(y)}}const p=h[0];for(let m=1,v=h.length-1;m<v;m++){const g=h[m],y=h[m+1];t.addFace(p[0],g[0],y[0],p[1],g[1],y[1],p[2],g[2],y[2])}}else if(c==="l"){const d=u.substring(1).trim().split(" ");let f=[];const h=[];if(u.indexOf("/")===-1)f=d;else for(let p=0,m=d.length;p<m;p++){const v=d[p].split("/");v[0]!==""&&f.push(v[0]),v[1]!==""&&h.push(v[1])}t.addLineGeometry(f,h)}else if(c==="p"){const f=u.slice(1).trim().split(" ");t.addPointGeometry(f)}else if((i=dpt.exec(u))!==null){const d=(" "+i[0].slice(1).trim()).slice(1);t.startObject(d)}else if(hpt.test(u))t.object.startMaterial(u.substring(7).trim(),t.materialLibraries);else if(fpt.test(u))t.materialLibraries.push(u.substring(7).trim());else if(ppt.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(c==="s"){if(i=u.split(" "),i.length>1){const f=i[1].trim().toLowerCase();t.object.smooth=f!=="0"&&f!=="off"}else t.object.smooth=!0;const d=t.object.currentMaterial();d&&(d.smooth=t.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}t.finalize();const a=new gl;if(a.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let o=0,l=t.objects.length;o<l;o++){const u=t.objects[o],c=u.geometry,d=u.materials,f=c.type==="Line",h=c.type==="Points";let p=!1;if(c.vertices.length===0)continue;const m=new pi;m.setAttribute("position",new Kn(c.vertices,3)),c.normals.length>0&&m.setAttribute("normal",new Kn(c.normals,3)),c.colors.length>0&&(p=!0,m.setAttribute("color",new Kn(c.colors,3))),c.hasUVIndices===!0&&m.setAttribute("uv",new Kn(c.uvs,2));const v=[];for(let y=0,_=d.length;y<_;y++){const b=d[y],x=b.name+"_"+b.smooth+"_"+p;let w=t.materials[x];if(this.materials!==null){if(w=this.materials.create(b.name),f&&w&&!(w instanceof Bc)){const A=new Bc;ts.prototype.copy.call(A,w),A.color.copy(w.color),w=A}else if(h&&w&&!(w instanceof N0)){const A=new N0({size:10,sizeAttenuation:!1});ts.prototype.copy.call(A,w),A.color.copy(w.color),A.map=w.map,w=A}}w===void 0&&(f?w=new Bc:h?w=new N0({size:1,sizeAttenuation:!1}):w=new zf,w.name=b.name,w.flatShading=!b.smooth,w.vertexColors=p,t.materials[x]=w),v.push(w)}let g;if(v.length>1){for(let y=0,_=d.length;y<_;y++){const b=d[y];m.addGroup(b.groupStart,b.groupCount,y)}f?g=new Sv(m,v):h?g=new xx(m,v):g=new ps(m,v)}else f?g=new Sv(m,v[0]):h?g=new xx(m,v[0]):g=new ps(m,v[0]);g.name=u.name,a.add(g)}else if(t.vertices.length>0){const o=new N0({size:1,sizeAttenuation:!1}),l=new pi;l.setAttribute("position",new Kn(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new Kn(t.colors,3)),o.vertexColors=!0);const u=new xx(l,o);a.add(u)}return a}}class gpt extends _ft{constructor(e){super(e)}parse(e,t){const r={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},i=542327876,a=131072,s=512,o=1024,l=2048,u=4096,c=8192,d=16384,f=32768;function h(pe){return pe.charCodeAt(0)+(pe.charCodeAt(1)<<8)+(pe.charCodeAt(2)<<16)+(pe.charCodeAt(3)<<24)}function p(pe){return String.fromCharCode(pe&255,pe>>8&255,pe>>16&255,pe>>24&255)}function m(pe,de,me,ke){const Be=me*ke*4,Xe=new Uint8Array(pe,de,Be),Ye=new Uint8Array(Be);let Y=0,he=0;for(let le=0;le<ke;le++)for(let Ke=0;Ke<me;Ke++){const Ue=Xe[he];he++;const Ze=Xe[he];he++;const je=Xe[he];he++;const He=Xe[he];he++,Ye[Y]=je,Y++,Ye[Y]=Ze,Y++,Ye[Y]=Ue,Y++,Ye[Y]=He,Y++}return Ye}const v=h("DXT1"),g=h("DXT3"),y=h("DXT5"),_=h("ETC1"),b=31,x=0,w=1,A=2,T=3,C=4,E=7,I=21,P=22,L=23,N=24,F=25,k=26,H=28,U=new Int32Array(e,0,b);if(U[x]!==i)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),r;let B;const $=U[I];let ee=!1;switch($){case v:B=8,r.format=NE;break;case g:B=16,r.format=BE;break;case y:B=16,r.format=FE;break;case _:B=8,r.format=cde;break;default:if(U[P]===32&&U[L]&16711680&&U[N]&65280&&U[F]&255&&U[k]&4278190080)ee=!0,B=64,r.format=Ou;else return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",p($)),r}r.mipmapCount=1,U[A]&a&&t!==!1&&(r.mipmapCount=Math.max(1,U[E]));const re=U[H];if(r.isCubemap=!!(re&s),r.isCubemap&&(!(re&o)||!(re&l)||!(re&u)||!(re&c)||!(re&d)||!(re&f)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),r;r.width=U[C],r.height=U[T];let ne=U[w]+4;const ae=r.isCubemap?6:1;for(let pe=0;pe<ae;pe++){let de=r.width,me=r.height;for(let ke=0;ke<r.mipmapCount;ke++){let Be,Xe;ee?(Be=m(e,ne,de,me),Xe=Be.length):(Xe=Math.max(4,de)/4*Math.max(4,me)/4*B,Be=new Uint8Array(e,ne,Xe));const Ye={data:Be,width:de,height:me};r.mipmaps.push(Ye),ne+=Xe,de=Math.max(de>>1,1),me=Math.max(me>>1,1)}}return r}}class ypt{constructor(e,t,r){const i=this;let a=!1,s=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){o++,a===!1&&i.onStart!==void 0&&i.onStart(c,s,o),a=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,f=u.length;d<f;d+=2){const h=u[d],p=u[d+1];if(h.global&&(h.lastIndex=0),h.test(c))return p}return null}}}const yA=new Un;class _pt extends eo{constructor(e){super(e),this.propertyNameMapping={}}load(e,t,r,i){const a=this,s=new Co(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(o))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}setPropertyNameMapping(e){this.propertyNameMapping=e}parse(e){function t(h){const p=/^ply([\s\S]*)end_header(\r\n|\r|\n)/;let m="",v=0;const g=p.exec(h);g!==null&&(m=g[1],v=new Blob([g[0]]).size);const y={comments:[],elements:[],headerLength:v,objInfo:""},_=m.split(/\r\n|\r|\n/);let b;function x(w,A){const T={type:w[0]};return T.type==="list"?(T.name=w[3],T.countType=w[1],T.itemType=w[2]):T.name=w[1],T.name in A&&(T.name=A[T.name]),T}for(let w=0;w<_.length;w++){let A=_[w];if(A=A.trim(),A==="")continue;const T=A.split(/\s+/),C=T.shift();switch(A=T.join(" "),C){case"format":y.format=T[0],y.version=T[1];break;case"comment":y.comments.push(A);break;case"element":b!==void 0&&y.elements.push(b),b={},b.name=T[0],b.count=parseInt(T[1]),b.properties=[];break;case"property":b.properties.push(x(T,f.propertyNameMapping));break;case"obj_info":y.objInfo=A;break;default:console.log("unhandled",C,T)}}return b!==void 0&&y.elements.push(b),y}function r(h,p){switch(p){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(h);case"float":case"double":case"float32":case"float64":return parseFloat(h)}}function i(h,p){const m=p.split(/\s+/),v={};for(let g=0;g<h.length;g++)if(h[g].type==="list"){const y=[],_=r(m.shift(),h[g].countType);for(let b=0;b<_;b++)y.push(r(m.shift(),h[g].itemType));v[h[g].name]=y}else v[h[g].name]=r(m.shift(),h[g].type);return v}function a(h,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]};let v;const g=/end_header\s([\s\S]*)$/;let y="";(v=g.exec(h))!==null&&(y=v[1]);const _=y.split(/\r\n|\r|\n/);let b=0,x=0;for(let w=0;w<_.length;w++){let A=_[w];if(A=A.trim(),A==="")continue;x>=p.elements[b].count&&(b++,x=0);const T=i(p.elements[b].properties,A);o(m,p.elements[b].name,T),x++}return s(m)}function s(h){let p=new pi;return h.indices.length>0&&p.setIndex(h.indices),p.setAttribute("position",new Kn(h.vertices,3)),h.normals.length>0&&p.setAttribute("normal",new Kn(h.normals,3)),h.uvs.length>0&&p.setAttribute("uv",new Kn(h.uvs,2)),h.colors.length>0&&p.setAttribute("color",new Kn(h.colors,3)),h.faceVertexUvs.length>0&&(p=p.toNonIndexed(),p.setAttribute("uv",new Kn(h.faceVertexUvs,2))),p.computeBoundingSphere(),p}function o(h,p,m){function v(P){for(let L=0,N=P.length;L<N;L++){const F=P[L];if(F in m)return F}return null}const g=v(["x","px","posx"])||"x",y=v(["y","py","posy"])||"y",_=v(["z","pz","posz"])||"z",b=v(["nx","normalx"]),x=v(["ny","normaly"]),w=v(["nz","normalz"]),A=v(["s","u","texture_u","tx"]),T=v(["t","v","texture_v","ty"]),C=v(["red","diffuse_red","r","diffuse_r"]),E=v(["green","diffuse_green","g","diffuse_g"]),I=v(["blue","diffuse_blue","b","diffuse_b"]);if(p==="vertex")h.vertices.push(m[g],m[y],m[_]),b!==null&&x!==null&&w!==null&&h.normals.push(m[b],m[x],m[w]),A!==null&&T!==null&&h.uvs.push(m[A],m[T]),C!==null&&E!==null&&I!==null&&(yA.setRGB(m[C]/255,m[E]/255,m[I]/255).convertSRGBToLinear(),h.colors.push(yA.r,yA.g,yA.b));else if(p==="face"){const P=m.vertex_indices||m.vertex_index,L=m.texcoord;P.length===3?(h.indices.push(P[0],P[1],P[2]),L&&L.length===6&&(h.faceVertexUvs.push(L[0],L[1]),h.faceVertexUvs.push(L[2],L[3]),h.faceVertexUvs.push(L[4],L[5]))):P.length===4&&(h.indices.push(P[0],P[1],P[3]),h.indices.push(P[1],P[2],P[3]))}}function l(h,p,m,v){switch(m){case"int8":case"char":return[h.getInt8(p),1];case"uint8":case"uchar":return[h.getUint8(p),1];case"int16":case"short":return[h.getInt16(p,v),2];case"uint16":case"ushort":return[h.getUint16(p,v),2];case"int32":case"int":return[h.getInt32(p,v),4];case"uint32":case"uint":return[h.getUint32(p,v),4];case"float32":case"float":return[h.getFloat32(p,v),4];case"float64":case"double":return[h.getFloat64(p,v),8]}}function u(h,p,m,v){const g={};let y,_=0;for(let b=0;b<m.length;b++)if(m[b].type==="list"){const x=[];y=l(h,p+_,m[b].countType,v);const w=y[0];_+=y[1];for(let A=0;A<w;A++)y=l(h,p+_,m[b].itemType,v),x.push(y[0]),_+=y[1];g[m[b].name]=x}else y=l(h,p+_,m[b].type,v),g[m[b].name]=y[0],_+=y[1];return[g,_]}function c(h,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},v=p.format==="binary_little_endian",g=new DataView(h,p.headerLength);let y,_=0;for(let b=0;b<p.elements.length;b++)for(let x=0;x<p.elements[b].count;x++){y=u(g,_,p.elements[b].properties,v),_+=y[1];const w=y[0];o(m,p.elements[b].name,w)}return s(m)}let d;const f=this;if(e instanceof ArrayBuffer){const h=To.decodeText(new Uint8Array(e)),p=t(h);d=p.format==="ascii"?a(h,p):c(e,p)}else d=a(e,t(e));return d}}class bpt extends eo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=new Co(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(o){try{t(a.parse(o))}catch(l){i?i(l):console.error(l),a.manager.itemError(e)}},r,i)}parse(e){function t(u){const c=new DataView(u),d=32/8*3+32/8*3*3+16/8,f=c.getUint32(80,!0);if(80+32/8+f*d===c.byteLength)return!0;const p=[115,111,108,105,100];for(let m=0;m<5;m++)if(r(p,c,m))return!1;return!0}function r(u,c,d){for(let f=0,h=u.length;f<h;f++)if(u[f]!==c.getUint8(d+f))return!1;return!0}function i(u){const c=new DataView(u),d=c.getUint32(80,!0);let f,h,p,m=!1,v,g,y,_,b;for(let E=0;E<80-10;E++)c.getUint32(E,!1)==1129270351&&c.getUint8(E+4)==82&&c.getUint8(E+5)==61&&(m=!0,v=new Float32Array(d*3*3),g=c.getUint8(E+6)/255,y=c.getUint8(E+7)/255,_=c.getUint8(E+8)/255,b=c.getUint8(E+9)/255);const x=84,w=12*4+2,A=new pi,T=new Float32Array(d*3*3),C=new Float32Array(d*3*3);for(let E=0;E<d;E++){const I=x+E*w,P=c.getFloat32(I,!0),L=c.getFloat32(I+4,!0),N=c.getFloat32(I+8,!0);if(m){const F=c.getUint16(I+48,!0);F&32768?(f=g,h=y,p=_):(f=(F&31)/31,h=(F>>5&31)/31,p=(F>>10&31)/31)}for(let F=1;F<=3;F++){const k=I+F*12,H=E*3*3+(F-1)*3;T[H]=c.getFloat32(k,!0),T[H+1]=c.getFloat32(k+4,!0),T[H+2]=c.getFloat32(k+8,!0),C[H]=P,C[H+1]=L,C[H+2]=N,m&&(v[H]=f,v[H+1]=h,v[H+2]=p)}}return A.setAttribute("position",new ka(T,3)),A.setAttribute("normal",new ka(C,3)),m&&(A.setAttribute("color",new ka(v,3)),A.hasColors=!0,A.alpha=b),A}function a(u){const c=new pi,d=/solid([\s\S]*?)endsolid/g,f=/facet([\s\S]*?)endfacet/g;let h=0;const p=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,m=new RegExp("vertex"+p+p+p,"g"),v=new RegExp("normal"+p+p+p,"g"),g=[],y=[],_=new it;let b,x=0,w=0,A=0;for(;(b=d.exec(u))!==null;){w=A;const T=b[0];for(;(b=f.exec(T))!==null;){let I=0,P=0;const L=b[0];for(;(b=v.exec(L))!==null;)_.x=parseFloat(b[1]),_.y=parseFloat(b[2]),_.z=parseFloat(b[3]),P++;for(;(b=m.exec(L))!==null;)g.push(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])),y.push(_.x,_.y,_.z),I++,A++;P!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+h),I!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+h),h++}const C=w,E=A-w;c.addGroup(C,E,x),x++}return c.setAttribute("position",new Kn(g,3)),c.setAttribute("normal",new Kn(y,3)),c}function s(u){return typeof u!="string"?To.decodeText(new Uint8Array(u)):u}function o(u){if(typeof u=="string"){const c=new Uint8Array(u.length);for(let d=0;d<u.length;d++)c[d]=u.charCodeAt(d)&255;return c.buffer||c}else return u}const l=o(e);return t(l)?i(l):a(s(e))}}class Spt extends eo{constructor(e){super(e)}load(e,t,r,i){const a=this,s=this.path===""?To.extractUrlBase(e):this.path,o=new Co(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(a.parse(l,s))}catch(u){i?i(u):console.error(u),a.manager.itemError(e)}},r,i)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const r=e.split(`
`);let i={};const a=/\s+/,s={};for(let l=0;l<r.length;l++){let u=r[l];if(u=u.trim(),u.length===0||u.charAt(0)==="#")continue;const c=u.indexOf(" ");let d=c>=0?u.substring(0,c):u;d=d.toLowerCase();let f=c>=0?u.substring(c+1):"";if(f=f.trim(),d==="newmtl")i={name:f},s[f]=i;else if(d==="ka"||d==="kd"||d==="ks"||d==="ke"){const h=f.split(a,3);i[d]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else i[d]=f}const o=new xpt(this.resourcePath||t,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(s),o}}class xpt{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:Qp,this.wrap=this.options.wrap!==void 0?this.options.wrap:vl}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const r in e){const i=e[r],a={};t[r]=a;for(const s in i){let o=!0,l=i[s];const u=s.toLowerCase();switch(u){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(o=!1);break}o&&(a[u]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,r=this.materialsInfo[e],i={name:e,side:this.side};function a(o,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:o+l}function s(o,l){if(i[o])return;const u=t.getTextureParams(l,i),c=t.loadTexture(a(t.baseUrl,u.url));c.repeat.copy(u.scale),c.offset.copy(u.offset),c.wrapS=t.wrap,c.wrapT=t.wrap,(o==="map"||o==="emissiveMap")&&(c.encoding=ai),i[o]=c}for(const o in r){const l=r[o];let u;if(l!=="")switch(o.toLowerCase()){case"kd":i.color=new Un().fromArray(l).convertSRGBToLinear();break;case"ks":i.specular=new Un().fromArray(l).convertSRGBToLinear();break;case"ke":i.emissive=new Un().fromArray(l).convertSRGBToLinear();break;case"map_kd":s("map",l);break;case"map_ks":s("specularMap",l);break;case"map_ke":s("emissiveMap",l);break;case"norm":s("normalMap",l);break;case"map_bump":case"bump":s("bumpMap",l);break;case"map_d":s("alphaMap",l),i.transparent=!0;break;case"ns":i.shininess=parseFloat(l);break;case"d":u=parseFloat(l),u<1&&(i.opacity=u,i.transparent=!0);break;case"tr":u=parseFloat(l),this.options&&this.options.invertTrProperty&&(u=1-u),u>0&&(i.opacity=1-u,i.transparent=!0);break}}return this.materials[e]=new zf(i),this.materials[e]}getTextureParams(e,t){const r={scale:new sn(1,1),offset:new sn(0,0)},i=e.split(/\s+/);let a;return a=i.indexOf("-bm"),a>=0&&(t.bumpScale=parseFloat(i[a+1]),i.splice(a,2)),a=i.indexOf("-s"),a>=0&&(r.scale.set(parseFloat(i[a+1]),parseFloat(i[a+2])),i.splice(a,4)),a=i.indexOf("-o"),a>=0&&(r.offset.set(parseFloat(i[a+1]),parseFloat(i[a+2])),i.splice(a,4)),r.url=i.join(" ").trim(),r}loadTexture(e,t,r,i,a){const s=this.manager!==void 0?this.manager:Jde;let o=s.getHandler(e);o===null&&(o=new l_(s)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const l=o.load(e,r,i,a);return t!==void 0&&(l.mapping=t),l}}const Fk=new WeakMap;class wpt extends eo{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const a=new Co(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,s=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(s,o).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const a={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,a).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const r=JSON.stringify(t);if(Fk.has(e)){const l=Fk.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const a=this.workerNextTaskID++,s=e.byteLength,o=this._getWorker(a,s).then(l=>(i=l,new Promise((u,c)=>{i._callbacks[a]={resolve:u,reject:c},i.postMessage({type:"decode",id:a,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{i&&a&&this._releaseTask(i,a)}),Fk.set(e,{key:r,promise:o}),o}_createGeometry(e){const t=new pi;e.index&&t.setIndex(new ka(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],a=i.name,s=i.array,o=i.itemSize;t.setAttribute(a,new ka(s,o))}return t}_loadLibrary(e,t){const r=new Co(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,a)=>{r.load(e,i,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const a=Tpt.toString(),s=["/* draco decoder */",i,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(a){const s=a.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,a){return i._taskLoad>a._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Tpt(){let n,e;onmessage=function(s){const o=s.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(c){n.onModuleLoaded=function(d){c({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,u=o.taskConfig;e.then(c=>{const d=c.draco,f=new d.Decoder,h=new d.DecoderBuffer;h.Init(new Int8Array(l),l.byteLength);try{const p=t(d,f,h,u),m=p.attributes.map(v=>v.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:o.id,error:p.message})}finally{d.destroy(h),d.destroy(f)}});break}};function t(s,o,l,u){const c=u.attributeIDs,d=u.attributeTypes;let f,h;const p=o.GetEncodedGeometryType(l);if(p===s.TRIANGULAR_MESH)f=new s.Mesh,h=o.DecodeBufferToMesh(l,f);else if(p===s.POINT_CLOUD)f=new s.PointCloud,h=o.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!h.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+h.error_msg());const m={index:null,attributes:[]};for(const v in c){const g=self[d[v]];let y,_;if(u.useUniqueIDs)_=c[v],y=o.GetAttributeByUniqueId(f,_);else{if(_=o.GetAttributeId(f,s[c[v]]),_===-1)continue;y=o.GetAttribute(f,_)}m.attributes.push(i(s,o,f,v,g,y))}return p===s.TRIANGULAR_MESH&&(m.index=r(s,o,f)),s.destroy(f),m}function r(s,o,l){const c=l.num_faces()*3,d=c*4,f=s._malloc(d);o.GetTrianglesUInt32Array(l,d,f);const h=new Uint32Array(s.HEAPF32.buffer,f,c).slice();return s._free(f),{array:h,itemSize:1}}function i(s,o,l,u,c,d){const f=d.num_components(),p=l.num_points()*f,m=p*c.BYTES_PER_ELEMENT,v=a(s,c),g=s._malloc(m);o.GetAttributeDataArrayForAllPoints(l,d,v,m,g);const y=new c(s.HEAPF32.buffer,g,p).slice();return s._free(g),{name:u,array:y,itemSize:f}}function a(s,o){switch(o){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}const j3=new Ov,id=new ypt;id.addHandler(/\.dds$/i,new gpt);id.addHandler(/\.tga$/i,new JO);function Cpt(n){return j3.setFromObject(n),j3.getSize(new it)}function Apt(n){return j3.setFromObject(n),j3.getCenter(new it)}function Ept(n){const e=n.split(".");if(e.length<=1)return"";{let t=e.pop();return t=t.toLowerCase(),t}}function Mpt(n,e,t,r,i){let a;e?a=e:a=Ept(n),a==="glb"&&(a="gltf");let s={loader:null,getObject:null};switch(a){case"dae":s={loader:new Lht(id),getObject:o=>o.scene};break;case"fbx":s={loader:new xht(id)};break;case"gltf":s={loader:new Oht(id),getObject:o=>{const l=o.scene;return o.animations&&(l.animations=o.animations),l}},Dpt(t,s,i);break;case"obj":s={loader:new vpt(id)};break;case"ply":s={loader:new _pt(id),getObject:o=>(o.computeVertexNormals(),new ps(o,r==="MeshStandardMaterial"?new tb:new Dc({vertexColors:!0})))};break;case"stl":s={loader:new bpt(id),getObject:o=>new ps(o,new zf)};break;case"json":s={loader:new Ift(id)};break}return s}function Ipt(){return new Spt(id)}function Dpt(n,e,t){if(n){const r=new wpt;r.setDecoderPath(t||"assets/draco/gltf/"),r.setDecoderConfig({type:"js"}),e.loader.setDRACOLoader(r)}}const Ppt=Ne({name:"vue3dLoader"});Ne({...Ppt,props:{filePath:null,fileType:null,width:null,height:null,position:null,rotation:null,scale:null,lights:{default:()=>[{type:"AmbientLight",color:11184810},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]},cameraPosition:{default:()=>({x:0,y:0,z:0})},cameraRotation:null,cameraUp:null,cameraLookAt:null,backgroundColor:{default:()=>16777215},backgroundAlpha:{default:()=>1},controlsOptions:null,crossOrigin:{default:"anonymous"},requestHeader:null,outputEncoding:{default:()=>"linear"},webGLRendererOptions:{default:()=>({})},mtlPath:{default:""},showFps:{type:Boolean,default:!1},textureImage:{default:""},clearScene:{type:Boolean,default:!1},parallelLoad:{type:Boolean,default:!1},labels:{default:()=>[]},autoPlay:{type:Boolean,default:!0},enableDraco:{type:Boolean,default:!1},dracoDir:null,intersectRecursive:{type:Boolean,default:!1},enableDamping:{type:Boolean},dampingFactor:null,verticalCtrl:{type:[Boolean,Object],default:!1},horizontalCtrl:{type:[Boolean,Object],default:!1},plyMaterial:{default:"MeshStandardMaterial"},enableAxesHelper:{type:Boolean,default:!1},axesHelperSize:{default:100},enableGridHelper:{type:Boolean,default:!1},minDistance:{default:0},maxDistance:{default:1/0},pointLightFollowCamera:{type:Boolean}},emits:["mousedown","mousemove","mouseup","click","dblclick","load","process","error"],setup(n,{expose:e,emit:t}){const r=n;let i=null;const a=new Wft,s=new sn,o=new ds(45,1,.1,1e5),l=new Rft;let u=new C9,c=null,d={},f=[],h=null,p=0,m=null,v=null,g=null,y=null,_=null;const b=ie({width:r.width||0,height:r.height||0}),x=ie(0),w=ie(!1),A=ie(!1),T=ie(null),C=ie(null);zn(()=>{P()}),Wr(()=>{I()}),St([()=>r.autoPlay],()=>{et()}),St([()=>r.width,()=>r.height],()=>{b.value={width:r.width||0,height:r.height||0}}),St([()=>r.enableAxesHelper,()=>r.axesHelperSize,()=>r.enableGridHelper],()=>{Tt()}),St([()=>r.minDistance,()=>r.maxDistance],()=>{De()}),St([()=>r.filePath,()=>r.fileType,()=>r.mtlPath,()=>r.clearScene,()=>r.backgroundAlpha,()=>r.backgroundColor],G=>{(G[0]||G[1])&&E(),G[2]&&ke(),G[3]&&He(),(G[4]||G[5])&&ae()},{deep:!0}),St([()=>r.rotation,()=>r.position,()=>r.scale,()=>r.lights],G=>{const _e=["rotation","position","scale"];G.forEach((ve,Le)=>{Le<3&&ve?ut(_e[Le],ve):de()})},{deep:!0}),St([()=>b],()=>{pe(!0),ae()},{deep:!0}),St([()=>r.controlsOptions],()=>{me()},{deep:!0}),St([()=>r.cameraRotation,()=>r.cameraPosition],()=>{pe()},{deep:!0}),St([()=>r.labels],()=>{q()},{deep:!0});function E(){I(),P()}function I(){p&&cancelAnimationFrame(p),c&&c.dispose(),d&&Object.keys(d).length>0&&(d.dispose(),d={});const G=T.value;G.removeEventListener("mousedown",k,!1),G.removeEventListener("mousemove",H,!1),G.removeEventListener("mouseup",U,!1),G.removeEventListener("click",B,!1),G.removeEventListener("dblclick",$,!1),window.removeEventListener("resize",F,!1),i=null,u&&u.clear()}function P(){const{filePath:G,outputEncoding:_e,webGLRendererOptions:ve,showFps:Le,enableDamping:we,dampingFactor:Ie,labels:wt}=r;G&&typeof G=="object"&&(A.value=!0);const Pe=T.value;L(Pe),F();const dt=Object.assign({},{antialias:!0,alpha:!0},ve,{canvas:C.value});if(!c){c=new Ode(dt),c.shadowMap.enabled=!0;const Mt=_e==="linear"?Jp:ai;c.outputEncoding=Mt}(!d||Object.keys(d).length<=0)&&(d=new Kft(o,Pe),we&&(d.enableDamping=!0,Ie!=null&&(d.dampingFactor=Ie))),De(),Tt(),ke(),re(),N(!0),Pe.addEventListener("mousedown",k,!1),Pe.addEventListener("mouseup",U,!1),Pe.addEventListener("click",B,!1),Pe.addEventListener("dblclick",$,!1),window.addEventListener("resize",F,!1),Le&&(m=Ax(),Pe.appendChild(m.dom)),le(),wt&&wt.length>0&&q()}function L(G){const{width:_e,height:ve}=r;_e&&(G.style.width=`${_e}px`),ve&&(G.style.height=`${ve}px`)}function N(G){const _e=T.value;G?_e.addEventListener("mousemove",H,!1):_e.removeEventListener("mousemove",H,!1)}function F(){const{width:G,height:_e}=r;(!G||!_e)&&cn(()=>{const ve=T.value;b.value={width:G||ve.offsetWidth,height:_e||ve.offsetHeight}})}function k(G){N(!1);const _e=ee(G.clientX,G.clientY);t("mousedown",G,_e)}function H(G){const _e=ee(G.clientX,G.clientY);t("mousemove",G,_e)}function U(G){const _e=ee(G.clientX,G.clientY);t("mouseup",G,_e),N(!0)}function B(G){const _e=ee(G.clientX,G.clientY);t("click",G,_e)}function $(G){const _e=ee(G.clientX,G.clientY);t("dblclick",G,_e)}function ee(G,_e){const ve=ge();if(!ve||!T.value)return null;const Le=T.value.getBoundingClientRect();G-=Le.left,_e-=Le.top,s.x=G/b.value.width*2-1,s.y=-(_e/b.value.height)*2+1,a.setFromCamera(s,o);const we=a.intersectObject(ve,r.intersectRecursive);return(we&&we.length)>0?we[0]:null}function re(){ae(),pe(),de(),me()}function ne(){if(!i)return;const G=A.value?Ve(i):null,{position:_e,rotation:ve,scale:Le}=r;_e&&(_e instanceof Array?G!=null?i.position.set(_e[G].x,_e[G].y,_e[G].z):i.position.set(0,0,0):i.position.set(_e.x,_e.y,_e.z)),ve&&(ve instanceof Array?G!=null?i.rotation.set(ve[G].x,ve[G].y,ve[G].z):i.rotation.set(0,0,0):i.rotation.set(ve.x,ve.y,ve.z)),Le&&(Le instanceof Array?G!=null?i.scale.set(Le[G].x,Le[G].y,Le[G].z):i.scale.set(1,1,1):i.scale.set(Le.x,Le.y,Le.z))}function ae(){const{backgroundColor:G,backgroundAlpha:_e}=r;c.setSize(b.value.width,b.value.height),c.setPixelRatio(window.devicePixelRatio||1),c.setClearColor(new Un(G).getHex()),c.setClearAlpha(_e)}function pe(G){const{cameraPosition:_e,cameraRotation:ve,cameraUp:Le,cameraLookAt:we}=r;if(o.aspect=b.value.width/b.value.height,o.updateProjectionMatrix(),!G)if(!we||!Le){if(!i)return;const Ie=Cpt(i).length();o.position.set(_e.x,_e.y,_e.z),ve&&o.rotation.set(ve.x,ve.y,ve.z),_e.x===0&&_e.y===0&&_e.z===0&&(o.position.z=Ie),o.lookAt(new it)}else o.position.set(_e.x,_e.y,_e.z),ve&&o.rotation.set(ve.x,ve.y,ve.z),o.up.set(Le.x,Le.y,Le.z),o.lookAt(new it(we.x,we.y,we.z))}function de(){const{lights:G}=r;u.remove(...f),f=[],G.forEach(_e=>{if(!_e.type)return;const ve=_e.type.toLowerCase();let Le=null;if(ve==="ambient"||ve==="ambientlight"){const we=_e.color===0?_e.color:_e.color||4210752,Ie=_e.intensity===0?_e.intensity:_e.intensity||1;Le=new NI(we,Ie)}if(ve==="point"||ve==="pointlight"){const we=_e.color===0?_e.color:_e.color||16777215,Ie=_e.intensity===0?_e.intensity:_e.intensity||1,wt=_e.distance||0,Pe=_e.decay===0?_e.decay:_e.decay||1;Le=new wv(we,Ie,wt,Pe),_e.position&&Le.position.copy(_e.position)}if(ve==="directional"||ve==="directionallight"){const we=_e.color===0?_e.color:_e.color||16777215,Ie=_e.intensity===0?_e.intensity:_e.intensity||1;Le=new jw(we,Ie),_e.position&&Le.position.copy(_e.position),_e.target&&Le.target.copy(_e.target)}if(ve==="hemisphere"||ve==="hemispherelight"){const we=_e.skyColor===0?_e.skyColor:_e.skyColor||16777215,Ie=_e.groundColor===0?_e.groundColor:_e.groundColor||16777215,wt=_e.intensity===0?_e.intensity:_e.intensity||1;Le=new efe(we,Ie,wt),_e.position&&Le.position.copy(_e.position)}Le&&(f.push(Le),u.add(Le))})}function me(){const{controlsOptions:G}=r;G&&Object.assign(d,G)}function ke(){const{filePath:G,parallelLoad:_e}=r;_e&&A?G.forEach((ve,Le)=>{Be(Le)}):Be()}function Be(G){const{filePath:_e,fileType:ve,crossOrigin:Le,requestHeader:we,mtlPath:Ie,enableDraco:wt,dracoDir:Pe,plyMaterial:Rt}=r;if(!_e)return;const dt=G||x.value,Mt=A.value?_e[dt]:_e,Wt=typeof ve=="string"?ve:ve?ve[dt]:"",zt=Mpt(Mt,Wt,wt,Rt,Pe);h=zt.loader;const Sn=zt.getObject?zt.getObject:Y;if(i&&dt===0&&u.remove(i),we&&h.setRequestHeader(we),Le&&h.setCrossOrigin(Le),Ie)if(!(typeof Ie=="object"))Ye(Mt,Sn,dt);else{if(!Ie[dt]){Xe(Mt,Sn,dt);return}Ye(Mt,Sn,dt)}else Xe(Mt,Sn,dt)}function Xe(G,_e,ve){const{textureImage:Le,parallelLoad:we}=r;h.load(G,(...Ie)=>{if(i=_e(...Ie),he(i,G),Le){const Pe=typeof Le=="string"?Le:Le[ve];Pe&&je(i,Pe)}t("load",u)},Ie=>{we||Ze(Ie);const wt=x.value+1;t("process",Ie,wt)},Ie=>{t("error",Ie)})}function Ye(G,_e,ve){const{crossOrigin:Le,requestHeader:we,mtlPath:Ie}=r,wt=Ipt();Le&&wt.setCrossOrigin(Le),we&&wt.setRequestHeader(we);const Pe=typeof Ie=="string"?Ie:Ie[ve],Rt=/^(.*\/)([^/]*)$/.exec(Pe),dt=Rt[1],Mt=Rt[2];wt.setPath(dt).load(Mt,Wt=>{Wt.preload(),h.setMaterials(Wt),Xe(G,_e,ve)})}function Y(G){return G}function he(G,_e){const ve=Apt(i);w.value||(u.position.copy(ve.negate()),w.value=!0),i=G;let Le=_e.split("/");Le=Le[Le.length-1],i.fileName=Le,u.add(i),pe(),ne(),et()}function le(){p=requestAnimationFrame(le),Ue();const G=l.getDelta();v&&v instanceof Pk&&v.update(G),v&&v instanceof Array&&v.forEach(_e=>{_e.update(G)}),d&&d.update(),Ke()}function Ke(){const{pointLightFollowCamera:G}=r;G&&ot(),c.render(u,o)}function Ue(){const{showFps:G}=r;G&&m.update()}function Ze(G){const{filePath:_e}=r;Math.floor(G.loaded/G.total*100)===100&&(A.value&&_e.length>x.value?cn(()=>{if(x.value++,x.value===_e.length){x.value=0;return}Be()}):x.value=0)}function je(G,_e){g||(g=new l_),G.traverse(ve=>{ve.isMesh&&g.load(_e,Le=>{ve.material.map=Le,ve.material.needsUpdate=!0},()=>{},Le=>{t("error",Le)})})}function He(){u.clear()}function ut(G,_e){const ve=ge();if(ve){if(A.value){ve.children.forEach(Le=>{const we=Ve(Le),Ie=G==="scale"?1:0;_e[we]?Le[G].set(_e[we].x,_e[we].y,_e[we].z):Le[G].set(Ie,Ie,Ie)});return}ve[G].set(_e.x,_e.y,_e.z)}}function ge(){return A.value?u:i}function q(){const{labels:G}=r;if(!G||G.length<=0)return;te();const _e=A.value?u:i,ve=we=>(g||(g=new l_),g.load(we)),Le=(we,Ie)=>{const wt=ye(we,Ie),Pe=new Qs(wt);return Pe.needsUpdate=!0,Pe};G.forEach(we=>{const Ie=we.image?ve(we.image):Le(we.text,we.textStyle||{}),wt=new E9({map:Ie,color:we.spriteMaterialColor||16777215}),Pe=new HE(wt);we.scale?Pe.scale.set(we.scale.x||1,we.scale.y||1,we.scale.z||0):Pe.scale.set(1,1,0),we.position&&Pe.position.set(we.position.x,we.position.y,we.position.z),we.sid&&(Pe.sid=we.sid),_e.add(Pe)})}function te(){const G=u.children;for(let _e=G.length-1;_e>=0;_e--){const ve=G[_e];ve&&(ve instanceof gl&&ve.children&&(u.children[_e].children=ve.children.map(Le=>Le instanceof HE?null:Le).filter(Le=>Le)),ve instanceof HE&&u.remove(ve))}}function ye(G,_e){const ve=(Sn,On,Er,Qn,Xr,Yn)=>{Sn.beginPath(),Sn.moveTo(On+Yn,Er),Sn.lineTo(On+Qn-Yn,Er),Sn.quadraticCurveTo(On+Qn,Er,On+Qn,Er+Yn),Sn.lineTo(On+Qn,Er+Xr-Yn),Sn.quadraticCurveTo(On+Qn,Er+Xr,On+Qn-Yn,Er+Xr),Sn.lineTo(On+Yn,Er+Xr),Sn.quadraticCurveTo(On,Er+Xr,On,Er+Xr-Yn),Sn.lineTo(On,Er+Yn),Sn.quadraticCurveTo(On,Er,On+Yn,Er),Sn.closePath(),Sn.fill(),Sn.stroke()},Le=_e.fontFamily||"Arial",we=_e.fontSize===0||_e.fontSize?_e.fontSize:18,Ie=_e.color||"#ffffff",wt=_e.fontWeight||"normal",Pe=_e.borderWidth===0||_e.borderWidth?_e.borderWidth:4,Rt=_e.borderColor||"rgba(0,0,0,1)",dt=_e.borderRadius===0||_e.borderRadius?_e.borderRadius:4,Mt=_e.backgroundColor||"rgba(255, 255, 255, 1)",Wt=document.createElement("canvas"),zt=Wt.getContext("2d");if(zt){zt.font=`${wt} ${we}px ${Le}`;const On=zt.measureText(G).width;zt.fillStyle=Mt,zt.strokeStyle=Rt,zt.lineWidth=Pe,ve(zt,Pe/2,Pe/2,On+Pe,we*1.4+Pe,dt),zt.fillStyle=Ie,zt.fillText(G,Pe,we+Pe)}return Wt}function Ve(G){const{filePath:_e}=r;let ve;return _e instanceof Array&&(ve=_e.map((Le,we)=>{if(Le.indexOf(G.fileName)>-1)return we}).filter(Le=>Le!=null)[0]),ve}function et(){const G=ge();if(G){if(A.value){It(G);return}At(G)}}function At(G){const{autoPlay:_e}=r;v=new Pk(G),G.animations&&G.animations.length>0&&G.animations.forEach(ve=>{if(ve){const Le=v.clipAction(ve);_e?Le.play():Le.stop()}})}function It(G){const{autoPlay:_e}=r;v=[],G.children.forEach((ve,Le)=>{v.push(new Pk(ve)),ve.animations&&ve.animations.length>0&&ve.animations.forEach(we=>{if(we){const Ie=v[Le].clipAction(we);_e?Ie.play():Ie.stop()}})})}function De(){if(!d)return;const{verticalCtrl:G,horizontalCtrl:_e,minDistance:ve,maxDistance:Le}=r;G&&typeof G=="boolean"&&(d.minAzimuthAngle=-2*Math.PI,d.maxAzimuthAngle=-2*Math.PI),G&&typeof G=="object"&&(d.minAzimuthAngle=G.min,d.maxAzimuthAngle=G.max),_e&&typeof _e=="boolean"&&(d.minPolarAngle=1,d.maxPolarAngle=1),_e&&typeof _e=="object"&&(d.minPolarAngle=_e.min,d.maxPolarAngle=_e.max),ve!=0&&typeof ve=="number"&&(d.minDistance=ve),Le!=1/0&&typeof Le=="number"&&(d.maxDistance=Le)}function Tt(){const{enableAxesHelper:G,enableGridHelper:_e,axesHelperSize:ve}=r;G?(y=new jft(ve),u.add(y)):y&&u.remove(y),_e?(_=new qft(2e3,100),u.add(_)):_&&u.remove(_)}function ot(){const G=o.position.clone();u.children.forEach(_e=>{_e instanceof wv&&_e.position.set(G.x,G.y,G.z)})}return e({camera:o,scene:u}),(G,_e)=>(W(),Se("div",{ref_key:"containerElement",ref:T,class:"viewer-container"},[Ce("canvas",{ref_key:"canvasElement",ref:C,class:"viewer-canvas"},null,512)],512))}});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Q9="171",Qg={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Zg={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Rpt=0,FY=1,kpt=2,Vfe=1,Lpt=2,vf=3,Ud=0,wl=1,Ru=2,Ip=0,Dp=1,UY=2,zY=3,HY=4,$fe=5,y0=100,Opt=101,Npt=102,Bpt=103,Fpt=104,Upt=200,zpt=201,Hpt=202,Vpt=203,rw=204,iw=205,$pt=206,Gpt=207,Wpt=208,qpt=209,jpt=210,Kpt=211,Xpt=212,Ypt=213,Qpt=214,r8=0,i8=1,a8=2,d_=3,s8=4,o8=5,l8=6,u8=7,Gfe=0,Zpt=1,Jpt=2,Pp=0,emt=1,tmt=2,nmt=3,rmt=4,imt=5,amt=6,smt=7,Wfe=300,f_=301,h_=302,c8=303,d8=304,BI=306,f8=1e3,B0=1001,h8=1002,tu=1003,omt=1004,_A=1005,bd=1006,Uk=1007,F0=1008,zd=1009,qfe=1010,jfe=1011,aw=1012,Z9=1013,Bu=1014,Pc=1015,fb=1016,J9=1017,eU=1018,p_=1020,Kfe=35902,Xfe=1021,Yfe=1022,qo=1023,Qfe=1024,Zfe=1025,rv=1026,m_=1027,Jfe=1028,FI=1029,tU=1030,nU=1031,m1=1033,WE=33776,qE=33777,jE=33778,KE=33779,p8=35840,m8=35841,v8=35842,g8=35843,y8=36196,_8=37492,b8=37496,S8=37808,x8=37809,w8=37810,T8=37811,C8=37812,A8=37813,E8=37814,M8=37815,I8=37816,D8=37817,P8=37818,R8=37819,k8=37820,L8=37821,XE=36492,O8=36494,N8=36495,ehe=36283,B8=36284,F8=36285,U8=36286,lmt=3200,umt=3201,cmt=0,dmt=1,cp="",Cu="srgb",v_="srgb-linear",K3="linear",ji="srgb",Jg=7680,VY=519,fmt=512,hmt=513,pmt=514,the=515,mmt=516,vmt=517,gmt=518,ymt=519,$Y=35044,_mt=35048,GY="300 es",kf=2e3,X3=2001;class Uv{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}const ao=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let WY=1234567;const Mx=Math.PI/180,sw=180/Math.PI;function hb(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ao[n&255]+ao[n>>8&255]+ao[n>>16&255]+ao[n>>24&255]+"-"+ao[e&255]+ao[e>>8&255]+"-"+ao[e>>16&15|64]+ao[e>>24&255]+"-"+ao[t&63|128]+ao[t>>8&255]+"-"+ao[t>>16&255]+ao[t>>24&255]+ao[r&255]+ao[r>>8&255]+ao[r>>16&255]+ao[r>>24&255]).toLowerCase()}function ei(n,e,t){return Math.max(e,Math.min(t,n))}function rU(n,e){return(n%e+e)%e}function bmt(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Smt(n,e,t){return n!==e?(t-n)/(e-n):0}function Ix(n,e,t){return(1-t)*n+t*e}function xmt(n,e,t,r){return Ix(n,e,1-Math.exp(-t*r))}function wmt(n,e=1){return e-Math.abs(rU(n,e*2)-e)}function Tmt(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Cmt(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Amt(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Emt(n,e){return n+Math.random()*(e-n)}function Mmt(n){return n*(.5-Math.random())}function Imt(n){n!==void 0&&(WY=n);let e=WY+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Dmt(n){return n*Mx}function Pmt(n){return n*sw}function Rmt(n){return(n&n-1)===0&&n!==0}function kmt(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Lmt(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Omt(n,e,t,r,i){const a=Math.cos,s=Math.sin,o=a(t/2),l=s(t/2),u=a((e+r)/2),c=s((e+r)/2),d=a((e-r)/2),f=s((e-r)/2),h=a((r-e)/2),p=s((r-e)/2);switch(i){case"XYX":n.set(o*c,l*d,l*f,o*u);break;case"YZY":n.set(l*f,o*c,l*d,o*u);break;case"ZXZ":n.set(l*d,l*f,o*c,o*u);break;case"XZX":n.set(o*c,l*p,l*h,o*u);break;case"YXY":n.set(l*h,o*c,l*p,o*u);break;case"ZYZ":n.set(l*p,l*h,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Ey(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Lo(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const nhe={DEG2RAD:Mx,RAD2DEG:sw,generateUUID:hb,clamp:ei,euclideanModulo:rU,mapLinear:bmt,inverseLerp:Smt,lerp:Ix,damp:xmt,pingpong:wmt,smoothstep:Tmt,smootherstep:Cmt,randInt:Amt,randFloat:Emt,randFloatSpread:Mmt,seededRandom:Imt,degToRad:Dmt,radToDeg:Pmt,isPowerOfTwo:Rmt,ceilPowerOfTwo:kmt,floorPowerOfTwo:Lmt,setQuaternionFromProperEuler:Omt,normalize:Lo,denormalize:Ey};class cr{constructor(e=0,t=0){cr.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=ei(this.x,e.x,t.x),this.y=ei(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=ei(this.x,e,t),this.y=ei(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(ei(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(ei(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rr{constructor(e,t,r,i,a,s,o,l,u){Rr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,l,u)}set(e,t,r,i,a,s,o,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=a,c[5]=l,c[6]=r,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],c=r[4],d=r[7],f=r[2],h=r[5],p=r[8],m=i[0],v=i[3],g=i[6],y=i[1],_=i[4],b=i[7],x=i[2],w=i[5],A=i[8];return a[0]=s*m+o*y+l*x,a[3]=s*v+o*_+l*w,a[6]=s*g+o*b+l*A,a[1]=u*m+c*y+d*x,a[4]=u*v+c*_+d*w,a[7]=u*g+c*b+d*A,a[2]=f*m+h*y+p*x,a[5]=f*v+h*_+p*w,a[8]=f*g+h*b+p*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*s*c-t*o*u-r*a*c+r*o*l+i*a*u-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=c*s-o*u,f=o*l-c*a,h=u*a-s*l,p=t*d+r*f+i*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(i*u-c*r)*m,e[2]=(o*r-i*s)*m,e[3]=f*m,e[4]=(c*t-i*l)*m,e[5]=(i*a-o*t)*m,e[6]=h*m,e[7]=(r*l-u*t)*m,e[8]=(s*t-r*a)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,s,o){const l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*s+u*o)+s+e,-i*u,i*l,-i*(-u*s+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(zk.makeScale(e,t)),this}rotate(e){return this.premultiply(zk.makeRotation(-e)),this}translate(e,t){return this.premultiply(zk.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const zk=new Rr;function rhe(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Y3(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Nmt(){const n=Y3("canvas");return n.style.display="block",n}const qY={};function My(n){n in qY||(qY[n]=!0,console.warn(n))}function Bmt(n,e,t){return new Promise(function(r,i){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:r()}}setTimeout(a,t)})}function Fmt(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Umt(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const jY=new Rr().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),KY=new Rr().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function zmt(){const n={enabled:!0,workingColorSpace:v_,spaces:{},convert:function(i,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===ji&&(i.r=Hf(i.r),i.g=Hf(i.g),i.b=Hf(i.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[a].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===ji&&(i.r=v1(i.r),i.g=v1(i.g),i.b=v1(i.b))),i},fromWorkingColorSpace:function(i,a){return this.convert(i,this.workingColorSpace,a)},toWorkingColorSpace:function(i,a){return this.convert(i,a,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===cp?K3:this.spaces[i].transfer},getLuminanceCoefficients:function(i,a=this.workingColorSpace){return i.fromArray(this.spaces[a].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,a,s){return i.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[v_]:{primaries:e,whitePoint:r,transfer:K3,toXYZ:jY,fromXYZ:KY,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Cu},outputColorSpaceConfig:{drawingBufferColorSpace:Cu}},[Cu]:{primaries:e,whitePoint:r,transfer:ji,toXYZ:jY,fromXYZ:KY,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Cu}}}),n}const Ii=zmt();function Hf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function v1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ey;class Hmt{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ey===void 0&&(ey=Y3("canvas")),ey.width=e.width,ey.height=e.height;const r=ey.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=ey}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Y3("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=Hf(a[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Hf(t[r]/255)*255):t[r]=Hf(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Vmt=0;class ihe{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Vmt++}),this.uuid=hb(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(Hk(i[s].image)):a.push(Hk(i[s]))}else a=Hk(i);r.url=a}return t||(e.images[this.uuid]=r),r}}function Hk(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Hmt.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $mt=0;class Yo extends Uv{constructor(e=Yo.DEFAULT_IMAGE,t=Yo.DEFAULT_MAPPING,r=B0,i=B0,a=bd,s=F0,o=qo,l=zd,u=Yo.DEFAULT_ANISOTROPY,c=cp){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$mt++}),this.uuid=hb(),this.name="",this.source=new ihe(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new cr(0,0),this.repeat=new cr(1,1),this.center=new cr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Wfe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case f8:e.x=e.x-Math.floor(e.x);break;case B0:e.x=e.x<0?0:1;break;case h8:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case f8:e.y=e.y-Math.floor(e.y);break;case B0:e.y=e.y<0?0:1;break;case h8:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Yo.DEFAULT_IMAGE=null;Yo.DEFAULT_MAPPING=Wfe;Yo.DEFAULT_ANISOTROPY=1;class _a{constructor(e=0,t=0,r=0,i=1){_a.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const l=e.elements,u=l[0],c=l[4],d=l[8],f=l[1],h=l[5],p=l[9],m=l[2],v=l[6],g=l[10];if(Math.abs(c-f)<.01&&Math.abs(d-m)<.01&&Math.abs(p-v)<.01){if(Math.abs(c+f)<.1&&Math.abs(d+m)<.1&&Math.abs(p+v)<.1&&Math.abs(u+h+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(u+1)/2,b=(h+1)/2,x=(g+1)/2,w=(c+f)/4,A=(d+m)/4,T=(p+v)/4;return _>b&&_>x?_<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(_),i=w/r,a=A/r):b>x?b<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(b),r=w/i,a=T/i):x<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(x),r=A/a,i=T/a),this.set(r,i,a,t),this}let y=Math.sqrt((v-p)*(v-p)+(d-m)*(d-m)+(f-c)*(f-c));return Math.abs(y)<.001&&(y=1),this.x=(v-p)/y,this.y=(d-m)/y,this.z=(f-c)/y,this.w=Math.acos((u+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=ei(this.x,e.x,t.x),this.y=ei(this.y,e.y,t.y),this.z=ei(this.z,e.z,t.z),this.w=ei(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=ei(this.x,e,t),this.y=ei(this.y,e,t),this.z=ei(this.z,e,t),this.w=ei(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(ei(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Gmt extends Uv{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new _a(0,0,e,t),this.scissorTest=!1,this.viewport=new _a(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:bd,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const a=new Yo(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);a.flipY=!1,a.generateMipmaps=r.generateMipmaps,a.internalFormat=r.internalFormat,this.textures=[];const s=r.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ihe(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class im extends Gmt{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class ahe extends Yo{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=tu,this.minFilter=tu,this.wrapR=B0,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Wmt extends Yo{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=tu,this.minFilter=tu,this.wrapR=B0,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wa{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,a,s,o){let l=r[i+0],u=r[i+1],c=r[i+2],d=r[i+3];const f=a[s+0],h=a[s+1],p=a[s+2],m=a[s+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=h,e[t+2]=p,e[t+3]=m;return}if(d!==m||l!==f||u!==h||c!==p){let v=1-o;const g=l*f+u*h+c*p+d*m,y=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const x=Math.sqrt(_),w=Math.atan2(x,g*y);v=Math.sin(v*w)/x,o=Math.sin(o*w)/x}const b=o*y;if(l=l*v+f*b,u=u*v+h*b,c=c*v+p*b,d=d*v+m*b,v===1-o){const x=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=x,u*=x,c*=x,d*=x}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,a,s){const o=r[i],l=r[i+1],u=r[i+2],c=r[i+3],d=a[s],f=a[s+1],h=a[s+2],p=a[s+3];return e[t]=o*p+c*d+l*h-u*f,e[t+1]=l*p+c*f+u*d-o*h,e[t+2]=u*p+c*h+o*f-l*d,e[t+3]=c*p-o*d-l*f-u*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(r/2),c=o(i/2),d=o(a/2),f=l(r/2),h=l(i/2),p=l(a/2);switch(s){case"XYZ":this._x=f*c*d+u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d-f*h*p;break;case"YXZ":this._x=f*c*d+u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d+f*h*p;break;case"ZXY":this._x=f*c*d-u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d-f*h*p;break;case"ZYX":this._x=f*c*d-u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d+f*h*p;break;case"YZX":this._x=f*c*d+u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d-f*h*p;break;case"XZY":this._x=f*c*d-u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],s=t[1],o=t[5],l=t[9],u=t[2],c=t[6],d=t[10],f=r+o+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(c-l)*h,this._y=(a-u)*h,this._z=(s-i)*h}else if(r>o&&r>d){const h=2*Math.sqrt(1+r-o-d);this._w=(c-l)/h,this._x=.25*h,this._y=(i+s)/h,this._z=(a+u)/h}else if(o>d){const h=2*Math.sqrt(1+o-r-d);this._w=(a-u)/h,this._x=(i+s)/h,this._y=.25*h,this._z=(l+c)/h}else{const h=2*Math.sqrt(1+d-r-o);this._w=(s-i)/h,this._x=(a+u)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ei(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,s=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+s*o+i*u-a*l,this._y=i*c+s*l+a*o-r*u,this._z=a*c+s*u+r*l-i*o,this._w=s*c-r*o-i*l-a*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,a=this._z,s=this._w;let o=s*e._w+r*e._x+i*e._y+a*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=r,this._y=i,this._z=a,this;const l=1-o*o;if(l<=Number.EPSILON){const h=1-t;return this._w=h*s+t*this._w,this._x=h*r+t*this._x,this._y=h*i+t*this._y,this._z=h*a+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=s*d+this._w*f,this._x=r*d+this._x*f,this._y=i*d+this._y*f,this._z=a*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),a=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ft{constructor(e=0,t=0,r=0){ft.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(XY.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(XY.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=2*(s*i-o*r),c=2*(o*t-a*i),d=2*(a*r-s*t);return this.x=t+l*u+s*d-o*c,this.y=r+l*c+o*u-a*d,this.z=i+l*d+a*c-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=ei(this.x,e.x,t.x),this.y=ei(this.y,e.y,t.y),this.z=ei(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=ei(this.x,e,t),this.y=ei(this.y,e,t),this.z=ei(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(ei(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,s=t.x,o=t.y,l=t.z;return this.x=i*l-a*o,this.y=a*s-r*l,this.z=r*o-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Vk.copy(this).projectOnVector(e),this.sub(Vk)}reflect(e){return this.sub(Vk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(ei(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Vk=new ft,XY=new wa;class Sd{constructor(e=new ft(1/0,1/0,1/0),t=new ft(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(mc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(mc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=mc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,mc):mc.fromBufferAttribute(a,s),mc.applyMatrix4(e.matrixWorld),this.expandByPoint(mc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),bA.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),bA.copy(r.boundingBox)),bA.applyMatrix4(e.matrixWorld),this.union(bA)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,mc),mc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(bS),SA.subVectors(this.max,bS),ty.subVectors(e.a,bS),ny.subVectors(e.b,bS),ry.subVectors(e.c,bS),qh.subVectors(ny,ty),jh.subVectors(ry,ny),Qm.subVectors(ty,ry);let t=[0,-qh.z,qh.y,0,-jh.z,jh.y,0,-Qm.z,Qm.y,qh.z,0,-qh.x,jh.z,0,-jh.x,Qm.z,0,-Qm.x,-qh.y,qh.x,0,-jh.y,jh.x,0,-Qm.y,Qm.x,0];return!$k(t,ty,ny,ry,SA)||(t=[1,0,0,0,1,0,0,0,1],!$k(t,ty,ny,ry,SA))?!1:(xA.crossVectors(qh,jh),t=[xA.x,xA.y,xA.z],$k(t,ty,ny,ry,SA))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,mc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(mc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(uf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),uf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),uf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),uf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),uf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),uf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),uf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),uf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(uf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const uf=[new ft,new ft,new ft,new ft,new ft,new ft,new ft,new ft],mc=new ft,bA=new Sd,ty=new ft,ny=new ft,ry=new ft,qh=new ft,jh=new ft,Qm=new ft,bS=new ft,SA=new ft,xA=new ft,Zm=new ft;function $k(n,e,t,r,i){for(let a=0,s=n.length-3;a<=s;a+=3){Zm.fromArray(n,a);const o=i.x*Math.abs(Zm.x)+i.y*Math.abs(Zm.y)+i.z*Math.abs(Zm.z),l=e.dot(Zm),u=t.dot(Zm),c=r.dot(Zm);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const qmt=new Sd,SS=new ft,Gk=new ft;class iU{constructor(e=new ft,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):qmt.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;SS.subVectors(e,this.center);const t=SS.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(SS,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Gk.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(SS.copy(e.center).add(Gk)),this.expandByPoint(SS.copy(e.center).sub(Gk))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const cf=new ft,Wk=new ft,wA=new ft,Kh=new ft,qk=new ft,TA=new ft,jk=new ft;let she=class{constructor(e=new ft,t=new ft(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,cf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=cf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(cf.copy(this.origin).addScaledVector(this.direction,t),cf.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Wk.copy(e).add(t).multiplyScalar(.5),wA.copy(t).sub(e).normalize(),Kh.copy(this.origin).sub(Wk);const a=e.distanceTo(t)*.5,s=-this.direction.dot(wA),o=Kh.dot(this.direction),l=-Kh.dot(wA),u=Kh.lengthSq(),c=Math.abs(1-s*s);let d,f,h,p;if(c>0)if(d=s*l-o,f=s*o-l,p=a*c,d>=0)if(f>=-p)if(f<=p){const m=1/c;d*=m,f*=m,h=d*(d+s*f+2*o)+f*(s*d+f+2*l)+u}else f=a,d=Math.max(0,-(s*f+o)),h=-d*d+f*(f+2*l)+u;else f=-a,d=Math.max(0,-(s*f+o)),h=-d*d+f*(f+2*l)+u;else f<=-p?(d=Math.max(0,-(-s*a+o)),f=d>0?-a:Math.min(Math.max(-a,-l),a),h=-d*d+f*(f+2*l)+u):f<=p?(d=0,f=Math.min(Math.max(-a,-l),a),h=f*(f+2*l)+u):(d=Math.max(0,-(s*a+o)),f=d>0?a:Math.min(Math.max(-a,-l),a),h=-d*d+f*(f+2*l)+u);else f=s>0?-a:a,d=Math.max(0,-(s*f+o)),h=-d*d+f*(f+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(Wk).addScaledVector(wA,f),h}intersectSphere(e,t){cf.subVectors(e.center,this.origin);const r=cf.dot(this.direction),i=cf.dot(cf)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,l=r+s;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,s,o,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),c>=0?(a=(e.min.y-f.y)*c,s=(e.max.y-f.y)*c):(a=(e.max.y-f.y)*c,s=(e.min.y-f.y)*c),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),d>=0?(o=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,cf)!==null}intersectTriangle(e,t,r,i,a){qk.subVectors(t,e),TA.subVectors(r,e),jk.crossVectors(qk,TA);let s=this.direction.dot(jk),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Kh.subVectors(this.origin,e);const l=o*this.direction.dot(TA.crossVectors(Kh,TA));if(l<0)return null;const u=o*this.direction.dot(qk.cross(Kh));if(u<0||l+u>s)return null;const c=-o*Kh.dot(jk);return c<0?null:this.at(c/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class kr{constructor(e,t,r,i,a,s,o,l,u,c,d,f,h,p,m,v){kr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,l,u,c,d,f,h,p,m,v)}set(e,t,r,i,a,s,o,l,u,c,d,f,h,p,m,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=a,g[5]=s,g[9]=o,g[13]=l,g[2]=u,g[6]=c,g[10]=d,g[14]=f,g[3]=h,g[7]=p,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new kr().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/iy.setFromMatrixColumn(e,0).length(),a=1/iy.setFromMatrixColumn(e,1).length(),s=1/iy.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),d=Math.sin(a);if(e.order==="XYZ"){const f=s*c,h=s*d,p=o*c,m=o*d;t[0]=l*c,t[4]=-l*d,t[8]=u,t[1]=h+p*u,t[5]=f-m*u,t[9]=-o*l,t[2]=m-f*u,t[6]=p+h*u,t[10]=s*l}else if(e.order==="YXZ"){const f=l*c,h=l*d,p=u*c,m=u*d;t[0]=f+m*o,t[4]=p*o-h,t[8]=s*u,t[1]=s*d,t[5]=s*c,t[9]=-o,t[2]=h*o-p,t[6]=m+f*o,t[10]=s*l}else if(e.order==="ZXY"){const f=l*c,h=l*d,p=u*c,m=u*d;t[0]=f-m*o,t[4]=-s*d,t[8]=p+h*o,t[1]=h+p*o,t[5]=s*c,t[9]=m-f*o,t[2]=-s*u,t[6]=o,t[10]=s*l}else if(e.order==="ZYX"){const f=s*c,h=s*d,p=o*c,m=o*d;t[0]=l*c,t[4]=p*u-h,t[8]=f*u+m,t[1]=l*d,t[5]=m*u+f,t[9]=h*u-p,t[2]=-u,t[6]=o*l,t[10]=s*l}else if(e.order==="YZX"){const f=s*l,h=s*u,p=o*l,m=o*u;t[0]=l*c,t[4]=m-f*d,t[8]=p*d+h,t[1]=d,t[5]=s*c,t[9]=-o*c,t[2]=-u*c,t[6]=h*d+p,t[10]=f-m*d}else if(e.order==="XZY"){const f=s*l,h=s*u,p=o*l,m=o*u;t[0]=l*c,t[4]=-d,t[8]=u*c,t[1]=f*d+m,t[5]=s*c,t[9]=h*d-p,t[2]=p*d-h,t[6]=o*c,t[10]=m*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jmt,e,Kmt)}lookAt(e,t,r){const i=this.elements;return zl.subVectors(e,t),zl.lengthSq()===0&&(zl.z=1),zl.normalize(),Xh.crossVectors(r,zl),Xh.lengthSq()===0&&(Math.abs(r.z)===1?zl.x+=1e-4:zl.z+=1e-4,zl.normalize(),Xh.crossVectors(r,zl)),Xh.normalize(),CA.crossVectors(zl,Xh),i[0]=Xh.x,i[4]=CA.x,i[8]=zl.x,i[1]=Xh.y,i[5]=CA.y,i[9]=zl.y,i[2]=Xh.z,i[6]=CA.z,i[10]=zl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[4],l=r[8],u=r[12],c=r[1],d=r[5],f=r[9],h=r[13],p=r[2],m=r[6],v=r[10],g=r[14],y=r[3],_=r[7],b=r[11],x=r[15],w=i[0],A=i[4],T=i[8],C=i[12],E=i[1],I=i[5],P=i[9],L=i[13],N=i[2],F=i[6],k=i[10],H=i[14],U=i[3],B=i[7],$=i[11],ee=i[15];return a[0]=s*w+o*E+l*N+u*U,a[4]=s*A+o*I+l*F+u*B,a[8]=s*T+o*P+l*k+u*$,a[12]=s*C+o*L+l*H+u*ee,a[1]=c*w+d*E+f*N+h*U,a[5]=c*A+d*I+f*F+h*B,a[9]=c*T+d*P+f*k+h*$,a[13]=c*C+d*L+f*H+h*ee,a[2]=p*w+m*E+v*N+g*U,a[6]=p*A+m*I+v*F+g*B,a[10]=p*T+m*P+v*k+g*$,a[14]=p*C+m*L+v*H+g*ee,a[3]=y*w+_*E+b*N+x*U,a[7]=y*A+_*I+b*F+x*B,a[11]=y*T+_*P+b*k+x*$,a[15]=y*C+_*L+b*H+x*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],c=e[2],d=e[6],f=e[10],h=e[14],p=e[3],m=e[7],v=e[11],g=e[15];return p*(+a*l*d-i*u*d-a*o*f+r*u*f+i*o*h-r*l*h)+m*(+t*l*h-t*u*f+a*s*f-i*s*h+i*u*c-a*l*c)+v*(+t*u*d-t*o*h-a*s*d+r*s*h+a*o*c-r*u*c)+g*(-i*o*c-t*l*d+t*o*f+i*s*d-r*s*f+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],v=e[14],g=e[15],y=d*v*u-m*f*u+m*l*h-o*v*h-d*l*g+o*f*g,_=p*f*u-c*v*u-p*l*h+s*v*h+c*l*g-s*f*g,b=c*m*u-p*d*u+p*o*h-s*m*h-c*o*g+s*d*g,x=p*d*l-c*m*l-p*o*f+s*m*f+c*o*v-s*d*v,w=t*y+r*_+i*b+a*x;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/w;return e[0]=y*A,e[1]=(m*f*a-d*v*a-m*i*h+r*v*h+d*i*g-r*f*g)*A,e[2]=(o*v*a-m*l*a+m*i*u-r*v*u-o*i*g+r*l*g)*A,e[3]=(d*l*a-o*f*a-d*i*u+r*f*u+o*i*h-r*l*h)*A,e[4]=_*A,e[5]=(c*v*a-p*f*a+p*i*h-t*v*h-c*i*g+t*f*g)*A,e[6]=(p*l*a-s*v*a-p*i*u+t*v*u+s*i*g-t*l*g)*A,e[7]=(s*f*a-c*l*a+c*i*u-t*f*u-s*i*h+t*l*h)*A,e[8]=b*A,e[9]=(p*d*a-c*m*a-p*r*h+t*m*h+c*r*g-t*d*g)*A,e[10]=(s*m*a-p*o*a+p*r*u-t*m*u-s*r*g+t*o*g)*A,e[11]=(c*o*a-s*d*a-c*r*u+t*d*u+s*r*h-t*o*h)*A,e[12]=x*A,e[13]=(c*m*i-p*d*i+p*r*f-t*m*f-c*r*v+t*d*v)*A,e[14]=(p*o*i-s*m*i-p*r*l+t*m*l+s*r*v-t*o*v)*A,e[15]=(s*d*i-c*o*i+c*r*l-t*d*l-s*r*f+t*o*f)*A,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,s=e.x,o=e.y,l=e.z,u=a*s,c=a*o;return this.set(u*s+r,u*o-i*l,u*l+i*o,0,u*o+i*l,c*o+r,c*l-i*s,0,u*l-i*o,c*l+i*s,a*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,s=t._y,o=t._z,l=t._w,u=a+a,c=s+s,d=o+o,f=a*u,h=a*c,p=a*d,m=s*c,v=s*d,g=o*d,y=l*u,_=l*c,b=l*d,x=r.x,w=r.y,A=r.z;return i[0]=(1-(m+g))*x,i[1]=(h+b)*x,i[2]=(p-_)*x,i[3]=0,i[4]=(h-b)*w,i[5]=(1-(f+g))*w,i[6]=(v+y)*w,i[7]=0,i[8]=(p+_)*A,i[9]=(v-y)*A,i[10]=(1-(f+m))*A,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let a=iy.set(i[0],i[1],i[2]).length();const s=iy.set(i[4],i[5],i[6]).length(),o=iy.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),e.x=i[12],e.y=i[13],e.z=i[14],vc.copy(this);const u=1/a,c=1/s,d=1/o;return vc.elements[0]*=u,vc.elements[1]*=u,vc.elements[2]*=u,vc.elements[4]*=c,vc.elements[5]*=c,vc.elements[6]*=c,vc.elements[8]*=d,vc.elements[9]*=d,vc.elements[10]*=d,t.setFromRotationMatrix(vc),r.x=a,r.y=s,r.z=o,this}makePerspective(e,t,r,i,a,s,o=kf){const l=this.elements,u=2*a/(t-e),c=2*a/(r-i),d=(t+e)/(t-e),f=(r+i)/(r-i);let h,p;if(o===kf)h=-(s+a)/(s-a),p=-2*s*a/(s-a);else if(o===X3)h=-s/(s-a),p=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=c,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,a,s,o=kf){const l=this.elements,u=1/(t-e),c=1/(r-i),d=1/(s-a),f=(t+e)*u,h=(r+i)*c;let p,m;if(o===kf)p=(s+a)*d,m=-2*d;else if(o===X3)p=a*d,m=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=m,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const iy=new ft,vc=new kr,jmt=new ft(0,0,0),Kmt=new ft(1,1,1),Xh=new ft,CA=new ft,zl=new ft,YY=new kr,QY=new wa;class ih{constructor(e=0,t=0,r=0,i=ih.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],u=i[5],c=i[9],d=i[2],f=i[6],h=i[10];switch(t){case"XYZ":this._y=Math.asin(ei(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ei(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(ei(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-ei(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(ei(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-ei(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return YY.makeRotationFromQuaternion(e),this.setFromRotationMatrix(YY,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return QY.setFromEuler(this),this.setFromQuaternion(QY,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ih.DEFAULT_ORDER="XYZ";class ohe{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Xmt=0;const ZY=new ft,ay=new wa,df=new kr,AA=new ft,xS=new ft,Ymt=new ft,Qmt=new wa,JY=new ft(1,0,0),eQ=new ft(0,1,0),tQ=new ft(0,0,1),nQ={type:"added"},Zmt={type:"removed"},sy={type:"childadded",child:null},Kk={type:"childremoved",child:null};class ms extends Uv{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Xmt++}),this.uuid=hb(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ms.DEFAULT_UP.clone();const e=new ft,t=new ih,r=new wa,i=new ft(1,1,1);function a(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new kr},normalMatrix:{value:new Rr}}),this.matrix=new kr,this.matrixWorld=new kr,this.matrixAutoUpdate=ms.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ms.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ohe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ay.setFromAxisAngle(e,t),this.quaternion.multiply(ay),this}rotateOnWorldAxis(e,t){return ay.setFromAxisAngle(e,t),this.quaternion.premultiply(ay),this}rotateX(e){return this.rotateOnAxis(JY,e)}rotateY(e){return this.rotateOnAxis(eQ,e)}rotateZ(e){return this.rotateOnAxis(tQ,e)}translateOnAxis(e,t){return ZY.copy(e).applyQuaternion(this.quaternion),this.position.add(ZY.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(JY,e)}translateY(e){return this.translateOnAxis(eQ,e)}translateZ(e){return this.translateOnAxis(tQ,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(df.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?AA.copy(e):AA.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),xS.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?df.lookAt(xS,AA,this.up):df.lookAt(AA,xS,this.up),this.quaternion.setFromRotationMatrix(df),i&&(df.extractRotation(i.matrixWorld),ay.setFromRotationMatrix(df),this.quaternion.premultiply(ay.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(nQ),sy.child=e,this.dispatchEvent(sy),sy.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Zmt),Kk.child=e,this.dispatchEvent(Kk),Kk.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),df.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),df.multiply(e.parent.matrixWorld)),e.applyMatrix4(df),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(nQ),sy.child=e,this.dispatchEvent(sy),sy.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xS,e,Ymt),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(xS,Qmt,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];a(e.shapes,d)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(a(e.materials,this.material[l]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(a(e.animations,l))}}if(t){const o=s(e.geometries),l=s(e.materials),u=s(e.textures),c=s(e.images),d=s(e.shapes),f=s(e.skeletons),h=s(e.animations),p=s(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),d.length>0&&(r.shapes=d),f.length>0&&(r.skeletons=f),h.length>0&&(r.animations=h),p.length>0&&(r.nodes=p)}return r.object=i,r;function s(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}ms.DEFAULT_UP=new ft(0,1,0);ms.DEFAULT_MATRIX_AUTO_UPDATE=!0;ms.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const gc=new ft,ff=new ft,Xk=new ft,hf=new ft,oy=new ft,ly=new ft,rQ=new ft,Yk=new ft,Qk=new ft,Zk=new ft,Jk=new _a,eL=new _a,tL=new _a;class Cc{constructor(e=new ft,t=new ft,r=new ft){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),gc.subVectors(e,t),i.cross(gc);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){gc.subVectors(i,t),ff.subVectors(r,t),Xk.subVectors(e,t);const s=gc.dot(gc),o=gc.dot(ff),l=gc.dot(Xk),u=ff.dot(ff),c=ff.dot(Xk),d=s*u-o*o;if(d===0)return a.set(0,0,0),null;const f=1/d,h=(u*l-o*c)*f,p=(s*c-o*l)*f;return a.set(1-h-p,p,h)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,hf)===null?!1:hf.x>=0&&hf.y>=0&&hf.x+hf.y<=1}static getInterpolation(e,t,r,i,a,s,o,l){return this.getBarycoord(e,t,r,i,hf)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,hf.x),l.addScaledVector(s,hf.y),l.addScaledVector(o,hf.z),l)}static getInterpolatedAttribute(e,t,r,i,a,s){return Jk.setScalar(0),eL.setScalar(0),tL.setScalar(0),Jk.fromBufferAttribute(e,t),eL.fromBufferAttribute(e,r),tL.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(Jk,a.x),s.addScaledVector(eL,a.y),s.addScaledVector(tL,a.z),s}static isFrontFacing(e,t,r,i){return gc.subVectors(r,t),ff.subVectors(e,t),gc.cross(ff).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return gc.subVectors(this.c,this.b),ff.subVectors(this.a,this.b),gc.cross(ff).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Cc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Cc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,a){return Cc.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return Cc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Cc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let s,o;oy.subVectors(i,r),ly.subVectors(a,r),Yk.subVectors(e,r);const l=oy.dot(Yk),u=ly.dot(Yk);if(l<=0&&u<=0)return t.copy(r);Qk.subVectors(e,i);const c=oy.dot(Qk),d=ly.dot(Qk);if(c>=0&&d<=c)return t.copy(i);const f=l*d-c*u;if(f<=0&&l>=0&&c<=0)return s=l/(l-c),t.copy(r).addScaledVector(oy,s);Zk.subVectors(e,a);const h=oy.dot(Zk),p=ly.dot(Zk);if(p>=0&&h<=p)return t.copy(a);const m=h*u-l*p;if(m<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(r).addScaledVector(ly,o);const v=c*p-h*d;if(v<=0&&d-c>=0&&h-p>=0)return rQ.subVectors(a,i),o=(d-c)/(d-c+(h-p)),t.copy(i).addScaledVector(rQ,o);const g=1/(v+m+f);return s=m*g,o=f*g,t.copy(r).addScaledVector(oy,s).addScaledVector(ly,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const lhe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yh={h:0,s:0,l:0},EA={h:0,s:0,l:0};function nL(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Di{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Cu){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ii.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Ii.workingColorSpace){return this.r=e,this.g=t,this.b=r,Ii.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Ii.workingColorSpace){if(e=rU(e,1),t=ei(t,0,1),r=ei(r,0,1),t===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+t):r+t-r*t,s=2*r-a;this.r=nL(s,a,e+1/3),this.g=nL(s,a,e),this.b=nL(s,a,e-1/3)}return Ii.toWorkingColorSpace(this,i),this}setStyle(e,t=Cu){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Cu){const r=lhe[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Hf(e.r),this.g=Hf(e.g),this.b=Hf(e.b),this}copyLinearToSRGB(e){return this.r=v1(e.r),this.g=v1(e.g),this.b=v1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Cu){return Ii.fromWorkingColorSpace(so.copy(this),e),Math.round(ei(so.r*255,0,255))*65536+Math.round(ei(so.g*255,0,255))*256+Math.round(ei(so.b*255,0,255))}getHexString(e=Cu){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ii.workingColorSpace){Ii.fromWorkingColorSpace(so.copy(this),t);const r=so.r,i=so.g,a=so.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let l,u;const c=(o+s)/2;if(o===s)l=0,u=0;else{const d=s-o;switch(u=c<=.5?d/(s+o):d/(2-s-o),s){case r:l=(i-a)/d+(i<a?6:0);break;case i:l=(a-r)/d+2;break;case a:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Ii.workingColorSpace){return Ii.fromWorkingColorSpace(so.copy(this),t),e.r=so.r,e.g=so.g,e.b=so.b,e}getStyle(e=Cu){Ii.fromWorkingColorSpace(so.copy(this),e);const t=so.r,r=so.g,i=so.b;return e!==Cu?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Yh),this.setHSL(Yh.h+e,Yh.s+t,Yh.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Yh),e.getHSL(EA);const r=Ix(Yh.h,EA.h,t),i=Ix(Yh.s,EA.s,t),a=Ix(Yh.l,EA.l,t);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*r+a[6]*i,this.g=a[1]*t+a[4]*r+a[7]*i,this.b=a[2]*t+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const so=new Di;Di.NAMES=lhe;let Jmt=0;class UI extends Uv{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Jmt++}),this.uuid=hb(),this.name="",this.type="Material",this.blending=Dp,this.side=Ud,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=rw,this.blendDst=iw,this.blendEquation=y0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Di(0,0,0),this.blendAlpha=0,this.depthFunc=d_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=VY,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Jg,this.stencilZFail=Jg,this.stencilZPass=Jg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Dp&&(r.blending=this.blending),this.side!==Ud&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==rw&&(r.blendSrc=this.blendSrc),this.blendDst!==iw&&(r.blendDst=this.blendDst),this.blendEquation!==y0&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==d_&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==VY&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Jg&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Jg&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Jg&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(t){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Tv extends UI{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Di(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ih,this.combine=Gfe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const If=e0t();function e0t(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,a[l]=u|c}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:s,offsetTable:o}}function t0t(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=ei(n,-65504,65504),If.floatView[0]=n;const e=If.uint32View[0],t=e>>23&511;return If.baseTable[t]+((e&8388607)>>If.shiftTable[t])}function n0t(n){const e=n>>10;return If.uint32View[0]=If.mantissaTable[If.offsetTable[e]+(n&1023)]+If.exponentTable[e],If.floatView[0]}const ow={toHalfFloat:t0t,fromHalfFloat:n0t},Qa=new ft,MA=new cr;class Gu{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=$Y,this.updateRanges=[],this.gpuType=Pc,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)MA.fromBufferAttribute(this,t),MA.applyMatrix3(e),this.setXY(t,MA.x,MA.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Qa.fromBufferAttribute(this,t),Qa.applyMatrix3(e),this.setXYZ(t,Qa.x,Qa.y,Qa.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Qa.fromBufferAttribute(this,t),Qa.applyMatrix4(e),this.setXYZ(t,Qa.x,Qa.y,Qa.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Qa.fromBufferAttribute(this,t),Qa.applyNormalMatrix(e),this.setXYZ(t,Qa.x,Qa.y,Qa.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Qa.fromBufferAttribute(this,t),Qa.transformDirection(e),this.setXYZ(t,Qa.x,Qa.y,Qa.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Ey(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Lo(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ey(t,this.array)),t}setX(e,t){return this.normalized&&(t=Lo(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ey(t,this.array)),t}setY(e,t){return this.normalized&&(t=Lo(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ey(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Lo(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ey(t,this.array)),t}setW(e,t){return this.normalized&&(t=Lo(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Lo(t,this.array),r=Lo(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Lo(t,this.array),r=Lo(r,this.array),i=Lo(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=Lo(t,this.array),r=Lo(r,this.array),i=Lo(i,this.array),a=Lo(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==$Y&&(e.usage=this.usage),e}}class uhe extends Gu{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class che extends Gu{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class nu extends Gu{constructor(e,t,r){super(new Float32Array(e),t,r)}}let r0t=0;const vu=new kr,rL=new ms,uy=new ft,Hl=new Sd,wS=new Sd,ws=new ft;class tc extends Uv{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:r0t++}),this.uuid=hb(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(rhe(e)?che:uhe)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Rr().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return vu.makeRotationFromQuaternion(e),this.applyMatrix4(vu),this}rotateX(e){return vu.makeRotationX(e),this.applyMatrix4(vu),this}rotateY(e){return vu.makeRotationY(e),this.applyMatrix4(vu),this}rotateZ(e){return vu.makeRotationZ(e),this.applyMatrix4(vu),this}translate(e,t,r){return vu.makeTranslation(e,t,r),this.applyMatrix4(vu),this}scale(e,t,r){return vu.makeScale(e,t,r),this.applyMatrix4(vu),this}lookAt(e){return rL.lookAt(e),rL.updateMatrix(),this.applyMatrix4(rL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uy).negate(),this.translate(uy.x,uy.y,uy.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,a=e.length;i<a;i++){const s=e[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new nu(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const a=e[i];t.setXYZ(i,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Sd);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ft(-1/0,-1/0,-1/0),new ft(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];Hl.setFromBufferAttribute(a),this.morphTargetsRelative?(ws.addVectors(this.boundingBox.min,Hl.min),this.boundingBox.expandByPoint(ws),ws.addVectors(this.boundingBox.max,Hl.max),this.boundingBox.expandByPoint(ws)):(this.boundingBox.expandByPoint(Hl.min),this.boundingBox.expandByPoint(Hl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new iU);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ft,1/0);return}if(e){const r=this.boundingSphere.center;if(Hl.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];wS.setFromBufferAttribute(o),this.morphTargetsRelative?(ws.addVectors(Hl.min,wS.min),Hl.expandByPoint(ws),ws.addVectors(Hl.max,wS.max),Hl.expandByPoint(ws)):(Hl.expandByPoint(wS.min),Hl.expandByPoint(wS.max))}Hl.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)ws.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(ws));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)ws.fromBufferAttribute(o,u),l&&(uy.fromBufferAttribute(e,u),ws.add(uy)),i=Math.max(i,r.distanceToSquared(ws))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Gu(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),o=[],l=[];for(let T=0;T<r.count;T++)o[T]=new ft,l[T]=new ft;const u=new ft,c=new ft,d=new ft,f=new cr,h=new cr,p=new cr,m=new ft,v=new ft;function g(T,C,E){u.fromBufferAttribute(r,T),c.fromBufferAttribute(r,C),d.fromBufferAttribute(r,E),f.fromBufferAttribute(a,T),h.fromBufferAttribute(a,C),p.fromBufferAttribute(a,E),c.sub(u),d.sub(u),h.sub(f),p.sub(f);const I=1/(h.x*p.y-p.x*h.y);isFinite(I)&&(m.copy(c).multiplyScalar(p.y).addScaledVector(d,-h.y).multiplyScalar(I),v.copy(d).multiplyScalar(h.x).addScaledVector(c,-p.x).multiplyScalar(I),o[T].add(m),o[C].add(m),o[E].add(m),l[T].add(v),l[C].add(v),l[E].add(v))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let T=0,C=y.length;T<C;++T){const E=y[T],I=E.start,P=E.count;for(let L=I,N=I+P;L<N;L+=3)g(e.getX(L+0),e.getX(L+1),e.getX(L+2))}const _=new ft,b=new ft,x=new ft,w=new ft;function A(T){x.fromBufferAttribute(i,T),w.copy(x);const C=o[T];_.copy(C),_.sub(x.multiplyScalar(x.dot(C))).normalize(),b.crossVectors(w,C);const I=b.dot(l[T])<0?-1:1;s.setXYZW(T,_.x,_.y,_.z,I)}for(let T=0,C=y.length;T<C;++T){const E=y[T],I=E.start,P=E.count;for(let L=I,N=I+P;L<N;L+=3)A(e.getX(L+0)),A(e.getX(L+1)),A(e.getX(L+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Gu(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,h=r.count;f<h;f++)r.setXYZ(f,0,0,0);const i=new ft,a=new ft,s=new ft,o=new ft,l=new ft,u=new ft,c=new ft,d=new ft;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),m=e.getX(f+1),v=e.getX(f+2);i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,m),s.fromBufferAttribute(t,v),c.subVectors(s,a),d.subVectors(i,a),c.cross(d),o.fromBufferAttribute(r,p),l.fromBufferAttribute(r,m),u.fromBufferAttribute(r,v),o.add(c),l.add(c),u.add(c),r.setXYZ(p,o.x,o.y,o.z),r.setXYZ(m,l.x,l.y,l.z),r.setXYZ(v,u.x,u.y,u.z)}else for(let f=0,h=t.count;f<h;f+=3)i.fromBufferAttribute(t,f+0),a.fromBufferAttribute(t,f+1),s.fromBufferAttribute(t,f+2),c.subVectors(s,a),d.subVectors(i,a),c.cross(d),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ws.fromBufferAttribute(e,t),ws.normalize(),e.setXYZ(t,ws.x,ws.y,ws.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,d=o.normalized,f=new u.constructor(l.length*c);let h=0,p=0;for(let m=0,v=l.length;m<v;m++){o.isInterleavedBufferAttribute?h=l[m]*o.data.stride+o.offset:h=l[m]*c;for(let g=0;g<c;g++)f[p++]=u[h++]}return new Gu(f,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new tc,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);t.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const l=[],u=a[o];for(let c=0,d=u.length;c<d;c++){const f=u[c],h=e(f,r);l.push(h)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const u=s[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,f=u.length;d<f;d++){const h=u[d];c.push(h.toJSON(e.data))}c.length>0&&(i[l]=c,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const a=e.morphAttributes;for(const u in a){const c=[],d=a[u];for(let f=0,h=d.length;f<h;f++)c.push(d[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,c=s.length;u<c;u++){const d=s[u];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const iQ=new kr,Jm=new she,IA=new iU,aQ=new ft,DA=new ft,PA=new ft,RA=new ft,iL=new ft,kA=new ft,sQ=new ft,LA=new ft;class Ua extends ms{constructor(e=new tc,t=new Tv){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){kA.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const c=o[l],d=a[l];c!==0&&(iL.fromBufferAttribute(d,e),s?kA.addScaledVector(iL,c):kA.addScaledVector(iL.sub(t),c))}t.add(kA)}return t}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),IA.copy(r.boundingSphere),IA.applyMatrix4(a),Jm.copy(e.ray).recast(e.near),!(IA.containsPoint(Jm.origin)===!1&&(Jm.intersectSphere(IA,aQ)===null||Jm.origin.distanceToSquared(aQ)>(e.far-e.near)**2))&&(iQ.copy(a).invert(),Jm.copy(e.ray).applyMatrix4(iQ),!(r.boundingBox!==null&&Jm.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Jm)))}_computeIntersections(e,t,r){let i;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,u=a.attributes.uv,c=a.attributes.uv1,d=a.attributes.normal,f=a.groups,h=a.drawRange;if(o!==null)if(Array.isArray(s))for(let p=0,m=f.length;p<m;p++){const v=f[p],g=s[v.materialIndex],y=Math.max(v.start,h.start),_=Math.min(o.count,Math.min(v.start+v.count,h.start+h.count));for(let b=y,x=_;b<x;b+=3){const w=o.getX(b),A=o.getX(b+1),T=o.getX(b+2);i=OA(this,g,e,r,u,c,d,w,A,T),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=v.materialIndex,t.push(i))}}else{const p=Math.max(0,h.start),m=Math.min(o.count,h.start+h.count);for(let v=p,g=m;v<g;v+=3){const y=o.getX(v),_=o.getX(v+1),b=o.getX(v+2);i=OA(this,s,e,r,u,c,d,y,_,b),i&&(i.faceIndex=Math.floor(v/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let p=0,m=f.length;p<m;p++){const v=f[p],g=s[v.materialIndex],y=Math.max(v.start,h.start),_=Math.min(l.count,Math.min(v.start+v.count,h.start+h.count));for(let b=y,x=_;b<x;b+=3){const w=b,A=b+1,T=b+2;i=OA(this,g,e,r,u,c,d,w,A,T),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=v.materialIndex,t.push(i))}}else{const p=Math.max(0,h.start),m=Math.min(l.count,h.start+h.count);for(let v=p,g=m;v<g;v+=3){const y=v,_=v+1,b=v+2;i=OA(this,s,e,r,u,c,d,y,_,b),i&&(i.faceIndex=Math.floor(v/3),t.push(i))}}}}function i0t(n,e,t,r,i,a,s,o){let l;if(e.side===wl?l=r.intersectTriangle(s,a,i,!0,o):l=r.intersectTriangle(i,a,s,e.side===Ud,o),l===null)return null;LA.copy(o),LA.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(LA);return u<t.near||u>t.far?null:{distance:u,point:LA.clone(),object:n}}function OA(n,e,t,r,i,a,s,o,l,u){n.getVertexPosition(o,DA),n.getVertexPosition(l,PA),n.getVertexPosition(u,RA);const c=i0t(n,e,t,r,DA,PA,RA,sQ);if(c){const d=new ft;Cc.getBarycoord(sQ,DA,PA,RA,d),i&&(c.uv=Cc.getInterpolatedAttribute(i,o,l,u,d,new cr)),a&&(c.uv1=Cc.getInterpolatedAttribute(a,o,l,u,d,new cr)),s&&(c.normal=Cc.getInterpolatedAttribute(s,o,l,u,d,new ft),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const f={a:o,b:l,c:u,normal:new ft,materialIndex:0};Cc.getNormal(DA,PA,RA,f.normal),c.face=f,c.barycoord=d}return c}class pb extends tc{constructor(e=1,t=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],c=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,r,t,e,s,a,0),p("z","y","x",1,-1,r,t,-e,s,a,1),p("x","z","y",1,1,e,r,t,i,s,2),p("x","z","y",1,-1,e,r,-t,i,s,3),p("x","y","z",1,-1,e,t,r,i,a,4),p("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new nu(u,3)),this.setAttribute("normal",new nu(c,3)),this.setAttribute("uv",new nu(d,2));function p(m,v,g,y,_,b,x,w,A,T,C){const E=b/A,I=x/T,P=b/2,L=x/2,N=w/2,F=A+1,k=T+1;let H=0,U=0;const B=new ft;for(let $=0;$<k;$++){const ee=$*I-L;for(let re=0;re<F;re++){const ne=re*E-P;B[m]=ne*y,B[v]=ee*_,B[g]=N,u.push(B.x,B.y,B.z),B[m]=0,B[v]=0,B[g]=w>0?1:-1,c.push(B.x,B.y,B.z),d.push(re/A),d.push(1-$/T),H+=1}}for(let $=0;$<T;$++)for(let ee=0;ee<A;ee++){const re=f+ee+F*$,ne=f+ee+F*($+1),ae=f+(ee+1)+F*($+1),pe=f+(ee+1)+F*$;l.push(re,ne,pe),l.push(ne,ae,pe),U+=6}o.addGroup(h,U,C),h+=U,f+=H}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pb(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function g_(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Oo(n){const e={};for(let t=0;t<n.length;t++){const r=g_(n[t]);for(const i in r)e[i]=r[i]}return e}function a0t(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function dhe(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ii.workingColorSpace}const s0t={clone:g_,merge:Oo};var o0t=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,l0t=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ru extends UI{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=o0t,this.fragmentShader=l0t,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=g_(e.uniforms),this.uniformsGroups=a0t(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class fhe extends ms{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new kr,this.projectionMatrix=new kr,this.projectionMatrixInverse=new kr,this.coordinateSystem=kf}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Qh=new ft,oQ=new cr,lQ=new cr;class Pu extends fhe{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=sw*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Mx*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return sw*2*Math.atan(Math.tan(Mx*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Qh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Qh.x,Qh.y).multiplyScalar(-e/Qh.z),Qh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Qh.x,Qh.y).multiplyScalar(-e/Qh.z)}getViewSize(e,t){return this.getViewBounds(e,oQ,lQ),t.subVectors(lQ,oQ)}setViewOffset(e,t,r,i,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Mx*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/l,t-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const cy=-90,dy=1;class u0t extends ms{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Pu(cy,dy,e,t);i.layers=this.layers,this.add(i);const a=new Pu(cy,dy,e,t);a.layers=this.layers,this.add(a);const s=new Pu(cy,dy,e,t);s.layers=this.layers,this.add(s);const o=new Pu(cy,dy,e,t);o.layers=this.layers,this.add(o);const l=new Pu(cy,dy,e,t);l.layers=this.layers,this.add(l);const u=new Pu(cy,dy,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,a,s,o,l]=t;for(const u of t)this.remove(u);if(e===kf)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===X3)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,u,c]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,a),e.setRenderTarget(r,1,i),e.render(t,s),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=m,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(d,f,h),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class hhe extends Yo{constructor(e,t,r,i,a,s,o,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:f_,super(e,t,r,i,a,s,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class c0t extends im{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new hhe(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:bd}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new pb(5,5,5),a=new ru({name:"CubemapFromEquirect",uniforms:g_(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:wl,blending:Ip});a.uniforms.tEquirect.value=t;const s=new Ua(i,a),o=t.minFilter;return t.minFilter===F0&&(t.minFilter=bd),new u0t(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(a)}}class d0t extends ms{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ih,this.environmentIntensity=1,this.environmentRotation=new ih,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Zh extends Yo{constructor(e=null,t=1,r=1,i,a,s,o,l,u=tu,c=tu,d,f){super(null,s,o,l,u,c,i,a,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class f0t extends Gu{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const aL=new ft,h0t=new ft,p0t=new Rr;class op{constructor(e=new ft(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=aL.subVectors(r,t).cross(h0t.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(aL),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||p0t.getNormalMatrix(e),i=this.coplanarPoint(aL).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const e0=new iU,NA=new ft;class phe{constructor(e=new op,t=new op,r=new op,i=new op,a=new op,s=new op){this.planes=[e,t,r,i,a,s]}set(e,t,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=kf){const r=this.planes,i=e.elements,a=i[0],s=i[1],o=i[2],l=i[3],u=i[4],c=i[5],d=i[6],f=i[7],h=i[8],p=i[9],m=i[10],v=i[11],g=i[12],y=i[13],_=i[14],b=i[15];if(r[0].setComponents(l-a,f-u,v-h,b-g).normalize(),r[1].setComponents(l+a,f+u,v+h,b+g).normalize(),r[2].setComponents(l+s,f+c,v+p,b+y).normalize(),r[3].setComponents(l-s,f-c,v-p,b-y).normalize(),r[4].setComponents(l-o,f-d,v-m,b-_).normalize(),t===kf)r[5].setComponents(l+o,f+d,v+m,b+_).normalize();else if(t===X3)r[5].setComponents(o,d,m,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),e0.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),e0.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(e0)}intersectsSprite(e){return e0.center.set(0,0,0),e0.radius=.7071067811865476,e0.applyMatrix4(e.matrixWorld),this.intersectsSphere(e0)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(NA.x=i.normal.x>0?e.max.x:e.min.x,NA.y=i.normal.y>0?e.max.y:e.min.y,NA.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(NA)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class BA extends ms{constructor(){super(),this.isGroup=!0,this.type="Group"}}class aU extends Yo{constructor(e,t,r,i,a,s,o,l,u,c=rv){if(c!==rv&&c!==m_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===rv&&(r=Bu),r===void 0&&c===m_&&(r=p_),super(null,i,a,s,o,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:tu,this.minFilter=l!==void 0?l:tu,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class lw extends tc{constructor(e=1,t=1,r=1,i=32,a=1,s=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:l};const u=this;i=Math.floor(i),a=Math.floor(a);const c=[],d=[],f=[],h=[];let p=0;const m=[],v=r/2;let g=0;y(),s===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new nu(d,3)),this.setAttribute("normal",new nu(f,3)),this.setAttribute("uv",new nu(h,2));function y(){const b=new ft,x=new ft;let w=0;const A=(t-e)/r;for(let T=0;T<=a;T++){const C=[],E=T/a,I=E*(t-e)+e;for(let P=0;P<=i;P++){const L=P/i,N=L*l+o,F=Math.sin(N),k=Math.cos(N);x.x=I*F,x.y=-E*r+v,x.z=I*k,d.push(x.x,x.y,x.z),b.set(F,A,k).normalize(),f.push(b.x,b.y,b.z),h.push(L,1-E),C.push(p++)}m.push(C)}for(let T=0;T<i;T++)for(let C=0;C<a;C++){const E=m[C][T],I=m[C+1][T],P=m[C+1][T+1],L=m[C][T+1];(e>0||C!==0)&&(c.push(E,I,L),w+=3),(t>0||C!==a-1)&&(c.push(I,P,L),w+=3)}u.addGroup(g,w,0),g+=w}function _(b){const x=p,w=new cr,A=new ft;let T=0;const C=b===!0?e:t,E=b===!0?1:-1;for(let P=1;P<=i;P++)d.push(0,v*E,0),f.push(0,E,0),h.push(.5,.5),p++;const I=p;for(let P=0;P<=i;P++){const N=P/i*l+o,F=Math.cos(N),k=Math.sin(N);A.x=C*k,A.y=v*E,A.z=C*F,d.push(A.x,A.y,A.z),f.push(0,E,0),w.x=F*.5+.5,w.y=k*.5*E+.5,h.push(w.x,w.y),p++}for(let P=0;P<i;P++){const L=x+P,N=I+P;b===!0?c.push(N,N+1,L):c.push(N+1,N,L),T+=3}u.addGroup(g,T,b===!0?1:2),g+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lw(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sU extends lw{constructor(e=1,t=1,r=32,i=1,a=!1,s=0,o=Math.PI*2){super(0,e,t,r,i,a,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:s,thetaLength:o}}static fromJSON(e){return new sU(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class y_ extends tc{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,s=t/2,o=Math.floor(r),l=Math.floor(i),u=o+1,c=l+1,d=e/o,f=t/l,h=[],p=[],m=[],v=[];for(let g=0;g<c;g++){const y=g*f-s;for(let _=0;_<u;_++){const b=_*d-a;p.push(b,-y,0),m.push(0,0,1),v.push(_/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let y=0;y<o;y++){const _=y+u*g,b=y+u*(g+1),x=y+1+u*(g+1),w=y+1+u*g;h.push(_,b,w),h.push(b,x,w)}this.setIndex(h),this.setAttribute("position",new nu(p,3)),this.setAttribute("normal",new nu(m,3)),this.setAttribute("uv",new nu(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y_(e.width,e.height,e.widthSegments,e.heightSegments)}}class Q3 extends tc{constructor(e=1,t=32,r=16,i=0,a=Math.PI*2,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:a,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(s+o,Math.PI);let u=0;const c=[],d=new ft,f=new ft,h=[],p=[],m=[],v=[];for(let g=0;g<=r;g++){const y=[],_=g/r;let b=0;g===0&&s===0?b=.5/t:g===r&&l===Math.PI&&(b=-.5/t);for(let x=0;x<=t;x++){const w=x/t;d.x=-e*Math.cos(i+w*a)*Math.sin(s+_*o),d.y=e*Math.cos(s+_*o),d.z=e*Math.sin(i+w*a)*Math.sin(s+_*o),p.push(d.x,d.y,d.z),f.copy(d).normalize(),m.push(f.x,f.y,f.z),v.push(w+b,1-_),y.push(u++)}c.push(y)}for(let g=0;g<r;g++)for(let y=0;y<t;y++){const _=c[g][y+1],b=c[g][y],x=c[g+1][y],w=c[g+1][y+1];(g!==0||s>0)&&h.push(_,b,w),(g!==r-1||l<Math.PI)&&h.push(b,x,w)}this.setIndex(h),this.setAttribute("position",new nu(p,3)),this.setAttribute("normal",new nu(m,3)),this.setAttribute("uv",new nu(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Q3(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class m0t extends UI{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=lmt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class v0t extends UI{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class oU extends fhe{constructor(e=-1,t=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class g0t extends tc{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class y0t extends Pu{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class uQ{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=ei(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(ei(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}function cQ(n,e,t,r){const i=_0t(r);switch(t){case Xfe:return n*e;case Qfe:return n*e;case Zfe:return n*e*2;case Jfe:return n*e/i.components*i.byteLength;case FI:return n*e/i.components*i.byteLength;case tU:return n*e*2/i.components*i.byteLength;case nU:return n*e*2/i.components*i.byteLength;case Yfe:return n*e*3/i.components*i.byteLength;case qo:return n*e*4/i.components*i.byteLength;case m1:return n*e*4/i.components*i.byteLength;case WE:case qE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case jE:case KE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case m8:case g8:return Math.max(n,16)*Math.max(e,8)/4;case p8:case v8:return Math.max(n,8)*Math.max(e,8)/2;case y8:case _8:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case b8:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case S8:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case x8:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case w8:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case T8:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case C8:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case A8:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case E8:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case M8:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case I8:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case D8:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case P8:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case R8:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case k8:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case L8:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case XE:case O8:case N8:return Math.ceil(n/4)*Math.ceil(e/4)*16;case ehe:case B8:return Math.ceil(n/4)*Math.ceil(e/4)*8;case F8:case U8:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function _0t(n){switch(n){case zd:case qfe:return{byteLength:1,components:1};case aw:case jfe:case fb:return{byteLength:2,components:1};case J9:case eU:return{byteLength:2,components:4};case Bu:case Z9:case Pc:return{byteLength:4,components:1};case Kfe:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Q9}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Q9);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function mhe(){let n=null,e=!1,t=null,r=null;function i(a,s){t(a,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function b0t(n){const e=new WeakMap;function t(o,l){const u=o.array,c=o.usage,d=u.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,u,c),o.onUploadCallback();let h;if(u instanceof Float32Array)h=n.FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?h=n.HALF_FLOAT:h=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)h=n.SHORT;else if(u instanceof Uint32Array)h=n.UNSIGNED_INT;else if(u instanceof Int32Array)h=n.INT;else if(u instanceof Int8Array)h=n.BYTE;else if(u instanceof Uint8Array)h=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)h=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:h,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:d}}function r(o,l,u){const c=l.array,d=l.updateRanges;if(n.bindBuffer(u,o),d.length===0)n.bufferSubData(u,0,c);else{d.sort((h,p)=>h.start-p.start);let f=0;for(let h=1;h<d.length;h++){const p=d[f],m=d[h];m.start<=p.start+p.count+1?p.count=Math.max(p.count,m.start+m.count-p.start):(++f,d[f]=m)}d.length=f+1;for(let h=0,p=d.length;h<p;h++){const m=d[h];n.bufferSubData(u,m.start*c.BYTES_PER_ELEMENT,c,m.start,m.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function s(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const c=e.get(o);(!c||c.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,o,l),u.version=o.version}}return{get:i,remove:a,update:s}}var S0t=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,x0t=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,w0t=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,T0t=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,C0t=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,A0t=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,E0t=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,M0t=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,I0t=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,D0t=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,P0t=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,R0t=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,k0t=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,L0t=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,O0t=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,N0t=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,B0t=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,F0t=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,U0t=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,z0t=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,H0t=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,V0t=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,$0t=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,G0t=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,W0t=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,q0t=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,j0t=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,K0t=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,X0t=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Y0t=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Q0t="gl_FragColor = linearToOutputTexel( gl_FragColor );",Z0t=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,J0t=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,evt=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,tvt=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,nvt=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,rvt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ivt=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,avt=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,svt=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ovt=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,lvt=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,uvt=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cvt=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,dvt=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,fvt=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,hvt=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,pvt=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,mvt=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,vvt=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gvt=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,yvt=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,_vt=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bvt=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Svt=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,xvt=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,wvt=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Tvt=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Cvt=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Avt=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Evt=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Mvt=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Ivt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Dvt=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Pvt=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Rvt=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kvt=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Lvt=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Ovt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Nvt=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Bvt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Fvt=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Uvt=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,zvt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Hvt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Vvt=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,$vt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Gvt=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Wvt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,qvt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,jvt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Kvt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Xvt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Yvt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Qvt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Zvt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Jvt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,egt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,tgt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ngt=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,rgt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,igt=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,agt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sgt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ogt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,lgt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ugt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cgt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,dgt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fgt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,hgt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,pgt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,mgt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,vgt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ggt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ygt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,_gt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const bgt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Sgt=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xgt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wgt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Tgt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Cgt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Agt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Egt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Mgt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Igt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Dgt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Pgt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Rgt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kgt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Lgt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Ogt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ngt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Bgt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fgt=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ugt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zgt=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Hgt=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Vgt=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$gt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ggt=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Wgt=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qgt=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jgt=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kgt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Xgt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ygt=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qgt=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Zgt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Jgt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Qr={alphahash_fragment:S0t,alphahash_pars_fragment:x0t,alphamap_fragment:w0t,alphamap_pars_fragment:T0t,alphatest_fragment:C0t,alphatest_pars_fragment:A0t,aomap_fragment:E0t,aomap_pars_fragment:M0t,batching_pars_vertex:I0t,batching_vertex:D0t,begin_vertex:P0t,beginnormal_vertex:R0t,bsdfs:k0t,iridescence_fragment:L0t,bumpmap_pars_fragment:O0t,clipping_planes_fragment:N0t,clipping_planes_pars_fragment:B0t,clipping_planes_pars_vertex:F0t,clipping_planes_vertex:U0t,color_fragment:z0t,color_pars_fragment:H0t,color_pars_vertex:V0t,color_vertex:$0t,common:G0t,cube_uv_reflection_fragment:W0t,defaultnormal_vertex:q0t,displacementmap_pars_vertex:j0t,displacementmap_vertex:K0t,emissivemap_fragment:X0t,emissivemap_pars_fragment:Y0t,colorspace_fragment:Q0t,colorspace_pars_fragment:Z0t,envmap_fragment:J0t,envmap_common_pars_fragment:evt,envmap_pars_fragment:tvt,envmap_pars_vertex:nvt,envmap_physical_pars_fragment:hvt,envmap_vertex:rvt,fog_vertex:ivt,fog_pars_vertex:avt,fog_fragment:svt,fog_pars_fragment:ovt,gradientmap_pars_fragment:lvt,lightmap_pars_fragment:uvt,lights_lambert_fragment:cvt,lights_lambert_pars_fragment:dvt,lights_pars_begin:fvt,lights_toon_fragment:pvt,lights_toon_pars_fragment:mvt,lights_phong_fragment:vvt,lights_phong_pars_fragment:gvt,lights_physical_fragment:yvt,lights_physical_pars_fragment:_vt,lights_fragment_begin:bvt,lights_fragment_maps:Svt,lights_fragment_end:xvt,logdepthbuf_fragment:wvt,logdepthbuf_pars_fragment:Tvt,logdepthbuf_pars_vertex:Cvt,logdepthbuf_vertex:Avt,map_fragment:Evt,map_pars_fragment:Mvt,map_particle_fragment:Ivt,map_particle_pars_fragment:Dvt,metalnessmap_fragment:Pvt,metalnessmap_pars_fragment:Rvt,morphinstance_vertex:kvt,morphcolor_vertex:Lvt,morphnormal_vertex:Ovt,morphtarget_pars_vertex:Nvt,morphtarget_vertex:Bvt,normal_fragment_begin:Fvt,normal_fragment_maps:Uvt,normal_pars_fragment:zvt,normal_pars_vertex:Hvt,normal_vertex:Vvt,normalmap_pars_fragment:$vt,clearcoat_normal_fragment_begin:Gvt,clearcoat_normal_fragment_maps:Wvt,clearcoat_pars_fragment:qvt,iridescence_pars_fragment:jvt,opaque_fragment:Kvt,packing:Xvt,premultiplied_alpha_fragment:Yvt,project_vertex:Qvt,dithering_fragment:Zvt,dithering_pars_fragment:Jvt,roughnessmap_fragment:egt,roughnessmap_pars_fragment:tgt,shadowmap_pars_fragment:ngt,shadowmap_pars_vertex:rgt,shadowmap_vertex:igt,shadowmask_pars_fragment:agt,skinbase_vertex:sgt,skinning_pars_vertex:ogt,skinning_vertex:lgt,skinnormal_vertex:ugt,specularmap_fragment:cgt,specularmap_pars_fragment:dgt,tonemapping_fragment:fgt,tonemapping_pars_fragment:hgt,transmission_fragment:pgt,transmission_pars_fragment:mgt,uv_pars_fragment:vgt,uv_pars_vertex:ggt,uv_vertex:ygt,worldpos_vertex:_gt,background_vert:bgt,background_frag:Sgt,backgroundCube_vert:xgt,backgroundCube_frag:wgt,cube_vert:Tgt,cube_frag:Cgt,depth_vert:Agt,depth_frag:Egt,distanceRGBA_vert:Mgt,distanceRGBA_frag:Igt,equirect_vert:Dgt,equirect_frag:Pgt,linedashed_vert:Rgt,linedashed_frag:kgt,meshbasic_vert:Lgt,meshbasic_frag:Ogt,meshlambert_vert:Ngt,meshlambert_frag:Bgt,meshmatcap_vert:Fgt,meshmatcap_frag:Ugt,meshnormal_vert:zgt,meshnormal_frag:Hgt,meshphong_vert:Vgt,meshphong_frag:$gt,meshphysical_vert:Ggt,meshphysical_frag:Wgt,meshtoon_vert:qgt,meshtoon_frag:jgt,points_vert:Kgt,points_frag:Xgt,shadow_vert:Ygt,shadow_frag:Qgt,sprite_vert:Zgt,sprite_frag:Jgt},Vn={common:{diffuse:{value:new Di(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rr},alphaMap:{value:null},alphaMapTransform:{value:new Rr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rr}},envmap:{envMap:{value:null},envMapRotation:{value:new Rr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rr},normalScale:{value:new cr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Di(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Di(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rr},alphaTest:{value:0},uvTransform:{value:new Rr}},sprite:{diffuse:{value:new Di(16777215)},opacity:{value:1},center:{value:new cr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rr},alphaMap:{value:null},alphaMapTransform:{value:new Rr},alphaTest:{value:0}}},ld={basic:{uniforms:Oo([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.fog]),vertexShader:Qr.meshbasic_vert,fragmentShader:Qr.meshbasic_frag},lambert:{uniforms:Oo([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,Vn.lights,{emissive:{value:new Di(0)}}]),vertexShader:Qr.meshlambert_vert,fragmentShader:Qr.meshlambert_frag},phong:{uniforms:Oo([Vn.common,Vn.specularmap,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,Vn.lights,{emissive:{value:new Di(0)},specular:{value:new Di(1118481)},shininess:{value:30}}]),vertexShader:Qr.meshphong_vert,fragmentShader:Qr.meshphong_frag},standard:{uniforms:Oo([Vn.common,Vn.envmap,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.roughnessmap,Vn.metalnessmap,Vn.fog,Vn.lights,{emissive:{value:new Di(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Qr.meshphysical_vert,fragmentShader:Qr.meshphysical_frag},toon:{uniforms:Oo([Vn.common,Vn.aomap,Vn.lightmap,Vn.emissivemap,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.gradientmap,Vn.fog,Vn.lights,{emissive:{value:new Di(0)}}]),vertexShader:Qr.meshtoon_vert,fragmentShader:Qr.meshtoon_frag},matcap:{uniforms:Oo([Vn.common,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,Vn.fog,{matcap:{value:null}}]),vertexShader:Qr.meshmatcap_vert,fragmentShader:Qr.meshmatcap_frag},points:{uniforms:Oo([Vn.points,Vn.fog]),vertexShader:Qr.points_vert,fragmentShader:Qr.points_frag},dashed:{uniforms:Oo([Vn.common,Vn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qr.linedashed_vert,fragmentShader:Qr.linedashed_frag},depth:{uniforms:Oo([Vn.common,Vn.displacementmap]),vertexShader:Qr.depth_vert,fragmentShader:Qr.depth_frag},normal:{uniforms:Oo([Vn.common,Vn.bumpmap,Vn.normalmap,Vn.displacementmap,{opacity:{value:1}}]),vertexShader:Qr.meshnormal_vert,fragmentShader:Qr.meshnormal_frag},sprite:{uniforms:Oo([Vn.sprite,Vn.fog]),vertexShader:Qr.sprite_vert,fragmentShader:Qr.sprite_frag},background:{uniforms:{uvTransform:{value:new Rr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Qr.background_vert,fragmentShader:Qr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Rr}},vertexShader:Qr.backgroundCube_vert,fragmentShader:Qr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Qr.cube_vert,fragmentShader:Qr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qr.equirect_vert,fragmentShader:Qr.equirect_frag},distanceRGBA:{uniforms:Oo([Vn.common,Vn.displacementmap,{referencePosition:{value:new ft},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qr.distanceRGBA_vert,fragmentShader:Qr.distanceRGBA_frag},shadow:{uniforms:Oo([Vn.lights,Vn.fog,{color:{value:new Di(0)},opacity:{value:1}}]),vertexShader:Qr.shadow_vert,fragmentShader:Qr.shadow_frag}};ld.physical={uniforms:Oo([ld.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rr},clearcoatNormalScale:{value:new cr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rr},sheen:{value:0},sheenColor:{value:new Di(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rr},transmissionSamplerSize:{value:new cr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rr},attenuationDistance:{value:0},attenuationColor:{value:new Di(0)},specularColor:{value:new Di(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rr},anisotropyVector:{value:new cr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rr}}]),vertexShader:Qr.meshphysical_vert,fragmentShader:Qr.meshphysical_frag};const FA={r:0,b:0,g:0},t0=new ih,eyt=new kr;function tyt(n,e,t,r,i,a,s){const o=new Di(0);let l=a===!0?0:1,u,c,d=null,f=0,h=null;function p(_){let b=_.isScene===!0?_.background:null;return b&&b.isTexture&&(b=(_.backgroundBlurriness>0?t:e).get(b)),b}function m(_){let b=!1;const x=p(_);x===null?g(o,l):x&&x.isColor&&(g(x,1),b=!0);const w=n.xr.getEnvironmentBlendMode();w==="additive"?r.buffers.color.setClear(0,0,0,1,s):w==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(n.autoClear||b)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function v(_,b){const x=p(b);x&&(x.isCubeTexture||x.mapping===BI)?(c===void 0&&(c=new Ua(new pb(1,1,1),new ru({name:"BackgroundCubeMaterial",uniforms:g_(ld.backgroundCube.uniforms),vertexShader:ld.backgroundCube.vertexShader,fragmentShader:ld.backgroundCube.fragmentShader,side:wl,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,A,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),t0.copy(b.backgroundRotation),t0.x*=-1,t0.y*=-1,t0.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(t0.y*=-1,t0.z*=-1),c.material.uniforms.envMap.value=x,c.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(eyt.makeRotationFromEuler(t0)),c.material.toneMapped=Ii.getTransfer(x.colorSpace)!==ji,(d!==x||f!==x.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,d=x,f=x.version,h=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null)):x&&x.isTexture&&(u===void 0&&(u=new Ua(new y_(2,2),new ru({name:"BackgroundMaterial",uniforms:g_(ld.background.uniforms),vertexShader:ld.background.vertexShader,fragmentShader:ld.background.fragmentShader,side:Ud,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=x,u.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,u.material.toneMapped=Ii.getTransfer(x.colorSpace)!==ji,x.matrixAutoUpdate===!0&&x.updateMatrix(),u.material.uniforms.uvTransform.value.copy(x.matrix),(d!==x||f!==x.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,d=x,f=x.version,h=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function g(_,b){_.getRGB(FA,dhe(n)),r.buffers.color.setClear(FA.r,FA.g,FA.b,b,s)}function y(){c!==void 0&&(c.geometry.dispose(),c.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(_,b=1){o.set(_),l=b,g(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(o,l)},render:m,addToRenderList:v,dispose:y}}function nyt(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=f(null);let a=i,s=!1;function o(E,I,P,L,N){let F=!1;const k=d(L,P,I);a!==k&&(a=k,u(a.object)),F=h(E,L,P,N),F&&p(E,L,P,N),N!==null&&e.update(N,n.ELEMENT_ARRAY_BUFFER),(F||s)&&(s=!1,b(E,I,P,L),N!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(N).buffer))}function l(){return n.createVertexArray()}function u(E){return n.bindVertexArray(E)}function c(E){return n.deleteVertexArray(E)}function d(E,I,P){const L=P.wireframe===!0;let N=r[E.id];N===void 0&&(N={},r[E.id]=N);let F=N[I.id];F===void 0&&(F={},N[I.id]=F);let k=F[L];return k===void 0&&(k=f(l()),F[L]=k),k}function f(E){const I=[],P=[],L=[];for(let N=0;N<t;N++)I[N]=0,P[N]=0,L[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:P,attributeDivisors:L,object:E,attributes:{},index:null}}function h(E,I,P,L){const N=a.attributes,F=I.attributes;let k=0;const H=P.getAttributes();for(const U in H)if(H[U].location>=0){const $=N[U];let ee=F[U];if(ee===void 0&&(U==="instanceMatrix"&&E.instanceMatrix&&(ee=E.instanceMatrix),U==="instanceColor"&&E.instanceColor&&(ee=E.instanceColor)),$===void 0||$.attribute!==ee||ee&&$.data!==ee.data)return!0;k++}return a.attributesNum!==k||a.index!==L}function p(E,I,P,L){const N={},F=I.attributes;let k=0;const H=P.getAttributes();for(const U in H)if(H[U].location>=0){let $=F[U];$===void 0&&(U==="instanceMatrix"&&E.instanceMatrix&&($=E.instanceMatrix),U==="instanceColor"&&E.instanceColor&&($=E.instanceColor));const ee={};ee.attribute=$,$&&$.data&&(ee.data=$.data),N[U]=ee,k++}a.attributes=N,a.attributesNum=k,a.index=L}function m(){const E=a.newAttributes;for(let I=0,P=E.length;I<P;I++)E[I]=0}function v(E){g(E,0)}function g(E,I){const P=a.newAttributes,L=a.enabledAttributes,N=a.attributeDivisors;P[E]=1,L[E]===0&&(n.enableVertexAttribArray(E),L[E]=1),N[E]!==I&&(n.vertexAttribDivisor(E,I),N[E]=I)}function y(){const E=a.newAttributes,I=a.enabledAttributes;for(let P=0,L=I.length;P<L;P++)I[P]!==E[P]&&(n.disableVertexAttribArray(P),I[P]=0)}function _(E,I,P,L,N,F,k){k===!0?n.vertexAttribIPointer(E,I,P,N,F):n.vertexAttribPointer(E,I,P,L,N,F)}function b(E,I,P,L){m();const N=L.attributes,F=P.getAttributes(),k=I.defaultAttributeValues;for(const H in F){const U=F[H];if(U.location>=0){let B=N[H];if(B===void 0&&(H==="instanceMatrix"&&E.instanceMatrix&&(B=E.instanceMatrix),H==="instanceColor"&&E.instanceColor&&(B=E.instanceColor)),B!==void 0){const $=B.normalized,ee=B.itemSize,re=e.get(B);if(re===void 0)continue;const ne=re.buffer,ae=re.type,pe=re.bytesPerElement,de=ae===n.INT||ae===n.UNSIGNED_INT||B.gpuType===Z9;if(B.isInterleavedBufferAttribute){const me=B.data,ke=me.stride,Be=B.offset;if(me.isInstancedInterleavedBuffer){for(let Xe=0;Xe<U.locationSize;Xe++)g(U.location+Xe,me.meshPerAttribute);E.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let Xe=0;Xe<U.locationSize;Xe++)v(U.location+Xe);n.bindBuffer(n.ARRAY_BUFFER,ne);for(let Xe=0;Xe<U.locationSize;Xe++)_(U.location+Xe,ee/U.locationSize,ae,$,ke*pe,(Be+ee/U.locationSize*Xe)*pe,de)}else{if(B.isInstancedBufferAttribute){for(let me=0;me<U.locationSize;me++)g(U.location+me,B.meshPerAttribute);E.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=B.meshPerAttribute*B.count)}else for(let me=0;me<U.locationSize;me++)v(U.location+me);n.bindBuffer(n.ARRAY_BUFFER,ne);for(let me=0;me<U.locationSize;me++)_(U.location+me,ee/U.locationSize,ae,$,ee*pe,ee/U.locationSize*me*pe,de)}}else if(k!==void 0){const $=k[H];if($!==void 0)switch($.length){case 2:n.vertexAttrib2fv(U.location,$);break;case 3:n.vertexAttrib3fv(U.location,$);break;case 4:n.vertexAttrib4fv(U.location,$);break;default:n.vertexAttrib1fv(U.location,$)}}}}y()}function x(){T();for(const E in r){const I=r[E];for(const P in I){const L=I[P];for(const N in L)c(L[N].object),delete L[N];delete I[P]}delete r[E]}}function w(E){if(r[E.id]===void 0)return;const I=r[E.id];for(const P in I){const L=I[P];for(const N in L)c(L[N].object),delete L[N];delete I[P]}delete r[E.id]}function A(E){for(const I in r){const P=r[I];if(P[E.id]===void 0)continue;const L=P[E.id];for(const N in L)c(L[N].object),delete L[N];delete P[E.id]}}function T(){C(),s=!0,a!==i&&(a=i,u(a.object))}function C(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:T,resetDefaultState:C,dispose:x,releaseStatesOfGeometry:w,releaseStatesOfProgram:A,initAttributes:m,enableAttribute:v,disableUnusedAttributes:y}}function ryt(n,e,t){let r;function i(u){r=u}function a(u,c){n.drawArrays(r,u,c),t.update(c,r,1)}function s(u,c,d){d!==0&&(n.drawArraysInstanced(r,u,c,d),t.update(c,r,d))}function o(u,c,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,c,0,d);let h=0;for(let p=0;p<d;p++)h+=c[p];t.update(h,r,1)}function l(u,c,d,f){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let p=0;p<u.length;p++)s(u[p],c[p],f[p]);else{h.multiDrawArraysInstancedWEBGL(r,u,0,c,0,f,0,d);let p=0;for(let m=0;m<d;m++)p+=c[m]*f[m];t.update(p,r,1)}}this.setMode=i,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function iyt(n,e,t,r){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(A){return!(A!==qo&&r.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(A){const T=A===fb&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(A!==zd&&r.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&A!==Pc&&!T)}function l(A){if(A==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const d=t.logarithmicDepthBuffer===!0,f=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),x=p>0,w=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:g,maxVertexUniforms:y,maxVaryings:_,maxFragmentUniforms:b,vertexTextures:x,maxSamples:w}}function ayt(n){const e=this;let t=null,r=0,i=!1,a=!1;const s=new op,o=new Rr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=d.length!==0||f||r!==0||i;return i=f,r=d.length,h},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(d,f){t=c(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,m=d.clipIntersection,v=d.clipShadows,g=n.get(d);if(!i||p===null||p.length===0||a&&!v)a?c(null):u();else{const y=a?0:r,_=y*4;let b=g.clippingState||null;l.value=b,b=c(p,f,_,h);for(let x=0;x!==_;++x)b[x]=t[x];g.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(d,f,h,p){const m=d!==null?d.length:0;let v=null;if(m!==0){if(v=l.value,p!==!0||v===null){const g=h+m*4,y=f.matrixWorldInverse;o.getNormalMatrix(y),(v===null||v.length<g)&&(v=new Float32Array(g));for(let _=0,b=h;_!==m;++_,b+=4)s.copy(d[_]).applyMatrix4(y,o),s.normal.toArray(v,b),v[b+3]=s.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function syt(n){let e=new WeakMap;function t(s,o){return o===c8?s.mapping=f_:o===d8&&(s.mapping=h_),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===c8||o===d8)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new c0t(l.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",i),t(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}const jy=4,dQ=[.125,.215,.35,.446,.526,.582],_0=20,sL=new oU,fQ=new Di;let oL=null,lL=0,uL=0,cL=!1;const u0=(1+Math.sqrt(5))/2,fy=1/u0,hQ=[new ft(-u0,fy,0),new ft(u0,fy,0),new ft(-fy,0,u0),new ft(fy,0,u0),new ft(0,u0,-fy),new ft(0,u0,fy),new ft(-1,1,-1),new ft(1,1,-1),new ft(-1,1,1),new ft(1,1,1)];class pQ{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){oL=this._renderer.getRenderTarget(),lL=this._renderer.getActiveCubeFace(),uL=this._renderer.getActiveMipmapLevel(),cL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,r,i,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=gQ(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=vQ(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(oL,lL,uL),this._renderer.xr.enabled=cL,e.scissorTest=!1,UA(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===f_||e.mapping===h_?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),oL=this._renderer.getRenderTarget(),lL=this._renderer.getActiveCubeFace(),uL=this._renderer.getActiveMipmapLevel(),cL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:bd,minFilter:bd,generateMipmaps:!1,type:fb,format:qo,colorSpace:v_,depthBuffer:!1},i=mQ(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mQ(e,t,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=oyt(a)),this._blurMaterial=lyt(a,e,t)}return i}_compileMaterial(e){const t=new Ua(this._lodPlanes[0],e);this._renderer.compile(t,sL)}_sceneToCubeUV(e,t,r,i){const o=new Pu(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,f=c.toneMapping;c.getClearColor(fQ),c.toneMapping=Pp,c.autoClear=!1;const h=new Tv({name:"PMREM.Background",side:wl,depthWrite:!1,depthTest:!1}),p=new Ua(new pb,h);let m=!1;const v=e.background;v?v.isColor&&(h.color.copy(v),e.background=null,m=!0):(h.color.copy(fQ),m=!0);for(let g=0;g<6;g++){const y=g%3;y===0?(o.up.set(0,l[g],0),o.lookAt(u[g],0,0)):y===1?(o.up.set(0,0,l[g]),o.lookAt(0,u[g],0)):(o.up.set(0,l[g],0),o.lookAt(0,0,u[g]));const _=this._cubeSize;UA(i,y*_,g>2?_:0,_,_),c.setRenderTarget(i),m&&c.render(p,o),c.render(e,o)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=f,c.autoClear=d,e.background=v}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===f_||e.mapping===h_;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=gQ()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=vQ());const a=i?this._cubemapMaterial:this._equirectMaterial,s=new Ua(this._lodPlanes[0],a),o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;UA(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,sL)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let a=1;a<i;a++){const s=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),o=hQ[(i-a-1)%hQ.length];this._blur(e,a-1,a,s,o)}t.autoClear=r}_blur(e,t,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,s,o){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new Ua(this._lodPlanes[i],u),f=u.uniforms,h=this._sizeLods[r]-1,p=isFinite(a)?Math.PI/(2*h):2*Math.PI/(2*_0-1),m=a/p,v=isFinite(a)?1+Math.floor(c*m):_0;v>_0&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${_0}`);const g=[];let y=0;for(let A=0;A<_0;++A){const T=A/m,C=Math.exp(-T*T/2);g.push(C),A===0?y+=C:A<v&&(y+=2*C)}for(let A=0;A<g.length;A++)g[A]=g[A]/y;f.envMap.value=e.texture,f.samples.value=v,f.weights.value=g,f.latitudinal.value=s==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:_}=this;f.dTheta.value=p,f.mipInt.value=_-r;const b=this._sizeLods[i],x=3*b*(i>_-jy?i-_+jy:0),w=4*(this._cubeSize-b);UA(t,x,w,3*b,2*b),l.setRenderTarget(t),l.render(d,sL)}}function oyt(n){const e=[],t=[],r=[];let i=n;const a=n-jy+1+dQ.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);t.push(o);let l=1/o;s>n-jy?l=dQ[s-n+jy-1]:s===0&&(l=0),r.push(l);const u=1/(o-2),c=-u,d=1+u,f=[c,c,d,c,d,d,c,c,d,d,c,d],h=6,p=6,m=3,v=2,g=1,y=new Float32Array(m*p*h),_=new Float32Array(v*p*h),b=new Float32Array(g*p*h);for(let w=0;w<h;w++){const A=w%3*2/3-1,T=w>2?0:-1,C=[A,T,0,A+2/3,T,0,A+2/3,T+1,0,A,T,0,A+2/3,T+1,0,A,T+1,0];y.set(C,m*p*w),_.set(f,v*p*w);const E=[w,w,w,w,w,w];b.set(E,g*p*w)}const x=new tc;x.setAttribute("position",new Gu(y,m)),x.setAttribute("uv",new Gu(_,v)),x.setAttribute("faceIndex",new Gu(b,g)),e.push(x),i>jy&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function mQ(n,e,t){const r=new im(n,e,t);return r.texture.mapping=BI,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function UA(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function lyt(n,e,t){const r=new Float32Array(_0),i=new ft(0,1,0);return new ru({name:"SphericalGaussianBlur",defines:{n:_0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:lU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ip,depthTest:!1,depthWrite:!1})}function vQ(){return new ru({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:lU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ip,depthTest:!1,depthWrite:!1})}function gQ(){return new ru({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:lU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ip,depthTest:!1,depthWrite:!1})}function lU(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uyt(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===c8||l===d8,c=l===f_||l===h_;if(u||c){let d=e.get(o);const f=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return t===null&&(t=new pQ(n)),d=u?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const h=o.image;return u&&h&&h.height>0||c&&h&&i(h)?(t===null&&(t=new pQ(n)),d=u?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",a),d.texture):null}}}return o}function i(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function a(o){const l=o.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function cyt(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&My("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function dyt(n,e,t,r){const i={},a=new WeakMap;function s(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",s),delete i[f.id];const h=a.get(f);h&&(e.remove(h),a.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return i[f.id]===!0||(f.addEventListener("dispose",s),i[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const h in f)e.update(f[h],n.ARRAY_BUFFER)}function u(d){const f=[],h=d.index,p=d.attributes.position;let m=0;if(h!==null){const y=h.array;m=h.version;for(let _=0,b=y.length;_<b;_+=3){const x=y[_+0],w=y[_+1],A=y[_+2];f.push(x,w,w,A,A,x)}}else if(p!==void 0){const y=p.array;m=p.version;for(let _=0,b=y.length/3-1;_<b;_+=3){const x=_+0,w=_+1,A=_+2;f.push(x,w,w,A,A,x)}}else return;const v=new(rhe(f)?che:uhe)(f,1);v.version=m;const g=a.get(d);g&&e.remove(g),a.set(d,v)}function c(d){const f=a.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&u(d)}else u(d);return a.get(d)}return{get:o,update:l,getWireframeAttribute:c}}function fyt(n,e,t){let r;function i(f){r=f}let a,s;function o(f){a=f.type,s=f.bytesPerElement}function l(f,h){n.drawElements(r,h,a,f*s),t.update(h,r,1)}function u(f,h,p){p!==0&&(n.drawElementsInstanced(r,h,a,f*s,p),t.update(h,r,p))}function c(f,h,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,h,0,a,f,0,p);let v=0;for(let g=0;g<p;g++)v+=h[g];t.update(v,r,1)}function d(f,h,p,m){if(p===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<f.length;g++)u(f[g]/s,h[g],m[g]);else{v.multiDrawElementsInstancedWEBGL(r,h,0,a,f,0,m,0,p);let g=0;for(let y=0;y<p;y++)g+=h[y]*m[y];t.update(g,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function hyt(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function pyt(n,e,t){const r=new WeakMap,i=new _a;function a(s,o,l){const u=s.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=c!==void 0?c.length:0;let f=r.get(o);if(f===void 0||f.count!==d){let E=function(){T.dispose(),r.delete(o),o.removeEventListener("dispose",E)};var h=E;f!==void 0&&f.texture.dispose();const p=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,g=o.morphAttributes.position||[],y=o.morphAttributes.normal||[],_=o.morphAttributes.color||[];let b=0;p===!0&&(b=1),m===!0&&(b=2),v===!0&&(b=3);let x=o.attributes.position.count*b,w=1;x>e.maxTextureSize&&(w=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const A=new Float32Array(x*w*4*d),T=new ahe(A,x,w,d);T.type=Pc,T.needsUpdate=!0;const C=b*4;for(let I=0;I<d;I++){const P=g[I],L=y[I],N=_[I],F=x*w*4*I;for(let k=0;k<P.count;k++){const H=k*C;p===!0&&(i.fromBufferAttribute(P,k),A[F+H+0]=i.x,A[F+H+1]=i.y,A[F+H+2]=i.z,A[F+H+3]=0),m===!0&&(i.fromBufferAttribute(L,k),A[F+H+4]=i.x,A[F+H+5]=i.y,A[F+H+6]=i.z,A[F+H+7]=0),v===!0&&(i.fromBufferAttribute(N,k),A[F+H+8]=i.x,A[F+H+9]=i.y,A[F+H+10]=i.z,A[F+H+11]=N.itemSize===4?i.w:1)}}f={count:d,texture:T,size:new cr(x,w)},r.set(o,f),o.addEventListener("dispose",E)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let p=0;for(let v=0;v<u.length;v++)p+=u[v];const m=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:a}}function myt(n,e,t,r){let i=new WeakMap;function a(l){const u=r.render.frame,c=l.geometry,d=e.get(l,c);if(i.get(d)!==u&&(e.update(d),i.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==u&&(f.update(),i.set(f,u))}return d}function s(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:s}}const vhe=new Yo,yQ=new aU(1,1),ghe=new ahe,yhe=new Wmt,_he=new hhe,_Q=[],bQ=[],SQ=new Float32Array(16),xQ=new Float32Array(9),wQ=new Float32Array(4);function mb(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=_Q[i];if(a===void 0&&(a=new Float32Array(i),_Q[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function _s(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function bs(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function zI(n,e){let t=bQ[e];t===void 0&&(t=new Int32Array(e),bQ[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function vyt(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function gyt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_s(t,e))return;n.uniform2fv(this.addr,e),bs(t,e)}}function yyt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(_s(t,e))return;n.uniform3fv(this.addr,e),bs(t,e)}}function _yt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_s(t,e))return;n.uniform4fv(this.addr,e),bs(t,e)}}function byt(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(_s(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),bs(t,e)}else{if(_s(t,r))return;wQ.set(r),n.uniformMatrix2fv(this.addr,!1,wQ),bs(t,r)}}function Syt(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(_s(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),bs(t,e)}else{if(_s(t,r))return;xQ.set(r),n.uniformMatrix3fv(this.addr,!1,xQ),bs(t,r)}}function xyt(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(_s(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),bs(t,e)}else{if(_s(t,r))return;SQ.set(r),n.uniformMatrix4fv(this.addr,!1,SQ),bs(t,r)}}function wyt(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Tyt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_s(t,e))return;n.uniform2iv(this.addr,e),bs(t,e)}}function Cyt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(_s(t,e))return;n.uniform3iv(this.addr,e),bs(t,e)}}function Ayt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_s(t,e))return;n.uniform4iv(this.addr,e),bs(t,e)}}function Eyt(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Myt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(_s(t,e))return;n.uniform2uiv(this.addr,e),bs(t,e)}}function Iyt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(_s(t,e))return;n.uniform3uiv(this.addr,e),bs(t,e)}}function Dyt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(_s(t,e))return;n.uniform4uiv(this.addr,e),bs(t,e)}}function Pyt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let a;this.type===n.SAMPLER_2D_SHADOW?(yQ.compareFunction=the,a=yQ):a=vhe,t.setTexture2D(e||a,i)}function Ryt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||yhe,i)}function kyt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||_he,i)}function Lyt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||ghe,i)}function Oyt(n){switch(n){case 5126:return vyt;case 35664:return gyt;case 35665:return yyt;case 35666:return _yt;case 35674:return byt;case 35675:return Syt;case 35676:return xyt;case 5124:case 35670:return wyt;case 35667:case 35671:return Tyt;case 35668:case 35672:return Cyt;case 35669:case 35673:return Ayt;case 5125:return Eyt;case 36294:return Myt;case 36295:return Iyt;case 36296:return Dyt;case 35678:case 36198:case 36298:case 36306:case 35682:return Pyt;case 35679:case 36299:case 36307:return Ryt;case 35680:case 36300:case 36308:case 36293:return kyt;case 36289:case 36303:case 36311:case 36292:return Lyt}}function Nyt(n,e){n.uniform1fv(this.addr,e)}function Byt(n,e){const t=mb(e,this.size,2);n.uniform2fv(this.addr,t)}function Fyt(n,e){const t=mb(e,this.size,3);n.uniform3fv(this.addr,t)}function Uyt(n,e){const t=mb(e,this.size,4);n.uniform4fv(this.addr,t)}function zyt(n,e){const t=mb(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Hyt(n,e){const t=mb(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Vyt(n,e){const t=mb(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function $yt(n,e){n.uniform1iv(this.addr,e)}function Gyt(n,e){n.uniform2iv(this.addr,e)}function Wyt(n,e){n.uniform3iv(this.addr,e)}function qyt(n,e){n.uniform4iv(this.addr,e)}function jyt(n,e){n.uniform1uiv(this.addr,e)}function Kyt(n,e){n.uniform2uiv(this.addr,e)}function Xyt(n,e){n.uniform3uiv(this.addr,e)}function Yyt(n,e){n.uniform4uiv(this.addr,e)}function Qyt(n,e,t){const r=this.cache,i=e.length,a=zI(t,i);_s(r,a)||(n.uniform1iv(this.addr,a),bs(r,a));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||vhe,a[s])}function Zyt(n,e,t){const r=this.cache,i=e.length,a=zI(t,i);_s(r,a)||(n.uniform1iv(this.addr,a),bs(r,a));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||yhe,a[s])}function Jyt(n,e,t){const r=this.cache,i=e.length,a=zI(t,i);_s(r,a)||(n.uniform1iv(this.addr,a),bs(r,a));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||_he,a[s])}function e1t(n,e,t){const r=this.cache,i=e.length,a=zI(t,i);_s(r,a)||(n.uniform1iv(this.addr,a),bs(r,a));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||ghe,a[s])}function t1t(n){switch(n){case 5126:return Nyt;case 35664:return Byt;case 35665:return Fyt;case 35666:return Uyt;case 35674:return zyt;case 35675:return Hyt;case 35676:return Vyt;case 5124:case 35670:return $yt;case 35667:case 35671:return Gyt;case 35668:case 35672:return Wyt;case 35669:case 35673:return qyt;case 5125:return jyt;case 36294:return Kyt;case 36295:return Xyt;case 36296:return Yyt;case 35678:case 36198:case 36298:case 36306:case 35682:return Qyt;case 35679:case 36299:case 36307:return Zyt;case 35680:case 36300:case 36308:case 36293:return Jyt;case 36289:case 36303:case 36311:case 36292:return e1t}}class n1t{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=Oyt(t.type)}}class r1t{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=t1t(t.type)}}class i1t{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,t[o.id],r)}}}const dL=/(\w+)(\])?(\[|\.)?/g;function TQ(n,e){n.seq.push(e),n.map[e.id]=e}function a1t(n,e,t){const r=n.name,i=r.length;for(dL.lastIndex=0;;){const a=dL.exec(r),s=dL.lastIndex;let o=a[1];const l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===i){TQ(t,u===void 0?new n1t(o,n,e):new r1t(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new i1t(o),TQ(t,d)),t=d}}}class YE{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=e.getActiveUniform(t,i),s=e.getUniformLocation(t,a.name);a1t(a,s,this)}}setValue(e,t,r,i){const a=this.map[t];a!==void 0&&a.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let a=0,s=t.length;a!==s;++a){const o=t[a],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function CQ(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const s1t=37297;let o1t=0;function l1t(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return r.join(`
`)}const AQ=new Rr;function u1t(n){Ii._getMatrix(AQ,Ii.workingColorSpace,n);const e=`mat3( ${AQ.elements.map(t=>t.toFixed(4))} )`;switch(Ii.getTransfer(n)){case K3:return[e,"LinearTransferOETF"];case ji:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function EQ(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const s=parseInt(a[1]);return t.toUpperCase()+`

`+i+`

`+l1t(n.getShaderSource(e),s)}else return i}function c1t(n,e){const t=u1t(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function d1t(n,e){let t;switch(e){case emt:t="Linear";break;case tmt:t="Reinhard";break;case nmt:t="Cineon";break;case rmt:t="ACESFilmic";break;case amt:t="AgX";break;case smt:t="Neutral";break;case imt:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const zA=new ft;function f1t(){Ii.getLuminanceCoefficients(zA);const n=zA.x.toFixed(4),e=zA.y.toFixed(4),t=zA.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function h1t(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter($S).join(`
`)}function p1t(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function m1t(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),s=a.name;let o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function $S(n){return n!==""}function MQ(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function IQ(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const v1t=/^[ \t]*#include +<([\w\d./]+)>/gm;function z8(n){return n.replace(v1t,y1t)}const g1t=new Map;function y1t(n,e){let t=Qr[e];if(t===void 0){const r=g1t.get(e);if(r!==void 0)t=Qr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return z8(t)}const _1t=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DQ(n){return n.replace(_1t,b1t)}function b1t(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function PQ(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function S1t(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Vfe?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Lpt?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===vf&&(e="SHADOWMAP_TYPE_VSM"),e}function x1t(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case f_:case h_:e="ENVMAP_TYPE_CUBE";break;case BI:e="ENVMAP_TYPE_CUBE_UV";break}return e}function w1t(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case h_:e="ENVMAP_MODE_REFRACTION";break}return e}function T1t(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Gfe:e="ENVMAP_BLENDING_MULTIPLY";break;case Zpt:e="ENVMAP_BLENDING_MIX";break;case Jpt:e="ENVMAP_BLENDING_ADD";break}return e}function C1t(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function A1t(n,e,t,r){const i=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const l=S1t(t),u=x1t(t),c=w1t(t),d=T1t(t),f=C1t(t),h=h1t(t),p=p1t(a),m=i.createProgram();let v,g,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter($S).join(`
`),v.length>0&&(v+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter($S).join(`
`),g.length>0&&(g+=`
`)):(v=[PQ(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter($S).join(`
`),g=[PQ(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Pp?"#define TONE_MAPPING":"",t.toneMapping!==Pp?Qr.tonemapping_pars_fragment:"",t.toneMapping!==Pp?d1t("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Qr.colorspace_pars_fragment,c1t("linearToOutputTexel",t.outputColorSpace),f1t(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter($S).join(`
`)),s=z8(s),s=MQ(s,t),s=IQ(s,t),o=z8(o),o=MQ(o,t),o=IQ(o,t),s=DQ(s),o=DQ(o),t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,v=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",t.glslVersion===GY?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===GY?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=y+v+s,b=y+g+o,x=CQ(i,i.VERTEX_SHADER,_),w=CQ(i,i.FRAGMENT_SHADER,b);i.attachShader(m,x),i.attachShader(m,w),t.index0AttributeName!==void 0?i.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m);function A(I){if(n.debug.checkShaderErrors){const P=i.getProgramInfoLog(m).trim(),L=i.getShaderInfoLog(x).trim(),N=i.getShaderInfoLog(w).trim();let F=!0,k=!0;if(i.getProgramParameter(m,i.LINK_STATUS)===!1)if(F=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,m,x,w);else{const H=EQ(i,x,"vertex"),U=EQ(i,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+P+`
`+H+`
`+U)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(L===""||N==="")&&(k=!1);k&&(I.diagnostics={runnable:F,programLog:P,vertexShader:{log:L,prefix:v},fragmentShader:{log:N,prefix:g}})}i.deleteShader(x),i.deleteShader(w),T=new YE(i,m),C=m1t(i,m)}let T;this.getUniforms=function(){return T===void 0&&A(this),T};let C;this.getAttributes=function(){return C===void 0&&A(this),C};let E=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=i.getProgramParameter(m,s1t)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=o1t++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let E1t=0;class M1t{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new I1t(e),t.set(e,r)),r}}class I1t{constructor(e){this.id=E1t++,this.code=e,this.usedTimes=0}}function D1t(n,e,t,r,i,a,s){const o=new ohe,l=new M1t,u=new Set,c=[],d=i.logarithmicDepthBuffer,f=i.vertexTextures;let h=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(C){return u.add(C),C===0?"uv":`uv${C}`}function v(C,E,I,P,L){const N=P.fog,F=L.geometry,k=C.isMeshStandardMaterial?P.environment:null,H=(C.isMeshStandardMaterial?t:e).get(C.envMap||k),U=H&&H.mapping===BI?H.image.height:null,B=p[C.type];C.precision!==null&&(h=i.getMaxPrecision(C.precision),h!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",h,"instead."));const $=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,ee=$!==void 0?$.length:0;let re=0;F.morphAttributes.position!==void 0&&(re=1),F.morphAttributes.normal!==void 0&&(re=2),F.morphAttributes.color!==void 0&&(re=3);let ne,ae,pe,de;if(B){const Qn=ld[B];ne=Qn.vertexShader,ae=Qn.fragmentShader}else ne=C.vertexShader,ae=C.fragmentShader,l.update(C),pe=l.getVertexShaderID(C),de=l.getFragmentShaderID(C);const me=n.getRenderTarget(),ke=n.state.buffers.depth.getReversed(),Be=L.isInstancedMesh===!0,Xe=L.isBatchedMesh===!0,Ye=!!C.map,Y=!!C.matcap,he=!!H,le=!!C.aoMap,Ke=!!C.lightMap,Ue=!!C.bumpMap,Ze=!!C.normalMap,je=!!C.displacementMap,He=!!C.emissiveMap,ut=!!C.metalnessMap,ge=!!C.roughnessMap,q=C.anisotropy>0,te=C.clearcoat>0,ye=C.dispersion>0,Ve=C.iridescence>0,et=C.sheen>0,At=C.transmission>0,It=q&&!!C.anisotropyMap,De=te&&!!C.clearcoatMap,Tt=te&&!!C.clearcoatNormalMap,ot=te&&!!C.clearcoatRoughnessMap,G=Ve&&!!C.iridescenceMap,_e=Ve&&!!C.iridescenceThicknessMap,ve=et&&!!C.sheenColorMap,Le=et&&!!C.sheenRoughnessMap,we=!!C.specularMap,Ie=!!C.specularColorMap,wt=!!C.specularIntensityMap,Pe=At&&!!C.transmissionMap,Rt=At&&!!C.thicknessMap,dt=!!C.gradientMap,Mt=!!C.alphaMap,Wt=C.alphaTest>0,zt=!!C.alphaHash,Sn=!!C.extensions;let On=Pp;C.toneMapped&&(me===null||me.isXRRenderTarget===!0)&&(On=n.toneMapping);const Er={shaderID:B,shaderType:C.type,shaderName:C.name,vertexShader:ne,fragmentShader:ae,defines:C.defines,customVertexShaderID:pe,customFragmentShaderID:de,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:h,batching:Xe,batchingColor:Xe&&L._colorsTexture!==null,instancing:Be,instancingColor:Be&&L.instanceColor!==null,instancingMorph:Be&&L.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:me===null?n.outputColorSpace:me.isXRRenderTarget===!0?me.texture.colorSpace:v_,alphaToCoverage:!!C.alphaToCoverage,map:Ye,matcap:Y,envMap:he,envMapMode:he&&H.mapping,envMapCubeUVHeight:U,aoMap:le,lightMap:Ke,bumpMap:Ue,normalMap:Ze,displacementMap:f&&je,emissiveMap:He,normalMapObjectSpace:Ze&&C.normalMapType===dmt,normalMapTangentSpace:Ze&&C.normalMapType===cmt,metalnessMap:ut,roughnessMap:ge,anisotropy:q,anisotropyMap:It,clearcoat:te,clearcoatMap:De,clearcoatNormalMap:Tt,clearcoatRoughnessMap:ot,dispersion:ye,iridescence:Ve,iridescenceMap:G,iridescenceThicknessMap:_e,sheen:et,sheenColorMap:ve,sheenRoughnessMap:Le,specularMap:we,specularColorMap:Ie,specularIntensityMap:wt,transmission:At,transmissionMap:Pe,thicknessMap:Rt,gradientMap:dt,opaque:C.transparent===!1&&C.blending===Dp&&C.alphaToCoverage===!1,alphaMap:Mt,alphaTest:Wt,alphaHash:zt,combine:C.combine,mapUv:Ye&&m(C.map.channel),aoMapUv:le&&m(C.aoMap.channel),lightMapUv:Ke&&m(C.lightMap.channel),bumpMapUv:Ue&&m(C.bumpMap.channel),normalMapUv:Ze&&m(C.normalMap.channel),displacementMapUv:je&&m(C.displacementMap.channel),emissiveMapUv:He&&m(C.emissiveMap.channel),metalnessMapUv:ut&&m(C.metalnessMap.channel),roughnessMapUv:ge&&m(C.roughnessMap.channel),anisotropyMapUv:It&&m(C.anisotropyMap.channel),clearcoatMapUv:De&&m(C.clearcoatMap.channel),clearcoatNormalMapUv:Tt&&m(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ot&&m(C.clearcoatRoughnessMap.channel),iridescenceMapUv:G&&m(C.iridescenceMap.channel),iridescenceThicknessMapUv:_e&&m(C.iridescenceThicknessMap.channel),sheenColorMapUv:ve&&m(C.sheenColorMap.channel),sheenRoughnessMapUv:Le&&m(C.sheenRoughnessMap.channel),specularMapUv:we&&m(C.specularMap.channel),specularColorMapUv:Ie&&m(C.specularColorMap.channel),specularIntensityMapUv:wt&&m(C.specularIntensityMap.channel),transmissionMapUv:Pe&&m(C.transmissionMap.channel),thicknessMapUv:Rt&&m(C.thicknessMap.channel),alphaMapUv:Mt&&m(C.alphaMap.channel),vertexTangents:!!F.attributes.tangent&&(Ze||q),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,pointsUvs:L.isPoints===!0&&!!F.attributes.uv&&(Ye||Mt),fog:!!N,useFog:C.fog===!0,fogExp2:!!N&&N.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:ke,skinning:L.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:re,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:On,decodeVideoTexture:Ye&&C.map.isVideoTexture===!0&&Ii.getTransfer(C.map.colorSpace)===ji,decodeVideoTextureEmissive:He&&C.emissiveMap.isVideoTexture===!0&&Ii.getTransfer(C.emissiveMap.colorSpace)===ji,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Ru,flipSided:C.side===wl,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:Sn&&C.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Sn&&C.extensions.multiDraw===!0||Xe)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return Er.vertexUv1s=u.has(1),Er.vertexUv2s=u.has(2),Er.vertexUv3s=u.has(3),u.clear(),Er}function g(C){const E=[];if(C.shaderID?E.push(C.shaderID):(E.push(C.customVertexShaderID),E.push(C.customFragmentShaderID)),C.defines!==void 0)for(const I in C.defines)E.push(I),E.push(C.defines[I]);return C.isRawShaderMaterial===!1&&(y(E,C),_(E,C),E.push(n.outputColorSpace)),E.push(C.customProgramCacheKey),E.join()}function y(C,E){C.push(E.precision),C.push(E.outputColorSpace),C.push(E.envMapMode),C.push(E.envMapCubeUVHeight),C.push(E.mapUv),C.push(E.alphaMapUv),C.push(E.lightMapUv),C.push(E.aoMapUv),C.push(E.bumpMapUv),C.push(E.normalMapUv),C.push(E.displacementMapUv),C.push(E.emissiveMapUv),C.push(E.metalnessMapUv),C.push(E.roughnessMapUv),C.push(E.anisotropyMapUv),C.push(E.clearcoatMapUv),C.push(E.clearcoatNormalMapUv),C.push(E.clearcoatRoughnessMapUv),C.push(E.iridescenceMapUv),C.push(E.iridescenceThicknessMapUv),C.push(E.sheenColorMapUv),C.push(E.sheenRoughnessMapUv),C.push(E.specularMapUv),C.push(E.specularColorMapUv),C.push(E.specularIntensityMapUv),C.push(E.transmissionMapUv),C.push(E.thicknessMapUv),C.push(E.combine),C.push(E.fogExp2),C.push(E.sizeAttenuation),C.push(E.morphTargetsCount),C.push(E.morphAttributeCount),C.push(E.numDirLights),C.push(E.numPointLights),C.push(E.numSpotLights),C.push(E.numSpotLightMaps),C.push(E.numHemiLights),C.push(E.numRectAreaLights),C.push(E.numDirLightShadows),C.push(E.numPointLightShadows),C.push(E.numSpotLightShadows),C.push(E.numSpotLightShadowsWithMaps),C.push(E.numLightProbes),C.push(E.shadowMapType),C.push(E.toneMapping),C.push(E.numClippingPlanes),C.push(E.numClipIntersection),C.push(E.depthPacking)}function _(C,E){o.disableAll(),E.supportsVertexTextures&&o.enable(0),E.instancing&&o.enable(1),E.instancingColor&&o.enable(2),E.instancingMorph&&o.enable(3),E.matcap&&o.enable(4),E.envMap&&o.enable(5),E.normalMapObjectSpace&&o.enable(6),E.normalMapTangentSpace&&o.enable(7),E.clearcoat&&o.enable(8),E.iridescence&&o.enable(9),E.alphaTest&&o.enable(10),E.vertexColors&&o.enable(11),E.vertexAlphas&&o.enable(12),E.vertexUv1s&&o.enable(13),E.vertexUv2s&&o.enable(14),E.vertexUv3s&&o.enable(15),E.vertexTangents&&o.enable(16),E.anisotropy&&o.enable(17),E.alphaHash&&o.enable(18),E.batching&&o.enable(19),E.dispersion&&o.enable(20),E.batchingColor&&o.enable(21),C.push(o.mask),o.disableAll(),E.fog&&o.enable(0),E.useFog&&o.enable(1),E.flatShading&&o.enable(2),E.logarithmicDepthBuffer&&o.enable(3),E.reverseDepthBuffer&&o.enable(4),E.skinning&&o.enable(5),E.morphTargets&&o.enable(6),E.morphNormals&&o.enable(7),E.morphColors&&o.enable(8),E.premultipliedAlpha&&o.enable(9),E.shadowMapEnabled&&o.enable(10),E.doubleSided&&o.enable(11),E.flipSided&&o.enable(12),E.useDepthPacking&&o.enable(13),E.dithering&&o.enable(14),E.transmission&&o.enable(15),E.sheen&&o.enable(16),E.opaque&&o.enable(17),E.pointsUvs&&o.enable(18),E.decodeVideoTexture&&o.enable(19),E.decodeVideoTextureEmissive&&o.enable(20),E.alphaToCoverage&&o.enable(21),C.push(o.mask)}function b(C){const E=p[C.type];let I;if(E){const P=ld[E];I=s0t.clone(P.uniforms)}else I=C.uniforms;return I}function x(C,E){let I;for(let P=0,L=c.length;P<L;P++){const N=c[P];if(N.cacheKey===E){I=N,++I.usedTimes;break}}return I===void 0&&(I=new A1t(n,E,C,a),c.push(I)),I}function w(C){if(--C.usedTimes===0){const E=c.indexOf(C);c[E]=c[c.length-1],c.pop(),C.destroy()}}function A(C){l.remove(C)}function T(){l.dispose()}return{getParameters:v,getProgramCacheKey:g,getUniforms:b,acquireProgram:x,releaseProgram:w,releaseShaderCache:A,programs:c,dispose:T}}function P1t(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function r(s){n.delete(s)}function i(s,o,l){n.get(s)[o]=l}function a(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:a}}function R1t(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function RQ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function kQ(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function s(d,f,h,p,m,v){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:m,group:v},n[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=h,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=m,g.group=v),e++,g}function o(d,f,h,p,m,v){const g=s(d,f,h,p,m,v);h.transmission>0?r.push(g):h.transparent===!0?i.push(g):t.push(g)}function l(d,f,h,p,m,v){const g=s(d,f,h,p,m,v);h.transmission>0?r.unshift(g):h.transparent===!0?i.unshift(g):t.unshift(g)}function u(d,f){t.length>1&&t.sort(d||R1t),r.length>1&&r.sort(f||RQ),i.length>1&&i.sort(f||RQ)}function c(){for(let d=e,f=n.length;d<f;d++){const h=n[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:o,unshift:l,finish:c,sort:u}}function k1t(){let n=new WeakMap;function e(r,i){const a=n.get(r);let s;return a===void 0?(s=new kQ,n.set(r,[s])):i>=a.length?(s=new kQ,a.push(s)):s=a[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function L1t(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ft,color:new Di};break;case"SpotLight":t={position:new ft,direction:new ft,color:new Di,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ft,color:new Di,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ft,skyColor:new Di,groundColor:new Di};break;case"RectAreaLight":t={color:new Di,position:new ft,halfWidth:new ft,halfHeight:new ft};break}return n[e.id]=t,t}}}function O1t(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cr};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cr};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cr,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let N1t=0;function B1t(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function F1t(n){const e=new L1t,t=O1t(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new ft);const i=new ft,a=new kr,s=new kr;function o(u){let c=0,d=0,f=0;for(let C=0;C<9;C++)r.probe[C].set(0,0,0);let h=0,p=0,m=0,v=0,g=0,y=0,_=0,b=0,x=0,w=0,A=0;u.sort(B1t);for(let C=0,E=u.length;C<E;C++){const I=u[C],P=I.color,L=I.intensity,N=I.distance,F=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)c+=P.r*L,d+=P.g*L,f+=P.b*L;else if(I.isLightProbe){for(let k=0;k<9;k++)r.probe[k].addScaledVector(I.sh.coefficients[k],L);A++}else if(I.isDirectionalLight){const k=e.get(I);if(k.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){const H=I.shadow,U=t.get(I);U.shadowIntensity=H.intensity,U.shadowBias=H.bias,U.shadowNormalBias=H.normalBias,U.shadowRadius=H.radius,U.shadowMapSize=H.mapSize,r.directionalShadow[h]=U,r.directionalShadowMap[h]=F,r.directionalShadowMatrix[h]=I.shadow.matrix,y++}r.directional[h]=k,h++}else if(I.isSpotLight){const k=e.get(I);k.position.setFromMatrixPosition(I.matrixWorld),k.color.copy(P).multiplyScalar(L),k.distance=N,k.coneCos=Math.cos(I.angle),k.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),k.decay=I.decay,r.spot[m]=k;const H=I.shadow;if(I.map&&(r.spotLightMap[x]=I.map,x++,H.updateMatrices(I),I.castShadow&&w++),r.spotLightMatrix[m]=H.matrix,I.castShadow){const U=t.get(I);U.shadowIntensity=H.intensity,U.shadowBias=H.bias,U.shadowNormalBias=H.normalBias,U.shadowRadius=H.radius,U.shadowMapSize=H.mapSize,r.spotShadow[m]=U,r.spotShadowMap[m]=F,b++}m++}else if(I.isRectAreaLight){const k=e.get(I);k.color.copy(P).multiplyScalar(L),k.halfWidth.set(I.width*.5,0,0),k.halfHeight.set(0,I.height*.5,0),r.rectArea[v]=k,v++}else if(I.isPointLight){const k=e.get(I);if(k.color.copy(I.color).multiplyScalar(I.intensity),k.distance=I.distance,k.decay=I.decay,I.castShadow){const H=I.shadow,U=t.get(I);U.shadowIntensity=H.intensity,U.shadowBias=H.bias,U.shadowNormalBias=H.normalBias,U.shadowRadius=H.radius,U.shadowMapSize=H.mapSize,U.shadowCameraNear=H.camera.near,U.shadowCameraFar=H.camera.far,r.pointShadow[p]=U,r.pointShadowMap[p]=F,r.pointShadowMatrix[p]=I.shadow.matrix,_++}r.point[p]=k,p++}else if(I.isHemisphereLight){const k=e.get(I);k.skyColor.copy(I.color).multiplyScalar(L),k.groundColor.copy(I.groundColor).multiplyScalar(L),r.hemi[g]=k,g++}}v>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Vn.LTC_FLOAT_1,r.rectAreaLTC2=Vn.LTC_FLOAT_2):(r.rectAreaLTC1=Vn.LTC_HALF_1,r.rectAreaLTC2=Vn.LTC_HALF_2)),r.ambient[0]=c,r.ambient[1]=d,r.ambient[2]=f;const T=r.hash;(T.directionalLength!==h||T.pointLength!==p||T.spotLength!==m||T.rectAreaLength!==v||T.hemiLength!==g||T.numDirectionalShadows!==y||T.numPointShadows!==_||T.numSpotShadows!==b||T.numSpotMaps!==x||T.numLightProbes!==A)&&(r.directional.length=h,r.spot.length=m,r.rectArea.length=v,r.point.length=p,r.hemi.length=g,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=_,r.pointShadowMap.length=_,r.spotShadow.length=b,r.spotShadowMap.length=b,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=_,r.spotLightMatrix.length=b+x-w,r.spotLightMap.length=x,r.numSpotLightShadowsWithMaps=w,r.numLightProbes=A,T.directionalLength=h,T.pointLength=p,T.spotLength=m,T.rectAreaLength=v,T.hemiLength=g,T.numDirectionalShadows=y,T.numPointShadows=_,T.numSpotShadows=b,T.numSpotMaps=x,T.numLightProbes=A,r.version=N1t++)}function l(u,c){let d=0,f=0,h=0,p=0,m=0;const v=c.matrixWorldInverse;for(let g=0,y=u.length;g<y;g++){const _=u[g];if(_.isDirectionalLight){const b=r.directional[d];b.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(v),d++}else if(_.isSpotLight){const b=r.spot[h];b.position.setFromMatrixPosition(_.matrixWorld),b.position.applyMatrix4(v),b.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(v),h++}else if(_.isRectAreaLight){const b=r.rectArea[p];b.position.setFromMatrixPosition(_.matrixWorld),b.position.applyMatrix4(v),s.identity(),a.copy(_.matrixWorld),a.premultiply(v),s.extractRotation(a),b.halfWidth.set(_.width*.5,0,0),b.halfHeight.set(0,_.height*.5,0),b.halfWidth.applyMatrix4(s),b.halfHeight.applyMatrix4(s),p++}else if(_.isPointLight){const b=r.point[f];b.position.setFromMatrixPosition(_.matrixWorld),b.position.applyMatrix4(v),f++}else if(_.isHemisphereLight){const b=r.hemi[m];b.direction.setFromMatrixPosition(_.matrixWorld),b.direction.transformDirection(v),m++}}}return{setup:o,setupView:l,state:r}}function LQ(n){const e=new F1t(n),t=[],r=[];function i(c){u.camera=c,t.length=0,r.length=0}function a(c){t.push(c)}function s(c){r.push(c)}function o(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:l,pushLight:a,pushShadow:s}}function U1t(n){let e=new WeakMap;function t(i,a=0){const s=e.get(i);let o;return s===void 0?(o=new LQ(n),e.set(i,[o])):a>=s.length?(o=new LQ(n),s.push(o)):o=s[a],o}function r(){e=new WeakMap}return{get:t,dispose:r}}const z1t=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,H1t=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function V1t(n,e,t){let r=new phe;const i=new cr,a=new cr,s=new _a,o=new m0t({depthPacking:umt}),l=new v0t,u={},c=t.maxTextureSize,d={[Ud]:wl,[wl]:Ud,[Ru]:Ru},f=new ru({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new cr},radius:{value:4}},vertexShader:z1t,fragmentShader:H1t}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new tc;p.setAttribute("position",new Gu(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ua(p,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Vfe;let g=this.type;this.render=function(w,A,T){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||w.length===0)return;const C=n.getRenderTarget(),E=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),P=n.state;P.setBlending(Ip),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const L=g!==vf&&this.type===vf,N=g===vf&&this.type!==vf;for(let F=0,k=w.length;F<k;F++){const H=w[F],U=H.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",H,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;i.copy(U.mapSize);const B=U.getFrameExtents();if(i.multiply(B),a.copy(U.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/B.x),i.x=a.x*B.x,U.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/B.y),i.y=a.y*B.y,U.mapSize.y=a.y)),U.map===null||L===!0||N===!0){const ee=this.type!==vf?{minFilter:tu,magFilter:tu}:{};U.map!==null&&U.map.dispose(),U.map=new im(i.x,i.y,ee),U.map.texture.name=H.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();const $=U.getViewportCount();for(let ee=0;ee<$;ee++){const re=U.getViewport(ee);s.set(a.x*re.x,a.y*re.y,a.x*re.z,a.y*re.w),P.viewport(s),U.updateMatrices(H,ee),r=U.getFrustum(),b(A,T,U.camera,H,this.type)}U.isPointLightShadow!==!0&&this.type===vf&&y(U,T),U.needsUpdate=!1}g=this.type,v.needsUpdate=!1,n.setRenderTarget(C,E,I)};function y(w,A){const T=e.update(m);f.defines.VSM_SAMPLES!==w.blurSamples&&(f.defines.VSM_SAMPLES=w.blurSamples,h.defines.VSM_SAMPLES=w.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new im(i.x,i.y)),f.uniforms.shadow_pass.value=w.map.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(A,null,T,f,m,null),h.uniforms.shadow_pass.value=w.mapPass.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(A,null,T,h,m,null)}function _(w,A,T,C){let E=null;const I=T.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(I!==void 0)E=I;else if(E=T.isPointLight===!0?l:o,n.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const P=E.uuid,L=A.uuid;let N=u[P];N===void 0&&(N={},u[P]=N);let F=N[L];F===void 0&&(F=E.clone(),N[L]=F,A.addEventListener("dispose",x)),E=F}if(E.visible=A.visible,E.wireframe=A.wireframe,C===vf?E.side=A.shadowSide!==null?A.shadowSide:A.side:E.side=A.shadowSide!==null?A.shadowSide:d[A.side],E.alphaMap=A.alphaMap,E.alphaTest=A.alphaTest,E.map=A.map,E.clipShadows=A.clipShadows,E.clippingPlanes=A.clippingPlanes,E.clipIntersection=A.clipIntersection,E.displacementMap=A.displacementMap,E.displacementScale=A.displacementScale,E.displacementBias=A.displacementBias,E.wireframeLinewidth=A.wireframeLinewidth,E.linewidth=A.linewidth,T.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const P=n.properties.get(E);P.light=T}return E}function b(w,A,T,C,E){if(w.visible===!1)return;if(w.layers.test(A.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&E===vf)&&(!w.frustumCulled||r.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,w.matrixWorld);const L=e.update(w),N=w.material;if(Array.isArray(N)){const F=L.groups;for(let k=0,H=F.length;k<H;k++){const U=F[k],B=N[U.materialIndex];if(B&&B.visible){const $=_(w,B,C,E);w.onBeforeShadow(n,w,A,T,L,$,U),n.renderBufferDirect(T,null,L,$,w,U),w.onAfterShadow(n,w,A,T,L,$,U)}}}else if(N.visible){const F=_(w,N,C,E);w.onBeforeShadow(n,w,A,T,L,F,null),n.renderBufferDirect(T,null,L,F,w,null),w.onAfterShadow(n,w,A,T,L,F,null)}}const P=w.children;for(let L=0,N=P.length;L<N;L++)b(P[L],A,T,C,E)}function x(w){w.target.removeEventListener("dispose",x);for(const T in u){const C=u[T],E=w.target.uuid;E in C&&(C[E].dispose(),delete C[E])}}}const $1t={[r8]:i8,[a8]:l8,[s8]:u8,[d_]:o8,[i8]:r8,[l8]:a8,[u8]:s8,[o8]:d_};function G1t(n,e){function t(){let Pe=!1;const Rt=new _a;let dt=null;const Mt=new _a(0,0,0,0);return{setMask:function(Wt){dt!==Wt&&!Pe&&(n.colorMask(Wt,Wt,Wt,Wt),dt=Wt)},setLocked:function(Wt){Pe=Wt},setClear:function(Wt,zt,Sn,On,Er){Er===!0&&(Wt*=On,zt*=On,Sn*=On),Rt.set(Wt,zt,Sn,On),Mt.equals(Rt)===!1&&(n.clearColor(Wt,zt,Sn,On),Mt.copy(Rt))},reset:function(){Pe=!1,dt=null,Mt.set(-1,0,0,0)}}}function r(){let Pe=!1,Rt=!1,dt=null,Mt=null,Wt=null;return{setReversed:function(zt){if(Rt!==zt){const Sn=e.get("EXT_clip_control");Rt?Sn.clipControlEXT(Sn.LOWER_LEFT_EXT,Sn.ZERO_TO_ONE_EXT):Sn.clipControlEXT(Sn.LOWER_LEFT_EXT,Sn.NEGATIVE_ONE_TO_ONE_EXT);const On=Wt;Wt=null,this.setClear(On)}Rt=zt},getReversed:function(){return Rt},setTest:function(zt){zt?me(n.DEPTH_TEST):ke(n.DEPTH_TEST)},setMask:function(zt){dt!==zt&&!Pe&&(n.depthMask(zt),dt=zt)},setFunc:function(zt){if(Rt&&(zt=$1t[zt]),Mt!==zt){switch(zt){case r8:n.depthFunc(n.NEVER);break;case i8:n.depthFunc(n.ALWAYS);break;case a8:n.depthFunc(n.LESS);break;case d_:n.depthFunc(n.LEQUAL);break;case s8:n.depthFunc(n.EQUAL);break;case o8:n.depthFunc(n.GEQUAL);break;case l8:n.depthFunc(n.GREATER);break;case u8:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Mt=zt}},setLocked:function(zt){Pe=zt},setClear:function(zt){Wt!==zt&&(Rt&&(zt=1-zt),n.clearDepth(zt),Wt=zt)},reset:function(){Pe=!1,dt=null,Mt=null,Wt=null,Rt=!1}}}function i(){let Pe=!1,Rt=null,dt=null,Mt=null,Wt=null,zt=null,Sn=null,On=null,Er=null;return{setTest:function(Qn){Pe||(Qn?me(n.STENCIL_TEST):ke(n.STENCIL_TEST))},setMask:function(Qn){Rt!==Qn&&!Pe&&(n.stencilMask(Qn),Rt=Qn)},setFunc:function(Qn,Xr,Yn){(dt!==Qn||Mt!==Xr||Wt!==Yn)&&(n.stencilFunc(Qn,Xr,Yn),dt=Qn,Mt=Xr,Wt=Yn)},setOp:function(Qn,Xr,Yn){(zt!==Qn||Sn!==Xr||On!==Yn)&&(n.stencilOp(Qn,Xr,Yn),zt=Qn,Sn=Xr,On=Yn)},setLocked:function(Qn){Pe=Qn},setClear:function(Qn){Er!==Qn&&(n.clearStencil(Qn),Er=Qn)},reset:function(){Pe=!1,Rt=null,dt=null,Mt=null,Wt=null,zt=null,Sn=null,On=null,Er=null}}}const a=new t,s=new r,o=new i,l=new WeakMap,u=new WeakMap;let c={},d={},f=new WeakMap,h=[],p=null,m=!1,v=null,g=null,y=null,_=null,b=null,x=null,w=null,A=new Di(0,0,0),T=0,C=!1,E=null,I=null,P=null,L=null,N=null;const F=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,H=0;const U=n.getParameter(n.VERSION);U.indexOf("WebGL")!==-1?(H=parseFloat(/^WebGL (\d)/.exec(U)[1]),k=H>=1):U.indexOf("OpenGL ES")!==-1&&(H=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),k=H>=2);let B=null,$={};const ee=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),ne=new _a().fromArray(ee),ae=new _a().fromArray(re);function pe(Pe,Rt,dt,Mt){const Wt=new Uint8Array(4),zt=n.createTexture();n.bindTexture(Pe,zt),n.texParameteri(Pe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Pe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Sn=0;Sn<dt;Sn++)Pe===n.TEXTURE_3D||Pe===n.TEXTURE_2D_ARRAY?n.texImage3D(Rt,0,n.RGBA,1,1,Mt,0,n.RGBA,n.UNSIGNED_BYTE,Wt):n.texImage2D(Rt+Sn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Wt);return zt}const de={};de[n.TEXTURE_2D]=pe(n.TEXTURE_2D,n.TEXTURE_2D,1),de[n.TEXTURE_CUBE_MAP]=pe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),de[n.TEXTURE_2D_ARRAY]=pe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),de[n.TEXTURE_3D]=pe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),me(n.DEPTH_TEST),s.setFunc(d_),Ue(!1),Ze(FY),me(n.CULL_FACE),le(Ip);function me(Pe){c[Pe]!==!0&&(n.enable(Pe),c[Pe]=!0)}function ke(Pe){c[Pe]!==!1&&(n.disable(Pe),c[Pe]=!1)}function Be(Pe,Rt){return d[Pe]!==Rt?(n.bindFramebuffer(Pe,Rt),d[Pe]=Rt,Pe===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Rt),Pe===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Rt),!0):!1}function Xe(Pe,Rt){let dt=h,Mt=!1;if(Pe){dt=f.get(Rt),dt===void 0&&(dt=[],f.set(Rt,dt));const Wt=Pe.textures;if(dt.length!==Wt.length||dt[0]!==n.COLOR_ATTACHMENT0){for(let zt=0,Sn=Wt.length;zt<Sn;zt++)dt[zt]=n.COLOR_ATTACHMENT0+zt;dt.length=Wt.length,Mt=!0}}else dt[0]!==n.BACK&&(dt[0]=n.BACK,Mt=!0);Mt&&n.drawBuffers(dt)}function Ye(Pe){return p!==Pe?(n.useProgram(Pe),p=Pe,!0):!1}const Y={[y0]:n.FUNC_ADD,[Opt]:n.FUNC_SUBTRACT,[Npt]:n.FUNC_REVERSE_SUBTRACT};Y[Bpt]=n.MIN,Y[Fpt]=n.MAX;const he={[Upt]:n.ZERO,[zpt]:n.ONE,[Hpt]:n.SRC_COLOR,[rw]:n.SRC_ALPHA,[jpt]:n.SRC_ALPHA_SATURATE,[Wpt]:n.DST_COLOR,[$pt]:n.DST_ALPHA,[Vpt]:n.ONE_MINUS_SRC_COLOR,[iw]:n.ONE_MINUS_SRC_ALPHA,[qpt]:n.ONE_MINUS_DST_COLOR,[Gpt]:n.ONE_MINUS_DST_ALPHA,[Kpt]:n.CONSTANT_COLOR,[Xpt]:n.ONE_MINUS_CONSTANT_COLOR,[Ypt]:n.CONSTANT_ALPHA,[Qpt]:n.ONE_MINUS_CONSTANT_ALPHA};function le(Pe,Rt,dt,Mt,Wt,zt,Sn,On,Er,Qn){if(Pe===Ip){m===!0&&(ke(n.BLEND),m=!1);return}if(m===!1&&(me(n.BLEND),m=!0),Pe!==$fe){if(Pe!==v||Qn!==C){if((g!==y0||b!==y0)&&(n.blendEquation(n.FUNC_ADD),g=y0,b=y0),Qn)switch(Pe){case Dp:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case UY:n.blendFunc(n.ONE,n.ONE);break;case zY:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case HY:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe);break}else switch(Pe){case Dp:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case UY:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case zY:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case HY:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe);break}y=null,_=null,x=null,w=null,A.set(0,0,0),T=0,v=Pe,C=Qn}return}Wt=Wt||Rt,zt=zt||dt,Sn=Sn||Mt,(Rt!==g||Wt!==b)&&(n.blendEquationSeparate(Y[Rt],Y[Wt]),g=Rt,b=Wt),(dt!==y||Mt!==_||zt!==x||Sn!==w)&&(n.blendFuncSeparate(he[dt],he[Mt],he[zt],he[Sn]),y=dt,_=Mt,x=zt,w=Sn),(On.equals(A)===!1||Er!==T)&&(n.blendColor(On.r,On.g,On.b,Er),A.copy(On),T=Er),v=Pe,C=!1}function Ke(Pe,Rt){Pe.side===Ru?ke(n.CULL_FACE):me(n.CULL_FACE);let dt=Pe.side===wl;Rt&&(dt=!dt),Ue(dt),Pe.blending===Dp&&Pe.transparent===!1?le(Ip):le(Pe.blending,Pe.blendEquation,Pe.blendSrc,Pe.blendDst,Pe.blendEquationAlpha,Pe.blendSrcAlpha,Pe.blendDstAlpha,Pe.blendColor,Pe.blendAlpha,Pe.premultipliedAlpha),s.setFunc(Pe.depthFunc),s.setTest(Pe.depthTest),s.setMask(Pe.depthWrite),a.setMask(Pe.colorWrite);const Mt=Pe.stencilWrite;o.setTest(Mt),Mt&&(o.setMask(Pe.stencilWriteMask),o.setFunc(Pe.stencilFunc,Pe.stencilRef,Pe.stencilFuncMask),o.setOp(Pe.stencilFail,Pe.stencilZFail,Pe.stencilZPass)),He(Pe.polygonOffset,Pe.polygonOffsetFactor,Pe.polygonOffsetUnits),Pe.alphaToCoverage===!0?me(n.SAMPLE_ALPHA_TO_COVERAGE):ke(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ue(Pe){E!==Pe&&(Pe?n.frontFace(n.CW):n.frontFace(n.CCW),E=Pe)}function Ze(Pe){Pe!==Rpt?(me(n.CULL_FACE),Pe!==I&&(Pe===FY?n.cullFace(n.BACK):Pe===kpt?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ke(n.CULL_FACE),I=Pe}function je(Pe){Pe!==P&&(k&&n.lineWidth(Pe),P=Pe)}function He(Pe,Rt,dt){Pe?(me(n.POLYGON_OFFSET_FILL),(L!==Rt||N!==dt)&&(n.polygonOffset(Rt,dt),L=Rt,N=dt)):ke(n.POLYGON_OFFSET_FILL)}function ut(Pe){Pe?me(n.SCISSOR_TEST):ke(n.SCISSOR_TEST)}function ge(Pe){Pe===void 0&&(Pe=n.TEXTURE0+F-1),B!==Pe&&(n.activeTexture(Pe),B=Pe)}function q(Pe,Rt,dt){dt===void 0&&(B===null?dt=n.TEXTURE0+F-1:dt=B);let Mt=$[dt];Mt===void 0&&(Mt={type:void 0,texture:void 0},$[dt]=Mt),(Mt.type!==Pe||Mt.texture!==Rt)&&(B!==dt&&(n.activeTexture(dt),B=dt),n.bindTexture(Pe,Rt||de[Pe]),Mt.type=Pe,Mt.texture=Rt)}function te(){const Pe=$[B];Pe!==void 0&&Pe.type!==void 0&&(n.bindTexture(Pe.type,null),Pe.type=void 0,Pe.texture=void 0)}function ye(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function Ve(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function et(){try{n.texSubImage2D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function At(){try{n.texSubImage3D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function It(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function De(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function Tt(){try{n.texStorage2D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function ot(){try{n.texStorage3D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function G(){try{n.texImage2D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function _e(){try{n.texImage3D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function ve(Pe){ne.equals(Pe)===!1&&(n.scissor(Pe.x,Pe.y,Pe.z,Pe.w),ne.copy(Pe))}function Le(Pe){ae.equals(Pe)===!1&&(n.viewport(Pe.x,Pe.y,Pe.z,Pe.w),ae.copy(Pe))}function we(Pe,Rt){let dt=u.get(Rt);dt===void 0&&(dt=new WeakMap,u.set(Rt,dt));let Mt=dt.get(Pe);Mt===void 0&&(Mt=n.getUniformBlockIndex(Rt,Pe.name),dt.set(Pe,Mt))}function Ie(Pe,Rt){const Mt=u.get(Rt).get(Pe);l.get(Rt)!==Mt&&(n.uniformBlockBinding(Rt,Mt,Pe.__bindingPointIndex),l.set(Rt,Mt))}function wt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},B=null,$={},d={},f=new WeakMap,h=[],p=null,m=!1,v=null,g=null,y=null,_=null,b=null,x=null,w=null,A=new Di(0,0,0),T=0,C=!1,E=null,I=null,P=null,L=null,N=null,ne.set(0,0,n.canvas.width,n.canvas.height),ae.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:me,disable:ke,bindFramebuffer:Be,drawBuffers:Xe,useProgram:Ye,setBlending:le,setMaterial:Ke,setFlipSided:Ue,setCullFace:Ze,setLineWidth:je,setPolygonOffset:He,setScissorTest:ut,activeTexture:ge,bindTexture:q,unbindTexture:te,compressedTexImage2D:ye,compressedTexImage3D:Ve,texImage2D:G,texImage3D:_e,updateUBOMapping:we,uniformBlockBinding:Ie,texStorage2D:Tt,texStorage3D:ot,texSubImage2D:et,texSubImage3D:At,compressedTexSubImage2D:It,compressedTexSubImage3D:De,scissor:ve,viewport:Le,reset:wt}}function W1t(n,e,t,r,i,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new cr,c=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(ge,q){return h?new OffscreenCanvas(ge,q):Y3("canvas")}function m(ge,q,te){let ye=1;const Ve=ut(ge);if((Ve.width>te||Ve.height>te)&&(ye=te/Math.max(Ve.width,Ve.height)),ye<1)if(typeof HTMLImageElement<"u"&&ge instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ge instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ge instanceof ImageBitmap||typeof VideoFrame<"u"&&ge instanceof VideoFrame){const et=Math.floor(ye*Ve.width),At=Math.floor(ye*Ve.height);d===void 0&&(d=p(et,At));const It=q?p(et,At):d;return It.width=et,It.height=At,It.getContext("2d").drawImage(ge,0,0,et,At),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ve.width+"x"+Ve.height+") to ("+et+"x"+At+")."),It}else return"data"in ge&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ve.width+"x"+Ve.height+")."),ge;return ge}function v(ge){return ge.generateMipmaps}function g(ge){n.generateMipmap(ge)}function y(ge){return ge.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ge.isWebGL3DRenderTarget?n.TEXTURE_3D:ge.isWebGLArrayRenderTarget||ge.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function _(ge,q,te,ye,Ve=!1){if(ge!==null){if(n[ge]!==void 0)return n[ge];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ge+"'")}let et=q;if(q===n.RED&&(te===n.FLOAT&&(et=n.R32F),te===n.HALF_FLOAT&&(et=n.R16F),te===n.UNSIGNED_BYTE&&(et=n.R8)),q===n.RED_INTEGER&&(te===n.UNSIGNED_BYTE&&(et=n.R8UI),te===n.UNSIGNED_SHORT&&(et=n.R16UI),te===n.UNSIGNED_INT&&(et=n.R32UI),te===n.BYTE&&(et=n.R8I),te===n.SHORT&&(et=n.R16I),te===n.INT&&(et=n.R32I)),q===n.RG&&(te===n.FLOAT&&(et=n.RG32F),te===n.HALF_FLOAT&&(et=n.RG16F),te===n.UNSIGNED_BYTE&&(et=n.RG8)),q===n.RG_INTEGER&&(te===n.UNSIGNED_BYTE&&(et=n.RG8UI),te===n.UNSIGNED_SHORT&&(et=n.RG16UI),te===n.UNSIGNED_INT&&(et=n.RG32UI),te===n.BYTE&&(et=n.RG8I),te===n.SHORT&&(et=n.RG16I),te===n.INT&&(et=n.RG32I)),q===n.RGB_INTEGER&&(te===n.UNSIGNED_BYTE&&(et=n.RGB8UI),te===n.UNSIGNED_SHORT&&(et=n.RGB16UI),te===n.UNSIGNED_INT&&(et=n.RGB32UI),te===n.BYTE&&(et=n.RGB8I),te===n.SHORT&&(et=n.RGB16I),te===n.INT&&(et=n.RGB32I)),q===n.RGBA_INTEGER&&(te===n.UNSIGNED_BYTE&&(et=n.RGBA8UI),te===n.UNSIGNED_SHORT&&(et=n.RGBA16UI),te===n.UNSIGNED_INT&&(et=n.RGBA32UI),te===n.BYTE&&(et=n.RGBA8I),te===n.SHORT&&(et=n.RGBA16I),te===n.INT&&(et=n.RGBA32I)),q===n.RGB&&te===n.UNSIGNED_INT_5_9_9_9_REV&&(et=n.RGB9_E5),q===n.RGBA){const At=Ve?K3:Ii.getTransfer(ye);te===n.FLOAT&&(et=n.RGBA32F),te===n.HALF_FLOAT&&(et=n.RGBA16F),te===n.UNSIGNED_BYTE&&(et=At===ji?n.SRGB8_ALPHA8:n.RGBA8),te===n.UNSIGNED_SHORT_4_4_4_4&&(et=n.RGBA4),te===n.UNSIGNED_SHORT_5_5_5_1&&(et=n.RGB5_A1)}return(et===n.R16F||et===n.R32F||et===n.RG16F||et===n.RG32F||et===n.RGBA16F||et===n.RGBA32F)&&e.get("EXT_color_buffer_float"),et}function b(ge,q){let te;return ge?q===null||q===Bu||q===p_?te=n.DEPTH24_STENCIL8:q===Pc?te=n.DEPTH32F_STENCIL8:q===aw&&(te=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):q===null||q===Bu||q===p_?te=n.DEPTH_COMPONENT24:q===Pc?te=n.DEPTH_COMPONENT32F:q===aw&&(te=n.DEPTH_COMPONENT16),te}function x(ge,q){return v(ge)===!0||ge.isFramebufferTexture&&ge.minFilter!==tu&&ge.minFilter!==bd?Math.log2(Math.max(q.width,q.height))+1:ge.mipmaps!==void 0&&ge.mipmaps.length>0?ge.mipmaps.length:ge.isCompressedTexture&&Array.isArray(ge.image)?q.mipmaps.length:1}function w(ge){const q=ge.target;q.removeEventListener("dispose",w),T(q),q.isVideoTexture&&c.delete(q)}function A(ge){const q=ge.target;q.removeEventListener("dispose",A),E(q)}function T(ge){const q=r.get(ge);if(q.__webglInit===void 0)return;const te=ge.source,ye=f.get(te);if(ye){const Ve=ye[q.__cacheKey];Ve.usedTimes--,Ve.usedTimes===0&&C(ge),Object.keys(ye).length===0&&f.delete(te)}r.remove(ge)}function C(ge){const q=r.get(ge);n.deleteTexture(q.__webglTexture);const te=ge.source,ye=f.get(te);delete ye[q.__cacheKey],s.memory.textures--}function E(ge){const q=r.get(ge);if(ge.depthTexture&&(ge.depthTexture.dispose(),r.remove(ge.depthTexture)),ge.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++){if(Array.isArray(q.__webglFramebuffer[ye]))for(let Ve=0;Ve<q.__webglFramebuffer[ye].length;Ve++)n.deleteFramebuffer(q.__webglFramebuffer[ye][Ve]);else n.deleteFramebuffer(q.__webglFramebuffer[ye]);q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer[ye])}else{if(Array.isArray(q.__webglFramebuffer))for(let ye=0;ye<q.__webglFramebuffer.length;ye++)n.deleteFramebuffer(q.__webglFramebuffer[ye]);else n.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let ye=0;ye<q.__webglColorRenderbuffer.length;ye++)q.__webglColorRenderbuffer[ye]&&n.deleteRenderbuffer(q.__webglColorRenderbuffer[ye]);q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const te=ge.textures;for(let ye=0,Ve=te.length;ye<Ve;ye++){const et=r.get(te[ye]);et.__webglTexture&&(n.deleteTexture(et.__webglTexture),s.memory.textures--),r.remove(te[ye])}r.remove(ge)}let I=0;function P(){I=0}function L(){const ge=I;return ge>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ge+" texture units while this GPU supports only "+i.maxTextures),I+=1,ge}function N(ge){const q=[];return q.push(ge.wrapS),q.push(ge.wrapT),q.push(ge.wrapR||0),q.push(ge.magFilter),q.push(ge.minFilter),q.push(ge.anisotropy),q.push(ge.internalFormat),q.push(ge.format),q.push(ge.type),q.push(ge.generateMipmaps),q.push(ge.premultiplyAlpha),q.push(ge.flipY),q.push(ge.unpackAlignment),q.push(ge.colorSpace),q.join()}function F(ge,q){const te=r.get(ge);if(ge.isVideoTexture&&je(ge),ge.isRenderTargetTexture===!1&&ge.version>0&&te.__version!==ge.version){const ye=ge.image;if(ye===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ye.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ae(te,ge,q);return}}t.bindTexture(n.TEXTURE_2D,te.__webglTexture,n.TEXTURE0+q)}function k(ge,q){const te=r.get(ge);if(ge.version>0&&te.__version!==ge.version){ae(te,ge,q);return}t.bindTexture(n.TEXTURE_2D_ARRAY,te.__webglTexture,n.TEXTURE0+q)}function H(ge,q){const te=r.get(ge);if(ge.version>0&&te.__version!==ge.version){ae(te,ge,q);return}t.bindTexture(n.TEXTURE_3D,te.__webglTexture,n.TEXTURE0+q)}function U(ge,q){const te=r.get(ge);if(ge.version>0&&te.__version!==ge.version){pe(te,ge,q);return}t.bindTexture(n.TEXTURE_CUBE_MAP,te.__webglTexture,n.TEXTURE0+q)}const B={[f8]:n.REPEAT,[B0]:n.CLAMP_TO_EDGE,[h8]:n.MIRRORED_REPEAT},$={[tu]:n.NEAREST,[omt]:n.NEAREST_MIPMAP_NEAREST,[_A]:n.NEAREST_MIPMAP_LINEAR,[bd]:n.LINEAR,[Uk]:n.LINEAR_MIPMAP_NEAREST,[F0]:n.LINEAR_MIPMAP_LINEAR},ee={[fmt]:n.NEVER,[ymt]:n.ALWAYS,[hmt]:n.LESS,[the]:n.LEQUAL,[pmt]:n.EQUAL,[gmt]:n.GEQUAL,[mmt]:n.GREATER,[vmt]:n.NOTEQUAL};function re(ge,q){if(q.type===Pc&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===bd||q.magFilter===Uk||q.magFilter===_A||q.magFilter===F0||q.minFilter===bd||q.minFilter===Uk||q.minFilter===_A||q.minFilter===F0)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ge,n.TEXTURE_WRAP_S,B[q.wrapS]),n.texParameteri(ge,n.TEXTURE_WRAP_T,B[q.wrapT]),(ge===n.TEXTURE_3D||ge===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ge,n.TEXTURE_WRAP_R,B[q.wrapR]),n.texParameteri(ge,n.TEXTURE_MAG_FILTER,$[q.magFilter]),n.texParameteri(ge,n.TEXTURE_MIN_FILTER,$[q.minFilter]),q.compareFunction&&(n.texParameteri(ge,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ge,n.TEXTURE_COMPARE_FUNC,ee[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===tu||q.minFilter!==_A&&q.minFilter!==F0||q.type===Pc&&e.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||r.get(q).__currentAnisotropy){const te=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ge,te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,i.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy}}}function ne(ge,q){let te=!1;ge.__webglInit===void 0&&(ge.__webglInit=!0,q.addEventListener("dispose",w));const ye=q.source;let Ve=f.get(ye);Ve===void 0&&(Ve={},f.set(ye,Ve));const et=N(q);if(et!==ge.__cacheKey){Ve[et]===void 0&&(Ve[et]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,te=!0),Ve[et].usedTimes++;const At=Ve[ge.__cacheKey];At!==void 0&&(Ve[ge.__cacheKey].usedTimes--,At.usedTimes===0&&C(q)),ge.__cacheKey=et,ge.__webglTexture=Ve[et].texture}return te}function ae(ge,q,te){let ye=n.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(ye=n.TEXTURE_2D_ARRAY),q.isData3DTexture&&(ye=n.TEXTURE_3D);const Ve=ne(ge,q),et=q.source;t.bindTexture(ye,ge.__webglTexture,n.TEXTURE0+te);const At=r.get(et);if(et.version!==At.__version||Ve===!0){t.activeTexture(n.TEXTURE0+te);const It=Ii.getPrimaries(Ii.workingColorSpace),De=q.colorSpace===cp?null:Ii.getPrimaries(q.colorSpace),Tt=q.colorSpace===cp||It===De?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Tt);let ot=m(q.image,!1,i.maxTextureSize);ot=He(q,ot);const G=a.convert(q.format,q.colorSpace),_e=a.convert(q.type);let ve=_(q.internalFormat,G,_e,q.colorSpace,q.isVideoTexture);re(ye,q);let Le;const we=q.mipmaps,Ie=q.isVideoTexture!==!0,wt=At.__version===void 0||Ve===!0,Pe=et.dataReady,Rt=x(q,ot);if(q.isDepthTexture)ve=b(q.format===m_,q.type),wt&&(Ie?t.texStorage2D(n.TEXTURE_2D,1,ve,ot.width,ot.height):t.texImage2D(n.TEXTURE_2D,0,ve,ot.width,ot.height,0,G,_e,null));else if(q.isDataTexture)if(we.length>0){Ie&&wt&&t.texStorage2D(n.TEXTURE_2D,Rt,ve,we[0].width,we[0].height);for(let dt=0,Mt=we.length;dt<Mt;dt++)Le=we[dt],Ie?Pe&&t.texSubImage2D(n.TEXTURE_2D,dt,0,0,Le.width,Le.height,G,_e,Le.data):t.texImage2D(n.TEXTURE_2D,dt,ve,Le.width,Le.height,0,G,_e,Le.data);q.generateMipmaps=!1}else Ie?(wt&&t.texStorage2D(n.TEXTURE_2D,Rt,ve,ot.width,ot.height),Pe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ot.width,ot.height,G,_e,ot.data)):t.texImage2D(n.TEXTURE_2D,0,ve,ot.width,ot.height,0,G,_e,ot.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){Ie&&wt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Rt,ve,we[0].width,we[0].height,ot.depth);for(let dt=0,Mt=we.length;dt<Mt;dt++)if(Le=we[dt],q.format!==qo)if(G!==null)if(Ie){if(Pe)if(q.layerUpdates.size>0){const Wt=cQ(Le.width,Le.height,q.format,q.type);for(const zt of q.layerUpdates){const Sn=Le.data.subarray(zt*Wt/Le.data.BYTES_PER_ELEMENT,(zt+1)*Wt/Le.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,dt,0,0,zt,Le.width,Le.height,1,G,Sn)}q.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,dt,0,0,0,Le.width,Le.height,ot.depth,G,Le.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,dt,ve,Le.width,Le.height,ot.depth,0,Le.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ie?Pe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,dt,0,0,0,Le.width,Le.height,ot.depth,G,_e,Le.data):t.texImage3D(n.TEXTURE_2D_ARRAY,dt,ve,Le.width,Le.height,ot.depth,0,G,_e,Le.data)}else{Ie&&wt&&t.texStorage2D(n.TEXTURE_2D,Rt,ve,we[0].width,we[0].height);for(let dt=0,Mt=we.length;dt<Mt;dt++)Le=we[dt],q.format!==qo?G!==null?Ie?Pe&&t.compressedTexSubImage2D(n.TEXTURE_2D,dt,0,0,Le.width,Le.height,G,Le.data):t.compressedTexImage2D(n.TEXTURE_2D,dt,ve,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ie?Pe&&t.texSubImage2D(n.TEXTURE_2D,dt,0,0,Le.width,Le.height,G,_e,Le.data):t.texImage2D(n.TEXTURE_2D,dt,ve,Le.width,Le.height,0,G,_e,Le.data)}else if(q.isDataArrayTexture)if(Ie){if(wt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Rt,ve,ot.width,ot.height,ot.depth),Pe)if(q.layerUpdates.size>0){const dt=cQ(ot.width,ot.height,q.format,q.type);for(const Mt of q.layerUpdates){const Wt=ot.data.subarray(Mt*dt/ot.data.BYTES_PER_ELEMENT,(Mt+1)*dt/ot.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Mt,ot.width,ot.height,1,G,_e,Wt)}q.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ot.width,ot.height,ot.depth,G,_e,ot.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ve,ot.width,ot.height,ot.depth,0,G,_e,ot.data);else if(q.isData3DTexture)Ie?(wt&&t.texStorage3D(n.TEXTURE_3D,Rt,ve,ot.width,ot.height,ot.depth),Pe&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ot.width,ot.height,ot.depth,G,_e,ot.data)):t.texImage3D(n.TEXTURE_3D,0,ve,ot.width,ot.height,ot.depth,0,G,_e,ot.data);else if(q.isFramebufferTexture){if(wt)if(Ie)t.texStorage2D(n.TEXTURE_2D,Rt,ve,ot.width,ot.height);else{let dt=ot.width,Mt=ot.height;for(let Wt=0;Wt<Rt;Wt++)t.texImage2D(n.TEXTURE_2D,Wt,ve,dt,Mt,0,G,_e,null),dt>>=1,Mt>>=1}}else if(we.length>0){if(Ie&&wt){const dt=ut(we[0]);t.texStorage2D(n.TEXTURE_2D,Rt,ve,dt.width,dt.height)}for(let dt=0,Mt=we.length;dt<Mt;dt++)Le=we[dt],Ie?Pe&&t.texSubImage2D(n.TEXTURE_2D,dt,0,0,G,_e,Le):t.texImage2D(n.TEXTURE_2D,dt,ve,G,_e,Le);q.generateMipmaps=!1}else if(Ie){if(wt){const dt=ut(ot);t.texStorage2D(n.TEXTURE_2D,Rt,ve,dt.width,dt.height)}Pe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,G,_e,ot)}else t.texImage2D(n.TEXTURE_2D,0,ve,G,_e,ot);v(q)&&g(ye),At.__version=et.version,q.onUpdate&&q.onUpdate(q)}ge.__version=q.version}function pe(ge,q,te){if(q.image.length!==6)return;const ye=ne(ge,q),Ve=q.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture,n.TEXTURE0+te);const et=r.get(Ve);if(Ve.version!==et.__version||ye===!0){t.activeTexture(n.TEXTURE0+te);const At=Ii.getPrimaries(Ii.workingColorSpace),It=q.colorSpace===cp?null:Ii.getPrimaries(q.colorSpace),De=q.colorSpace===cp||At===It?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,De);const Tt=q.isCompressedTexture||q.image[0].isCompressedTexture,ot=q.image[0]&&q.image[0].isDataTexture,G=[];for(let Mt=0;Mt<6;Mt++)!Tt&&!ot?G[Mt]=m(q.image[Mt],!0,i.maxCubemapSize):G[Mt]=ot?q.image[Mt].image:q.image[Mt],G[Mt]=He(q,G[Mt]);const _e=G[0],ve=a.convert(q.format,q.colorSpace),Le=a.convert(q.type),we=_(q.internalFormat,ve,Le,q.colorSpace),Ie=q.isVideoTexture!==!0,wt=et.__version===void 0||ye===!0,Pe=Ve.dataReady;let Rt=x(q,_e);re(n.TEXTURE_CUBE_MAP,q);let dt;if(Tt){Ie&&wt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Rt,we,_e.width,_e.height);for(let Mt=0;Mt<6;Mt++){dt=G[Mt].mipmaps;for(let Wt=0;Wt<dt.length;Wt++){const zt=dt[Wt];q.format!==qo?ve!==null?Ie?Pe&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Wt,0,0,zt.width,zt.height,ve,zt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Wt,we,zt.width,zt.height,0,zt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ie?Pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Wt,0,0,zt.width,zt.height,ve,Le,zt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Wt,we,zt.width,zt.height,0,ve,Le,zt.data)}}}else{if(dt=q.mipmaps,Ie&&wt){dt.length>0&&Rt++;const Mt=ut(G[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Rt,we,Mt.width,Mt.height)}for(let Mt=0;Mt<6;Mt++)if(ot){Ie?Pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,0,0,G[Mt].width,G[Mt].height,ve,Le,G[Mt].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,we,G[Mt].width,G[Mt].height,0,ve,Le,G[Mt].data);for(let Wt=0;Wt<dt.length;Wt++){const Sn=dt[Wt].image[Mt].image;Ie?Pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Wt+1,0,0,Sn.width,Sn.height,ve,Le,Sn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Wt+1,we,Sn.width,Sn.height,0,ve,Le,Sn.data)}}else{Ie?Pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,0,0,ve,Le,G[Mt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,we,ve,Le,G[Mt]);for(let Wt=0;Wt<dt.length;Wt++){const zt=dt[Wt];Ie?Pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Wt+1,0,0,ve,Le,zt.image[Mt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,Wt+1,we,ve,Le,zt.image[Mt])}}}v(q)&&g(n.TEXTURE_CUBE_MAP),et.__version=Ve.version,q.onUpdate&&q.onUpdate(q)}ge.__version=q.version}function de(ge,q,te,ye,Ve,et){const At=a.convert(te.format,te.colorSpace),It=a.convert(te.type),De=_(te.internalFormat,At,It,te.colorSpace),Tt=r.get(q),ot=r.get(te);if(ot.__renderTarget=q,!Tt.__hasExternalTextures){const G=Math.max(1,q.width>>et),_e=Math.max(1,q.height>>et);Ve===n.TEXTURE_3D||Ve===n.TEXTURE_2D_ARRAY?t.texImage3D(Ve,et,De,G,_e,q.depth,0,At,It,null):t.texImage2D(Ve,et,De,G,_e,0,At,It,null)}t.bindFramebuffer(n.FRAMEBUFFER,ge),Ze(q)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ye,Ve,ot.__webglTexture,0,Ue(q)):(Ve===n.TEXTURE_2D||Ve>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ve<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ye,Ve,ot.__webglTexture,et),t.bindFramebuffer(n.FRAMEBUFFER,null)}function me(ge,q,te){if(n.bindRenderbuffer(n.RENDERBUFFER,ge),q.depthBuffer){const ye=q.depthTexture,Ve=ye&&ye.isDepthTexture?ye.type:null,et=b(q.stencilBuffer,Ve),At=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,It=Ue(q);Ze(q)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,It,et,q.width,q.height):te?n.renderbufferStorageMultisample(n.RENDERBUFFER,It,et,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,et,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,At,n.RENDERBUFFER,ge)}else{const ye=q.textures;for(let Ve=0;Ve<ye.length;Ve++){const et=ye[Ve],At=a.convert(et.format,et.colorSpace),It=a.convert(et.type),De=_(et.internalFormat,At,It,et.colorSpace),Tt=Ue(q);te&&Ze(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Tt,De,q.width,q.height):Ze(q)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Tt,De,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,De,q.width,q.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ke(ge,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ge),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ye=r.get(q.depthTexture);ye.__renderTarget=q,(!ye.__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),F(q.depthTexture,0);const Ve=ye.__webglTexture,et=Ue(q);if(q.depthTexture.format===rv)Ze(q)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ve,0,et):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ve,0);else if(q.depthTexture.format===m_)Ze(q)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ve,0,et):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ve,0);else throw new Error("Unknown depthTexture format")}function Be(ge){const q=r.get(ge),te=ge.isWebGLCubeRenderTarget===!0;if(q.__boundDepthTexture!==ge.depthTexture){const ye=ge.depthTexture;if(q.__depthDisposeCallback&&q.__depthDisposeCallback(),ye){const Ve=()=>{delete q.__boundDepthTexture,delete q.__depthDisposeCallback,ye.removeEventListener("dispose",Ve)};ye.addEventListener("dispose",Ve),q.__depthDisposeCallback=Ve}q.__boundDepthTexture=ye}if(ge.depthTexture&&!q.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");ke(q.__webglFramebuffer,ge)}else if(te){q.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)if(t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[ye]),q.__webglDepthbuffer[ye]===void 0)q.__webglDepthbuffer[ye]=n.createRenderbuffer(),me(q.__webglDepthbuffer[ye],ge,!1);else{const Ve=ge.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=q.__webglDepthbuffer[ye];n.bindRenderbuffer(n.RENDERBUFFER,et),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ve,n.RENDERBUFFER,et)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer===void 0)q.__webglDepthbuffer=n.createRenderbuffer(),me(q.__webglDepthbuffer,ge,!1);else{const ye=ge.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ve=q.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ve),n.framebufferRenderbuffer(n.FRAMEBUFFER,ye,n.RENDERBUFFER,Ve)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Xe(ge,q,te){const ye=r.get(ge);q!==void 0&&de(ye.__webglFramebuffer,ge,ge.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),te!==void 0&&Be(ge)}function Ye(ge){const q=ge.texture,te=r.get(ge),ye=r.get(q);ge.addEventListener("dispose",A);const Ve=ge.textures,et=ge.isWebGLCubeRenderTarget===!0,At=Ve.length>1;if(At||(ye.__webglTexture===void 0&&(ye.__webglTexture=n.createTexture()),ye.__version=q.version,s.memory.textures++),et){te.__webglFramebuffer=[];for(let It=0;It<6;It++)if(q.mipmaps&&q.mipmaps.length>0){te.__webglFramebuffer[It]=[];for(let De=0;De<q.mipmaps.length;De++)te.__webglFramebuffer[It][De]=n.createFramebuffer()}else te.__webglFramebuffer[It]=n.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){te.__webglFramebuffer=[];for(let It=0;It<q.mipmaps.length;It++)te.__webglFramebuffer[It]=n.createFramebuffer()}else te.__webglFramebuffer=n.createFramebuffer();if(At)for(let It=0,De=Ve.length;It<De;It++){const Tt=r.get(Ve[It]);Tt.__webglTexture===void 0&&(Tt.__webglTexture=n.createTexture(),s.memory.textures++)}if(ge.samples>0&&Ze(ge)===!1){te.__webglMultisampledFramebuffer=n.createFramebuffer(),te.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let It=0;It<Ve.length;It++){const De=Ve[It];te.__webglColorRenderbuffer[It]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,te.__webglColorRenderbuffer[It]);const Tt=a.convert(De.format,De.colorSpace),ot=a.convert(De.type),G=_(De.internalFormat,Tt,ot,De.colorSpace,ge.isXRRenderTarget===!0),_e=Ue(ge);n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,G,ge.width,ge.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+It,n.RENDERBUFFER,te.__webglColorRenderbuffer[It])}n.bindRenderbuffer(n.RENDERBUFFER,null),ge.depthBuffer&&(te.__webglDepthRenderbuffer=n.createRenderbuffer(),me(te.__webglDepthRenderbuffer,ge,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(et){t.bindTexture(n.TEXTURE_CUBE_MAP,ye.__webglTexture),re(n.TEXTURE_CUBE_MAP,q);for(let It=0;It<6;It++)if(q.mipmaps&&q.mipmaps.length>0)for(let De=0;De<q.mipmaps.length;De++)de(te.__webglFramebuffer[It][De],ge,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+It,De);else de(te.__webglFramebuffer[It],ge,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+It,0);v(q)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(At){for(let It=0,De=Ve.length;It<De;It++){const Tt=Ve[It],ot=r.get(Tt);t.bindTexture(n.TEXTURE_2D,ot.__webglTexture),re(n.TEXTURE_2D,Tt),de(te.__webglFramebuffer,ge,Tt,n.COLOR_ATTACHMENT0+It,n.TEXTURE_2D,0),v(Tt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let It=n.TEXTURE_2D;if((ge.isWebGL3DRenderTarget||ge.isWebGLArrayRenderTarget)&&(It=ge.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(It,ye.__webglTexture),re(It,q),q.mipmaps&&q.mipmaps.length>0)for(let De=0;De<q.mipmaps.length;De++)de(te.__webglFramebuffer[De],ge,q,n.COLOR_ATTACHMENT0,It,De);else de(te.__webglFramebuffer,ge,q,n.COLOR_ATTACHMENT0,It,0);v(q)&&g(It),t.unbindTexture()}ge.depthBuffer&&Be(ge)}function Y(ge){const q=ge.textures;for(let te=0,ye=q.length;te<ye;te++){const Ve=q[te];if(v(Ve)){const et=y(ge),At=r.get(Ve).__webglTexture;t.bindTexture(et,At),g(et),t.unbindTexture()}}}const he=[],le=[];function Ke(ge){if(ge.samples>0){if(Ze(ge)===!1){const q=ge.textures,te=ge.width,ye=ge.height;let Ve=n.COLOR_BUFFER_BIT;const et=ge.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,At=r.get(ge),It=q.length>1;if(It)for(let De=0;De<q.length;De++)t.bindFramebuffer(n.FRAMEBUFFER,At.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+De,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,At.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+De,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,At.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,At.__webglFramebuffer);for(let De=0;De<q.length;De++){if(ge.resolveDepthBuffer&&(ge.depthBuffer&&(Ve|=n.DEPTH_BUFFER_BIT),ge.stencilBuffer&&ge.resolveStencilBuffer&&(Ve|=n.STENCIL_BUFFER_BIT)),It){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,At.__webglColorRenderbuffer[De]);const Tt=r.get(q[De]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Tt,0)}n.blitFramebuffer(0,0,te,ye,0,0,te,ye,Ve,n.NEAREST),l===!0&&(he.length=0,le.length=0,he.push(n.COLOR_ATTACHMENT0+De),ge.depthBuffer&&ge.resolveDepthBuffer===!1&&(he.push(et),le.push(et),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,le)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,he))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),It)for(let De=0;De<q.length;De++){t.bindFramebuffer(n.FRAMEBUFFER,At.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+De,n.RENDERBUFFER,At.__webglColorRenderbuffer[De]);const Tt=r.get(q[De]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,At.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+De,n.TEXTURE_2D,Tt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,At.__webglMultisampledFramebuffer)}else if(ge.depthBuffer&&ge.resolveDepthBuffer===!1&&l){const q=ge.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[q])}}}function Ue(ge){return Math.min(i.maxSamples,ge.samples)}function Ze(ge){const q=r.get(ge);return ge.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function je(ge){const q=s.render.frame;c.get(ge)!==q&&(c.set(ge,q),ge.update())}function He(ge,q){const te=ge.colorSpace,ye=ge.format,Ve=ge.type;return ge.isCompressedTexture===!0||ge.isVideoTexture===!0||te!==v_&&te!==cp&&(Ii.getTransfer(te)===ji?(ye!==qo||Ve!==zd)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",te)),q}function ut(ge){return typeof HTMLImageElement<"u"&&ge instanceof HTMLImageElement?(u.width=ge.naturalWidth||ge.width,u.height=ge.naturalHeight||ge.height):typeof VideoFrame<"u"&&ge instanceof VideoFrame?(u.width=ge.displayWidth,u.height=ge.displayHeight):(u.width=ge.width,u.height=ge.height),u}this.allocateTextureUnit=L,this.resetTextureUnits=P,this.setTexture2D=F,this.setTexture2DArray=k,this.setTexture3D=H,this.setTextureCube=U,this.rebindTextures=Xe,this.setupRenderTarget=Ye,this.updateRenderTargetMipmap=Y,this.updateMultisampleRenderTarget=Ke,this.setupDepthRenderbuffer=Be,this.setupFrameBufferTexture=de,this.useMultisampledRTT=Ze}function bhe(n,e){function t(r,i=cp){let a;const s=Ii.getTransfer(i);if(r===zd)return n.UNSIGNED_BYTE;if(r===J9)return n.UNSIGNED_SHORT_4_4_4_4;if(r===eU)return n.UNSIGNED_SHORT_5_5_5_1;if(r===Kfe)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===qfe)return n.BYTE;if(r===jfe)return n.SHORT;if(r===aw)return n.UNSIGNED_SHORT;if(r===Z9)return n.INT;if(r===Bu)return n.UNSIGNED_INT;if(r===Pc)return n.FLOAT;if(r===fb)return n.HALF_FLOAT;if(r===Xfe)return n.ALPHA;if(r===Yfe)return n.RGB;if(r===qo)return n.RGBA;if(r===Qfe)return n.LUMINANCE;if(r===Zfe)return n.LUMINANCE_ALPHA;if(r===rv)return n.DEPTH_COMPONENT;if(r===m_)return n.DEPTH_STENCIL;if(r===Jfe)return n.RED;if(r===FI)return n.RED_INTEGER;if(r===tU)return n.RG;if(r===nU)return n.RG_INTEGER;if(r===m1)return n.RGBA_INTEGER;if(r===WE||r===qE||r===jE||r===KE)if(s===ji)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===WE)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===qE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===jE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===KE)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===WE)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===qE)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===jE)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===KE)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===p8||r===m8||r===v8||r===g8)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===p8)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===m8)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===v8)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===g8)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===y8||r===_8||r===b8)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===y8||r===_8)return s===ji?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===b8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===S8||r===x8||r===w8||r===T8||r===C8||r===A8||r===E8||r===M8||r===I8||r===D8||r===P8||r===R8||r===k8||r===L8)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===S8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===x8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===w8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===T8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===C8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===A8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===E8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===M8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===I8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===D8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===P8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===R8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===k8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===L8)return s===ji?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===XE||r===O8||r===N8)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===XE)return s===ji?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===O8)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===N8)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===ehe||r===B8||r===F8||r===U8)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(r===XE)return a.COMPRESSED_RED_RGTC1_EXT;if(r===B8)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===F8)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===U8)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===p_?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const q1t={type:"move"};class fL{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new BA,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new BA,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ft,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ft),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new BA,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ft,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ft),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,s=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const m of e.hand.values()){const v=t.getJointPose(m,r),g=this._getHandJoint(u,m);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],f=c.position.distanceTo(d.position),h=.02,p=.005;u.inputState.pinching&&f>h+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=h-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(q1t)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new BA;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const j1t=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,K1t=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class X1t{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Yo,a=e.properties.get(i);a.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new ru({vertexShader:j1t,fragmentShader:K1t,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ua(new y_(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Y1t extends Uv{constructor(e,t){super();const r=this;let i=null,a=1,s=null,o="local-floor",l=1,u=null,c=null,d=null,f=null,h=null,p=null;const m=new X1t,v=t.getContextAttributes();let g=null,y=null;const _=[],b=[],x=new cr;let w=null;const A=new Pu;A.viewport=new _a;const T=new Pu;T.viewport=new _a;const C=[A,T],E=new y0t;let I=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let pe=_[ae];return pe===void 0&&(pe=new fL,_[ae]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(ae){let pe=_[ae];return pe===void 0&&(pe=new fL,_[ae]=pe),pe.getGripSpace()},this.getHand=function(ae){let pe=_[ae];return pe===void 0&&(pe=new fL,_[ae]=pe),pe.getHandSpace()};function L(ae){const pe=b.indexOf(ae.inputSource);if(pe===-1)return;const de=_[pe];de!==void 0&&(de.update(ae.inputSource,ae.frame,u||s),de.dispatchEvent({type:ae.type,data:ae.inputSource}))}function N(){i.removeEventListener("select",L),i.removeEventListener("selectstart",L),i.removeEventListener("selectend",L),i.removeEventListener("squeeze",L),i.removeEventListener("squeezestart",L),i.removeEventListener("squeezeend",L),i.removeEventListener("end",N),i.removeEventListener("inputsourceschange",F);for(let ae=0;ae<_.length;ae++){const pe=b[ae];pe!==null&&(b[ae]=null,_[ae].disconnect(pe))}I=null,P=null,m.reset(),e.setRenderTarget(g),h=null,f=null,d=null,i=null,y=null,ne.stop(),r.isPresenting=!1,e.setPixelRatio(w),e.setSize(x.width,x.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ae){a=ae,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){o=ae,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(ae){u=ae},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(ae){if(i=ae,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",L),i.addEventListener("selectstart",L),i.addEventListener("selectend",L),i.addEventListener("squeeze",L),i.addEventListener("squeezestart",L),i.addEventListener("squeezeend",L),i.addEventListener("end",N),i.addEventListener("inputsourceschange",F),v.xrCompatible!==!0&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(x),i.renderState.layers===void 0){const pe={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:a};h=new XRWebGLLayer(i,t,pe),i.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),y=new im(h.framebufferWidth,h.framebufferHeight,{format:qo,type:zd,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let pe=null,de=null,me=null;v.depth&&(me=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,pe=v.stencil?m_:rv,de=v.stencil?p_:Bu);const ke={colorFormat:t.RGBA8,depthFormat:me,scaleFactor:a};d=new XRWebGLBinding(i,t),f=d.createProjectionLayer(ke),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),y=new im(f.textureWidth,f.textureHeight,{format:qo,type:zd,depthTexture:new aU(f.textureWidth,f.textureHeight,de,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}y.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await i.requestReferenceSpace(o),ne.setContext(i),ne.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function F(ae){for(let pe=0;pe<ae.removed.length;pe++){const de=ae.removed[pe],me=b.indexOf(de);me>=0&&(b[me]=null,_[me].disconnect(de))}for(let pe=0;pe<ae.added.length;pe++){const de=ae.added[pe];let me=b.indexOf(de);if(me===-1){for(let Be=0;Be<_.length;Be++)if(Be>=b.length){b.push(de),me=Be;break}else if(b[Be]===null){b[Be]=de,me=Be;break}if(me===-1)break}const ke=_[me];ke&&ke.connect(de)}}const k=new ft,H=new ft;function U(ae,pe,de){k.setFromMatrixPosition(pe.matrixWorld),H.setFromMatrixPosition(de.matrixWorld);const me=k.distanceTo(H),ke=pe.projectionMatrix.elements,Be=de.projectionMatrix.elements,Xe=ke[14]/(ke[10]-1),Ye=ke[14]/(ke[10]+1),Y=(ke[9]+1)/ke[5],he=(ke[9]-1)/ke[5],le=(ke[8]-1)/ke[0],Ke=(Be[8]+1)/Be[0],Ue=Xe*le,Ze=Xe*Ke,je=me/(-le+Ke),He=je*-le;if(pe.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(He),ae.translateZ(je),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert(),ke[10]===-1)ae.projectionMatrix.copy(pe.projectionMatrix),ae.projectionMatrixInverse.copy(pe.projectionMatrixInverse);else{const ut=Xe+je,ge=Ye+je,q=Ue-He,te=Ze+(me-He),ye=Y*Ye/ge*ut,Ve=he*Ye/ge*ut;ae.projectionMatrix.makePerspective(q,te,ye,Ve,ut,ge),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert()}}function B(ae,pe){pe===null?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(pe.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(i===null)return;let pe=ae.near,de=ae.far;m.texture!==null&&(m.depthNear>0&&(pe=m.depthNear),m.depthFar>0&&(de=m.depthFar)),E.near=T.near=A.near=pe,E.far=T.far=A.far=de,(I!==E.near||P!==E.far)&&(i.updateRenderState({depthNear:E.near,depthFar:E.far}),I=E.near,P=E.far),A.layers.mask=ae.layers.mask|2,T.layers.mask=ae.layers.mask|4,E.layers.mask=A.layers.mask|T.layers.mask;const me=ae.parent,ke=E.cameras;B(E,me);for(let Be=0;Be<ke.length;Be++)B(ke[Be],me);ke.length===2?U(E,A,T):E.projectionMatrix.copy(A.projectionMatrix),$(ae,E,me)};function $(ae,pe,de){de===null?ae.matrix.copy(pe.matrixWorld):(ae.matrix.copy(de.matrixWorld),ae.matrix.invert(),ae.matrix.multiply(pe.matrixWorld)),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.updateMatrixWorld(!0),ae.projectionMatrix.copy(pe.projectionMatrix),ae.projectionMatrixInverse.copy(pe.projectionMatrixInverse),ae.isPerspectiveCamera&&(ae.fov=sw*2*Math.atan(1/ae.projectionMatrix.elements[5]),ae.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(f===null&&h===null))return l},this.setFoveation=function(ae){l=ae,f!==null&&(f.fixedFoveation=ae),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=ae)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(E)};let ee=null;function re(ae,pe){if(c=pe.getViewerPose(u||s),p=pe,c!==null){const de=c.views;h!==null&&(e.setRenderTargetFramebuffer(y,h.framebuffer),e.setRenderTarget(y));let me=!1;de.length!==E.cameras.length&&(E.cameras.length=0,me=!0);for(let Be=0;Be<de.length;Be++){const Xe=de[Be];let Ye=null;if(h!==null)Ye=h.getViewport(Xe);else{const he=d.getViewSubImage(f,Xe);Ye=he.viewport,Be===0&&(e.setRenderTargetTextures(y,he.colorTexture,f.ignoreDepthValues?void 0:he.depthStencilTexture),e.setRenderTarget(y))}let Y=C[Be];Y===void 0&&(Y=new Pu,Y.layers.enable(Be),Y.viewport=new _a,C[Be]=Y),Y.matrix.fromArray(Xe.transform.matrix),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.projectionMatrix.fromArray(Xe.projectionMatrix),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert(),Y.viewport.set(Ye.x,Ye.y,Ye.width,Ye.height),Be===0&&(E.matrix.copy(Y.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),me===!0&&E.cameras.push(Y)}const ke=i.enabledFeatures;if(ke&&ke.includes("depth-sensing")){const Be=d.getDepthInformation(de[0]);Be&&Be.isValid&&Be.texture&&m.init(e,Be,i.renderState)}}for(let de=0;de<_.length;de++){const me=b[de],ke=_[de];me!==null&&ke!==void 0&&ke.update(me,pe,u||s)}ee&&ee(ae,pe),pe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:pe}),p=null}const ne=new mhe;ne.setAnimationLoop(re),this.setAnimationLoop=function(ae){ee=ae},this.dispose=function(){}}}const n0=new ih,Q1t=new kr;function Z1t(n,e){function t(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function r(v,g){g.color.getRGB(v.fogColor.value,dhe(n)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function i(v,g,y,_,b){g.isMeshBasicMaterial||g.isMeshLambertMaterial?a(v,g):g.isMeshToonMaterial?(a(v,g),d(v,g)):g.isMeshPhongMaterial?(a(v,g),c(v,g)):g.isMeshStandardMaterial?(a(v,g),f(v,g),g.isMeshPhysicalMaterial&&h(v,g,b)):g.isMeshMatcapMaterial?(a(v,g),p(v,g)):g.isMeshDepthMaterial?a(v,g):g.isMeshDistanceMaterial?(a(v,g),m(v,g)):g.isMeshNormalMaterial?a(v,g):g.isLineBasicMaterial?(s(v,g),g.isLineDashedMaterial&&o(v,g)):g.isPointsMaterial?l(v,g,y,_):g.isSpriteMaterial?u(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function a(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,t(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===wl&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,t(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===wl&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,t(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,t(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const y=e.get(g),_=y.envMap,b=y.envMapRotation;_&&(v.envMap.value=_,n0.copy(b),n0.x*=-1,n0.y*=-1,n0.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(n0.y*=-1,n0.z*=-1),v.envMapRotation.value.setFromMatrix4(Q1t.makeRotationFromEuler(n0)),v.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,v.lightMapTransform)),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,v.aoMapTransform))}function s(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform))}function o(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,y,_){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*y,v.scale.value=_*.5,g.map&&(v.map.value=g.map,t(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function u(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function c(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function d(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function f(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,v.roughnessMapTransform)),g.envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function h(v,g,y){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===wl&&v.clearcoatNormalScale.value.negate())),g.dispersion>0&&(v.dispersion.value=g.dispersion),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=y.texture,v.transmissionSamplerSize.value.set(y.width,y.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,v.specularIntensityMapTransform))}function p(v,g){g.matcap&&(v.matcap.value=g.matcap)}function m(v,g){const y=e.get(g).light;v.referencePosition.value.setFromMatrixPosition(y.matrixWorld),v.nearDistance.value=y.shadow.camera.near,v.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function J1t(n,e,t,r){let i={},a={},s=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(y,_){const b=_.program;r.uniformBlockBinding(y,b)}function u(y,_){let b=i[y.id];b===void 0&&(p(y),b=c(y),i[y.id]=b,y.addEventListener("dispose",v));const x=_.program;r.updateUBOMapping(y,x);const w=e.render.frame;a[y.id]!==w&&(f(y),a[y.id]=w)}function c(y){const _=d();y.__bindingPointIndex=_;const b=n.createBuffer(),x=y.__size,w=y.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,x,w),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,b),b}function d(){for(let y=0;y<o;y++)if(s.indexOf(y)===-1)return s.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(y){const _=i[y.id],b=y.uniforms,x=y.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let w=0,A=b.length;w<A;w++){const T=Array.isArray(b[w])?b[w]:[b[w]];for(let C=0,E=T.length;C<E;C++){const I=T[C];if(h(I,w,C,x)===!0){const P=I.__offset,L=Array.isArray(I.value)?I.value:[I.value];let N=0;for(let F=0;F<L.length;F++){const k=L[F],H=m(k);typeof k=="number"||typeof k=="boolean"?(I.__data[0]=k,n.bufferSubData(n.UNIFORM_BUFFER,P+N,I.__data)):k.isMatrix3?(I.__data[0]=k.elements[0],I.__data[1]=k.elements[1],I.__data[2]=k.elements[2],I.__data[3]=0,I.__data[4]=k.elements[3],I.__data[5]=k.elements[4],I.__data[6]=k.elements[5],I.__data[7]=0,I.__data[8]=k.elements[6],I.__data[9]=k.elements[7],I.__data[10]=k.elements[8],I.__data[11]=0):(k.toArray(I.__data,N),N+=H.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,P,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function h(y,_,b,x){const w=y.value,A=_+"_"+b;if(x[A]===void 0)return typeof w=="number"||typeof w=="boolean"?x[A]=w:x[A]=w.clone(),!0;{const T=x[A];if(typeof w=="number"||typeof w=="boolean"){if(T!==w)return x[A]=w,!0}else if(T.equals(w)===!1)return T.copy(w),!0}return!1}function p(y){const _=y.uniforms;let b=0;const x=16;for(let A=0,T=_.length;A<T;A++){const C=Array.isArray(_[A])?_[A]:[_[A]];for(let E=0,I=C.length;E<I;E++){const P=C[E],L=Array.isArray(P.value)?P.value:[P.value];for(let N=0,F=L.length;N<F;N++){const k=L[N],H=m(k),U=b%x,B=U%H.boundary,$=U+B;b+=B,$!==0&&x-$<H.storage&&(b+=x-$),P.__data=new Float32Array(H.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=b,b+=H.storage}}}const w=b%x;return w>0&&(b+=x-w),y.__size=b,y.__cache={},this}function m(y){const _={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function v(y){const _=y.target;_.removeEventListener("dispose",v);const b=s.indexOf(_.__bindingPointIndex);s.splice(b,1),n.deleteBuffer(i[_.id]),delete i[_.id],delete a[_.id]}function g(){for(const y in i)n.deleteBuffer(i[y]);s=[],i={},a={}}return{bind:l,update:u,dispose:g}}class e_t{constructor(e={}){const{canvas:t=Nmt(),context:r=null,depth:i=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let h;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=r.getContextAttributes().alpha}else h=s;const p=new Uint32Array(4),m=new Int32Array(4);let v=null,g=null;const y=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Cu,this.toneMapping=Pp,this.toneMappingExposure=1;const b=this;let x=!1,w=0,A=0,T=null,C=-1,E=null;const I=new _a,P=new _a;let L=null;const N=new Di(0);let F=0,k=t.width,H=t.height,U=1,B=null,$=null;const ee=new _a(0,0,k,H),re=new _a(0,0,k,H);let ne=!1;const ae=new phe;let pe=!1,de=!1;const me=new kr,ke=new kr,Be=new ft,Xe=new _a,Ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Y=!1;function he(){return T===null?U:1}let le=r;function Ke(Fe,Dt){return t.getContext(Fe,Dt)}try{const Fe={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Q9}`),t.addEventListener("webglcontextlost",Mt,!1),t.addEventListener("webglcontextrestored",Wt,!1),t.addEventListener("webglcontextcreationerror",zt,!1),le===null){const Dt="webgl2";if(le=Ke(Dt,Fe),le===null)throw Ke(Dt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Fe){throw console.error("THREE.WebGLRenderer: "+Fe.message),Fe}let Ue,Ze,je,He,ut,ge,q,te,ye,Ve,et,At,It,De,Tt,ot,G,_e,ve,Le,we,Ie,wt,Pe;function Rt(){Ue=new cyt(le),Ue.init(),Ie=new bhe(le,Ue),Ze=new iyt(le,Ue,e,Ie),je=new G1t(le,Ue),Ze.reverseDepthBuffer&&f&&je.buffers.depth.setReversed(!0),He=new hyt(le),ut=new P1t,ge=new W1t(le,Ue,je,ut,Ze,Ie,He),q=new syt(b),te=new uyt(b),ye=new b0t(le),wt=new nyt(le,ye),Ve=new dyt(le,ye,He,wt),et=new myt(le,Ve,ye,He),ve=new pyt(le,Ze,ge),ot=new ayt(ut),At=new D1t(b,q,te,Ue,Ze,wt,ot),It=new Z1t(b,ut),De=new k1t,Tt=new U1t(Ue),_e=new tyt(b,q,te,je,et,h,l),G=new V1t(b,et,Ze),Pe=new J1t(le,He,Ze,je),Le=new ryt(le,Ue,He),we=new fyt(le,Ue,He),He.programs=At.programs,b.capabilities=Ze,b.extensions=Ue,b.properties=ut,b.renderLists=De,b.shadowMap=G,b.state=je,b.info=He}Rt();const dt=new Y1t(b,le);this.xr=dt,this.getContext=function(){return le},this.getContextAttributes=function(){return le.getContextAttributes()},this.forceContextLoss=function(){const Fe=Ue.get("WEBGL_lose_context");Fe&&Fe.loseContext()},this.forceContextRestore=function(){const Fe=Ue.get("WEBGL_lose_context");Fe&&Fe.restoreContext()},this.getPixelRatio=function(){return U},this.setPixelRatio=function(Fe){Fe!==void 0&&(U=Fe,this.setSize(k,H,!1))},this.getSize=function(Fe){return Fe.set(k,H)},this.setSize=function(Fe,Dt,Qe=!0){if(dt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=Fe,H=Dt,t.width=Math.floor(Fe*U),t.height=Math.floor(Dt*U),Qe===!0&&(t.style.width=Fe+"px",t.style.height=Dt+"px"),this.setViewport(0,0,Fe,Dt)},this.getDrawingBufferSize=function(Fe){return Fe.set(k*U,H*U).floor()},this.setDrawingBufferSize=function(Fe,Dt,Qe){k=Fe,H=Dt,U=Qe,t.width=Math.floor(Fe*Qe),t.height=Math.floor(Dt*Qe),this.setViewport(0,0,Fe,Dt)},this.getCurrentViewport=function(Fe){return Fe.copy(I)},this.getViewport=function(Fe){return Fe.copy(ee)},this.setViewport=function(Fe,Dt,Qe,yt){Fe.isVector4?ee.set(Fe.x,Fe.y,Fe.z,Fe.w):ee.set(Fe,Dt,Qe,yt),je.viewport(I.copy(ee).multiplyScalar(U).round())},this.getScissor=function(Fe){return Fe.copy(re)},this.setScissor=function(Fe,Dt,Qe,yt){Fe.isVector4?re.set(Fe.x,Fe.y,Fe.z,Fe.w):re.set(Fe,Dt,Qe,yt),je.scissor(P.copy(re).multiplyScalar(U).round())},this.getScissorTest=function(){return ne},this.setScissorTest=function(Fe){je.setScissorTest(ne=Fe)},this.setOpaqueSort=function(Fe){B=Fe},this.setTransparentSort=function(Fe){$=Fe},this.getClearColor=function(Fe){return Fe.copy(_e.getClearColor())},this.setClearColor=function(){_e.setClearColor.apply(_e,arguments)},this.getClearAlpha=function(){return _e.getClearAlpha()},this.setClearAlpha=function(){_e.setClearAlpha.apply(_e,arguments)},this.clear=function(Fe=!0,Dt=!0,Qe=!0){let yt=0;if(Fe){let ht=!1;if(T!==null){const Nt=T.texture.format;ht=Nt===m1||Nt===nU||Nt===FI}if(ht){const Nt=T.texture.type,yn=Nt===zd||Nt===Bu||Nt===aw||Nt===p_||Nt===J9||Nt===eU,un=_e.getClearColor(),Dn=_e.getClearAlpha(),nr=un.r,bn=un.g,Hn=un.b;yn?(p[0]=nr,p[1]=bn,p[2]=Hn,p[3]=Dn,le.clearBufferuiv(le.COLOR,0,p)):(m[0]=nr,m[1]=bn,m[2]=Hn,m[3]=Dn,le.clearBufferiv(le.COLOR,0,m))}else yt|=le.COLOR_BUFFER_BIT}Dt&&(yt|=le.DEPTH_BUFFER_BIT),Qe&&(yt|=le.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),le.clear(yt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Mt,!1),t.removeEventListener("webglcontextrestored",Wt,!1),t.removeEventListener("webglcontextcreationerror",zt,!1),_e.dispose(),De.dispose(),Tt.dispose(),ut.dispose(),q.dispose(),te.dispose(),et.dispose(),wt.dispose(),Pe.dispose(),At.dispose(),dt.dispose(),dt.removeEventListener("sessionstart",Q),dt.removeEventListener("sessionend",ue),Zt.stop()};function Mt(Fe){Fe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Wt(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const Fe=He.autoReset,Dt=G.enabled,Qe=G.autoUpdate,yt=G.needsUpdate,ht=G.type;Rt(),He.autoReset=Fe,G.enabled=Dt,G.autoUpdate=Qe,G.needsUpdate=yt,G.type=ht}function zt(Fe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Fe.statusMessage)}function Sn(Fe){const Dt=Fe.target;Dt.removeEventListener("dispose",Sn),On(Dt)}function On(Fe){Er(Fe),ut.remove(Fe)}function Er(Fe){const Dt=ut.get(Fe).programs;Dt!==void 0&&(Dt.forEach(function(Qe){At.releaseProgram(Qe)}),Fe.isShaderMaterial&&At.releaseShaderCache(Fe))}this.renderBufferDirect=function(Fe,Dt,Qe,yt,ht,Nt){Dt===null&&(Dt=Ye);const yn=ht.isMesh&&ht.matrixWorld.determinant()<0,un=gn(Fe,Dt,Qe,yt,ht);je.setMaterial(yt,yn);let Dn=Qe.index,nr=1;if(yt.wireframe===!0){if(Dn=Ve.getWireframeAttribute(Qe),Dn===void 0)return;nr=2}const bn=Qe.drawRange,Hn=Qe.attributes.position;let Fn=bn.start*nr,yr=(bn.start+bn.count)*nr;Nt!==null&&(Fn=Math.max(Fn,Nt.start*nr),yr=Math.min(yr,(Nt.start+Nt.count)*nr)),Dn!==null?(Fn=Math.max(Fn,0),yr=Math.min(yr,Dn.count)):Hn!=null&&(Fn=Math.max(Fn,0),yr=Math.min(yr,Hn.count));const Yr=yr-Fn;if(Yr<0||Yr===1/0)return;wt.setup(ht,yt,un,Qe,Dn);let Mr,Br=Le;if(Dn!==null&&(Mr=ye.get(Dn),Br=we,Br.setIndex(Mr)),ht.isMesh)yt.wireframe===!0?(je.setLineWidth(yt.wireframeLinewidth*he()),Br.setMode(le.LINES)):Br.setMode(le.TRIANGLES);else if(ht.isLine){let ar=yt.linewidth;ar===void 0&&(ar=1),je.setLineWidth(ar*he()),ht.isLineSegments?Br.setMode(le.LINES):ht.isLineLoop?Br.setMode(le.LINE_LOOP):Br.setMode(le.LINE_STRIP)}else ht.isPoints?Br.setMode(le.POINTS):ht.isSprite&&Br.setMode(le.TRIANGLES);if(ht.isBatchedMesh)if(ht._multiDrawInstances!==null)Br.renderMultiDrawInstances(ht._multiDrawStarts,ht._multiDrawCounts,ht._multiDrawCount,ht._multiDrawInstances);else if(Ue.get("WEBGL_multi_draw"))Br.renderMultiDraw(ht._multiDrawStarts,ht._multiDrawCounts,ht._multiDrawCount);else{const ar=ht._multiDrawStarts,Pi=ht._multiDrawCounts,zr=ht._multiDrawCount,Ns=Dn?ye.get(Dn).bytesPerElement:1,ns=ut.get(yt).currentProgram.getUniforms();for(let Pr=0;Pr<zr;Pr++)ns.setValue(le,"_gl_DrawID",Pr),Br.render(ar[Pr]/Ns,Pi[Pr])}else if(ht.isInstancedMesh)Br.renderInstances(Fn,Yr,ht.count);else if(Qe.isInstancedBufferGeometry){const ar=Qe._maxInstanceCount!==void 0?Qe._maxInstanceCount:1/0,Pi=Math.min(Qe.instanceCount,ar);Br.renderInstances(Fn,Yr,Pi)}else Br.render(Fn,Yr)};function Qn(Fe,Dt,Qe){Fe.transparent===!0&&Fe.side===Ru&&Fe.forceSinglePass===!1?(Fe.side=wl,Fe.needsUpdate=!0,ct(Fe,Dt,Qe),Fe.side=Ud,Fe.needsUpdate=!0,ct(Fe,Dt,Qe),Fe.side=Ru):ct(Fe,Dt,Qe)}this.compile=function(Fe,Dt,Qe=null){Qe===null&&(Qe=Fe),g=Tt.get(Qe),g.init(Dt),_.push(g),Qe.traverseVisible(function(ht){ht.isLight&&ht.layers.test(Dt.layers)&&(g.pushLight(ht),ht.castShadow&&g.pushShadow(ht))}),Fe!==Qe&&Fe.traverseVisible(function(ht){ht.isLight&&ht.layers.test(Dt.layers)&&(g.pushLight(ht),ht.castShadow&&g.pushShadow(ht))}),g.setupLights();const yt=new Set;return Fe.traverse(function(ht){if(!(ht.isMesh||ht.isPoints||ht.isLine||ht.isSprite))return;const Nt=ht.material;if(Nt)if(Array.isArray(Nt))for(let yn=0;yn<Nt.length;yn++){const un=Nt[yn];Qn(un,Qe,ht),yt.add(un)}else Qn(Nt,Qe,ht),yt.add(Nt)}),_.pop(),g=null,yt},this.compileAsync=function(Fe,Dt,Qe=null){const yt=this.compile(Fe,Dt,Qe);return new Promise(ht=>{function Nt(){if(yt.forEach(function(yn){ut.get(yn).currentProgram.isReady()&&yt.delete(yn)}),yt.size===0){ht(Fe);return}setTimeout(Nt,10)}Ue.get("KHR_parallel_shader_compile")!==null?Nt():setTimeout(Nt,10)})};let Xr=null;function Yn(Fe){Xr&&Xr(Fe)}function Q(){Zt.stop()}function ue(){Zt.start()}const Zt=new mhe;Zt.setAnimationLoop(Yn),typeof self<"u"&&Zt.setContext(self),this.setAnimationLoop=function(Fe){Xr=Fe,dt.setAnimationLoop(Fe),Fe===null?Zt.stop():Zt.start()},dt.addEventListener("sessionstart",Q),dt.addEventListener("sessionend",ue),this.render=function(Fe,Dt){if(Dt!==void 0&&Dt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;if(Fe.matrixWorldAutoUpdate===!0&&Fe.updateMatrixWorld(),Dt.parent===null&&Dt.matrixWorldAutoUpdate===!0&&Dt.updateMatrixWorld(),dt.enabled===!0&&dt.isPresenting===!0&&(dt.cameraAutoUpdate===!0&&dt.updateCamera(Dt),Dt=dt.getCamera()),Fe.isScene===!0&&Fe.onBeforeRender(b,Fe,Dt,T),g=Tt.get(Fe,_.length),g.init(Dt),_.push(g),ke.multiplyMatrices(Dt.projectionMatrix,Dt.matrixWorldInverse),ae.setFromProjectionMatrix(ke),de=this.localClippingEnabled,pe=ot.init(this.clippingPlanes,de),v=De.get(Fe,y.length),v.init(),y.push(v),dt.enabled===!0&&dt.isPresenting===!0){const Nt=b.xr.getDepthSensingMesh();Nt!==null&&Ee(Nt,Dt,-1/0,b.sortObjects)}Ee(Fe,Dt,0,b.sortObjects),v.finish(),b.sortObjects===!0&&v.sort(B,$),Y=dt.enabled===!1||dt.isPresenting===!1||dt.hasDepthSensing()===!1,Y&&_e.addToRenderList(v,Fe),this.info.render.frame++,pe===!0&&ot.beginShadows();const Qe=g.state.shadowsArray;G.render(Qe,Fe,Dt),pe===!0&&ot.endShadows(),this.info.autoReset===!0&&this.info.reset();const yt=v.opaque,ht=v.transmissive;if(g.setupLights(),Dt.isArrayCamera){const Nt=Dt.cameras;if(ht.length>0)for(let yn=0,un=Nt.length;yn<un;yn++){const Dn=Nt[yn];Et(yt,ht,Fe,Dn)}Y&&_e.render(Fe);for(let yn=0,un=Nt.length;yn<un;yn++){const Dn=Nt[yn];ce(v,Fe,Dn,Dn.viewport)}}else ht.length>0&&Et(yt,ht,Fe,Dt),Y&&_e.render(Fe),ce(v,Fe,Dt);T!==null&&(ge.updateMultisampleRenderTarget(T),ge.updateRenderTargetMipmap(T)),Fe.isScene===!0&&Fe.onAfterRender(b,Fe,Dt),wt.resetDefaultState(),C=-1,E=null,_.pop(),_.length>0?(g=_[_.length-1],pe===!0&&ot.setGlobalState(b.clippingPlanes,g.state.camera)):g=null,y.pop(),y.length>0?v=y[y.length-1]:v=null};function Ee(Fe,Dt,Qe,yt){if(Fe.visible===!1)return;if(Fe.layers.test(Dt.layers)){if(Fe.isGroup)Qe=Fe.renderOrder;else if(Fe.isLOD)Fe.autoUpdate===!0&&Fe.update(Dt);else if(Fe.isLight)g.pushLight(Fe),Fe.castShadow&&g.pushShadow(Fe);else if(Fe.isSprite){if(!Fe.frustumCulled||ae.intersectsSprite(Fe)){yt&&Xe.setFromMatrixPosition(Fe.matrixWorld).applyMatrix4(ke);const yn=et.update(Fe),un=Fe.material;un.visible&&v.push(Fe,yn,un,Qe,Xe.z,null)}}else if((Fe.isMesh||Fe.isLine||Fe.isPoints)&&(!Fe.frustumCulled||ae.intersectsObject(Fe))){const yn=et.update(Fe),un=Fe.material;if(yt&&(Fe.boundingSphere!==void 0?(Fe.boundingSphere===null&&Fe.computeBoundingSphere(),Xe.copy(Fe.boundingSphere.center)):(yn.boundingSphere===null&&yn.computeBoundingSphere(),Xe.copy(yn.boundingSphere.center)),Xe.applyMatrix4(Fe.matrixWorld).applyMatrix4(ke)),Array.isArray(un)){const Dn=yn.groups;for(let nr=0,bn=Dn.length;nr<bn;nr++){const Hn=Dn[nr],Fn=un[Hn.materialIndex];Fn&&Fn.visible&&v.push(Fe,yn,Fn,Qe,Xe.z,Hn)}}else un.visible&&v.push(Fe,yn,un,Qe,Xe.z,null)}}const Nt=Fe.children;for(let yn=0,un=Nt.length;yn<un;yn++)Ee(Nt[yn],Dt,Qe,yt)}function ce(Fe,Dt,Qe,yt){const ht=Fe.opaque,Nt=Fe.transmissive,yn=Fe.transparent;g.setupLightsView(Qe),pe===!0&&ot.setGlobalState(b.clippingPlanes,Qe),yt&&je.viewport(I.copy(yt)),ht.length>0&&Ct(ht,Dt,Qe),Nt.length>0&&Ct(Nt,Dt,Qe),yn.length>0&&Ct(yn,Dt,Qe),je.buffers.depth.setTest(!0),je.buffers.depth.setMask(!0),je.buffers.color.setMask(!0),je.setPolygonOffset(!1)}function Et(Fe,Dt,Qe,yt){if((Qe.isScene===!0?Qe.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[yt.id]===void 0&&(g.state.transmissionRenderTarget[yt.id]=new im(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")||Ue.has("EXT_color_buffer_float")?fb:zd,minFilter:F0,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ii.workingColorSpace}));const Nt=g.state.transmissionRenderTarget[yt.id],yn=yt.viewport||I;Nt.setSize(yn.z,yn.w);const un=b.getRenderTarget();b.setRenderTarget(Nt),b.getClearColor(N),F=b.getClearAlpha(),F<1&&b.setClearColor(16777215,.5),b.clear(),Y&&_e.render(Qe);const Dn=b.toneMapping;b.toneMapping=Pp;const nr=yt.viewport;if(yt.viewport!==void 0&&(yt.viewport=void 0),g.setupLightsView(yt),pe===!0&&ot.setGlobalState(b.clippingPlanes,yt),Ct(Fe,Qe,yt),ge.updateMultisampleRenderTarget(Nt),ge.updateRenderTargetMipmap(Nt),Ue.has("WEBGL_multisampled_render_to_texture")===!1){let bn=!1;for(let Hn=0,Fn=Dt.length;Hn<Fn;Hn++){const yr=Dt[Hn],Yr=yr.object,Mr=yr.geometry,Br=yr.material,ar=yr.group;if(Br.side===Ru&&Yr.layers.test(yt.layers)){const Pi=Br.side;Br.side=wl,Br.needsUpdate=!0,Ht(Yr,Qe,yt,Mr,Br,ar),Br.side=Pi,Br.needsUpdate=!0,bn=!0}}bn===!0&&(ge.updateMultisampleRenderTarget(Nt),ge.updateRenderTargetMipmap(Nt))}b.setRenderTarget(un),b.setClearColor(N,F),nr!==void 0&&(yt.viewport=nr),b.toneMapping=Dn}function Ct(Fe,Dt,Qe){const yt=Dt.isScene===!0?Dt.overrideMaterial:null;for(let ht=0,Nt=Fe.length;ht<Nt;ht++){const yn=Fe[ht],un=yn.object,Dn=yn.geometry,nr=yt===null?yn.material:yt,bn=yn.group;un.layers.test(Qe.layers)&&Ht(un,Dt,Qe,Dn,nr,bn)}}function Ht(Fe,Dt,Qe,yt,ht,Nt){Fe.onBeforeRender(b,Dt,Qe,yt,ht,Nt),Fe.modelViewMatrix.multiplyMatrices(Qe.matrixWorldInverse,Fe.matrixWorld),Fe.normalMatrix.getNormalMatrix(Fe.modelViewMatrix),ht.onBeforeRender(b,Dt,Qe,yt,Fe,Nt),ht.transparent===!0&&ht.side===Ru&&ht.forceSinglePass===!1?(ht.side=wl,ht.needsUpdate=!0,b.renderBufferDirect(Qe,Dt,yt,ht,Fe,Nt),ht.side=Ud,ht.needsUpdate=!0,b.renderBufferDirect(Qe,Dt,yt,ht,Fe,Nt),ht.side=Ru):b.renderBufferDirect(Qe,Dt,yt,ht,Fe,Nt),Fe.onAfterRender(b,Dt,Qe,yt,ht,Nt)}function ct(Fe,Dt,Qe){Dt.isScene!==!0&&(Dt=Ye);const yt=ut.get(Fe),ht=g.state.lights,Nt=g.state.shadowsArray,yn=ht.state.version,un=At.getParameters(Fe,ht.state,Nt,Dt,Qe),Dn=At.getProgramCacheKey(un);let nr=yt.programs;yt.environment=Fe.isMeshStandardMaterial?Dt.environment:null,yt.fog=Dt.fog,yt.envMap=(Fe.isMeshStandardMaterial?te:q).get(Fe.envMap||yt.environment),yt.envMapRotation=yt.environment!==null&&Fe.envMap===null?Dt.environmentRotation:Fe.envMapRotation,nr===void 0&&(Fe.addEventListener("dispose",Sn),nr=new Map,yt.programs=nr);let bn=nr.get(Dn);if(bn!==void 0){if(yt.currentProgram===bn&&yt.lightsStateVersion===yn)return rn(Fe,un),bn}else un.uniforms=At.getUniforms(Fe),Fe.onBeforeCompile(un,b),bn=At.acquireProgram(un,Dn),nr.set(Dn,bn),yt.uniforms=un.uniforms;const Hn=yt.uniforms;return(!Fe.isShaderMaterial&&!Fe.isRawShaderMaterial||Fe.clipping===!0)&&(Hn.clippingPlanes=ot.uniform),rn(Fe,un),yt.needsLights=rt(Fe),yt.lightsStateVersion=yn,yt.needsLights&&(Hn.ambientLightColor.value=ht.state.ambient,Hn.lightProbe.value=ht.state.probe,Hn.directionalLights.value=ht.state.directional,Hn.directionalLightShadows.value=ht.state.directionalShadow,Hn.spotLights.value=ht.state.spot,Hn.spotLightShadows.value=ht.state.spotShadow,Hn.rectAreaLights.value=ht.state.rectArea,Hn.ltc_1.value=ht.state.rectAreaLTC1,Hn.ltc_2.value=ht.state.rectAreaLTC2,Hn.pointLights.value=ht.state.point,Hn.pointLightShadows.value=ht.state.pointShadow,Hn.hemisphereLights.value=ht.state.hemi,Hn.directionalShadowMap.value=ht.state.directionalShadowMap,Hn.directionalShadowMatrix.value=ht.state.directionalShadowMatrix,Hn.spotShadowMap.value=ht.state.spotShadowMap,Hn.spotLightMatrix.value=ht.state.spotLightMatrix,Hn.spotLightMap.value=ht.state.spotLightMap,Hn.pointShadowMap.value=ht.state.pointShadowMap,Hn.pointShadowMatrix.value=ht.state.pointShadowMatrix),yt.currentProgram=bn,yt.uniformsList=null,bn}function Ot(Fe){if(Fe.uniformsList===null){const Dt=Fe.currentProgram.getUniforms();Fe.uniformsList=YE.seqWithValue(Dt.seq,Fe.uniforms)}return Fe.uniformsList}function rn(Fe,Dt){const Qe=ut.get(Fe);Qe.outputColorSpace=Dt.outputColorSpace,Qe.batching=Dt.batching,Qe.batchingColor=Dt.batchingColor,Qe.instancing=Dt.instancing,Qe.instancingColor=Dt.instancingColor,Qe.instancingMorph=Dt.instancingMorph,Qe.skinning=Dt.skinning,Qe.morphTargets=Dt.morphTargets,Qe.morphNormals=Dt.morphNormals,Qe.morphColors=Dt.morphColors,Qe.morphTargetsCount=Dt.morphTargetsCount,Qe.numClippingPlanes=Dt.numClippingPlanes,Qe.numIntersection=Dt.numClipIntersection,Qe.vertexAlphas=Dt.vertexAlphas,Qe.vertexTangents=Dt.vertexTangents,Qe.toneMapping=Dt.toneMapping}function gn(Fe,Dt,Qe,yt,ht){Dt.isScene!==!0&&(Dt=Ye),ge.resetTextureUnits();const Nt=Dt.fog,yn=yt.isMeshStandardMaterial?Dt.environment:null,un=T===null?b.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:v_,Dn=(yt.isMeshStandardMaterial?te:q).get(yt.envMap||yn),nr=yt.vertexColors===!0&&!!Qe.attributes.color&&Qe.attributes.color.itemSize===4,bn=!!Qe.attributes.tangent&&(!!yt.normalMap||yt.anisotropy>0),Hn=!!Qe.morphAttributes.position,Fn=!!Qe.morphAttributes.normal,yr=!!Qe.morphAttributes.color;let Yr=Pp;yt.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(Yr=b.toneMapping);const Mr=Qe.morphAttributes.position||Qe.morphAttributes.normal||Qe.morphAttributes.color,Br=Mr!==void 0?Mr.length:0,ar=ut.get(yt),Pi=g.state.lights;if(pe===!0&&(de===!0||Fe!==E)){const Yi=Fe===E&&yt.id===C;ot.setState(yt,Fe,Yi)}let zr=!1;yt.version===ar.__version?(ar.needsLights&&ar.lightsStateVersion!==Pi.state.version||ar.outputColorSpace!==un||ht.isBatchedMesh&&ar.batching===!1||!ht.isBatchedMesh&&ar.batching===!0||ht.isBatchedMesh&&ar.batchingColor===!0&&ht.colorTexture===null||ht.isBatchedMesh&&ar.batchingColor===!1&&ht.colorTexture!==null||ht.isInstancedMesh&&ar.instancing===!1||!ht.isInstancedMesh&&ar.instancing===!0||ht.isSkinnedMesh&&ar.skinning===!1||!ht.isSkinnedMesh&&ar.skinning===!0||ht.isInstancedMesh&&ar.instancingColor===!0&&ht.instanceColor===null||ht.isInstancedMesh&&ar.instancingColor===!1&&ht.instanceColor!==null||ht.isInstancedMesh&&ar.instancingMorph===!0&&ht.morphTexture===null||ht.isInstancedMesh&&ar.instancingMorph===!1&&ht.morphTexture!==null||ar.envMap!==Dn||yt.fog===!0&&ar.fog!==Nt||ar.numClippingPlanes!==void 0&&(ar.numClippingPlanes!==ot.numPlanes||ar.numIntersection!==ot.numIntersection)||ar.vertexAlphas!==nr||ar.vertexTangents!==bn||ar.morphTargets!==Hn||ar.morphNormals!==Fn||ar.morphColors!==yr||ar.toneMapping!==Yr||ar.morphTargetsCount!==Br)&&(zr=!0):(zr=!0,ar.__version=yt.version);let Ns=ar.currentProgram;zr===!0&&(Ns=ct(yt,Dt,ht));let ns=!1,Pr=!1,nl=!1;const Ri=Ns.getUniforms(),rs=ar.uniforms;if(je.useProgram(Ns.program)&&(ns=!0,Pr=!0,nl=!0),yt.id!==C&&(C=yt.id,Pr=!0),ns||E!==Fe){je.buffers.depth.getReversed()?(me.copy(Fe.projectionMatrix),Fmt(me),Umt(me),Ri.setValue(le,"projectionMatrix",me)):Ri.setValue(le,"projectionMatrix",Fe.projectionMatrix),Ri.setValue(le,"viewMatrix",Fe.matrixWorldInverse);const Ji=Ri.map.cameraPosition;Ji!==void 0&&Ji.setValue(le,Be.setFromMatrixPosition(Fe.matrixWorld)),Ze.logarithmicDepthBuffer&&Ri.setValue(le,"logDepthBufFC",2/(Math.log(Fe.far+1)/Math.LN2)),(yt.isMeshPhongMaterial||yt.isMeshToonMaterial||yt.isMeshLambertMaterial||yt.isMeshBasicMaterial||yt.isMeshStandardMaterial||yt.isShaderMaterial)&&Ri.setValue(le,"isOrthographic",Fe.isOrthographicCamera===!0),E!==Fe&&(E=Fe,Pr=!0,nl=!0)}if(ht.isSkinnedMesh){Ri.setOptional(le,ht,"bindMatrix"),Ri.setOptional(le,ht,"bindMatrixInverse");const Yi=ht.skeleton;Yi&&(Yi.boneTexture===null&&Yi.computeBoneTexture(),Ri.setValue(le,"boneTexture",Yi.boneTexture,ge))}ht.isBatchedMesh&&(Ri.setOptional(le,ht,"batchingTexture"),Ri.setValue(le,"batchingTexture",ht._matricesTexture,ge),Ri.setOptional(le,ht,"batchingIdTexture"),Ri.setValue(le,"batchingIdTexture",ht._indirectTexture,ge),Ri.setOptional(le,ht,"batchingColorTexture"),ht._colorsTexture!==null&&Ri.setValue(le,"batchingColorTexture",ht._colorsTexture,ge));const Ea=Qe.morphAttributes;if((Ea.position!==void 0||Ea.normal!==void 0||Ea.color!==void 0)&&ve.update(ht,Qe,Ns),(Pr||ar.receiveShadow!==ht.receiveShadow)&&(ar.receiveShadow=ht.receiveShadow,Ri.setValue(le,"receiveShadow",ht.receiveShadow)),yt.isMeshGouraudMaterial&&yt.envMap!==null&&(rs.envMap.value=Dn,rs.flipEnvMap.value=Dn.isCubeTexture&&Dn.isRenderTargetTexture===!1?-1:1),yt.isMeshStandardMaterial&&yt.envMap===null&&Dt.environment!==null&&(rs.envMapIntensity.value=Dt.environmentIntensity),Pr&&(Ri.setValue(le,"toneMappingExposure",b.toneMappingExposure),ar.needsLights&&Zn(rs,nl),Nt&&yt.fog===!0&&It.refreshFogUniforms(rs,Nt),It.refreshMaterialUniforms(rs,yt,U,H,g.state.transmissionRenderTarget[Fe.id]),YE.upload(le,Ot(ar),rs,ge)),yt.isShaderMaterial&&yt.uniformsNeedUpdate===!0&&(YE.upload(le,Ot(ar),rs,ge),yt.uniformsNeedUpdate=!1),yt.isSpriteMaterial&&Ri.setValue(le,"center",ht.center),Ri.setValue(le,"modelViewMatrix",ht.modelViewMatrix),Ri.setValue(le,"normalMatrix",ht.normalMatrix),Ri.setValue(le,"modelMatrix",ht.matrixWorld),yt.isShaderMaterial||yt.isRawShaderMaterial){const Yi=yt.uniformsGroups;for(let Ji=0,aa=Yi.length;Ji<aa;Ji++){const Eo=Yi[Ji];Pe.update(Eo,Ns),Pe.bind(Eo,Ns)}}return Ns}function Zn(Fe,Dt){Fe.ambientLightColor.needsUpdate=Dt,Fe.lightProbe.needsUpdate=Dt,Fe.directionalLights.needsUpdate=Dt,Fe.directionalLightShadows.needsUpdate=Dt,Fe.pointLights.needsUpdate=Dt,Fe.pointLightShadows.needsUpdate=Dt,Fe.spotLights.needsUpdate=Dt,Fe.spotLightShadows.needsUpdate=Dt,Fe.rectAreaLights.needsUpdate=Dt,Fe.hemisphereLights.needsUpdate=Dt}function rt(Fe){return Fe.isMeshLambertMaterial||Fe.isMeshToonMaterial||Fe.isMeshPhongMaterial||Fe.isMeshStandardMaterial||Fe.isShadowMaterial||Fe.isShaderMaterial&&Fe.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(Fe,Dt,Qe){ut.get(Fe.texture).__webglTexture=Dt,ut.get(Fe.depthTexture).__webglTexture=Qe;const yt=ut.get(Fe);yt.__hasExternalTextures=!0,yt.__autoAllocateDepthBuffer=Qe===void 0,yt.__autoAllocateDepthBuffer||Ue.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),yt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Fe,Dt){const Qe=ut.get(Fe);Qe.__webglFramebuffer=Dt,Qe.__useDefaultFramebuffer=Dt===void 0},this.setRenderTarget=function(Fe,Dt=0,Qe=0){T=Fe,w=Dt,A=Qe;let yt=!0,ht=null,Nt=!1,yn=!1;if(Fe){const Dn=ut.get(Fe);if(Dn.__useDefaultFramebuffer!==void 0)je.bindFramebuffer(le.FRAMEBUFFER,null),yt=!1;else if(Dn.__webglFramebuffer===void 0)ge.setupRenderTarget(Fe);else if(Dn.__hasExternalTextures)ge.rebindTextures(Fe,ut.get(Fe.texture).__webglTexture,ut.get(Fe.depthTexture).__webglTexture);else if(Fe.depthBuffer){const Hn=Fe.depthTexture;if(Dn.__boundDepthTexture!==Hn){if(Hn!==null&&ut.has(Hn)&&(Fe.width!==Hn.image.width||Fe.height!==Hn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ge.setupDepthRenderbuffer(Fe)}}const nr=Fe.texture;(nr.isData3DTexture||nr.isDataArrayTexture||nr.isCompressedArrayTexture)&&(yn=!0);const bn=ut.get(Fe).__webglFramebuffer;Fe.isWebGLCubeRenderTarget?(Array.isArray(bn[Dt])?ht=bn[Dt][Qe]:ht=bn[Dt],Nt=!0):Fe.samples>0&&ge.useMultisampledRTT(Fe)===!1?ht=ut.get(Fe).__webglMultisampledFramebuffer:Array.isArray(bn)?ht=bn[Qe]:ht=bn,I.copy(Fe.viewport),P.copy(Fe.scissor),L=Fe.scissorTest}else I.copy(ee).multiplyScalar(U).floor(),P.copy(re).multiplyScalar(U).floor(),L=ne;if(je.bindFramebuffer(le.FRAMEBUFFER,ht)&&yt&&je.drawBuffers(Fe,ht),je.viewport(I),je.scissor(P),je.setScissorTest(L),Nt){const Dn=ut.get(Fe.texture);le.framebufferTexture2D(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_CUBE_MAP_POSITIVE_X+Dt,Dn.__webglTexture,Qe)}else if(yn){const Dn=ut.get(Fe.texture),nr=Dt||0;le.framebufferTextureLayer(le.FRAMEBUFFER,le.COLOR_ATTACHMENT0,Dn.__webglTexture,Qe||0,nr)}C=-1},this.readRenderTargetPixels=function(Fe,Dt,Qe,yt,ht,Nt,yn){if(!(Fe&&Fe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let un=ut.get(Fe).__webglFramebuffer;if(Fe.isWebGLCubeRenderTarget&&yn!==void 0&&(un=un[yn]),un){je.bindFramebuffer(le.FRAMEBUFFER,un);try{const Dn=Fe.texture,nr=Dn.format,bn=Dn.type;if(!Ze.textureFormatReadable(nr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ze.textureTypeReadable(bn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Dt>=0&&Dt<=Fe.width-yt&&Qe>=0&&Qe<=Fe.height-ht&&le.readPixels(Dt,Qe,yt,ht,Ie.convert(nr),Ie.convert(bn),Nt)}finally{const Dn=T!==null?ut.get(T).__webglFramebuffer:null;je.bindFramebuffer(le.FRAMEBUFFER,Dn)}}},this.readRenderTargetPixelsAsync=async function(Fe,Dt,Qe,yt,ht,Nt,yn){if(!(Fe&&Fe.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let un=ut.get(Fe).__webglFramebuffer;if(Fe.isWebGLCubeRenderTarget&&yn!==void 0&&(un=un[yn]),un){const Dn=Fe.texture,nr=Dn.format,bn=Dn.type;if(!Ze.textureFormatReadable(nr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(bn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Dt>=0&&Dt<=Fe.width-yt&&Qe>=0&&Qe<=Fe.height-ht){je.bindFramebuffer(le.FRAMEBUFFER,un);const Hn=le.createBuffer();le.bindBuffer(le.PIXEL_PACK_BUFFER,Hn),le.bufferData(le.PIXEL_PACK_BUFFER,Nt.byteLength,le.STREAM_READ),le.readPixels(Dt,Qe,yt,ht,Ie.convert(nr),Ie.convert(bn),0);const Fn=T!==null?ut.get(T).__webglFramebuffer:null;je.bindFramebuffer(le.FRAMEBUFFER,Fn);const yr=le.fenceSync(le.SYNC_GPU_COMMANDS_COMPLETE,0);return le.flush(),await Bmt(le,yr,4),le.bindBuffer(le.PIXEL_PACK_BUFFER,Hn),le.getBufferSubData(le.PIXEL_PACK_BUFFER,0,Nt),le.deleteBuffer(Hn),le.deleteSync(yr),Nt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(Fe,Dt=null,Qe=0){Fe.isTexture!==!0&&(My("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Dt=arguments[0]||null,Fe=arguments[1]);const yt=Math.pow(2,-Qe),ht=Math.floor(Fe.image.width*yt),Nt=Math.floor(Fe.image.height*yt),yn=Dt!==null?Dt.x:0,un=Dt!==null?Dt.y:0;ge.setTexture2D(Fe,0),le.copyTexSubImage2D(le.TEXTURE_2D,Qe,0,0,yn,un,ht,Nt),je.unbindTexture()};const fr=le.createFramebuffer(),mt=le.createFramebuffer();this.copyTextureToTexture=function(Fe,Dt,Qe=null,yt=null,ht=0,Nt=null){Fe.isTexture!==!0&&(My("WebGLRenderer: copyTextureToTexture function signature has changed."),yt=arguments[0]||null,Fe=arguments[1],Dt=arguments[2],Nt=arguments[3]||0,Qe=null),Nt===null&&(ht!==0?(My("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Nt=ht,ht=0):Nt=0);let yn,un,Dn,nr,bn,Hn,Fn,yr,Yr;const Mr=Fe.isCompressedTexture?Fe.mipmaps[Nt]:Fe.image;if(Qe!==null)yn=Qe.max.x-Qe.min.x,un=Qe.max.y-Qe.min.y,Dn=Qe.isBox3?Qe.max.z-Qe.min.z:1,nr=Qe.min.x,bn=Qe.min.y,Hn=Qe.isBox3?Qe.min.z:0;else{const Ea=Math.pow(2,-ht);yn=Math.floor(Mr.width*Ea),un=Math.floor(Mr.height*Ea),Fe.isDataArrayTexture?Dn=Mr.depth:Fe.isData3DTexture?Dn=Math.floor(Mr.depth*Ea):Dn=1,nr=0,bn=0,Hn=0}yt!==null?(Fn=yt.x,yr=yt.y,Yr=yt.z):(Fn=0,yr=0,Yr=0);const Br=Ie.convert(Dt.format),ar=Ie.convert(Dt.type);let Pi;Dt.isData3DTexture?(ge.setTexture3D(Dt,0),Pi=le.TEXTURE_3D):Dt.isDataArrayTexture||Dt.isCompressedArrayTexture?(ge.setTexture2DArray(Dt,0),Pi=le.TEXTURE_2D_ARRAY):(ge.setTexture2D(Dt,0),Pi=le.TEXTURE_2D),le.pixelStorei(le.UNPACK_FLIP_Y_WEBGL,Dt.flipY),le.pixelStorei(le.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Dt.premultiplyAlpha),le.pixelStorei(le.UNPACK_ALIGNMENT,Dt.unpackAlignment);const zr=le.getParameter(le.UNPACK_ROW_LENGTH),Ns=le.getParameter(le.UNPACK_IMAGE_HEIGHT),ns=le.getParameter(le.UNPACK_SKIP_PIXELS),Pr=le.getParameter(le.UNPACK_SKIP_ROWS),nl=le.getParameter(le.UNPACK_SKIP_IMAGES);le.pixelStorei(le.UNPACK_ROW_LENGTH,Mr.width),le.pixelStorei(le.UNPACK_IMAGE_HEIGHT,Mr.height),le.pixelStorei(le.UNPACK_SKIP_PIXELS,nr),le.pixelStorei(le.UNPACK_SKIP_ROWS,bn),le.pixelStorei(le.UNPACK_SKIP_IMAGES,Hn);const Ri=Fe.isDataArrayTexture||Fe.isData3DTexture,rs=Dt.isDataArrayTexture||Dt.isData3DTexture;if(Fe.isDepthTexture){const Ea=ut.get(Fe),Yi=ut.get(Dt),Ji=ut.get(Ea.__renderTarget),aa=ut.get(Yi.__renderTarget);je.bindFramebuffer(le.READ_FRAMEBUFFER,Ji.__webglFramebuffer),je.bindFramebuffer(le.DRAW_FRAMEBUFFER,aa.__webglFramebuffer);for(let Eo=0;Eo<Dn;Eo++)Ri&&(le.framebufferTextureLayer(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,ut.get(Fe).__webglTexture,ht,Hn+Eo),le.framebufferTextureLayer(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,ut.get(Dt).__webglTexture,Nt,Yr+Eo)),le.blitFramebuffer(nr,bn,yn,un,Fn,yr,yn,un,le.DEPTH_BUFFER_BIT,le.NEAREST);je.bindFramebuffer(le.READ_FRAMEBUFFER,null),je.bindFramebuffer(le.DRAW_FRAMEBUFFER,null)}else if(ht!==0||Fe.isRenderTargetTexture||ut.has(Fe)){const Ea=ut.get(Fe),Yi=ut.get(Dt);je.bindFramebuffer(le.READ_FRAMEBUFFER,fr),je.bindFramebuffer(le.DRAW_FRAMEBUFFER,mt);for(let Ji=0;Ji<Dn;Ji++)Ri?le.framebufferTextureLayer(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,Ea.__webglTexture,ht,Hn+Ji):le.framebufferTexture2D(le.READ_FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,Ea.__webglTexture,ht),rs?le.framebufferTextureLayer(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,Yi.__webglTexture,Nt,Yr+Ji):le.framebufferTexture2D(le.DRAW_FRAMEBUFFER,le.COLOR_ATTACHMENT0,le.TEXTURE_2D,Yi.__webglTexture,Nt),ht!==0?le.blitFramebuffer(nr,bn,yn,un,Fn,yr,yn,un,le.COLOR_BUFFER_BIT,le.NEAREST):rs?le.copyTexSubImage3D(Pi,Nt,Fn,yr,Yr+Ji,nr,bn,yn,un):le.copyTexSubImage2D(Pi,Nt,Fn,yr,nr,bn,yn,un);je.bindFramebuffer(le.READ_FRAMEBUFFER,null),je.bindFramebuffer(le.DRAW_FRAMEBUFFER,null)}else rs?Fe.isDataTexture||Fe.isData3DTexture?le.texSubImage3D(Pi,Nt,Fn,yr,Yr,yn,un,Dn,Br,ar,Mr.data):Dt.isCompressedArrayTexture?le.compressedTexSubImage3D(Pi,Nt,Fn,yr,Yr,yn,un,Dn,Br,Mr.data):le.texSubImage3D(Pi,Nt,Fn,yr,Yr,yn,un,Dn,Br,ar,Mr):Fe.isDataTexture?le.texSubImage2D(le.TEXTURE_2D,Nt,Fn,yr,yn,un,Br,ar,Mr.data):Fe.isCompressedTexture?le.compressedTexSubImage2D(le.TEXTURE_2D,Nt,Fn,yr,Mr.width,Mr.height,Br,Mr.data):le.texSubImage2D(le.TEXTURE_2D,Nt,Fn,yr,yn,un,Br,ar,Mr);le.pixelStorei(le.UNPACK_ROW_LENGTH,zr),le.pixelStorei(le.UNPACK_IMAGE_HEIGHT,Ns),le.pixelStorei(le.UNPACK_SKIP_PIXELS,ns),le.pixelStorei(le.UNPACK_SKIP_ROWS,Pr),le.pixelStorei(le.UNPACK_SKIP_IMAGES,nl),Nt===0&&Dt.generateMipmaps&&le.generateMipmap(Pi),je.unbindTexture()},this.copyTextureToTexture3D=function(Fe,Dt,Qe=null,yt=null,ht=0){return Fe.isTexture!==!0&&(My("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Qe=arguments[0]||null,yt=arguments[1]||null,Fe=arguments[2],Dt=arguments[3],ht=arguments[4]||0),My('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Fe,Dt,Qe,yt,ht)},this.initRenderTarget=function(Fe){ut.get(Fe).__webglFramebuffer===void 0&&ge.setupRenderTarget(Fe)},this.initTexture=function(Fe){Fe.isCubeTexture?ge.setTextureCube(Fe,0):Fe.isData3DTexture?ge.setTexture3D(Fe,0):Fe.isDataArrayTexture||Fe.isCompressedArrayTexture?ge.setTexture2DArray(Fe,0):ge.setTexture2D(Fe,0),je.unbindTexture()},this.resetState=function(){w=0,A=0,T=null,je.reset(),wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return kf}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Ii._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ii._getUnpackColorSpace()}}const S0=class S0{constructor(e,t){let r,i;this.promise=new Promise((u,c)=>{r=u,i=c});const a=r.bind(this),s=i.bind(this),o=(...u)=>{a(...u)},l=u=>{s(u)};e(o.bind(this),l.bind(this)),this.abortHandler=t,this.id=S0.idGen++}then(e){return new S0((t,r)=>{this.promise=this.promise.then((...i)=>{const a=e(...i);a instanceof Promise||a instanceof S0?a.then((...s)=>{t(...s)}):t(a)}).catch(i=>{r(i)})},this.abortHandler)}catch(e){return new S0(t=>{this.promise=this.promise.then((...r)=>{t(...r)}).catch(e)},this.abortHandler)}abort(e){this.abortHandler&&this.abortHandler(e)}};En(S0,"idGen",0);let uw=S0;class QE extends Error{constructor(e){super(e)}}(function(){const n=new Float32Array(1),e=new Int32Array(n.buffer);return function(t){n[0]=t;const r=e[0];let i=r>>16&32768,a=r>>12&2047;const s=r>>23&255;return s<103?i:s>142?(i|=31744,i|=(s==255?0:1)&&r&8388607,i):s<113?(a|=2048,i|=(a>>114-s)+(a>>113-s&1),i):(i|=s-112<<10|a>>1,i+=a&1,i)}})();const hL=function(){const n=new Float32Array(1),e=new Int32Array(n.buffer);return function(t){return n[0]=t,e[0]}}(),t_t=function(n,e){return n[e]+(n[e+1]<<8)+(n[e+2]<<16)+(n[e+3]<<24)},uU=function(n,e,t=!0,r){const i=new AbortController,a=i.signal;let s=!1;const o=l=>{i.abort(l),s=!0};return new uw((l,u)=>{const c={signal:a};r&&(c.headers=r),fetch(n,c).then(async d=>{if(!d.ok){const g=await d.text();u(new Error(`Fetch failed: ${d.status} ${d.statusText} ${g}`));return}const f=d.body.getReader();let h=0,p=d.headers.get("Content-Length"),m=p?parseInt(p):void 0;const v=[];for(;!s;)try{const{value:g,done:y}=await f.read();if(y){if(e&&e(100,"100%",g,m),t){const x=new Blob(v).arrayBuffer();l(x)}else l();break}h+=g.length;let _,b;m!==void 0&&(_=h/m*100,b=`${_.toFixed(2)}%`),t&&v.push(g),e&&e(_,b,g,m)}catch(g){u(g);return}}).catch(d=>{u(new QE(d))})},o)},js=function(n,e,t){return Math.max(Math.min(n,t),e)},hy=function(){return performance.now()/1e3},Iy=n=>{if(n.geometry&&(n.geometry.dispose(),n.geometry=null),n.material&&(n.material.dispose(),n.material=null),n.children)for(let e of n.children)Iy(e)},Rc=(n,e)=>new Promise(t=>{window.setTimeout(()=>{t(n())},e?1:50)}),g1=(n=0)=>{switch(n){case 1:return 9;case 2:return 24}return 0},cU=()=>{let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}},pL=n=>{let e,t;return n||(n=()=>{}),{promise:new uw((i,a)=>{e=i,t=a},n),resolve:e,reject:t}};class n_t{constructor(e,t,r){this.major=e,this.minor=t,this.patch=r}toString(){return`${this.major}_${this.minor}_${this.patch}`}}function dU(){const n=navigator.userAgent;return n.indexOf("iPhone")>0||n.indexOf("iPad")>0}function She(){if(dU()){const n=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return new n_t(parseInt(n[1]||0,10),parseInt(n[2]||0,10),parseInt(n[3]||0,10))}else return null}const r_t=14,Lx=class Lx{constructor(e=0){this.sphericalHarmonicsDegree=e,this.sphericalHarmonicsCount=g1(this.sphericalHarmonicsDegree),this.componentCount=this.sphericalHarmonicsCount+r_t,this.defaultSphericalHarmonics=new Array(this.sphericalHarmonicsCount).fill(0),this.splats=[],this.splatCount=0}static createSplat(e=0){const t=[0,0,0,1,1,1,1,0,0,0,0,0,0,0];let r=g1(e);for(let i=0;i<r;i++)t.push(0);return t}addSplat(e){this.splats.push(e),this.splatCount++}getSplat(e){return this.splats[e]}addDefaultSplat(){const e=Lx.createSplat(this.sphericalHarmonicsDegree);return this.addSplat(e),e}addSplatFromComonents(e,t,r,i,a,s,o,l,u,c,d,f,h,p,...m){const v=[e,t,r,i,a,s,o,l,u,c,d,f,h,p,...this.defaultSphericalHarmonics];for(let g=0;g<m.length&&g<this.sphericalHarmonicsCount;g++)v[g]=m[g];return this.addSplat(v),v}addSplatFromArray(e,t){const r=e.splats[t],i=Lx.createSplat(this.sphericalHarmonicsDegree);for(let a=0;a<this.componentCount&&a<r.length;a++)i[a]=r[a];this.addSplat(i)}};En(Lx,"OFFSET",{X:0,Y:1,Z:2,SCALE0:3,SCALE1:4,SCALE2:5,ROTATION0:6,ROTATION1:7,ROTATION2:8,ROTATION3:9,FDC0:10,FDC1:11,FDC2:12,OPACITY:13,FRC0:14,FRC1:15,FRC2:16,FRC3:17,FRC4:18,FRC5:19,FRC6:20,FRC7:21,FRC8:22,FRC9:23,FRC10:24,FRC11:25,FRC12:26,FRC13:27,FRC14:28,FRC15:29,FRC16:30,FRC17:31,FRC18:32,FRC19:33,FRC20:34,FRC21:35,FRC22:36,FRC23:37});let hr=Lx;class fi{}En(fi,"DefaultSplatSortDistanceMapPrecision",16),En(fi,"MemoryPageSize",65536),En(fi,"BytesPerFloat",4),En(fi,"BytesPerInt",4),En(fi,"MaxScenes",32),En(fi,"ProgressiveLoadSectionSize",262144),En(fi,"ProgressiveLoadSectionDelayDuration",15),En(fi,"SphericalHarmonics8BitCompressionRange",3);const i_t=fi.SphericalHarmonics8BitCompressionRange,Jh=i_t/2,ss=ow.toHalfFloat.bind(ow),fU=ow.fromHalfFloat.bind(ow),ga=(n,e,t=!1,r,i)=>{if(e===0)return n;if(e===1||e===2&&!t)return ow.fromHalfFloat(n);if(e===2)return hU(n,r,i)},Dx=(n,e,t)=>{n=js(n,e,t);const r=t-e;return js(Math.floor((n-e)/r*255),0,255)},hU=(n,e,t)=>{const r=t-e;return n/255*r+e},xhe=(n,e,t)=>Dx(fU(n,e,t)),a_t=(n,e,t)=>ss(hU(n,e,t)),Fi=(n,e,t,r=!1)=>t===0?n.getFloat32(e*4,!0):t===1||t===2&&!r?n.getUint16(e*2,!0):n.getUint8(e,!0),s_t=function(){const n=e=>e;return function(e,t,r,i=!1){if(t===r)return e;let a=n;return t===2&&i?r===1?a=a_t:r==0&&(a=hU):t===2||t===1?r===0?a=fU:r==2&&(i?a=xhe:a=n):t===0&&(r===1?a=ss:r==2&&(i?a=Dx:a=ss)),a(e)}}(),py=(n,e,t,r,i=0)=>{const a=new Uint8Array(n,e),s=new Uint8Array(t,r);for(let o=0;o<i;o++)s[o]=a[o]},en=class en{constructor(e,t=!0){En(this,"getSplatScaleAndRotation",function(){const e=new kr,t=new kr,r=new kr,i=new ft,a=new ft,s=new wa;return function(o,l,u,c,d){const f=this.globalSplatIndexToSectionMap[o],h=this.sections[f],p=o-h.splatCountOffset,m=h.bytesPerSplat*p+en.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,v=new DataView(this.bufferData,h.dataBase+m);a.set(ga(Fi(v,0,this.compressionLevel),this.compressionLevel),ga(Fi(v,1,this.compressionLevel),this.compressionLevel),ga(Fi(v,2,this.compressionLevel),this.compressionLevel)),d&&(d.x!==void 0&&(a.x=d.x),d.y!==void 0&&(a.y=d.y),d.z!==void 0&&(a.z=d.z)),s.set(ga(Fi(v,4,this.compressionLevel),this.compressionLevel),ga(Fi(v,5,this.compressionLevel),this.compressionLevel),ga(Fi(v,6,this.compressionLevel),this.compressionLevel),ga(Fi(v,3,this.compressionLevel),this.compressionLevel)),c?(e.makeScale(a.x,a.y,a.z),t.makeRotationFromQuaternion(s),r.copy(e).multiply(t).multiply(c),r.decompose(i,u,l)):(l.copy(a),u.copy(s))}}());En(this,"fillSplatScaleRotationArray",function(){const e=new kr,t=new kr,r=new kr,i=new ft,a=new wa,s=new ft,o=l=>{const u=l.w<0?-1:1;l.x*=u,l.y*=u,l.z*=u,l.w*=u};return function(l,u,c,d,f,h,p,m){const v=this.splatCount;d=d||0,f=f||v-1,h===void 0&&(h=d);const g=(y,_)=>(_===void 0&&(_=this.compressionLevel),s_t(y,_,p));for(let y=d;y<=f;y++){const _=this.globalSplatIndexToSectionMap[y],b=this.sections[_],x=y-b.splatCountOffset,w=b.bytesPerSplat*x+en.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,A=(y-d+h)*en.ScaleComponentCount,T=(y-d+h)*en.RotationComponentCount,C=new DataView(this.bufferData,b.dataBase+w),E=m&&m.x!==void 0?m.x:Fi(C,0,this.compressionLevel),I=m&&m.y!==void 0?m.y:Fi(C,1,this.compressionLevel),P=m&&m.z!==void 0?m.z:Fi(C,2,this.compressionLevel),L=Fi(C,3,this.compressionLevel),N=Fi(C,4,this.compressionLevel),F=Fi(C,5,this.compressionLevel),k=Fi(C,6,this.compressionLevel);i.set(ga(E,this.compressionLevel),ga(I,this.compressionLevel),ga(P,this.compressionLevel)),a.set(ga(N,this.compressionLevel),ga(F,this.compressionLevel),ga(k,this.compressionLevel),ga(L,this.compressionLevel)).normalize(),c&&(s.set(0,0,0),e.makeScale(i.x,i.y,i.z),t.makeRotationFromQuaternion(a),r.identity().premultiply(e).premultiply(t),r.premultiply(c),r.decompose(s,a,i),a.normalize()),o(a),l&&(l[A]=g(i.x,0),l[A+1]=g(i.y,0),l[A+2]=g(i.z,0)),u&&(u[T]=g(a.x,0),u[T+1]=g(a.y,0),u[T+2]=g(a.z,0),u[T+3]=g(a.w,0))}}}());En(this,"fillSphericalHarmonicsArray",function(){for(let N=0;N<15;N++)new ft;const e=new Rr,t=new kr,r=new ft,i=new ft,a=new wa,s=[],o=[],l=[],u=[],c=[],d=[],f=[],h=[],p=[],m=[],v=[],g=[],y=[],_=[],b=[],x=[],w=[],A=[],T=N=>N,C=(N,F,k,H)=>{N[0]=F,N[1]=k,N[2]=H},E=(N,F,k,H,U)=>{N[0]=Fi(F,H,U,!0),N[1]=Fi(F,H+k,U,!0),N[2]=Fi(F,H+k+k,U,!0)},I=(N,F)=>{F[0]=N[0],F[1]=N[1],F[2]=N[2]},P=(N,F,k,H)=>{F[k]=H(N[0]),F[k+1]=H(N[1]),F[k+2]=H(N[2])},L=(N,F,k,H,U)=>(F[0]=ga(N[0],k,!0,H,U),F[1]=ga(N[1],k,!0,H,U),F[2]=ga(N[2],k,!0,H,U),F);return function(N,F,k,H,U,B,$){const ee=this.splatCount;H=H||0,U=U||ee-1,B===void 0&&(B=H),k&&F>=1&&(t.copy(k),t.decompose(r,a,i),a.normalize(),t.makeRotationFromQuaternion(a),e.setFromMatrix4(t),C(s,e.elements[4],-e.elements[7],e.elements[1]),C(o,-e.elements[5],e.elements[8],-e.elements[2]),C(l,e.elements[3],-e.elements[6],e.elements[0]));const re=ae=>xhe(ae,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff),ne=ae=>Dx(ae,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff);for(let ae=H;ae<=U;ae++){const pe=this.globalSplatIndexToSectionMap[ae],de=this.sections[pe];F=Math.min(F,de.sphericalHarmonicsDegree);const me=g1(F),ke=ae-de.splatCountOffset,Be=de.bytesPerSplat*ke+en.CompressionLevels[this.compressionLevel].SphericalHarmonicsOffsetBytes,Xe=new DataView(this.bufferData,de.dataBase+Be),Ye=(ae-H+B)*me;let Y=k?0:this.compressionLevel,he=T;Y!==$&&(Y===1?$===0?he=fU:$==2&&(he=re):Y===0&&($===1?he=ss:$==2&&(he=ne)));const le=this.minSphericalHarmonicsCoeff,Ke=this.maxSphericalHarmonicsCoeff;F>=1&&(E(p,Xe,3,0,this.compressionLevel),E(m,Xe,3,1,this.compressionLevel),E(v,Xe,3,2,this.compressionLevel),k?(L(p,p,this.compressionLevel,le,Ke),L(m,m,this.compressionLevel,le,Ke),L(v,v,this.compressionLevel,le,Ke),en.rotateSphericalHarmonics3(p,m,v,s,o,l,_,b,x)):(I(p,_),I(m,b),I(v,x)),P(_,N,Ye,he),P(b,N,Ye+3,he),P(x,N,Ye+6,he),F>=2&&(E(p,Xe,5,9,this.compressionLevel),E(m,Xe,5,10,this.compressionLevel),E(v,Xe,5,11,this.compressionLevel),E(g,Xe,5,12,this.compressionLevel),E(y,Xe,5,13,this.compressionLevel),k?(L(p,p,this.compressionLevel,le,Ke),L(m,m,this.compressionLevel,le,Ke),L(v,v,this.compressionLevel,le,Ke),L(g,g,this.compressionLevel,le,Ke),L(y,y,this.compressionLevel,le,Ke),en.rotateSphericalHarmonics5(p,m,v,g,y,s,o,l,u,c,d,f,h,_,b,x,w,A)):(I(p,_),I(m,b),I(v,x),I(g,w),I(y,A)),P(_,N,Ye+9,he),P(b,N,Ye+12,he),P(x,N,Ye+15,he),P(w,N,Ye+18,he),P(A,N,Ye+21,he)))}}}());this.constructFromBuffer(e,t)}getSplatCount(){return this.splatCount}getMaxSplatCount(){return this.maxSplatCount}getMinSphericalHarmonicsDegree(){let e=0;for(let t=0;t<this.sections.length;t++){const r=this.sections[t];(t===0||r.sphericalHarmonicsDegree<e)&&(e=r.sphericalHarmonicsDegree)}return e}getBucketIndex(e,t){let r;const i=e.fullBucketCount*e.bucketSize;if(t<i)r=Math.floor(t/e.bucketSize);else{let a=i;r=e.fullBucketCount;let s=0;for(;a<e.splatCount;){let o=e.partiallyFilledBucketLengths[s];if(t>=a&&t<a+o)break;a+=o,r++,s++}}return r}getSplatCenter(e,t,r){const i=this.globalSplatIndexToSectionMap[e],a=this.sections[i],s=e-a.splatCountOffset,o=a.bytesPerSplat*s,l=new DataView(this.bufferData,a.dataBase+o),u=Fi(l,0,this.compressionLevel),c=Fi(l,1,this.compressionLevel),d=Fi(l,2,this.compressionLevel);if(this.compressionLevel>=1){const h=this.getBucketIndex(a,s)*en.BucketStorageSizeFloats,p=a.compressionScaleFactor,m=a.compressionScaleRange;t.x=(u-m)*p+a.bucketArray[h],t.y=(c-m)*p+a.bucketArray[h+1],t.z=(d-m)*p+a.bucketArray[h+2]}else t.x=u,t.y=c,t.z=d;r&&t.applyMatrix4(r)}getSplatColor(e,t){const r=this.globalSplatIndexToSectionMap[e],i=this.sections[r],a=e-i.splatCountOffset,s=i.bytesPerSplat*a+en.CompressionLevels[this.compressionLevel].ColorOffsetBytes,o=new Uint8Array(this.bufferData,i.dataBase+s,4);t.set(o[0],o[1],o[2],o[3])}fillSplatCenterArray(e,t,r,i,a){const s=this.splatCount;r=r||0,i=i||s-1,a===void 0&&(a=r);const o=new ft;for(let l=r;l<=i;l++){const u=this.globalSplatIndexToSectionMap[l],c=this.sections[u],d=l-c.splatCountOffset,f=(l-r+a)*en.CenterComponentCount,h=c.bytesPerSplat*d,p=new DataView(this.bufferData,c.dataBase+h),m=Fi(p,0,this.compressionLevel),v=Fi(p,1,this.compressionLevel),g=Fi(p,2,this.compressionLevel);if(this.compressionLevel>=1){const _=this.getBucketIndex(c,d)*en.BucketStorageSizeFloats,b=c.compressionScaleFactor,x=c.compressionScaleRange;o.x=(m-x)*b+c.bucketArray[_],o.y=(v-x)*b+c.bucketArray[_+1],o.z=(g-x)*b+c.bucketArray[_+2]}else o.x=m,o.y=v,o.z=g;t&&o.applyMatrix4(t),e[f]=o.x,e[f+1]=o.y,e[f+2]=o.z}}fillSplatCovarianceArray(e,t,r,i,a,s){const o=this.splatCount,l=new ft,u=new wa;r=r||0,i=i||o-1,a===void 0&&(a=r);for(let c=r;c<=i;c++){const d=this.globalSplatIndexToSectionMap[c],f=this.sections[d],h=c-f.splatCountOffset,p=(c-r+a)*en.CovarianceComponentCount,m=f.bytesPerSplat*h+en.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,v=new DataView(this.bufferData,f.dataBase+m);l.set(ga(Fi(v,0,this.compressionLevel),this.compressionLevel),ga(Fi(v,1,this.compressionLevel),this.compressionLevel),ga(Fi(v,2,this.compressionLevel),this.compressionLevel)),u.set(ga(Fi(v,4,this.compressionLevel),this.compressionLevel),ga(Fi(v,5,this.compressionLevel),this.compressionLevel),ga(Fi(v,6,this.compressionLevel),this.compressionLevel),ga(Fi(v,3,this.compressionLevel),this.compressionLevel)),en.computeCovariance(l,u,t,e,p,s)}}fillSplatColorArray(e,t,r,i,a){const s=this.splatCount;r=r||0,i=i||s-1,a===void 0&&(a=r);for(let o=r;o<=i;o++){const l=this.globalSplatIndexToSectionMap[o],u=this.sections[l],c=o-u.splatCountOffset,d=(o-r+a)*en.ColorComponentCount,f=u.bytesPerSplat*c+en.CompressionLevels[this.compressionLevel].ColorOffsetBytes,h=new Uint8Array(this.bufferData,u.dataBase+f);let p=h[3];p=p>=t?p:0,e[d]=h[0],e[d+1]=h[1],e[d+2]=h[2],e[d+3]=p}}static parseHeader(e){const t=new Uint8Array(e,0,en.HeaderSizeBytes),r=new Uint16Array(e,0,en.HeaderSizeBytes/2),i=new Uint32Array(e,0,en.HeaderSizeBytes/4),a=new Float32Array(e,0,en.HeaderSizeBytes/4),s=t[0],o=t[1],l=i[1],u=i[2],c=i[3],d=i[4],f=r[10],h=new ft(a[6],a[7],a[8]),p=a[9]||-Jh,m=a[10]||Jh;return{versionMajor:s,versionMinor:o,maxSectionCount:l,sectionCount:u,maxSplatCount:c,splatCount:d,compressionLevel:f,sceneCenter:h,minSphericalHarmonicsCoeff:p,maxSphericalHarmonicsCoeff:m}}static writeHeaderCountsToBuffer(e,t,r){const i=new Uint32Array(r,0,en.HeaderSizeBytes/4);i[2]=e,i[4]=t}static writeHeaderToBuffer(e,t){const r=new Uint8Array(t,0,en.HeaderSizeBytes),i=new Uint16Array(t,0,en.HeaderSizeBytes/2),a=new Uint32Array(t,0,en.HeaderSizeBytes/4),s=new Float32Array(t,0,en.HeaderSizeBytes/4);r[0]=e.versionMajor,r[1]=e.versionMinor,r[2]=0,r[3]=0,a[1]=e.maxSectionCount,a[2]=e.sectionCount,a[3]=e.maxSplatCount,a[4]=e.splatCount,i[10]=e.compressionLevel,s[6]=e.sceneCenter.x,s[7]=e.sceneCenter.y,s[8]=e.sceneCenter.z,s[9]=e.minSphericalHarmonicsCoeff||-Jh,s[10]=e.maxSphericalHarmonicsCoeff||Jh}static parseSectionHeaders(e,t,r=0,i){const a=e.compressionLevel,s=e.maxSectionCount,o=new Uint16Array(t,r,s*en.SectionHeaderSizeBytes/2),l=new Uint32Array(t,r,s*en.SectionHeaderSizeBytes/4),u=new Float32Array(t,r,s*en.SectionHeaderSizeBytes/4),c=[];let d=0,f=d/2,h=d/4,p=en.HeaderSizeBytes+e.maxSectionCount*en.SectionHeaderSizeBytes,m=0;for(let v=0;v<s;v++){const g=l[h+1],y=l[h+2],_=l[h+3],b=u[h+4],x=b/2,w=o[f+10],A=l[h+6]||en.CompressionLevels[a].ScaleRange,T=l[h+8],C=l[h+9],E=C*4,I=w*_+E,P=o[f+20],{bytesPerSplat:L}=en.calculateComponentStorage(a,P),N=L*g,F=N+I,k={bytesPerSplat:L,splatCountOffset:m,splatCount:i?g:0,maxSplatCount:g,bucketSize:y,bucketCount:_,bucketBlockSize:b,halfBucketBlockSize:x,bucketStorageSizeBytes:w,bucketsStorageSizeBytes:I,splatDataStorageSizeBytes:N,storageSizeBytes:F,compressionScaleRange:A,compressionScaleFactor:x/A,base:p,bucketsBase:p+E,dataBase:p+I,fullBucketCount:T,partiallyFilledBucketCount:C,sphericalHarmonicsDegree:P};c[v]=k,p+=F,d+=en.SectionHeaderSizeBytes,f=d/2,h=d/4,m+=g}return c}static writeSectionHeaderToBuffer(e,t,r,i=0){const a=new Uint16Array(r,i,en.SectionHeaderSizeBytes/2),s=new Uint32Array(r,i,en.SectionHeaderSizeBytes/4),o=new Float32Array(r,i,en.SectionHeaderSizeBytes/4);s[0]=e.splatCount,s[1]=e.maxSplatCount,s[2]=t>=1?e.bucketSize:0,s[3]=t>=1?e.bucketCount:0,o[4]=t>=1?e.bucketBlockSize:0,a[10]=t>=1?en.BucketStorageSizeBytes:0,s[6]=t>=1?e.compressionScaleRange:0,s[7]=e.storageSizeBytes,s[8]=t>=1?e.fullBucketCount:0,s[9]=t>=1?e.partiallyFilledBucketCount:0,a[20]=e.sphericalHarmonicsDegree}static writeSectionHeaderSplatCountToBuffer(e,t,r=0){const i=new Uint32Array(t,r,en.SectionHeaderSizeBytes/4);i[0]=e}constructFromBuffer(e,t){this.bufferData=e,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSectionMap=[];const r=en.parseHeader(this.bufferData);this.versionMajor=r.versionMajor,this.versionMinor=r.versionMinor,this.maxSectionCount=r.maxSectionCount,this.sectionCount=t?r.maxSectionCount:0,this.maxSplatCount=r.maxSplatCount,this.splatCount=t?r.maxSplatCount:0,this.compressionLevel=r.compressionLevel,this.sceneCenter=new ft().copy(r.sceneCenter),this.minSphericalHarmonicsCoeff=r.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff=r.maxSphericalHarmonicsCoeff,this.sections=en.parseSectionHeaders(r,this.bufferData,en.HeaderSizeBytes,t),this.linkBufferArrays(),this.buildMaps()}static calculateComponentStorage(e,t){const r=en.CompressionLevels[e].BytesPerCenter,i=en.CompressionLevels[e].BytesPerScale,a=en.CompressionLevels[e].BytesPerRotation,s=en.CompressionLevels[e].BytesPerColor,o=g1(t),l=en.CompressionLevels[e].BytesPerSphericalHarmonicsComponent*o,u=r+i+a+s+l;return{bytesPerCenter:r,bytesPerScale:i,bytesPerRotation:a,bytesPerColor:s,sphericalHarmonicsComponentsPerSplat:o,sphericalHarmonicsBytesPerSplat:l,bytesPerSplat:u}}linkBufferArrays(){for(let e=0;e<this.maxSectionCount;e++){const t=this.sections[e];t.bucketArray=new Float32Array(this.bufferData,t.bucketsBase,t.bucketCount*en.BucketStorageSizeFloats),t.partiallyFilledBucketCount>0&&(t.partiallyFilledBucketLengths=new Uint32Array(this.bufferData,t.base,t.partiallyFilledBucketCount))}}buildMaps(){let e=0;for(let t=0;t<this.maxSectionCount;t++){const r=this.sections[t];for(let i=0;i<r.maxSplatCount;i++){const a=e+i;this.globalSplatIndexToLocalSplatIndexMap[a]=i,this.globalSplatIndexToSectionMap[a]=t}e+=r.maxSplatCount}}updateLoadedCounts(e,t){en.writeHeaderCountsToBuffer(e,t,this.bufferData),this.sectionCount=e,this.splatCount=t}updateSectionLoadedCounts(e,t){const r=en.HeaderSizeBytes+en.SectionHeaderSizeBytes*e;en.writeSectionHeaderSplatCountToBuffer(t,this.bufferData,r),this.sections[e].splatCount=t}static generateFromUncompressedSplatArrays(e,t,r,i,a,s,o=[]){let l=0;for(let x=0;x<e.length;x++){const w=e[x];l=Math.max(w.sphericalHarmonicsDegree,l)}let u,c;for(let x=0;x<e.length;x++){const w=e[x];for(let A=0;A<w.splats.length;A++){const T=w.splats[A];for(let C=hr.OFFSET.FRC0;C<hr.OFFSET.FRC23&&C<T.length;C++)(!u||T[C]<u)&&(u=T[C]),(!c||T[C]>c)&&(c=T[C])}}u=u||-Jh,c=c||Jh;const{bytesPerSplat:d}=en.calculateComponentStorage(r,l),f=en.CompressionLevels[r].ScaleRange,h=[],p=[];let m=0;for(let x=0;x<e.length;x++){const w=e[x],A=new hr(l);for(let pe=0;pe<w.splatCount;pe++){const de=w.splats[pe];(de[hr.OFFSET.OPACITY]||0)>=t&&A.addSplat(de)}const T=o[x]||{},C=(T.blockSizeFactor||1)*(a||en.BucketBlockSize),E=Math.ceil((T.bucketSizeFactor||1)*(s||en.BucketSize)),I=en.computeBucketsForUncompressedSplatArray(A,C,E),P=I.fullBuckets.length,L=I.partiallyFullBuckets.map(pe=>pe.splats.length),N=L.length,F=[...I.fullBuckets,...I.partiallyFullBuckets],k=A.splats.length*d,H=N*4,U=r>=1?F.length*en.BucketStorageSizeBytes+H:0,B=k+U,$=new ArrayBuffer(B),ee=f/(C*.5),re=new ft;let ne=0;for(let pe=0;pe<F.length;pe++){const de=F[pe];re.fromArray(de.center);for(let me=0;me<de.splats.length;me++){let ke=de.splats[me];const Be=A.splats[ke],Xe=U+ne*d;en.writeSplatDataToSectionBuffer(Be,$,Xe,r,l,re,ee,f,u,c),ne++}}if(m+=ne,r>=1){const pe=new Uint32Array($,0,L.length*4);for(let me=0;me<L.length;me++)pe[me]=L[me];const de=new Float32Array($,H,F.length*en.BucketStorageSizeFloats);for(let me=0;me<F.length;me++){const ke=F[me],Be=me*3;de[Be]=ke.center[0],de[Be+1]=ke.center[1],de[Be+2]=ke.center[2]}}h.push($);const ae=new ArrayBuffer(en.SectionHeaderSizeBytes);en.writeSectionHeaderToBuffer({maxSplatCount:ne,splatCount:ne,bucketSize:E,bucketCount:F.length,bucketBlockSize:C,compressionScaleRange:f,storageSizeBytes:B,fullBucketCount:P,partiallyFilledBucketCount:N,sphericalHarmonicsDegree:l},r,ae,0),p.push(ae)}let v=0;for(let x of h)v+=x.byteLength;const g=en.HeaderSizeBytes+en.SectionHeaderSizeBytes*h.length+v,y=new ArrayBuffer(g);en.writeHeaderToBuffer({versionMajor:0,versionMinor:1,maxSectionCount:h.length,sectionCount:h.length,maxSplatCount:m,splatCount:m,compressionLevel:r,sceneCenter:i,minSphericalHarmonicsCoeff:u,maxSphericalHarmonicsCoeff:c},y);let _=en.HeaderSizeBytes;for(let x of p)new Uint8Array(y,_,en.SectionHeaderSizeBytes).set(new Uint8Array(x)),_+=en.SectionHeaderSizeBytes;for(let x of h)new Uint8Array(y,_,x.byteLength).set(new Uint8Array(x)),_+=x.byteLength;return new en(y)}static computeBucketsForUncompressedSplatArray(e,t,r){let i=e.splatCount;const a=t/2,s=new ft,o=new ft;for(let m=0;m<i;m++){const v=e.splats[m],g=[v[hr.OFFSET.X],v[hr.OFFSET.Y],v[hr.OFFSET.Z]];(m===0||g[0]<s.x)&&(s.x=g[0]),(m===0||g[0]>o.x)&&(o.x=g[0]),(m===0||g[1]<s.y)&&(s.y=g[1]),(m===0||g[1]>o.y)&&(o.y=g[1]),(m===0||g[2]<s.z)&&(s.z=g[2]),(m===0||g[2]>o.z)&&(o.z=g[2])}const l=new ft().copy(o).sub(s),u=Math.ceil(l.y/t),c=Math.ceil(l.z/t),d=new ft,f=[],h={};for(let m=0;m<i;m++){const v=e.splats[m],g=[v[hr.OFFSET.X],v[hr.OFFSET.Y],v[hr.OFFSET.Z]],y=Math.floor((g[0]-s.x)/t),_=Math.floor((g[1]-s.y)/t),b=Math.floor((g[2]-s.z)/t);d.x=y*t+s.x+a,d.y=_*t+s.y+a,d.z=b*t+s.z+a;const x=y*(u*c)+_*c+b;let w=h[x];w||(h[x]=w={splats:[],center:d.toArray()}),w.splats.push(m),w.splats.length>=r&&(f.push(w),h[x]=null)}const p=[];for(let m in h)if(h.hasOwnProperty(m)){const v=h[m];v&&p.push(v)}return{fullBuckets:f,partiallyFullBuckets:p}}};En(en,"CurrentMajorVersion",0),En(en,"CurrentMinorVersion",1),En(en,"CenterComponentCount",3),En(en,"ScaleComponentCount",3),En(en,"RotationComponentCount",4),En(en,"ColorComponentCount",4),En(en,"CovarianceComponentCount",6),En(en,"SplatScaleOffsetFloat",3),En(en,"SplatRotationOffsetFloat",6),En(en,"CompressionLevels",{0:{BytesPerCenter:12,BytesPerScale:12,BytesPerRotation:16,BytesPerColor:4,ScaleOffsetBytes:12,RotationffsetBytes:24,ColorOffsetBytes:40,SphericalHarmonicsOffsetBytes:44,ScaleRange:1,BytesPerSphericalHarmonicsComponent:4,SphericalHarmonicsOffsetFloat:11,SphericalHarmonicsDegrees:{0:{BytesPerSplat:44},1:{BytesPerSplat:80},2:{BytesPerSplat:140}}},1:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:2,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:42},2:{BytesPerSplat:72}}},2:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:1,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:33},2:{BytesPerSplat:48}}}}),En(en,"CovarianceSizeFloats",6),En(en,"HeaderSizeBytes",4096),En(en,"SectionHeaderSizeBytes",1024),En(en,"BucketStorageSizeBytes",12),En(en,"BucketStorageSizeFloats",3),En(en,"BucketBlockSize",5),En(en,"BucketSize",256),En(en,"computeCovariance",function(){const e=new kr,t=new Rr,r=new Rr,i=new Rr,a=new Rr,s=new Rr,o=new Rr;return function(l,u,c,d,f=0,h){e.makeScale(l.x,l.y,l.z),t.setFromMatrix4(e),e.makeRotationFromQuaternion(u),r.setFromMatrix4(e),i.copy(r).multiply(t),a.copy(i).transpose().premultiply(i),c&&(s.setFromMatrix4(c),o.copy(s).transpose(),a.multiply(o),a.premultiply(s)),h>=1?(d[f]=ss(a.elements[0]),d[f+1]=ss(a.elements[3]),d[f+2]=ss(a.elements[6]),d[f+3]=ss(a.elements[4]),d[f+4]=ss(a.elements[7]),d[f+5]=ss(a.elements[8])):(d[f]=a.elements[0],d[f+1]=a.elements[3],d[f+2]=a.elements[6],d[f+3]=a.elements[4],d[f+4]=a.elements[7],d[f+5]=a.elements[8])}}()),En(en,"dot3",(e,t,r,i,a)=>{a[0]=a[1]=a[2]=0;const s=i[0],o=i[1],l=i[2];en.addInto3(e[0]*s,e[1]*s,e[2]*s,a),en.addInto3(t[0]*o,t[1]*o,t[2]*o,a),en.addInto3(r[0]*l,r[1]*l,r[2]*l,a)}),En(en,"addInto3",(e,t,r,i)=>{i[0]=i[0]+e,i[1]=i[1]+t,i[2]=i[2]+r}),En(en,"dot5",(e,t,r,i,a,s,o)=>{o[0]=o[1]=o[2]=0;const l=s[0],u=s[1],c=s[2],d=s[3],f=s[4];en.addInto3(e[0]*l,e[1]*l,e[2]*l,o),en.addInto3(t[0]*u,t[1]*u,t[2]*u,o),en.addInto3(r[0]*c,r[1]*c,r[2]*c,o),en.addInto3(i[0]*d,i[1]*d,i[2]*d,o),en.addInto3(a[0]*f,a[1]*f,a[2]*f,o)}),En(en,"rotateSphericalHarmonics3",(e,t,r,i,a,s,o,l,u)=>{en.dot3(e,t,r,i,o),en.dot3(e,t,r,a,l),en.dot3(e,t,r,s,u)}),En(en,"rotateSphericalHarmonics5",(e,t,r,i,a,s,o,l,u,c,d,f,h,p,m,v,g,y)=>{const _=Math.sqrt(.25),b=Math.sqrt(3/4),x=Math.sqrt(1/3),w=Math.sqrt(4/3),A=Math.sqrt(1/12);u[0]=_*(l[2]*s[0]+l[0]*s[2]+(s[2]*l[0]+s[0]*l[2])),u[1]=l[1]*s[0]+s[1]*l[0],u[2]=b*(l[1]*s[1]+s[1]*l[1]),u[3]=l[1]*s[2]+s[1]*l[2],u[4]=_*(l[2]*s[2]-l[0]*s[0]+(s[2]*l[2]-s[0]*l[0])),en.dot5(e,t,r,i,a,u,p),c[0]=_*(o[2]*s[0]+o[0]*s[2]+(s[2]*o[0]+s[0]*o[2])),c[1]=o[1]*s[0]+s[1]*o[0],c[2]=b*(o[1]*s[1]+s[1]*o[1]),c[3]=o[1]*s[2]+s[1]*o[2],c[4]=_*(o[2]*s[2]-o[0]*s[0]+(s[2]*o[2]-s[0]*o[0])),en.dot5(e,t,r,i,a,c,m),d[0]=x*(o[2]*o[0]+o[0]*o[2])+-A*(l[2]*l[0]+l[0]*l[2]+(s[2]*s[0]+s[0]*s[2])),d[1]=w*o[1]*o[0]+-x*(l[1]*l[0]+s[1]*s[0]),d[2]=o[1]*o[1]+-_*(l[1]*l[1]+s[1]*s[1]),d[3]=w*o[1]*o[2]+-x*(l[1]*l[2]+s[1]*s[2]),d[4]=x*(o[2]*o[2]-o[0]*o[0])+-A*(l[2]*l[2]-l[0]*l[0]+(s[2]*s[2]-s[0]*s[0])),en.dot5(e,t,r,i,a,d,v),f[0]=_*(o[2]*l[0]+o[0]*l[2]+(l[2]*o[0]+l[0]*o[2])),f[1]=o[1]*l[0]+l[1]*o[0],f[2]=b*(o[1]*l[1]+l[1]*o[1]),f[3]=o[1]*l[2]+l[1]*o[2],f[4]=_*(o[2]*l[2]-o[0]*l[0]+(l[2]*o[2]-l[0]*o[0])),en.dot5(e,t,r,i,a,f,g),h[0]=_*(l[2]*l[0]+l[0]*l[2]-(s[2]*s[0]+s[0]*s[2])),h[1]=l[1]*l[0]-s[1]*s[0],h[2]=b*(l[1]*l[1]-s[1]*s[1]),h[3]=l[1]*l[2]-s[1]*s[2],h[4]=_*(l[2]*l[2]-l[0]*l[0]-(s[2]*s[2]-s[0]*s[0])),en.dot5(e,t,r,i,a,h,y)}),En(en,"writeSplatDataToSectionBuffer",function(){const e=new ArrayBuffer(12),t=new ArrayBuffer(12),r=new ArrayBuffer(16),i=new ArrayBuffer(4),a=new ArrayBuffer(256),s=new wa,o=new ft,l=new ft,{X:u,Y:c,Z:d,SCALE0:f,SCALE1:h,SCALE2:p,ROTATION0:m,ROTATION1:v,ROTATION2:g,ROTATION3:y,FDC0:_,FDC1:b,FDC2:x,OPACITY:w,FRC0:A,FRC9:T}=hr.OFFSET,C=(E,I,P)=>{const L=P*2+1;return E=Math.round(E*I)+P,js(E,0,L)};return function(E,I,P,L,N,F,k,H,U=-Jh,B=Jh){const $=g1(N),ee=en.CompressionLevels[L].BytesPerCenter,re=en.CompressionLevels[L].BytesPerScale,ne=en.CompressionLevels[L].BytesPerRotation,ae=en.CompressionLevels[L].BytesPerColor,pe=P,de=pe+ee,me=de+re,ke=me+ne,Be=ke+ae;if(E[m]!==void 0?(s.set(E[m],E[v],E[g],E[y]),s.normalize()):s.set(1,0,0,0),E[f]!==void 0?o.set(E[f]||0,E[h]||0,E[p]||0):o.set(0,0,0),L===0){const Ye=new Float32Array(I,pe,en.CenterComponentCount),Y=new Float32Array(I,me,en.RotationComponentCount),he=new Float32Array(I,de,en.ScaleComponentCount);if(Y.set([s.x,s.y,s.z,s.w]),he.set([o.x,o.y,o.z]),Ye.set([E[u],E[c],E[d]]),N>0){const le=new Float32Array(I,Be,$);if(N>=1){for(let Ke=0;Ke<9;Ke++)le[Ke]=E[A+Ke]||0;if(N>=2)for(let Ke=0;Ke<15;Ke++)le[Ke+9]=E[T+Ke]||0}}}else{const Ye=new Uint16Array(e,0,en.CenterComponentCount),Y=new Uint16Array(r,0,en.RotationComponentCount),he=new Uint16Array(t,0,en.ScaleComponentCount);if(Y.set([ss(s.x),ss(s.y),ss(s.z),ss(s.w)]),he.set([ss(o.x),ss(o.y),ss(o.z)]),l.set(E[u],E[c],E[d]).sub(F),l.x=C(l.x,k,H),l.y=C(l.y,k,H),l.z=C(l.z,k,H),Ye.set([l.x,l.y,l.z]),N>0){const le=L===1?Uint16Array:Uint8Array,Ke=L===1?2:1,Ue=new le(a,0,$);if(N>=1){for(let je=0;je<9;je++){const He=E[A+je]||0;Ue[je]=L===1?ss(He):Dx(He,U,B)}const Ze=9*Ke;if(py(Ue.buffer,0,I,Be,Ze),N>=2){for(let je=0;je<15;je++){const He=E[T+je]||0;Ue[je+9]=L===1?ss(He):Dx(He,U,B)}py(Ue.buffer,Ze,I,Be+Ze,15*Ke)}}}py(Ye.buffer,0,I,pe,6),py(he.buffer,0,I,de,6),py(Y.buffer,0,I,me,8)}const Xe=new Uint8ClampedArray(i,0,4);Xe.set([E[_]||0,E[b]||0,E[x]||0]),Xe[3]=E[w]||0,py(Xe.buffer,0,I,ke,4)}}());let gr=en;const OQ=new Uint8Array([112,108,121,10]),NQ=new Uint8Array([10,101,110,100,95,104,101,97,100,101,114,10]),mL="end_header",vL=new Map([["char",Int8Array],["uchar",Uint8Array],["short",Int16Array],["ushort",Uint16Array],["int",Int32Array],["uint",Uint32Array],["float",Float32Array],["double",Float64Array]]),xd=(n,e)=>{const t=(1<<e)-1;return(n&t)/t},BQ=(n,e)=>{n.x=xd(e>>>21,11),n.y=xd(e>>>11,10),n.z=xd(e,11)},o_t=(n,e)=>{n.x=xd(e>>>24,8),n.y=xd(e>>>16,8),n.z=xd(e>>>8,8),n.w=xd(e,8)},l_t=(n,e)=>{const t=1/(Math.sqrt(2)*.5),r=(xd(e>>>20,10)-.5)*t,i=(xd(e>>>10,10)-.5)*t,a=(xd(e,10)-.5)*t,s=Math.sqrt(1-(r*r+i*i+a*a));switch(e>>>30){case 0:n.set(s,r,i,a);break;case 1:n.set(r,s,i,a);break;case 2:n.set(r,i,s,a);break;case 3:n.set(r,i,a,s);break}},my=(n,e,t)=>n*(1-t)+e*t,oo=(n,e)=>{var t;return(t=n.properties.find(r=>r.name===e&&r.storage))==null?void 0:t.storage},co=class co{static decodeHeaderText(e){let t,r,i;const a=e.split(`
`).filter(l=>!l.startsWith("comment "));let s=0,o=!1;for(let l=1;l<a.length;++l){const u=a[l].split(" ");switch(u[0]){case"format":if(u[1]!=="binary_little_endian")throw new Error("Unsupported ply format");break;case"element":t={name:u[1],count:parseInt(u[2],10),properties:[],storageSizeBytes:0},t.name==="chunk"?r=t:t.name==="vertex"&&(i=t);break;case"property":{if(!vL.has(u[1]))throw new Error(`Unrecognized property data type '${u[1]}' in ply header`);const c=vL.get(u[1]),d=c.BYTES_PER_ELEMENT*t.count;t.name==="vertex"&&(s+=c.BYTES_PER_ELEMENT),t.properties.push({type:u[1],name:u[2],storage:null,byteSize:c.BYTES_PER_ELEMENT,storageSizeByes:d}),t.storageSizeBytes+=d;break}case mL:o=!0;break;default:throw new Error(`Unrecognized header value '${u[0]}' in ply header`)}if(o)break}return{chunkElement:r,vertexElement:i,bytesPerSplat:s,headerSizeBytes:e.indexOf(mL)+mL.length+1,sphericalHarmonicsDegree:0}}static decodeHeader(e){const t=(c,d)=>{const f=c.length-d.length;let h,p;for(h=0;h<=f;++h){for(p=0;p<d.length&&c[h+p]===d[p];++p);if(p===d.length)return h}return-1},r=(c,d)=>{if(c.length<d.length)return!1;for(let f=0;f<d.length;++f)if(c[f]!==d[f])return!1;return!0};let i=new Uint8Array(e),a;if(i.length>=OQ.length&&!r(i,OQ))throw new Error("Invalid PLY header");if(a=t(i,NQ),a===-1)throw new Error("End of PLY header not found");const s=new TextDecoder("ascii").decode(i.slice(0,a)),{chunkElement:o,vertexElement:l,bytesPerSplat:u}=co.decodeHeaderText(s);return{headerSizeBytes:a+NQ.length,bytesPerSplat:u,chunkElement:o,vertexElement:l}}static readElementData(e,t,r,i,a,s=null){let o=t instanceof DataView?t:new DataView(t);i=i||0,a=a||e.count-1;for(let l=i;l<=a;++l)for(let u=0;u<e.properties.length;++u){const c=e.properties[u],d=vL.get(c.type),f=d.BYTES_PER_ELEMENT*e.count;if((!c.storage||c.storage.byteLength<f)&&(!s||s(c.name))&&(c.storage=new d(e.count)),c.storage)switch(c.type){case"char":c.storage[l]=o.getInt8(r);break;case"uchar":c.storage[l]=o.getUint8(r);break;case"short":c.storage[l]=o.getInt16(r,!0);break;case"ushort":c.storage[l]=o.getUint16(r,!0);break;case"int":c.storage[l]=o.getInt32(r,!0);break;case"uint":c.storage[l]=o.getUint32(r,!0);break;case"float":c.storage[l]=o.getFloat32(r,!0);break;case"double":c.storage[l]=o.getFloat64(r,!0);break}r+=c.byteSize}return r}static readPly(e,t=null){const r=co.decodeHeader(e);let i=co.readElementData(r.chunkElement,e,r.headerSizeBytes,null,null,t);return co.readElementData(r.vertexElement,e,i,null,null,t),{chunkElement:r.chunkElement,vertexElement:r.vertexElement}}static getElementStorageArrays(e,t){const r=oo(e,"min_x"),i=oo(e,"min_y"),a=oo(e,"min_z"),s=oo(e,"max_x"),o=oo(e,"max_y"),l=oo(e,"max_z"),u=oo(e,"min_scale_x"),c=oo(e,"min_scale_y"),d=oo(e,"min_scale_z"),f=oo(e,"max_scale_x"),h=oo(e,"max_scale_y"),p=oo(e,"max_scale_z"),m=oo(t,"packed_position"),v=oo(t,"packed_rotation"),g=oo(t,"packed_scale"),y=oo(t,"packed_color");return{positionExtremes:{minX:r,maxX:s,minY:i,maxY:o,minZ:a,maxZ:l},scaleExtremes:{minScaleX:u,maxScaleX:f,minScaleY:c,maxScaleY:h,minScaleZ:d,maxScaleZ:p},position:m,rotation:v,scale:g,color:y}}static parseToUncompressedSplatBufferSection(e,t,r,i,a,s,o,l,u,c=null){co.readElementData(t,s,o,r,i,c);const d=gr.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,{positionExtremes:f,scaleExtremes:h,position:p,rotation:m,scale:v,color:g}=co.getElementStorageArrays(e,t),y=hr.createSplat();for(let _=r;_<=i;++_){co.decompressSplat(_,a,p,f,v,h,m,g,y);const b=_*d+u;gr.writeSplatDataToSectionBuffer(y,l,b,0,0)}}static parseToUncompressedSplatArraySection(e,t,r,i,a,s,o,l,u=null){co.readElementData(t,s,o,r,i,u);const{positionExtremes:c,scaleExtremes:d,position:f,rotation:h,scale:p,color:m}=co.getElementStorageArrays(e,t);for(let v=r;v<=i;++v){const g=hr.createSplat();co.decompressSplat(v,a,f,c,p,d,h,m,g),l.addSplat(g)}}static parseToUncompressedSplatArray(e){const{chunkElement:t,vertexElement:r}=co.readPly(e),i=new hr,{positionExtremes:a,scaleExtremes:s,position:o,rotation:l,scale:u,color:c}=co.getElementStorageArrays(t,r);for(let f=0;f<r.count;++f){i.addDefaultSplat();const h=i.getSplat(i.splatCount-1);co.decompressSplat(f,0,o,a,u,s,l,c,h)}return new kr().identity(),i}};En(co,"decompressSplat",function(){const e=new ft,t=new wa,r=new ft,i=new _a,a=hr.OFFSET;return function(s,o,l,u,c,d,f,h,p){p=p||hr.createSplat();const m=Math.floor((o+s)/256);return BQ(e,l[s]),l_t(t,f[s]),BQ(r,c[s]),o_t(i,h[s]),p[a.X]=my(u.minX[m],u.maxX[m],e.x),p[a.Y]=my(u.minY[m],u.maxY[m],e.y),p[a.Z]=my(u.minZ[m],u.maxZ[m],e.z),p[a.ROTATION0]=t.x,p[a.ROTATION1]=t.y,p[a.ROTATION2]=t.z,p[a.ROTATION3]=t.w,p[a.SCALE0]=Math.exp(my(d.minScaleX[m],d.maxScaleX[m],r.x)),p[a.SCALE1]=Math.exp(my(d.minScaleY[m],d.maxScaleY[m],r.y)),p[a.SCALE2]=Math.exp(my(d.minScaleZ[m],d.maxScaleZ[m],r.z)),p[a.FDC0]=js(Math.floor(i.x*255),0,255),p[a.FDC1]=js(Math.floor(i.y*255),0,255),p[a.FDC2]=js(Math.floor(i.z*255),0,255),p[a.OPACITY]=js(Math.floor(i.w*255),0,255),p}}());let U0=co;const Rp={INRIAV1:0,INRIAV2:1,PlayCanvasCompressed:2},[whe,pU,mU,vU,gU,yU,_U]=[0,1,2,3,4,5,6],FQ={double:whe,int:pU,uint:mU,float:vU,short:gU,ushort:yU,uchar:_U},u_t={[whe]:8,[pU]:4,[mU]:4,[vU]:4,[gU]:2,[yU]:2,[_U]:1},$l=class $l{constructor(){}decodeSectionHeader(e,t,r=0){const i=[];let a=!1,s=-1,o=0,l=!1,u=null;const c=[],d=[],f=[],h={};for(let g=r;g<e.length;g++){const y=e[g].trim();if(y.startsWith("element"))if(a){s--;break}else{a=!0,r=g,s=g;const _=y.split(" ");let b=0;for(let x of _){const w=x.trim();w.length>0&&(b++,b===2?u=w:b===3&&(o=parseInt(w)))}}else if(y.startsWith("property")){const _=y.match(/(\w+)\s+(\w+)\s+(\w+)/);if(_){const b=_[2],x=_[3];f.push(x);const w=t[x];h[x]=b;const A=FQ[b];w!==void 0&&(c.push(w),d[w]=A)}}if(y===$l.HeaderEndToken){l=!0;break}a&&(i.push(y),s++)}const p=[];let m=0;for(let g of f){const y=h[g];if(h.hasOwnProperty(g)){const _=t[g];_!==void 0&&(p[_]=m)}m+=u_t[FQ[y]]}const v=this.decodeSphericalHarmonicsFromSectionHeader(f,t);return{headerLines:i,headerStartLine:r,headerEndLine:s,fieldTypes:d,fieldIds:c,fieldOffsets:p,bytesPerVertex:m,vertexCount:o,dataSizeBytes:m*o,endOfHeader:l,sectionName:u,sphericalHarmonicsDegree:v.degree,sphericalHarmonicsCoefficientsPerChannel:v.coefficientsPerChannel,sphericalHarmonicsDegree1Fields:v.degree1Fields,sphericalHarmonicsDegree2Fields:v.degree2Fields}}decodeSphericalHarmonicsFromSectionHeader(e,t){let r=0,i=0;for(let l of e)l.startsWith("f_rest")&&r++;i=r/3;let a=0;i>=3&&(a=1),i>=8&&(a=2);let s=[],o=[];for(let l=0;l<3;l++){if(a>=1)for(let u=0;u<3;u++)s.push(t["f_rest_"+(u+i*l)]);if(a>=2)for(let u=0;u<5;u++)o.push(t["f_rest_"+(u+i*l+3)])}return{degree:a,coefficientsPerChannel:i,degree1Fields:s,degree2Fields:o}}static getHeaderSectionNames(e){const t=[];for(let r of e)if(r.startsWith("element")){const i=r.split(" ");let a=0;for(let s of i){const o=s.trim();o.length>0&&(a++,a===2&&t.push(o))}}return t}static checkTextForEndHeader(e){return!!e.includes($l.HeaderEndToken)}static checkBufferForEndHeader(e,t,r,i){const a=new Uint8Array(e,Math.max(0,t-r),r),s=i.decode(a);return $l.checkTextForEndHeader(s)}static extractHeaderFromBufferToText(e){const t=new TextDecoder;let r=0,i="";const a=100;for(;;){if(r+a>=e.byteLength)throw new Error("End of file reached while searching for end of header");const s=new Uint8Array(e,r,a);if(i+=t.decode(s),r+=a,$l.checkBufferForEndHeader(e,r,a*2,t))break}return i}readHeaderFromBuffer(e){const t=new TextDecoder;let r=0,i="";const a=100;for(;;){if(r+a>=e.byteLength)throw new Error("End of file reached while searching for end of header");const s=new Uint8Array(e,r,a);if(i+=t.decode(s),r+=a,$l.checkBufferForEndHeader(e,r,a*2,t))break}return i}static convertHeaderTextToLines(e){const t=e.split(`
`),r=[];for(let i=0;i<t.length;i++){const a=t[i].trim();if(r.push(a),a===$l.HeaderEndToken)break}return r}static determineHeaderFormatFromHeaderText(e){const t=$l.convertHeaderTextToLines(e);let r=Rp.INRIAV1;for(let i=0;i<t.length;i++){const a=t[i].trim();if(a.startsWith("element chunk")||a.match(/[A-Za-z]*packed_[A-Za-z]*/))r=Rp.PlayCanvasCompressed;else if(a.startsWith("element codebook_centers"))r=Rp.INRIAV2;else if(a===$l.HeaderEndToken)break}return r}static determineHeaderFormatFromPlyBuffer(e){const t=$l.extractHeaderFromBufferToText(e);return $l.determineHeaderFormatFromHeaderText(t)}static readVertex(e,t,r,i,a,s,o=!0){const l=r*t.bytesPerVertex+i,u=t.fieldOffsets,c=t.fieldTypes;for(let d of a){const f=c[d];f===vU?s[d]=e.getFloat32(l+u[d],!0):f===gU?s[d]=e.getInt16(l+u[d],!0):f===yU?s[d]=e.getUint16(l+u[d],!0):f===pU?s[d]=e.getInt32(l+u[d],!0):f===mU?s[d]=e.getUint32(l+u[d],!0):f===_U&&(o?s[d]=e.getUint8(l+u[d])/255:s[d]=e.getUint8(l+u[d]))}}};En($l,"HeaderEndToken","end_header");let $s=$l;const The=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0"],c_t=The.map((n,e)=>e),[UQ,d_t,f_t,h_t,p_t,m_t,v_t,g_t,y_t,__t,zQ,b_t,S_t,HQ,VQ,x_t,w_t,T_t]=c_t,x0=class x0{constructor(){this.plyParserutils=new $s}decodeHeaderLines(e){let t=0;e.forEach(c=>{c.includes("f_rest_")&&t++});let r=0;t>=45?r=45:t>=24?r=24:t>=9&&(r=9);let a=Array.from(Array(Math.max(r-1,0))).map((c,d)=>`f_rest_${d+1}`);const s=[...The,...a],o=s.map((c,d)=>d),l=o.reduce((c,d)=>(c[s[d]]=d,c),{}),u=this.plyParserutils.decodeSectionHeader(e,l,0);return u.splatCount=u.vertexCount,u.bytesPerSplat=u.bytesPerVertex,u.fieldsToReadIndexes=o,u}decodeHeaderText(e){const t=$s.convertHeaderTextToLines(e),r=this.decodeHeaderLines(t);return r.headerText=e,r.headerSizeBytes=e.indexOf($s.HeaderEndToken)+$s.HeaderEndToken.length+1,r}decodeHeaderFromBuffer(e){const t=this.plyParserutils.readHeaderFromBuffer(e);return this.decodeHeaderText(t)}findSplatData(e,t){return new DataView(e,t.headerSizeBytes)}parseToUncompressedSplatBufferSection(e,t,r,i,a,s,o,l=0){l=Math.min(l,e.sphericalHarmonicsDegree);const u=gr.CompressionLevels[0].SphericalHarmonicsDegrees[l].BytesPerSplat;for(let c=t;c<=r;c++){const d=x0.parseToUncompressedSplat(i,c,e,a,l),f=c*u+o;gr.writeSplatDataToSectionBuffer(d,s,f,0,l)}}parseToUncompressedSplatArraySection(e,t,r,i,a,s,o=0){o=Math.min(o,e.sphericalHarmonicsDegree);for(let l=t;l<=r;l++){const u=x0.parseToUncompressedSplat(i,l,e,a,o);s.addSplat(u)}}decodeSectionSplatData(e,t,r,i){i=Math.min(i,r.sphericalHarmonicsDegree);const a=new hr(i);for(let s=0;s<t;s++){const o=x0.parseToUncompressedSplat(e,s,r,0,i);a.addSplat(o)}return a}static readSplat(e,t,r,i,a){return $s.readVertex(e,t,r,i,t.fieldsToReadIndexes,a,!0)}parseToUncompressedSplatArray(e,t=0){const r=this.decodeHeaderFromBuffer(e),i=r.splatCount,a=this.findSplatData(e,r);return this.decodeSectionSplatData(a,i,r,t)}};En(x0,"parseToUncompressedSplat",function(){let e=[];const t=new wa,r=hr.OFFSET.X,i=hr.OFFSET.Y,a=hr.OFFSET.Z,s=hr.OFFSET.SCALE0,o=hr.OFFSET.SCALE1,l=hr.OFFSET.SCALE2,u=hr.OFFSET.ROTATION0,c=hr.OFFSET.ROTATION1,d=hr.OFFSET.ROTATION2,f=hr.OFFSET.ROTATION3,h=hr.OFFSET.FDC0,p=hr.OFFSET.FDC1,m=hr.OFFSET.FDC2,v=hr.OFFSET.OPACITY,g=[];for(let y=0;y<45;y++)g[y]=hr.OFFSET.FRC0+y;return function(y,_,b,x=0,w=0){w=Math.min(w,b.sphericalHarmonicsDegree),x0.readSplat(y,b,_,x,e);const A=hr.createSplat(w);if(e[UQ]!==void 0?(A[s]=Math.exp(e[UQ]),A[o]=Math.exp(e[d_t]),A[l]=Math.exp(e[f_t])):(A[s]=.01,A[o]=.01,A[l]=.01),e[zQ]!==void 0){const T=.28209479177387814;A[h]=(.5+T*e[zQ])*255,A[p]=(.5+T*e[b_t])*255,A[m]=(.5+T*e[S_t])*255}else e[VQ]!==void 0?(A[h]=e[VQ]*255,A[p]=e[x_t]*255,A[m]=e[w_t]*255):(A[h]=0,A[p]=0,A[m]=0);if(e[HQ]!==void 0&&(A[v]=1/(1+Math.exp(-e[HQ]))*255),A[h]=js(Math.floor(A[h]),0,255),A[p]=js(Math.floor(A[p]),0,255),A[m]=js(Math.floor(A[m]),0,255),A[v]=js(Math.floor(A[v]),0,255),w>=1&&e[T_t]!==void 0){for(let T=0;T<9;T++)A[g[T]]=e[b.sphericalHarmonicsDegree1Fields[T]];if(w>=2)for(let T=0;T<15;T++)A[g[9+T]]=e[b.sphericalHarmonicsDegree2Fields[T]]}return t.set(e[h_t],e[p_t],e[m_t],e[v_t]),t.normalize(),A[u]=t.x,A[c]=t.y,A[d]=t.z,A[f]=t.w,A[r]=e[g_t],A[i]=e[y_t],A[a]=e[__t],A}}());let Z3=x0;const Che=["features_dc","features_rest_0","features_rest_1","features_rest_2","features_rest_3","features_rest_4","features_rest_5","features_rest_6","features_rest_7","features_rest_8","features_rest_9","features_rest_10","features_rest_11","features_rest_12","features_rest_13","features_rest_14","opacity","scaling","rotation_re","rotation_im"],HA=Che.map((n,e)=>e),[VA,C_t,A_t,$Q,$A,E_t,gL]=[0,1,4,16,17,18,19],Ahe=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0","f_rest_1","f_rest_2","f_rest_3","f_rest_4","f_rest_5","f_rest_6","f_rest_7","f_rest_8","f_rest_9","f_rest_10","f_rest_11","f_rest_12","f_rest_13","f_rest_14","f_rest_15","f_rest_16","f_rest_17","f_rest_18","f_rest_19","f_rest_20","f_rest_21","f_rest_22","f_rest_23","f_rest_24","f_rest_25","f_rest_26","f_rest_27","f_rest_28","f_rest_29","f_rest_30","f_rest_31","f_rest_32","f_rest_33","f_rest_34","f_rest_35","f_rest_36","f_rest_37","f_rest_38","f_rest_39","f_rest_40","f_rest_41","f_rest_42","f_rest_43","f_rest_44","f_rest_45"],H8=Ahe.map((n,e)=>e),[GQ,M_t,I_t,D_t,P_t,R_t,k_t,L_t,O_t,N_t,V8,Ehe,Mhe,WQ]=H8,qQ=V8,B_t=Ehe,F_t=Mhe,GA=n=>{const e=(31744&n)>>10,t=1023&n;return(n>>15?-1:1)*(e?e===31?t?NaN:1/0:Math.pow(2,e-15)*(1+t/1024):t/1024*6103515625e-14)},Ox=class Ox{constructor(){this.plyParserutils=new $s}decodeSectionHeadersFromHeaderLines(e){const t=H8.reduce((c,d)=>(c[Ahe[d]]=d,c),{}),r=HA.reduce((c,d)=>(c[Che[d]]=d,c),{}),i=$s.getHeaderSectionNames(e);let a;for(let c=0;c<i.length;c++)i[c]==="codebook_centers"&&(a=c);let s=0,o=!1;const l=[];let u=0;for(;!o;){let c;u===a?c=this.plyParserutils.decodeSectionHeader(e,r,s):c=this.plyParserutils.decodeSectionHeader(e,t,s),o=c.endOfHeader,s=c.headerEndLine+1,o||(c.splatCount=c.vertexCount,c.bytesPerSplat=c.bytesPerVertex),l.push(c),u++}return l}decodeSectionHeadersFromHeaderText(e){const t=$s.convertHeaderTextToLines(e);return this.decodeSectionHeadersFromHeaderLines(t)}getSplatCountFromSectionHeaders(e){let t=0;for(let r of e)r.sectionName!=="codebook_centers"&&(t+=r.vertexCount);return t}decodeHeaderFromHeaderText(e){const t=e.indexOf($s.HeaderEndToken)+$s.HeaderEndToken.length+1,r=this.decodeSectionHeadersFromHeaderText(e),i=this.getSplatCountFromSectionHeaders(r);return{headerSizeBytes:t,sectionHeaders:r,splatCount:i}}decodeHeaderFromBuffer(e){const t=this.plyParserutils.readHeaderFromBuffer(e);return this.decodeHeaderFromHeaderText(t)}findVertexData(e,t,r){let i=t.headerSizeBytes;for(let a=0;a<r&&a<t.sectionHeaders.length;a++){const s=t.sectionHeaders[a];i+=s.dataSizeBytes}return new DataView(e,i,t.sectionHeaders[r].dataSizeBytes)}decodeCodeBook(e,t){const r=[],i=[];for(let a=0;a<t.vertexCount;a++){$s.readVertex(e,t,a,0,HA,r);for(let s of HA){const o=HA[s];let l=i[o];l||(i[o]=l=[]),l.push(r[s])}}for(let a=0;a<i.length;a++){const s=i[a],o=.28209479177387814;for(let l=0;l<s.length;l++){const u=GA(s[l]);a===$Q?s[l]=Math.round(1/(1+Math.exp(-u))*255):a===VA?s[l]=Math.round((.5+o*u)*255):a===$A?s[l]=Math.exp(u):s[l]=u}}return i}decodeSectionSplatData(e,t,r,i,a){a=Math.min(a,r.sphericalHarmonicsDegree);const s=new hr(a);for(let o=0;o<t;o++){const l=Ox.parseToUncompressedSplat(e,o,r,i,0,a);s.addSplat(l)}return s}static readSplat(e,t,r,i,a){return $s.readVertex(e,t,r,i,H8,a,!1)}parseToUncompressedSplatArray(e,t=0){const r=[],i=this.decodeHeaderFromBuffer(e,t);let a;for(let o=0;o<i.sectionHeaders.length;o++){const l=i.sectionHeaders[o];if(l.sectionName==="codebook_centers"){const u=this.findVertexData(e,i,o);a=this.decodeCodeBook(u,l)}}for(let o=0;o<i.sectionHeaders.length;o++){const l=i.sectionHeaders[o];if(l.sectionName!=="codebook_centers"){const u=l.vertexCount,c=this.findVertexData(e,i,o),d=this.decodeSectionSplatData(c,u,l,a,t);r.push(d)}}const s=new hr(t);for(let o of r)for(let l of o.splats)s.addSplat(l);return s}};En(Ox,"parseToUncompressedSplat",function(){let e=[];const t=new wa,r=hr.OFFSET.X,i=hr.OFFSET.Y,a=hr.OFFSET.Z,s=hr.OFFSET.SCALE0,o=hr.OFFSET.SCALE1,l=hr.OFFSET.SCALE2,u=hr.OFFSET.ROTATION0,c=hr.OFFSET.ROTATION1,d=hr.OFFSET.ROTATION2,f=hr.OFFSET.ROTATION3,h=hr.OFFSET.FDC0,p=hr.OFFSET.FDC1,m=hr.OFFSET.FDC2,v=hr.OFFSET.OPACITY,g=[];for(let y=0;y<45;y++)g[y]=hr.OFFSET.FRC0+y;return function(y,_,b,x,w=0,A=0){A=Math.min(A,b.sphericalHarmonicsDegree),Ox.readSplat(y,b,_,w,e);const T=hr.createSplat(A);if(e[GQ]!==void 0?(T[s]=x[$A][e[GQ]],T[o]=x[$A][e[M_t]],T[l]=x[$A][e[I_t]]):(T[s]=.01,T[o]=.01,T[l]=.01),e[V8]!==void 0?(T[h]=x[VA][e[V8]],T[p]=x[VA][e[Ehe]],T[m]=x[VA][e[Mhe]]):e[qQ]!==void 0?(T[h]=e[qQ]*255,T[p]=e[B_t]*255,T[m]=e[F_t]*255):(T[h]=0,T[p]=0,T[m]=0),e[WQ]!==void 0&&(T[v]=x[$Q][e[WQ]]),T[h]=js(Math.floor(T[h]),0,255),T[p]=js(Math.floor(T[p]),0,255),T[m]=js(Math.floor(T[m]),0,255),T[v]=js(Math.floor(T[v]),0,255),A>=1&&b.sphericalHarmonicsDegree>=1){for(let L=0;L<9;L++){const N=x[C_t+L%3];T[g[L]]=N[e[b.sphericalHarmonicsDegree1Fields[L]]]}if(A>=2&&b.sphericalHarmonicsDegree>=2)for(let L=0;L<15;L++){const N=x[A_t+L%5];T[g[9+L]]=N[e[b.sphericalHarmonicsDegree2Fields[L]]]}}const C=x[E_t][e[D_t]],E=x[gL][e[P_t]],I=x[gL][e[R_t]],P=x[gL][e[k_t]];return t.set(C,E,I,P),t.normalize(),T[u]=t.x,T[c]=t.y,T[d]=t.z,T[f]=t.w,T[r]=GA(e[L_t]),T[i]=GA(e[O_t]),T[a]=GA(e[N_t]),T}}());let $8=Ox;class U_t{static parseToUncompressedSplatArray(e,t=0){const r=$s.determineHeaderFormatFromPlyBuffer(e);if(r===Rp.PlayCanvasCompressed)return U0.parseToUncompressedSplatArray(e);if(r===Rp.INRIAV1)return new Z3().parseToUncompressedSplatArray(e,t);if(r===Rp.INRIAV2)return new $8().parseToUncompressedSplatArray(e,t)}}class bU{constructor(e,t,r,i){this.sectionCount=e,this.sectionFilters=t,this.groupingParameters=r,this.partitionGenerator=i}partitionUncompressedSplatArray(e){let t,r,i;if(this.partitionGenerator){const s=this.partitionGenerator(e);t=s.groupingParameters,r=s.sectionCount,i=s.sectionFilters}else t=this.groupingParameters,r=this.sectionCount,i=this.sectionFilters;const a=[];for(let s=0;s<r;s++){const o=new hr(e.sphericalHarmonicsDegree),l=i[s];for(let u=0;u<e.splatCount;u++)l(u)&&o.addSplat(e.splats[u]);a.push(o)}return{splatArrays:a,parameters:t}}static getStandardPartitioner(e=0,t=new ft,r=gr.BucketBlockSize,i=gr.BucketSize){const a=s=>{const o=hr.OFFSET.X,l=hr.OFFSET.Y,u=hr.OFFSET.Z;e<=0&&(e=s.splatCount);const c=new ft,d=.5,f=g=>{g.x=Math.floor(g.x/d)*d,g.y=Math.floor(g.y/d)*d,g.z=Math.floor(g.z/d)*d};s.splats.forEach(g=>{c.set(g[o],g[l],g[u]).sub(t),f(c),g.centerDist=c.lengthSq()}),s.splats.sort((g,y)=>{let _=g.centerDist,b=y.centerDist;return _>b?1:-1});const h=[],p=[];e=Math.min(s.splatCount,e);const m=Math.ceil(s.splatCount/e);let v=0;for(let g=0;g<m;g++){let y=v;h.push(_=>_>=y&&_<y+e),p.push({blocksSize:r,bucketSize:i}),v+=e}return{sectionCount:h.length,sectionFilters:h,groupingParameters:p}};return new bU(void 0,void 0,void 0,a)}}class HI{constructor(e,t,r,i,a,s,o){this.splatPartitioner=e,this.alphaRemovalThreshold=t,this.compressionLevel=r,this.sectionSize=i,this.sceneCenter=a?new ft().copy(a):void 0,this.blockSize=s,this.bucketSize=o}generateFromUncompressedSplatArray(e){const t=this.splatPartitioner.partitionUncompressedSplatArray(e);return gr.generateFromUncompressedSplatArrays(t.splatArrays,this.alphaRemovalThreshold,this.compressionLevel,this.sceneCenter,this.blockSize,this.bucketSize,t.parameters)}static getStandardGenerator(e=1,t=1,r=0,i=new ft,a=gr.BucketBlockSize,s=gr.BucketSize){const o=bU.getStandardPartitioner(r,i,a,s);return new HI(o,e,t,r,i,a,s)}}const ls={Downloading:0,Processing:1,Done:2};class SU extends Error{constructor(e){super(e)}}const Ia={DirectToSplatBuffer:0,DirectToSplatArray:1,DownloadBeforeProcessing:2};function jQ(n,e){let t=0;for(let i of n)t+=i.sizeBytes;(!e||e.byteLength<t)&&(e=new ArrayBuffer(t));let r=0;for(let i of n)new Uint8Array(e,r,i.sizeBytes).set(i.data),r+=i.sizeBytes;return e}function KQ(n,e,t,r,i,a,s,o){return e?HI.getStandardGenerator(t,r,i,a,s,o).generateFromUncompressedSplatArray(n):gr.generateFromUncompressedSplatArrays([n],t,0,new ft)}class xU{static loadFromURL(e,t,r,i,a,s,o=!0,l=0,u,c,d,f,h){let p=r?Ia.DirectToSplatBuffer:Ia.DirectToSplatArray;o&&(p=Ia.DirectToSplatArray);const m=fi.ProgressiveLoadSectionSize,v=gr.HeaderSizeBytes+gr.SectionHeaderSizeBytes,g=1;let y,_,b,x,w=0,A=0,T=!1,C=!1,E=!1;const I=cU();let P=0,L=0,N=0,F="",k=null,H=[],U;const B=new TextDecoder,$=new Z3,ee=(re,ne,ae)=>{const pe=re>=100;if(ae&&(H.push({data:ae,sizeBytes:ae.byteLength,startBytes:N,endBytes:N+ae.byteLength}),N+=ae.byteLength),p===Ia.DownloadBeforeProcessing)pe&&I.resolve(H);else{if(T){if(E&&!C){const de=k.headerSizeBytes+k.chunkElement.storageSizeBytes;x=jQ(H,x),x.byteLength>=de&&(U0.readElementData(k.chunkElement,x,k.headerSizeBytes),P=de,L=de,C=!0)}}else if(F+=B.decode(ae),$s.checkTextForEndHeader(F)){const de=$s.determineHeaderFormatFromHeaderText(F);if(de===Rp.INRIAV1)k=$.decodeHeaderText(F),w=k.splatCount,C=!0,E=!1;else if(de===Rp.PlayCanvasCompressed)k=U0.decodeHeaderText(F),w=k.vertexElement.count,E=!0;else{if(r)throw new SU("PlyLoader.loadFromURL() -> Selected Ply format cannot be directly loaded.");p=Ia.DownloadBeforeProcessing;return}l=Math.min(l,k.sphericalHarmonicsDegree);const me=gr.CompressionLevels[0].SphericalHarmonicsDegrees[l],ke=v+me.BytesPerSplat*w;p===Ia.DirectToSplatBuffer?(_=new ArrayBuffer(ke),gr.writeHeaderToBuffer({versionMajor:gr.CurrentMajorVersion,versionMinor:gr.CurrentMinorVersion,maxSectionCount:g,sectionCount:g,maxSplatCount:w,splatCount:A,compressionLevel:0,sceneCenter:new ft},_)):U=new hr(l),P=k.headerSizeBytes,L=k.headerSizeBytes,T=!0}if(T&&C){if(H.length>0&&(y=jQ(H,y),N-P>m||pe)){const me=N-L,ke=Math.floor(me/k.bytesPerSplat),Be=ke*k.bytesPerSplat,Xe=me-Be,Ye=A+ke,Y=L-H[0].startBytes,he=new DataView(y,Y,Be),le=gr.CompressionLevels[0].SphericalHarmonicsDegrees[l],Ke=A*le.BytesPerSplat+v;if(p===Ia.DirectToSplatBuffer?E?U0.parseToUncompressedSplatBufferSection(k.chunkElement,k.vertexElement,0,ke-1,A,he,0,_,Ke):$.parseToUncompressedSplatBufferSection(k,0,ke-1,he,0,_,Ke,l):E?U0.parseToUncompressedSplatArraySection(k.chunkElement,k.vertexElement,0,ke-1,A,he,0,U):$.parseToUncompressedSplatArraySection(k,0,ke-1,he,0,U,l),A=Ye,p===Ia.DirectToSplatBuffer&&(b||(gr.writeSectionHeaderToBuffer({maxSplatCount:w,splatCount:A,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0,sphericalHarmonicsDegree:l},0,_,gr.HeaderSizeBytes),b=new gr(_,!1)),b.updateLoadedCounts(1,A),i&&i(b,pe)),P+=m,L+=Be,Xe===0)H=[];else{let Ue=[],Ze=0;for(let je=H.length-1;je>=0;je--){const He=H[je];if(Ze+=He.sizeBytes,Ue.unshift(He),Ze>=Xe)break}H=Ue}}pe&&(p===Ia.DirectToSplatBuffer?I.resolve(b):I.resolve(U))}}t&&t(re,ne,ls.Downloading)};return t&&t(0,"0%",ls.Downloading),uU(e,ee,!1,u).then(()=>(t&&t(0,"0%",ls.Processing),I.promise.then(re=>{if(t&&t(100,"100%",ls.Done),p===Ia.DownloadBeforeProcessing){const ne=H.map(ae=>ae.data);return new Blob(ne).arrayBuffer().then(ae=>xU.loadFromFileData(ae,a,s,o,l,c,d,f,h))}else return p===Ia.DirectToSplatBuffer?re:Rc(()=>KQ(re,o,a,s,c,d,f,h))})))}static loadFromFileData(e,t,r,i,a=0,s,o,l,u){return Rc(()=>U_t.parseToUncompressedSplatArray(e,a)).then(c=>KQ(c,i,t,r,s,o,l,u))}}const $i=class $i{static parseToUncompressedSplatBufferSection(e,t,r,i,a,s){const o=gr.CompressionLevels[0].BytesPerCenter,l=gr.CompressionLevels[0].BytesPerScale,u=gr.CompressionLevels[0].BytesPerRotation,c=gr.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat;for(let d=e;d<=t;d++){const f=d*$i.RowSizeBytes+i,h=new Float32Array(r,f,3),p=new Float32Array(r,f+$i.CenterSizeBytes,3),m=new Uint8Array(r,f+$i.CenterSizeBytes+$i.ScaleSizeBytes,4),v=new Uint8Array(r,f+$i.CenterSizeBytes+$i.ScaleSizeBytes+$i.RotationSizeBytes,4),g=new wa((v[1]-128)/128,(v[2]-128)/128,(v[3]-128)/128,(v[0]-128)/128);g.normalize();const y=d*c+s,_=new Float32Array(a,y,3),b=new Float32Array(a,y+o,3),x=new Float32Array(a,y+o+l,4),w=new Uint8Array(a,y+o+l+u,4);_[0]=h[0],_[1]=h[1],_[2]=h[2],b[0]=p[0],b[1]=p[1],b[2]=p[2],x[0]=g.w,x[1]=g.x,x[2]=g.y,x[3]=g.z,w[0]=m[0],w[1]=m[1],w[2]=m[2],w[3]=m[3]}}static parseToUncompressedSplatArraySection(e,t,r,i,a){for(let s=e;s<=t;s++){const o=s*$i.RowSizeBytes+i,l=new Float32Array(r,o,3),u=new Float32Array(r,o+$i.CenterSizeBytes,3),c=new Uint8Array(r,o+$i.CenterSizeBytes+$i.ScaleSizeBytes,4),d=new Uint8Array(r,o+$i.CenterSizeBytes+$i.ScaleSizeBytes+$i.RotationSizeBytes,4),f=new wa((d[1]-128)/128,(d[2]-128)/128,(d[3]-128)/128,(d[0]-128)/128);f.normalize(),a.addSplatFromComonents(l[0],l[1],l[2],u[0],u[1],u[2],f.w,f.x,f.y,f.z,c[0],c[1],c[2],c[3])}}static parseStandardSplatToUncompressedSplatArray(e){const t=e.byteLength/$i.RowSizeBytes,r=new hr;for(let i=0;i<t;i++){const a=i*$i.RowSizeBytes,s=new Float32Array(e,a,3),o=new Float32Array(e,a+$i.CenterSizeBytes,3),l=new Uint8Array(e,a+$i.CenterSizeBytes+$i.ScaleSizeBytes,4),u=new Uint8Array(e,a+$i.CenterSizeBytes+$i.ScaleSizeBytes+$i.ColorSizeBytes,4),c=new wa((u[1]-128)/128,(u[2]-128)/128,(u[3]-128)/128,(u[0]-128)/128);c.normalize(),r.addSplatFromComonents(s[0],s[1],s[2],o[0],o[1],o[2],c.w,c.x,c.y,c.z,l[0],l[1],l[2],l[3])}return r}};En($i,"RowSizeBytes",32),En($i,"CenterSizeBytes",12),En($i,"ScaleSizeBytes",12),En($i,"RotationSizeBytes",4),En($i,"ColorSizeBytes",4);let b0=$i;function XQ(n,e,t,r,i,a,s,o){return e?HI.getStandardGenerator(t,r,i,a,s,o).generateFromUncompressedSplatArray(n):gr.generateFromUncompressedSplatArrays([n],t,0,new ft)}class wU{static loadFromURL(e,t,r,i,a,s,o=!0,l,u,c,d,f){let h=r?Ia.DirectToSplatBuffer:Ia.DirectToSplatArray;o&&(h=Ia.DirectToSplatArray);const p=gr.HeaderSizeBytes+gr.SectionHeaderSizeBytes,m=fi.ProgressiveLoadSectionSize,v=1;let g,y,_,b=0,x=0,w;const A=cU();let T=0,C=0,E=[];const I=(P,L,N,F)=>{const k=P>=100;if(N&&E.push(N),h===Ia.DownloadBeforeProcessing){k&&A.resolve(E);return}if(!F){if(r)throw new SU("Cannon directly load .splat because no file size info is available.");h=Ia.DownloadBeforeProcessing;return}if(!g){b=F/b0.RowSizeBytes,g=new ArrayBuffer(F);const H=gr.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,U=p+H*b;h===Ia.DirectToSplatBuffer?(y=new ArrayBuffer(U),gr.writeHeaderToBuffer({versionMajor:gr.CurrentMajorVersion,versionMinor:gr.CurrentMinorVersion,maxSectionCount:v,sectionCount:v,maxSplatCount:b,splatCount:x,compressionLevel:0,sceneCenter:new ft},y)):w=new hr(0)}if(N){new Uint8Array(g,C,N.byteLength).set(new Uint8Array(N)),C+=N.byteLength;const H=C-T;if(H>m||k){const B=(k?H:m)/b0.RowSizeBytes,$=x+B;h===Ia.DirectToSplatBuffer?b0.parseToUncompressedSplatBufferSection(x,$-1,g,0,y,p):b0.parseToUncompressedSplatArraySection(x,$-1,g,0,w),x=$,h===Ia.DirectToSplatBuffer&&(_||(gr.writeSectionHeaderToBuffer({maxSplatCount:b,splatCount:x,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0},0,y,gr.HeaderSizeBytes),_=new gr(y,!1)),_.updateLoadedCounts(1,x),i&&i(_,k)),T+=m}}k&&(h===Ia.DirectToSplatBuffer?A.resolve(_):A.resolve(w)),t&&t(P,L,ls.Downloading)};return t&&t(0,"0%",ls.Downloading),uU(e,I,!1,l).then(()=>(t&&t(0,"0%",ls.Processing),A.promise.then(P=>(t&&t(100,"100%",ls.Done),h===Ia.DownloadBeforeProcessing?new Blob(E).arrayBuffer().then(L=>wU.loadFromFileData(L,a,s,o,u,c,d,f)):h===Ia.DirectToSplatBuffer?P:Rc(()=>XQ(P,o,a,s,u,c,d,f))))))}static loadFromFileData(e,t,r,i,a,s,o,l){return Rc(()=>{const u=b0.parseStandardSplatToUncompressedSplatArray(e);return XQ(u,i,t,r,a,s,o,l)})}}const Ky=class Ky{static checkVersion(e){const t=gr.CurrentMajorVersion,r=gr.CurrentMinorVersion,i=gr.parseHeader(e);if(i.versionMajor===t&&i.versionMinor>=r||i.versionMajor>t)return!0;throw new Error(`KSplat version not supported: v${i.versionMajor}.${i.versionMinor}. Minimum required: v${t}.${r}`)}static loadFromURL(e,t,r,i,a){let s,o,l,u,c=!1,d=!1,f,h=[],p=!1,m=!1,v=0,g=0,y=0,_=!1,b=!1,x=!1,w=[];const A=cU(),T=()=>{!c&&!d&&v>=gr.HeaderSizeBytes&&(d=!0,new Blob(w).arrayBuffer().then(F=>{l=new ArrayBuffer(gr.HeaderSizeBytes),new Uint8Array(l).set(new Uint8Array(F,0,gr.HeaderSizeBytes)),Ky.checkVersion(l),d=!1,c=!0,u=gr.parseHeader(l),window.setTimeout(()=>{I()},1)}))};let C=0;const E=()=>{C===0&&(C++,window.setTimeout(()=>{C--,P()},1))},I=()=>{const N=()=>{m=!0,new Blob(w).arrayBuffer().then(k=>{m=!1,p=!0,f=new ArrayBuffer(u.maxSectionCount*gr.SectionHeaderSizeBytes),new Uint8Array(f).set(new Uint8Array(k,gr.HeaderSizeBytes,u.maxSectionCount*gr.SectionHeaderSizeBytes)),h=gr.parseSectionHeaders(u,f,0,!1);let H=0;for(let B=0;B<u.maxSectionCount;B++)H+=h[B].storageSizeBytes;const U=gr.HeaderSizeBytes+u.maxSectionCount*gr.SectionHeaderSizeBytes+H;if(!s){s=new ArrayBuffer(U);let B=0;for(let $=0;$<w.length;$++){const ee=w[$];new Uint8Array(s,B,ee.byteLength).set(new Uint8Array(ee)),B+=ee.byteLength}}y=gr.HeaderSizeBytes+gr.SectionHeaderSizeBytes*u.maxSectionCount;for(let B=0;B<=h.length&&B<u.maxSectionCount;B++)y+=h[B].storageSizeBytes;E()})};!m&&!p&&c&&v>=gr.HeaderSizeBytes+gr.SectionHeaderSizeBytes*u.maxSectionCount&&N()},P=()=>{if(x)return;x=!0;const N=()=>{if(x=!1,p){if(b)return;if(_=v>=y,v-g>fi.ProgressiveLoadSectionSize||_){g+=fi.ProgressiveLoadSectionSize,b=g>=y,o||(o=new gr(s,!1));const k=gr.HeaderSizeBytes+gr.SectionHeaderSizeBytes*u.maxSectionCount;let H=0,U=0,B=0;for(let re=0;re<u.maxSectionCount;re++){const ne=h[re],ae=H+ne.partiallyFilledBucketCount*4+ne.bucketStorageSizeBytes*ne.bucketCount,pe=k+ae;if(g>=pe){U++;const de=g-pe,Be=gr.CompressionLevels[u.compressionLevel].SphericalHarmonicsDegrees[ne.sphericalHarmonicsDegree].BytesPerSplat;let Xe=Math.floor(de/Be);Xe=Math.min(Xe,ne.maxSplatCount),B+=Xe,o.updateLoadedCounts(U,B),o.updateSectionLoadedCounts(re,Xe)}else break;H+=ne.storageSizeBytes}i(o,b);const $=g/y*100,ee=$.toFixed(2)+"%";t&&t($,ee,ls.Downloading),b?A.resolve(o):P()}}};window.setTimeout(N,fi.ProgressiveLoadSectionDelayDuration)};return uU(e,(N,F,k)=>{k&&(w.push(k),s&&new Uint8Array(s,v,k.byteLength).set(new Uint8Array(k)),v+=k.byteLength),r?(T(),I(),P()):t&&t(N,F,ls.Downloading)},!r,a).then(N=>(t&&t(0,"0%",ls.Processing),(r?A.promise:Ky.loadFromFileData(N)).then(k=>(t&&t(100,"100%",ls.Done),k))))}static loadFromFileData(e){return Rc(()=>(Ky.checkVersion(e),new gr(e)))}};En(Ky,"downloadFile",function(){let e;return function(t,r){const i=new Blob([t.bufferData],{type:"application/octet-stream"});e||(e=document.createElement("a"),document.body.appendChild(e)),e.download=r,e.href=URL.createObjectURL(i),e.click()}}());let G8=Ky;const wf={Splat:0,KSplat:1,Ply:2},YQ=n=>n.endsWith(".ply")?wf.Ply:n.endsWith(".splat")?wf.Splat:n.endsWith(".ksplat")?wf.KSplat:null,QQ={type:"change"},yL={type:"start"},ZQ={type:"end"},WA=new she,JQ=new op,z_t=Math.cos(70*nhe.DEG2RAD);class qA extends Uv{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ft,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"KeyA",UP:"KeyW",RIGHT:"KeyD",BOTTOM:"KeyS"},this.mouseButtons={LEFT:Qg.ROTATE,MIDDLE:Qg.DOLLY,RIGHT:Qg.PAN},this.touches={ONE:Zg.ROTATE,TWO:Zg.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(G){G.addEventListener("keydown",ye),this._domElementKeyEvents=G},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ye),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,this.clearDampedRotation(),this.clearDampedPan(),r.object.updateProjectionMatrix(),r.dispatchEvent(QQ),r.update(),a=i.NONE},this.clearDampedRotation=function(){l.theta=0,l.phi=0},this.clearDampedPan=function(){c.set(0,0,0)},this.update=function(){const G=new ft,_e=new wa().setFromUnitVectors(e.up,new ft(0,1,0)),ve=_e.clone().invert(),Le=new ft,we=new wa,Ie=new ft,wt=2*Math.PI;return function(){_e.setFromUnitVectors(e.up,new ft(0,1,0)),ve.copy(_e).invert();const Rt=r.object.position;G.copy(Rt).sub(r.target),G.applyQuaternion(_e),o.setFromVector3(G),r.autoRotate&&a===i.NONE&&I(C()),r.enableDamping?(o.theta+=l.theta*r.dampingFactor,o.phi+=l.phi*r.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let dt=r.minAzimuthAngle,Mt=r.maxAzimuthAngle;isFinite(dt)&&isFinite(Mt)&&(dt<-Math.PI?dt+=wt:dt>Math.PI&&(dt-=wt),Mt<-Math.PI?Mt+=wt:Mt>Math.PI&&(Mt-=wt),dt<=Mt?o.theta=Math.max(dt,Math.min(Mt,o.theta)):o.theta=o.theta>(dt+Mt)/2?Math.max(dt,o.theta):Math.min(Mt,o.theta)),o.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,o.phi)),o.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(c,r.dampingFactor):r.target.add(c),r.zoomToCursor&&w||r.object.isOrthographicCamera?o.radius=B(o.radius):o.radius=B(o.radius*u),G.setFromSpherical(o),G.applyQuaternion(ve),Rt.copy(r.target).add(G),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,c.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),c.set(0,0,0));let Wt=!1;if(r.zoomToCursor&&w){let zt=null;if(r.object.isPerspectiveCamera){const Sn=G.length();zt=B(Sn*u);const On=Sn-zt;r.object.position.addScaledVector(b,On),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Sn=new ft(x.x,x.y,0);Sn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/u)),r.object.updateProjectionMatrix(),Wt=!0;const On=new ft(x.x,x.y,0);On.unproject(r.object),r.object.position.sub(On).add(Sn),r.object.updateMatrixWorld(),zt=G.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;zt!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(zt).add(r.object.position):(WA.origin.copy(r.object.position),WA.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(WA.direction))<z_t?e.lookAt(r.target):(JQ.setFromNormalAndCoplanarPoint(r.object.up,r.target),WA.intersectPlane(JQ,r.target))))}else r.object.isOrthographicCamera&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/u)),r.object.updateProjectionMatrix(),Wt=!0);return u=1,w=!1,Wt||Le.distanceToSquared(r.object.position)>s||8*(1-we.dot(r.object.quaternion))>s||Ie.distanceToSquared(r.target)>0?(r.dispatchEvent(QQ),Le.copy(r.object.position),we.copy(r.object.quaternion),Ie.copy(r.target),Wt=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",At),r.domElement.removeEventListener("pointerdown",je),r.domElement.removeEventListener("pointercancel",ut),r.domElement.removeEventListener("wheel",te),r.domElement.removeEventListener("pointermove",He),r.domElement.removeEventListener("pointerup",ut),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",ye),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=i.NONE;const s=1e-6,o=new uQ,l=new uQ;let u=1;const c=new ft,d=new cr,f=new cr,h=new cr,p=new cr,m=new cr,v=new cr,g=new cr,y=new cr,_=new cr,b=new ft,x=new cr;let w=!1;const A=[],T={};function C(){return 2*Math.PI/60/60*r.autoRotateSpeed}function E(){return Math.pow(.95,r.zoomSpeed)}function I(G){l.theta-=G}function P(G){l.phi-=G}const L=function(){const G=new ft;return function(ve,Le){G.setFromMatrixColumn(Le,0),G.multiplyScalar(-ve),c.add(G)}}(),N=function(){const G=new ft;return function(ve,Le){r.screenSpacePanning===!0?G.setFromMatrixColumn(Le,1):(G.setFromMatrixColumn(Le,0),G.crossVectors(r.object.up,G)),G.multiplyScalar(ve),c.add(G)}}(),F=function(){const G=new ft;return function(ve,Le){const we=r.domElement;if(r.object.isPerspectiveCamera){const Ie=r.object.position;G.copy(Ie).sub(r.target);let wt=G.length();wt*=Math.tan(r.object.fov/2*Math.PI/180),L(2*ve*wt/we.clientHeight,r.object.matrix),N(2*Le*wt/we.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(L(ve*(r.object.right-r.object.left)/r.object.zoom/we.clientWidth,r.object.matrix),N(Le*(r.object.top-r.object.bottom)/r.object.zoom/we.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function k(G){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?u/=G:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function H(G){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?u*=G:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function U(G){if(!r.zoomToCursor)return;w=!0;const _e=r.domElement.getBoundingClientRect(),ve=G.clientX-_e.left,Le=G.clientY-_e.top,we=_e.width,Ie=_e.height;x.x=ve/we*2-1,x.y=-(Le/Ie)*2+1,b.set(x.x,x.y,1).unproject(e).sub(e.position).normalize()}function B(G){return Math.max(r.minDistance,Math.min(r.maxDistance,G))}function $(G){d.set(G.clientX,G.clientY)}function ee(G){U(G),g.set(G.clientX,G.clientY)}function re(G){p.set(G.clientX,G.clientY)}function ne(G){f.set(G.clientX,G.clientY),h.subVectors(f,d).multiplyScalar(r.rotateSpeed);const _e=r.domElement;I(2*Math.PI*h.x/_e.clientHeight),P(2*Math.PI*h.y/_e.clientHeight),d.copy(f),r.update()}function ae(G){y.set(G.clientX,G.clientY),_.subVectors(y,g),_.y>0?k(E()):_.y<0&&H(E()),g.copy(y),r.update()}function pe(G){m.set(G.clientX,G.clientY),v.subVectors(m,p).multiplyScalar(r.panSpeed),F(v.x,v.y),p.copy(m),r.update()}function de(G){U(G),G.deltaY<0?H(E()):G.deltaY>0&&k(E()),r.update()}function me(G){let _e=!1;switch(G.code){case r.keys.UP:G.ctrlKey||G.metaKey||G.shiftKey?P(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):F(0,r.keyPanSpeed),_e=!0;break;case r.keys.BOTTOM:G.ctrlKey||G.metaKey||G.shiftKey?P(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):F(0,-r.keyPanSpeed),_e=!0;break;case r.keys.LEFT:G.ctrlKey||G.metaKey||G.shiftKey?I(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):F(r.keyPanSpeed,0),_e=!0;break;case r.keys.RIGHT:G.ctrlKey||G.metaKey||G.shiftKey?I(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):F(-r.keyPanSpeed,0),_e=!0;break}_e&&(G.preventDefault(),r.update())}function ke(){if(A.length===1)d.set(A[0].pageX,A[0].pageY);else{const G=.5*(A[0].pageX+A[1].pageX),_e=.5*(A[0].pageY+A[1].pageY);d.set(G,_e)}}function Be(){if(A.length===1)p.set(A[0].pageX,A[0].pageY);else{const G=.5*(A[0].pageX+A[1].pageX),_e=.5*(A[0].pageY+A[1].pageY);p.set(G,_e)}}function Xe(){const G=A[0].pageX-A[1].pageX,_e=A[0].pageY-A[1].pageY,ve=Math.sqrt(G*G+_e*_e);g.set(0,ve)}function Ye(){r.enableZoom&&Xe(),r.enablePan&&Be()}function Y(){r.enableZoom&&Xe(),r.enableRotate&&ke()}function he(G){if(A.length==1)f.set(G.pageX,G.pageY);else{const ve=ot(G),Le=.5*(G.pageX+ve.x),we=.5*(G.pageY+ve.y);f.set(Le,we)}h.subVectors(f,d).multiplyScalar(r.rotateSpeed);const _e=r.domElement;I(2*Math.PI*h.x/_e.clientHeight),P(2*Math.PI*h.y/_e.clientHeight),d.copy(f)}function le(G){if(A.length===1)m.set(G.pageX,G.pageY);else{const _e=ot(G),ve=.5*(G.pageX+_e.x),Le=.5*(G.pageY+_e.y);m.set(ve,Le)}v.subVectors(m,p).multiplyScalar(r.panSpeed),F(v.x,v.y),p.copy(m)}function Ke(G){const _e=ot(G),ve=G.pageX-_e.x,Le=G.pageY-_e.y,we=Math.sqrt(ve*ve+Le*Le);y.set(0,we),_.set(0,Math.pow(y.y/g.y,r.zoomSpeed)),k(_.y),g.copy(y)}function Ue(G){r.enableZoom&&Ke(G),r.enablePan&&le(G)}function Ze(G){r.enableZoom&&Ke(G),r.enableRotate&&he(G)}function je(G){r.enabled!==!1&&(A.length===0&&(r.domElement.setPointerCapture(G.pointerId),r.domElement.addEventListener("pointermove",He),r.domElement.addEventListener("pointerup",ut)),It(G),G.pointerType==="touch"?Ve(G):ge(G))}function He(G){r.enabled!==!1&&(G.pointerType==="touch"?et(G):q(G))}function ut(G){De(G),A.length===0&&(r.domElement.releasePointerCapture(G.pointerId),r.domElement.removeEventListener("pointermove",He),r.domElement.removeEventListener("pointerup",ut)),r.dispatchEvent(ZQ),a=i.NONE}function ge(G){let _e;switch(G.button){case 0:_e=r.mouseButtons.LEFT;break;case 1:_e=r.mouseButtons.MIDDLE;break;case 2:_e=r.mouseButtons.RIGHT;break;default:_e=-1}switch(_e){case Qg.DOLLY:if(r.enableZoom===!1)return;ee(G),a=i.DOLLY;break;case Qg.ROTATE:if(G.ctrlKey||G.metaKey||G.shiftKey){if(r.enablePan===!1)return;re(G),a=i.PAN}else{if(r.enableRotate===!1)return;$(G),a=i.ROTATE}break;case Qg.PAN:if(G.ctrlKey||G.metaKey||G.shiftKey){if(r.enableRotate===!1)return;$(G),a=i.ROTATE}else{if(r.enablePan===!1)return;re(G),a=i.PAN}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(yL)}function q(G){switch(a){case i.ROTATE:if(r.enableRotate===!1)return;ne(G);break;case i.DOLLY:if(r.enableZoom===!1)return;ae(G);break;case i.PAN:if(r.enablePan===!1)return;pe(G);break}}function te(G){r.enabled===!1||r.enableZoom===!1||a!==i.NONE||(G.preventDefault(),r.dispatchEvent(yL),de(G),r.dispatchEvent(ZQ))}function ye(G){r.enabled===!1||r.enablePan===!1||me(G)}function Ve(G){switch(Tt(G),A.length){case 1:switch(r.touches.ONE){case Zg.ROTATE:if(r.enableRotate===!1)return;ke(),a=i.TOUCH_ROTATE;break;case Zg.PAN:if(r.enablePan===!1)return;Be(),a=i.TOUCH_PAN;break;default:a=i.NONE}break;case 2:switch(r.touches.TWO){case Zg.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ye(),a=i.TOUCH_DOLLY_PAN;break;case Zg.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Y(),a=i.TOUCH_DOLLY_ROTATE;break;default:a=i.NONE}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(yL)}function et(G){switch(Tt(G),a){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;he(G),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;le(G),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ue(G),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Ze(G),r.update();break;default:a=i.NONE}}function At(G){r.enabled!==!1&&G.preventDefault()}function It(G){A.push(G)}function De(G){delete T[G.pointerId];for(let _e=0;_e<A.length;_e++)if(A[_e].pointerId==G.pointerId){A.splice(_e,1);return}}function Tt(G){let _e=T[G.pointerId];_e===void 0&&(_e=new cr,T[G.pointerId]=_e),_e.set(G.pageX,G.pageY)}function ot(G){const _e=G.pointerId===A[0].pointerId?A[1]:A[0];return T[_e.pointerId]}r.domElement.addEventListener("contextmenu",At),r.domElement.addEventListener("pointerdown",je),r.domElement.addEventListener("pointercancel",ut),r.domElement.addEventListener("wheel",te,{passive:!1}),this.update()}}const H_t=(n,e,t,r,i)=>{const a=performance.now();let s=n.style.display==="none"?0:parseFloat(n.style.opacity);isNaN(s)&&(s=1);const o=window.setInterval(()=>{const u=performance.now()-a;let c=Math.min(u/r,1);c>.999&&(c=1);let d;e?(d=(1-c)*s,d<1e-4&&(d=0)):d=(1-s)*c+s,d>0?(n.style.display=t,n.style.opacity=d):n.style.display="none",c>=1&&(i&&i(),window.clearInterval(o))},16);return o},V_t=500,t4=class t4{constructor(e,t){this.taskIDGen=0,this.elementID=t4.elementIDGen++,this.tasks=[],this.message=e||"Loading...",this.container=t||document.body,this.spinnerContainerOuter=document.createElement("div"),this.spinnerContainerOuter.className=`spinnerOuterContainer${this.elementID}`,this.spinnerContainerOuter.style.display="none",this.spinnerContainerPrimary=document.createElement("div"),this.spinnerContainerPrimary.className=`spinnerContainerPrimary${this.elementID}`,this.spinnerPrimary=document.createElement("div"),this.spinnerPrimary.classList.add(`spinner${this.elementID}`,`spinnerPrimary${this.elementID}`),this.messageContainerPrimary=document.createElement("div"),this.messageContainerPrimary.classList.add(`messageContainer${this.elementID}`,`messageContainerPrimary${this.elementID}`),this.messageContainerPrimary.innerHTML=this.message,this.spinnerContainerMin=document.createElement("div"),this.spinnerContainerMin.className=`spinnerContainerMin${this.elementID}`,this.spinnerMin=document.createElement("div"),this.spinnerMin.classList.add(`spinner${this.elementID}`,`spinnerMin${this.elementID}`),this.messageContainerMin=document.createElement("div"),this.messageContainerMin.classList.add(`messageContainer${this.elementID}`,`messageContainerMin${this.elementID}`),this.messageContainerMin.innerHTML=this.message,this.spinnerContainerPrimary.appendChild(this.spinnerPrimary),this.spinnerContainerPrimary.appendChild(this.messageContainerPrimary),this.spinnerContainerOuter.appendChild(this.spinnerContainerPrimary),this.spinnerContainerMin.appendChild(this.spinnerMin),this.spinnerContainerMin.appendChild(this.messageContainerMin),this.spinnerContainerOuter.appendChild(this.spinnerContainerMin);const r=document.createElement("style");r.innerHTML=`

            .spinnerOuterContainer${this.elementID} {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .messageContainer${this.elementID} {
                height: 20px;
                font-family: arial;
                font-size: 12pt;
                color: #ffffff;
                text-align: center;
                vertical-align: middle;
            }

            .spinner${this.elementID} {
                padding: 15px;
                background: #07e8d6;
                z-index:99999;
            
                aspect-ratio: 1;
                border-radius: 50%;
                --_m: 
                    conic-gradient(#0000,#000),
                    linear-gradient(#000 0 0) content-box;
                -webkit-mask: var(--_m);
                    mask: var(--_m);
                -webkit-mask-composite: source-out;
                    mask-composite: subtract;
                box-sizing: border-box;
                animation: load 1s linear infinite;
            }

            .spinnerContainerPrimary${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 10px;
                margin: 0;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-80px, -80px);
                width: 180px;
                pointer-events: auto;
            }

            .spinnerPrimary${this.elementID} {
                width: 120px;
                margin-left: 30px;
            }

            .messageContainerPrimary${this.elementID} {
                padding-top: 15px;
            }

            .spinnerContainerMin${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                display: flex;
                flex-direction: left;
                pointer-events: auto;
                min-width: 250px;
            }

            .messageContainerMin${this.elementID} {
                margin-right: 15px;
            }

            .spinnerMin${this.elementID} {
                width: 50px;
                height: 50px;
                margin-left: 15px;
                margin-right: 25px;
            }

            .messageContainerMin${this.elementID} {
                padding-top: 15px;
            }
            
            @keyframes load {
                to{transform: rotate(1turn)}
            }

        `,this.spinnerContainerOuter.appendChild(r),this.container.appendChild(this.spinnerContainerOuter),this.setMinimized(!1,!0),this.fadeTransitions=[]}addTask(e){const t={message:e,id:this.taskIDGen++};return this.tasks.push(t),this.update(),t.id}removeTask(e){let t=0;for(let r of this.tasks){if(r.id===e){this.tasks.splice(t,1);break}t++}this.update()}removeAllTasks(){this.tasks=[],this.update()}setMessageForTask(e,t){for(let r of this.tasks)if(r.id===e){r.message=t;break}this.update()}update(){this.tasks.length>0?(this.show(),this.setMessage(this.tasks[this.tasks.length-1].message)):this.hide()}show(){this.spinnerContainerOuter.style.display="block",this.visible=!0}hide(){this.spinnerContainerOuter.style.display="none",this.visible=!1}setContainer(e){this.container&&this.spinnerContainerOuter.parentElement===this.container&&this.container.removeChild(this.spinnerContainerOuter),e&&(this.container=e,this.container.appendChild(this.spinnerContainerOuter),this.spinnerContainerOuter.style.zIndex=this.container.style.zIndex+1)}setMinimized(e,t){const r=(i,a,s,o,l)=>{s?i.style.display=a?o:"none":this.fadeTransitions[l]=H_t(i,!a,o,V_t,()=>{this.fadeTransitions[l]=null})};r(this.spinnerContainerPrimary,!e,t,"block",0),r(this.spinnerContainerMin,e,t,"flex",1),this.minimized=e}setMessage(e){this.messageContainerPrimary.innerHTML=e,this.messageContainerMin.innerHTML=e}};En(t4,"elementIDGen",0);let W8=t4;class $_t{constructor(e){this.idGen=0,this.tasks=[],this.container=e||document.body,this.progressBarContainerOuter=document.createElement("div"),this.progressBarContainerOuter.className="progressBarOuterContainer",this.progressBarContainerOuter.style.display="none",this.progressBarBox=document.createElement("div"),this.progressBarBox.className="progressBarBox",this.progressBarBackground=document.createElement("div"),this.progressBarBackground.className="progressBarBackground",this.progressBar=document.createElement("div"),this.progressBar.className="progressBar",this.progressBarBackground.appendChild(this.progressBar),this.progressBarBox.appendChild(this.progressBarBackground),this.progressBarContainerOuter.appendChild(this.progressBarBox);const t=document.createElement("style");t.innerHTML=`

            .progressBarOuterContainer {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .progressBarBox {
                z-index:99999;
                padding: 7px 9px 5px 7px;
                background-color: rgba(190, 190, 190, 0.75);
                border: #555555 1px solid;
                border-radius: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                width: 180px;
                height: 30px;
                pointer-events: auto;
            }

            .progressBarBackground {
                width: 100%;
                height: 25px;
                border-radius:10px;
                background-color: rgba(128, 128, 128, 0.75);
                border: #444444 1px solid;
                box-shadow: inset 0 0 10px #333333;
            }

            .progressBar {
                height: 25px;
                width: 0px;
                border-radius:10px;
                background-color: rgba(0, 200, 0, 0.75);
                box-shadow: inset 0 0 10px #003300;
            }

        `,this.progressBarContainerOuter.appendChild(t),this.container.appendChild(this.progressBarContainerOuter)}show(){this.progressBarContainerOuter.style.display="block"}hide(){this.progressBarContainerOuter.style.display="none"}setProgress(e){this.progressBar.style.width=e+"%"}setContainer(e){this.container&&this.progressBarContainerOuter.parentElement===this.container&&this.container.removeChild(this.progressBarContainerOuter),e&&(this.container=e,this.container.appendChild(this.progressBarContainerOuter),this.progressBarContainerOuter.style.zIndex=this.container.style.zIndex+1)}}class G_t{constructor(e){En(this,"update",function(e,t,r,i,a,s,o,l,u,c,d,f,h,p){const m=`${t.x.toFixed(5)}, ${t.y.toFixed(5)}, ${t.z.toFixed(5)}`;if(this.infoCells.cameraPosition.innerHTML!==m&&(this.infoCells.cameraPosition.innerHTML=m),r){const g=r,y=`${g.x.toFixed(5)}, ${g.y.toFixed(5)}, ${g.z.toFixed(5)}`;this.infoCells.cameraLookAt.innerHTML!==y&&(this.infoCells.cameraLookAt.innerHTML=y)}const v=`${i.x.toFixed(5)}, ${i.y.toFixed(5)}, ${i.z.toFixed(5)}`;if(this.infoCells.cameraUp.innerHTML!==v&&(this.infoCells.cameraUp.innerHTML=v),this.infoCells.orthographicCamera.innerHTML=a?"Orthographic":"Perspective",s){const g=s,y=`${g.x.toFixed(5)}, ${g.y.toFixed(5)}, ${g.z.toFixed(5)}`;this.infoCells.cursorPosition.innerHTML=y}else this.infoCells.cursorPosition.innerHTML="N/A";this.infoCells.fps.innerHTML=o,this.infoCells.renderWindow.innerHTML=`${e.x} x ${e.y}`,this.infoCells.renderSplatCount.innerHTML=`${u} splats out of ${l} (${c.toFixed(2)}%)`,this.infoCells.sortTime.innerHTML=`${d.toFixed(3)} ms`,this.infoCells.focalAdjustment.innerHTML=`${f.toFixed(3)}`,this.infoCells.splatScale.innerHTML=`${h.toFixed(3)}`,this.infoCells.pointCloudMode.innerHTML=`${p}`});this.container=e||document.body,this.infoCells={};const t=[["Camera position","cameraPosition"],["Camera look-at","cameraLookAt"],["Camera up","cameraUp"],["Camera mode","orthographicCamera"],["Cursor position","cursorPosition"],["FPS","fps"],["Rendering:","renderSplatCount"],["Sort time","sortTime"],["Render window","renderWindow"],["Focal adjustment","focalAdjustment"],["Splat scale","splatScale"],["Point cloud mode","pointCloudMode"]];this.infoPanelContainer=document.createElement("div");const r=document.createElement("style");r.innerHTML=`

            .infoPanel {
                width: 430px;
                padding: 10px;
                background-color: rgba(50, 50, 50, 0.85);
                border: #555555 2px solid;
                color: #dddddd;
                border-radius: 10px;
                z-index: 9999;
                font-family: arial;
                font-size: 11pt;
                text-align: left;
                margin: 0;
                top: 10px;
                left:10px;
                position: absolute;
                pointer-events: auto;
            }

            .info-panel-cell {
                margin-bottom: 5px;
                padding-bottom: 2px;
            }

            .label-cell {
                font-weight: bold;
                font-size: 12pt;
                width: 140px;
            }

        `,this.infoPanelContainer.append(r),this.infoPanel=document.createElement("div"),this.infoPanel.className="infoPanel";const i=document.createElement("div");i.style.display="table";for(let a of t){const s=document.createElement("div");s.style.display="table-row",s.className="info-panel-row";const o=document.createElement("div");o.style.display="table-cell",o.innerHTML=`${a[0]}: `,o.classList.add("info-panel-cell","label-cell");const l=document.createElement("div");l.style.display="table-cell",l.style.width="10px",l.innerHTML=" ",l.className="info-panel-cell";const u=document.createElement("div");u.style.display="table-cell",u.innerHTML="",u.className="info-panel-cell",this.infoCells[a[1]]=u,s.appendChild(o),s.appendChild(l),s.appendChild(u),i.appendChild(s)}this.infoPanel.appendChild(i),this.infoPanelContainer.append(this.infoPanel),this.infoPanelContainer.style.display="none",this.container.appendChild(this.infoPanelContainer),this.visible=!1}setContainer(e){this.container&&this.infoPanelContainer.parentElement===this.container&&this.container.removeChild(this.infoPanelContainer),e&&(this.container=e,this.container.appendChild(this.infoPanelContainer),this.infoPanelContainer.style.zIndex=this.container.style.zIndex+1)}show(){this.infoPanelContainer.style.display="block",this.visible=!0}hide(){this.infoPanelContainer.style.display="none",this.visible=!1}}const eZ=new ft;class W_t extends ms{constructor(e=new ft(0,0,1),t=new ft(0,0,0),r=1,i=.1,a=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper";const l=new lw(i,i,r,32);l.translate(0,r/2,0);const u=new lw(0,o,s,32);u.translate(0,r,0),this.position.copy(t),this.line=new Ua(l,new Tv({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ua(u,new Tv({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{eZ.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(eZ,t)}}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Px{constructor(e){En(this,"updateFocusMarker",function(){const e=new ft,t=new kr,r=new ft;return function(i,a,s){t.copy(a.matrixWorld).invert(),e.copy(i).applyMatrix4(t),e.normalize().multiplyScalar(10),e.applyMatrix4(a.matrixWorld),r.copy(a.position).sub(i);const o=r.length();this.focusMarker.position.copy(i),this.focusMarker.scale.set(o,o,o),this.focusMarker.material.uniforms.realFocusPosition.value.copy(i),this.focusMarker.material.uniforms.viewport.value.copy(s),this.focusMarker.material.uniformsNeedUpdate=!0}}());En(this,"positionAndOrientControlPlane",function(){const e=new wa,t=new ft(0,1,0);return function(r,i){e.setFromUnitVectors(t,i),this.controlPlane.position.copy(r),this.controlPlane.quaternion.copy(e)}}());this.threeScene=e,this.splatRenderTarget=null,this.renderTargetCopyQuad=null,this.renderTargetCopyCamera=null,this.meshCursor=null,this.focusMarker=null,this.controlPlane=null,this.debugRoot=null,this.secondaryDebugRoot=null}updateSplatRenderTargetForRenderDimensions(e,t){this.destroySplatRendertarget(),this.splatRenderTarget=new im(e,t,{format:qo,stencilBuffer:!1,depthBuffer:!0}),this.splatRenderTarget.depthTexture=new aU(e,t),this.splatRenderTarget.depthTexture.format=rv,this.splatRenderTarget.depthTexture.type=Bu}destroySplatRendertarget(){this.splatRenderTarget&&(this.splatRenderTarget=null)}setupRenderTargetCopyObjects(){const e={sourceColorTexture:{type:"t",value:null},sourceDepthTexture:{type:"t",value:null}},t=new ru({vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = vec4( position.xy, 0.0, 1.0 );    
                }
            `,fragmentShader:`
                #include <common>
                #include <packing>
                varying vec2 vUv;
                uniform sampler2D sourceColorTexture;
                uniform sampler2D sourceDepthTexture;
                void main() {
                    vec4 color = texture2D(sourceColorTexture, vUv);
                    float fragDepth = texture2D(sourceDepthTexture, vUv).x;
                    gl_FragDepth = fragDepth;
                    gl_FragColor = vec4(color.rgb, color.a * 2.0);
              }
            `,uniforms:e,depthWrite:!1,depthTest:!1,transparent:!0,blending:$fe,blendSrc:rw,blendSrcAlpha:rw,blendDst:iw,blendDstAlpha:iw});t.extensions.fragDepth=!0,this.renderTargetCopyQuad=new Ua(new y_(2,2),t),this.renderTargetCopyCamera=new oU(-1,1,1,-1,0,1)}destroyRenderTargetCopyObjects(){this.renderTargetCopyQuad&&(Iy(this.renderTargetCopyQuad),this.renderTargetCopyQuad=null)}setupMeshCursor(){if(!this.meshCursor){const e=new sU(.5,1.5,32),t=new Tv({color:16777215}),r=new Ua(e,t);r.rotation.set(0,0,Math.PI),r.position.set(0,1,0);const i=new Ua(e,t);i.position.set(0,-1,0);const a=new Ua(e,t);a.rotation.set(0,0,Math.PI/2),a.position.set(1,0,0);const s=new Ua(e,t);s.rotation.set(0,0,-Math.PI/2),s.position.set(-1,0,0),this.meshCursor=new ms,this.meshCursor.add(r),this.meshCursor.add(i),this.meshCursor.add(a),this.meshCursor.add(s),this.meshCursor.scale.set(.1,.1,.1),this.threeScene.add(this.meshCursor),this.meshCursor.visible=!1}}destroyMeshCursor(){this.meshCursor&&(Iy(this.meshCursor),this.threeScene.remove(this.meshCursor),this.meshCursor=null)}setMeshCursorVisibility(e){this.meshCursor.visible=e}getMeschCursorVisibility(){return this.meshCursor.visible}setMeshCursorPosition(e){this.meshCursor.position.copy(e)}positionAndOrientMeshCursor(e,t){this.meshCursor.position.copy(e),this.meshCursor.up.copy(t.up),this.meshCursor.lookAt(t.position)}setupFocusMarker(){if(!this.focusMarker){const e=new Q3(.5,32,32),t=Px.buildFocusMarkerMaterial();t.depthTest=!1,t.depthWrite=!1,t.transparent=!0,this.focusMarker=new Ua(e,t)}}destroyFocusMarker(){this.focusMarker&&(Iy(this.focusMarker),this.focusMarker=null)}setFocusMarkerVisibility(e){this.focusMarker.visible=e}setFocusMarkerOpacity(e){this.focusMarker.material.uniforms.opacity.value=e,this.focusMarker.material.uniformsNeedUpdate=!0}getFocusMarkerOpacity(){return this.focusMarker.material.uniforms.opacity.value}setupControlPlane(){if(!this.controlPlane){const e=new y_(1,1);e.rotateX(-Math.PI/2);const t=new Tv({color:16777215});t.transparent=!0,t.opacity=.6,t.depthTest=!1,t.depthWrite=!1,t.side=Ru;const r=new Ua(e,t),i=new ft(0,1,0);i.normalize();const a=new ft(0,0,0),s=.5,o=.01,l=56576,u=new W_t(i,a,s,o,l,.1,.03);this.controlPlane=new ms,this.controlPlane.add(r),this.controlPlane.add(u)}}destroyControlPlane(){this.controlPlane&&(Iy(this.controlPlane),this.controlPlane=null)}setControlPlaneVisibility(e){this.controlPlane.visible=e}addDebugMeshes(){this.debugRoot=this.createDebugMeshes(),this.secondaryDebugRoot=this.createSecondaryDebugMeshes(),this.threeScene.add(this.debugRoot),this.threeScene.add(this.secondaryDebugRoot)}destroyDebugMeshes(){for(let e of[this.debugRoot,this.secondaryDebugRoot])e&&(Iy(e),this.threeScene.remove(e));this.debugRoot=null,this.secondaryDebugRoot=null}createDebugMeshes(e){const t=new Q3(1,32,32),r=new ms,i=(a,s)=>{let o=new Ua(t,Px.buildDebugMaterial(a));o.renderOrder=e,r.add(o),o.position.fromArray(s)};return i(16711680,[-50,0,0]),i(16711680,[50,0,0]),i(65280,[0,0,-50]),i(65280,[0,0,50]),i(16755200,[5,0,5]),r}createSecondaryDebugMeshes(e){const t=new pb(3,3,3),r=new ms;let i=12303291;const a=o=>{let l=new Ua(t,Px.buildDebugMaterial(i));l.renderOrder=e,r.add(l),l.position.fromArray(o)};let s=10;return a([-s,0,-s]),a([-s,0,s]),a([s,0,-s]),a([s,0,s]),r}static buildDebugMaterial(e){const t=`
            #include <common>
            varying float ndcDepth;

            void main() {
                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position.xyz, 1.0);
                ndcDepth = gl_Position.z / gl_Position.w;
                gl_Position.x = gl_Position.x / gl_Position.w;
                gl_Position.y = gl_Position.y / gl_Position.w;
                gl_Position.z = 0.0;
                gl_Position.w = 1.0;
    
            }
        `,r=`
            #include <common>
            uniform vec3 color;
            varying float ndcDepth;
            void main() {
                gl_FragDepth = (ndcDepth + 1.0) / 2.0;
                gl_FragColor = vec4(color.rgb, 0.0);
            }
        `,i={color:{type:"v3",value:new Di(e)}},a=new ru({uniforms:i,vertexShader:t,fragmentShader:r,transparent:!1,depthTest:!0,depthWrite:!0,side:Ud});return a.extensions.fragDepth=!0,a}static buildFocusMarkerMaterial(e){const t=`
            #include <common>

            uniform vec2 viewport;
            uniform vec3 realFocusPosition;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                float radius = 0.01;

                vec4 viewPosition = modelViewMatrix * vec4(position.xyz, 1.0);
                vec4 viewCenter = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);

                vec4 viewFocusPosition = modelViewMatrix * vec4(realFocusPosition, 1.0);

                ndcPosition = projectionMatrix * viewPosition;
                ndcPosition = ndcPosition * vec4(1.0 / ndcPosition.w);
                ndcCenter = projectionMatrix * viewCenter;
                ndcCenter = ndcCenter * vec4(1.0 / ndcCenter.w);

                ndcFocusPosition = projectionMatrix * viewFocusPosition;
                ndcFocusPosition = ndcFocusPosition * vec4(1.0 / ndcFocusPosition.w);

                gl_Position = projectionMatrix * viewPosition;

            }
        `,r=`
            #include <common>
            uniform vec3 color;
            uniform vec2 viewport;
            uniform float opacity;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                vec2 screenPosition = vec2(ndcPosition) * viewport;
                vec2 screenCenter = vec2(ndcCenter) * viewport;

                vec2 screenVec = screenPosition - screenCenter;

                float projectedRadius = length(screenVec);

                float lineWidth = 0.0005 * viewport.y;
                float aaRange = 0.0025 * viewport.y;
                float radius = 0.06 * viewport.y;
                float radDiff = abs(projectedRadius - radius) - lineWidth;
                float alpha = 1.0 - clamp(radDiff / 5.0, 0.0, 1.0); 

                gl_FragColor = vec4(color.rgb, alpha * opacity);
            }
        `,i={color:{type:"v3",value:new Di(e)},realFocusPosition:{type:"v3",value:new ft},viewport:{type:"v2",value:new cr},opacity:{value:0}};return new ru({uniforms:i,vertexShader:t,fragmentShader:r,transparent:!0,depthTest:!1,depthWrite:!1,side:Ud})}dispose(){this.destroyMeshCursor(),this.destroyFocusMarker(),this.destroyDebugMeshes(),this.destroyControlPlane(),this.destroyRenderTargetCopyObjects(),this.destroySplatRendertarget()}}const q_t=new ft(1,0,0),j_t=new ft(0,1,0),K_t=new ft(0,0,1);class _L{constructor(e=new ft,t=new ft){En(this,"intersectBox",function(){const e=new ft,t=[],r=[],i=[];return function(a,s){if(r[0]=this.origin.x,r[1]=this.origin.y,r[2]=this.origin.z,i[0]=this.direction.x,i[1]=this.direction.y,i[2]=this.direction.z,this.boxContainsPoint(a,this.origin,1e-4))return s&&(s.origin.copy(this.origin),s.normal.set(0,0,0),s.distance=-1),!0;for(let o=0;o<3;o++){if(i[o]==0)continue;const l=o==0?q_t:o==1?j_t:K_t,u=i[o]<0?a.max:a.min;let c=-Math.sign(i[o]);t[0]=o==0?u.x:o==1?u.y:u.z;let d=t[0]-r[o];if(d*c<0){const f=(o+1)%3,h=(o+2)%3;if(t[2]=i[f]/i[o]*d+r[f],t[1]=i[h]/i[o]*d+r[h],e.set(t[o],t[h],t[f]),this.boxContainsPoint(a,e,1e-4))return s&&(s.origin.copy(e),s.normal.copy(l).multiplyScalar(c),s.distance=e.sub(this.origin).length()),!0}}return!1}}());En(this,"intersectSphere",function(){const e=new ft;return function(t,r,i){e.copy(t).sub(this.origin);const a=e.dot(this.direction),s=a*a,l=e.dot(e)-s,u=r*r;if(l>u)return!1;const c=Math.sqrt(u-l),d=a-c,f=a+c;if(f<0)return!1;let h=d<0?f:d;return i&&(i.origin.copy(this.origin).addScaledVector(this.direction,h),i.normal.copy(i.origin).sub(t).normalize(),i.distance=h),!0}}());this.origin=new ft,this.direction=new ft,this.setParameters(e,t)}setParameters(e,t){this.origin.copy(e),this.direction.copy(t).normalize()}boxContainsPoint(e,t,r){return!(t.x<e.min.x-r||t.x>e.max.x+r||t.y<e.min.y-r||t.y>e.max.y+r||t.z<e.min.z-r||t.z>e.max.z+r)}}class TU{constructor(){this.origin=new ft,this.normal=new ft,this.distance=0,this.splatIndex=0}set(e,t,r,i){this.origin.copy(e),this.normal.copy(t),this.distance=r,this.splatIndex=i}clone(){const e=new TU;return e.origin.copy(this.origin),e.normal.copy(this.normal),e.distance=this.distance,e.splatIndex=this.splatIndex,e}}const Tf={ThreeD:0,TwoD:1};class X_t{constructor(e,t,r=!1){En(this,"setFromCameraAndScreenPosition",function(){const e=new cr;return function(t,r,i){if(e.x=r.x/i.x*2-1,e.y=(i.y-r.y)/i.y*2-1,t.isPerspectiveCamera)this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t;else if(t.isOrthographicCamera)this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t;else throw new Error("Raycaster::setFromCameraAndScreenPosition() -> Unsupported camera type")}}());En(this,"intersectSplatMesh",function(){const e=new kr,t=new kr,r=new kr,i=new _L,a=new ft;return function(s,o=[]){const l=s.getSplatTree();if(l){for(let u=0;u<l.subTrees.length;u++){const c=l.subTrees[u];t.copy(s.matrixWorld),s.dynamicMode&&(s.getSceneTransform(u,r),t.multiply(r)),e.copy(t).invert(),i.origin.copy(this.ray.origin).applyMatrix4(e),i.direction.copy(this.ray.origin).add(this.ray.direction),i.direction.applyMatrix4(e).sub(i.origin).normalize();const d=[];c.rootNode&&this.castRayAtSplatTreeNode(i,l,c.rootNode,d),d.forEach(f=>{f.origin.applyMatrix4(t),f.normal.applyMatrix4(t).normalize(),f.distance=a.copy(f.origin).sub(this.ray.origin).length()}),o.push(...d)}return o.sort((u,c)=>u.distance>c.distance?1:-1),o}}}());En(this,"castRayAtSplatTreeNode",function(){const e=new _a,t=new ft,r=new ft,i=new wa,a=new TU,s=1e-7,o=new ft(0,0,0),l=new kr,u=new kr,c=new kr,d=new kr,f=new kr,h=new _L;return function(p,m,v,g=[]){if(p.intersectBox(v.boundingBox)){if(v.data&&v.data.indexes&&v.data.indexes.length>0)for(let y=0;y<v.data.indexes.length;y++){const _=v.data.indexes[y],b=m.splatMesh.getSceneIndexForSplat(_);if(m.splatMesh.getScene(b).visible&&(m.splatMesh.getSplatColor(_,e),m.splatMesh.getSplatCenter(_,t),m.splatMesh.getSplatScaleAndRotation(_,r,i),!(r.x<=s||r.y<=s||m.splatMesh.splatRenderMode===Tf.ThreeD&&r.z<=s)))if(this.raycastAgainstTrueSplatEllipsoid){u.makeScale(r.x,r.y,r.z),c.makeRotationFromQuaternion(i);const w=Math.log10(e.w)*2;if(l.makeScale(w,w,w),f.copy(l).multiply(c).multiply(u),d.copy(f).invert(),h.origin.copy(p.origin).sub(t).applyMatrix4(d),h.direction.copy(p.origin).add(p.direction).sub(t),h.direction.applyMatrix4(d).sub(h.origin).normalize(),h.intersectSphere(o,1,a)){const A=a.clone();A.splatIndex=_,A.origin.applyMatrix4(f).add(t),g.push(A)}}else{let w=r.x+r.y,A=2;if(m.splatMesh.splatRenderMode===Tf.ThreeD&&(w+=r.z,A=3),w=w/A,p.intersectSphere(t,w,a)){const T=a.clone();T.splatIndex=_,g.push(T)}}}if(v.children&&v.children.length>0)for(let y of v.children)this.castRayAtSplatTreeNode(p,m,y,g);return g}}}());this.ray=new _L(e,t),this.raycastAgainstTrueSplatEllipsoid=r}}class y1{static buildVertexShaderBase(e=!1,t=!1,r=0,i=""){let a=`
        precision highp float;
        #include <common>

        attribute uint splatIndex;
        uniform highp usampler2D centersColorsTexture;
        uniform highp sampler2D sphericalHarmonicsTexture;
        uniform highp sampler2D sphericalHarmonicsTextureR;
        uniform highp sampler2D sphericalHarmonicsTextureG;
        uniform highp sampler2D sphericalHarmonicsTextureB;

        uniform highp usampler2D sceneIndexesTexture;
        uniform vec2 sceneIndexesTextureSize;
        uniform int sceneCount;
    `;return t&&(a+=`
            uniform float sceneOpacity[${fi.MaxScenes}];
            uniform int sceneVisibility[${fi.MaxScenes}];
        `),e&&(a+=`
            uniform highp mat4 transforms[${fi.MaxScenes}];
        `),a+=`
        ${i}
        uniform vec2 focal;
        uniform float orthoZoom;
        uniform int orthographicMode;
        uniform int pointCloudModeEnabled;
        uniform float inverseFocalAdjustment;
        uniform vec2 viewport;
        uniform vec2 basisViewport;
        uniform vec2 centersColorsTextureSize;
        uniform int sphericalHarmonicsDegree;
        uniform vec2 sphericalHarmonicsTextureSize;
        uniform int sphericalHarmonics8BitMode;
        uniform int sphericalHarmonicsMultiTextureMode;
        uniform float visibleRegionRadius;
        uniform float visibleRegionFadeStartRadius;
        uniform float firstRenderTime;
        uniform float currentTime;
        uniform int fadeInComplete;
        uniform vec3 sceneCenter;
        uniform float splatScale;
        uniform float sphericalHarmonics8BitCompressionRangeMin[${fi.MaxScenes}];
        uniform float sphericalHarmonics8BitCompressionRangeMax[${fi.MaxScenes}];

        varying vec4 vColor;
        varying vec2 vUv;
        varying vec2 vPosition;

        mat3 quaternionToRotationMatrix(float x, float y, float z, float w) {
            float s = 1.0 / sqrt(w * w + x * x + y * y + z * z);
        
            return mat3(
                1. - 2. * (y * y + z * z),
                2. * (x * y + w * z),
                2. * (x * z - w * y),
                2. * (x * y - w * z),
                1. - 2. * (x * x + z * z),
                2. * (y * z + w * x),
                2. * (x * z + w * y),
                2. * (y * z - w * x),
                1. - 2. * (x * x + y * y)
            );
        }

        const float sqrt8 = sqrt(8.0);
        const float minAlpha = 1.0 / 255.0;

        const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
        const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
        const uvec4 shift4 = uvec4(0, 8, 16, 24);
        vec4 uintToRGBAVec (uint u) {
           uvec4 urgba = mask4 & u;
           urgba = urgba >> shift4;
           vec4 rgba = vec4(urgba) * encodeNorm4;
           return rgba;
        }

        vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getDataUVF(in uint sIndex, in float stride, in uint offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(float(sIndex) * stride) + offset) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        const float SH_C1 = 0.4886025119029199f;
        const float[5] SH_C2 = float[](1.0925484, -1.0925484, 0.3153916, -1.0925484, 0.5462742);

        void main () {

            uint oddOffset = splatIndex & uint(0x00000001);
            uint doubleOddOffset = oddOffset * uint(2);
            bool isEven = oddOffset == uint(0);
            uint nearestEvenIndex = splatIndex - oddOffset;
            float fOddOffset = float(oddOffset);

            uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
            vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));

            uint sceneIndex = uint(0);
            if (sceneCount > 1) {
                sceneIndex = texture(sceneIndexesTexture, getDataUV(1, 0, sceneIndexesTextureSize)).r;
            }
            `,t&&(a+=`
                float splatOpacityFromScene = sceneOpacity[sceneIndex];
                int sceneVisible = sceneVisibility[sceneIndex];
                if (splatOpacityFromScene <= 0.01 || sceneVisible == 0) {
                    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                    return;
                }
            `),e?a+=`
                mat4 transform = transforms[sceneIndex];
                mat4 transformModelViewMatrix = viewMatrix * transform;
            `:a+="mat4 transformModelViewMatrix = modelViewMatrix;",a+=`
            float sh8BitCompressionRangeMinForScene = sphericalHarmonics8BitCompressionRangeMin[sceneIndex];
            float sh8BitCompressionRangeMaxForScene = sphericalHarmonics8BitCompressionRangeMax[sceneIndex];
            float sh8BitCompressionRangeForScene = sh8BitCompressionRangeMaxForScene - sh8BitCompressionRangeMinForScene;
            float sh8BitCompressionHalfRangeForScene = sh8BitCompressionRangeForScene / 2.0;
            vec3 vec8BitSHShift = vec3(sh8BitCompressionRangeMinForScene);

            vec4 viewCenter = transformModelViewMatrix * vec4(splatCenter, 1.0);

            vec4 clipCenter = projectionMatrix * viewCenter;

            float clip = 1.2 * clipCenter.w;
            if (clipCenter.z < -clip || clipCenter.x < -clip || clipCenter.x > clip || clipCenter.y < -clip || clipCenter.y > clip) {
                gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                return;
            }

            vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

            vPosition = position.xy;
            vColor = uintToRGBAVec(sampledCenterColor.r);
        `,r>=1&&(a+=`   
            if (sphericalHarmonicsDegree >= 1) {
            `,e?a+=`
                    vec3 worldViewDir = normalize(splatCenter - vec3(inverse(transform) * vec4(cameraPosition, 1.0)));
                `:a+=`
                    vec3 worldViewDir = normalize(splatCenter - cameraPosition);
                `,a+=`
                vec3 sh1;
                vec3 sh2;
                vec3 sh3;
            `,r>=2&&(a+=`
                    vec3 sh4;
                    vec3 sh5;
                    vec3 sh6;
                    vec3 sh7;
                    vec3 sh8;
                `),r===1?a+=`
                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        vec2 shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset, sphericalHarmonicsTextureSize);
                        vec4 sampledSH0123 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(1), sphericalHarmonicsTextureSize);
                        vec4 sampledSH4567 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(2), sphericalHarmonicsTextureSize);
                        vec4 sampledSH891011 = texture(sphericalHarmonicsTexture, shUV);
                        sh1 = vec3(sampledSH0123.rgb) * (1.0 - fOddOffset) + vec3(sampledSH0123.ba, sampledSH4567.r) * fOddOffset;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg) * (1.0 - fOddOffset) + vec3(sampledSH4567.gba) * fOddOffset;
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r) * (1.0 - fOddOffset) + vec3(sampledSH891011.rgb) * fOddOffset;
                    } else {
                        vec2 sampledSH01R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        sh1 = vec3(sampledSH01R.rg, sampledSH23R.r);
                        sh2 = vec3(sampledSH01G.rg, sampledSH23G.r);
                        sh3 = vec3(sampledSH01B.rg, sampledSH23B.r);
                    }
                `:r===2&&(a+=`
                    vec4 sampledSH0123;
                    vec4 sampledSH4567;
                    vec4 sampledSH891011;

                    vec4 sampledSH0123R;
                    vec4 sampledSH0123G;
                    vec4 sampledSH0123B;

                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        sampledSH0123 = texture(sphericalHarmonicsTexture, getDataUV(6, 0, sphericalHarmonicsTextureSize));
                        sampledSH4567 = texture(sphericalHarmonicsTexture, getDataUV(6, 1, sphericalHarmonicsTextureSize));
                        sampledSH891011 = texture(sphericalHarmonicsTexture, getDataUV(6, 2, sphericalHarmonicsTextureSize));
                        sh1 = sampledSH0123.rgb;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg);
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r);
                    } else {
                        sampledSH0123R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sh1 = vec3(sampledSH0123R.rgb);
                        sh2 = vec3(sampledSH0123G.rgb);
                        sh3 = vec3(sampledSH0123B.rgb);
                    }
                `),a+=`
                    if (sphericalHarmonics8BitMode == 1) {
                        sh1 = sh1 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh2 = sh2 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh3 = sh3 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                    }
                    float x = worldViewDir.x;
                    float y = worldViewDir.y;
                    float z = worldViewDir.z;
                    vColor.rgb += SH_C1 * (-sh1 * y + sh2 * z - sh3 * x);
            `,r>=2&&(a+=`
                    if (sphericalHarmonicsDegree >= 2) {
                        float xx = x * x;
                        float yy = y * y;
                        float zz = z * z;
                        float xy = x * y;
                        float yz = y * z;
                        float xz = x * z;
                `,r===2&&(a+=`
                        if (sphericalHarmonicsMultiTextureMode == 0) {
                            vec4 sampledSH12131415 = texture(sphericalHarmonicsTexture, getDataUV(6, 3, sphericalHarmonicsTextureSize));
                            vec4 sampledSH16171819 = texture(sphericalHarmonicsTexture, getDataUV(6, 4, sphericalHarmonicsTextureSize));
                            vec4 sampledSH20212223 = texture(sphericalHarmonicsTexture, getDataUV(6, 5, sphericalHarmonicsTextureSize));
                            sh4 = sampledSH891011.gba;
                            sh5 = sampledSH12131415.rgb;
                            sh6 = vec3(sampledSH12131415.a, sampledSH16171819.rg);
                            sh7 = vec3(sampledSH16171819.ba, sampledSH20212223.r);
                            sh8 = sampledSH20212223.gba;
                        } else {
                            vec4 sampledSH4567R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            sh4 = vec3(sampledSH0123R.a, sampledSH4567R.rg);
                            sh5 = vec3(sampledSH4567R.ba, sampledSH0123G.a);
                            sh6 = vec3(sampledSH4567G.rgb);
                            sh7 = vec3(sampledSH4567G.a, sampledSH0123B.a, sampledSH4567B.r);
                            sh8 = vec3(sampledSH4567B.gba);
                        }
                    `),a+=`
                        if (sphericalHarmonics8BitMode == 1) {
                            sh4 = sh4 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh5 = sh5 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh6 = sh6 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh7 = sh7 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh8 = sh8 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        }

                        vColor.rgb +=
                            (SH_C2[0] * xy) * sh4 +
                            (SH_C2[1] * yz) * sh5 +
                            (SH_C2[2] * (2.0 * zz - xx - yy)) * sh6 +
                            (SH_C2[3] * xz) * sh7 +
                            (SH_C2[4] * (xx - yy)) * sh8;
                    }
                `),a+=`

                vColor.rgb = clamp(vColor.rgb, vec3(0.), vec3(1.));

            }

            `),a}static getVertexShaderFadeIn(){return`
            if (fadeInComplete == 0) {
                float opacityAdjust = 1.0;
                float centerDist = length(splatCenter - sceneCenter);
                float renderTime = max(currentTime - firstRenderTime, 0.0);

                float fadeDistance = 0.75;
                float distanceLoadFadeInFactor = step(visibleRegionFadeStartRadius, centerDist);
                distanceLoadFadeInFactor = (1.0 - distanceLoadFadeInFactor) +
                                        (1.0 - clamp((centerDist - visibleRegionFadeStartRadius) / fadeDistance, 0.0, 1.0)) *
                                        distanceLoadFadeInFactor;
                opacityAdjust *= distanceLoadFadeInFactor;
                vColor.a *= opacityAdjust;
            }
        `}static getUniforms(e=!1,t=!1,r=0,i=1,a=!1){const s={sceneCenter:{type:"v3",value:new ft},fadeInComplete:{type:"i",value:0},orthographicMode:{type:"i",value:0},visibleRegionFadeStartRadius:{type:"f",value:0},visibleRegionRadius:{type:"f",value:0},currentTime:{type:"f",value:0},firstRenderTime:{type:"f",value:0},centersColorsTexture:{type:"t",value:null},sphericalHarmonicsTexture:{type:"t",value:null},sphericalHarmonicsTextureR:{type:"t",value:null},sphericalHarmonicsTextureG:{type:"t",value:null},sphericalHarmonicsTextureB:{type:"t",value:null},sphericalHarmonics8BitCompressionRangeMin:{type:"f",value:[]},sphericalHarmonics8BitCompressionRangeMax:{type:"f",value:[]},focal:{type:"v2",value:new cr},orthoZoom:{type:"f",value:1},inverseFocalAdjustment:{type:"f",value:1},viewport:{type:"v2",value:new cr},basisViewport:{type:"v2",value:new cr},debugColor:{type:"v3",value:new Di},centersColorsTextureSize:{type:"v2",value:new cr(1024,1024)},sphericalHarmonicsDegree:{type:"i",value:r},sphericalHarmonicsTextureSize:{type:"v2",value:new cr(1024,1024)},sphericalHarmonics8BitMode:{type:"i",value:0},sphericalHarmonicsMultiTextureMode:{type:"i",value:0},splatScale:{type:"f",value:i},pointCloudModeEnabled:{type:"i",value:a?1:0},sceneIndexesTexture:{type:"t",value:null},sceneIndexesTextureSize:{type:"v2",value:new cr(1024,1024)},sceneCount:{type:"i",value:1}};for(let o=0;o<fi.MaxScenes;o++)s.sphericalHarmonics8BitCompressionRangeMin.value.push(-fi.SphericalHarmonics8BitCompressionRange/2),s.sphericalHarmonics8BitCompressionRangeMax.value.push(fi.SphericalHarmonics8BitCompressionRange/2);if(t){const o=[];for(let u=0;u<fi.MaxScenes;u++)o.push(1);s.sceneOpacity={type:"f",value:o};const l=[];for(let u=0;u<fi.MaxScenes;u++)l.push(1);s.sceneVisibility={type:"i",value:l}}if(e){const o=[];for(let l=0;l<fi.MaxScenes;l++)o.push(new kr);s.transforms={type:"mat4",value:o}}return s}}class J3{static build(e=!1,t=!1,r=!1,i=2048,a=1,s=!1,o=0,l=.3){const u=`
            uniform vec2 covariancesTextureSize;
            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D covariancesTextureHalfFloat;
            uniform int covariancesAreHalfFloat;

            void fromCovarianceHalfFloatV4(uvec4 val, out vec4 first, out vec4 second) {
                vec2 r = unpackHalf2x16(val.r);
                vec2 g = unpackHalf2x16(val.g);
                vec2 b = unpackHalf2x16(val.b);

                first = vec4(r.x, r.y, g.x, g.y);
                second = vec4(b.x, b.y, 0.0, 0.0);
            }
        `;let c=y1.buildVertexShaderBase(e,t,o,u);c+=J3.buildVertexShaderProjection(r,t,i,l);const d=J3.buildFragmentShader(),f=y1.getUniforms(e,t,o,a,s);return f.covariancesTextureSize={type:"v2",value:new cr(1024,1024)},f.covariancesTexture={type:"t",value:null},f.covariancesTextureHalfFloat={type:"t",value:null},f.covariancesAreHalfFloat={type:"i",value:0},new ru({uniforms:f,vertexShader:c,fragmentShader:d,transparent:!0,alphaTest:1,blending:Dp,depthTest:!0,depthWrite:!1,side:Ru})}static buildVertexShaderProjection(e,t,r,i){let a=`

            vec4 sampledCovarianceA;
            vec4 sampledCovarianceB;
            vec3 cov3D_M11_M12_M13;
            vec3 cov3D_M22_M23_M33;
            if (covariancesAreHalfFloat == 0) {
                sampledCovarianceA = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset,
                                                                            covariancesTextureSize));
                sampledCovarianceB = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset + uint(1),
                                                                            covariancesTextureSize));

                cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rgb) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceA.ba, sampledCovarianceB.r) * fOddOffset;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceB.gba) * fOddOffset;
            } else {
                uvec4 sampledCovarianceU = texture(covariancesTextureHalfFloat, getDataUV(1, 0, covariancesTextureSize));
                fromCovarianceHalfFloatV4(sampledCovarianceU, sampledCovarianceA, sampledCovarianceB);
                cov3D_M11_M12_M13 = sampledCovarianceA.rgb;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg);
            }
        
            // Construct the 3D covariance matrix
            mat3 Vrk = mat3(
                cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
            );

            mat3 J;
            if (orthographicMode == 1) {
                // Since the projection is linear, we don't need an approximation
                J = transpose(mat3(orthoZoom, 0.0, 0.0,
                                0.0, orthoZoom, 0.0,
                                0.0, 0.0, 0.0));
            } else {
                // Construct the Jacobian of the affine approximation of the projection matrix. It will be used to transform the
                // 3D covariance matrix instead of using the actual projection matrix because that transformation would
                // require a non-linear component (perspective division) which would yield a non-gaussian result.
                float s = 1.0 / (viewCenter.z * viewCenter.z);
                J = mat3(
                    focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
                    0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
                    0., 0., 0.
                );
            }

            // Concatenate the projection approximation with the model-view transformation
            mat3 W = transpose(mat3(transformModelViewMatrix));
            mat3 T = W * J;

            // Transform the 3D covariance matrix (Vrk) to compute the 2D covariance matrix
            mat3 cov2Dm = transpose(T) * Vrk * T;
            `;return e?a+=`
                float detOrig = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                cov2Dm[0][0] += ${i};
                cov2Dm[1][1] += ${i};
                float detBlur = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                vColor.a *= sqrt(max(detOrig / detBlur, 0.0));
                if (vColor.a < minAlpha) return;
            `:a+=`
                cov2Dm[0][0] += ${i};
                cov2Dm[1][1] += ${i};
            `,a+=`

            // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
            // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
            // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
            // need cov2Dm[1][0] because it is a symetric matrix.
            vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

            // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
            // so that we can determine the 2D basis for the splat. This is done using the method described
            // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
            // After calculating the eigen-values and eigen-vectors, we calculate the basis for rendering the splat
            // by normalizing the eigen-vectors and then multiplying them by (sqrt(8) * sqrt(eigen-value)), which is
            // equal to scaling them by sqrt(8) standard deviations.
            //
            // This is a different approach than in the original work at INRIA. In that work they compute the
            // max extents of the projected splat in screen space to form a screen-space aligned bounding rectangle
            // which forms the geometry that is actually rasterized. The dimensions of that bounding box are 3.0
            // times the square root of the maximum eigen-value, or 3 standard deviations. They then use the inverse
            // 2D covariance matrix (called 'conic') in the CUDA rendering thread to determine fragment opacity by
            // calculating the full gaussian: exp(-0.5 * (X - mean) * conic * (X - mean)) * splat opacity
            float a = cov2Dv.x;
            float d = cov2Dv.z;
            float b = cov2Dv.y;
            float D = a * d - b * b;
            float trace = a + d;
            float traceOver2 = 0.5 * trace;
            float term2 = sqrt(max(0.1f, traceOver2 * traceOver2 - D));
            float eigenValue1 = traceOver2 + term2;
            float eigenValue2 = traceOver2 - term2;

            if (pointCloudModeEnabled == 1) {
                eigenValue1 = eigenValue2 = 0.2;
            }

            if (eigenValue2 <= 0.0) return;

            vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
            // since the eigen vectors are orthogonal, we derive the second one from the first
            vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);

            // We use sqrt(8) standard deviations instead of 3 to eliminate more of the splat with a very low opacity.
            vec2 basisVector1 = eigenVector1 * splatScale * min(sqrt8 * sqrt(eigenValue1), ${parseInt(r)}.0);
            vec2 basisVector2 = eigenVector2 * splatScale * min(sqrt8 * sqrt(eigenValue2), ${parseInt(r)}.0);
            `,t&&(a+=`
                vColor.a *= splatOpacityFromScene;
            `),a+=`
            vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) *
                             basisViewport * 2.0 * inverseFocalAdjustment;

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            // Scale the position data we send to the fragment shader
            vPosition *= sqrt8;
        `,a+=y1.getVertexShaderFadeIn(),a+="}",a}static buildFragmentShader(){let e=`
            precision highp float;
            #include <common>
 
            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
        `;return e+=`
            void main () {
                // Compute the positional squared distance from the center of the splat to the current fragment.
                float A = dot(vPosition, vPosition);
                // Since the positional data in vPosition has been scaled by sqrt(8), the squared result will be
                // scaled by a factor of 8. If the squared result is larger than 8, it means it is outside the ellipse
                // defined by the rectangle formed by vPosition. It also means it's farther
                // away than sqrt(8) standard deviations from the mean.
                if (A > 8.0) discard;
                vec3 color = vColor.rgb;

                // Since the rendered splat is scaled by sqrt(8), the inverse covariance matrix that is part of
                // the gaussian formula becomes the identity matrix. We're then left with (X - mean) * (X - mean),
                // and since 'mean' is zero, we have X * X, which is the same as A:
                float opacity = exp(-0.5 * A) * vColor.a;

                gl_FragColor = vec4(color.rgb, opacity);
            }
        `,e}}class e4{static build(e=!1,t=!1,r=1,i=!1,a=0){const s=`
            uniform vec2 scaleRotationsTextureSize;
            uniform highp sampler2D scaleRotationsTexture;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;
        `;let o=y1.buildVertexShaderBase(e,t,a,s);o+=e4.buildVertexShaderProjection();const l=e4.buildFragmentShader(),u=y1.getUniforms(e,t,a,r,i);return u.scaleRotationsTexture={type:"t",value:null},u.scaleRotationsTextureSize={type:"v2",value:new cr(1024,1024)},new ru({uniforms:u,vertexShader:o,fragmentShader:l,transparent:!0,alphaTest:1,blending:Dp,depthTest:!0,depthWrite:!1,side:Ru})}static buildVertexShaderProjection(){let e=`

            vec4 scaleRotationA = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset, scaleRotationsTextureSize));
            vec4 scaleRotationB = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset + uint(1), scaleRotationsTextureSize));

            vec3 scaleRotation123 = vec3(scaleRotationA.rgb) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationA.ba, scaleRotationB.r) * fOddOffset;
            vec3 scaleRotation456 = vec3(scaleRotationA.a, scaleRotationB.rg) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationB.gba) * fOddOffset;

            float missingW = sqrt(1.0 - scaleRotation456.x * scaleRotation456.x - scaleRotation456.y *
                                    scaleRotation456.y - scaleRotation456.z * scaleRotation456.z);
            mat3 R = quaternionToRotationMatrix(scaleRotation456.r, scaleRotation456.g, scaleRotation456.b, missingW);
            mat3 S = mat3(scaleRotation123.r, 0.0, 0.0,
                            0.0, scaleRotation123.g, 0.0,
                            0.0, 0.0, scaleRotation123.b);
            
            mat3 L = R * S;

            mat3x4 splat2World = mat3x4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

            mat4 world2ndc = transpose(projectionMatrix * transformModelViewMatrix);

            mat3x4 ndc2pix = mat3x4(vec4(viewport.x / 2.0, 0.0, 0.0, (viewport.x - 1.0) / 2.0),
                                    vec4(0.0, viewport.y / 2.0, 0.0, (viewport.y - 1.0) / 2.0),
                                    vec4(0.0, 0.0, 0.0, 1.0));

            mat3 T = transpose(splat2World) * world2ndc * ndc2pix;
            vec3 normal = vec3(viewMatrix * vec4(L[0][2], L[1][2], L[2][2], 0.0));
        `;return e+=`

                mat4 splat2World4 = mat4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(L[2], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

                mat4 Tt = transpose(transpose(splat2World4) * world2ndc);

                vec4 tempPoint1 = Tt * vec4(1.0, 0.0, 0.0, 1.0);
                tempPoint1 /= tempPoint1.w;

                vec4 tempPoint2 = Tt * vec4(0.0, 1.0, 0.0, 1.0);
                tempPoint2 /= tempPoint2.w;

                vec4 center = Tt * vec4(0.0, 0.0, 0.0, 1.0);
                center /= center.w;

                vec2 basisVector1 = tempPoint1.xy - center.xy;
                vec2 basisVector2 = tempPoint2.xy - center.xy;

                vec2 basisVector1Screen = basisVector1 * 0.5 * viewport;
                vec2 basisVector2Screen = basisVector2 * 0.5 * viewport;

                const float minPix = 1.;
                if (length(basisVector1Screen) < minPix || length(basisVector2Screen) < minPix) {
                    
            vec3 T0 = vec3(T[0][0], T[0][1], T[0][2]);
            vec3 T1 = vec3(T[1][0], T[1][1], T[1][2]);
            vec3 T3 = vec3(T[2][0], T[2][1], T[2][2]);

            vec3 tempPoint = vec3(1.0, 1.0, -1.0);
            float distance = (T3.x * T3.x * tempPoint.x) + (T3.y * T3.y * tempPoint.y) + (T3.z * T3.z * tempPoint.z);
            vec3 f = (1.0 / distance) * tempPoint;
            if (abs(distance) < 0.00001) return;

            float pointImageX = (T0.x * T3.x * f.x) + (T0.y * T3.y * f.y) + (T0.z * T3.z * f.z);
            float pointImageY = (T1.x * T3.x * f.x) + (T1.y * T3.y * f.y) + (T1.z * T3.z * f.z);
            vec2 pointImage = vec2(pointImageX, pointImageY);

            float tempX = (T0.x * T0.x * f.x) + (T0.y * T0.y * f.y) + (T0.z * T0.z * f.z);
            float tempY = (T1.x * T1.x * f.x) + (T1.y * T1.y * f.y) + (T1.z * T1.z * f.z);
            vec2 temp = vec2(tempX, tempY);

            vec2 halfExtend = pointImage * pointImage - temp;
            vec2 extent = sqrt(max(vec2(0.0001), halfExtend));
            float radius = max(extent.x, extent.y);

            vec2 ndcOffset = ((position.xy * radius * 3.0) * basisViewport * 2.0);

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            vT = T;
            vQuadCenter = pointImage;
            vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
        
                } else {
                    vec2 ndcOffset = vec2(position.x * basisVector1 + position.y * basisVector2) * 3.0 * inverseFocalAdjustment;
                    vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
                    gl_Position = quadPos;

                    vT = T;
                    vQuadCenter = center.xy;
                    vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
                }
            `,e+=y1.getVertexShaderFadeIn(),e+="}",e}static buildFragmentShader(){return`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;

            void main () {

                const float FilterInvSquare = 2.0;
                const float near_n = 0.2;
                const float T = 1.0;

                vec2 xy = vQuadCenter;
                vec3 Tu = vT[0];
                vec3 Tv = vT[1];
                vec3 Tw = vT[2];
                vec3 k = vFragCoord.x * Tw - Tu;
                vec3 l = vFragCoord.y * Tw - Tv;
                vec3 p = cross(k, l);
                if (p.z == 0.0) discard;
                vec2 s = vec2(p.x / p.z, p.y / p.z);
                float rho3d = (s.x * s.x + s.y * s.y); 
                vec2 d = vec2(xy.x - vFragCoord.x, xy.y - vFragCoord.y);
                float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y); 

                // compute intersection and depth
                float rho = min(rho3d, rho2d);
                float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z; 
                if (depth < near_n) discard;
                //  vec4 nor_o = collected_normal_opacity[j];
                //  float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
                float opa = vColor.a;

                float power = -0.5f * rho;
                if (power > 0.0f) discard;

                // Eq. (2) from 3D Gaussian splatting paper.
                // Obtain alpha by multiplying with Gaussian opacity
                // and its exponential falloff from mean.
                // Avoid numerical instabilities (see paper appendix). 
                float alpha = min(0.99f, opa * exp(power));
                if (alpha < 1.0f / 255.0f) discard;
                float test_T = T * (1.0 - alpha);
                if (test_T < 0.0001)discard;

                float w = alpha * T;
                gl_FragColor = vec4(vColor.rgb, w);
            }
        `}}class Y_t{static build(e){const t=new tc;t.setIndex([0,1,2,0,2,3]);const r=new Float32Array(4*3),i=new Gu(r,3);t.setAttribute("position",i),i.setXYZ(0,-1,-1,0),i.setXYZ(1,-1,1,0),i.setXYZ(2,1,1,0),i.setXYZ(3,1,-1,0),i.needsUpdate=!0;const a=new g0t().copy(t),s=new Uint32Array(e),o=new f0t(s,1,!1);return o.setUsage(_mt),a.setAttribute("splatIndex",o),a.instanceCount=0,a}}class Q_t extends ms{constructor(e,t=new ft,r=new wa,i=new ft(1,1,1),a=1,s=1,o=!0){super(),this.splatBuffer=e,this.position.copy(t),this.quaternion.copy(r),this.scale.copy(i),this.transform=new kr,this.minimumAlpha=a,this.opacity=s,this.visible=o}copyTransformData(e){this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.transform.copy(e.transform)}updateTransform(e){e?(this.matrixWorldAutoUpdate&&this.updateWorldMatrix(!0,!1),this.transform.copy(this.matrixWorld)):(this.matrixAutoUpdate&&this.updateMatrix(),this.transform.copy(this.matrix))}}const n4=class n4{constructor(e,t,r,i){this.min=new ft().copy(e),this.max=new ft().copy(t),this.boundingBox=new Sd(this.min,this.max),this.center=new ft().copy(this.max).sub(this.min).multiplyScalar(.5).add(this.min),this.depth=r,this.children=[],this.data=null,this.id=i||n4.idGen++}};En(n4,"idGen",0);let q8=n4;class Rx{constructor(e,t){this.maxDepth=e,this.maxCentersPerNode=t,this.sceneDimensions=new ft,this.sceneMin=new ft,this.sceneMax=new ft,this.rootNode=null,this.nodesWithIndexes=[],this.splatMesh=null}static convertWorkerSubTreeNode(e){const t=new ft().fromArray(e.min),r=new ft().fromArray(e.max),i=new q8(t,r,e.depth,e.id);if(e.data.indexes){i.data={indexes:[]};for(let a of e.data.indexes)i.data.indexes.push(a)}if(e.children)for(let a of e.children)i.children.push(Rx.convertWorkerSubTreeNode(a));return i}static convertWorkerSubTree(e,t){const r=new Rx(e.maxDepth,e.maxCentersPerNode);r.sceneMin=new ft().fromArray(e.sceneMin),r.sceneMax=new ft().fromArray(e.sceneMax),r.splatMesh=t,r.rootNode=Rx.convertWorkerSubTreeNode(e.rootNode);const i=(a,s)=>{a.children.length===0&&s(a);for(let o of a.children)i(o,s)};return r.nodesWithIndexes=[],i(r.rootNode,a=>{a.data&&a.data.indexes&&a.data.indexes.length>0&&r.nodesWithIndexes.push(a)}),r}}function Z_t(n){let e=0;class t{constructor(l,u){this.min=[l[0],l[1],l[2]],this.max=[u[0],u[1],u[2]]}containsPoint(l){return l[0]>=this.min[0]&&l[0]<=this.max[0]&&l[1]>=this.min[1]&&l[1]<=this.max[1]&&l[2]>=this.min[2]&&l[2]<=this.max[2]}}class r{constructor(l,u){this.maxDepth=l,this.maxCentersPerNode=u,this.sceneDimensions=[],this.sceneMin=[],this.sceneMax=[],this.rootNode=null,this.addedIndexes={},this.nodesWithIndexes=[],this.splatMesh=null,this.disposed=!1}}class i{constructor(l,u,c,d){this.min=[l[0],l[1],l[2]],this.max=[u[0],u[1],u[2]],this.center=[(u[0]-l[0])*.5+l[0],(u[1]-l[1])*.5+l[1],(u[2]-l[2])*.5+l[2]],this.depth=c,this.children=[],this.data=null,this.id=d||e++}}processSplatTreeNode=function(o,l,u,c){const d=l.data.indexes.length;if(d<o.maxCentersPerNode||l.depth>o.maxDepth){const y=[];for(let _=0;_<l.data.indexes.length;_++)o.addedIndexes[l.data.indexes[_]]||(y.push(l.data.indexes[_]),o.addedIndexes[l.data.indexes[_]]=!0);l.data.indexes=y,l.data.indexes.sort((_,b)=>_>b?1:-1),o.nodesWithIndexes.push(l);return}const f=[l.max[0]-l.min[0],l.max[1]-l.min[1],l.max[2]-l.min[2]],h=[f[0]*.5,f[1]*.5,f[2]*.5],p=[l.min[0]+h[0],l.min[1]+h[1],l.min[2]+h[2]],m=[new t([p[0]-h[0],p[1],p[2]-h[2]],[p[0],p[1]+h[1],p[2]]),new t([p[0],p[1],p[2]-h[2]],[p[0]+h[0],p[1]+h[1],p[2]]),new t([p[0],p[1],p[2]],[p[0]+h[0],p[1]+h[1],p[2]+h[2]]),new t([p[0]-h[0],p[1],p[2]],[p[0],p[1]+h[1],p[2]+h[2]]),new t([p[0]-h[0],p[1]-h[1],p[2]-h[2]],[p[0],p[1],p[2]]),new t([p[0],p[1]-h[1],p[2]-h[2]],[p[0]+h[0],p[1],p[2]]),new t([p[0],p[1]-h[1],p[2]],[p[0]+h[0],p[1],p[2]+h[2]]),new t([p[0]-h[0],p[1]-h[1],p[2]],[p[0],p[1],p[2]+h[2]])],v=[];for(let y=0;y<m.length;y++)v[y]=[];const g=[0,0,0];for(let y=0;y<d;y++){const _=l.data.indexes[y],b=u[_];g[0]=c[b],g[1]=c[b+1],g[2]=c[b+2];for(let x=0;x<m.length;x++)m[x].containsPoint(g)&&v[x].push(_)}for(let y=0;y<m.length;y++){const _=new i(m[y].min,m[y].max,l.depth+1);_.data={indexes:v[y]},l.children.push(_)}l.data={};for(let y of l.children)processSplatTreeNode(o,y,u,c)};const a=(o,l,u)=>{const c=[0,0,0],d=[0,0,0],f=[],h=Math.floor(o.length/4);for(let m=0;m<h;m++){const v=m*4,g=o[v],y=o[v+1],_=o[v+2],b=Math.round(o[v+3]);(m===0||g<c[0])&&(c[0]=g),(m===0||g>d[0])&&(d[0]=g),(m===0||y<c[1])&&(c[1]=y),(m===0||y>d[1])&&(d[1]=y),(m===0||_<c[2])&&(c[2]=_),(m===0||_>d[2])&&(d[2]=_),f.push(b)}const p=new r(l,u);return p.sceneMin=c,p.sceneMax=d,p.rootNode=new i(p.sceneMin,p.sceneMax,0),p.rootNode.data={indexes:f},p};function s(o,l,u){const c=[];for(let f of o){const h=Math.floor(f.length/4);for(let p=0;p<h;p++){const m=p*4,v=Math.round(f[m+3]);c[v]=m}}const d=[];for(let f of o){const h=a(f,l,u);d.push(h),processSplatTreeNode(h,h.rootNode,c,f)}n.postMessage({subTrees:d})}n.onmessage=o=>{o.data.process&&s(o.data.process.centers,o.data.process.maxDepth,o.data.process.maxCentersPerNode)}}function J_t(n,e,t,r,i){n.postMessage({process:{centers:e,maxDepth:r,maxCentersPerNode:i}},t)}function ebt(){return new Worker(URL.createObjectURL(new Blob(["(",Z_t.toString(),")(self)"],{type:"application/javascript"})))}class tbt{constructor(e,t){En(this,"processSplatMesh",function(e,t=()=>!0,r,i){this.splatTreeWorker||(this.splatTreeWorker=ebt()),this.splatMesh=e,this.subTrees=[];const a=new ft,s=(o,l)=>{const u=new Float32Array(l*4);let c=0;for(let d=0;d<l;d++){const f=d+o;if(t(f)){e.getSplatCenter(f,a);const h=c*4;u[h]=a.x,u[h+1]=a.y,u[h+2]=a.z,u[h+3]=f,c++}}return u};return new Promise(o=>{const l=()=>this.disposed?(this.diposeSplatTreeWorker(),o(),!0):!1;r&&r(!1),Rc(()=>{if(l())return;const u=[];if(e.dynamicMode){let c=0;for(let d=0;d<e.scenes.length;d++){const h=e.getScene(d).splatBuffer.getSplatCount(),p=s(c,h);u.push(p),c+=h}}else{const c=s(0,e.getSplatCount());u.push(c)}this.splatTreeWorker.onmessage=c=>{l()||c.data.subTrees&&(i&&i(!1),Rc(()=>{if(!l()){for(let d of c.data.subTrees){const f=Rx.convertWorkerSubTree(d,e);this.subTrees.push(f)}this.diposeSplatTreeWorker(),i&&i(!0),Rc(()=>{o()})}}))},Rc(()=>{if(l())return;r&&r(!0);const c=u.map(d=>d.buffer);J_t(this.splatTreeWorker,u,c,this.maxDepth,this.maxCentersPerNode)})})})});this.maxDepth=e,this.maxCentersPerNode=t,this.subTrees=[],this.splatMesh=null}dispose(){this.diposeSplatTreeWorker(),this.disposed=!0}diposeSplatTreeWorker(){this.splatTreeWorker&&this.splatTreeWorker.terminate(),this.splatTreeWorker=null}countLeaves(){let e=0;return this.visitLeaves(()=>{e++}),e}visitLeaves(e){const t=(r,i)=>{r.children.length===0&&i(r);for(let a of r.children)t(a,i)};for(let r of this.subTrees)t(r.rootNode,e)}}function nbt(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function rbt(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(A){if(A==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=a(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=s||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),v=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),y=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),_=f>0,b=s||e.has("OES_texture_float"),x=_&&b,w=s?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:w}}const kx={Default:0,Gradual:1,Instant:2},_1={None:0,Error:1,Warning:2,Info:3,Debug:4},tZ=new tc,ibt=new Tv,jA=6,abt=4,sbt=4,obt=4,lbt=6,ubt=8,bL=4,SL=4,nZ=1,cbt=.012,dbt=.003,rZ=1,iZ=16777216;class Fs extends Ua{constructor(t=Tf.ThreeD,r=!1,i=!1,a=!1,s=1,o=!0,l=!1,u=!1,c=1024,d=_1.None,f=0,h=1,p=.3){super(tZ,ibt);En(this,"buildSplatTree",function(t=[],r,i){return new Promise(a=>{this.disposeSplatTree(),this.baseSplatTree=new tbt(8,1e3);const s=performance.now(),o=new _a;this.baseSplatTree.processSplatMesh(this,l=>{this.getSplatColor(l,o);const u=this.getSceneIndexForSplat(l),c=t[u]||1;return o.w>=c},r,i).then(()=>{const l=performance.now()-s;if(this.logLevel>=_1.Info&&console.log("SplatTree build: "+l+" ms"),this.disposed)a();else{this.splatTree=this.baseSplatTree,this.baseSplatTree=null;let u=0,c=0,d=0;this.splatTree.visitLeaves(f=>{const h=f.data.indexes.length;h>0&&(c+=h,d++,u++)}),this.logLevel>=_1.Info&&(console.log(`SplatTree leaves: ${this.splatTree.countLeaves()}`),console.log(`SplatTree leaves with splats:${u}`),c=c/d,console.log(`Avg splat count per node: ${c}`),console.log(`Total splat count: ${this.getSplatCount()}`)),a()}})})});En(this,"updateUniforms",function(){const t=new cr;return function(r,i,a,s,o,l){if(this.getSplatCount()>0){if(t.set(r.x*this.devicePixelRatio,r.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(t),this.material.uniforms.basisViewport.value.set(1/t.x,1/t.y),this.material.uniforms.focal.value.set(i,a),this.material.uniforms.orthographicMode.value=s?1:0,this.material.uniforms.orthoZoom.value=o,this.material.uniforms.inverseFocalAdjustment.value=l,this.dynamicMode)for(let c=0;c<this.scenes.length;c++)this.material.uniforms.transforms.value[c].copy(this.getScene(c).transform);if(this.enableOptionalEffects)for(let c=0;c<this.scenes.length;c++)this.material.uniforms.sceneOpacity.value[c]=js(this.getScene(c).opacity,0,1),this.material.uniforms.sceneVisibility.value[c]=this.getScene(c).visible?1:0,this.material.uniformsNeedUpdate=!0;this.material.uniformsNeedUpdate=!0}}}());En(this,"setupDistancesComputationTransformFeedback",function(){let t;return function(){const r=this.getMaxSplatCount();if(!this.renderer)return;const i=this.lastRenderer!==this.renderer,a=t!==r;if(!i&&!a)return;i?this.disposeDistancesComputationGPUResources():a&&this.disposeDistancesComputationGPUBufferResources();const s=this.renderer.getContext(),o=(h,p,m)=>{const v=h.createShader(p);if(!v)return console.error("Fatal error: gl could not create a shader object."),null;if(h.shaderSource(v,m),h.compileShader(v),!h.getShaderParameter(v,h.COMPILE_STATUS)){let y="unknown";p===h.VERTEX_SHADER?y="vertex shader":p===h.FRAGMENT_SHADER&&(y="fragement shader");const _=h.getShaderInfoLog(v);return console.error("Failed to compile "+y+" with these errors:"+_),h.deleteShader(v),null}return v};let l;this.integerBasedDistancesComputation?(l=`#version 300 es
                in ivec4 center;
                flat out int distance;`,this.dynamicMode?l+=`
                        in uint sceneIndex;
                        uniform ivec4 transforms[${fi.MaxScenes}];
                        void main(void) {
                            ivec4 transform = transforms[sceneIndex];
                            distance = center.x * transform.x + center.y * transform.y + center.z * transform.z + transform.w * center.w;
                        }
                    `:l+=`
                        uniform ivec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `):(l=`#version 300 es
                in vec4 center;
                flat out float distance;`,this.dynamicMode?l+=`
                        in uint sceneIndex;
                        uniform mat4 transforms[${fi.MaxScenes}];
                        void main(void) {
                            vec4 transformedCenter = transforms[sceneIndex] * vec4(center.xyz, 1.0);
                            distance = transformedCenter.z;
                        }
                    `:l+=`
                        uniform vec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `);const u=`#version 300 es
                precision lowp float;
                out vec4 fragColor;
                void main(){}
            `,c=s.getParameter(s.VERTEX_ARRAY_BINDING),d=s.getParameter(s.CURRENT_PROGRAM),f=d?s.getProgramParameter(d,s.DELETE_STATUS):!1;if(i&&(this.distancesTransformFeedback.vao=s.createVertexArray()),s.bindVertexArray(this.distancesTransformFeedback.vao),i){const h=s.createProgram(),p=o(s,s.VERTEX_SHADER,l),m=o(s,s.FRAGMENT_SHADER,u);if(!p||!m)throw new Error("Could not compile shaders for distances computation on GPU.");if(s.attachShader(h,p),s.attachShader(h,m),s.transformFeedbackVaryings(h,["distance"],s.SEPARATE_ATTRIBS),s.linkProgram(h),!s.getProgramParameter(h,s.LINK_STATUS)){const g=s.getProgramInfoLog(h);throw console.error("Fatal error: Failed to link program: "+g),s.deleteProgram(h),s.deleteShader(m),s.deleteShader(p),new Error("Could not link shaders for distances computation on GPU.")}this.distancesTransformFeedback.program=h,this.distancesTransformFeedback.vertexShader=p,this.distancesTransformFeedback.vertexShader=m}if(s.useProgram(this.distancesTransformFeedback.program),this.distancesTransformFeedback.centersLoc=s.getAttribLocation(this.distancesTransformFeedback.program,"center"),this.dynamicMode){this.distancesTransformFeedback.sceneIndexesLoc=s.getAttribLocation(this.distancesTransformFeedback.program,"sceneIndex");for(let h=0;h<this.scenes.length;h++)this.distancesTransformFeedback.transformsLocs[h]=s.getUniformLocation(this.distancesTransformFeedback.program,`transforms[${h}]`)}else this.distancesTransformFeedback.modelViewProjLoc=s.getUniformLocation(this.distancesTransformFeedback.program,"modelViewProj");(i||a)&&(this.distancesTransformFeedback.centersBuffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),s.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?s.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,s.INT,0,0):s.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,s.FLOAT,!1,0,0),this.dynamicMode&&(this.distancesTransformFeedback.sceneIndexesBuffer=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),s.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),s.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,s.UNSIGNED_INT,0,0))),(i||a)&&(this.distancesTransformFeedback.outDistancesBuffer=s.createBuffer()),s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),s.bufferData(s.ARRAY_BUFFER,r*4,s.STATIC_READ),i&&(this.distancesTransformFeedback.id=s.createTransformFeedback()),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),d&&f!==!0&&s.useProgram(d),c&&s.bindVertexArray(c),this.lastRenderer=this.renderer,t=r}}());En(this,"fillTransformsArray",function(){const t=[];return function(r){t.length!==r.length&&(t.length=r.length);for(let i=0;i<this.scenes.length;i++){const s=this.getScene(i).transform.elements;for(let o=0;o<16;o++)t[i*16+o]=s[o]}r.set(t)}}());En(this,"computeDistancesOnGPU",function(){const t=new kr;return function(r,i){if(!this.renderer)return;const a=this.renderer.getContext(),s=a.getParameter(a.VERTEX_ARRAY_BINDING),o=a.getParameter(a.CURRENT_PROGRAM),l=o?a.getProgramParameter(o,a.DELETE_STATUS):!1;if(a.bindVertexArray(this.distancesTransformFeedback.vao),a.useProgram(this.distancesTransformFeedback.program),a.enable(a.RASTERIZER_DISCARD),this.dynamicMode)for(let d=0;d<this.scenes.length;d++)if(t.copy(this.getScene(d).transform),t.premultiply(r),this.integerBasedDistancesComputation){const f=Fs.getIntegerMatrixArray(t),h=[f[2],f[6],f[10],f[14]];a.uniform4i(this.distancesTransformFeedback.transformsLocs[d],h[0],h[1],h[2],h[3])}else a.uniformMatrix4fv(this.distancesTransformFeedback.transformsLocs[d],!1,t.elements);else if(this.integerBasedDistancesComputation){const d=Fs.getIntegerMatrixArray(r),f=[d[2],d[6],d[10]];a.uniform3i(this.distancesTransformFeedback.modelViewProjLoc,f[0],f[1],f[2])}else{const d=[r.elements[2],r.elements[6],r.elements[10]];a.uniform3f(this.distancesTransformFeedback.modelViewProjLoc,d[0],d[1],d[2])}a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?a.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,a.INT,0,0):a.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,a.FLOAT,!1,0,0),this.dynamicMode&&(a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),a.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,a.UNSIGNED_INT,0,0)),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),a.bindBufferBase(a.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),a.beginTransformFeedback(a.POINTS),a.drawArrays(a.POINTS,0,this.getSplatCount()),a.endTransformFeedback(),a.bindBufferBase(a.TRANSFORM_FEEDBACK_BUFFER,0,null),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,null),a.disable(a.RASTERIZER_DISCARD);const u=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);a.flush();const c=new Promise(d=>{const f=()=>{if(this.disposed)d();else switch(a.clientWaitSync(u,0,0)){case a.TIMEOUT_EXPIRED:return this.computeDistancesOnGPUSyncTimeout=setTimeout(f),this.computeDistancesOnGPUSyncTimeout;case a.WAIT_FAILED:throw new Error("should never get here");default:this.computeDistancesOnGPUSyncTimeout=null,a.deleteSync(u);const v=a.getParameter(a.VERTEX_ARRAY_BINDING);a.bindVertexArray(this.distancesTransformFeedback.vao),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),a.getBufferSubData(a.ARRAY_BUFFER,0,i),a.bindBuffer(a.ARRAY_BUFFER,null),v&&a.bindVertexArray(v),d()}};this.computeDistancesOnGPUSyncTimeout=setTimeout(f)});return o&&l!==!0&&a.useProgram(o),s&&a.bindVertexArray(s),c}}());En(this,"getSplatCenter",function(){const t={};return function(r,i,a){this.getLocalSplatParameters(r,t,a),t.splatBuffer.getSplatCenter(t.localIndex,i,t.sceneTransform)}}());En(this,"getSplatScaleAndRotation",function(){const t={},r=new ft;return function(i,a,s,o){this.getLocalSplatParameters(i,t,o),r.x=void 0,r.y=void 0,r.z=void 0,this.splatRenderMode===Tf.TwoD&&(r.z=0),t.splatBuffer.getSplatScaleAndRotation(t.localIndex,a,s,t.sceneTransform,r)}}());En(this,"getSplatColor",function(){const t={};return function(r,i){this.getLocalSplatParameters(r,t),t.splatBuffer.getSplatColor(t.localIndex,i)}}());this.renderer=void 0,this.splatRenderMode=t,this.dynamicMode=r,this.enableOptionalEffects=i,this.halfPrecisionCovariancesOnGPU=a,this.devicePixelRatio=s,this.enableDistancesComputationOnGPU=o,this.integerBasedDistancesComputation=l,this.antialiased=u,this.kernel2DSize=p,this.maxScreenSpaceSplatSize=c,this.logLevel=d,this.sphericalHarmonicsDegree=f,this.minSphericalHarmonicsDegree=0,this.sceneFadeInRateMultiplier=h,this.scenes=[],this.splatTree=null,this.baseSplatTree=null,this.splatDataTextures={},this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new Sd,this.calculatedSceneCenter=new ft,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!1,this.lastRenderer=null,this.visible=!1}static buildScenes(t,r,i){const a=[];a.length=r.length;for(let s=0;s<r.length;s++){const o=r[s],l=i[s]||{};let u=l.position||[0,0,0],c=l.rotation||[0,0,0,1],d=l.scale||[1,1,1];const f=new ft().fromArray(u),h=new wa().fromArray(c),p=new ft().fromArray(d),m=Fs.createScene(o,f,h,p,l.splatAlphaRemovalThreshold||1,l.opacity,l.visible);t.add(m),a[s]=m}return a}static createScene(t,r,i,a,s,o=1,l=!0){return new Q_t(t,r,i,a,s,o,l)}static buildSplatIndexMaps(t){const r=[],i=[];let a=0;for(let s=0;s<t.length;s++){const l=t[s].getMaxSplatCount();for(let u=0;u<l;u++)r[a]=u,i[a]=s,a++}return{localSplatIndexMap:r,sceneIndexMap:i}}build(t,r,i=!0,a=!1,s,o,l=!0){this.sceneOptions=r,this.finalBuild=a;const u=Fs.getTotalMaxSplatCountForSplatBuffers(t),c=Fs.buildScenes(this,t,r);if(i)for(let v=0;v<this.scenes.length&&v<c.length;v++){const g=c[v],y=this.getScene(v);g.copyTransformData(y)}this.scenes=c;let d=3;for(let v of t){const g=v.getMinSphericalHarmonicsDegree();g<d&&(d=g)}this.minSphericalHarmonicsDegree=Math.min(d,this.sphericalHarmonicsDegree);let f=!1;if(t.length!==this.lastBuildScenes.length)f=!0;else for(let v=0;v<t.length;v++)if(t[v]!==this.lastBuildScenes[v].splatBuffer){f=!0;break}let h=!0;if((this.scenes.length!==1||this.lastBuildSceneCount!==this.scenes.length||this.lastBuildMaxSplatCount!==u||f)&&(h=!1),!h){this.boundingBox=new Sd,l||(this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.firstRenderTime=-1),this.lastBuildScenes=[],this.lastBuildSplatCount=0,this.lastBuildMaxSplatCount=0,this.disposeMeshData(),this.geometry=Y_t.build(u),this.splatRenderMode===Tf.ThreeD?this.material=J3.build(this.dynamicMode,this.enableOptionalEffects,this.antialiased,this.maxScreenSpaceSplatSize,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree,this.kernel2DSize):this.material=e4.build(this.dynamicMode,this.enableOptionalEffects,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree);const v=Fs.buildSplatIndexMaps(t);this.globalSplatIndexToLocalSplatIndexMap=v.localSplatIndexMap,this.globalSplatIndexToSceneIndexMap=v.sceneIndexMap}const p=this.getSplatCount(!0);this.enableDistancesComputationOnGPU&&this.setupDistancesComputationTransformFeedback();const m=this.refreshGPUDataFromSplatBuffers(h);for(let v=0;v<this.scenes.length;v++)this.lastBuildScenes[v]=this.scenes[v];return this.lastBuildSplatCount=p,this.lastBuildMaxSplatCount=this.getMaxSplatCount(),this.lastBuildSceneCount=this.scenes.length,a&&this.scenes.length>0&&this.buildSplatTree(r.map(v=>v.splatAlphaRemovalThreshold||1),s,o).then(()=>{this.onSplatTreeReadyCallback&&this.onSplatTreeReadyCallback(this.splatTree),this.onSplatTreeReadyCallback=null}),this.visible=this.scenes.length>0,m}freeIntermediateSplatData(){const t=r=>{delete r.source.data,delete r.image,r.onUpdate=null};delete this.splatDataTextures.baseData.covariances,delete this.splatDataTextures.baseData.centers,delete this.splatDataTextures.baseData.colors,delete this.splatDataTextures.baseData.sphericalHarmonics,delete this.splatDataTextures.centerColors.data,delete this.splatDataTextures.covariances.data,this.splatDataTextures.sphericalHarmonics&&delete this.splatDataTextures.sphericalHarmonics.data,this.splatDataTextures.sceneIndexes&&delete this.splatDataTextures.sceneIndexes.data,this.splatDataTextures.centerColors.texture.needsUpdate=!0,this.splatDataTextures.centerColors.texture.onUpdate=()=>{t(this.splatDataTextures.centerColors.texture)},this.splatDataTextures.covariances.texture.needsUpdate=!0,this.splatDataTextures.covariances.texture.onUpdate=()=>{t(this.splatDataTextures.covariances.texture)},this.splatDataTextures.sphericalHarmonics&&(this.splatDataTextures.sphericalHarmonics.texture?(this.splatDataTextures.sphericalHarmonics.texture.needsUpdate=!0,this.splatDataTextures.sphericalHarmonics.texture.onUpdate=()=>{t(this.splatDataTextures.sphericalHarmonics.texture)}):this.splatDataTextures.sphericalHarmonics.textures.forEach(r=>{r.needsUpdate=!0,r.onUpdate=()=>{t(r)}})),this.splatDataTextures.sceneIndexes&&(this.splatDataTextures.sceneIndexes.texture.needsUpdate=!0,this.splatDataTextures.sceneIndexes.texture.onUpdate=()=>{t(this.splatDataTextures.sceneIndexes.texture)})}dispose(){this.disposeMeshData(),this.disposeTextures(),this.disposeSplatTree(),this.enableDistancesComputationOnGPU&&(this.computeDistancesOnGPUSyncTimeout&&(clearTimeout(this.computeDistancesOnGPUSyncTimeout),this.computeDistancesOnGPUSyncTimeout=null),this.disposeDistancesComputationGPUResources()),this.scenes=[],this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.renderer=null,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new Sd,this.calculatedSceneCenter=new ft,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!0,this.lastRenderer=null,this.visible=!1}disposeMeshData(){this.geometry&&this.geometry!==tZ&&(this.geometry.dispose(),this.geometry=null),this.material&&(this.material.dispose(),this.material=null)}disposeTextures(){for(let t in this.splatDataTextures)if(this.splatDataTextures.hasOwnProperty(t)){const r=this.splatDataTextures[t];r.texture&&(r.texture.dispose(),r.texture=null)}this.splatDataTextures=null}disposeSplatTree(){this.splatTree&&(this.splatTree.dispose(),this.splatTree=null),this.baseSplatTree&&(this.baseSplatTree.dispose(),this.baseSplatTree=null)}getSplatTree(){return this.splatTree}onSplatTreeReady(t){this.onSplatTreeReadyCallback=t}getDataForDistancesComputation(t,r){const i=this.integerBasedDistancesComputation?this.getIntegerCenters(t,r,!0):this.getFloatCenters(t,r,!0),a=this.getSceneIndexes(t,r);return{centers:i,sceneIndexes:a}}refreshGPUDataFromSplatBuffers(t){const r=this.getSplatCount(!0);this.refreshDataTexturesFromSplatBuffers(t);const i=t?this.lastBuildSplatCount:0,{centers:a,sceneIndexes:s}=this.getDataForDistancesComputation(i,r-1);return this.enableDistancesComputationOnGPU&&this.refreshGPUBuffersForDistancesComputation(a,s,t),{from:i,to:r-1,count:r-i,centers:a,sceneIndexes:s}}refreshGPUBuffersForDistancesComputation(t,r,i=!1){const a=i?this.lastBuildSplatCount:0;this.updateGPUCentersBufferForDistancesComputation(i,t,a),this.updateGPUTransformIndexesBufferForDistancesComputation(i,r,a)}refreshDataTexturesFromSplatBuffers(t){const r=this.getSplatCount(!0),i=this.lastBuildSplatCount,a=r-1;t?this.updateBaseDataFromSplatBuffers(i,a):(this.setupDataTextures(),this.updateBaseDataFromSplatBuffers()),this.updateDataTexturesFromBaseData(i,a),this.updateVisibleRegion(t)}setupDataTextures(){const t=this.getMaxSplatCount(),r=this.getSplatCount(!0);this.disposeTextures();const i=(T,C)=>{const E=new cr(4096,1024);for(;E.x*E.y*T<t*C;)E.y*=2;return E},a=T=>T>=1?lbt:sbt,s=T=>{const C=a(T),E=i(C,6);return{elementsPerTexelStored:C,texSize:E}};let o=this.getTargetCovarianceCompressionLevel();const l=0,u=this.getTargetSphericalHarmonicsCompressionLevel();let c,d,f;if(this.splatRenderMode===Tf.ThreeD){const T=s(o);T.texSize.x*T.texSize.y>iZ&&o===0&&(o=1),c=new Float32Array(t*jA)}else d=new Float32Array(t*3),f=new Float32Array(t*4);const h=new Float32Array(t*3),p=new Uint8Array(t*4);let m=Float32Array;u===1?m=Uint16Array:u===2&&(m=Uint8Array);const v=g1(this.minSphericalHarmonicsDegree),g=this.minSphericalHarmonicsDegree?new m(t*v):void 0,y=i(SL,4),_=new Uint32Array(y.x*y.y*SL);Fs.updateCenterColorsPaddedData(0,r-1,h,p,_);const b=new Zh(_,y.x,y.y,m1,Bu);if(b.internalFormat="RGBA32UI",b.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=b,this.material.uniforms.centersColorsTextureSize.value.copy(y),this.material.uniformsNeedUpdate=!0,this.splatDataTextures={baseData:{covariances:c,scales:d,rotations:f,centers:h,colors:p,sphericalHarmonics:g},centerColors:{data:_,texture:b,size:y}},this.splatRenderMode===Tf.ThreeD){const T=s(o),C=T.elementsPerTexelStored,E=T.texSize;let I=o>=1?Uint32Array:Float32Array;const P=o>=1?ubt:obt,L=new I(E.x*E.y*P);o===0?L.set(c):Fs.updatePaddedCompressedCovariancesTextureData(c,L,0,0,c.length);let N;if(o>=1)N=new Zh(L,E.x,E.y,m1,Bu),N.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=N;else{N=new Zh(L,E.x,E.y,qo,Pc),this.material.uniforms.covariancesTexture.value=N;const F=new Zh(new Uint32Array(32),2,2,m1,Bu);F.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=F,F.needsUpdate=!0}N.needsUpdate=!0,this.material.uniforms.covariancesAreHalfFloat.value=o>=1?1:0,this.material.uniforms.covariancesTextureSize.value.copy(E),this.splatDataTextures.covariances={data:L,texture:N,size:E,compressionLevel:o,elementsPerTexelStored:C,elementsPerTexelAllocated:P}}else{const C=i(bL,6);let E=Float32Array,I=Pc;const P=new E(C.x*C.y*bL);Fs.updateScaleRotationsPaddedData(0,r-1,d,f,P);const L=new Zh(P,C.x,C.y,qo,I);L.needsUpdate=!0,this.material.uniforms.scaleRotationsTexture.value=L,this.material.uniforms.scaleRotationsTextureSize.value.copy(C),this.splatDataTextures.scaleRotations={data:P,texture:L,size:C,compressionLevel:l}}if(g){const T=u===2?zd:fb;let C=v;C%2!==0&&C++;const E=this.minSphericalHarmonicsDegree===2?4:2,I=E===4?qo:tU;let P=i(E,C);if(P.x*P.y<=iZ){const L=P.x*P.y*E,N=new m(L);for(let k=0;k<r;k++){const H=v*k,U=C*k;for(let B=0;B<v;B++)N[U+B]=g[H+B]}const F=new Zh(N,P.x,P.y,I,T);F.needsUpdate=!0,this.material.uniforms.sphericalHarmonicsTexture.value=F,this.splatDataTextures.sphericalHarmonics={componentCount:v,paddedComponentCount:C,data:N,textureCount:1,texture:F,size:P,compressionLevel:u,elementsPerTexel:E}}else{const L=v/3;C=L,C%2!==0&&C++,P=i(E,C);const N=P.x*P.y*E,F=[this.material.uniforms.sphericalHarmonicsTextureR,this.material.uniforms.sphericalHarmonicsTextureG,this.material.uniforms.sphericalHarmonicsTextureB],k=[],H=[];for(let U=0;U<3;U++){const B=new m(N);k.push(B);for(let ee=0;ee<r;ee++){const re=v*ee,ne=C*ee;if(L>=3){for(let ae=0;ae<3;ae++)B[ne+ae]=g[re+U*3+ae];if(L>=8)for(let ae=0;ae<5;ae++)B[ne+3+ae]=g[re+9+U*5+ae]}}const $=new Zh(B,P.x,P.y,I,T);H.push($),$.needsUpdate=!0,F[U].value=$}this.material.uniforms.sphericalHarmonicsMultiTextureMode.value=1,this.splatDataTextures.sphericalHarmonics={componentCount:v,componentCountPerChannel:L,paddedComponentCount:C,data:k,textureCount:3,textures:H,size:P,compressionLevel:u,elementsPerTexel:E}}this.material.uniforms.sphericalHarmonicsTextureSize.value.copy(P),this.material.uniforms.sphericalHarmonics8BitMode.value=u===2?1:0;for(let L=0;L<this.scenes.length;L++){const N=this.scenes[L].splatBuffer;this.material.uniforms.sphericalHarmonics8BitCompressionRangeMin.value[L]=N.minSphericalHarmonicsCoeff,this.material.uniforms.sphericalHarmonics8BitCompressionRangeMax.value[L]=N.maxSphericalHarmonicsCoeff}this.material.uniformsNeedUpdate=!0}const x=i(nZ,4),w=new Uint32Array(x.x*x.y*nZ);for(let T=0;T<r;T++)w[T]=this.globalSplatIndexToSceneIndexMap[T];const A=new Zh(w,x.x,x.y,FI,Bu);A.internalFormat="R32UI",A.needsUpdate=!0,this.material.uniforms.sceneIndexesTexture.value=A,this.material.uniforms.sceneIndexesTextureSize.value.copy(x),this.material.uniformsNeedUpdate=!0,this.splatDataTextures.sceneIndexes={data:w,texture:A,size:x},this.material.uniforms.sceneCount.value=this.scenes.length}updateBaseDataFromSplatBuffers(t,r){const i=this.splatDataTextures.covariances,a=i?i.compressionLevel:void 0,s=this.splatDataTextures.scaleRotations,o=s?s.compressionLevel:void 0,l=this.splatDataTextures.sphericalHarmonics,u=l?l.compressionLevel:0;this.fillSplatDataArrays(this.splatDataTextures.baseData.covariances,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,this.splatDataTextures.baseData.sphericalHarmonics,void 0,a,o,u,t,r,t)}updateDataTexturesFromBaseData(t,r){const i=this.splatDataTextures.covariances,a=i?i.compressionLevel:void 0,s=this.splatDataTextures.scaleRotations,o=s?s.compressionLevel:void 0,l=this.splatDataTextures.sphericalHarmonics,u=l?l.compressionLevel:0,c=this.splatDataTextures.centerColors,d=c.data,f=c.texture;Fs.updateCenterColorsPaddedData(t,r,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,d);const h=this.renderer?this.renderer.properties.get(f):null;if(!h||!h.__webglTexture?f.needsUpdate=!0:this.updateDataTexture(d,c.texture,c.size,h,SL,abt,4,t,r),i){const _=i.texture,b=t*jA,x=r*jA;if(a===0)for(let A=b;A<=x;A++){const T=this.splatDataTextures.baseData.covariances[A];i.data[A]=T}else Fs.updatePaddedCompressedCovariancesTextureData(this.splatDataTextures.baseData.covariances,i.data,t*i.elementsPerTexelAllocated,b,x);const w=this.renderer?this.renderer.properties.get(_):null;!w||!w.__webglTexture?_.needsUpdate=!0:a===0?this.updateDataTexture(i.data,i.texture,i.size,w,i.elementsPerTexelStored,jA,4,t,r):this.updateDataTexture(i.data,i.texture,i.size,w,i.elementsPerTexelAllocated,i.elementsPerTexelAllocated,2,t,r)}if(s){const _=s.data,b=s.texture,x=6,w=o===0?4:2;Fs.updateScaleRotationsPaddedData(t,r,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,_);const A=this.renderer?this.renderer.properties.get(b):null;!A||!A.__webglTexture?b.needsUpdate=!0:this.updateDataTexture(_,s.texture,s.size,A,bL,x,w,t,r)}const p=this.splatDataTextures.baseData.sphericalHarmonics;if(p){let _=4;u===1?_=2:u===2&&(_=1);const b=(A,T,C,E,I)=>{const P=this.renderer?this.renderer.properties.get(A):null;!P||!P.__webglTexture?A.needsUpdate=!0:this.updateDataTexture(E,A,T,P,C,I,_,t,r)},x=l.componentCount,w=l.paddedComponentCount;if(l.textureCount===1){const A=l.data;for(let T=t;T<=r;T++){const C=x*T,E=w*T;for(let I=0;I<x;I++)A[E+I]=p[C+I]}b(l.texture,l.size,l.elementsPerTexel,A,w)}else{const A=l.componentCountPerChannel;for(let T=0;T<3;T++){const C=l.data[T];for(let E=t;E<=r;E++){const I=x*E,P=w*E;if(A>=3){for(let L=0;L<3;L++)C[P+L]=p[I+T*3+L];if(A>=8)for(let L=0;L<5;L++)C[P+3+L]=p[I+9+T*5+L]}}b(l.textures[T],l.size,l.elementsPerTexel,C,w)}}}const m=this.splatDataTextures.sceneIndexes,v=m.data;for(let _=this.lastBuildSplatCount;_<=r;_++)v[_]=this.globalSplatIndexToSceneIndexMap[_];const g=m.texture,y=this.renderer?this.renderer.properties.get(g):null;!y||!y.__webglTexture?g.needsUpdate=!0:this.updateDataTexture(v,m.texture,m.size,y,1,1,1,this.lastBuildSplatCount,r)}getTargetCovarianceCompressionLevel(){return this.halfPrecisionCovariancesOnGPU?1:0}getTargetSphericalHarmonicsCompressionLevel(){return Math.max(1,this.getMaximumSplatBufferCompressionLevel())}getMaximumSplatBufferCompressionLevel(){let t;for(let r=0;r<this.scenes.length;r++){const a=this.getScene(r).splatBuffer;(r===0||a.compressionLevel>t)&&(t=a.compressionLevel)}return t}getMinimumSplatBufferCompressionLevel(){let t;for(let r=0;r<this.scenes.length;r++){const a=this.getScene(r).splatBuffer;(r===0||a.compressionLevel<t)&&(t=a.compressionLevel)}return t}static computeTextureUpdateRegion(t,r,i,a,s){const o=s/a,l=t*o,u=Math.floor(l/i),c=u*i*a,d=r*o,f=Math.floor(d/i),h=f*i*a+i*a;return{dataStart:c,dataEnd:h,startRow:u,endRow:f}}updateDataTexture(t,r,i,a,s,o,l,u,c){const d=this.renderer.getContext(),f=Fs.computeTextureUpdateRegion(u,c,i.x,s,o),h=f.dataEnd-f.dataStart,p=new t.constructor(t.buffer,f.dataStart*l,h),m=f.endRow-f.startRow+1,v=this.webGLUtils.convert(r.type),g=this.webGLUtils.convert(r.format,r.colorSpace),y=d.getParameter(d.TEXTURE_BINDING_2D);d.bindTexture(d.TEXTURE_2D,a.__webglTexture),d.texSubImage2D(d.TEXTURE_2D,0,0,f.startRow,i.x,m,g,v,p),d.bindTexture(d.TEXTURE_2D,y)}static updatePaddedCompressedCovariancesTextureData(t,r,i,a,s){let o=new DataView(r.buffer),l=i,u=0;for(let c=a;c<=s;c+=2)o.setUint16(l*2,t[c],!0),o.setUint16(l*2+2,t[c+1],!0),l+=2,u++,u>=3&&(l+=2,u=0)}static updateCenterColorsPaddedData(t,r,i,a,s){for(let o=t;o<=r;o++){const l=o*4,u=o*3,c=o*4;s[c]=t_t(a,l),s[c+1]=hL(i[u]),s[c+2]=hL(i[u+1]),s[c+3]=hL(i[u+2])}}static updateScaleRotationsPaddedData(t,r,i,a,s){for(let l=t;l<=r;l++){const u=l*3,c=l*4,d=l*6;s[d]=i[u],s[d+1]=i[u+1],s[d+2]=i[u+2],s[d+3]=a[c],s[d+4]=a[c+1],s[d+5]=a[c+2]}}updateVisibleRegion(t){const r=this.getSplatCount(!0),i=new ft;if(!t){const s=new ft;this.scenes.forEach(o=>{s.add(o.splatBuffer.sceneCenter)}),s.multiplyScalar(1/this.scenes.length),this.calculatedSceneCenter.copy(s),this.material.uniforms.sceneCenter.value.copy(this.calculatedSceneCenter),this.material.uniformsNeedUpdate=!0}const a=t?this.lastBuildSplatCount:0;for(let s=a;s<r;s++){this.getSplatCenter(s,i,!0);const o=i.sub(this.calculatedSceneCenter).length();o>this.maxSplatDistanceFromSceneCenter&&(this.maxSplatDistanceFromSceneCenter=o)}this.maxSplatDistanceFromSceneCenter-this.visibleRegionBufferRadius>rZ&&(this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter,this.visibleRegionRadius=Math.max(this.visibleRegionBufferRadius-rZ,0)),this.finalBuild&&(this.visibleRegionRadius=this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter),this.updateVisibleRegionFadeDistance()}updateVisibleRegionFadeDistance(t=kx.Default){const r=cbt*this.sceneFadeInRateMultiplier,i=dbt*this.sceneFadeInRateMultiplier,a=this.finalBuild?r:i,s=t===kx.Default?a:i;this.visibleRegionFadeStartRadius=(this.visibleRegionRadius-this.visibleRegionFadeStartRadius)*s+this.visibleRegionFadeStartRadius;const l=(this.visibleRegionBufferRadius>0?this.visibleRegionFadeStartRadius/this.visibleRegionBufferRadius:0)>.99,u=l||t===kx.Instant?1:0;this.material.uniforms.visibleRegionFadeStartRadius.value=this.visibleRegionFadeStartRadius,this.material.uniforms.visibleRegionRadius.value=this.visibleRegionRadius,this.material.uniforms.firstRenderTime.value=this.firstRenderTime,this.material.uniforms.currentTime.value=performance.now(),this.material.uniforms.fadeInComplete.value=u,this.material.uniformsNeedUpdate=!0,this.visibleRegionChanging=!l}updateRenderIndexes(t,r){const i=this.geometry;i.attributes.splatIndex.set(t),i.attributes.splatIndex.needsUpdate=!0,r>0&&this.firstRenderTime===-1&&(this.firstRenderTime=performance.now()),i.instanceCount=r,i.setDrawRange(0,r)}updateTransforms(){for(let t=0;t<this.scenes.length;t++)this.getScene(t).updateTransform(this.dynamicMode)}setSplatScale(t=1){this.splatScale=t,this.material.uniforms.splatScale.value=t,this.material.uniformsNeedUpdate=!0}getSplatScale(){return this.splatScale}setPointCloudModeEnabled(t){this.pointCloudModeEnabled=t,this.material.uniforms.pointCloudModeEnabled.value=t?1:0,this.material.uniformsNeedUpdate=!0}getPointCloudModeEnabled(){return this.pointCloudModeEnabled}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(t=!1){return t?Fs.getTotalSplatCountForScenes(this.scenes):this.lastBuildSplatCount}static getTotalSplatCountForScenes(t){let r=0;for(let i of t)i&&i.splatBuffer&&(r+=i.splatBuffer.getSplatCount());return r}static getTotalSplatCountForSplatBuffers(t){let r=0;for(let i of t)r+=i.getSplatCount();return r}getMaxSplatCount(){return Fs.getTotalMaxSplatCountForScenes(this.scenes)}static getTotalMaxSplatCountForScenes(t){let r=0;for(let i of t)i&&i.splatBuffer&&(r+=i.splatBuffer.getMaxSplatCount());return r}static getTotalMaxSplatCountForSplatBuffers(t){let r=0;for(let i of t)r+=i.getMaxSplatCount();return r}disposeDistancesComputationGPUResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.vao&&(t.deleteVertexArray(this.distancesTransformFeedback.vao),this.distancesTransformFeedback.vao=null),this.distancesTransformFeedback.program&&(t.deleteProgram(this.distancesTransformFeedback.program),t.deleteShader(this.distancesTransformFeedback.vertexShader),t.deleteShader(this.distancesTransformFeedback.fragmentShader),this.distancesTransformFeedback.program=null,this.distancesTransformFeedback.vertexShader=null,this.distancesTransformFeedback.fragmentShader=null),this.disposeDistancesComputationGPUBufferResources(),this.distancesTransformFeedback.id&&(t.deleteTransformFeedback(this.distancesTransformFeedback.id),this.distancesTransformFeedback.id=null)}disposeDistancesComputationGPUBufferResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.centersBuffer&&(this.distancesTransformFeedback.centersBuffer=null,t.deleteBuffer(this.distancesTransformFeedback.centersBuffer)),this.distancesTransformFeedback.outDistancesBuffer&&(t.deleteBuffer(this.distancesTransformFeedback.outDistancesBuffer),this.distancesTransformFeedback.outDistancesBuffer=null)}setRenderer(t){if(t!==this.renderer){this.renderer=t;const r=this.renderer.getContext(),i=new nbt(r),a=new rbt(r,i,{});if(i.init(a),this.webGLUtils=new bhe(r,i),this.enableDistancesComputationOnGPU&&this.getSplatCount()>0){this.setupDistancesComputationTransformFeedback();const{centers:s,sceneIndexes:o}=this.getDataForDistancesComputation(0,this.getSplatCount()-1);this.refreshGPUBuffersForDistancesComputation(s,o)}}}updateGPUCentersBufferForDistancesComputation(t,r,i){if(!this.renderer)return;const a=this.renderer.getContext(),s=a.getParameter(a.VERTEX_ARRAY_BINDING);a.bindVertexArray(this.distancesTransformFeedback.vao);const o=this.integerBasedDistancesComputation?Uint32Array:Float32Array,l=16,u=i*l;if(a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),t)a.bufferSubData(a.ARRAY_BUFFER,u,r);else{const c=new o(this.getMaxSplatCount()*l);c.set(r),a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null),s&&a.bindVertexArray(s)}updateGPUTransformIndexesBufferForDistancesComputation(t,r,i){if(!this.renderer||!this.dynamicMode)return;const a=this.renderer.getContext(),s=a.getParameter(a.VERTEX_ARRAY_BINDING);a.bindVertexArray(this.distancesTransformFeedback.vao);const o=i*4;if(a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),t)a.bufferSubData(a.ARRAY_BUFFER,o,r);else{const l=new Uint32Array(this.getMaxSplatCount()*4);l.set(r),a.bufferData(a.ARRAY_BUFFER,l,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null),s&&a.bindVertexArray(s)}getSceneIndexes(t,r){let i;const a=r-t+1;i=new Uint32Array(a);for(let s=t;s<=r;s++)i[s]=this.globalSplatIndexToSceneIndexMap[s];return i}getLocalSplatParameters(t,r,i){i==null&&(i=!this.dynamicMode),r.splatBuffer=this.getSplatBufferForSplat(t),r.localIndex=this.getSplatLocalIndex(t),r.sceneTransform=i?this.getSceneTransformForSplat(t):null}fillSplatDataArrays(t,r,i,a,s,o,l,u=0,c=0,d=1,f,h,p=0,m){const v=new ft;v.x=void 0,v.y=void 0,this.splatRenderMode===Tf.ThreeD?v.z=void 0:v.z=1;const g=new kr;let y=0,_=this.scenes.length-1;m!=null&&m>=0&&m<=this.scenes.length&&(y=m,_=m);for(let b=y;b<=_;b++){l==null&&(l=!this.dynamicMode);const x=this.getScene(b),w=x.splatBuffer;let A;if(l&&(this.getSceneTransform(b,g),A=g),t&&w.fillSplatCovarianceArray(t,A,f,h,p,u),r||i){if(!r||!i)throw new Error('SplatMesh::fillSplatDataArrays() -> "scales" and "rotations" must both be valid.');w.fillSplatScaleRotationArray(r,i,A,f,h,p,c,v)}a&&w.fillSplatCenterArray(a,A,f,h,p),s&&w.fillSplatColorArray(s,x.minimumAlpha,f,h,p),o&&w.fillSphericalHarmonicsArray(o,this.minSphericalHarmonicsDegree,A,f,h,p,d),p+=w.getSplatCount()}}getIntegerCenters(t,r,i=!1){const a=r-t+1,s=new Float32Array(a*3);this.fillSplatDataArrays(null,null,null,s,null,null,void 0,void 0,void 0,void 0,t);let o,l=i?4:3;o=new Int32Array(a*l);for(let u=0;u<a;u++){for(let c=0;c<3;c++)o[u*l+c]=Math.round(s[u*3+c]*1e3);i&&(o[u*l+3]=1e3)}return o}getFloatCenters(t,r,i=!1){const a=r-t+1,s=new Float32Array(a*3);if(this.fillSplatDataArrays(null,null,null,s,null,null,void 0,void 0,void 0,void 0,t),!i)return s;let o=new Float32Array(a*4);for(let l=0;l<a;l++){for(let u=0;u<3;u++)o[l*4+u]=s[l*3+u];o[l*4+3]=1}return o}getSceneTransform(t,r){const i=this.getScene(t);i.updateTransform(this.dynamicMode),r.copy(i.transform)}getScene(t){if(t<0||t>=this.scenes.length)throw new Error("SplatMesh::getScene() -> Invalid scene index.");return this.scenes[t]}getSceneCount(){return this.scenes.length}getSplatBufferForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).splatBuffer}getSceneIndexForSplat(t){return this.globalSplatIndexToSceneIndexMap[t]}getSceneTransformForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).transform}getSplatLocalIndex(t){return this.globalSplatIndexToLocalSplatIndexMap[t]}static getIntegerMatrixArray(t){const r=t.elements,i=[];for(let a=0;a<16;a++)i[a]=Math.round(r[a]*1e3);return i}computeBoundingBox(t=!1,r){let i=this.getSplatCount();if(r!=null){if(r<0||r>=this.scenes.length)throw new Error("SplatMesh::computeBoundingBox() -> Invalid scene index.");i=this.scenes[r].splatBuffer.getSplatCount()}const a=new Float32Array(i*3);this.fillSplatDataArrays(null,null,null,a,null,null,t,void 0,void 0,void 0,void 0,r);const s=new ft,o=new ft;for(let l=0;l<i;l++){const u=l*3,c=a[u],d=a[u+1],f=a[u+2];(l===0||c<s.x)&&(s.x=c),(l===0||d<s.y)&&(s.y=d),(l===0||f<s.z)&&(s.z=f),(l===0||c>o.x)&&(o.x=c),(l===0||d>o.y)&&(o.y=d),(l===0||f>o.z)&&(o.z=f)}return new Sd(s,o)}}var fbt="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEbA2AAAGAQf39/f39/f39/f39/f39/fwBgAAF/AhIBA2VudgZtZW1vcnkCAwCAgAQDBAMAAQIHVAQRX193YXNtX2NhbGxfY3RvcnMAABhfX3dhc21fYXBwbHlfZGF0YV9yZWxvY3MAAAtzb3J0SW5kZXhlcwABE2Vtc2NyaXB0ZW5fdGxzX2luaXQAAgqWEAMDAAELihAEAXwDewN/A30gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEBA0AgAyABQQJ0IgVqIAIgACAFaigCAEECdGooAgAiBTYCACAFIAogBSAKSBshCiAFIA0gBSANShshDSABQQFqIgEgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiFWooAgAiFkECdGooAgAiFEcEQAJ/IAX9CQI4IAggFEEGdGoiDv0JAgwgDioCHP0gASAOKgIs/SACIA4qAjz9IAP95gEgBf0JAiggDv0JAgggDioCGP0gASAOKgIo/SACIA4qAjj9IAP95gEgBf0JAgggDv0JAgAgDioCEP0gASAOKgIg/SACIA4qAjD9IAP95gEgBf0JAhggDv0JAgQgDioCFP0gASAOKgIk/SACIA4qAjT9IAP95gH95AH95AH95AEiEf1f/QwAAAAAAECPQAAAAAAAQI9AIhL98gEiE/0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBP9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/REgDv0cAQJ/IBEgEf0NCAkKCwwNDg8AAAAAAAAAAP1fIBL98gEiEf0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9HAICfyAR/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAyESIBQhDwsgAyAVaiABIBZBBHRq/QAAACAS/bUBIhH9GwAgEf0bAWogEf0bAmogEf0bA2oiDjYCACAOIAogCiAOShshCiAOIA0gDSAOSBshDSACQQFqIgIgC0cNAAsMAwsCfyAFKgIIu/0UIAUqAhi7/SIB/QwAAAAAAECPQAAAAAAAQI9A/fIBIhH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIQ4CfyAR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyECAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQIgAv0RIA79HAEgBf0cAiESIAwhBQNAIAMgBUECdCICaiABIAAgAmooAgBBBHRq/QAAACAS/bUBIhH9GwAgEf0bAWogEf0bAmoiAjYCACACIAogAiAKSBshCiACIA0gAiANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEBA0AgAyABQQJ0IgVqAn8gAiAAIAVqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAFBAWoiASALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIRcgBSoCGCEYIAUqAgghGUH4////ByEKQYiAgIB4IQ0gDCEFA0ACfyAXIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCAZIAIqAgCUIBggAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIUaigCAEECdCIVaigCACIORwRAIAX9CQI4IAggDkEGdGoiD/0JAgwgDyoCHP0gASAPKgIs/SACIA8qAjz9IAP95gEgBf0JAiggD/0JAgggDyoCGP0gASAPKgIo/SACIA8qAjj9IAP95gEgBf0JAgggD/0JAgAgDyoCEP0gASAPKgIg/SACIA8qAjD9IAP95gEgBf0JAhggD/0JAgQgDyoCFP0gASAPKgIk/SACIA8qAjT9IAP95gH95AH95AH95AEhESAOIQ8LIAMgFGoCfyAR/R8DIAEgFUECdCIOQQxyaioCAJQgEf0fAiABIA5BCHJqKgIAlCAR/R8AIAEgDmoqAgCUIBH9HwEgASAOQQRyaioCAJSSkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSACQQFqIgIgC0cNAAsMAQtBiICAgHghDUH4////ByEKCyALIAxLBEAgCUEBa7MgDbIgCrKTlSEXIAwhDQNAAn8gFyADIA1BAnRqIgEoAgAgCmuylCIYi0MAAABPXQRAIBioDAELQYCAgIB4CyEOIAEgDjYCACAEIA5BAnRqIgEgASgCAEEBajYCACANQQFqIg0gC0cNAAsLIAlBAk8EQCAEKAIAIQ1BASEKA0AgBCAKQQJ0aiIBIAEoAgAgDWoiDTYCACAKQQFqIgogCUcNAAsLIAxBAEoEQCAMIQoDQCAGIApBAWsiAUECdCICaiAAIAJqKAIANgIAIApBAUshAiABIQogAg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCwsEAEEACw==",aZ="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACEgEDZW52Bm1lbW9yeQIDAICABAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQqiDwICAAucDwMBfAd9Bn8gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEFA0AgAyAFQQJ0IgFqIAIgACABaigCAEECdGooAgAiATYCACABIAogASAKSBshCiABIA0gASANShshDSAFQQFqIgUgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiGmooAgBBAnQiG2ooAgAiDkcEQAJ/IAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRgCfyARIA8qAiyUIBIgDyoCKJQgEyAPKgIglCAUIA8qAiSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRkCfyARIA8qAhyUIBIgDyoCGJQgEyAPKgIQlCAUIA8qAhSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRwCfyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIR0gDiEPCyADIBpqIAEgG0ECdGoiDigCBCAcbCAOKAIAIB1saiAOKAIIIBlsaiAOKAIMIBhsaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAii7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshAgJ/IAUqAhi7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshByALIAxNAn8gBSoCCLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEPQfj///8HIQpBiICAgHghDQ0CIAwhBQNAIAMgBUECdCIIaiABIAAgCGooAgBBBHRqIggoAgQgB2wgCCgCACAPbGogCCgCCCACbGoiCDYCACAIIAogCCAKSBshCiAIIA0gCCANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEFA0AgAyAFQQJ0IgFqAn8gAiAAIAFqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAVBAWoiBSALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIREgBSoCGCESIAUqAgghE0H4////ByEKQYiAgIB4IQ0gDCEFA0ACfyARIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCATIAIqAgCUIBIgAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIYaigCAEECdCIZaigCACIORwRAIAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSIRUgESAPKgIslCASIA8qAiiUIBMgDyoCIJQgFCAPKgIklJKSkiEWIBEgDyoCHJQgEiAPKgIYlCATIA8qAhCUIBQgDyoCFJSSkpIhFyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSIREgDiEPCyADIBhqAn8gFSABIBlBAnRqIg4qAgyUIBYgDioCCJQgESAOKgIAlCAXIA4qAgSUkpKSu0QAAAAAAACwQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIg42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gAkEBaiICIAtHDQALDAELQYiAgIB4IQ1B+P///wchCgsgCyAMSwRAIAlBAWuzIA2yIAqyk5UhESAMIQ0DQAJ/IBEgAyANQQJ0aiIBKAIAIAprspQiEotDAAAAT10EQCASqAwBC0GAgICAeAshDiABIA42AgAgBCAOQQJ0aiIBIAEoAgBBAWo2AgAgDUEBaiINIAtHDQALCyAJQQJPBEAgBCgCACENQQEhCgNAIAQgCkECdGoiASABKAIAIA1qIg02AgAgCkEBaiIKIAlHDQALCyAMQQBKBEAgDCEKA0AgBiAKQQFrIgFBAnQiAmogACACaigCADYCACAKQQFLIAEhCg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCws=",hbt="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQrrDwICAAvlDwQBfAN7B30DfyALIAprIQwCQAJAIA4EQCANBEBB+P///wchCkGIgICAeCENIAsgDE0NAyAMIQUDQCADIAVBAnQiAWogAiAAIAFqKAIAQQJ0aigCACIBNgIAIAEgCiABIApIGyEKIAEgDSABIA1KGyENIAVBAWoiBSALRw0ACwwDCyAPBEAgCyAMTQ0CQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIcaigCACIdQQJ0aigCACIbRwRAAn8gBf0JAjggCCAbQQZ0aiIO/QkCDCAOKgIc/SABIA4qAiz9IAIgDioCPP0gA/3mASAF/QkCKCAO/QkCCCAOKgIY/SABIA4qAij9IAIgDioCOP0gA/3mASAF/QkCCCAO/QkCACAOKgIQ/SABIA4qAiD9IAIgDioCMP0gA/3mASAF/QkCGCAO/QkCBCAOKgIU/SABIA4qAiT9IAIgDioCNP0gA/3mAf3kAf3kAf3kASIR/V/9DAAAAAAAQI9AAAAAAABAj0AiEv3yASIT/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOAn8gE/0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9ESAO/RwBAn8gESAR/Q0ICQoLDA0ODwABAgMAAQID/V8gEv3yASIR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAgJ/IBH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/RwDIRIgGyEPCyADIBxqIAEgHUEEdGr9AAAAIBL9tQEiEf0bACAR/RsBaiAR/RsCaiAR/RsDaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAgi7/RQgBSoCGLv9IgH9DAAAAAAAQI9AAAAAAABAj0D98gEiEf0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBH9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQL9ESAO/RwBIAX9HAIhEiAMIQUDQCADIAVBAnQiAmogASAAIAJqKAIAQQR0av0AAAAgEv21ASIR/RsAIBH9GwFqIBH9GwJqIgI2AgAgAiAKIAIgCkgbIQogAiANIAIgDUobIQ0gBUEBaiIFIAtHDQALDAILIA0EQEH4////ByEKQYiAgIB4IQ0gCyAMTQ0CIAwhBQNAIAMgBUECdCIBagJ/IAIgACABaigCAEECdGoqAgC7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgD0UEQCALIAxNDQEgBSoCKCEUIAUqAhghFSAFKgIIIRZB+P///wchCkGIgICAeCENIAwhBQNAAn8gFCABIAAgBUECdCIHaigCAEEEdGoiAioCCJQgFiACKgIAlCAVIAIqAgSUkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDiADIAdqIA42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gBUEBaiIFIAtHDQALDAILIAsgDE0NAEF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiG2ooAgBBAnQiHGooAgAiDkcEQCAFKgI4IhQgCCAOQQZ0aiIPKgI8lCAFKgIoIhUgDyoCOJQgBSoCCCIWIA8qAjCUIAUqAhgiFyAPKgI0lJKSkiEYIBQgDyoCLJQgFSAPKgIolCAWIA8qAiCUIBcgDyoCJJSSkpIhGSAUIA8qAhyUIBUgDyoCGJQgFiAPKgIQlCAXIA8qAhSUkpKSIRogFCAPKgIMlCAVIA8qAgiUIBYgDyoCAJQgFyAPKgIElJKSkiEUIA4hDwsgAyAbagJ/IBggASAcQQJ0aiIOKgIMlCAZIA4qAgiUIBQgDioCAJQgGiAOKgIElJKSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAJBAWoiAiALRw0ACwwBC0GIgICAeCENQfj///8HIQoLIAsgDEsEQCAJQQFrsyANsiAKspOVIRQgDCENA0ACfyAUIAMgDUECdGoiASgCACAKa7KUIhWLQwAAAE9dBEAgFagMAQtBgICAgHgLIQ4gASAONgIAIAQgDkECdGoiASABKAIAQQFqNgIAIA1BAWoiDSALRw0ACwsgCUECTwRAIAQoAgAhDUEBIQoDQCAEIApBAnRqIgEgASgCACANaiINNgIAIApBAWoiCiAJRw0ACwsgDEEASgRAIAwhCgNAIAYgCkEBayIBQQJ0IgJqIAAgAmooAgA2AgAgCkEBSyABIQoNAAsLIAsgDEoEQCALIQoDQCAGIAsgBCADIApBAWsiCkECdCIBaigCAEECdGoiAigCACIFa0ECdGogACABaigCADYCACACIAVBAWs2AgAgCiAMSg0ACwsL",pbt="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQqiDwICAAucDwMBfAd9Bn8gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEFA0AgAyAFQQJ0IgFqIAIgACABaigCAEECdGooAgAiATYCACABIAogASAKSBshCiABIA0gASANShshDSAFQQFqIgUgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiGmooAgBBAnQiG2ooAgAiDkcEQAJ/IAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRgCfyARIA8qAiyUIBIgDyoCKJQgEyAPKgIglCAUIA8qAiSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRkCfyARIA8qAhyUIBIgDyoCGJQgEyAPKgIQlCAUIA8qAhSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRwCfyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIR0gDiEPCyADIBpqIAEgG0ECdGoiDigCBCAcbCAOKAIAIB1saiAOKAIIIBlsaiAOKAIMIBhsaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAii7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshAgJ/IAUqAhi7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshByALIAxNAn8gBSoCCLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEPQfj///8HIQpBiICAgHghDQ0CIAwhBQNAIAMgBUECdCIIaiABIAAgCGooAgBBBHRqIggoAgQgB2wgCCgCACAPbGogCCgCCCACbGoiCDYCACAIIAogCCAKSBshCiAIIA0gCCANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEFA0AgAyAFQQJ0IgFqAn8gAiAAIAFqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAVBAWoiBSALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIREgBSoCGCESIAUqAgghE0H4////ByEKQYiAgIB4IQ0gDCEFA0ACfyARIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCATIAIqAgCUIBIgAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIYaigCAEECdCIZaigCACIORwRAIAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSIRUgESAPKgIslCASIA8qAiiUIBMgDyoCIJQgFCAPKgIklJKSkiEWIBEgDyoCHJQgEiAPKgIYlCATIA8qAhCUIBQgDyoCFJSSkpIhFyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSIREgDiEPCyADIBhqAn8gFSABIBlBAnRqIg4qAgyUIBYgDioCCJQgESAOKgIAlCAXIA4qAgSUkpKSu0QAAAAAAACwQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIg42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gAkEBaiICIAtHDQALDAELQYiAgIB4IQ1B+P///wchCgsgCyAMSwRAIAlBAWuzIA2yIAqyk5UhESAMIQ0DQAJ/IBEgAyANQQJ0aiIBKAIAIAprspQiEotDAAAAT10EQCASqAwBC0GAgICAeAshDiABIA42AgAgBCAOQQJ0aiIBIAEoAgBBAWo2AgAgDUEBaiINIAtHDQALCyAJQQJPBEAgBCgCACENQQEhCgNAIAQgCkECdGoiASABKAIAIA1qIg02AgAgCkEBaiIKIAlHDQALCyAMQQBKBEAgDCEKA0AgBiAKQQFrIgFBAnQiAmogACACaigCADYCACAKQQFLIAEhCg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCws=";function mbt(n){let e,t,r,i,a,s,o,l,u,c,d,f,h,p,m,v,g,y,_,b;function x(w,A,T,C,E,I,P){const L=performance.now();if(!r&&(new Uint32Array(t,o,E.byteLength/b.BytesPerInt).set(E),new Float32Array(t,c,P.byteLength/b.BytesPerFloat).set(P),C)){let U;i?U=new Int32Array(t,d,I.byteLength/b.BytesPerInt):U=new Float32Array(t,d,I.byteLength/b.BytesPerFloat),U.set(I)}v||(v=new Uint32Array(y)),new Float32Array(t,m,16).set(T),new Uint32Array(t,h,y).set(v),e.exports.sortIndexes(o,p,d,f,h,m,l,u,c,y,w,A,s,C,i,a);const N={sortDone:!0,splatSortCount:w,splatRenderCount:A,sortTime:0};if(!r){const k=new Uint32Array(t,l,A);(!g||g.length<A)&&(g=new Uint32Array(A)),g.set(k),N.sortedIndexes=g}const F=performance.now();N.sortTime=F-L,n.postMessage(N)}n.onmessage=w=>{if(w.data.centers)centers=w.data.centers,sceneIndexes=w.data.sceneIndexes,i?new Int32Array(t,p+w.data.range.from*b.BytesPerInt*4,w.data.range.count*4).set(new Int32Array(centers)):new Float32Array(t,p+w.data.range.from*b.BytesPerFloat*4,w.data.range.count*4).set(new Float32Array(centers)),a&&new Uint32Array(t,u+w.data.range.from*4,w.data.range.count).set(new Uint32Array(sceneIndexes)),_=w.data.range.from+w.data.range.count;else if(w.data.sort){const A=Math.min(w.data.sort.splatRenderCount||0,_),T=Math.min(w.data.sort.splatSortCount||0,_),C=w.data.sort.usePrecomputedDistances;let E,I,P;r||(E=w.data.sort.indexesToSort,P=w.data.sort.transforms,C&&(I=w.data.sort.precomputedDistances)),x(T,A,w.data.sort.modelViewProj,C,E,I,P)}else if(w.data.init){b=w.data.init.Constants,s=w.data.init.splatCount,r=w.data.init.useSharedMemory,i=w.data.init.integerBasedSort,a=w.data.init.dynamicMode,y=w.data.init.distanceMapRange,_=0;const A=i?b.BytesPerInt*4:b.BytesPerFloat*4,T=new Uint8Array(w.data.init.sorterWasmBytes),C=16*b.BytesPerFloat,E=s*b.BytesPerInt,I=s*A,P=C,L=i?s*b.BytesPerInt:s*b.BytesPerFloat,N=s*b.BytesPerInt,F=s*b.BytesPerInt,k=i?y*b.BytesPerInt*2:y*b.BytesPerFloat*2,H=a?s*b.BytesPerInt:0,U=a?b.MaxScenes*C:0,B=b.MemoryPageSize*32,$=E+I+P+L+N+k+F+H+U+B,ee=Math.floor($/b.MemoryPageSize)+1,re={module:{},env:{memory:new WebAssembly.Memory({initial:ee,maximum:ee,shared:!0})}};WebAssembly.compile(T).then(ne=>WebAssembly.instantiate(ne,re)).then(ne=>{e=ne,o=0,p=o+E,m=p+I,d=m+P,f=d+L,h=f+N,l=h+k,u=l+F,c=u+H,t=re.env.memory.buffer,r?n.postMessage({sortSetupPhase1Complete:!0,indexesToSortBuffer:t,indexesToSortOffset:o,sortedIndexesBuffer:t,sortedIndexesOffset:l,precomputedDistancesBuffer:t,precomputedDistancesOffset:d,transformsBuffer:t,transformsOffset:c}):n.postMessage({sortSetupPhase1Complete:!0})})}}}function vbt(n,e,t,r,i,a=fi.DefaultSplatSortDistanceMapPrecision){const s=new Worker(URL.createObjectURL(new Blob(["(",mbt.toString(),")(self)"],{type:"application/javascript"})));let o=fbt;const l=dU()?She():null;!t&&!e?(o=aZ,l&&l.major<=16&&l.minor<4&&(o=pbt)):t?e||l&&l.major<=16&&l.minor<4&&(o=hbt):o=aZ;const u=atob(o),c=new Uint8Array(u.length);for(let d=0;d<u.length;d++)c[d]=u.charCodeAt(d);return s.postMessage({init:{sorterWasmBytes:c.buffer,splatCount:n,useSharedMemory:e,integerBasedSort:r,dynamicMode:i,distanceMapRange:1<<a,Constants:{BytesPerFloat:fi.BytesPerFloat,BytesPerInt:fi.BytesPerInt,MemoryPageSize:fi.MemoryPageSize,MaxScenes:fi.MaxScenes}}}),s}const vy={None:0,VR:1,AR:2};class __{static createButton(e,t={}){const r=document.createElement("button");function i(){let u=null;async function c(h){h.addEventListener("end",d),await e.xr.setSession(h),r.textContent="EXIT VR",u=h}function d(){u.removeEventListener("end",d),r.textContent="ENTER VR",u=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="ENTER VR";const f={...t,optionalFeatures:["local-floor","bounded-floor","layers",...t.optionalFeatures||[]]};r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){u===null?navigator.xr.requestSession("immersive-vr",f).then(c):(u.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",f).then(c).catch(h=>{console.warn(h)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",f).then(c).catch(h=>{console.warn(h)})}function a(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null}function s(){a(),r.textContent="VR NOT SUPPORTED"}function o(u){a(),console.warn("Exception when trying to call xr.isSessionSupported",u),r.textContent="VR NOT ALLOWED"}function l(u){u.style.position="absolute",u.style.bottom="20px",u.style.padding="12px 6px",u.style.border="1px solid #fff",u.style.borderRadius="4px",u.style.background="rgba(0,0,0,0.1)",u.style.color="#fff",u.style.font="normal 13px sans-serif",u.style.textAlign="center",u.style.opacity="0.5",u.style.outline="none",u.style.zIndex="999"}if("xr"in navigator)return r.id="VRButton",r.style.display="none",l(r),navigator.xr.isSessionSupported("immersive-vr").then(function(u){u?i():s(),u&&__.xrSessionIsGranted&&r.click()}).catch(o),r;{const u=document.createElement("a");return window.isSecureContext===!1?(u.href=document.location.href.replace(/^http:/,"https:"),u.innerHTML="WEBXR NEEDS HTTPS"):(u.href="https://immersiveweb.dev/",u.innerHTML="WEBXR NOT AVAILABLE"),u.style.left="calc(50% - 90px)",u.style.width="180px",u.style.textDecoration="none",l(u),u}}static registerSessionGrantedListener(){if(typeof navigator<"u"&&"xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{__.xrSessionIsGranted=!0})}}}__.xrSessionIsGranted=!1;__.registerSessionGrantedListener();class gbt{static createButton(e,t={}){const r=document.createElement("button");function i(){if(t.domOverlay===void 0){const f=document.createElement("div");f.style.display="none",document.body.appendChild(f);const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("width",38),h.setAttribute("height",38),h.style.position="absolute",h.style.right="20px",h.style.top="20px",h.addEventListener("click",function(){u.end()}),f.appendChild(h);const p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),p.setAttribute("stroke","#fff"),p.setAttribute("stroke-width",2),h.appendChild(p),t.optionalFeatures===void 0&&(t.optionalFeatures=[]),t.optionalFeatures.push("dom-overlay"),t.domOverlay={root:f}}let u=null;async function c(f){f.addEventListener("end",d),e.xr.setReferenceSpaceType("local"),await e.xr.setSession(f),r.textContent="STOP AR",t.domOverlay.root.style.display="",u=f}function d(){u.removeEventListener("end",d),r.textContent="START AR",t.domOverlay.root.style.display="none",u=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="START AR",r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){u===null?navigator.xr.requestSession("immersive-ar",t).then(c):(u.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(c).catch(f=>{console.warn(f)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(c).catch(f=>{console.warn(f)})}function a(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null}function s(){a(),r.textContent="AR NOT SUPPORTED"}function o(u){a(),console.warn("Exception when trying to call xr.isSessionSupported",u),r.textContent="AR NOT ALLOWED"}function l(u){u.style.position="absolute",u.style.bottom="20px",u.style.padding="12px 6px",u.style.border="1px solid #fff",u.style.borderRadius="4px",u.style.background="rgba(0,0,0,0.1)",u.style.color="#fff",u.style.font="normal 13px sans-serif",u.style.textAlign="center",u.style.opacity="0.5",u.style.outline="none",u.style.zIndex="999"}if("xr"in navigator)return r.id="ARButton",r.style.display="none",l(r),navigator.xr.isSessionSupported("immersive-ar").then(function(u){u?i():s()}).catch(o),r;{const u=document.createElement("a");return window.isSecureContext===!1?(u.href=document.location.href.replace(/^http:/,"https:"),u.innerHTML="WEBXR NEEDS HTTPS"):(u.href="https://immersiveweb.dev/",u.innerHTML="WEBXR NOT AVAILABLE"),u.style.left="calc(50% - 90px)",u.style.width="180px",u.style.textDecoration="none",l(u),u}}}const xL={Always:0,OnChange:1,Never:2},ybt=50,_bt=.75,bbt=15e5,Sbt=10,xbt=2.5,wbt=60,lp=class lp{constructor(e={}){En(this,"onKeyDown",function(){const e=new ft,t=new kr,r=new kr;return function(i){switch(e.set(0,0,-1),e.transformDirection(this.camera.matrixWorld),t.makeRotationAxis(e,Math.PI/128),r.makeRotationAxis(e,-Math.PI/128),i.code){case"KeyG":this.focalAdjustment+=.02,this.forceRenderNextFrame();break;case"KeyF":this.focalAdjustment-=.02,this.forceRenderNextFrame();break;case"ArrowLeft":this.camera.up.transformDirection(t);break;case"ArrowRight":this.camera.up.transformDirection(r);break;case"KeyC":this.showMeshCursor=!this.showMeshCursor;break;case"KeyU":this.showControlPlane=!this.showControlPlane;break;case"KeyI":this.showInfo=!this.showInfo,this.showInfo?this.infoPanel.show():this.infoPanel.hide();break;case"KeyO":this.usingExternalCamera||this.setOrthographicMode(!this.camera.isOrthographicCamera);break;case"KeyP":this.usingExternalCamera||this.splatMesh.setPointCloudModeEnabled(!this.splatMesh.getPointCloudModeEnabled());break;case"Equal":this.usingExternalCamera||this.splatMesh.setSplatScale(this.splatMesh.getSplatScale()+.05);break;case"Minus":this.usingExternalCamera||this.splatMesh.setSplatScale(Math.max(this.splatMesh.getSplatScale()-.05,0));break}}}());En(this,"onMouseUp",function(){const e=new cr;return function(t){e.copy(this.mousePosition).sub(this.mouseDownPosition),hy()-this.mouseDownTime<.5&&e.length()<2&&this.onMouseClick(t)}}());En(this,"checkForFocalPointChange",function(){const e=new cr,t=new ft,r=[];return function(){if(!this.transitioningCameraTarget&&(this.getRenderDimensions(e),r.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,e),this.raycaster.intersectSplatMesh(this.splatMesh,r),r.length>0)){const a=r[0].origin;t.copy(a).sub(this.camera.position),t.length()>_bt&&(this.previousCameraTarget.copy(this.controls.target),this.nextCameraTarget.copy(a),this.transitioningCameraTarget=!0,this.transitioningCameraTargetStartTime=hy())}}}());En(this,"updateSplatMesh",function(){const e=new cr;return function(){if(!this.splatMesh)return;if(this.splatMesh.getSplatCount()>0){this.splatMesh.updateVisibleRegionFadeDistance(this.sceneRevealMode),this.splatMesh.updateTransforms(),this.getRenderDimensions(e);const r=this.camera.projectionMatrix.elements[0]*.5*this.devicePixelRatio*e.x,i=this.camera.projectionMatrix.elements[5]*.5*this.devicePixelRatio*e.y,a=this.camera.isOrthographicCamera?1/this.devicePixelRatio:1,s=this.focalAdjustment*a,o=1/s;this.adjustForWebXRStereo(e),this.splatMesh.updateUniforms(e,r*s,i*s,this.camera.isOrthographicCamera,this.camera.zoom||1,o)}}}());En(this,"addSplatBuffers",function(){return function(e,t=[],r=!0,i=!0,a=!0,s=!1,o=!1,l=!0){if(this.isDisposingOrDisposed())return Promise.resolve();let u=null;const c=()=>{u!==null&&(this.loadingSpinner.removeTask(u),u=null)};return this.splatRenderReady=!1,new Promise(d=>{i&&(u=this.loadingSpinner.addTask("Processing splats...")),Rc(()=>{if(this.isDisposingOrDisposed())d();else{const f=this.addSplatBuffersToMesh(e,t,r,a,s,l),h=this.splatMesh.getMaxSplatCount();this.sortWorker&&this.sortWorker.maxSplatCount!==h&&this.disposeSortWorker(),this.gpuAcceleratedSort||this.preSortMessages.push({centers:f.centers.buffer,sceneIndexes:f.sceneIndexes.buffer,range:{from:f.from,to:f.to,count:f.count}}),(!this.sortWorker&&h>0?this.setupSortWorker(this.splatMesh):Promise.resolve()).then(()=>{this.isDisposingOrDisposed()||this.runSplatSort(!0,!0).then(m=>{!this.sortWorker||!m?(this.splatRenderReady=!0,c(),d()):(o?this.splatRenderReady=!0:this.runAfterNextSort.push(()=>{this.splatRenderReady=!0}),this.runAfterNextSort.push(()=>{c(),d()}))})})}},!0)})}}());En(this,"addSplatBuffersToMesh",function(){let e;return function(t,r,i=!0,a=!1,s=!1,o=!0){if(this.isDisposingOrDisposed())return;let l=[],u=[];s||(l=this.splatMesh.scenes.map(h=>h.splatBuffer)||[],u=this.splatMesh.sceneOptions?this.splatMesh.sceneOptions.map(h=>h):[]),l.push(...t),u.push(...r),this.renderer&&this.splatMesh.setRenderer(this.renderer);const c=h=>{if(this.isDisposingOrDisposed())return;const p=this.splatMesh.getSplatCount();a&&p>=bbt&&!h&&!e&&(this.loadingSpinner.setMinimized(!0,!0),e=this.loadingSpinner.addTask("Optimizing data structures..."))},d=h=>{this.isDisposingOrDisposed()||h&&e&&(this.loadingSpinner.removeTask(e),e=null)},f=this.splatMesh.build(l,u,!0,i,c,d,o);return i&&this.freeIntermediateSplatData&&this.splatMesh.freeIntermediateSplatData(),f}}());En(this,"shouldRender",function(){let e=0;const t=new ft,r=new wa,i=1e-4;return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return!1;let a=!1,s=!1;if(this.camera){const o=this.camera.position,l=this.camera.quaternion;s=Math.abs(o.x-t.x)>i||Math.abs(o.y-t.y)>i||Math.abs(o.z-t.z)>i||Math.abs(l.x-r.x)>i||Math.abs(l.y-r.y)>i||Math.abs(l.z-r.z)>i||Math.abs(l.w-r.w)>i}return a=this.renderMode!==xL.Never&&(e===0||this.splatMesh.visibleRegionChanging||s||this.renderMode===xL.Always||this.dynamicMode===!0||this.renderNextFrame),this.camera&&(t.copy(this.camera.position),r.copy(this.camera.quaternion)),e++,a}}());En(this,"render",function(){return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return;const e=r=>{for(let i of r.children)if(i.visible)return!0;return!1},t=this.renderer.autoClear;e(this.threeScene)&&(this.renderer.render(this.threeScene,this.camera),this.renderer.autoClear=!1),this.renderer.render(this.splatMesh,this.camera),this.renderer.autoClear=!1,this.sceneHelper.getFocusMarkerOpacity()>0&&this.renderer.render(this.sceneHelper.focusMarker,this.camera),this.showControlPlane&&this.renderer.render(this.sceneHelper.controlPlane,this.camera),this.renderer.autoClear=t}}());En(this,"updateFPS",function(){let e=hy(),t=0;return function(){if(this.consecutiveRenderFrames>wbt){const r=hy();r-e>=1?(this.currentFPS=t,t=0,e=r):t++}else this.currentFPS=null}}());En(this,"updateForRendererSizeChanges",function(){const e=new cr,t=new cr;let r;return function(){this.usingExternalCamera||(this.renderer.getSize(t),(r===void 0||r!==this.camera.isOrthographicCamera||t.x!==e.x||t.y!==e.y)&&(this.camera.isOrthographicCamera?(this.camera.left=-t.x/2,this.camera.right=t.x/2,this.camera.top=t.y/2,this.camera.bottom=-t.y/2):this.camera.aspect=t.x/t.y,this.camera.updateProjectionMatrix(),e.copy(t),r=this.camera.isOrthographicCamera))}}());En(this,"timingSensitiveUpdates",function(){let e;return function(){const t=hy();e||(e=t);const r=t-e;this.updateCameraTransition(t),this.updateFocusMarker(r),e=t}}());En(this,"updateCameraTransition",function(){let e=new ft,t=new ft,r=new ft;return function(i){if(this.transitioningCameraTarget){t.copy(this.previousCameraTarget).sub(this.camera.position).normalize(),r.copy(this.nextCameraTarget).sub(this.camera.position).normalize();const a=Math.acos(t.dot(r)),o=(a/(Math.PI/3)*.65+.3)/a*(i-this.transitioningCameraTargetStartTime);e.copy(this.previousCameraTarget).lerp(this.nextCameraTarget,o),this.camera.lookAt(e),this.controls.target.copy(e),o>=1&&(this.transitioningCameraTarget=!1)}}}());En(this,"updateFocusMarker",function(){const e=new cr;let t=!1;return function(r){if(this.getRenderDimensions(e),this.transitioningCameraTarget){this.sceneHelper.setFocusMarkerVisibility(!0);const i=Math.max(this.sceneHelper.getFocusMarkerOpacity(),0);let a=Math.min(i+Sbt*r,1);this.sceneHelper.setFocusMarkerOpacity(a),this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,e),t=!0,this.forceRenderNextFrame()}else{let i;if(t?i=1:i=Math.min(this.sceneHelper.getFocusMarkerOpacity(),1),i>0){this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,e);let a=Math.max(i-xbt*r,0);this.sceneHelper.setFocusMarkerOpacity(a),a===0&&this.sceneHelper.setFocusMarkerVisibility(!1)}i>0&&this.forceRenderNextFrame(),t=!1}}}());En(this,"updateMeshCursor",function(){const e=[],t=new cr;return function(){this.showMeshCursor?(this.forceRenderNextFrame(),this.getRenderDimensions(t),e.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,t),this.raycaster.intersectSplatMesh(this.splatMesh,e),e.length>0?(this.sceneHelper.setMeshCursorVisibility(!0),this.sceneHelper.positionAndOrientMeshCursor(e[0].origin,this.camera)):this.sceneHelper.setMeshCursorVisibility(!1)):(this.sceneHelper.getMeschCursorVisibility()&&this.forceRenderNextFrame(),this.sceneHelper.setMeshCursorVisibility(!1))}}());En(this,"updateInfoPanel",function(){const e=new cr;return function(){if(!this.showInfo)return;const t=this.splatMesh.getSplatCount();this.getRenderDimensions(e);const r=this.controls?this.controls.target:null,i=this.showMeshCursor?this.sceneHelper.meshCursor.position:null,a=t>0?this.splatRenderCount/t*100:0;this.infoPanel.update(e,this.camera.position,r,this.camera.up,this.camera.isOrthographicCamera,i,this.currentFPS||"N/A",t,this.splatRenderCount,a,this.lastSortTime,this.focalAdjustment,this.splatMesh.getSplatScale(),this.splatMesh.getPointCloudModeEnabled())}}());En(this,"runSplatSort",function(){const e=new kr,t=[],r=new ft(0,0,-1),i=new ft(0,0,-1),a=new ft,s=new ft,o=[],l=[{angleThreshold:.55,sortFractions:[.125,.33333,.75]},{angleThreshold:.65,sortFractions:[.33333,.66667]},{angleThreshold:.8,sortFractions:[.5]}];return function(u=!1,c=!1){if(!this.initialized)return Promise.resolve(!1);if(this.sortRunning)return Promise.resolve(!0);if(this.splatMesh.getSplatCount()<=0)return this.splatRenderCount=0,Promise.resolve(!1);let d=0,f=0,h=!1,p=!1;if(i.set(0,0,-1).applyQuaternion(this.camera.quaternion),d=i.dot(r),f=s.copy(this.camera.position).sub(a).length(),!u&&!this.splatMesh.dynamicMode&&o.length===0&&(d<=.99&&(h=!0),f>=1&&(p=!0),!h&&!p))return Promise.resolve(!1);this.sortRunning=!0;let{splatRenderCount:m,shouldSortAll:v}=this.gatherSceneNodesForSort();v=v||c,this.splatRenderCount=m,e.copy(this.camera.matrixWorld).invert();const g=this.perspectiveCamera||this.camera;e.premultiply(g.projectionMatrix),this.splatMesh.dynamicMode||e.multiply(this.splatMesh.matrixWorld);let y=Promise.resolve(!0);return this.gpuAcceleratedSort&&(o.length<=1||o.length%2===0)&&(y=this.splatMesh.computeDistancesOnGPU(e,this.sortWorkerPrecomputedDistances)),y.then(()=>{if(o.length===0)if(this.splatMesh.dynamicMode||v)o.push(this.splatRenderCount);else{for(let x of l)if(d<x.angleThreshold){for(let w of x.sortFractions)o.push(Math.floor(this.splatRenderCount*w));break}o.push(this.splatRenderCount)}let _=Math.min(o.shift(),this.splatRenderCount);this.splatSortCount=_,t[0]=this.camera.position.x,t[1]=this.camera.position.y,t[2]=this.camera.position.z;const b={modelViewProj:e.elements,cameraPosition:t,splatRenderCount:this.splatRenderCount,splatSortCount:_,usePrecomputedDistances:this.gpuAcceleratedSort};return this.splatMesh.dynamicMode&&this.splatMesh.fillTransformsArray(this.sortWorkerTransforms),this.sharedMemoryForWorkers||(b.indexesToSort=this.sortWorkerIndexesToSort,b.transforms=this.sortWorkerTransforms,this.gpuAcceleratedSort&&(b.precomputedDistances=this.sortWorkerPrecomputedDistances)),this.sortPromise=new Promise(x=>{this.sortPromiseResolver=x}),this.preSortMessages.length>0&&(this.preSortMessages.forEach(x=>{this.sortWorker.postMessage(x)}),this.preSortMessages=[]),this.sortWorker.postMessage({sort:b}),o.length===0&&(a.copy(this.camera.position),r.copy(i)),!0}),y}}());En(this,"gatherSceneNodesForSort",function(){const e=[];let t=null;const r=new ft,i=new ft,a=new ft,s=new kr,o=new kr,l=new kr,u=new ft,c=new ft(0,0,-1),d=new ft,f=h=>d.copy(h.max).sub(h.min).length();return function(h=!1){this.getRenderDimensions(u);const p=u.y/2/Math.tan(this.camera.fov/2*nhe.DEG2RAD),m=Math.atan(u.x/2/p),v=Math.atan(u.y/2/p),g=Math.cos(m),y=Math.cos(v),_=this.splatMesh.getSplatTree();if(_){o.copy(this.camera.matrixWorld).invert(),this.splatMesh.dynamicMode||o.multiply(this.splatMesh.matrixWorld);let b=0,x=0;for(let A=0;A<_.subTrees.length;A++){const T=_.subTrees[A];s.copy(o),this.splatMesh.dynamicMode&&(this.splatMesh.getSceneTransform(A,l),s.multiply(l));const C=T.nodesWithIndexes.length;for(let E=0;E<C;E++){const I=T.nodesWithIndexes[E];if(!I.data||!I.data.indexes||I.data.indexes.length===0)continue;a.copy(I.center).applyMatrix4(s);const P=a.length();a.normalize(),r.copy(a).setX(0).normalize(),i.copy(a).setY(0).normalize();const L=c.dot(i),N=c.dot(r),F=f(I),k=N<y-.6,H=L<g-.6;!h&&(H||k)&&P>F||(x+=I.data.indexes.length,e[b]=I,I.data.distanceToNode=P,b++)}}e.length=b,e.sort((A,T)=>A.data.distanceToNode<T.data.distanceToNode?-1:1);let w=x*fi.BytesPerInt;for(let A=0;A<b;A++){const T=e[A],C=T.data.indexes.length,E=C*fi.BytesPerInt;new Uint32Array(this.sortWorkerIndexesToSort.buffer,w-E,C).set(T.data.indexes),w-=E}return{splatRenderCount:x,shouldSortAll:!1}}else{const b=this.splatMesh.getSplatCount();if(!t||t.length!==b){t=new Uint32Array(b);for(let x=0;x<b;x++)t[x]=x}return this.sortWorkerIndexesToSort.set(t),{splatRenderCount:b,shouldSortAll:!0}}}}());if(e.cameraUp||(e.cameraUp=[0,1,0]),this.cameraUp=new ft().fromArray(e.cameraUp),e.initialCameraPosition||(e.initialCameraPosition=[0,10,15]),this.initialCameraPosition=new ft().fromArray(e.initialCameraPosition),e.initialCameraLookAt||(e.initialCameraLookAt=[0,0,0]),this.initialCameraLookAt=new ft().fromArray(e.initialCameraLookAt),this.dropInMode=e.dropInMode||!1,(e.selfDrivenMode===void 0||e.selfDrivenMode===null)&&(e.selfDrivenMode=!0),this.selfDrivenMode=e.selfDrivenMode&&!this.dropInMode,this.selfDrivenUpdateFunc=this.selfDrivenUpdate.bind(this),e.useBuiltInControls===void 0&&(e.useBuiltInControls=!0),this.useBuiltInControls=e.useBuiltInControls,this.rootElement=e.rootElement,this.ignoreDevicePixelRatio=e.ignoreDevicePixelRatio||!1,this.devicePixelRatio=this.ignoreDevicePixelRatio?1:window.devicePixelRatio||1,this.halfPrecisionCovariancesOnGPU=e.halfPrecisionCovariancesOnGPU||!1,this.threeScene=e.threeScene,this.renderer=e.renderer,this.camera=e.camera,this.gpuAcceleratedSort=e.gpuAcceleratedSort||!1,(e.integerBasedSort===void 0||e.integerBasedSort===null)&&(e.integerBasedSort=!0),this.integerBasedSort=e.integerBasedSort,(e.sharedMemoryForWorkers===void 0||e.sharedMemoryForWorkers===null)&&(e.sharedMemoryForWorkers=!0),this.sharedMemoryForWorkers=e.sharedMemoryForWorkers,this.dynamicScene=!!e.dynamicScene,this.antialiased=e.antialiased||!1,this.kernel2DSize=e.kernel2DSize===void 0?.3:e.kernel2DSize,this.webXRMode=e.webXRMode||vy.None,this.webXRMode!==vy.None&&(this.gpuAcceleratedSort=!1),this.webXRActive=!1,this.webXRSessionInit=e.webXRSessionInit||{},this.renderMode=e.renderMode||xL.Always,this.sceneRevealMode=e.sceneRevealMode||kx.Default,this.focalAdjustment=e.focalAdjustment||1,this.maxScreenSpaceSplatSize=e.maxScreenSpaceSplatSize||1024,this.logLevel=e.logLevel||_1.None,this.sphericalHarmonicsDegree=e.sphericalHarmonicsDegree||0,this.enableOptionalEffects=e.enableOptionalEffects||!1,(e.enableSIMDInSort===void 0||e.enableSIMDInSort===null)&&(e.enableSIMDInSort=!0),this.enableSIMDInSort=e.enableSIMDInSort,(e.inMemoryCompressionLevel===void 0||e.inMemoryCompressionLevel===null)&&(e.inMemoryCompressionLevel=0),this.inMemoryCompressionLevel=e.inMemoryCompressionLevel,(e.optimizeSplatData===void 0||e.optimizeSplatData===null)&&(e.optimizeSplatData=!0),this.optimizeSplatData=e.optimizeSplatData,(e.freeIntermediateSplatData===void 0||e.freeIntermediateSplatData===null)&&(e.freeIntermediateSplatData=!1),this.freeIntermediateSplatData=e.freeIntermediateSplatData,dU()){const r=She();r.major<17&&(this.enableSIMDInSort=!1),r.major<16&&(this.sharedMemoryForWorkers=!1)}(e.splatRenderMode===void 0||e.splatRenderMode===null)&&(e.splatRenderMode=Tf.ThreeD),this.splatRenderMode=e.splatRenderMode,this.sceneFadeInRateMultiplier=e.sceneFadeInRateMultiplier||1,this.splatSortDistanceMapPrecision=e.splatSortDistanceMapPrecision||fi.DefaultSplatSortDistanceMapPrecision;const t=this.integerBasedSort?20:24;this.splatSortDistanceMapPrecision=js(this.splatSortDistanceMapPrecision,10,t),this.onSplatMeshChangedCallback=null,this.createSplatMesh(),this.controls=null,this.perspectiveControls=null,this.orthographicControls=null,this.orthographicCamera=null,this.perspectiveCamera=null,this.showMeshCursor=!1,this.showControlPlane=!1,this.showInfo=!1,this.sceneHelper=null,this.sortWorker=null,this.sortRunning=!1,this.splatRenderCount=0,this.splatSortCount=0,this.lastSplatSortCount=0,this.sortWorkerIndexesToSort=null,this.sortWorkerSortedIndexes=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.preSortMessages=[],this.runAfterNextSort=[],this.selfDrivenModeRunning=!1,this.splatRenderReady=!1,this.raycaster=new X_t,this.infoPanel=null,this.startInOrthographicMode=!1,this.currentFPS=0,this.lastSortTime=0,this.consecutiveRenderFrames=0,this.previousCameraTarget=new ft,this.nextCameraTarget=new ft,this.mousePosition=new cr,this.mouseDownPosition=new cr,this.mouseDownTime=null,this.resizeObserver=null,this.mouseMoveListener=null,this.mouseDownListener=null,this.mouseUpListener=null,this.keyDownListener=null,this.sortPromise=null,this.sortPromiseResolver=null,this.splatSceneDownloadPromises={},this.splatSceneDownloadAndBuildPromise=null,this.splatSceneRemovalPromise=null,this.loadingSpinner=new W8(null,this.rootElement||document.body),this.loadingSpinner.hide(),this.loadingProgressBar=new $_t(this.rootElement||document.body),this.loadingProgressBar.hide(),this.infoPanel=new G_t(this.rootElement||document.body),this.infoPanel.hide(),this.usingExternalCamera=!!(this.dropInMode||this.camera),this.usingExternalRenderer=!!(this.dropInMode||this.renderer),this.initialized=!1,this.disposing=!1,this.disposed=!1,this.disposePromise=null,this.dropInMode||this.init()}createSplatMesh(){this.splatMesh=new Fs(this.splatRenderMode,this.dynamicScene,this.enableOptionalEffects,this.halfPrecisionCovariancesOnGPU,this.devicePixelRatio,this.gpuAcceleratedSort,this.integerBasedSort,this.antialiased,this.maxScreenSpaceSplatSize,this.logLevel,this.sphericalHarmonicsDegree,this.sceneFadeInRateMultiplier,this.kernel2DSize),this.splatMesh.frustumCulled=!1,this.onSplatMeshChangedCallback&&this.onSplatMeshChangedCallback()}init(){this.initialized||(this.rootElement||(this.usingExternalRenderer?this.rootElement=this.renderer.domElement||document.body:(this.rootElement=document.createElement("div"),this.rootElement.style.width="100%",this.rootElement.style.height="100%",this.rootElement.style.position="absolute",document.body.appendChild(this.rootElement))),this.setupCamera(),this.setupRenderer(),this.setupWebXR(this.webXRSessionInit),this.setupControls(),this.setupEventHandlers(),this.threeScene=this.threeScene||new d0t,this.sceneHelper=new Px(this.threeScene),this.sceneHelper.setupMeshCursor(),this.sceneHelper.setupFocusMarker(),this.sceneHelper.setupControlPlane(),this.loadingProgressBar.setContainer(this.rootElement),this.loadingSpinner.setContainer(this.rootElement),this.infoPanel.setContainer(this.rootElement),this.initialized=!0)}setupCamera(){if(!this.usingExternalCamera){const e=new cr;this.getRenderDimensions(e),this.perspectiveCamera=new Pu(ybt,e.x/e.y,.1,1e3),this.orthographicCamera=new oU(e.x/-2,e.x/2,e.y/2,e.y/-2,.1,1e3),this.camera=this.startInOrthographicMode?this.orthographicCamera:this.perspectiveCamera,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt)}}setupRenderer(){if(!this.usingExternalRenderer){const e=new cr;this.getRenderDimensions(e),this.renderer=new e_t({antialias:!1,precision:"highp"}),this.renderer.setPixelRatio(this.devicePixelRatio),this.renderer.autoClear=!0,this.renderer.setClearColor(new Di(0),0),this.renderer.setSize(e.x,e.y),this.resizeObserver=new ResizeObserver(()=>{this.getRenderDimensions(e),this.renderer.setSize(e.x,e.y),this.forceRenderNextFrame()}),this.resizeObserver.observe(this.rootElement),this.rootElement.appendChild(this.renderer.domElement)}}setupWebXR(e){this.webXRMode&&(this.webXRMode===vy.VR?this.rootElement.appendChild(__.createButton(this.renderer,e)):this.webXRMode===vy.AR&&this.rootElement.appendChild(gbt.createButton(this.renderer,e)),this.renderer.xr.addEventListener("sessionstart",t=>{this.webXRActive=!0}),this.renderer.xr.addEventListener("sessionend",t=>{this.webXRActive=!1}),this.renderer.xr.enabled=!0,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt))}setupControls(){if(this.useBuiltInControls&&this.webXRMode===vy.None){this.usingExternalCamera?this.camera.isOrthographicCamera?this.orthographicControls=new qA(this.camera,this.renderer.domElement):this.perspectiveControls=new qA(this.camera,this.renderer.domElement):(this.perspectiveControls=new qA(this.perspectiveCamera,this.renderer.domElement),this.orthographicControls=new qA(this.orthographicCamera,this.renderer.domElement));for(let e of[this.orthographicControls,this.perspectiveControls])e&&(e.listenToKeyEvents(window),e.rotateSpeed=.5,e.maxPolarAngle=Math.PI*.75,e.minPolarAngle=.1,e.enableDamping=!0,e.dampingFactor=.05,e.target.copy(this.initialCameraLookAt),e.update());this.controls=this.camera.isOrthographicCamera?this.orthographicControls:this.perspectiveControls,this.controls.update()}}setupEventHandlers(){this.useBuiltInControls&&this.webXRMode===vy.None&&(this.mouseMoveListener=this.onMouseMove.bind(this),this.renderer.domElement.addEventListener("pointermove",this.mouseMoveListener,!1),this.mouseDownListener=this.onMouseDown.bind(this),this.renderer.domElement.addEventListener("pointerdown",this.mouseDownListener,!1),this.mouseUpListener=this.onMouseUp.bind(this),this.renderer.domElement.addEventListener("pointerup",this.mouseUpListener,!1),this.keyDownListener=this.onKeyDown.bind(this),window.addEventListener("keydown",this.keyDownListener,!1))}removeEventHandlers(){this.useBuiltInControls&&(this.renderer.domElement.removeEventListener("pointermove",this.mouseMoveListener),this.mouseMoveListener=null,this.renderer.domElement.removeEventListener("pointerdown",this.mouseDownListener),this.mouseDownListener=null,this.renderer.domElement.removeEventListener("pointerup",this.mouseUpListener),this.mouseUpListener=null,window.removeEventListener("keydown",this.keyDownListener),this.keyDownListener=null)}setRenderMode(e){this.renderMode=e}setActiveSphericalHarmonicsDegrees(e){this.splatMesh.material.uniforms.sphericalHarmonicsDegree.value=e,this.splatMesh.material.uniformsNeedUpdate=!0}onSplatMeshChanged(e){this.onSplatMeshChangedCallback=e}onMouseMove(e){this.mousePosition.set(e.offsetX,e.offsetY)}onMouseDown(){this.mouseDownPosition.copy(this.mousePosition),this.mouseDownTime=hy()}onMouseClick(e){this.mousePosition.set(e.offsetX,e.offsetY),this.checkForFocalPointChange()}getRenderDimensions(e){this.rootElement?(e.x=this.rootElement.offsetWidth,e.y=this.rootElement.offsetHeight):this.renderer.getSize(e)}setOrthographicMode(e){if(e===this.camera.isOrthographicCamera)return;const t=this.camera,r=e?this.orthographicCamera:this.perspectiveCamera;if(r.position.copy(t.position),r.up.copy(t.up),r.rotation.copy(t.rotation),r.quaternion.copy(t.quaternion),r.matrix.copy(t.matrix),this.camera=r,this.controls){const i=o=>{o.saveState(),o.reset()},a=this.controls,s=e?this.orthographicControls:this.perspectiveControls;i(s),i(a),s.target.copy(a.target),e?lp.setCameraZoomFromPosition(r,t,a):lp.setCameraPositionFromZoom(r,t,s),this.controls=s,this.camera.lookAt(this.controls.target)}}adjustForWebXRStereo(e){if(this.camera&&this.webXRActive){const r=this.renderer.xr.getCamera().projectionMatrix.elements[0],i=this.camera.projectionMatrix.elements[0];e.x*=i/r}}isLoadingOrUnloading(){return Object.keys(this.splatSceneDownloadPromises).length>0||this.splatSceneDownloadAndBuildPromise!==null||this.splatSceneRemovalPromise!==null}isDisposingOrDisposed(){return this.disposing||this.disposed}addSplatSceneDownloadPromise(e){this.splatSceneDownloadPromises[e.id]=e}removeSplatSceneDownloadPromise(e){delete this.splatSceneDownloadPromises[e.id]}setSplatSceneDownloadAndBuildPromise(e){this.splatSceneDownloadAndBuildPromise=e}clearSplatSceneDownloadAndBuildPromise(){this.splatSceneDownloadAndBuildPromise=null}addSplatScene(e,t={}){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");t.progressiveLoad&&this.splatMesh.scenes&&this.splatMesh.scenes.length>0&&(console.log('addSplatScene(): "progressiveLoad" option ignore because there are multiple splat scenes'),t.progressiveLoad=!1);const r=t.format!==void 0&&t.format!==null?t.format:YQ(e),i=lp.isProgressivelyLoadable(r)&&t.progressiveLoad,a=t.showLoadingUI!==void 0&&t.showLoadingUI!==null?t.showLoadingUI:!0;let s=null;a&&(this.loadingSpinner.removeAllTasks(),s=this.loadingSpinner.addTask("Downloading..."));const o=()=>{this.loadingProgressBar.hide(),this.loadingSpinner.removeAllTasks()},l=(m,v,g)=>{if(a)if(g===ls.Downloading)if(m==100)this.loadingSpinner.setMessageForTask(s,"Download complete!");else if(i)this.loadingSpinner.setMessageForTask(s,"Downloading splats...");else{const y=v?`: ${v}`:"...";this.loadingSpinner.setMessageForTask(s,`Downloading${y}`)}else g===ls.Processing&&this.loadingSpinner.setMessageForTask(s,"Processing splats...")};let u=!1,c=0;const d=(m,v)=>{a&&((m&&i||v&&!i)&&(this.loadingSpinner.removeTask(s),!v&&!u&&this.loadingProgressBar.show()),i&&(v?(u=!0,this.loadingProgressBar.hide()):this.loadingProgressBar.setProgress(c)))},f=(m,v,g)=>{c=m,l(m,v,g),t.onProgress&&t.onProgress(m,v,g)},h=(m,v,g)=>{!i&&t.onProgress&&t.onProgress(0,"0%",ls.Processing);const y={rotation:t.rotation||t.orientation,position:t.position,scale:t.scale,splatAlphaRemovalThreshold:t.splatAlphaRemovalThreshold};return this.addSplatBuffers([m],[y],g,v&&a,a,i,i).then(()=>{!i&&t.onProgress&&t.onProgress(100,"100%",ls.Processing),d(v,g)})};return(i?this.downloadAndBuildSingleSplatSceneProgressiveLoad.bind(this):this.downloadAndBuildSingleSplatSceneStandardLoad.bind(this))(e,r,t.splatAlphaRemovalThreshold,h.bind(this),f,o.bind(this),t.headers)}downloadAndBuildSingleSplatSceneStandardLoad(e,t,r,i,a,s,o){const l=this.downloadSplatSceneToSplatBuffer(e,r,a,!1,void 0,t,o),u=pL(l.abortHandler);return l.then(c=>(this.removeSplatSceneDownloadPromise(l),i(c,!0,!0).then(()=>{u.resolve(),this.clearSplatSceneDownloadAndBuildPromise()}))).catch(c=>{s&&s(),this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(l);const d=c instanceof QE?c:new Error(`Viewer::addSplatScene -> Could not load file ${e}`);u.reject(d)}),this.addSplatSceneDownloadPromise(l),this.setSplatSceneDownloadAndBuildPromise(u.promise),u.promise}downloadAndBuildSingleSplatSceneProgressiveLoad(e,t,r,i,a,s,o){let l=0,u=!1;const c=[],d=()=>{if(c.length>0&&!u&&!this.isDisposingOrDisposed()){u=!0;const v=c.shift();i(v.splatBuffer,v.firstBuild,v.finalBuild).then(()=>{u=!1,v.firstBuild?p.resolve():v.finalBuild&&(m.resolve(),this.clearSplatSceneDownloadAndBuildPromise()),c.length>0&&Rc(()=>d())})}},f=(v,g)=>{this.isDisposingOrDisposed()||(g||c.length===0||v.getSplatCount()>c[0].splatBuffer.getSplatCount())&&(c.push({splatBuffer:v,firstBuild:l===0,finalBuild:g}),l++,d())},h=this.downloadSplatSceneToSplatBuffer(e,r,a,!0,f,t,o),p=pL(h.abortHandler),m=pL();return this.addSplatSceneDownloadPromise(h),this.setSplatSceneDownloadAndBuildPromise(m.promise),h.then(()=>{this.removeSplatSceneDownloadPromise(h)}).catch(v=>{this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(h);const g=v instanceof QE?v:new Error("Viewer::addSplatScene -> Could not load one or more scenes");p.reject(g),s&&s(g)}),p.promise}addSplatScenes(e,t=!0,r=void 0){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");const i=e.length,a=[];let s;t&&(this.loadingSpinner.removeAllTasks(),s=this.loadingSpinner.addTask("Downloading..."));const o=(d,f,h,p)=>{a[d]=f;let m=0;for(let v=0;v<i;v++)m+=a[v]||0;m=m/i,h=`${m.toFixed(2)}%`,t&&p===ls.Downloading&&this.loadingSpinner.setMessageForTask(s,m==100?"Download complete!":`Downloading: ${h}`),r&&r(m,h,p)},l=[],u=[];for(let d=0;d<e.length;d++){const f=e[d],h=f.format!==void 0&&f.format!==null?f.format:YQ(f.path),p=this.downloadSplatSceneToSplatBuffer(f.path,f.splatAlphaRemovalThreshold,o.bind(this,d),!1,void 0,h,f.headers);l.push(p),u.push(p.promise)}const c=new uw((d,f)=>{Promise.all(u).then(h=>{t&&this.loadingSpinner.removeTask(s),r&&r(0,"0%",ls.Processing),this.addSplatBuffers(h,e,!0,t,t,!1,!1).then(()=>{r&&r(100,"100%",ls.Processing),this.clearSplatSceneDownloadAndBuildPromise(),d()})}).catch(h=>{t&&this.loadingSpinner.removeTask(s),this.clearSplatSceneDownloadAndBuildPromise();const p=h instanceof QE?h:new Error("Viewer::addSplatScenes -> Could not load one or more splat scenes.");f(p)}).finally(()=>{this.removeSplatSceneDownloadPromise(c)})},d=>{for(let f of l)f.abort(d)});return this.addSplatSceneDownloadPromise(c),this.setSplatSceneDownloadAndBuildPromise(c),c}downloadSplatSceneToSplatBuffer(e,t=1,r=void 0,i=!1,a=void 0,s,o){const l=i?!1:this.optimizeSplatData;try{if(s===wf.Splat)return wU.loadFromURL(e,r,i,a,t,this.inMemoryCompressionLevel,l,o);if(s===wf.KSplat)return G8.loadFromURL(e,r,i,a,o);if(s===wf.Ply)return xU.loadFromURL(e,r,i,a,t,this.inMemoryCompressionLevel,l,this.sphericalHarmonicsDegree,o)}catch(u){throw u instanceof SU?new Error("File type or server does not support progressive loading."):u}throw new Error(`Viewer::downloadSplatSceneToSplatBuffer -> File format not supported: ${e}`)}static isProgressivelyLoadable(e){return e===wf.Splat||e===wf.KSplat||e===wf.Ply}setupSortWorker(e){if(!this.isDisposingOrDisposed())return new Promise(t=>{const r=this.integerBasedSort?Int32Array:Float32Array,i=e.getSplatCount(),a=e.getMaxSplatCount();this.sortWorker=vbt(a,this.sharedMemoryForWorkers,this.enableSIMDInSort,this.integerBasedSort,this.splatMesh.dynamicMode,this.splatSortDistanceMapPrecision),this.sortWorker.onmessage=s=>{if(s.data.sortDone){if(this.sortRunning=!1,this.sharedMemoryForWorkers)this.splatMesh.updateRenderIndexes(this.sortWorkerSortedIndexes,s.data.splatRenderCount);else{const o=new Uint32Array(s.data.sortedIndexes.buffer,0,s.data.splatRenderCount);this.splatMesh.updateRenderIndexes(o,s.data.splatRenderCount)}this.lastSplatSortCount=this.splatSortCount,this.lastSortTime=s.data.sortTime,this.sortPromiseResolver(),this.sortPromiseResolver=null,this.forceRenderNextFrame(),this.runAfterNextSort.length>0&&(this.runAfterNextSort.forEach(o=>{o()}),this.runAfterNextSort.length=0)}else if(s.data.sortCanceled)this.sortRunning=!1;else if(s.data.sortSetupPhase1Complete){this.logLevel>=_1.Info&&console.log("Sorting web worker WASM setup complete."),this.sharedMemoryForWorkers?(this.sortWorkerSortedIndexes=new Uint32Array(s.data.sortedIndexesBuffer,s.data.sortedIndexesOffset,a),this.sortWorkerIndexesToSort=new Uint32Array(s.data.indexesToSortBuffer,s.data.indexesToSortOffset,a),this.sortWorkerPrecomputedDistances=new r(s.data.precomputedDistancesBuffer,s.data.precomputedDistancesOffset,a),this.sortWorkerTransforms=new Float32Array(s.data.transformsBuffer,s.data.transformsOffset,fi.MaxScenes*16)):(this.sortWorkerIndexesToSort=new Uint32Array(a),this.sortWorkerPrecomputedDistances=new r(a),this.sortWorkerTransforms=new Float32Array(fi.MaxScenes*16));for(let o=0;o<i;o++)this.sortWorkerIndexesToSort[o]=o;if(this.sortWorker.maxSplatCount=a,this.logLevel>=_1.Info){console.log("Sorting web worker ready.");const o=this.splatMesh.getSplatDataTextures(),l=o.covariances.size,u=o.centerColors.size;console.log("Covariances texture size: "+l.x+" x "+l.y),console.log("Centers/colors texture size: "+u.x+" x "+u.y)}t()}}})}disposeSortWorker(){this.sortWorker&&this.sortWorker.terminate(),this.sortWorker=null,this.sortPromise=null,this.sortPromiseResolver&&(this.sortPromiseResolver(),this.sortPromiseResolver=null),this.preSortMessages=[],this.sortRunning=!1}removeSplatScene(e,t=!0){return this.removeSplatScenes([e],t)}removeSplatScenes(e,t=!0){if(this.isLoadingOrUnloading())throw new Error("Cannot remove splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot remove splat scene after dispose() is called.");let r;return this.splatSceneRemovalPromise=new Promise((i,a)=>{let s;t&&(this.loadingSpinner.removeAllTasks(),this.loadingSpinner.show(),s=this.loadingSpinner.addTask("Removing splat scene..."));const o=()=>{t&&(this.loadingSpinner.hide(),this.loadingSpinner.removeTask(s))},l=c=>{o(),this.splatSceneRemovalPromise=null,c?a(c):i()},u=()=>this.isDisposingOrDisposed()?(l(),!0):!1;r=this.sortPromise||Promise.resolve(),r.then(()=>{if(u())return;const c=[],d=[],f=[];for(let h=0;h<this.splatMesh.scenes.length;h++){let p=!1;for(let m of e)if(m===h){p=!0;break}if(!p){const m=this.splatMesh.scenes[h];c.push(m.splatBuffer),d.push(this.splatMesh.sceneOptions[h]),f.push({position:m.position.clone(),quaternion:m.quaternion.clone(),scale:m.scale.clone()})}}this.disposeSortWorker(),this.splatMesh.dispose(),this.sceneRevealMode=kx.Instant,this.createSplatMesh(),this.addSplatBuffers(c,d,!0,!1,!0).then(()=>{u()||(o(),this.splatMesh.scenes.forEach((h,p)=>{h.position.copy(f[p].position),h.quaternion.copy(f[p].quaternion),h.scale.copy(f[p].scale)}),this.splatMesh.updateTransforms(),this.splatRenderReady=!1,this.runSplatSort(!0).then(()=>{if(u()){this.splatRenderReady=!0;return}r=this.sortPromise||Promise.resolve(),r.then(()=>{this.splatRenderReady=!0,l()})}))}).catch(h=>{l(h)})})}),this.splatSceneRemovalPromise}start(){if(this.selfDrivenMode)this.webXRMode?this.renderer.setAnimationLoop(this.selfDrivenUpdateFunc):this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc),this.selfDrivenModeRunning=!0;else throw new Error("Cannot start viewer unless it is in self driven mode.")}stop(){this.selfDrivenMode&&this.selfDrivenModeRunning&&(this.webXRMode?this.renderer.setAnimationLoop(null):cancelAnimationFrame(this.requestFrameId),this.selfDrivenModeRunning=!1)}async dispose(){if(this.isDisposingOrDisposed())return this.disposePromise;let e=[],t=[];for(let r in this.splatSceneDownloadPromises)if(this.splatSceneDownloadPromises.hasOwnProperty(r)){const i=this.splatSceneDownloadPromises[r];t.push(i),e.push(i.promise)}return this.sortPromise&&e.push(this.sortPromise),this.disposing=!0,this.disposePromise=Promise.all(e).finally(()=>{this.stop(),this.orthographicControls&&(this.orthographicControls.dispose(),this.orthographicControls=null),this.perspectiveControls&&(this.perspectiveControls.dispose(),this.perspectiveControls=null),this.controls=null,this.splatMesh&&(this.splatMesh.dispose(),this.splatMesh=null),this.sceneHelper&&(this.sceneHelper.dispose(),this.sceneHelper=null),this.resizeObserver&&(this.resizeObserver.unobserve(this.rootElement),this.resizeObserver=null),this.disposeSortWorker(),this.removeEventHandlers(),this.loadingSpinner.removeAllTasks(),this.loadingSpinner.setContainer(null),this.loadingProgressBar.hide(),this.loadingProgressBar.setContainer(null),this.infoPanel.setContainer(null),this.camera=null,this.threeScene=null,this.splatRenderReady=!1,this.initialized=!1,this.renderer&&(this.usingExternalRenderer||(this.rootElement.removeChild(this.renderer.domElement),this.renderer.dispose()),this.renderer=null),this.usingExternalRenderer||document.body.removeChild(this.rootElement),this.sortWorkerSortedIndexes=null,this.sortWorkerIndexesToSort=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.disposed=!0,this.disposing=!1,this.disposePromise=null}),t.forEach(r=>{r.abort("Scene disposed")}),this.disposePromise}selfDrivenUpdate(){this.selfDrivenMode&&!this.webXRMode&&(this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc)),this.update(),this.shouldRender()?(this.render(),this.consecutiveRenderFrames++):this.consecutiveRenderFrames=0,this.renderNextFrame=!1}forceRenderNextFrame(){this.renderNextFrame=!0}update(e,t){this.dropInMode&&this.updateForDropInMode(e,t),!(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())&&(this.controls&&(this.controls.update(),this.camera.isOrthographicCamera&&!this.usingExternalCamera&&lp.setCameraPositionFromZoom(this.camera,this.camera,this.controls)),this.runSplatSort(),this.updateForRendererSizeChanges(),this.updateSplatMesh(),this.updateMeshCursor(),this.updateFPS(),this.timingSensitiveUpdates(),this.updateInfoPanel(),this.updateControlPlane())}updateForDropInMode(e,t){this.renderer=e,this.splatMesh&&this.splatMesh.setRenderer(this.renderer),this.camera=t,this.controls&&(this.controls.object=t),this.init()}updateControlPlane(){this.showControlPlane?(this.sceneHelper.setControlPlaneVisibility(!0),this.sceneHelper.positionAndOrientControlPlane(this.controls.target,this.camera.up)):this.sceneHelper.setControlPlaneVisibility(!1)}getSplatMesh(){return this.splatMesh}getSplatScene(e){return this.splatMesh.getScene(e)}getSceneCount(){return this.splatMesh.getSceneCount()}isMobile(){return navigator.userAgent.includes("Mobi")}};En(lp,"setCameraPositionFromZoom",function(){const e=new ft;return function(t,r,i){const a=1/(r.zoom*.001);e.copy(i.target).sub(t.position).normalize().multiplyScalar(a).negate(),t.position.copy(i.target).add(e)}}()),En(lp,"setCameraZoomFromPosition",function(){const e=new ft;return function(t,r,i){const a=e.copy(i.target).sub(r.position).length();t.zoom=1/(a*.001)}}());let sZ=lp;const Tbt={components:{Title:u9e,Abstract:p9e,BibTeX:S9e,Carousel:YUe,Video:yje,ImageSlider:Ije,ImageSliderInner:Gje,Table:oat}};function Cbt(n,e,t,r,i,a){const s=Kt("Title"),o=Kt("Carousel"),l=Kt("Video"),u=Kt("Abstract"),c=Kt("Latex"),d=Kt("Table"),f=Kt("Collapse"),h=Kt("Echart"),p=Kt("Model3D"),m=Kt("GaussianSplats3D"),v=Kt("SeletionForComparison"),g=Kt("ImageSliderInner"),y=Kt("ImageSlider"),_=Kt("BibTeX"),b=Kt("Comment");return W(),Se(on,null,[be(s),be(o),be(l),be(u),be(c),be(d),be(f),be(h),be(p),be(m),be(v),be(g),be(y),be(_),be(b)],64)}const Abt=$c(Tbt,[["render",Cbt]]),Ihe=n=>(x_("data-v-4858f2ee"),n=n(),w_(),n),Ebt={class:"bg"},Mbt={class:"footer"},Ibt=["href"],Dbt=Ihe(()=>Ce("br",null,null,-1)),Pbt=["href"],Rbt=["href"],kbt=["href"],Lbt=Ihe(()=>Ce("br",null,null,-1)),Obt=["href"],Nbt=Ne({__name:"Footer",setup(n){const e={Nerfies:"https://github.com/nerfies/nerfies.github.io",Vue:"https://cn.vuejs.org/",Vite:"https://cn.vitejs.dev/",ElementPlus:"https://element-plus.org/zh-CN/",template:"https://github.com/JunyaoHu/academic-project-page-template-vue"};return(t,r)=>{const i=Kt("el-row"),a=Kt("el-watermark");return W(),Se("div",Ebt,[be(a,{content:["JunyaoHu","Academic Project","Page Template"],gap:["60","0"],"z-index":0},{default:Oe(()=>[be(i,{justify:"center"},{default:Oe(()=>[Ce("p",Mbt,[Xn(" This template is inspired by "),Ce("a",{href:e.Nerfies},"Nerfies",8,Ibt),Xn(","),Dbt,Xn(" powered by "),Ce("a",{href:e.Vue},"Vue",8,Pbt),Xn(", "),Ce("a",{href:e.Vite},"Vite",8,Rbt),Xn(", and "),Ce("a",{href:e.ElementPlus},"Element Plus",8,kbt),Xn("."),Lbt,Xn(" You can fork🛠️ / star✨/ PR📃 from "),Ce("a",{href:e.template},"here",8,Obt),Xn(". ")])]),_:1})]),_:1})])}}}),Bbt=$c(Nbt,[["__scopeId","data-v-4858f2ee"]]),Fbt={components:{Header:X7e,Main:Abt,Footer:Bbt}};function Ubt(n,e,t,r,i,a){const s=Kt("Header"),o=Kt("el-header"),l=Kt("Main"),u=Kt("el-main"),c=Kt("Footer"),d=Kt("el-footer"),f=Kt("el-container"),h=Kt("el-backtop");return W(),Se("div",null,[be(f,null,{default:Oe(()=>[be(o,null,{default:Oe(()=>[be(s)]),_:1}),be(u,null,{default:Oe(()=>[be(l)]),_:1}),be(d,null,{default:Oe(()=>[be(c)]),_:1})]),_:1}),be(h,{right:40,bottom:80})])}const zbt=$c(Fbt,[["render",Ubt]]),Dhe=pJ(zbt);Dhe.use(q7e);Dhe.mount("#app")});export default Hbt();
